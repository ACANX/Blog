{"meta":{"version":1,"warehouse":"4.0.2"},"models":{"Asset":[{"_id":"source/favicons/android-chrome-192x192.png","path":"favicons/android-chrome-192x192.png","modified":0,"renderable":0},{"_id":"source/favicons/browserconfig.xml","path":"favicons/browserconfig.xml","modified":0,"renderable":0},{"_id":"source/favicons/android-chrome-512x512.png","path":"favicons/android-chrome-512x512.png","modified":0,"renderable":0},{"_id":"source/favicons/favicon-32x32.png","path":"favicons/favicon-32x32.png","modified":0,"renderable":0},{"_id":"source/favicons/favicon-16x16.png","path":"favicons/favicon-16x16.png","modified":0,"renderable":0},{"_id":"source/favicons/apple-touch-icon.png","path":"favicons/apple-touch-icon.png","modified":0,"renderable":0},{"_id":"source/favicons/favicon.ico","path":"favicons/favicon.ico","modified":0,"renderable":0},{"_id":"source/favicons/mstile-150x150.png","path":"favicons/mstile-150x150.png","modified":0,"renderable":0},{"_id":"source/favicons/safari-pinned-tab.svg","path":"favicons/safari-pinned-tab.svg","modified":0,"renderable":0},{"_id":"source/favicons/site.webmanifest","path":"favicons/site.webmanifest","modified":0,"renderable":0},{"_id":"source/static/image/20191125/BeanFactoryInitFlowChart.png","path":"static/image/20191125/BeanFactoryInitFlowChart.png","modified":0,"renderable":0},{"_id":"source/static/image/20180905/9100-port.png","path":"static/image/20180905/9100-port.png","modified":0,"renderable":0},{"_id":"source/static/image/20180905/9200-default.png","path":"static/image/20180905/9200-default.png","modified":0,"renderable":0},{"_id":"source/static/image/20191125/RelationshipBetweenDesignPattern.jpg","path":"static/image/20191125/RelationshipBetweenDesignPattern.jpg","modified":0,"renderable":0},{"_id":"source/static/image/20180905/ES启动.png","path":"static/image/20180905/ES启动.png","modified":0,"renderable":0},{"_id":"source/static/image/20180905/grunt-server.png","path":"static/image/20180905/grunt-server.png","modified":0,"renderable":0},{"_id":"source/static/image/20180905/node-v.png","path":"static/image/20180905/node-v.png","modified":0,"renderable":0},{"_id":"source/static/image/20180905/npm-install.png","path":"static/image/20180905/npm-install.png","modified":0,"renderable":0},{"_id":"source/static/image/20180905/git-clone.png","path":"static/image/20180905/git-clone.png","modified":0,"renderable":0},{"_id":"themes/aria/source/css/archive.styl","path":"css/archive.styl","modified":0,"renderable":1},{"_id":"themes/aria/source/css/atom-one-dark.css","path":"css/atom-one-dark.css","modified":0,"renderable":1},{"_id":"themes/aria/source/css/atom-one-light.css","path":"css/atom-one-light.css","modified":0,"renderable":1},{"_id":"themes/aria/source/css/categories.styl","path":"css/categories.styl","modified":0,"renderable":1},{"_id":"themes/aria/source/css/category.styl","path":"css/category.styl","modified":0,"renderable":1},{"_id":"themes/aria/source/css/commentjs.css","path":"css/commentjs.css","modified":0,"renderable":1},{"_id":"themes/aria/source/css/custom.styl","path":"css/custom.styl","modified":0,"renderable":1},{"_id":"themes/aria/source/css/footer.styl","path":"css/footer.styl","modified":0,"renderable":1},{"_id":"themes/aria/source/css/header.styl","path":"css/header.styl","modified":0,"renderable":1},{"_id":"themes/aria/source/css/comment.styl","path":"css/comment.styl","modified":0,"renderable":1},{"_id":"themes/aria/source/css/index.styl","path":"css/index.styl","modified":0,"renderable":1},{"_id":"themes/aria/source/css/info.styl","path":"css/info.styl","modified":0,"renderable":1},{"_id":"themes/aria/source/css/lightgallery.min.css","path":"css/lightgallery.min.css","modified":0,"renderable":1},{"_id":"themes/aria/source/css/main.styl","path":"css/main.styl","modified":0,"renderable":1},{"_id":"themes/aria/source/css/normalize.css","path":"css/normalize.css","modified":0,"renderable":1},{"_id":"themes/aria/source/css/nav.styl","path":"css/nav.styl","modified":0,"renderable":1},{"_id":"themes/aria/source/css/page.styl","path":"css/page.styl","modified":0,"renderable":1},{"_id":"themes/aria/source/css/post.styl","path":"css/post.styl","modified":0,"renderable":1},{"_id":"themes/aria/source/css/sidebar.styl","path":"css/sidebar.styl","modified":0,"renderable":1},{"_id":"themes/aria/source/css/solarized-dark.css","path":"css/solarized-dark.css","modified":0,"renderable":1},{"_id":"themes/aria/source/css/tag.styl","path":"css/tag.styl","modified":0,"renderable":1},{"_id":"themes/aria/source/css/tags.styl","path":"css/tags.styl","modified":0,"renderable":1},{"_id":"themes/aria/source/css/solarized-light.css","path":"css/solarized-light.css","modified":0,"renderable":1},{"_id":"themes/aria/source/css/toc.styl","path":"css/toc.styl","modified":0,"renderable":1},{"_id":"themes/aria/source/css/variables.styl","path":"css/variables.styl","modified":0,"renderable":1},{"_id":"themes/aria/source/fonts/lg.eot","path":"fonts/lg.eot","modified":0,"renderable":1},{"_id":"themes/aria/source/fonts/lg.svg","path":"fonts/lg.svg","modified":0,"renderable":1},{"_id":"themes/aria/source/fonts/lg.ttf","path":"fonts/lg.ttf","modified":0,"renderable":1},{"_id":"themes/aria/source/fonts/lg.woff","path":"fonts/lg.woff","modified":0,"renderable":1},{"_id":"themes/aria/source/images/ARIA_logo.png","path":"images/ARIA_logo.png","modified":0,"renderable":1},{"_id":"themes/aria/source/images/avatar.png","path":"images/avatar.png","modified":0,"renderable":1},{"_id":"themes/aria/source/images/background.png","path":"images/background.png","modified":0,"renderable":1},{"_id":"themes/aria/source/images/logo.png","path":"images/logo.png","modified":0,"renderable":1},{"_id":"themes/aria/source/images/sidebar_background.png","path":"images/sidebar_background.png","modified":0,"renderable":1},{"_id":"themes/aria/source/js/busuanzi.pure.mini.js","path":"js/busuanzi.pure.mini.js","modified":0,"renderable":1},{"_id":"themes/aria/source/js/clipboard.min.js","path":"js/clipboard.min.js","modified":0,"renderable":1},{"_id":"themes/aria/source/css/reward.styl","path":"css/reward.styl","modified":0,"renderable":1},{"_id":"themes/aria/source/js/commentjs.js","path":"js/commentjs.js","modified":0,"renderable":1},{"_id":"themes/aria/source/js/custom.js","path":"js/custom.js","modified":0,"renderable":1},{"_id":"themes/aria/source/js/fontawesome-all.min.js","path":"js/fontawesome-all.min.js","modified":0,"renderable":1},{"_id":"themes/aria/source/js/index.js","path":"js/index.js","modified":0,"renderable":1},{"_id":"themes/aria/source/js/jquery.min.js","path":"js/jquery.min.js","modified":0,"renderable":1},{"_id":"themes/aria/source/js/lg-hash.min.js","path":"js/lg-hash.min.js","modified":0,"renderable":1},{"_id":"themes/aria/source/js/lg-pager.min.js","path":"js/lg-pager.min.js","modified":0,"renderable":1},{"_id":"themes/aria/source/js/lg-fullscreen.min.js","path":"js/lg-fullscreen.min.js","modified":0,"renderable":1},{"_id":"themes/aria/source/js/highlight.min.js","path":"js/highlight.min.js","modified":0,"renderable":1},{"_id":"themes/aria/source/js/lg-thumbnail.min.js","path":"js/lg-thumbnail.min.js","modified":0,"renderable":1},{"_id":"themes/aria/source/js/lg-zoom.min.js","path":"js/lg-zoom.min.js","modified":0,"renderable":1},{"_id":"themes/aria/source/js/lightgallery.min.js","path":"js/lightgallery.min.js","modified":0,"renderable":1},{"_id":"themes/aria/source/js/search.js","path":"js/search.js","modified":0,"renderable":1},{"_id":"themes/aria/source/js/scrollspy.js","path":"js/scrollspy.js","modified":0,"renderable":1},{"_id":"themes/aria/source/js/timeago.min.js","path":"js/timeago.min.js","modified":0,"renderable":1},{"_id":"themes/aria/source/js/marked.min.js","path":"js/marked.min.js","modified":0,"renderable":1},{"_id":"themes/aria/source/js/util.js","path":"js/util.js","modified":0,"renderable":1}],"Cache":[{"_id":"themes/aria/.gitignore","hash":"56f762c37cacd5c14c1a4adc6b292c9a396bf911","modified":1742982666885},{"_id":"themes/aria/_config.yml.example","hash":"e0a5fab90bb2830939bcf30e73c0490c2a7e7a82","modified":1742982692776},{"_id":"themes/aria/LICENSE","hash":"b314c7ebb7d599944981908b7f3ed33a30e78f3a","modified":1742982666889},{"_id":"themes/aria/.github/CODE_OF_CONDUCT.md","hash":"5e0539f910e39b8ade342190ac25e063d6ee5c51","modified":1742982666884},{"_id":"themes/aria/package.json","hash":"5ef8c9d40d35972457b987bac60417b559db2355","modified":1742982692784},{"_id":"themes/aria/README.zh_CN.md","hash":"137b8fe043d2355e971545c08b3a48d857035efa","modified":1742982692776},{"_id":"themes/aria/.github/ISSUE_TEMPLATE.md","hash":"eb3960c0ee2c61d2a15511484ebcb6f7916c6f55","modified":1742982666885},{"_id":"themes/aria/README.md","hash":"c4415e18ffd99f83ce58da1991f541731284f518","modified":1742982692775},{"_id":"themes/aria/.github/CONTRIBUTING.md","hash":"21d46543d34276329205ccbf6c358b2d445dc78d","modified":1742982666884},{"_id":"themes/aria/languages/default.yml","hash":"464b268a470789b6138e1f695ada3d198ff7d5ed","modified":1742982692777},{"_id":"themes/aria/.github/PULL_REQUEST_TEMPLATE.md","hash":"3b4168de0d6910399bf3ec1726fe7c49fd879244","modified":1742982666885},{"_id":"themes/aria/languages/zh_CN.yml","hash":"3bfae439f6e73543e27a910be03ade0fdaec71f0","modified":1742982692777},{"_id":"themes/aria/layout/_layout.njk","hash":"8b251178a6422aae344a89aba7d9a640d8460e92","modified":1742982692778},{"_id":"themes/aria/layout/busuanzi.njk","hash":"fb40942194aacdb50edd9dcf3648e001dcede6bd","modified":1742982692778},{"_id":"themes/aria/layout/blogroll.njk","hash":"72b0b466953430d95c8efbfcb7b76d196acaf3ef","modified":1742982692778},{"_id":"themes/aria/layout/categories.njk","hash":"5a4cc590510c73ea8c0532a0ce8d6909e3468ec6","modified":1742982692779},{"_id":"themes/aria/layout/archive.njk","hash":"250b1c0781fbff68f64939ba9ef6d70734ab471b","modified":1742982692778},{"_id":"themes/aria/layout/comment.njk","hash":"fd0ce40d10f929e5599f5a4448d6ab71e3750976","modified":1742982692780},{"_id":"themes/aria/layout/category.njk","hash":"1455af3387dd1d800ca9f0bdb4c47088ad1d6f12","modified":1742982692779},{"_id":"themes/aria/layout/footer.njk","hash":"cc195ee2bd52daa5a62ee30c8dfa76b65923c646","modified":1742982692780},{"_id":"themes/aria/layout/nav.njk","hash":"cf4a8b3bc966f1b8babaea4ccd818704ebc7bf58","modified":1742982692781},{"_id":"themes/aria/layout/info.njk","hash":"40e33c7eefba517e383067dc1c02b090b4b959d9","modified":1742982692781},{"_id":"themes/aria/layout/index.njk","hash":"20b918d2aa29053b10a95dd8394d8b8e771e75ee","modified":1742982692781},{"_id":"themes/aria/layout/header.njk","hash":"faae4fb4d749f10427a109f2e8639b4fb535b2f9","modified":1742982692780},{"_id":"themes/aria/layout/reward.njk","hash":"5dcdb4a8863f98ffef04a06683cdb698bf33e2b2","modified":1742982692782},{"_id":"themes/aria/layout/page.njk","hash":"4e979a32ff2e3b427eb953762dfccb88416a39d8","modified":1742982692781},{"_id":"themes/aria/layout/post.njk","hash":"995c14c5e66099fbd33d4dd7e3fe43f35acb2a9f","modified":1742982692782},{"_id":"themes/aria/layout/sociallink.njk","hash":"78c1e5196c088c6968043e5aa4ae48d93eb14043","modified":1742982692783},{"_id":"themes/aria/layout/toc.njk","hash":"7a3ba692d65cb19b57ab510cf0f1047ebefa87e1","modified":1742982692784},{"_id":"themes/aria/layout/sidebar.njk","hash":"aa8f1334a8f6616768ad66c4789cb61339a233f0","modified":1742982692783},{"_id":"themes/aria/scripts/regexp-tags.js","hash":"72227879bc9a543628661ff121965062f105e0d8","modified":1742982666896},{"_id":"themes/aria/layout/tag.njk","hash":"6a148fdcc8e21f227bd10002e4696facecd04e12","modified":1742982692783},{"_id":"themes/aria/source/css/archive.styl","hash":"a40d6254043573da5631014dd4da48cd5cca130f","modified":1742982692784},{"_id":"themes/aria/layout/tags.njk","hash":"72954f0963ee6794c22434e5babf9cd17cff5de7","modified":1742982692783},{"_id":"themes/aria/source/css/categories.styl","hash":"4f70a8949ef65134d1ea1cc8bb0fe5cc3f71c1fe","modified":1742982692785},{"_id":"themes/aria/source/css/category.styl","hash":"c62b7436c7d23906a8c922d3ebf25ec2508d69bc","modified":1742982692785},{"_id":"themes/aria/source/css/atom-one-light.css","hash":"e432dc56345e4c5e74baffb36ea1b72f469ec2b5","modified":1742982666896},{"_id":"themes/aria/source/css/custom.styl","hash":"38ce5ca0147b93e89d56b76064267c874685b2fe","modified":1742982666897},{"_id":"themes/aria/source/css/footer.styl","hash":"8eb231a68ca5ccfde1967700527080bfd2ccdb67","modified":1742982692786},{"_id":"themes/aria/source/css/comment.styl","hash":"9b6cd5d187e0ad2e6daea805c27daff1dd659e3b","modified":1742982692785},{"_id":"themes/aria/source/css/commentjs.css","hash":"c9121d34acb984b285f6e3ff17c1757cf76dad09","modified":1742982666897},{"_id":"themes/aria/source/css/atom-one-dark.css","hash":"91671ed42c0ce1363843144a9666d34faddb7e27","modified":1742982666896},{"_id":"themes/aria/source/css/index.styl","hash":"4c6be55c5a3e3787e5b48874eb73a9ad6e92d845","modified":1742982692787},{"_id":"themes/aria/source/css/header.styl","hash":"c59f08a5edb4c91830b55da1c3b7e35ce7ac0b6d","modified":1742982692786},{"_id":"themes/aria/source/css/info.styl","hash":"0d77326c688d29a2bebebf8de3ab54dd4dc5681f","modified":1742982692787},{"_id":"themes/aria/source/css/main.styl","hash":"657401abbe3295dd28c62e90ce7b6bfdc63a2111","modified":1742982692787},{"_id":"themes/aria/source/css/page.styl","hash":"fb3453293745e954a87dc7f144c2e747ee1b724d","modified":1742982692788},{"_id":"themes/aria/source/css/lightgallery.min.css","hash":"9e76bdad163856774a96b1230a08dc506600a973","modified":1742982666898},{"_id":"themes/aria/source/css/tag.styl","hash":"3a39d43c98e961b6e409feb6c9c7f60729d63f84","modified":1742982692789},{"_id":"themes/aria/source/css/normalize.css","hash":"826bdf28095ebc25f5be69d58eadfc9e1b49b7f7","modified":1742982666899},{"_id":"themes/aria/source/css/sidebar.styl","hash":"faec02e47f7be5f4ca74ae25227182b73f4ca685","modified":1742982692789},{"_id":"themes/aria/source/css/tags.styl","hash":"26957cc52232ee5e38420d56fc174693432540ad","modified":1742982692789},{"_id":"themes/aria/source/css/solarized-dark.css","hash":"97bba4362e3001a93f1b111a140895cbe6047a81","modified":1742982666900},{"_id":"themes/aria/source/css/toc.styl","hash":"b0928c7fb916126d532f259cecfb8dd10bc4854f","modified":1742982692789},{"_id":"themes/aria/source/css/solarized-light.css","hash":"fe6779c179c3e6136384e463fdc6d3b08ff88ba7","modified":1742982666900},{"_id":"themes/aria/source/css/variables.styl","hash":"b5dfe18b6e1565e13d32cd8a0546c1e87a694aa5","modified":1742982692790},{"_id":"themes/aria/source/fonts/lg.ttf","hash":"f6421c0c397311ae09f9257aa58bcd5e9720f493","modified":1742982666901},{"_id":"themes/aria/source/css/nav.styl","hash":"70c6c261e1cead9d6f9d296bc752fe3d9baed785","modified":1742982692788},{"_id":"themes/aria/source/css/post.styl","hash":"9ef7f8f7bd3b40af0cba2878e02365beef718a5f","modified":1742982692788},{"_id":"themes/aria/source/fonts/lg.eot","hash":"54caf05a81e33d7bf04f2e420736ce6f1de5f936","modified":1742982666900},{"_id":"themes/aria/source/fonts/lg.woff","hash":"3048de344dd5cad4624e0127e58eaae4b576f574","modified":1742982666901},{"_id":"themes/aria/source/fonts/lg.svg","hash":"1dba95664d2933fe1c22fb95a2e1e3a21839870b","modified":1742982666900},{"_id":"themes/aria/source/images/ARIA_logo.png","hash":"94b3df25f98458c9a9d80dd908395a0f682f9f2b","modified":1742982692790},{"_id":"themes/aria/source/images/logo.png","hash":"94b3df25f98458c9a9d80dd908395a0f682f9f2b","modified":1742982692791},{"_id":"themes/aria/source/css/reward.styl","hash":"e483d6432466de64f16a2df324d7ecef909c7ba8","modified":1742982692789},{"_id":"themes/aria/source/images/avatar.png","hash":"e63be2fab169a0478af27c47240d1d123fa2b2ba","modified":1742982666901},{"_id":"themes/aria/source/js/commentjs.js","hash":"4a86e2daea116dc875445fe31815f0f43a8a7c78","modified":1742982666904},{"_id":"themes/aria/source/js/busuanzi.pure.mini.js","hash":"6e41f31100ae7eb3a6f23f2c168f6dd56e7f7a9a","modified":1742982666903},{"_id":"themes/aria/source/js/custom.js","hash":"4d04585e457716454ccb46843a7ff903981f7438","modified":1742982666904},{"_id":"themes/aria/source/js/clipboard.min.js","hash":"dc144353ec85169bb3c5f3c6d68b4e75f9bf28ea","modified":1742982666904},{"_id":"themes/aria/source/js/index.js","hash":"d5b366102b2e8817c5b4e6d44f3a3834d3bc8c84","modified":1742982692794},{"_id":"themes/aria/source/js/lg-hash.min.js","hash":"52c10707088f9fcbdef6a7974d31de2b6190a679","modified":1742982666911},{"_id":"themes/aria/source/js/lg-fullscreen.min.js","hash":"70c5a8c3598c19af1a50a7e5d1567483fb63c3c5","modified":1742982666911},{"_id":"themes/aria/source/js/lg-thumbnail.min.js","hash":"703c7d187625f4cf16891748250b00aeb6ca5479","modified":1742982666912},{"_id":"themes/aria/source/js/highlight.min.js","hash":"a8442546e96c3c319f4298bfb2fab7060d389f50","modified":1742982666910},{"_id":"themes/aria/source/js/lg-zoom.min.js","hash":"8f22823a55f11dc651700f59318fffd65eb47692","modified":1742982666912},{"_id":"themes/aria/source/js/lightgallery.min.js","hash":"5fac1b0ebb11c99e2ac268b19ed172191e55d23d","modified":1742982666912},{"_id":"themes/aria/source/js/search.js","hash":"f88664b910c8ae3dd9919405350efb39ada8291d","modified":1742982692794},{"_id":"themes/aria/source/js/lg-pager.min.js","hash":"6f7572b2a27d1b4902eda27882c01e608ae59e06","modified":1742982666911},{"_id":"themes/aria/source/js/scrollspy.js","hash":"2eafc89dae69269d6d4c47d7bd746e717bd38230","modified":1742982666913},{"_id":"themes/aria/source/js/timeago.min.js","hash":"d220fcc47be00effec6b5181b97cc0929d10031e","modified":1742982666913},{"_id":"themes/aria/source/js/util.js","hash":"bb56df6fc3768eb27d20ca7eab92c9654397d25e","modified":1742982666913},{"_id":"themes/aria/source/js/marked.min.js","hash":"00b4113ded8994ff7b495c36e013a19bc142375e","modified":1742982666912},{"_id":"themes/aria/source/js/jquery.min.js","hash":"0c3192b500a4fd550e483cf77a49806a5872185b","modified":1742982666911},{"_id":"source/_posts/ElasticSearch6.x安装.md","hash":"1ca39853ccfdf0f0ce0a1526499d953366ddfefb","modified":1742971432995},{"_id":"source/_posts/Hello-World.md","hash":"7c26005f3ea4730dee3bee2a8a8a2485ddb614ab","modified":1742971432996},{"_id":"source/_posts/Java基础-（2）开发环境搭建.md","hash":"f5d6570784eb81a238f39ddb4c74634ca40c02d4","modified":1742971432996},{"_id":"source/_posts/Java基础-（1）介绍.md","hash":"97c6f8567c123845bd3753ff46aff571ab3a08dc","modified":1742971432996},{"_id":"source/_posts/Java基础-（6）变量.md","hash":"2e33a3945f50268849f0716ac46e628959d2533c","modified":1742971432998},{"_id":"source/_posts/Java基础-（4）基础语法.md","hash":"94f979e07da48f51960ef70a80b29368c8676bcf","modified":1742971432997},{"_id":"source/_posts/Java基础-（3）对象和类.md","hash":"6185b5f74b97ba1ecc3716a51444022b69947ea5","modified":1742971432997},{"_id":"source/_posts/Java基础-（7）运算符.md","hash":"1eb355edfbb5aff8edc6c38912300a628b92ed14","modified":1742971432998},{"_id":"source/_posts/Java学习之23种设计模式深入理解.md","hash":"1f0b4242138a89d6d61d29abfd6e7633893d0775","modified":1742971432999},{"_id":"source/_posts/Java基础-（5）基本数据类型.md","hash":"5e0b5ca587893d98f96bd2159e93886470dc682e","modified":1742971432997},{"_id":"source/_posts/Java基础-（8）执行结构（顺序、循环、条件）.md","hash":"b8418e5ae8f20e969791861d88afc4ae55eb1e5f","modified":1742971432998},{"_id":"source/_posts/MyBatis中JavaBean 与MySQL的table字段自动映射.md","hash":"5a6ef7d678371522c2319e4ebb454817bd8a655f","modified":1742971433001},{"_id":"source/_posts/Win10安装JDK10.md","hash":"c4ff8a1f55ebc603ad6d8394b97698a711b97f04","modified":1742971433002},{"_id":"source/_posts/使用Hexo发布Markdown文档.md","hash":"c8e0a7b8cb89c04d50f52d6c2be51d26e20c10cf","modified":1742971433003},{"_id":"source/_posts/使用MKDocs发布Markdown文档.md","hash":"316e914ed04160d253e71b28c38bca56c3940cbe","modified":1742971433003},{"_id":"source/_posts/将JAR包发布到Maven中央仓库.md","hash":"b033ed2277dd54c6b52e783591cde8dbda876038","modified":1742971433003},{"_id":"source/_posts/文章样式HTML.md","hash":"efc19c580e4c8b3dc8cfcf991c254909db8fc3e8","modified":1742971433004},{"_id":"source/_posts/文章样式.md","hash":"1e0e6eb876dae44d61bf027079cf4298c2fd9dc0","modified":1742971433004},{"_id":"source/_posts/文章汇总.md","hash":"2b12ac21d3103aa15d4e5bd19e871e40b1d1ebdd","modified":1742971433004},{"_id":"source/_posts/树莓派.md","hash":"4c323ac0154fd1e3b7c84d954a23e5669bf48708","modified":1742971433005},{"_id":"source/_posts/树莓派安装MySQL8.md","hash":"5e8d244fde1a7796a8cd3c379814cf3e2796d021","modified":1742971433005},{"_id":"source/_posts/链接.md","hash":"1cc62679c303ed1ea99ff3137542980ff14626d9","modified":1742971433005},{"_id":"source/_posts/面朝大海，春暖花开.md","hash":"149455c13317fcfc9300aa7507c74f7a52879fb0","modified":1742971433005},{"_id":"source/_posts/面试-Java.md","hash":"f655b5b82010642b4689ca06169198e8f4dbb611","modified":1742971433006},{"_id":"source/_posts/面试-操作系统.md","hash":"fc3c7bfb4240bf63a98533e79d4674b2bc614217","modified":1742971433006},{"_id":"source/_posts/面试-算法与数据结构.md","hash":"50f04ec5294e38e955c6fd843fdf94bf6fc35ade","modified":1742971433006},{"_id":"source/_posts/面试-计算机组成原理.md","hash":"e24ed1f6013cd15245723ef813f064e135d8fdaa","modified":1742971433006},{"_id":"source/_posts/面试-计算机网络.md","hash":"e7b85e08ace1f6ad7c0fc5a54a0d9adb79fa6c03","modified":1742971433006},{"_id":"source/about/index.md","hash":"1cbfa2097505574736374e64224b0b63eb57def0","modified":1742971433007},{"_id":"source/favicons/android-chrome-192x192.png","hash":"696a6ca92f49eb59bca2b5d7589d1fbbd47b1509","modified":1742971433008},{"_id":"source/favicons/browserconfig.xml","hash":"4e104bfc1559f3088f25edc3409e9677415226ca","modified":1742971433009},{"_id":"source/favicons/favicon-32x32.png","hash":"0b9d60f7967bc16dcf800e87415a0bc196d69b1f","modified":1742971433010},{"_id":"source/favicons/favicon-16x16.png","hash":"66e46a022f495c5d72bc029619ecb63092f52049","modified":1742971433010},{"_id":"source/favicons/apple-touch-icon.png","hash":"43c7ca442de5437583ddb8b0ba517434b0327d10","modified":1742971433009},{"_id":"source/favicons/favicon.ico","hash":"9f654acb9fa55cbdf78df03f9316968761a83e56","modified":1742971433010},{"_id":"source/favicons/mstile-150x150.png","hash":"949098b804cd7880669b19dd0845c6e8f88b18f1","modified":1742971433011},{"_id":"source/favicons/safari-pinned-tab.svg","hash":"f47cdd7d68a69e2b1caae292461d6691faf747be","modified":1742971433011},{"_id":"source/favicons/site.webmanifest","hash":"c26f1f72ad968f601c2afaace75ae72551880254","modified":1742971433011},{"_id":"source/tags/index.md","hash":"cb05d1998a5dc6342224a5096524229889795501","modified":1742971433021},{"_id":"source/categories/index.md","hash":"a317406fad3efa41ac29297eb94b79abd827a492","modified":1742971433007},{"_id":"source/static/image/20180905/9200-default.png","hash":"13155a3389502476264f94580b6a245d707cbdb5","modified":1742971433013},{"_id":"source/static/image/20180905/grunt-server.png","hash":"97bee3b5fa59e1ecb16ed724801ebb0bc2c674b3","modified":1742971433016},{"_id":"source/static/image/20180905/node-v.png","hash":"81906bd1ff8843c130edccfb0f2709b96e3d39a1","modified":1742971433017},{"_id":"source/static/image/20180905/npm-install.png","hash":"410985b7a91e72d77d301626ee0d2aacceb343fa","modified":1742971433017},{"_id":"source/static/.github/workflows/static.yml","hash":"3e5f2e942ea0efdb1bb4a7b30dae4e75b04a820a","modified":1742971433012},{"_id":"source/_posts/Kubernetes集群部署实战(V1.23.3).md","hash":"8f3802d728e69f4ff024d97500a54ca0c9e3f3de","modified":1742971432999},{"_id":"source/_posts/MD代码样式.md","hash":"f369b5e84c3cf736b0338ff2c83ced60ab4ed730","modified":1742971433000},{"_id":"source/static/image/20180905/9100-port.png","hash":"b7cf31b31ec56b9612022a144ebede711ceb20ae","modified":1742971433013},{"_id":"source/static/image/20191125/RelationshipBetweenDesignPattern.jpg","hash":"5533c4baa4a9ee3e2315d805f40f42fe7d4af6ce","modified":1742971433021},{"_id":"source/static/image/20180905/git-clone.png","hash":"f8aebf3cc2f74cee9542cef1bfe27a4de2c984ce","modified":1742971433016},{"_id":"source/_posts/Spring-IoC容器源码导读.md","hash":"7720c12349fc7ff680787a7b6826aefc17e9ed6a","modified":1742971433002},{"_id":"source/favicons/android-chrome-512x512.png","hash":"f921689ca52796f1b6d5dab7763289619239fa2a","modified":1742971433009},{"_id":"source/static/image/20191125/BeanFactoryInitFlowChart.png","hash":"6e31bd4711aec9efb5c929292eed0e23eb1c0dc5","modified":1742971433020},{"_id":"themes/aria/source/images/background.png","hash":"c34366140a0250afbd73d62abdc58b1e00e10355","modified":1742982666903},{"_id":"themes/aria/source/images/sidebar_background.png","hash":"c34366140a0250afbd73d62abdc58b1e00e10355","modified":1742982692792},{"_id":"source/static/image/20180905/ES启动.png","hash":"6d523ddd2e329ebc2b963c63d4abc4fc078cc235","modified":1742971433015},{"_id":"themes/aria/ARIA.png","hash":"4d9349d81236b2ad3384d92b5af789aafe71926e","modified":1742982666889},{"_id":"themes/aria/source/js/fontawesome-all.min.js","hash":"9a640b9c1e184379ae50d1407b11608252bb82e8","modified":1742982692793},{"_id":"public/atom.xml","hash":"f4a0d64bc2358fa419cb2495a15d8a668daa3c15","modified":1742982897279},{"_id":"public/search.xml","hash":"748d5e4963b1937e2b8c0d542291ae0fed2013a4","modified":1742982897279},{"_id":"public/about/index.html","hash":"76ba071d28c61761a7a7743403daaa5f3910452a","modified":1742982897279},{"_id":"public/tags/index.html","hash":"18d8e8140b88d72873b261de15363623bee2a50a","modified":1742982897279},{"_id":"public/categories/index.html","hash":"474bdf59e93d65b51707f5cc425a81dce013efda","modified":1742982897279},{"_id":"public/2025/03/20/使用Hexo发布Markdown文档/index.html","hash":"b6bd8901b517c54348c0176d2c108f0a2e90c63b","modified":1742982897279},{"_id":"public/2021/07/27/树莓派安装MySQL8/index.html","hash":"b8e25a28aaac825b6a8992c852310d62aa0ef788","modified":1742982897279},{"_id":"public/2021/06/30/树莓派/index.html","hash":"a586b08c9b211e71aa519017837e1df58cb34208","modified":1742982897279},{"_id":"public/2021/03/20/将JAR包发布到Maven中央仓库/index.html","hash":"7e2e557fc205f65909d261d4e77de5e1cf563549","modified":1742982897279},{"_id":"public/2021/03/14/文章汇总/index.html","hash":"b982d2048e668eb0e829aa396fef8a2c6df46772","modified":1742982897279},{"_id":"public/2018/07/07/Win10安装JDK10/index.html","hash":"c1da398eb4854f7a772a43bd2dd9c66cdf7d705a","modified":1742982897279},{"_id":"public/2018/06/30/Java基础-（2）开发环境搭建/index.html","hash":"c6fd6e6f14fa668dbef88c7a67833fc64b25e536","modified":1742982897279},{"_id":"public/2018/06/30/Java基础-（4）基础语法/index.html","hash":"bbc0ddb78fe2a2a674fb780f23bd8564ed54144c","modified":1742982897279},{"_id":"public/2018/06/30/Java基础-（6）变量/index.html","hash":"59a3845904b708c6bb99bd3c0a724c5da2d24ab8","modified":1742982897279},{"_id":"public/2018/06/30/Java基础-（3）对象和类/index.html","hash":"9236aaa4a95cb5fdbfe0758e9813208d3248391b","modified":1742982897279},{"_id":"public/2018/06/30/Java基础-（5）基本数据类型/index.html","hash":"f26e97c7422b223533cf0de48a9c7a859047e05e","modified":1742982897279},{"_id":"public/2018/06/27/Java基础-（7）运算符/index.html","hash":"ba7bcde9f7b5131352384c2d94fa43b515956ceb","modified":1742982897279},{"_id":"public/2018/06/27/Java基础-（8）执行结构（顺序、循环、条件）/index.html","hash":"4e7235d161ee6cf0c6020ea94c1d5613de2d293e","modified":1742982897279},{"_id":"public/2018/06/27/链接/index.html","hash":"0266c00ed0073cf525c01ce85aed5f5bb709b19b","modified":1742982897279},{"_id":"public/2018/06/27/面试-Java/index.html","hash":"99cee4be85a46909bf4f661bceb993c2d8c68f08","modified":1742982897279},{"_id":"public/2018/06/27/面试-算法与数据结构/index.html","hash":"f7fa9e02e52274d57e98ded4e70875938add0200","modified":1742982897279},{"_id":"public/2018/06/27/面试-计算机组成原理/index.html","hash":"36dab60f3d6ddd811827f537557fd28703f17de6","modified":1742982897279},{"_id":"public/2018/06/27/面试-操作系统/index.html","hash":"576614ceb55861c0c3fc9a1a55e10336afb6e41e","modified":1742982897279},{"_id":"public/2018/06/27/面试-计算机网络/index.html","hash":"080d1932e940c1a1ec96266fc2e2fd9b7b9fcc28","modified":1742982897279},{"_id":"public/2018/06/26/面朝大海，春暖花开/index.html","hash":"d0e17f873f68729755accd7aa51d460ad52b3433","modified":1742982897279},{"_id":"public/2018/06/26/Hello-World/index.html","hash":"e2a52fdbf0e443fd7e7e7c91895878ac21db64eb","modified":1742982897279},{"_id":"public/archives/index.html","hash":"ba37ec5289419080b144c8bc773866f4c3eab841","modified":1742982897279},{"_id":"public/archives/page/2/index.html","hash":"2933a1370190132532b5b7928bb5275ffe95397d","modified":1742982897279},{"_id":"public/archives/page/3/index.html","hash":"fb8477bef3192cf19d7862271415d0d87bb19bd6","modified":1742982897279},{"_id":"public/archives/page/4/index.html","hash":"efff1d830fae6de21421f29a1898aa11924a1b28","modified":1742982897279},{"_id":"public/archives/2018/index.html","hash":"1cdb12d3b916a600a9de19f78ac0bbe4579a8029","modified":1742982897279},{"_id":"public/archives/2018/page/2/index.html","hash":"0e3d6b3b0b0a289d5712e9d4e7f9e1a42b58be2c","modified":1742982897279},{"_id":"public/archives/2018/page/3/index.html","hash":"12e112dc4a6b999423b2718af2954c0d183680ea","modified":1742982897279},{"_id":"public/archives/2018/06/index.html","hash":"1446eb4faec12fa6edfb560fb616c3379f699135","modified":1742982897279},{"_id":"public/archives/2018/06/page/2/index.html","hash":"ca70ca5307b59ff9ea825817f7e9e1a32f344517","modified":1742982897279},{"_id":"public/archives/2018/07/index.html","hash":"cecefe98fe831c1b3ad00c832c2f02b02199f4d9","modified":1742982897279},{"_id":"public/archives/2018/09/index.html","hash":"321f13318b06d40d797cfd2b3256ef63a5bea1c7","modified":1742982897279},{"_id":"public/archives/2019/index.html","hash":"420161b55dab3bd736861160f97e598248baaa82","modified":1742982897279},{"_id":"public/archives/2019/11/index.html","hash":"420161b55dab3bd736861160f97e598248baaa82","modified":1742982897279},{"_id":"public/archives/2021/index.html","hash":"ed2124aa31b965a031d7d277e37a1b0c3c892267","modified":1742982897279},{"_id":"public/archives/2021/03/index.html","hash":"4ad0edf000aa920cd5af471a02126a371e05e086","modified":1742982897279},{"_id":"public/archives/2021/06/index.html","hash":"e4965799c0d4bd8d63c1281492634e9b6f6ccd9b","modified":1742982897279},{"_id":"public/archives/2021/07/index.html","hash":"17c2285f730d30be8676d1dd49c07836609ea2fe","modified":1742982897279},{"_id":"public/archives/2025/index.html","hash":"fcf2790ab87323da7efe58d6d73ac914d1db932d","modified":1742982897279},{"_id":"public/archives/2025/03/index.html","hash":"fcf2790ab87323da7efe58d6d73ac914d1db932d","modified":1742982897279},{"_id":"public/page/4/index.html","hash":"16e7be654f99fb882dc0a2fc5deef0b2220ede3b","modified":1742982897279},{"_id":"public/categories/ElasticSearch/index.html","hash":"0557ef001071b0fc067237934a6f9b6a92521b6c","modified":1742982897279},{"_id":"public/categories/默认/index.html","hash":"ed1c1f6e2ce6bf617121f86a6c208d8635114e46","modified":1742982897279},{"_id":"public/categories/Java/index.html","hash":"d7d9bd5a6f1fa947a4bb69b467e3daf379b27cba","modified":1742982897279},{"_id":"public/categories/Java/page/2/index.html","hash":"1945e10096d62d6f2317b817ee03ed19625e512d","modified":1742982897279},{"_id":"public/categories/Kubernetes/index.html","hash":"a75f3fef7de1b90ae8a393e52c177bcb3eff7a94","modified":1742982897279},{"_id":"public/categories/Spring/index.html","hash":"68a782b484ec6f2d959f5c300242ec1425cbcfa0","modified":1742982897279},{"_id":"public/categories/Markdown/index.html","hash":"46f6d62f8ad8ddc90b5cceea4594271905dc29e2","modified":1742982897279},{"_id":"public/categories/Maven/index.html","hash":"02a5bbf2aec975b227b58f75e52cb39dd9dea567","modified":1742982897279},{"_id":"public/categories/树莓派/index.html","hash":"9cdac757d321d9f1decb49748c45ef20dbd03f04","modified":1742982897279},{"_id":"public/tags/Java/index.html","hash":"f28a27479c3a9c7a99252610064a9934d0f83a9a","modified":1742982897279},{"_id":"public/tags/Java/page/2/index.html","hash":"1757487feec01c6481217395ad6ee04e33c3c061","modified":1742982897279},{"_id":"public/tags/ElasticSearch/index.html","hash":"ba8963dfde60ce6939fbc768b7910478c43ff6a5","modified":1742982897279},{"_id":"public/tags/Elasticsearch-Head/index.html","hash":"5bf18964bcda07b40bbcf2271ae55bfa6cd412e4","modified":1742982897279},{"_id":"public/tags/默认/index.html","hash":"ee25043d31aa687bb435dd5d310d144f6cf45984","modified":1742982897279},{"_id":"public/tags/运算符/index.html","hash":"56783b33d454d0e6c4527137b81d40e983ed6e14","modified":1742982897279},{"_id":"public/tags/设计模式/index.html","hash":"5df563558b78caae645378c7598c8805d290ea86","modified":1742982897279},{"_id":"public/tags/MyBatis/index.html","hash":"8a1463bdc4d54aaa072f49831c0ba68fcdb4140a","modified":1742982897279},{"_id":"public/tags/JavaBean/index.html","hash":"833564e2fde5a69d60aba755d1311d611405502a","modified":1742982897279},{"_id":"public/tags/MySQL/index.html","hash":"fb14ac5cb573774a1c17f8372415ae3792178fc6","modified":1742982897279},{"_id":"public/tags/自动映射/index.html","hash":"4d5aa60341647e6255ca512a6e918cb29c1592aa","modified":1742982897279},{"_id":"public/tags/Kubernetes/index.html","hash":"f15785d53629309ef68495c5a151f0b6d63b7b39","modified":1742982897279},{"_id":"public/tags/Ubuntu/index.html","hash":"4f70bbe51e9ea717d2891ca2a3e7005a70df74d4","modified":1742982897279},{"_id":"public/tags/containerd/index.html","hash":"3692d34a123b8d1f21b527b48ca0a3944db1bb40","modified":1742982897279},{"_id":"public/tags/Calico/index.html","hash":"3293e7251d51688c1f80c264c730838b79b88c7a","modified":1742982897279},{"_id":"public/tags/Helm/index.html","hash":"32205524c6ddbcf0c91d96b8cf037a4becc5c0d2","modified":1742982897279},{"_id":"public/tags/KubernetesDashboard/index.html","hash":"80fbe3056971f6db804c2324f60869b03a754f5b","modified":1742982897279},{"_id":"public/tags/云原生/index.html","hash":"6ded05bd6d002f0ce670ab25878a4bcb939d07f3","modified":1742982897279},{"_id":"public/tags/K8S/index.html","hash":"64d4a552402ed40297a5fec6d539804c17f7a9c4","modified":1742982897279},{"_id":"public/tags/PVE/index.html","hash":"5bc1b0d00663cd55da6dc7131c94b7bb2a51574c","modified":1742982897279},{"_id":"public/tags/Spring/index.html","hash":"5e0f724b555cd92c5f6d92ea6acb73cb0280ca4e","modified":1742982897279},{"_id":"public/tags/IOC/index.html","hash":"7c0a9cdce2be2d76601d2fdf141b81a8692c57d9","modified":1742982897279},{"_id":"public/tags/BeanFactory/index.html","hash":"f0d1ed69d6c49e63645a86d8266dfecdcfd806e8","modified":1742982897279},{"_id":"public/tags/Hexo/index.html","hash":"b09335a367ca99e1503bddc8e6cc789e76680f64","modified":1742982897279},{"_id":"public/tags/Markdown/index.html","hash":"967be1bd59a63dbcd7750dafb96931673ab3810a","modified":1742982897279},{"_id":"public/tags/ApplicationContext/index.html","hash":"27e4c32d2d1323aa27bfdd96f39450e91bbd38c1","modified":1742982897279},{"_id":"public/tags/静态站点生成器/index.html","hash":"2b2a68c7d239d1cdf8d0a326b54799740fb6fc91","modified":1742982897279},{"_id":"public/tags/MkDocs/index.html","hash":"9984cbd5e573bd311b8b8e123664c9252e2f1001","modified":1742982897279},{"_id":"public/tags/Maven/index.html","hash":"8e4cafff038b78777ca80d9575bbac3e264bd42b","modified":1742982897279},{"_id":"public/tags/Sonatype/index.html","hash":"c72f8aa5a03c88d8fba58a052526d4958ea6dba0","modified":1742982897279},{"_id":"public/tags/JAR/index.html","hash":"b7ec60649f11ce7752f1012ce6dfbb3cf213ccfa","modified":1742982897279},{"_id":"public/tags/文章/index.html","hash":"968ecc4ac04e18a74e9335a0819375d3ab134a10","modified":1742982897279},{"_id":"public/tags/样式/index.html","hash":"57ff995b5c9c1d66decd129d2e36fd130eef8adf","modified":1742982897279},{"_id":"public/tags/HTML/index.html","hash":"f4d8d43bdd1d669d714d3b694a9fc88586f09bd9","modified":1742982897279},{"_id":"public/tags/汇总/index.html","hash":"19526f1538f066d885f01733055e617df8c09abb","modified":1742982897279},{"_id":"public/tags/博客/index.html","hash":"ed56de60c7f706f19db16565396c3614ed5a9714","modified":1742982897279},{"_id":"public/tags/技术/index.html","hash":"b1318f51c84c12967bd07921608810c79118dd92","modified":1742982897279},{"_id":"public/tags/前端/index.html","hash":"9d9f75aaa4e6d8b7d217a0a8214d0454af8e8047","modified":1742982897279},{"_id":"public/tags/JS/index.html","hash":"35398ff067235d8a0a180e7812b92c00613e4b46","modified":1742982897279},{"_id":"public/tags/树莓派/index.html","hash":"c87cb3bf2c265dc0f8db6043a4995dda36429a55","modified":1742982897279},{"_id":"public/tags/MySQL8/index.html","hash":"5d3504bd64d4d0eb1cd581f4c03240a3b48bc9c5","modified":1742982897279},{"_id":"public/tags/哈哈/index.html","hash":"2397acdfa0836572c894f137f07239b507370518","modified":1742982897279},{"_id":"public/2025/03/23/Kubernetes集群部署实战(V1.23.3)/index.html","hash":"00da6f93c0f18bb9ac84d47a186c3f6f9b57f63e","modified":1742982897279},{"_id":"public/2025/03/20/使用MKDocs发布Markdown文档/index.html","hash":"594f13aa52abd18458ad68cd1c42986d04f75795","modified":1742982897279},{"_id":"public/2019/11/25/Java学习之23种设计模式深入理解/index.html","hash":"62a2b7d3b56857be9daa1a705cd2008200fc1943","modified":1742982897279},{"_id":"public/2019/11/22/Spring-IoC容器源码导读/index.html","hash":"e47a697f7d11cffc9ba939a4da92e65232561866","modified":1742982897279},{"_id":"public/2018/09/22/MyBatis中JavaBean 与MySQL的table字段自动映射/index.html","hash":"971d2fee603146eb00afb426af3ec0366ad33b81","modified":1742982897279},{"_id":"public/2018/09/16/文章样式HTML/index.html","hash":"d0bb532e46b20572e55375ae18a853061d669ad7","modified":1742982897279},{"_id":"public/2018/09/06/MD代码样式/index.html","hash":"cb5e6e7f1b008eba235ca4cf86d0d59900f1b55f","modified":1742982897279},{"_id":"public/2018/06/30/Java基础-（1）介绍/index.html","hash":"4984c02454c5c554c426566f8a5cdc9e50184218","modified":1742982897279},{"_id":"public/2018/09/05/ElasticSearch6.x安装/index.html","hash":"7a72d497d1991c8298f97352fd3dc7885b7bf2e8","modified":1742982897279},{"_id":"public/2018/06/27/文章样式/index.html","hash":"6553bd508cad40bc0c0d9a5ba597ef509d961bdd","modified":1742982897279},{"_id":"public/index.html","hash":"fcfb4a52ee01851181e0bb4c6722acbe7854a36f","modified":1742982897279},{"_id":"public/page/2/index.html","hash":"317e1b88974d71571fa41bb6791a1db4dfef1fa6","modified":1742982897279},{"_id":"public/page/3/index.html","hash":"69016a77384d2ec9adb32894d94d304ed050dba7","modified":1742982897279},{"_id":"public/favicons/android-chrome-192x192.png","hash":"696a6ca92f49eb59bca2b5d7589d1fbbd47b1509","modified":1742982897279},{"_id":"public/favicons/favicon.ico","hash":"9f654acb9fa55cbdf78df03f9316968761a83e56","modified":1742982897279},{"_id":"public/favicons/apple-touch-icon.png","hash":"43c7ca442de5437583ddb8b0ba517434b0327d10","modified":1742982897279},{"_id":"public/favicons/favicon-16x16.png","hash":"66e46a022f495c5d72bc029619ecb63092f52049","modified":1742982897279},{"_id":"public/favicons/mstile-150x150.png","hash":"949098b804cd7880669b19dd0845c6e8f88b18f1","modified":1742982897279},{"_id":"public/favicons/safari-pinned-tab.svg","hash":"f47cdd7d68a69e2b1caae292461d6691faf747be","modified":1742982897279},{"_id":"public/favicons/site.webmanifest","hash":"c26f1f72ad968f601c2afaace75ae72551880254","modified":1742982897279},{"_id":"public/static/image/20180905/9200-default.png","hash":"13155a3389502476264f94580b6a245d707cbdb5","modified":1742982897279},{"_id":"public/static/image/20180905/grunt-server.png","hash":"97bee3b5fa59e1ecb16ed724801ebb0bc2c674b3","modified":1742982897279},{"_id":"public/static/image/20180905/node-v.png","hash":"81906bd1ff8843c130edccfb0f2709b96e3d39a1","modified":1742982897279},{"_id":"public/static/image/20180905/npm-install.png","hash":"410985b7a91e72d77d301626ee0d2aacceb343fa","modified":1742982897279},{"_id":"public/fonts/lg.eot","hash":"54caf05a81e33d7bf04f2e420736ce6f1de5f936","modified":1742982897279},{"_id":"public/fonts/lg.ttf","hash":"f6421c0c397311ae09f9257aa58bcd5e9720f493","modified":1742982897279},{"_id":"public/fonts/lg.svg","hash":"1dba95664d2933fe1c22fb95a2e1e3a21839870b","modified":1742982897279},{"_id":"public/fonts/lg.woff","hash":"3048de344dd5cad4624e0127e58eaae4b576f574","modified":1742982897279},{"_id":"public/images/avatar.png","hash":"e63be2fab169a0478af27c47240d1d123fa2b2ba","modified":1742982897279},{"_id":"public/favicons/browserconfig.xml","hash":"4e104bfc1559f3088f25edc3409e9677415226ca","modified":1742982897279},{"_id":"public/images/ARIA_logo.png","hash":"94b3df25f98458c9a9d80dd908395a0f682f9f2b","modified":1742982897279},{"_id":"public/favicons/favicon-32x32.png","hash":"0b9d60f7967bc16dcf800e87415a0bc196d69b1f","modified":1742982897279},{"_id":"public/images/logo.png","hash":"94b3df25f98458c9a9d80dd908395a0f682f9f2b","modified":1742982897279},{"_id":"public/static/image/20180905/9100-port.png","hash":"b7cf31b31ec56b9612022a144ebede711ceb20ae","modified":1742982897279},{"_id":"public/static/image/20191125/RelationshipBetweenDesignPattern.jpg","hash":"5533c4baa4a9ee3e2315d805f40f42fe7d4af6ce","modified":1742982897279},{"_id":"public/static/image/20180905/git-clone.png","hash":"f8aebf3cc2f74cee9542cef1bfe27a4de2c984ce","modified":1742982897279},{"_id":"public/css/commentjs.css","hash":"d00731f87a5946fe70c893ba52ccc2b29c1f7ae6","modified":1742982897279},{"_id":"public/css/categories.css","hash":"f51170925a79bc0c4a43852270f881c42cb88225","modified":1742982897279},{"_id":"public/css/archive.css","hash":"249debdd218df8a9f8d46654d62d28eed13a2486","modified":1742982897279},{"_id":"public/css/footer.css","hash":"ea49811a92d0e08d5bc10abf7f852367cca0ce72","modified":1742982897279},{"_id":"public/css/custom.css","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1742982897279},{"_id":"public/css/atom-one-light.css","hash":"13e7620fe2842fa91cb309391a0b01a0c8712f12","modified":1742982897279},{"_id":"public/css/atom-one-dark.css","hash":"a6d28e1c04cee20cd874fc7ac0903d8e2e4bd54e","modified":1742982897279},{"_id":"public/css/header.css","hash":"7e60ec0d43fc723e560a57f6dd1375af32b00668","modified":1742982897279},{"_id":"public/css/comment.css","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1742982897279},{"_id":"public/css/category.css","hash":"74fb5b04c2576fd1eeeb4946528b70cb829639d8","modified":1742982897279},{"_id":"public/css/info.css","hash":"39dc4fa0450ef54ee972b5f8cec1b54ce702f1f9","modified":1742982897279},{"_id":"public/css/normalize.css","hash":"734a72e6c28d4a3a870404fb4abf72723c754296","modified":1742982897279},{"_id":"public/css/main.css","hash":"db5579d2c78161764b06fa24ecacf4de5ce2133f","modified":1742982897279},{"_id":"public/css/nav.css","hash":"2762fb51632cca5eba01b7dc60a2a7f7f330d034","modified":1742982897279},{"_id":"public/css/page.css","hash":"ca54f017ea14b4351644f4cecb598ece7afebb5d","modified":1742982897279},{"_id":"public/css/post.css","hash":"53b5f1650eaf57f43ca88c2a14318861c9783971","modified":1742982897279},{"_id":"public/css/tags.css","hash":"037ca7888fa8c5d64129b91795aadb71b3120256","modified":1742982897279},{"_id":"public/css/solarized-light.css","hash":"6b70caf1e84d096b1bc6318d5dae78d69e5dd1d3","modified":1742982897279},{"_id":"public/css/variables.css","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1742982897279},{"_id":"public/css/sidebar.css","hash":"ae4e9a52a4b81dfc2129a3f85a59c6cf3e8ff974","modified":1742982897279},{"_id":"public/css/solarized-dark.css","hash":"d02fc2dcbeec4b7af2cadec4bbbfc5b016aed4c7","modified":1742982897279},{"_id":"public/js/busuanzi.pure.mini.js","hash":"6e41f31100ae7eb3a6f23f2c168f6dd56e7f7a9a","modified":1742982897279},{"_id":"public/css/tag.css","hash":"abfb527b6d75d09d3b97e499821040747045af5e","modified":1742982897279},{"_id":"public/css/toc.css","hash":"ea13c0fa746524f6b709425176fc1ead60ae4468","modified":1742982897279},{"_id":"public/js/clipboard.min.js","hash":"ee60ca5ba9401456105ef703a98092369b579c80","modified":1742982897279},{"_id":"public/css/reward.css","hash":"d2390acdf64008e24602b57fccd2c35d79a32d87","modified":1742982897279},{"_id":"public/js/custom.js","hash":"7e3e36b3ba8de9c168fa50d4b77449d9865b011a","modified":1742982897279},{"_id":"public/js/index.js","hash":"3c5d37ce27d29d275a9854582bb71e02d53c50fa","modified":1742982897279},{"_id":"public/js/lg-pager.min.js","hash":"c4f5c7d91c87761f1626ebb411e5ed6d456799f0","modified":1742982897279},{"_id":"public/js/lg-thumbnail.min.js","hash":"3f3024b3ff6a5266bd40ed890398d7f2393cd5a5","modified":1742982897279},{"_id":"public/js/lg-fullscreen.min.js","hash":"71cf4fbc9ebbc7ccf1c580cd0389f0a28df64bd6","modified":1742982897279},{"_id":"public/js/lg-zoom.min.js","hash":"b26f6070ad290f937c49289bd52014677dd6073c","modified":1742982897279},{"_id":"public/js/search.js","hash":"fdafa08b1ab62f0eb48b028ebf985a42be04b98e","modified":1742982897279},{"_id":"public/js/lg-hash.min.js","hash":"163a3eb6bdd227549bb7b5be61dffed36af474fa","modified":1742982897279},{"_id":"public/js/scrollspy.js","hash":"724f9a0e12bd5c6a9d8cbf299ef4255621433cbf","modified":1742982897279},{"_id":"public/js/timeago.min.js","hash":"d220fcc47be00effec6b5181b97cc0929d10031e","modified":1742982897279},{"_id":"public/js/util.js","hash":"f4d0034baaf346b532d1a1602c0b48963a018f23","modified":1742982897279},{"_id":"public/js/marked.min.js","hash":"c9eb834a28665addef7e66ee1a787fa1cbbb43eb","modified":1742982897279},{"_id":"public/css/index.css","hash":"8907c5f38561f8bc8d53c8b3d0f0d6ce1c70448c","modified":1742982897279},{"_id":"public/css/lightgallery.min.css","hash":"9e76bdad163856774a96b1230a08dc506600a973","modified":1742982897279},{"_id":"public/js/commentjs.js","hash":"c60e44a9aa66628bfcc0912ee3a10469b3c2899b","modified":1742982897279},{"_id":"public/js/lightgallery.min.js","hash":"c2101bab37ebcb47cc21a3b92611493a165e5a79","modified":1742982897279},{"_id":"public/js/highlight.min.js","hash":"02bb4cdaf43c85b7ee4ef6ccf1f3fe8e82fd3ceb","modified":1742982897279},{"_id":"public/js/jquery.min.js","hash":"0dc32db4aa9c5f03f3b38c47d883dbd4fed13aae","modified":1742982897279},{"_id":"public/js/fontawesome-all.min.js","hash":"6863be3c29cf8e1850b0290514c9edc247eb7b15","modified":1742982897279},{"_id":"public/favicons/android-chrome-512x512.png","hash":"f921689ca52796f1b6d5dab7763289619239fa2a","modified":1742982897279},{"_id":"public/static/image/20191125/BeanFactoryInitFlowChart.png","hash":"6e31bd4711aec9efb5c929292eed0e23eb1c0dc5","modified":1742982897279},{"_id":"public/static/image/20180905/ES启动.png","hash":"6d523ddd2e329ebc2b963c63d4abc4fc078cc235","modified":1742982897279},{"_id":"public/images/background.png","hash":"c34366140a0250afbd73d62abdc58b1e00e10355","modified":1742982897279},{"_id":"public/images/sidebar_background.png","hash":"c34366140a0250afbd73d62abdc58b1e00e10355","modified":1742982897279},{"_id":"themes/aria/_config.yml","hash":"946cacc4e3f42ebedd9359ccfe088efeff0b1cb9","modified":1742983243926}],"Category":[{"name":"ElasticSearch","_id":"cm8pr0j250004gskz7l8y7pd9"},{"name":"默认","_id":"cm8pr0j28000agskzdjje6l6e"},{"name":"Java","_id":"cm8pr0j29000hgskz71cn5znr"},{"name":"Kubernetes","_id":"cm8pr0j2g001jgskzcn7y5dyz"},{"name":"Spring","_id":"cm8pr0j2h001rgskz38h2hrhs"},{"name":"Markdown","_id":"cm8pr0j2j0020gskz90po7zwa"},{"name":"Maven","_id":"cm8pr0j2l002cgskz02yo4bzg"},{"name":"树莓派","_id":"cm8pr0j2o002sgskzhs9r3ona"}],"Data":[],"Page":[{"title":"about","date":"2018-06-30T15:37:04.000Z","_content":"\n\n页面正在施工中...","source":"about/index.md","raw":"---\ntitle: about\ndate: 2018-06-30 23:37:04\n---\n\n\n页面正在施工中...","updated":"2025-03-26T10:02:48.090Z","path":"about/index.html","_id":"cm8pr0j200000gskz11yp5jb4","comments":1,"layout":"page","content":"<p>页面正在施工中…</p>\n","site":{"data":{}},"excerpt":"","more":"<p>页面正在施工中…</p>\n"},{"title":"tags","date":"2018-06-30T15:36:22.000Z","_content":"","source":"tags/index.md","raw":"---\ntitle: tags\ndate: 2018-06-30 23:36:22\n---\n","updated":"2025-03-26T06:43:53.021Z","path":"tags/index.html","comments":1,"layout":"page","_id":"cm8pr0j240002gskzbn68gxfz","content":"","site":{"data":{}},"excerpt":"","more":""},{"title":"categories","date":"2018-06-30T15:38:33.000Z","_content":"","source":"categories/index.md","raw":"---\ntitle: categories\ndate: 2018-06-30 23:38:33\n---\n","updated":"2025-03-26T06:43:53.007Z","path":"categories/index.html","comments":1,"layout":"page","_id":"cm8pr0j260006gskzg1az9sjr","content":"","site":{"data":{}},"excerpt":"","more":""}],"Post":[{"title":"ElasticSearch6.x及Elasticsearch-Head插件的安装","date":"2018-09-05T12:10:00.000Z","description":"ElasticSearch6.x及elasticsearch-head插件的安装","_content":"\n\n# ElasticSearch6.x及elasticsearch-head插件的安装\n\n\n## 安装环境\n- Windows10企业版/专业版 X64\n- JDK10.0.1\n- ElasticSearch-5.0.0\n- Node-v8.11.3-x64.msi\n- Git客户端\n- Powershell\n\n\n## 1.下载相关必备软件：\n- Windows系统，不多废话。\n- ES官网下载页面：https://www.elastic.co/downloads/elasticsearch\n- ES6.4 Windows版下载链接：https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-6.4.0.zip\n\n- JDK 安装略\n- Node 安装略  \n    - 设置环境变量，把NODE_HOME设置到环境变量里(安装包也可以自动加入PATH环境变量)。测试一下node是否生效：\n    - Powershell/CMD测试命令：node -v\n    - ![9200-default](/Blog/static/image/20180905/node-v.png)\n- Git 安装略\n\n\n\n\n## 2安装ElasticSearch\n### 2.1安装\n将1中下载的elasticsearch-6.4.0.zip压缩包解压，打开压缩包的bin目录，点击elasticsearch.bat批处理文件就可以默认启动了，安装过程可以说非常简单。\n访问:http://localhost:9200，如下所示：\n![9200-default](/Blog/static/image/20180905/9200-default.png)\n\n### 2.2命令行下启动\n在Powershell中开启ES-6.x，直接执行bat文件：\nD:\\ProgramFiles\\ElasticSearch\\elasticsearch-6.4.0\\bin\\elasticsearch.bat\n也在系统的环境变量中将路径\"D:\\ProgramFiles\\ElasticSearch\\elasticsearch-6.4.0\\bin\\\"添加到\"Path\"中\n可以直接使用如下命令运行：\n```cmd\nelasticsearch.bat\n```\n启动效果：\n![9200-default](/Blog/static/image/20180905/ES启动.png)\n\n## 3.elasticsearch-head插件安装\n### 3.1安装grunt\ngrunt是一个很方便的构建工具，可以进行打包压缩、测试、执行等等的工作，6.x里的head插件需要通过grunt启动。因此需要安装grunt：\n\n- 设置全局安装(-g代表全局安装,安装在D:\\ProgramFiles\\NodeJs\\node_modules\\目录下)：\n```cmd\nnpm install -g grunt-cli\n```\n\n### 3.2下载elasticsearch-head插件的源码\n源码地址：https://github.com/mobz/elasticsearch-head.git\n#### 2.2.1使用git clone命令下载下来：\n```\ngit clone git://github.com/mobz/elasticsearch-head.git\n```\n效果如图：\n![9200-default](/Blog/static/image/20180905/git-clone.png)\n\n### 3.3配置elasticsearch-head\n由于head的代码还是旧版本的，直接执行有很多限制，比如无法跨机器访问。因此需要修改几个地方：\n\n#### 3.3.1修改elasticsearch-head源码配置-Gruntfile.js\n\n①目录：elasticsearch-head/Gruntfile.js，增加hostname属性，设置为*：\n\n```js\nconnect: {\n    server: {\n        options: {\n            port: 9100,\n            hostname: '*',\n            base: '.',\n            keepalive: true\n        }\n    }\n}\n```\n#### 3.3.2修改elasticsearch-head源码配置-app.js\n②修改elasticsearch-head的连接地址\n目录：elasticsearch-head/_site/app.js\n修改连接地址:\n```js\nthis.base_uri = this.config.base_uri || this.prefs.get(\"app-base_uri\") || \"http://localhost:9200\";\n```\n把localhost修改成你es的服务器地址，如：\n```js\nthis.base_uri = this.config.base_uri || this.prefs.get(\"app-base_uri\") || \"http://127.0.0.1:9200\";\n```\n\n### 3.4添加Elasticsearch的配置参数\n\n修改Elasticsearch使用的参数。编辑elasticsearch-6.4.0/config/elasticsearch.yml配置文件，在文件末尾追加如下配置：\n```yml\n# 设置集群的名字，对应为http://127.0.0.1:9200/中的\"cluster_name\" : \"acanx-es-demo\",\ncluster.name: acanx-es-demo\n# 节点名字，对应为http://127.0.0.1:9200/中的\"name\" : \"node-1001\",\nnode.name: node-1001\nnode.master: true\nnode.data: true\n# 修改ES的监听地址，以便其他机器也可以访问\nnetwork.host: 0.0.0.0\n# 默认端口\nhttp.port: 9200\n# 增加新的CORS参数，这样head插件可以访问ES\nhttp.cors.enabled: true\nhttp.cors.allow-origin: \"*\"\n```\n- 修改完成后记得Save保存！\n- 特别注意，设置参数的时候:后面要有空格！格式不规范在启动ES时会抛异常，配置时注意检查书写格式\n\n### 3.5启动ElasticSearch\n   操作同上第二节\n\n```cmd\nelasticsearch.bat\n```\n\n\n### 3.6再运行elasticsearch-head\n 在elasticsearch-head源码目录下，执行npm install 下载的包：\n```\n npm install\n```\n效果如图：\n![9200-default](/Blog/static/image/20180905/npm-install.png)\n\n- 初次运行安装可能会报警告或错误。可以重新运行一次npm install。最后，在head源代码目录下启动Nodejs：\n\n```\ngrunt server\n```\n\n效果如图：\n![9200-default](/Blog/static/image/20180905/grunt-server.png)\n\n\n访问:http://localhost:9100\n这个时候，访问http://localhost:9100就可以使用elasticsearch-head插件查看ES中的数据了了：\n![9200-default](/Blog/static/image/20180905/9100-port.png)\n\n\n\n\n\n## 参考链接\n\n- http://www.cnblogs.com/xuxy03/p/6039999.html\n- https://blog.csdn.net/fwhezfwhez/article/details/79380275\n- https://blog.csdn.net/qq_40454655/article/details/79291106\n- https://blog.csdn.net/sinat_28224453/article/details/51516061","source":"_posts/ElasticSearch6.x安装.md","raw":"---\ntitle: ElasticSearch6.x及Elasticsearch-Head插件的安装\ndate: 2018-09-05 20:10:00\ncategories: \"ElasticSearch\" #文章分类目录 可以省略\ntags: #Java \n     - Java\n     - ElasticSearch\n     - Elasticsearch-Head\ndescription: ElasticSearch6.x及elasticsearch-head插件的安装  #你對本頁的描述 可以省略\n---\n\n\n# ElasticSearch6.x及elasticsearch-head插件的安装\n\n\n## 安装环境\n- Windows10企业版/专业版 X64\n- JDK10.0.1\n- ElasticSearch-5.0.0\n- Node-v8.11.3-x64.msi\n- Git客户端\n- Powershell\n\n\n## 1.下载相关必备软件：\n- Windows系统，不多废话。\n- ES官网下载页面：https://www.elastic.co/downloads/elasticsearch\n- ES6.4 Windows版下载链接：https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-6.4.0.zip\n\n- JDK 安装略\n- Node 安装略  \n    - 设置环境变量，把NODE_HOME设置到环境变量里(安装包也可以自动加入PATH环境变量)。测试一下node是否生效：\n    - Powershell/CMD测试命令：node -v\n    - ![9200-default](/Blog/static/image/20180905/node-v.png)\n- Git 安装略\n\n\n\n\n## 2安装ElasticSearch\n### 2.1安装\n将1中下载的elasticsearch-6.4.0.zip压缩包解压，打开压缩包的bin目录，点击elasticsearch.bat批处理文件就可以默认启动了，安装过程可以说非常简单。\n访问:http://localhost:9200，如下所示：\n![9200-default](/Blog/static/image/20180905/9200-default.png)\n\n### 2.2命令行下启动\n在Powershell中开启ES-6.x，直接执行bat文件：\nD:\\ProgramFiles\\ElasticSearch\\elasticsearch-6.4.0\\bin\\elasticsearch.bat\n也在系统的环境变量中将路径\"D:\\ProgramFiles\\ElasticSearch\\elasticsearch-6.4.0\\bin\\\"添加到\"Path\"中\n可以直接使用如下命令运行：\n```cmd\nelasticsearch.bat\n```\n启动效果：\n![9200-default](/Blog/static/image/20180905/ES启动.png)\n\n## 3.elasticsearch-head插件安装\n### 3.1安装grunt\ngrunt是一个很方便的构建工具，可以进行打包压缩、测试、执行等等的工作，6.x里的head插件需要通过grunt启动。因此需要安装grunt：\n\n- 设置全局安装(-g代表全局安装,安装在D:\\ProgramFiles\\NodeJs\\node_modules\\目录下)：\n```cmd\nnpm install -g grunt-cli\n```\n\n### 3.2下载elasticsearch-head插件的源码\n源码地址：https://github.com/mobz/elasticsearch-head.git\n#### 2.2.1使用git clone命令下载下来：\n```\ngit clone git://github.com/mobz/elasticsearch-head.git\n```\n效果如图：\n![9200-default](/Blog/static/image/20180905/git-clone.png)\n\n### 3.3配置elasticsearch-head\n由于head的代码还是旧版本的，直接执行有很多限制，比如无法跨机器访问。因此需要修改几个地方：\n\n#### 3.3.1修改elasticsearch-head源码配置-Gruntfile.js\n\n①目录：elasticsearch-head/Gruntfile.js，增加hostname属性，设置为*：\n\n```js\nconnect: {\n    server: {\n        options: {\n            port: 9100,\n            hostname: '*',\n            base: '.',\n            keepalive: true\n        }\n    }\n}\n```\n#### 3.3.2修改elasticsearch-head源码配置-app.js\n②修改elasticsearch-head的连接地址\n目录：elasticsearch-head/_site/app.js\n修改连接地址:\n```js\nthis.base_uri = this.config.base_uri || this.prefs.get(\"app-base_uri\") || \"http://localhost:9200\";\n```\n把localhost修改成你es的服务器地址，如：\n```js\nthis.base_uri = this.config.base_uri || this.prefs.get(\"app-base_uri\") || \"http://127.0.0.1:9200\";\n```\n\n### 3.4添加Elasticsearch的配置参数\n\n修改Elasticsearch使用的参数。编辑elasticsearch-6.4.0/config/elasticsearch.yml配置文件，在文件末尾追加如下配置：\n```yml\n# 设置集群的名字，对应为http://127.0.0.1:9200/中的\"cluster_name\" : \"acanx-es-demo\",\ncluster.name: acanx-es-demo\n# 节点名字，对应为http://127.0.0.1:9200/中的\"name\" : \"node-1001\",\nnode.name: node-1001\nnode.master: true\nnode.data: true\n# 修改ES的监听地址，以便其他机器也可以访问\nnetwork.host: 0.0.0.0\n# 默认端口\nhttp.port: 9200\n# 增加新的CORS参数，这样head插件可以访问ES\nhttp.cors.enabled: true\nhttp.cors.allow-origin: \"*\"\n```\n- 修改完成后记得Save保存！\n- 特别注意，设置参数的时候:后面要有空格！格式不规范在启动ES时会抛异常，配置时注意检查书写格式\n\n### 3.5启动ElasticSearch\n   操作同上第二节\n\n```cmd\nelasticsearch.bat\n```\n\n\n### 3.6再运行elasticsearch-head\n 在elasticsearch-head源码目录下，执行npm install 下载的包：\n```\n npm install\n```\n效果如图：\n![9200-default](/Blog/static/image/20180905/npm-install.png)\n\n- 初次运行安装可能会报警告或错误。可以重新运行一次npm install。最后，在head源代码目录下启动Nodejs：\n\n```\ngrunt server\n```\n\n效果如图：\n![9200-default](/Blog/static/image/20180905/grunt-server.png)\n\n\n访问:http://localhost:9100\n这个时候，访问http://localhost:9100就可以使用elasticsearch-head插件查看ES中的数据了了：\n![9200-default](/Blog/static/image/20180905/9100-port.png)\n\n\n\n\n\n## 参考链接\n\n- http://www.cnblogs.com/xuxy03/p/6039999.html\n- https://blog.csdn.net/fwhezfwhez/article/details/79380275\n- https://blog.csdn.net/qq_40454655/article/details/79291106\n- https://blog.csdn.net/sinat_28224453/article/details/51516061","slug":"ElasticSearch6.x安装","published":1,"updated":"2025-03-26T06:43:52.995Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cm8pr0j220001gskzhy5qdz6c","content":"<h1 id=\"ElasticSearch6-x及elasticsearch-head插件的安装\"><a href=\"#ElasticSearch6-x及elasticsearch-head插件的安装\" class=\"headerlink\" title=\"ElasticSearch6.x及elasticsearch-head插件的安装\"></a>ElasticSearch6.x及elasticsearch-head插件的安装</h1><h2 id=\"安装环境\"><a href=\"#安装环境\" class=\"headerlink\" title=\"安装环境\"></a>安装环境</h2><ul>\n<li>Windows10企业版/专业版 X64</li>\n<li>JDK10.0.1</li>\n<li>ElasticSearch-5.0.0</li>\n<li>Node-v8.11.3-x64.msi</li>\n<li>Git客户端</li>\n<li>Powershell</li>\n</ul>\n<h2 id=\"1-下载相关必备软件：\"><a href=\"#1-下载相关必备软件：\" class=\"headerlink\" title=\"1.下载相关必备软件：\"></a>1.下载相关必备软件：</h2><ul>\n<li><p>Windows系统，不多废话。</p>\n</li>\n<li><p>ES官网下载页面：<a href=\"https://www.elastic.co/downloads/elasticsearch\">https://www.elastic.co/downloads/elasticsearch</a></p>\n</li>\n<li><p>ES6.4 Windows版下载链接：<a href=\"https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-6.4.0.zip\">https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-6.4.0.zip</a></p>\n</li>\n<li><p>JDK 安装略</p>\n</li>\n<li><p>Node 安装略  </p>\n<ul>\n<li>设置环境变量，把NODE_HOME设置到环境变量里(安装包也可以自动加入PATH环境变量)。测试一下node是否生效：</li>\n<li>Powershell/CMD测试命令：node -v</li>\n<li><img src=\"/Blog/static/image/20180905/node-v.png\" alt=\"9200-default\"></li>\n</ul>\n</li>\n<li><p>Git 安装略</p>\n</li>\n</ul>\n<h2 id=\"2安装ElasticSearch\"><a href=\"#2安装ElasticSearch\" class=\"headerlink\" title=\"2安装ElasticSearch\"></a>2安装ElasticSearch</h2><h3 id=\"2-1安装\"><a href=\"#2-1安装\" class=\"headerlink\" title=\"2.1安装\"></a>2.1安装</h3><p>将1中下载的elasticsearch-6.4.0.zip压缩包解压，打开压缩包的bin目录，点击elasticsearch.bat批处理文件就可以默认启动了，安装过程可以说非常简单。<br>访问:<a href=\"http://localhost:9200，如下所示：\">http://localhost:9200，如下所示：</a><br><img src=\"/Blog/static/image/20180905/9200-default.png\" alt=\"9200-default\"></p>\n<h3 id=\"2-2命令行下启动\"><a href=\"#2-2命令行下启动\" class=\"headerlink\" title=\"2.2命令行下启动\"></a>2.2命令行下启动</h3><p>在Powershell中开启ES-6.x，直接执行bat文件：<br>D:\\ProgramFiles\\ElasticSearch\\elasticsearch-6.4.0\\bin\\elasticsearch.bat<br>也在系统的环境变量中将路径”D:\\ProgramFiles\\ElasticSearch\\elasticsearch-6.4.0\\bin&quot;添加到”Path”中<br>可以直接使用如下命令运行：</p>\n<figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs cmd\">elasticsearch.bat<br></code></pre></td></tr></table></figure>\n<p>启动效果：<br><img src=\"/Blog/static/image/20180905/ES%E5%90%AF%E5%8A%A8.png\" alt=\"9200-default\"></p>\n<h2 id=\"3-elasticsearch-head插件安装\"><a href=\"#3-elasticsearch-head插件安装\" class=\"headerlink\" title=\"3.elasticsearch-head插件安装\"></a>3.elasticsearch-head插件安装</h2><h3 id=\"3-1安装grunt\"><a href=\"#3-1安装grunt\" class=\"headerlink\" title=\"3.1安装grunt\"></a>3.1安装grunt</h3><p>grunt是一个很方便的构建工具，可以进行打包压缩、测试、执行等等的工作，6.x里的head插件需要通过grunt启动。因此需要安装grunt：</p>\n<ul>\n<li>设置全局安装(-g代表全局安装,安装在D:\\ProgramFiles\\NodeJs\\node_modules\\目录下)：<figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs cmd\">npm install -g grunt-cli<br></code></pre></td></tr></table></figure></li>\n</ul>\n<h3 id=\"3-2下载elasticsearch-head插件的源码\"><a href=\"#3-2下载elasticsearch-head插件的源码\" class=\"headerlink\" title=\"3.2下载elasticsearch-head插件的源码\"></a>3.2下载elasticsearch-head插件的源码</h3><p>源码地址：<a href=\"https://github.com/mobz/elasticsearch-head.git\">https://github.com/mobz/elasticsearch-head.git</a></p>\n<h4 id=\"2-2-1使用git-clone命令下载下来：\"><a href=\"#2-2-1使用git-clone命令下载下来：\" class=\"headerlink\" title=\"2.2.1使用git clone命令下载下来：\"></a>2.2.1使用git clone命令下载下来：</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs plain\">git clone git:&#x2F;&#x2F;github.com&#x2F;mobz&#x2F;elasticsearch-head.git<br></code></pre></td></tr></table></figure>\n<p>效果如图：<br><img src=\"/Blog/static/image/20180905/git-clone.png\" alt=\"9200-default\"></p>\n<h3 id=\"3-3配置elasticsearch-head\"><a href=\"#3-3配置elasticsearch-head\" class=\"headerlink\" title=\"3.3配置elasticsearch-head\"></a>3.3配置elasticsearch-head</h3><p>由于head的代码还是旧版本的，直接执行有很多限制，比如无法跨机器访问。因此需要修改几个地方：</p>\n<h4 id=\"3-3-1修改elasticsearch-head源码配置-Gruntfile-js\"><a href=\"#3-3-1修改elasticsearch-head源码配置-Gruntfile-js\" class=\"headerlink\" title=\"3.3.1修改elasticsearch-head源码配置-Gruntfile.js\"></a>3.3.1修改elasticsearch-head源码配置-Gruntfile.js</h4><p>①目录：elasticsearch-head/Gruntfile.js，增加hostname属性，设置为*：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\">connect: &#123;<br>    server: &#123;<br>        options: &#123;<br>            port: <span class=\"hljs-number\">9100</span>,<br>            hostname: <span class=\"hljs-string\">&#x27;*&#x27;</span>,<br>            base: <span class=\"hljs-string\">&#x27;.&#x27;</span>,<br>            keepalive: <span class=\"hljs-literal\">true</span><br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>\n<h4 id=\"3-3-2修改elasticsearch-head源码配置-app-js\"><a href=\"#3-3-2修改elasticsearch-head源码配置-app-js\" class=\"headerlink\" title=\"3.3.2修改elasticsearch-head源码配置-app.js\"></a>3.3.2修改elasticsearch-head源码配置-app.js</h4><p>②修改elasticsearch-head的连接地址<br>目录：elasticsearch-head/_site/app.js<br>修改连接地址:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-built_in\">this</span>.base_uri = <span class=\"hljs-built_in\">this</span>.config.base_uri || <span class=\"hljs-built_in\">this</span>.prefs.get(<span class=\"hljs-string\">&quot;app-base_uri&quot;</span>) || <span class=\"hljs-string\">&quot;http://localhost:9200&quot;</span>;<br></code></pre></td></tr></table></figure>\n<p>把localhost修改成你es的服务器地址，如：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-built_in\">this</span>.base_uri = <span class=\"hljs-built_in\">this</span>.config.base_uri || <span class=\"hljs-built_in\">this</span>.prefs.get(<span class=\"hljs-string\">&quot;app-base_uri&quot;</span>) || <span class=\"hljs-string\">&quot;http://127.0.0.1:9200&quot;</span>;<br></code></pre></td></tr></table></figure>\n\n<h3 id=\"3-4添加Elasticsearch的配置参数\"><a href=\"#3-4添加Elasticsearch的配置参数\" class=\"headerlink\" title=\"3.4添加Elasticsearch的配置参数\"></a>3.4添加Elasticsearch的配置参数</h3><p>修改Elasticsearch使用的参数。编辑elasticsearch-6.4.0/config/elasticsearch.yml配置文件，在文件末尾追加如下配置：</p>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs yml\"><span class=\"hljs-comment\"># 设置集群的名字，对应为http://127.0.0.1:9200/中的&quot;cluster_name&quot; : &quot;acanx-es-demo&quot;,</span><br><span class=\"hljs-attr\">cluster.name:</span> <span class=\"hljs-string\">acanx-es-demo</span><br><span class=\"hljs-comment\"># 节点名字，对应为http://127.0.0.1:9200/中的&quot;name&quot; : &quot;node-1001&quot;,</span><br><span class=\"hljs-attr\">node.name:</span> <span class=\"hljs-string\">node-1001</span><br><span class=\"hljs-attr\">node.master:</span> <span class=\"hljs-literal\">true</span><br><span class=\"hljs-attr\">node.data:</span> <span class=\"hljs-literal\">true</span><br><span class=\"hljs-comment\"># 修改ES的监听地址，以便其他机器也可以访问</span><br><span class=\"hljs-attr\">network.host:</span> <span class=\"hljs-number\">0.0</span><span class=\"hljs-number\">.0</span><span class=\"hljs-number\">.0</span><br><span class=\"hljs-comment\"># 默认端口</span><br><span class=\"hljs-attr\">http.port:</span> <span class=\"hljs-number\">9200</span><br><span class=\"hljs-comment\"># 增加新的CORS参数，这样head插件可以访问ES</span><br><span class=\"hljs-attr\">http.cors.enabled:</span> <span class=\"hljs-literal\">true</span><br><span class=\"hljs-attr\">http.cors.allow-origin:</span> <span class=\"hljs-string\">&quot;*&quot;</span><br></code></pre></td></tr></table></figure>\n<ul>\n<li>修改完成后记得Save保存！</li>\n<li>特别注意，设置参数的时候:后面要有空格！格式不规范在启动ES时会抛异常，配置时注意检查书写格式</li>\n</ul>\n<h3 id=\"3-5启动ElasticSearch\"><a href=\"#3-5启动ElasticSearch\" class=\"headerlink\" title=\"3.5启动ElasticSearch\"></a>3.5启动ElasticSearch</h3><p>   操作同上第二节</p>\n<figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs cmd\">elasticsearch.bat<br></code></pre></td></tr></table></figure>\n\n\n<h3 id=\"3-6再运行elasticsearch-head\"><a href=\"#3-6再运行elasticsearch-head\" class=\"headerlink\" title=\"3.6再运行elasticsearch-head\"></a>3.6再运行elasticsearch-head</h3><p> 在elasticsearch-head源码目录下，执行npm install 下载的包：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs plain\">npm install<br></code></pre></td></tr></table></figure>\n<p>效果如图：<br><img src=\"/Blog/static/image/20180905/npm-install.png\" alt=\"9200-default\"></p>\n<ul>\n<li>初次运行安装可能会报警告或错误。可以重新运行一次npm install。最后，在head源代码目录下启动Nodejs：</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs plain\">grunt server<br></code></pre></td></tr></table></figure>\n\n<p>效果如图：<br><img src=\"/Blog/static/image/20180905/grunt-server.png\" alt=\"9200-default\"></p>\n<p>访问:<a href=\"http://localhost:9100/\">http://localhost:9100</a><br>这个时候，访问<a href=\"http://localhost:9100就可以使用elasticsearch-head插件查看ES中的数据了了：\">http://localhost:9100就可以使用elasticsearch-head插件查看ES中的数据了了：</a><br><img src=\"/Blog/static/image/20180905/9100-port.png\" alt=\"9200-default\"></p>\n<h2 id=\"参考链接\"><a href=\"#参考链接\" class=\"headerlink\" title=\"参考链接\"></a>参考链接</h2><ul>\n<li><a href=\"http://www.cnblogs.com/xuxy03/p/6039999.html\">http://www.cnblogs.com/xuxy03/p/6039999.html</a></li>\n<li><a href=\"https://blog.csdn.net/fwhezfwhez/article/details/79380275\">https://blog.csdn.net/fwhezfwhez/article/details/79380275</a></li>\n<li><a href=\"https://blog.csdn.net/qq_40454655/article/details/79291106\">https://blog.csdn.net/qq_40454655/article/details/79291106</a></li>\n<li><a href=\"https://blog.csdn.net/sinat_28224453/article/details/51516061\">https://blog.csdn.net/sinat_28224453/article/details/51516061</a></li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"ElasticSearch6-x及elasticsearch-head插件的安装\"><a href=\"#ElasticSearch6-x及elasticsearch-head插件的安装\" class=\"headerlink\" title=\"ElasticSearch6.x及elasticsearch-head插件的安装\"></a>ElasticSearch6.x及elasticsearch-head插件的安装</h1><h2 id=\"安装环境\"><a href=\"#安装环境\" class=\"headerlink\" title=\"安装环境\"></a>安装环境</h2><ul>\n<li>Windows10企业版/专业版 X64</li>\n<li>JDK10.0.1</li>\n<li>ElasticSearch-5.0.0</li>\n<li>Node-v8.11.3-x64.msi</li>\n<li>Git客户端</li>\n<li>Powershell</li>\n</ul>\n<h2 id=\"1-下载相关必备软件：\"><a href=\"#1-下载相关必备软件：\" class=\"headerlink\" title=\"1.下载相关必备软件：\"></a>1.下载相关必备软件：</h2><ul>\n<li><p>Windows系统，不多废话。</p>\n</li>\n<li><p>ES官网下载页面：<a href=\"https://www.elastic.co/downloads/elasticsearch\">https://www.elastic.co/downloads/elasticsearch</a></p>\n</li>\n<li><p>ES6.4 Windows版下载链接：<a href=\"https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-6.4.0.zip\">https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-6.4.0.zip</a></p>\n</li>\n<li><p>JDK 安装略</p>\n</li>\n<li><p>Node 安装略  </p>\n<ul>\n<li>设置环境变量，把NODE_HOME设置到环境变量里(安装包也可以自动加入PATH环境变量)。测试一下node是否生效：</li>\n<li>Powershell/CMD测试命令：node -v</li>\n<li><img src=\"/Blog/static/image/20180905/node-v.png\" alt=\"9200-default\"></li>\n</ul>\n</li>\n<li><p>Git 安装略</p>\n</li>\n</ul>\n<h2 id=\"2安装ElasticSearch\"><a href=\"#2安装ElasticSearch\" class=\"headerlink\" title=\"2安装ElasticSearch\"></a>2安装ElasticSearch</h2><h3 id=\"2-1安装\"><a href=\"#2-1安装\" class=\"headerlink\" title=\"2.1安装\"></a>2.1安装</h3><p>将1中下载的elasticsearch-6.4.0.zip压缩包解压，打开压缩包的bin目录，点击elasticsearch.bat批处理文件就可以默认启动了，安装过程可以说非常简单。<br>访问:<a href=\"http://localhost:9200，如下所示：\">http://localhost:9200，如下所示：</a><br><img src=\"/Blog/static/image/20180905/9200-default.png\" alt=\"9200-default\"></p>\n<h3 id=\"2-2命令行下启动\"><a href=\"#2-2命令行下启动\" class=\"headerlink\" title=\"2.2命令行下启动\"></a>2.2命令行下启动</h3><p>在Powershell中开启ES-6.x，直接执行bat文件：<br>D:\\ProgramFiles\\ElasticSearch\\elasticsearch-6.4.0\\bin\\elasticsearch.bat<br>也在系统的环境变量中将路径”D:\\ProgramFiles\\ElasticSearch\\elasticsearch-6.4.0\\bin&quot;添加到”Path”中<br>可以直接使用如下命令运行：</p>\n<figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs cmd\">elasticsearch.bat<br></code></pre></td></tr></table></figure>\n<p>启动效果：<br><img src=\"/Blog/static/image/20180905/ES%E5%90%AF%E5%8A%A8.png\" alt=\"9200-default\"></p>\n<h2 id=\"3-elasticsearch-head插件安装\"><a href=\"#3-elasticsearch-head插件安装\" class=\"headerlink\" title=\"3.elasticsearch-head插件安装\"></a>3.elasticsearch-head插件安装</h2><h3 id=\"3-1安装grunt\"><a href=\"#3-1安装grunt\" class=\"headerlink\" title=\"3.1安装grunt\"></a>3.1安装grunt</h3><p>grunt是一个很方便的构建工具，可以进行打包压缩、测试、执行等等的工作，6.x里的head插件需要通过grunt启动。因此需要安装grunt：</p>\n<ul>\n<li>设置全局安装(-g代表全局安装,安装在D:\\ProgramFiles\\NodeJs\\node_modules\\目录下)：<figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs cmd\">npm install -g grunt-cli<br></code></pre></td></tr></table></figure></li>\n</ul>\n<h3 id=\"3-2下载elasticsearch-head插件的源码\"><a href=\"#3-2下载elasticsearch-head插件的源码\" class=\"headerlink\" title=\"3.2下载elasticsearch-head插件的源码\"></a>3.2下载elasticsearch-head插件的源码</h3><p>源码地址：<a href=\"https://github.com/mobz/elasticsearch-head.git\">https://github.com/mobz/elasticsearch-head.git</a></p>\n<h4 id=\"2-2-1使用git-clone命令下载下来：\"><a href=\"#2-2-1使用git-clone命令下载下来：\" class=\"headerlink\" title=\"2.2.1使用git clone命令下载下来：\"></a>2.2.1使用git clone命令下载下来：</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs plain\">git clone git:&#x2F;&#x2F;github.com&#x2F;mobz&#x2F;elasticsearch-head.git<br></code></pre></td></tr></table></figure>\n<p>效果如图：<br><img src=\"/Blog/static/image/20180905/git-clone.png\" alt=\"9200-default\"></p>\n<h3 id=\"3-3配置elasticsearch-head\"><a href=\"#3-3配置elasticsearch-head\" class=\"headerlink\" title=\"3.3配置elasticsearch-head\"></a>3.3配置elasticsearch-head</h3><p>由于head的代码还是旧版本的，直接执行有很多限制，比如无法跨机器访问。因此需要修改几个地方：</p>\n<h4 id=\"3-3-1修改elasticsearch-head源码配置-Gruntfile-js\"><a href=\"#3-3-1修改elasticsearch-head源码配置-Gruntfile-js\" class=\"headerlink\" title=\"3.3.1修改elasticsearch-head源码配置-Gruntfile.js\"></a>3.3.1修改elasticsearch-head源码配置-Gruntfile.js</h4><p>①目录：elasticsearch-head/Gruntfile.js，增加hostname属性，设置为*：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\">connect: &#123;<br>    server: &#123;<br>        options: &#123;<br>            port: <span class=\"hljs-number\">9100</span>,<br>            hostname: <span class=\"hljs-string\">&#x27;*&#x27;</span>,<br>            base: <span class=\"hljs-string\">&#x27;.&#x27;</span>,<br>            keepalive: <span class=\"hljs-literal\">true</span><br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>\n<h4 id=\"3-3-2修改elasticsearch-head源码配置-app-js\"><a href=\"#3-3-2修改elasticsearch-head源码配置-app-js\" class=\"headerlink\" title=\"3.3.2修改elasticsearch-head源码配置-app.js\"></a>3.3.2修改elasticsearch-head源码配置-app.js</h4><p>②修改elasticsearch-head的连接地址<br>目录：elasticsearch-head/_site/app.js<br>修改连接地址:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-built_in\">this</span>.base_uri = <span class=\"hljs-built_in\">this</span>.config.base_uri || <span class=\"hljs-built_in\">this</span>.prefs.get(<span class=\"hljs-string\">&quot;app-base_uri&quot;</span>) || <span class=\"hljs-string\">&quot;http://localhost:9200&quot;</span>;<br></code></pre></td></tr></table></figure>\n<p>把localhost修改成你es的服务器地址，如：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-built_in\">this</span>.base_uri = <span class=\"hljs-built_in\">this</span>.config.base_uri || <span class=\"hljs-built_in\">this</span>.prefs.get(<span class=\"hljs-string\">&quot;app-base_uri&quot;</span>) || <span class=\"hljs-string\">&quot;http://127.0.0.1:9200&quot;</span>;<br></code></pre></td></tr></table></figure>\n\n<h3 id=\"3-4添加Elasticsearch的配置参数\"><a href=\"#3-4添加Elasticsearch的配置参数\" class=\"headerlink\" title=\"3.4添加Elasticsearch的配置参数\"></a>3.4添加Elasticsearch的配置参数</h3><p>修改Elasticsearch使用的参数。编辑elasticsearch-6.4.0/config/elasticsearch.yml配置文件，在文件末尾追加如下配置：</p>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs yml\"><span class=\"hljs-comment\"># 设置集群的名字，对应为http://127.0.0.1:9200/中的&quot;cluster_name&quot; : &quot;acanx-es-demo&quot;,</span><br><span class=\"hljs-attr\">cluster.name:</span> <span class=\"hljs-string\">acanx-es-demo</span><br><span class=\"hljs-comment\"># 节点名字，对应为http://127.0.0.1:9200/中的&quot;name&quot; : &quot;node-1001&quot;,</span><br><span class=\"hljs-attr\">node.name:</span> <span class=\"hljs-string\">node-1001</span><br><span class=\"hljs-attr\">node.master:</span> <span class=\"hljs-literal\">true</span><br><span class=\"hljs-attr\">node.data:</span> <span class=\"hljs-literal\">true</span><br><span class=\"hljs-comment\"># 修改ES的监听地址，以便其他机器也可以访问</span><br><span class=\"hljs-attr\">network.host:</span> <span class=\"hljs-number\">0.0</span><span class=\"hljs-number\">.0</span><span class=\"hljs-number\">.0</span><br><span class=\"hljs-comment\"># 默认端口</span><br><span class=\"hljs-attr\">http.port:</span> <span class=\"hljs-number\">9200</span><br><span class=\"hljs-comment\"># 增加新的CORS参数，这样head插件可以访问ES</span><br><span class=\"hljs-attr\">http.cors.enabled:</span> <span class=\"hljs-literal\">true</span><br><span class=\"hljs-attr\">http.cors.allow-origin:</span> <span class=\"hljs-string\">&quot;*&quot;</span><br></code></pre></td></tr></table></figure>\n<ul>\n<li>修改完成后记得Save保存！</li>\n<li>特别注意，设置参数的时候:后面要有空格！格式不规范在启动ES时会抛异常，配置时注意检查书写格式</li>\n</ul>\n<h3 id=\"3-5启动ElasticSearch\"><a href=\"#3-5启动ElasticSearch\" class=\"headerlink\" title=\"3.5启动ElasticSearch\"></a>3.5启动ElasticSearch</h3><p>   操作同上第二节</p>\n<figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs cmd\">elasticsearch.bat<br></code></pre></td></tr></table></figure>\n\n\n<h3 id=\"3-6再运行elasticsearch-head\"><a href=\"#3-6再运行elasticsearch-head\" class=\"headerlink\" title=\"3.6再运行elasticsearch-head\"></a>3.6再运行elasticsearch-head</h3><p> 在elasticsearch-head源码目录下，执行npm install 下载的包：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs plain\">npm install<br></code></pre></td></tr></table></figure>\n<p>效果如图：<br><img src=\"/Blog/static/image/20180905/npm-install.png\" alt=\"9200-default\"></p>\n<ul>\n<li>初次运行安装可能会报警告或错误。可以重新运行一次npm install。最后，在head源代码目录下启动Nodejs：</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs plain\">grunt server<br></code></pre></td></tr></table></figure>\n\n<p>效果如图：<br><img src=\"/Blog/static/image/20180905/grunt-server.png\" alt=\"9200-default\"></p>\n<p>访问:<a href=\"http://localhost:9100/\">http://localhost:9100</a><br>这个时候，访问<a href=\"http://localhost:9100就可以使用elasticsearch-head插件查看ES中的数据了了：\">http://localhost:9100就可以使用elasticsearch-head插件查看ES中的数据了了：</a><br><img src=\"/Blog/static/image/20180905/9100-port.png\" alt=\"9200-default\"></p>\n<h2 id=\"参考链接\"><a href=\"#参考链接\" class=\"headerlink\" title=\"参考链接\"></a>参考链接</h2><ul>\n<li><a href=\"http://www.cnblogs.com/xuxy03/p/6039999.html\">http://www.cnblogs.com/xuxy03/p/6039999.html</a></li>\n<li><a href=\"https://blog.csdn.net/fwhezfwhez/article/details/79380275\">https://blog.csdn.net/fwhezfwhez/article/details/79380275</a></li>\n<li><a href=\"https://blog.csdn.net/qq_40454655/article/details/79291106\">https://blog.csdn.net/qq_40454655/article/details/79291106</a></li>\n<li><a href=\"https://blog.csdn.net/sinat_28224453/article/details/51516061\">https://blog.csdn.net/sinat_28224453/article/details/51516061</a></li>\n</ul>\n"},{"title":"Hello World","date":"2018-06-26T05:33:31.000Z","description":"演示文章","_content":"Welcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/deployment.html)\n","source":"_posts/Hello-World.md","raw":"---\ntitle: Hello World\ndate: 2018-06-26 13:33:31\ncategories: \"默认\" #文章分类目录 可以省略\ntags:  \n     - 默认\ndescription: 演示文章  #\n---\nWelcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/deployment.html)\n","slug":"Hello-World","published":1,"updated":"2025-03-26T06:43:52.996Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cm8pr0j240003gskz6gjf3ngv","content":"<p>Welcome to <a href=\"https://hexo.io/\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\">GitHub</a>.</p>\n<h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">$ hexo new <span class=\"hljs-string\">&quot;My New Post&quot;</span><br></code></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">$ hexo server<br></code></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/server.html\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">$ hexo generate<br></code></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">$ hexo deploy<br></code></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/deployment.html\">Deployment</a></p>\n","site":{"data":{}},"excerpt":"","more":"<p>Welcome to <a href=\"https://hexo.io/\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\">GitHub</a>.</p>\n<h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">$ hexo new <span class=\"hljs-string\">&quot;My New Post&quot;</span><br></code></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">$ hexo server<br></code></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/server.html\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">$ hexo generate<br></code></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">$ hexo deploy<br></code></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/deployment.html\">Deployment</a></p>\n"},{"title":"Java基础-（1）介绍","date":"2018-06-30T15:12:15.000Z","description":"Java介绍","_content":"\n\n# 概述\nJava不仅仅是一门编程语言，它还是一个由一系列计算机软件和规范组成的技术体系，这个技术体系提供了完整的用于软件开发和跨平台部署的支持环境，并广泛应用于嵌入式系统、移动终端、企业服务器、大型机等多种场合，如图1-1所示。时至今日，Java技术体系已经吸引了600多万软件开发者，这是全球最大的软件开发团队。使用Java的设备已经超过了45亿，其中包括8亿多台个人计算机、21亿部移动电话及其他手持设备、35亿个智能卡，以及大量机顶盒、导航系统和其他设备。\n\nJava能获得如此广泛的认可，除了它拥有一门结构严谨、面向对象的编程语言之外，还有许多不可忽视的优点：它摆脱了硬件平台的束缚，实现了“一次编写，到处运行”的理想；它提供了一种相对安全的内存管理和访问机制，避免了绝大部分内存泄漏和指针越界问题；它实现了热点代码检测和运行时编译及优化，这使得Java应用能随着运行时间的增长而获得更高的性能；它有一套完善的应用程序接口，还有无数来自商业机构和开源社区的第三方类库来帮助用户实现各种各样的功能……Java带来的这些好处，让软件的开发效率得到了极大的提升。作为一名Java程序员，在编写程序时除了尽情发挥Java的各种优势外，还会情不自禁地想去了解和思考一下Java技术体系中这些优秀的技术特性是如何出现及怎样实现的。认识这些技术运行的本质，是自己思考“程序这样写好不好”的必要基础与前提。\n\n\n\n# Java技术体系\n从广义上讲，Kotlin、Clojure、JRuby、Groovy等运行于Java虚拟机上的编程语言及其相关的程序都属于Java技术体系中的一员。如果仅从传统意义上来看，JCP官方[1]所定义的Java技术体系包括了以下几个组成部分：\n- ·Java程序设计语言\n- ·各种硬件平台上的Java虚拟机实现\n- ·Class文件格式\n- ·Java类库API\n- ·来自商业机构和开源社区的第三方Java类库\n\n我们可以把Java程序设计语言、Java虚拟机、Java类库这三部分统称为JDK（Java Development Kit），JDK是用于支持Java程序开发的最小环境，本书中为行文方便，在不产生歧义的地方常以JDK 来代指整个Java技术体系[2]。可以把Java类库API中的Java SE API子集[3]和Java虚拟机这两部分统称为JRE（Java Runtime Environment），JRE是支持Java程序运行的标准环境。图1-2展示了Java技术体系所包括的内容，以及JDK和JRE所涵盖的范围。以上是根据Java各个组成部分的功能来进行划分，如果按照技术所服务的领域来划分，或者按照技术关注的重点业务来划分的话，那Java技术体系可以分为以下四条主要的产品线：\n\n- ·Java Card：支持Java小程序（Applets）运行在小内存设备（如智能卡）上的平台。\n- ·Java ME（Micro Edition）：支持Java程序运行在移动终端（手机、PDA）上的平台，对Java API有所精简，并加入了移动终端的针对性支持，这条产品线在JDK 6以前被称为J2ME。有一点读者请勿混淆，现在在智能手机上非常流行的、主要使用Java语言开发程序的Android并不属于Java ME。\n- ·Java SE（Standard Edition）：支持面向桌面级应用（如Windows下的应用程序）的Java平台，提供了完整的Java核心API，这条产品线在JDK 6以前被称为J2SE。\n- ·Java EE（Enterprise Edition）：支持使用多层架构的企业应用（如ERP、MIS、CRM应用）的Java平台，除了提供Java SE API外，还对其做了大量有针对性的扩充[4]，并提供了相关的部署支持，这条产品线在JDK 6以前被称为J2EE，在JDK 10以后被Oracle放弃，捐献给Eclipse基金会管理，此后被称为Jakarta EE。\n\n\n\n\n# Java发展史\n从Java的第一个版本诞生到现在已经有二十余年的时间，白驹过隙，沧海桑田，转眼已过了四分之一个世纪，在图1-3所示的时间线里，我们看到JDK的版本已经发展到了JDK 13。这二十多年里诞生过无数与Java相关的产品、技术与标准。现在让我们走入时间隧道，从孕育Java语言的时代开始，再来回顾一下Java的发展轨迹和历史变迁。\n\n1991年4月，由James Gosling博士领导的绿色计划（Green Project）开始启动，此计划最初的目标是开发一种能够在各种消费性电子产品（如机顶盒、冰箱、收音机等）上运行的程序架构。这个计划的产品就是Java语言的前身：Oak（得名于James Gosling办公室外的一棵橡树）。Oak当时在消费品市场上并不算成功，但随着1995年互联网潮流的兴起，Oak迅速找到了最适合自己发展的市场定位并蜕变成为Java语言。\n\n1995年5月23日，Oak语言改名为Java，并且在SunWorld大会上正式发布Java 1.0版本。Java语言第一次提出了“Write Once，Run Anywhere”的口号。\n\n1996年1月23日，JDK 1.0发布，Java语言有了第一个正式版本的运行环境。JDK 1.0提供了一个纯解释执行的Java虚拟机实现（Sun Classic VM）。JDK 1.0版本的代表技术包括：Java虚拟机、Applet、AWT等。\n\n1996年4月，十个最主要的操作系统和计算机供应商声明将在其产品中嵌入Java技术。同年9月，已有大约8.3万个网页应用了Java技术来制作。在1996年5月底，Sun于美国旧金山举行了首届JavaOne大会，从此JavaOne成为全世界数百万Java语言开发者每年一度的技术盛会。\n\n1997年2月19日，Sun公司发布了JDK 1.1，Java里许多最基础的技术支撑点（如JDBC等）都是在JDK 1.1版本中提出的，JDK 1.1版的技术代表有：JAR文件格式、JDBC、JavaBeans、RMI等。Java语言的语法也有了一定的增强，如内部类（Inner Class）和反射（Reflection）都是在这时候出现的。直到1999年4月8日，JDK 1.1一共发布了1.1.0至1.1.8这9个版本。从1.1.4以后，每个JDK版本都有一个属于自己的名字（工程代号），分别为：JDK 1.1.4-Sparkler（宝石）、JDK 1.1.5-Pumpkin（南瓜）、JDK 1.1.6-Abigail（阿比盖尔，女子名）、JDK 1.1.7-Brutus（布鲁图，古罗马政治家和将军）和JDK 1.1.8-Chelsea（切尔西，城市名）。\n\n1998年12月4日，JDK迎来了一个里程碑式的重要版本：工程代号为Playground（竞技场）的JDK 1.2，Sun在这个版本中把Java技术体系拆分为三个方向，分别是面向桌面应用开发的J2SE（Java 2 Platform，Standard Edition）、面向企业级开发的J2EE（Java 2 Platform，Enterprise Edition）和面向手机等移动终端开发的J2ME（Java 2 Platform，Micro Edition）。在这个版本中出现的代表性技术非常多，如EJB、Java Plug-in、Java IDL、Swing等，并且这个版本中Java虚拟机第一次内置了JIT（Just In Time）即时编译器（JDK 1.2中曾并存过三个虚拟机，Classic VM、HotSpot VM和Exact VM，其中Exact VM只在Solaris平台出现过；后面两款虚拟机都是内置了JIT即时编译器的，而之前版本所带的Classic VM只能以外挂的形式使用即时编译器）。在语言和API层面上，Java添加了strictfp关键字，Java类库添加了现在Java编码之中极为常用的一系列Collections集合类等。在1999年3月和7月，分别有JDK 1.2.1和JDK 1.2.2两个小升级版本发布。\n\n1999年4月27日，HotSpot虚拟机诞生。HotSpot最初由一家名为“Longview Techno-logies”的小公司开发，由于HotSpot的优异表现，这家公司在1997年被Sun公司收购。Hot-Spot虚拟机刚发布时是作为JDK 1.2的附加程序提供的，后来它成为JDK 1.3及之后所有JDK版本的默认Java虚拟机。\n\n2000年5月8日，工程代号为Kestrel（美洲红隼）的JDK 1.3发布。相对于JDK 1.2，JDK 1.3的改进主要体现在Java类库上（如数学运算和新的Timer API等），JNDI服务从JDK 1.3开始被作为一项平台级服务提供（以前JNDI仅仅是一项扩展服务），使用CORBA IIOP来实现RMI的通信协议，等等。这个版本还对Java 2D做了很多改进，提供了大量新的Java 2D API，并且新添加了JavaSound类库。JDK1.3有1个修正版本JDK 1.3.1，工程代号为Ladybird（瓢虫），于2001年5月17日发布。自从JDK 1.3开始，Sun公司维持着稳定的研发节奏：大约每隔两年发布一个JDK的主版本，以动物命名，期间发布的各个修正版本则以昆虫作为工程代号。\n\n2002年2月13日，JDK 1.4发布，工程代号为Merlin（灰背隼）。JDK 1.4是标志着Java真正走向成熟的一个版本，Compaq、Fujitsu、SAS、Symbian、IBM等著名公司都有参与功能规划，甚至实现自己独立发行的JDK 1.4。哪怕是在近二十年后的今天，仍然有一些主流应用能直接运行在JDK 1.4之上，或者继续发布能运行在1.4上的版本。JDK 1.4同样带来了很多新的技术特性，如正则表达式、异常链、NIO、日志类、XML解析器和XSLT转换器，等等。JDK 1.4有两个后续修正版：2002年9月16日发布的工程代号为Grasshopper（蚱蜢）的JDK 1.4.1与2003年6月26日发布的工程代号为Mantis（螳螂）的JDK 1.4.2。\n\n2002年前后还发生了一件与Java没有直接关系，但事实上对Java的发展进程影响很大的事件，就是微软的.NET Framework发布。这个无论是技术实现还是目标用户上都与Java有很多相近之处的技术平台给Java带来了很多讨论、比较与竞争，.NET平台和Java平台之间声势浩大的孰优孰劣的论战到今天为止都仍然没有完全平息。\n\n2004年9月30日，JDK 5发布，工程代号为Tiger（老虎）。Sun公司从这个版本开始放弃了谦逊的“JDK 1.x”的命名方式，将产品版本号修改成了“JDK x”[1]。从JDK 1.2以来，Java在语法层面上的变动一直很小，而JDK 5在Java语法易用性上做出了非常大的改进。如：自动装箱、泛型、动态注解、枚举、可变长参数、遍历循环（foreach循环）等语法特性都是在JDK 5中加入的。在虚拟机和API层面上，这个版本改进了Java的内存模型（Java Memory Model，JMM）、提供了java.util.concurrent并发包等。另外，JDK 5是官方声明可以支持Windows 9x操作系统的最后一个JDK版本。\n\n2006年12月11日，JDK 6发布，工程代号为Mustang（野马）。在这个版本中，Sun公司终结了从JDK 1.2开始已经有八年历史的J2EE、J2SE、J2ME的产品线命名方式，启用Java EE 6、Java SE 6、Java ME 6的新命名来代替。JDK 6的改进包括：提供初步的动态语言支持（通过内置Mozilla JavaScript Rhino引擎实现）、提供编译期注解处理器和微型HTTP服务器API，等等。同时，这个版本对Java虚拟机内部做了大量改进，包括锁与同步、垃圾收集、类加载等方面的实现都有相当多的改动。\n\n在2006年11月13日的JavaOne大会上，Sun公司宣布计划要把Java开源，在随后的一年多时间内，它陆续地将JDK的各个部分在GPLv2（GNU General Public License v2）协议下公开了源码，并建立了OpenJDK组织对这些源码进行独立管理。除了极少量的产权代码（Encumbered Code，这部分代码所有权不属于Sun公司，Sun本身也无权进行开源处理）外，OpenJDK几乎拥有了当时SunJDK 7的全部代码，OpenJDK的质量主管曾经表示在JDK 7中，SunJDK和OpenJDK除了代码文件头的版权注释之外，代码几乎是完全一样的，所以OpenJDK 7与SunJDK 7本质上就是同一套代码库出来的产品。\n\nJDK 6发布以后，由于代码复杂性的增加、Java开源、开发JavaFX、世界经济危机及Oracle对Sun的收购案等原因，Sun公司在发展Java以外的事情上耗费了太多精力和资源，JDK的更新没有能够继续维持两年发布一个主版本的研发速度，这导致了JDK 6的生命周期异常的长，一共发布了211个更新升级补丁，最后的版本为Java SE 6 Update 211，于2018年10月18日发布。\n\n2009年2月19日，工程代号为Dolphin（海豚）的JDK 7完成了其第一个里程碑版本。按照JDK 7最初的功能规划，一共会设置十个里程碑。最后一个里程碑版本原计划定于2010年9月9日结束，但由于各种原因，JDK 7最终无法按计划完成。从JDK 7最原始的功能清单来看，它本应是一个包含许多重要改进的JDK版本，其中规划的子项目都为Java业界翘首以盼，包括：\n\n- ·Lambda项目：支持Lambda表达式，支持函数式编程。\n- ·Jigsaw项目：虚拟机层面的模块化支持。\n-·动态语言支持：Java是静态语言，为其他运行在Java虚拟机上的动态语言提供支持。\n- ·Garbage-First收集器。\n- ·Coin项目：Java语法细节进化。\n\n令人惋惜的是，在JDK 7开发期间，Sun公司相继在技术竞争和商业竞争中陷入泥潭，公司的股票市值跌至仅有高峰时期的3%，已无力推动JDK 7的研发工作按计划继续进行。为了尽快结束JDK 7长期跳票的问题，Oracle收购Sun公司后随即宣布马上实行“B计划”，大幅裁剪了JDK 7预定目标，以保证JDK 7的正式版能够于2011年7月28日准时发布。“B计划”的主要措施是把不能按时完成的Lambda项目、Jigsaw项目和Coin项目的部分改进延迟到JDK 8之中。最终，JDK 7包含的改进有：提供新的G1收集器（G1在发布时依然处于Experimental状态，直至2012年4月的Update 4中才正式商用）、加强对非Java语言的调用支持（JSR-292，这项特性在到JDK 11还有改动）、可并行的类加载架构等。Oracle公司接手了JDK开发工作以后，迅速展现出了完全不同于Sun时期的、极具商业化的处事风格。面对Java中使用最广泛而又一直免费的Java SE产品线，Oracle很快定义了一套新的Java SE Support[2]产品计划，把JDK的更新支持作为一项商业服务。JDK 7发布的前80个更新仍然免费面向所有用户提供，但后续的其他更新包，用户[3]只能从“将Java SE升级到Java SE Support”与“将JDK 7升级到最新版本”两个选项里挑一个。JDK 7计划维护至2022年，迄今（面向付费用户）已发布了超过两百个更新补丁，最新版本为JDK 7 Update 221。\n\n对于JDK 7，还有一点值得提起的是，从JDK 7 Update 4起，Java SE的核心功能正式开始为Mac OS X操作系统提供支持，并在JDK 7 Update 6中达到所有功能与Mac OS X完全兼容的程度；同时，JDK 7 Update 6还对ARM指令集架构提供了支持。至此，官方提供的JDK可以运行于Windows（不含Windows 9x）、Linux、Solaris和Mac OS X操作系统上，支持ARM、x86、x86-64和SPARC指令集架构，JDK 7也是可以支持Windows XP操作系统的最后一个版本[4]。\n\n2009年4月20日，Oracle宣布正式以74亿美元的价格收购市值曾超过2000亿美元的Sun公司，传奇的Sun Microsystems从此落幕成为历史，Java商标正式划归Oracle所有（Java语言本身并不属于哪间公司所有，它由JCP组织进行管理，尽管在JCP中Sun及后来的Oracle的话语权很大）。由于此前Oracle已经收购了另外一家大型的中间件企业BEA公司，当完成对Sun公司的收购之后，Oracle分别从BEA和Sun手中取得了世界三大商用虚拟机的其中两个：JRockit和HotSpot。当时Oracle宣布要在未来一至两年的时间内，把这两个优秀的Java虚拟机合二为一[5]。两者合并的结果只能说差强人意，JRockit的监控工具Java Mission Control被移植到了HotSpot，作为收费功能提供给购买了Java SE Advanced产品计划的用户，其他功能由于两者架构的差异性明显，HotSpot能够直接借鉴融合的功能寥寥无几[6]。\n\nJDK 8的第一个正式版本原定于2013年9月发布，最终还是跳票到了2014年3月18日，尽管仍然是没有赶上正点，但比起JDK 7那种以年作为计时单位、直接把公司跳崩的研发状况已是大有改善。为了保证日后JDK研发能更顺利地进行，从JDK 8开始，Oracle启用JEP（JDK Enhancement Proposals）来定义和管理纳入新版JDK发布范围的功能特性。JDK 8提供了那些曾在JDK 7中规划过，但最终未能在JDK 7中完成的功能，主要包括：\n\n- ·JEP 126：对Lambda表达式的支持，这让Java语言拥有了流畅的函数式表达能力。\n\n- ·JEP 104：内置Nashorn JavaScript引擎的支持。\n\n- ·JEP 150：新的时间、日期API。\n\n- ·JEP 122：彻底移除HotSpot的永久代。\n\n- ·……\n\n\n“B计划”中原本说好的会在JDK 8提供的Jigsaw模块化功能再次被延期到了JDK 9，不得不说，即0使放到整个Java发展史里看，Jigsaw都能算是天字第一号的大坑。Java的模块化系统本身面临的技术挑战就很艰巨，从微软的DLL技术开始，到Java自己的JAR，再到.NET的Assembly，工程庞大起来都无一例外会陷入“模块地狱”[7]的困境之中，而Jigsaw面临的更大困难是厂商之间以标准话语权为目的，以技术为“找茬”手段的激烈竞争。原本JDK 9是计划在2016年发布的，但在2016年伊始，Oracle就宣布JDK 9肯定要延期至2017年，后来又连续经过了两次短时间的跳票，最终到2017年9月21日才得以艰难面世。后两次跳票的原因是以IBM和RedHat为首[8]的十三家企业在JCP执行委员会上联手否决了Oracle提出的Jigsaw作为Java模块化规范进入JDK 9发布范围的提案[9]。凭良心说，Java确实有模块化的刚需，不论是JDK自身（例如拆分出Java SE Embedded这样规模较小的产品）抑或是Java应用都需要用到模块化。这方面IBM本身就是各大Java发行厂商中做得最好的，它不仅让自家的JDK实现了高度模块化，还带头成立了OSGi联盟，制订了Java框架层面模块化的事实标准，所以它当然会想把OSGi推到Java规范里去争个“名份”，而不是被Jigsaw革掉“性命”。可是Oracle对此没有丝毫退让，不惜向JCP发去公开信[10]，直言如果提案最后无法通过，那Oracle将摒弃JSR专家组，独立发展带Jigsaw的Java版本，Java顿时面临如Python 2与Python3那般分裂的危机。\n\n不论如何，经过前后六轮投票，经历桌上桌下的斗争与妥协，Java没有分裂，JDK 9总算是带着Jigsaw最终发布了，除了Jigsaw外，JDK 9还增强了若干工具（JS Shell、JLink、JHSDB等），整顿了HotSpot各个模块各自为战的日志系统，支持HTTP 2客户单API等91个JEP。\n\nJDK 9发布后，Oracle随即宣布Java将会以持续交付的形式和更加敏捷的研发节奏向前推进，以后JDK将会在每年的3月和9月各发布一个大版本[11]，目的就是为避免众多功能特性被集中捆绑到一个JDK版本上而引发交付风险。这次改革确实从根源上解决了跳票问题，但也为Java的用户和发行商带来了颇大的压力，不仅程序员感慨“Java新版本还没开始用就已经过时了”，Oracle自己对着一堆JDK版本分支也在挠头，不知道该如何维护更新，该如何提供技术支持。Oracle的解决方案是顺理成章地终结掉“每个JDK版本最少维护三年”的优良传统，从此以后，每六个JDK大版本中才会被划出一个长期支持（Long Term Support，LTS）版，只有LTS版的JDK能够获得为期三年的支持和更新，普通版的JDK就只有短短六个月的生命周期。JDK 8和JDK 11会是LTS版，再下一个就到2021年发布的JDK 17了。\n\n2018年3月20日，JDK 10如期发布，这版本的主要研发目标是内部重构，诸如统一源仓库、统一垃圾收集器接口、统一即时编译器接口（JVMCI在JDK 9已经有了，这里是引入新的Graal即时编译器）等，这些都将会是对未来Java发展大有裨益的改进，但对普通用户来说JDK 10的新特性就显得乏善可陈，毕竟它只包含了12个JEP，而且其中只有本地类型推断这一个编码端可见的改进。尽管JDK10可见的改进有限，但2018这一年Java圈丝毫不缺乏谈资，相继发生了几件与“金钱”相关的历史性大事件。首先是2018年3月27日，Android的Java侵权案有了最终判决，法庭裁定Google赔偿Oracle合计88亿美元，要知道2009年Oracle收购Sun也就只花了74亿，收购完成后随即就用Sun的专利把Google告上了法庭，经过Oracle法务部的几轮神操作，一场官司的赔偿让收购Sun公司等同免费。对此事Java技术圈多数吃瓜群众是站在Google这边的，认为Oracle这样做是自绝Java的发展前景，毕竟当年Android刚刚起步的时候可是Sun向Google抛去的橄榄枝，Android的流行也巩固了Java“第一编程语言”的行业地位。摒弃对企业的好恶情感，就事论事，Google采用Java的语法和API类库，开发出来的程序却不能运行在其他Java虚拟机之上，这事情无论怎样都是有违Java技术的精神原旨的，也肯定违反了Java的使用协议[12]。如果说Oracle控告Google“不厚道”，那当年微软用J++做了同样的事情（借用语法和API，但程序不兼容标准Java虚拟机），被Sun告到登报道歉，一边赔款一边割地，声明放弃J++语言和Windows平台上的内置虚拟机，这又该找谁说理去？按常理说Java刚给Oracle赚了88亿美金，该颇为受宠才对，可Oracle是典型只谈利益不讲情怀的公司，InfoWorld披露的一封Oracle高管邮件表明[13]，Java体系中被认为无法盈利也没有太多战略前景的部分会逐渐被“按计划报废”（Planned Obsolescence）。这事的第一刀落下是在2018年3月，Oracle正式宣告Java EE成为历史名词。虽然Java SE、Java EE和Java ME三条产品线里确实只有Java SE称得上成功，但Java EE毕竟无比辉煌过，现在其中还持有着JDBC、JMS、Servlet等使用极为广泛的基础组件，然而Oracle仍选择把它“扫地出门”，所有权直接赠送给Eclipse基金会，唯一的条件是以后不准再使用“Java”这个商标[14]，所以取而代之的将是Jakarta EE。\n\n2018年10月，JavaOne 2018在旧金山举行，此前没有人想过这会是最后一届JavaOne大会，这个在1996年伴随着Java一同诞生、成长的开发者年度盛会，竟是Oracle下一个裁撤的对象[15]，此外还有Java Mission Control的开发团队，也在2018年6月被Oracle解散。\n\n2018年9月25日，JDK 11发布，这是一个LTS版本的JDK，包含17个JEP，其中有ZGC这样的革命性的垃圾收集器出现，也有把JDK 10中的类型推断加入Lambda语法这种可见的改进，但都比不过它发布时爆出来的谣言轰动：“Java要开始收费啦！”\n\n随着JDK 11发布，Oracle同时调整了JDK的授权许可证，里面包含了好几个动作。首先，Oracle从JDK 11起把以前的商业特性[16]全部开源给OpenJDK，这样OpenJDK 11和OracleJDK 11的代码和功能，在本质上就是完全相同的（官方原文是Essentially Identical）[17]。然后，Oracle宣布以后将会同时发行两个JDK：一个是以GPLv2+CE协议下由Oracle发行的OpenJDK（本书后面章节称其为Oracle OpenJDK），另一个是在新的OTN协议下发行的传统的OracleJDK，这两个JDK共享绝大部分源码，在功能上是几乎一样的[18]，核心差异是前者可以免费在开发、测试或生产环境中使用，但是只有半年时间的更新支持；后者个人依然可以免费使用，但若在生产环境中商用就必须付费，可以有三年时间的更新支持。如果说由此能得出“Java要收费”的结论，那是纯属标题党，最多只能说Oracle在迫使商业用户要么不断升级JDK的版本，要么就去购买商业支持[19]。\n\n2019年2月，在JDK 12发布前夕，Oracle果然如之前宣布那样在六个月之后就放弃了对上一个版本OpenJDK的维护，RedHat同时从Oracle手上接过OpenJDK 8和OpenJDK 11的管理权利和维护职责[20]。Oracle不愿意在旧版本上继续耗费资源，而RedHat或者说它背后的IBM又乐意扩大自己在Java社区的影响力，这是一笔双赢的交易。RedHat代替Oracle成为JDK历史版本的维护者，应该有利于Java的持续稳定，但从技术发展角度来看，这并不能为Oracle领导Java社区的局面带来根本性的改变，毕竟要添加新的或实验性的功能，仅会针对Java的最新版本，而不会在旧版本上动手。\n\n2019年3月20日，JDK 12发布，只包含8个JEP，其中主要有Switch表达式、Java微测试套件（JMH）等新功能，最引人注目的特性无疑是加入了由RedHat领导开发的Shen-andoah垃圾收集器。Shenandoah作为首个由非Oracle开发的垃圾收集器，其目标又与Oracle在JDK 11中发布的ZGC几乎完全一致，两者天生就存在竞争。Oracle马上用实际行动抵制了这个新收集器，在JDK 11发布时才说应尽可能保证OracleJDK和OpenJDK的兼容一致，转眼就在Oracle JDK 12里把Shenandoah的代码通过条件编译强行剔除掉，使其成为历史上唯一进入了OpenJDK发布清单，但在OracleJDK中无法使用的功能。\n\nOracle收购Sun是Java发展历史上一道明显的分界线。在Sun掌舵的前十几年里，Java获得巨大成功，同时也渐渐显露出来语言演进的缓慢与社区决策的老朽；而在Oracle主导Java后，引起竞争的同时也带来新的活力，Java发展的速度要显著高于Sun时代。Java的未来是继续向前、再攀高峰，还是由盛转衰、锋芒挫缩，你我拭目以待。\n\nJava面临的危机挑战前所未有的艰巨，属于Java的未来也从未如此充满想象与可能。\n\n\n\n\n\n-----------\n\n\n[1] Java从1.5版本开始，官方在正式文档与宣传上已经不再使用类似“JDK 1.5”的命名，只有程序员内\n部使用的开发版本号（Developer Version，例如java-version的输出）中才继续沿用1.5、1.6、1.7这样的版本号，而公开版本号（Product Version）则是改为JDK 5.0、JDK 6、JDK 7的命名方式，JDK 5.0中“.0”的后缀从JDK 6起也被移除掉，本书为了行文统一，同样以JDK 5来指代JDK 5.0。\n[2] 除了Java SE Support外，还有面向独立软件提供商的Java SE Advanced & Suite产品线，差别是后者带有JMC等监控工具，详细内容可以参见本书第4章。\n[3] 特指商业用户，个人使用仍然是可以免费获得这些更新包的。\n[4] 这是官方的声明，而事实上直到JDK 8 Update 21之前在Windows XP上仍可正常运行。\n[5] “HotRockit”项目的相关介绍：http://hirt.se/presentations/WhatToExpect.ppt。\n[6] 除了JMC和JFR，HotSpot用本地内存代替永久代实现方法区，支持本地内存使用情况追（NMT）等功能是从JRockit借鉴过来的。\n[7] 来自于以前的“DLL Hell”，如果读者不清楚什么是模块地狱的话，打开你计算机的windows目录或者windows\\system32目录就明白了。\n[8] 其实就是以IBM为首，IBM一直与RedHat有密切合作，2018年IBM以340亿美元天价收购了RedHat。\n[9] 投票记录：https://jcp.org/en/jsr/results?id=5959。\n[10] 公开信：https://www.infoq.cn/article/2017/05/jigsaw-open-letter。\n[11] 也改掉了在开发版号中1.7、1.8的命名，从JDK 10后将是年份加月份作为开发版本号，譬如18.3，即表示2018年3月的大版本。\n[12] Oracle与Google的官司主要焦点在于Java API的版权问题，而不在程序是否能运行在标准Java虚拟机上。\n[13] 资料来源：https://www.infoworld.com/article/2987529/insider-oracle-lost-interest-in-java.html。\n[14] 最大的争议点是Oracle要求包名中不能出现java字样，导致一堆javax.*开头的包一旦修改或添加新代码，就必须重新命名，这将让用到它们的代码都受到影响。资料来源：https://www.infoq.cn/article/2018/02/from-javaee-to-jakartaee。\n[15] Java One大会从2019年起停办，合并入Oracle CodeOne大会中。\n[16] 需要使用+XX：+UnlockCommercialFeatures解锁的特性，包括JMC、JFR、NMT、AppCDS和ZGC等。\n[17] 资料来源：https://blogs.oracle.com/java-platform-group/oracle-jdk-releases-for-java-11-and-later。\n[18] JDK 11中仅有的微小差别是OpenJDK少了几个Module（如JavaFX），且不提供安装包，以压缩包形式发行。但在JDK 12又产生了新的分歧，OpenJDK的Shenandoah垃圾收集器被排除在OracleJDK之外，详见第4章的相关内容。\n[19] 这里的商业支持不限定于Oracle公司，如Azul ZingJDK、AdoptOpenJDK等都能提供商业支持。\n[20] Red Hat此前已经是OpenJDK 6（自2013年起）和OpenJDK 7（自2015年起）的维护者。\n\n\n### 参考\n- 《深入理解Java虚拟机：JVM高级特性与最佳实践》周志明 第三版 \n\n\n\n\n\n\n\n","source":"_posts/Java基础-（1）介绍.md","raw":"---\ntitle: Java基础-（1）介绍\ndate: 2018-06-30 23:12:15\ncategories: \"Java\" #文章分類目錄 可以省略\ntags: \n     - Java\ndescription: Java介绍  #本頁的描述 可以省略\n---\n\n\n# 概述\nJava不仅仅是一门编程语言，它还是一个由一系列计算机软件和规范组成的技术体系，这个技术体系提供了完整的用于软件开发和跨平台部署的支持环境，并广泛应用于嵌入式系统、移动终端、企业服务器、大型机等多种场合，如图1-1所示。时至今日，Java技术体系已经吸引了600多万软件开发者，这是全球最大的软件开发团队。使用Java的设备已经超过了45亿，其中包括8亿多台个人计算机、21亿部移动电话及其他手持设备、35亿个智能卡，以及大量机顶盒、导航系统和其他设备。\n\nJava能获得如此广泛的认可，除了它拥有一门结构严谨、面向对象的编程语言之外，还有许多不可忽视的优点：它摆脱了硬件平台的束缚，实现了“一次编写，到处运行”的理想；它提供了一种相对安全的内存管理和访问机制，避免了绝大部分内存泄漏和指针越界问题；它实现了热点代码检测和运行时编译及优化，这使得Java应用能随着运行时间的增长而获得更高的性能；它有一套完善的应用程序接口，还有无数来自商业机构和开源社区的第三方类库来帮助用户实现各种各样的功能……Java带来的这些好处，让软件的开发效率得到了极大的提升。作为一名Java程序员，在编写程序时除了尽情发挥Java的各种优势外，还会情不自禁地想去了解和思考一下Java技术体系中这些优秀的技术特性是如何出现及怎样实现的。认识这些技术运行的本质，是自己思考“程序这样写好不好”的必要基础与前提。\n\n\n\n# Java技术体系\n从广义上讲，Kotlin、Clojure、JRuby、Groovy等运行于Java虚拟机上的编程语言及其相关的程序都属于Java技术体系中的一员。如果仅从传统意义上来看，JCP官方[1]所定义的Java技术体系包括了以下几个组成部分：\n- ·Java程序设计语言\n- ·各种硬件平台上的Java虚拟机实现\n- ·Class文件格式\n- ·Java类库API\n- ·来自商业机构和开源社区的第三方Java类库\n\n我们可以把Java程序设计语言、Java虚拟机、Java类库这三部分统称为JDK（Java Development Kit），JDK是用于支持Java程序开发的最小环境，本书中为行文方便，在不产生歧义的地方常以JDK 来代指整个Java技术体系[2]。可以把Java类库API中的Java SE API子集[3]和Java虚拟机这两部分统称为JRE（Java Runtime Environment），JRE是支持Java程序运行的标准环境。图1-2展示了Java技术体系所包括的内容，以及JDK和JRE所涵盖的范围。以上是根据Java各个组成部分的功能来进行划分，如果按照技术所服务的领域来划分，或者按照技术关注的重点业务来划分的话，那Java技术体系可以分为以下四条主要的产品线：\n\n- ·Java Card：支持Java小程序（Applets）运行在小内存设备（如智能卡）上的平台。\n- ·Java ME（Micro Edition）：支持Java程序运行在移动终端（手机、PDA）上的平台，对Java API有所精简，并加入了移动终端的针对性支持，这条产品线在JDK 6以前被称为J2ME。有一点读者请勿混淆，现在在智能手机上非常流行的、主要使用Java语言开发程序的Android并不属于Java ME。\n- ·Java SE（Standard Edition）：支持面向桌面级应用（如Windows下的应用程序）的Java平台，提供了完整的Java核心API，这条产品线在JDK 6以前被称为J2SE。\n- ·Java EE（Enterprise Edition）：支持使用多层架构的企业应用（如ERP、MIS、CRM应用）的Java平台，除了提供Java SE API外，还对其做了大量有针对性的扩充[4]，并提供了相关的部署支持，这条产品线在JDK 6以前被称为J2EE，在JDK 10以后被Oracle放弃，捐献给Eclipse基金会管理，此后被称为Jakarta EE。\n\n\n\n\n# Java发展史\n从Java的第一个版本诞生到现在已经有二十余年的时间，白驹过隙，沧海桑田，转眼已过了四分之一个世纪，在图1-3所示的时间线里，我们看到JDK的版本已经发展到了JDK 13。这二十多年里诞生过无数与Java相关的产品、技术与标准。现在让我们走入时间隧道，从孕育Java语言的时代开始，再来回顾一下Java的发展轨迹和历史变迁。\n\n1991年4月，由James Gosling博士领导的绿色计划（Green Project）开始启动，此计划最初的目标是开发一种能够在各种消费性电子产品（如机顶盒、冰箱、收音机等）上运行的程序架构。这个计划的产品就是Java语言的前身：Oak（得名于James Gosling办公室外的一棵橡树）。Oak当时在消费品市场上并不算成功，但随着1995年互联网潮流的兴起，Oak迅速找到了最适合自己发展的市场定位并蜕变成为Java语言。\n\n1995年5月23日，Oak语言改名为Java，并且在SunWorld大会上正式发布Java 1.0版本。Java语言第一次提出了“Write Once，Run Anywhere”的口号。\n\n1996年1月23日，JDK 1.0发布，Java语言有了第一个正式版本的运行环境。JDK 1.0提供了一个纯解释执行的Java虚拟机实现（Sun Classic VM）。JDK 1.0版本的代表技术包括：Java虚拟机、Applet、AWT等。\n\n1996年4月，十个最主要的操作系统和计算机供应商声明将在其产品中嵌入Java技术。同年9月，已有大约8.3万个网页应用了Java技术来制作。在1996年5月底，Sun于美国旧金山举行了首届JavaOne大会，从此JavaOne成为全世界数百万Java语言开发者每年一度的技术盛会。\n\n1997年2月19日，Sun公司发布了JDK 1.1，Java里许多最基础的技术支撑点（如JDBC等）都是在JDK 1.1版本中提出的，JDK 1.1版的技术代表有：JAR文件格式、JDBC、JavaBeans、RMI等。Java语言的语法也有了一定的增强，如内部类（Inner Class）和反射（Reflection）都是在这时候出现的。直到1999年4月8日，JDK 1.1一共发布了1.1.0至1.1.8这9个版本。从1.1.4以后，每个JDK版本都有一个属于自己的名字（工程代号），分别为：JDK 1.1.4-Sparkler（宝石）、JDK 1.1.5-Pumpkin（南瓜）、JDK 1.1.6-Abigail（阿比盖尔，女子名）、JDK 1.1.7-Brutus（布鲁图，古罗马政治家和将军）和JDK 1.1.8-Chelsea（切尔西，城市名）。\n\n1998年12月4日，JDK迎来了一个里程碑式的重要版本：工程代号为Playground（竞技场）的JDK 1.2，Sun在这个版本中把Java技术体系拆分为三个方向，分别是面向桌面应用开发的J2SE（Java 2 Platform，Standard Edition）、面向企业级开发的J2EE（Java 2 Platform，Enterprise Edition）和面向手机等移动终端开发的J2ME（Java 2 Platform，Micro Edition）。在这个版本中出现的代表性技术非常多，如EJB、Java Plug-in、Java IDL、Swing等，并且这个版本中Java虚拟机第一次内置了JIT（Just In Time）即时编译器（JDK 1.2中曾并存过三个虚拟机，Classic VM、HotSpot VM和Exact VM，其中Exact VM只在Solaris平台出现过；后面两款虚拟机都是内置了JIT即时编译器的，而之前版本所带的Classic VM只能以外挂的形式使用即时编译器）。在语言和API层面上，Java添加了strictfp关键字，Java类库添加了现在Java编码之中极为常用的一系列Collections集合类等。在1999年3月和7月，分别有JDK 1.2.1和JDK 1.2.2两个小升级版本发布。\n\n1999年4月27日，HotSpot虚拟机诞生。HotSpot最初由一家名为“Longview Techno-logies”的小公司开发，由于HotSpot的优异表现，这家公司在1997年被Sun公司收购。Hot-Spot虚拟机刚发布时是作为JDK 1.2的附加程序提供的，后来它成为JDK 1.3及之后所有JDK版本的默认Java虚拟机。\n\n2000年5月8日，工程代号为Kestrel（美洲红隼）的JDK 1.3发布。相对于JDK 1.2，JDK 1.3的改进主要体现在Java类库上（如数学运算和新的Timer API等），JNDI服务从JDK 1.3开始被作为一项平台级服务提供（以前JNDI仅仅是一项扩展服务），使用CORBA IIOP来实现RMI的通信协议，等等。这个版本还对Java 2D做了很多改进，提供了大量新的Java 2D API，并且新添加了JavaSound类库。JDK1.3有1个修正版本JDK 1.3.1，工程代号为Ladybird（瓢虫），于2001年5月17日发布。自从JDK 1.3开始，Sun公司维持着稳定的研发节奏：大约每隔两年发布一个JDK的主版本，以动物命名，期间发布的各个修正版本则以昆虫作为工程代号。\n\n2002年2月13日，JDK 1.4发布，工程代号为Merlin（灰背隼）。JDK 1.4是标志着Java真正走向成熟的一个版本，Compaq、Fujitsu、SAS、Symbian、IBM等著名公司都有参与功能规划，甚至实现自己独立发行的JDK 1.4。哪怕是在近二十年后的今天，仍然有一些主流应用能直接运行在JDK 1.4之上，或者继续发布能运行在1.4上的版本。JDK 1.4同样带来了很多新的技术特性，如正则表达式、异常链、NIO、日志类、XML解析器和XSLT转换器，等等。JDK 1.4有两个后续修正版：2002年9月16日发布的工程代号为Grasshopper（蚱蜢）的JDK 1.4.1与2003年6月26日发布的工程代号为Mantis（螳螂）的JDK 1.4.2。\n\n2002年前后还发生了一件与Java没有直接关系，但事实上对Java的发展进程影响很大的事件，就是微软的.NET Framework发布。这个无论是技术实现还是目标用户上都与Java有很多相近之处的技术平台给Java带来了很多讨论、比较与竞争，.NET平台和Java平台之间声势浩大的孰优孰劣的论战到今天为止都仍然没有完全平息。\n\n2004年9月30日，JDK 5发布，工程代号为Tiger（老虎）。Sun公司从这个版本开始放弃了谦逊的“JDK 1.x”的命名方式，将产品版本号修改成了“JDK x”[1]。从JDK 1.2以来，Java在语法层面上的变动一直很小，而JDK 5在Java语法易用性上做出了非常大的改进。如：自动装箱、泛型、动态注解、枚举、可变长参数、遍历循环（foreach循环）等语法特性都是在JDK 5中加入的。在虚拟机和API层面上，这个版本改进了Java的内存模型（Java Memory Model，JMM）、提供了java.util.concurrent并发包等。另外，JDK 5是官方声明可以支持Windows 9x操作系统的最后一个JDK版本。\n\n2006年12月11日，JDK 6发布，工程代号为Mustang（野马）。在这个版本中，Sun公司终结了从JDK 1.2开始已经有八年历史的J2EE、J2SE、J2ME的产品线命名方式，启用Java EE 6、Java SE 6、Java ME 6的新命名来代替。JDK 6的改进包括：提供初步的动态语言支持（通过内置Mozilla JavaScript Rhino引擎实现）、提供编译期注解处理器和微型HTTP服务器API，等等。同时，这个版本对Java虚拟机内部做了大量改进，包括锁与同步、垃圾收集、类加载等方面的实现都有相当多的改动。\n\n在2006年11月13日的JavaOne大会上，Sun公司宣布计划要把Java开源，在随后的一年多时间内，它陆续地将JDK的各个部分在GPLv2（GNU General Public License v2）协议下公开了源码，并建立了OpenJDK组织对这些源码进行独立管理。除了极少量的产权代码（Encumbered Code，这部分代码所有权不属于Sun公司，Sun本身也无权进行开源处理）外，OpenJDK几乎拥有了当时SunJDK 7的全部代码，OpenJDK的质量主管曾经表示在JDK 7中，SunJDK和OpenJDK除了代码文件头的版权注释之外，代码几乎是完全一样的，所以OpenJDK 7与SunJDK 7本质上就是同一套代码库出来的产品。\n\nJDK 6发布以后，由于代码复杂性的增加、Java开源、开发JavaFX、世界经济危机及Oracle对Sun的收购案等原因，Sun公司在发展Java以外的事情上耗费了太多精力和资源，JDK的更新没有能够继续维持两年发布一个主版本的研发速度，这导致了JDK 6的生命周期异常的长，一共发布了211个更新升级补丁，最后的版本为Java SE 6 Update 211，于2018年10月18日发布。\n\n2009年2月19日，工程代号为Dolphin（海豚）的JDK 7完成了其第一个里程碑版本。按照JDK 7最初的功能规划，一共会设置十个里程碑。最后一个里程碑版本原计划定于2010年9月9日结束，但由于各种原因，JDK 7最终无法按计划完成。从JDK 7最原始的功能清单来看，它本应是一个包含许多重要改进的JDK版本，其中规划的子项目都为Java业界翘首以盼，包括：\n\n- ·Lambda项目：支持Lambda表达式，支持函数式编程。\n- ·Jigsaw项目：虚拟机层面的模块化支持。\n-·动态语言支持：Java是静态语言，为其他运行在Java虚拟机上的动态语言提供支持。\n- ·Garbage-First收集器。\n- ·Coin项目：Java语法细节进化。\n\n令人惋惜的是，在JDK 7开发期间，Sun公司相继在技术竞争和商业竞争中陷入泥潭，公司的股票市值跌至仅有高峰时期的3%，已无力推动JDK 7的研发工作按计划继续进行。为了尽快结束JDK 7长期跳票的问题，Oracle收购Sun公司后随即宣布马上实行“B计划”，大幅裁剪了JDK 7预定目标，以保证JDK 7的正式版能够于2011年7月28日准时发布。“B计划”的主要措施是把不能按时完成的Lambda项目、Jigsaw项目和Coin项目的部分改进延迟到JDK 8之中。最终，JDK 7包含的改进有：提供新的G1收集器（G1在发布时依然处于Experimental状态，直至2012年4月的Update 4中才正式商用）、加强对非Java语言的调用支持（JSR-292，这项特性在到JDK 11还有改动）、可并行的类加载架构等。Oracle公司接手了JDK开发工作以后，迅速展现出了完全不同于Sun时期的、极具商业化的处事风格。面对Java中使用最广泛而又一直免费的Java SE产品线，Oracle很快定义了一套新的Java SE Support[2]产品计划，把JDK的更新支持作为一项商业服务。JDK 7发布的前80个更新仍然免费面向所有用户提供，但后续的其他更新包，用户[3]只能从“将Java SE升级到Java SE Support”与“将JDK 7升级到最新版本”两个选项里挑一个。JDK 7计划维护至2022年，迄今（面向付费用户）已发布了超过两百个更新补丁，最新版本为JDK 7 Update 221。\n\n对于JDK 7，还有一点值得提起的是，从JDK 7 Update 4起，Java SE的核心功能正式开始为Mac OS X操作系统提供支持，并在JDK 7 Update 6中达到所有功能与Mac OS X完全兼容的程度；同时，JDK 7 Update 6还对ARM指令集架构提供了支持。至此，官方提供的JDK可以运行于Windows（不含Windows 9x）、Linux、Solaris和Mac OS X操作系统上，支持ARM、x86、x86-64和SPARC指令集架构，JDK 7也是可以支持Windows XP操作系统的最后一个版本[4]。\n\n2009年4月20日，Oracle宣布正式以74亿美元的价格收购市值曾超过2000亿美元的Sun公司，传奇的Sun Microsystems从此落幕成为历史，Java商标正式划归Oracle所有（Java语言本身并不属于哪间公司所有，它由JCP组织进行管理，尽管在JCP中Sun及后来的Oracle的话语权很大）。由于此前Oracle已经收购了另外一家大型的中间件企业BEA公司，当完成对Sun公司的收购之后，Oracle分别从BEA和Sun手中取得了世界三大商用虚拟机的其中两个：JRockit和HotSpot。当时Oracle宣布要在未来一至两年的时间内，把这两个优秀的Java虚拟机合二为一[5]。两者合并的结果只能说差强人意，JRockit的监控工具Java Mission Control被移植到了HotSpot，作为收费功能提供给购买了Java SE Advanced产品计划的用户，其他功能由于两者架构的差异性明显，HotSpot能够直接借鉴融合的功能寥寥无几[6]。\n\nJDK 8的第一个正式版本原定于2013年9月发布，最终还是跳票到了2014年3月18日，尽管仍然是没有赶上正点，但比起JDK 7那种以年作为计时单位、直接把公司跳崩的研发状况已是大有改善。为了保证日后JDK研发能更顺利地进行，从JDK 8开始，Oracle启用JEP（JDK Enhancement Proposals）来定义和管理纳入新版JDK发布范围的功能特性。JDK 8提供了那些曾在JDK 7中规划过，但最终未能在JDK 7中完成的功能，主要包括：\n\n- ·JEP 126：对Lambda表达式的支持，这让Java语言拥有了流畅的函数式表达能力。\n\n- ·JEP 104：内置Nashorn JavaScript引擎的支持。\n\n- ·JEP 150：新的时间、日期API。\n\n- ·JEP 122：彻底移除HotSpot的永久代。\n\n- ·……\n\n\n“B计划”中原本说好的会在JDK 8提供的Jigsaw模块化功能再次被延期到了JDK 9，不得不说，即0使放到整个Java发展史里看，Jigsaw都能算是天字第一号的大坑。Java的模块化系统本身面临的技术挑战就很艰巨，从微软的DLL技术开始，到Java自己的JAR，再到.NET的Assembly，工程庞大起来都无一例外会陷入“模块地狱”[7]的困境之中，而Jigsaw面临的更大困难是厂商之间以标准话语权为目的，以技术为“找茬”手段的激烈竞争。原本JDK 9是计划在2016年发布的，但在2016年伊始，Oracle就宣布JDK 9肯定要延期至2017年，后来又连续经过了两次短时间的跳票，最终到2017年9月21日才得以艰难面世。后两次跳票的原因是以IBM和RedHat为首[8]的十三家企业在JCP执行委员会上联手否决了Oracle提出的Jigsaw作为Java模块化规范进入JDK 9发布范围的提案[9]。凭良心说，Java确实有模块化的刚需，不论是JDK自身（例如拆分出Java SE Embedded这样规模较小的产品）抑或是Java应用都需要用到模块化。这方面IBM本身就是各大Java发行厂商中做得最好的，它不仅让自家的JDK实现了高度模块化，还带头成立了OSGi联盟，制订了Java框架层面模块化的事实标准，所以它当然会想把OSGi推到Java规范里去争个“名份”，而不是被Jigsaw革掉“性命”。可是Oracle对此没有丝毫退让，不惜向JCP发去公开信[10]，直言如果提案最后无法通过，那Oracle将摒弃JSR专家组，独立发展带Jigsaw的Java版本，Java顿时面临如Python 2与Python3那般分裂的危机。\n\n不论如何，经过前后六轮投票，经历桌上桌下的斗争与妥协，Java没有分裂，JDK 9总算是带着Jigsaw最终发布了，除了Jigsaw外，JDK 9还增强了若干工具（JS Shell、JLink、JHSDB等），整顿了HotSpot各个模块各自为战的日志系统，支持HTTP 2客户单API等91个JEP。\n\nJDK 9发布后，Oracle随即宣布Java将会以持续交付的形式和更加敏捷的研发节奏向前推进，以后JDK将会在每年的3月和9月各发布一个大版本[11]，目的就是为避免众多功能特性被集中捆绑到一个JDK版本上而引发交付风险。这次改革确实从根源上解决了跳票问题，但也为Java的用户和发行商带来了颇大的压力，不仅程序员感慨“Java新版本还没开始用就已经过时了”，Oracle自己对着一堆JDK版本分支也在挠头，不知道该如何维护更新，该如何提供技术支持。Oracle的解决方案是顺理成章地终结掉“每个JDK版本最少维护三年”的优良传统，从此以后，每六个JDK大版本中才会被划出一个长期支持（Long Term Support，LTS）版，只有LTS版的JDK能够获得为期三年的支持和更新，普通版的JDK就只有短短六个月的生命周期。JDK 8和JDK 11会是LTS版，再下一个就到2021年发布的JDK 17了。\n\n2018年3月20日，JDK 10如期发布，这版本的主要研发目标是内部重构，诸如统一源仓库、统一垃圾收集器接口、统一即时编译器接口（JVMCI在JDK 9已经有了，这里是引入新的Graal即时编译器）等，这些都将会是对未来Java发展大有裨益的改进，但对普通用户来说JDK 10的新特性就显得乏善可陈，毕竟它只包含了12个JEP，而且其中只有本地类型推断这一个编码端可见的改进。尽管JDK10可见的改进有限，但2018这一年Java圈丝毫不缺乏谈资，相继发生了几件与“金钱”相关的历史性大事件。首先是2018年3月27日，Android的Java侵权案有了最终判决，法庭裁定Google赔偿Oracle合计88亿美元，要知道2009年Oracle收购Sun也就只花了74亿，收购完成后随即就用Sun的专利把Google告上了法庭，经过Oracle法务部的几轮神操作，一场官司的赔偿让收购Sun公司等同免费。对此事Java技术圈多数吃瓜群众是站在Google这边的，认为Oracle这样做是自绝Java的发展前景，毕竟当年Android刚刚起步的时候可是Sun向Google抛去的橄榄枝，Android的流行也巩固了Java“第一编程语言”的行业地位。摒弃对企业的好恶情感，就事论事，Google采用Java的语法和API类库，开发出来的程序却不能运行在其他Java虚拟机之上，这事情无论怎样都是有违Java技术的精神原旨的，也肯定违反了Java的使用协议[12]。如果说Oracle控告Google“不厚道”，那当年微软用J++做了同样的事情（借用语法和API，但程序不兼容标准Java虚拟机），被Sun告到登报道歉，一边赔款一边割地，声明放弃J++语言和Windows平台上的内置虚拟机，这又该找谁说理去？按常理说Java刚给Oracle赚了88亿美金，该颇为受宠才对，可Oracle是典型只谈利益不讲情怀的公司，InfoWorld披露的一封Oracle高管邮件表明[13]，Java体系中被认为无法盈利也没有太多战略前景的部分会逐渐被“按计划报废”（Planned Obsolescence）。这事的第一刀落下是在2018年3月，Oracle正式宣告Java EE成为历史名词。虽然Java SE、Java EE和Java ME三条产品线里确实只有Java SE称得上成功，但Java EE毕竟无比辉煌过，现在其中还持有着JDBC、JMS、Servlet等使用极为广泛的基础组件，然而Oracle仍选择把它“扫地出门”，所有权直接赠送给Eclipse基金会，唯一的条件是以后不准再使用“Java”这个商标[14]，所以取而代之的将是Jakarta EE。\n\n2018年10月，JavaOne 2018在旧金山举行，此前没有人想过这会是最后一届JavaOne大会，这个在1996年伴随着Java一同诞生、成长的开发者年度盛会，竟是Oracle下一个裁撤的对象[15]，此外还有Java Mission Control的开发团队，也在2018年6月被Oracle解散。\n\n2018年9月25日，JDK 11发布，这是一个LTS版本的JDK，包含17个JEP，其中有ZGC这样的革命性的垃圾收集器出现，也有把JDK 10中的类型推断加入Lambda语法这种可见的改进，但都比不过它发布时爆出来的谣言轰动：“Java要开始收费啦！”\n\n随着JDK 11发布，Oracle同时调整了JDK的授权许可证，里面包含了好几个动作。首先，Oracle从JDK 11起把以前的商业特性[16]全部开源给OpenJDK，这样OpenJDK 11和OracleJDK 11的代码和功能，在本质上就是完全相同的（官方原文是Essentially Identical）[17]。然后，Oracle宣布以后将会同时发行两个JDK：一个是以GPLv2+CE协议下由Oracle发行的OpenJDK（本书后面章节称其为Oracle OpenJDK），另一个是在新的OTN协议下发行的传统的OracleJDK，这两个JDK共享绝大部分源码，在功能上是几乎一样的[18]，核心差异是前者可以免费在开发、测试或生产环境中使用，但是只有半年时间的更新支持；后者个人依然可以免费使用，但若在生产环境中商用就必须付费，可以有三年时间的更新支持。如果说由此能得出“Java要收费”的结论，那是纯属标题党，最多只能说Oracle在迫使商业用户要么不断升级JDK的版本，要么就去购买商业支持[19]。\n\n2019年2月，在JDK 12发布前夕，Oracle果然如之前宣布那样在六个月之后就放弃了对上一个版本OpenJDK的维护，RedHat同时从Oracle手上接过OpenJDK 8和OpenJDK 11的管理权利和维护职责[20]。Oracle不愿意在旧版本上继续耗费资源，而RedHat或者说它背后的IBM又乐意扩大自己在Java社区的影响力，这是一笔双赢的交易。RedHat代替Oracle成为JDK历史版本的维护者，应该有利于Java的持续稳定，但从技术发展角度来看，这并不能为Oracle领导Java社区的局面带来根本性的改变，毕竟要添加新的或实验性的功能，仅会针对Java的最新版本，而不会在旧版本上动手。\n\n2019年3月20日，JDK 12发布，只包含8个JEP，其中主要有Switch表达式、Java微测试套件（JMH）等新功能，最引人注目的特性无疑是加入了由RedHat领导开发的Shen-andoah垃圾收集器。Shenandoah作为首个由非Oracle开发的垃圾收集器，其目标又与Oracle在JDK 11中发布的ZGC几乎完全一致，两者天生就存在竞争。Oracle马上用实际行动抵制了这个新收集器，在JDK 11发布时才说应尽可能保证OracleJDK和OpenJDK的兼容一致，转眼就在Oracle JDK 12里把Shenandoah的代码通过条件编译强行剔除掉，使其成为历史上唯一进入了OpenJDK发布清单，但在OracleJDK中无法使用的功能。\n\nOracle收购Sun是Java发展历史上一道明显的分界线。在Sun掌舵的前十几年里，Java获得巨大成功，同时也渐渐显露出来语言演进的缓慢与社区决策的老朽；而在Oracle主导Java后，引起竞争的同时也带来新的活力，Java发展的速度要显著高于Sun时代。Java的未来是继续向前、再攀高峰，还是由盛转衰、锋芒挫缩，你我拭目以待。\n\nJava面临的危机挑战前所未有的艰巨，属于Java的未来也从未如此充满想象与可能。\n\n\n\n\n\n-----------\n\n\n[1] Java从1.5版本开始，官方在正式文档与宣传上已经不再使用类似“JDK 1.5”的命名，只有程序员内\n部使用的开发版本号（Developer Version，例如java-version的输出）中才继续沿用1.5、1.6、1.7这样的版本号，而公开版本号（Product Version）则是改为JDK 5.0、JDK 6、JDK 7的命名方式，JDK 5.0中“.0”的后缀从JDK 6起也被移除掉，本书为了行文统一，同样以JDK 5来指代JDK 5.0。\n[2] 除了Java SE Support外，还有面向独立软件提供商的Java SE Advanced & Suite产品线，差别是后者带有JMC等监控工具，详细内容可以参见本书第4章。\n[3] 特指商业用户，个人使用仍然是可以免费获得这些更新包的。\n[4] 这是官方的声明，而事实上直到JDK 8 Update 21之前在Windows XP上仍可正常运行。\n[5] “HotRockit”项目的相关介绍：http://hirt.se/presentations/WhatToExpect.ppt。\n[6] 除了JMC和JFR，HotSpot用本地内存代替永久代实现方法区，支持本地内存使用情况追（NMT）等功能是从JRockit借鉴过来的。\n[7] 来自于以前的“DLL Hell”，如果读者不清楚什么是模块地狱的话，打开你计算机的windows目录或者windows\\system32目录就明白了。\n[8] 其实就是以IBM为首，IBM一直与RedHat有密切合作，2018年IBM以340亿美元天价收购了RedHat。\n[9] 投票记录：https://jcp.org/en/jsr/results?id=5959。\n[10] 公开信：https://www.infoq.cn/article/2017/05/jigsaw-open-letter。\n[11] 也改掉了在开发版号中1.7、1.8的命名，从JDK 10后将是年份加月份作为开发版本号，譬如18.3，即表示2018年3月的大版本。\n[12] Oracle与Google的官司主要焦点在于Java API的版权问题，而不在程序是否能运行在标准Java虚拟机上。\n[13] 资料来源：https://www.infoworld.com/article/2987529/insider-oracle-lost-interest-in-java.html。\n[14] 最大的争议点是Oracle要求包名中不能出现java字样，导致一堆javax.*开头的包一旦修改或添加新代码，就必须重新命名，这将让用到它们的代码都受到影响。资料来源：https://www.infoq.cn/article/2018/02/from-javaee-to-jakartaee。\n[15] Java One大会从2019年起停办，合并入Oracle CodeOne大会中。\n[16] 需要使用+XX：+UnlockCommercialFeatures解锁的特性，包括JMC、JFR、NMT、AppCDS和ZGC等。\n[17] 资料来源：https://blogs.oracle.com/java-platform-group/oracle-jdk-releases-for-java-11-and-later。\n[18] JDK 11中仅有的微小差别是OpenJDK少了几个Module（如JavaFX），且不提供安装包，以压缩包形式发行。但在JDK 12又产生了新的分歧，OpenJDK的Shenandoah垃圾收集器被排除在OracleJDK之外，详见第4章的相关内容。\n[19] 这里的商业支持不限定于Oracle公司，如Azul ZingJDK、AdoptOpenJDK等都能提供商业支持。\n[20] Red Hat此前已经是OpenJDK 6（自2013年起）和OpenJDK 7（自2015年起）的维护者。\n\n\n### 参考\n- 《深入理解Java虚拟机：JVM高级特性与最佳实践》周志明 第三版 \n\n\n\n\n\n\n\n","slug":"Java基础-（1）介绍","published":1,"updated":"2025-03-26T06:43:52.996Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cm8pr0j260007gskz9l1r12mv","content":"<h1 id=\"概述\"><a href=\"#概述\" class=\"headerlink\" title=\"概述\"></a>概述</h1><p>Java不仅仅是一门编程语言，它还是一个由一系列计算机软件和规范组成的技术体系，这个技术体系提供了完整的用于软件开发和跨平台部署的支持环境，并广泛应用于嵌入式系统、移动终端、企业服务器、大型机等多种场合，如图1-1所示。时至今日，Java技术体系已经吸引了600多万软件开发者，这是全球最大的软件开发团队。使用Java的设备已经超过了45亿，其中包括8亿多台个人计算机、21亿部移动电话及其他手持设备、35亿个智能卡，以及大量机顶盒、导航系统和其他设备。</p>\n<p>Java能获得如此广泛的认可，除了它拥有一门结构严谨、面向对象的编程语言之外，还有许多不可忽视的优点：它摆脱了硬件平台的束缚，实现了“一次编写，到处运行”的理想；它提供了一种相对安全的内存管理和访问机制，避免了绝大部分内存泄漏和指针越界问题；它实现了热点代码检测和运行时编译及优化，这使得Java应用能随着运行时间的增长而获得更高的性能；它有一套完善的应用程序接口，还有无数来自商业机构和开源社区的第三方类库来帮助用户实现各种各样的功能……Java带来的这些好处，让软件的开发效率得到了极大的提升。作为一名Java程序员，在编写程序时除了尽情发挥Java的各种优势外，还会情不自禁地想去了解和思考一下Java技术体系中这些优秀的技术特性是如何出现及怎样实现的。认识这些技术运行的本质，是自己思考“程序这样写好不好”的必要基础与前提。</p>\n<h1 id=\"Java技术体系\"><a href=\"#Java技术体系\" class=\"headerlink\" title=\"Java技术体系\"></a>Java技术体系</h1><p>从广义上讲，Kotlin、Clojure、JRuby、Groovy等运行于Java虚拟机上的编程语言及其相关的程序都属于Java技术体系中的一员。如果仅从传统意义上来看，JCP官方[1]所定义的Java技术体系包括了以下几个组成部分：</p>\n<ul>\n<li>·Java程序设计语言</li>\n<li>·各种硬件平台上的Java虚拟机实现</li>\n<li>·Class文件格式</li>\n<li>·Java类库API</li>\n<li>·来自商业机构和开源社区的第三方Java类库</li>\n</ul>\n<p>我们可以把Java程序设计语言、Java虚拟机、Java类库这三部分统称为JDK（Java Development Kit），JDK是用于支持Java程序开发的最小环境，本书中为行文方便，在不产生歧义的地方常以JDK 来代指整个Java技术体系[2]。可以把Java类库API中的Java SE API子集[3]和Java虚拟机这两部分统称为JRE（Java Runtime Environment），JRE是支持Java程序运行的标准环境。图1-2展示了Java技术体系所包括的内容，以及JDK和JRE所涵盖的范围。以上是根据Java各个组成部分的功能来进行划分，如果按照技术所服务的领域来划分，或者按照技术关注的重点业务来划分的话，那Java技术体系可以分为以下四条主要的产品线：</p>\n<ul>\n<li>·Java Card：支持Java小程序（Applets）运行在小内存设备（如智能卡）上的平台。</li>\n<li>·Java ME（Micro Edition）：支持Java程序运行在移动终端（手机、PDA）上的平台，对Java API有所精简，并加入了移动终端的针对性支持，这条产品线在JDK 6以前被称为J2ME。有一点读者请勿混淆，现在在智能手机上非常流行的、主要使用Java语言开发程序的Android并不属于Java ME。</li>\n<li>·Java SE（Standard Edition）：支持面向桌面级应用（如Windows下的应用程序）的Java平台，提供了完整的Java核心API，这条产品线在JDK 6以前被称为J2SE。</li>\n<li>·Java EE（Enterprise Edition）：支持使用多层架构的企业应用（如ERP、MIS、CRM应用）的Java平台，除了提供Java SE API外，还对其做了大量有针对性的扩充[4]，并提供了相关的部署支持，这条产品线在JDK 6以前被称为J2EE，在JDK 10以后被Oracle放弃，捐献给Eclipse基金会管理，此后被称为Jakarta EE。</li>\n</ul>\n<h1 id=\"Java发展史\"><a href=\"#Java发展史\" class=\"headerlink\" title=\"Java发展史\"></a>Java发展史</h1><p>从Java的第一个版本诞生到现在已经有二十余年的时间，白驹过隙，沧海桑田，转眼已过了四分之一个世纪，在图1-3所示的时间线里，我们看到JDK的版本已经发展到了JDK 13。这二十多年里诞生过无数与Java相关的产品、技术与标准。现在让我们走入时间隧道，从孕育Java语言的时代开始，再来回顾一下Java的发展轨迹和历史变迁。</p>\n<p>1991年4月，由James Gosling博士领导的绿色计划（Green Project）开始启动，此计划最初的目标是开发一种能够在各种消费性电子产品（如机顶盒、冰箱、收音机等）上运行的程序架构。这个计划的产品就是Java语言的前身：Oak（得名于James Gosling办公室外的一棵橡树）。Oak当时在消费品市场上并不算成功，但随着1995年互联网潮流的兴起，Oak迅速找到了最适合自己发展的市场定位并蜕变成为Java语言。</p>\n<p>1995年5月23日，Oak语言改名为Java，并且在SunWorld大会上正式发布Java 1.0版本。Java语言第一次提出了“Write Once，Run Anywhere”的口号。</p>\n<p>1996年1月23日，JDK 1.0发布，Java语言有了第一个正式版本的运行环境。JDK 1.0提供了一个纯解释执行的Java虚拟机实现（Sun Classic VM）。JDK 1.0版本的代表技术包括：Java虚拟机、Applet、AWT等。</p>\n<p>1996年4月，十个最主要的操作系统和计算机供应商声明将在其产品中嵌入Java技术。同年9月，已有大约8.3万个网页应用了Java技术来制作。在1996年5月底，Sun于美国旧金山举行了首届JavaOne大会，从此JavaOne成为全世界数百万Java语言开发者每年一度的技术盛会。</p>\n<p>1997年2月19日，Sun公司发布了JDK 1.1，Java里许多最基础的技术支撑点（如JDBC等）都是在JDK 1.1版本中提出的，JDK 1.1版的技术代表有：JAR文件格式、JDBC、JavaBeans、RMI等。Java语言的语法也有了一定的增强，如内部类（Inner Class）和反射（Reflection）都是在这时候出现的。直到1999年4月8日，JDK 1.1一共发布了1.1.0至1.1.8这9个版本。从1.1.4以后，每个JDK版本都有一个属于自己的名字（工程代号），分别为：JDK 1.1.4-Sparkler（宝石）、JDK 1.1.5-Pumpkin（南瓜）、JDK 1.1.6-Abigail（阿比盖尔，女子名）、JDK 1.1.7-Brutus（布鲁图，古罗马政治家和将军）和JDK 1.1.8-Chelsea（切尔西，城市名）。</p>\n<p>1998年12月4日，JDK迎来了一个里程碑式的重要版本：工程代号为Playground（竞技场）的JDK 1.2，Sun在这个版本中把Java技术体系拆分为三个方向，分别是面向桌面应用开发的J2SE（Java 2 Platform，Standard Edition）、面向企业级开发的J2EE（Java 2 Platform，Enterprise Edition）和面向手机等移动终端开发的J2ME（Java 2 Platform，Micro Edition）。在这个版本中出现的代表性技术非常多，如EJB、Java Plug-in、Java IDL、Swing等，并且这个版本中Java虚拟机第一次内置了JIT（Just In Time）即时编译器（JDK 1.2中曾并存过三个虚拟机，Classic VM、HotSpot VM和Exact VM，其中Exact VM只在Solaris平台出现过；后面两款虚拟机都是内置了JIT即时编译器的，而之前版本所带的Classic VM只能以外挂的形式使用即时编译器）。在语言和API层面上，Java添加了strictfp关键字，Java类库添加了现在Java编码之中极为常用的一系列Collections集合类等。在1999年3月和7月，分别有JDK 1.2.1和JDK 1.2.2两个小升级版本发布。</p>\n<p>1999年4月27日，HotSpot虚拟机诞生。HotSpot最初由一家名为“Longview Techno-logies”的小公司开发，由于HotSpot的优异表现，这家公司在1997年被Sun公司收购。Hot-Spot虚拟机刚发布时是作为JDK 1.2的附加程序提供的，后来它成为JDK 1.3及之后所有JDK版本的默认Java虚拟机。</p>\n<p>2000年5月8日，工程代号为Kestrel（美洲红隼）的JDK 1.3发布。相对于JDK 1.2，JDK 1.3的改进主要体现在Java类库上（如数学运算和新的Timer API等），JNDI服务从JDK 1.3开始被作为一项平台级服务提供（以前JNDI仅仅是一项扩展服务），使用CORBA IIOP来实现RMI的通信协议，等等。这个版本还对Java 2D做了很多改进，提供了大量新的Java 2D API，并且新添加了JavaSound类库。JDK1.3有1个修正版本JDK 1.3.1，工程代号为Ladybird（瓢虫），于2001年5月17日发布。自从JDK 1.3开始，Sun公司维持着稳定的研发节奏：大约每隔两年发布一个JDK的主版本，以动物命名，期间发布的各个修正版本则以昆虫作为工程代号。</p>\n<p>2002年2月13日，JDK 1.4发布，工程代号为Merlin（灰背隼）。JDK 1.4是标志着Java真正走向成熟的一个版本，Compaq、Fujitsu、SAS、Symbian、IBM等著名公司都有参与功能规划，甚至实现自己独立发行的JDK 1.4。哪怕是在近二十年后的今天，仍然有一些主流应用能直接运行在JDK 1.4之上，或者继续发布能运行在1.4上的版本。JDK 1.4同样带来了很多新的技术特性，如正则表达式、异常链、NIO、日志类、XML解析器和XSLT转换器，等等。JDK 1.4有两个后续修正版：2002年9月16日发布的工程代号为Grasshopper（蚱蜢）的JDK 1.4.1与2003年6月26日发布的工程代号为Mantis（螳螂）的JDK 1.4.2。</p>\n<p>2002年前后还发生了一件与Java没有直接关系，但事实上对Java的发展进程影响很大的事件，就是微软的.NET Framework发布。这个无论是技术实现还是目标用户上都与Java有很多相近之处的技术平台给Java带来了很多讨论、比较与竞争，.NET平台和Java平台之间声势浩大的孰优孰劣的论战到今天为止都仍然没有完全平息。</p>\n<p>2004年9月30日，JDK 5发布，工程代号为Tiger（老虎）。Sun公司从这个版本开始放弃了谦逊的“JDK 1.x”的命名方式，将产品版本号修改成了“JDK x”[1]。从JDK 1.2以来，Java在语法层面上的变动一直很小，而JDK 5在Java语法易用性上做出了非常大的改进。如：自动装箱、泛型、动态注解、枚举、可变长参数、遍历循环（foreach循环）等语法特性都是在JDK 5中加入的。在虚拟机和API层面上，这个版本改进了Java的内存模型（Java Memory Model，JMM）、提供了java.util.concurrent并发包等。另外，JDK 5是官方声明可以支持Windows 9x操作系统的最后一个JDK版本。</p>\n<p>2006年12月11日，JDK 6发布，工程代号为Mustang（野马）。在这个版本中，Sun公司终结了从JDK 1.2开始已经有八年历史的J2EE、J2SE、J2ME的产品线命名方式，启用Java EE 6、Java SE 6、Java ME 6的新命名来代替。JDK 6的改进包括：提供初步的动态语言支持（通过内置Mozilla JavaScript Rhino引擎实现）、提供编译期注解处理器和微型HTTP服务器API，等等。同时，这个版本对Java虚拟机内部做了大量改进，包括锁与同步、垃圾收集、类加载等方面的实现都有相当多的改动。</p>\n<p>在2006年11月13日的JavaOne大会上，Sun公司宣布计划要把Java开源，在随后的一年多时间内，它陆续地将JDK的各个部分在GPLv2（GNU General Public License v2）协议下公开了源码，并建立了OpenJDK组织对这些源码进行独立管理。除了极少量的产权代码（Encumbered Code，这部分代码所有权不属于Sun公司，Sun本身也无权进行开源处理）外，OpenJDK几乎拥有了当时SunJDK 7的全部代码，OpenJDK的质量主管曾经表示在JDK 7中，SunJDK和OpenJDK除了代码文件头的版权注释之外，代码几乎是完全一样的，所以OpenJDK 7与SunJDK 7本质上就是同一套代码库出来的产品。</p>\n<p>JDK 6发布以后，由于代码复杂性的增加、Java开源、开发JavaFX、世界经济危机及Oracle对Sun的收购案等原因，Sun公司在发展Java以外的事情上耗费了太多精力和资源，JDK的更新没有能够继续维持两年发布一个主版本的研发速度，这导致了JDK 6的生命周期异常的长，一共发布了211个更新升级补丁，最后的版本为Java SE 6 Update 211，于2018年10月18日发布。</p>\n<p>2009年2月19日，工程代号为Dolphin（海豚）的JDK 7完成了其第一个里程碑版本。按照JDK 7最初的功能规划，一共会设置十个里程碑。最后一个里程碑版本原计划定于2010年9月9日结束，但由于各种原因，JDK 7最终无法按计划完成。从JDK 7最原始的功能清单来看，它本应是一个包含许多重要改进的JDK版本，其中规划的子项目都为Java业界翘首以盼，包括：</p>\n<ul>\n<li>·Lambda项目：支持Lambda表达式，支持函数式编程。</li>\n<li>·Jigsaw项目：虚拟机层面的模块化支持。</li>\n<li>·动态语言支持：Java是静态语言，为其他运行在Java虚拟机上的动态语言提供支持。</li>\n<li>·Garbage-First收集器。</li>\n<li>·Coin项目：Java语法细节进化。</li>\n</ul>\n<p>令人惋惜的是，在JDK 7开发期间，Sun公司相继在技术竞争和商业竞争中陷入泥潭，公司的股票市值跌至仅有高峰时期的3%，已无力推动JDK 7的研发工作按计划继续进行。为了尽快结束JDK 7长期跳票的问题，Oracle收购Sun公司后随即宣布马上实行“B计划”，大幅裁剪了JDK 7预定目标，以保证JDK 7的正式版能够于2011年7月28日准时发布。“B计划”的主要措施是把不能按时完成的Lambda项目、Jigsaw项目和Coin项目的部分改进延迟到JDK 8之中。最终，JDK 7包含的改进有：提供新的G1收集器（G1在发布时依然处于Experimental状态，直至2012年4月的Update 4中才正式商用）、加强对非Java语言的调用支持（JSR-292，这项特性在到JDK 11还有改动）、可并行的类加载架构等。Oracle公司接手了JDK开发工作以后，迅速展现出了完全不同于Sun时期的、极具商业化的处事风格。面对Java中使用最广泛而又一直免费的Java SE产品线，Oracle很快定义了一套新的Java SE Support[2]产品计划，把JDK的更新支持作为一项商业服务。JDK 7发布的前80个更新仍然免费面向所有用户提供，但后续的其他更新包，用户[3]只能从“将Java SE升级到Java SE Support”与“将JDK 7升级到最新版本”两个选项里挑一个。JDK 7计划维护至2022年，迄今（面向付费用户）已发布了超过两百个更新补丁，最新版本为JDK 7 Update 221。</p>\n<p>对于JDK 7，还有一点值得提起的是，从JDK 7 Update 4起，Java SE的核心功能正式开始为Mac OS X操作系统提供支持，并在JDK 7 Update 6中达到所有功能与Mac OS X完全兼容的程度；同时，JDK 7 Update 6还对ARM指令集架构提供了支持。至此，官方提供的JDK可以运行于Windows（不含Windows 9x）、Linux、Solaris和Mac OS X操作系统上，支持ARM、x86、x86-64和SPARC指令集架构，JDK 7也是可以支持Windows XP操作系统的最后一个版本[4]。</p>\n<p>2009年4月20日，Oracle宣布正式以74亿美元的价格收购市值曾超过2000亿美元的Sun公司，传奇的Sun Microsystems从此落幕成为历史，Java商标正式划归Oracle所有（Java语言本身并不属于哪间公司所有，它由JCP组织进行管理，尽管在JCP中Sun及后来的Oracle的话语权很大）。由于此前Oracle已经收购了另外一家大型的中间件企业BEA公司，当完成对Sun公司的收购之后，Oracle分别从BEA和Sun手中取得了世界三大商用虚拟机的其中两个：JRockit和HotSpot。当时Oracle宣布要在未来一至两年的时间内，把这两个优秀的Java虚拟机合二为一[5]。两者合并的结果只能说差强人意，JRockit的监控工具Java Mission Control被移植到了HotSpot，作为收费功能提供给购买了Java SE Advanced产品计划的用户，其他功能由于两者架构的差异性明显，HotSpot能够直接借鉴融合的功能寥寥无几[6]。</p>\n<p>JDK 8的第一个正式版本原定于2013年9月发布，最终还是跳票到了2014年3月18日，尽管仍然是没有赶上正点，但比起JDK 7那种以年作为计时单位、直接把公司跳崩的研发状况已是大有改善。为了保证日后JDK研发能更顺利地进行，从JDK 8开始，Oracle启用JEP（JDK Enhancement Proposals）来定义和管理纳入新版JDK发布范围的功能特性。JDK 8提供了那些曾在JDK 7中规划过，但最终未能在JDK 7中完成的功能，主要包括：</p>\n<ul>\n<li><p>·JEP 126：对Lambda表达式的支持，这让Java语言拥有了流畅的函数式表达能力。</p>\n</li>\n<li><p>·JEP 104：内置Nashorn JavaScript引擎的支持。</p>\n</li>\n<li><p>·JEP 150：新的时间、日期API。</p>\n</li>\n<li><p>·JEP 122：彻底移除HotSpot的永久代。</p>\n</li>\n<li><p>·……</p>\n</li>\n</ul>\n<p>“B计划”中原本说好的会在JDK 8提供的Jigsaw模块化功能再次被延期到了JDK 9，不得不说，即0使放到整个Java发展史里看，Jigsaw都能算是天字第一号的大坑。Java的模块化系统本身面临的技术挑战就很艰巨，从微软的DLL技术开始，到Java自己的JAR，再到.NET的Assembly，工程庞大起来都无一例外会陷入“模块地狱”[7]的困境之中，而Jigsaw面临的更大困难是厂商之间以标准话语权为目的，以技术为“找茬”手段的激烈竞争。原本JDK 9是计划在2016年发布的，但在2016年伊始，Oracle就宣布JDK 9肯定要延期至2017年，后来又连续经过了两次短时间的跳票，最终到2017年9月21日才得以艰难面世。后两次跳票的原因是以IBM和RedHat为首[8]的十三家企业在JCP执行委员会上联手否决了Oracle提出的Jigsaw作为Java模块化规范进入JDK 9发布范围的提案[9]。凭良心说，Java确实有模块化的刚需，不论是JDK自身（例如拆分出Java SE Embedded这样规模较小的产品）抑或是Java应用都需要用到模块化。这方面IBM本身就是各大Java发行厂商中做得最好的，它不仅让自家的JDK实现了高度模块化，还带头成立了OSGi联盟，制订了Java框架层面模块化的事实标准，所以它当然会想把OSGi推到Java规范里去争个“名份”，而不是被Jigsaw革掉“性命”。可是Oracle对此没有丝毫退让，不惜向JCP发去公开信[10]，直言如果提案最后无法通过，那Oracle将摒弃JSR专家组，独立发展带Jigsaw的Java版本，Java顿时面临如Python 2与Python3那般分裂的危机。</p>\n<p>不论如何，经过前后六轮投票，经历桌上桌下的斗争与妥协，Java没有分裂，JDK 9总算是带着Jigsaw最终发布了，除了Jigsaw外，JDK 9还增强了若干工具（JS Shell、JLink、JHSDB等），整顿了HotSpot各个模块各自为战的日志系统，支持HTTP 2客户单API等91个JEP。</p>\n<p>JDK 9发布后，Oracle随即宣布Java将会以持续交付的形式和更加敏捷的研发节奏向前推进，以后JDK将会在每年的3月和9月各发布一个大版本[11]，目的就是为避免众多功能特性被集中捆绑到一个JDK版本上而引发交付风险。这次改革确实从根源上解决了跳票问题，但也为Java的用户和发行商带来了颇大的压力，不仅程序员感慨“Java新版本还没开始用就已经过时了”，Oracle自己对着一堆JDK版本分支也在挠头，不知道该如何维护更新，该如何提供技术支持。Oracle的解决方案是顺理成章地终结掉“每个JDK版本最少维护三年”的优良传统，从此以后，每六个JDK大版本中才会被划出一个长期支持（Long Term Support，LTS）版，只有LTS版的JDK能够获得为期三年的支持和更新，普通版的JDK就只有短短六个月的生命周期。JDK 8和JDK 11会是LTS版，再下一个就到2021年发布的JDK 17了。</p>\n<p>2018年3月20日，JDK 10如期发布，这版本的主要研发目标是内部重构，诸如统一源仓库、统一垃圾收集器接口、统一即时编译器接口（JVMCI在JDK 9已经有了，这里是引入新的Graal即时编译器）等，这些都将会是对未来Java发展大有裨益的改进，但对普通用户来说JDK 10的新特性就显得乏善可陈，毕竟它只包含了12个JEP，而且其中只有本地类型推断这一个编码端可见的改进。尽管JDK10可见的改进有限，但2018这一年Java圈丝毫不缺乏谈资，相继发生了几件与“金钱”相关的历史性大事件。首先是2018年3月27日，Android的Java侵权案有了最终判决，法庭裁定Google赔偿Oracle合计88亿美元，要知道2009年Oracle收购Sun也就只花了74亿，收购完成后随即就用Sun的专利把Google告上了法庭，经过Oracle法务部的几轮神操作，一场官司的赔偿让收购Sun公司等同免费。对此事Java技术圈多数吃瓜群众是站在Google这边的，认为Oracle这样做是自绝Java的发展前景，毕竟当年Android刚刚起步的时候可是Sun向Google抛去的橄榄枝，Android的流行也巩固了Java“第一编程语言”的行业地位。摒弃对企业的好恶情感，就事论事，Google采用Java的语法和API类库，开发出来的程序却不能运行在其他Java虚拟机之上，这事情无论怎样都是有违Java技术的精神原旨的，也肯定违反了Java的使用协议[12]。如果说Oracle控告Google“不厚道”，那当年微软用J++做了同样的事情（借用语法和API，但程序不兼容标准Java虚拟机），被Sun告到登报道歉，一边赔款一边割地，声明放弃J++语言和Windows平台上的内置虚拟机，这又该找谁说理去？按常理说Java刚给Oracle赚了88亿美金，该颇为受宠才对，可Oracle是典型只谈利益不讲情怀的公司，InfoWorld披露的一封Oracle高管邮件表明[13]，Java体系中被认为无法盈利也没有太多战略前景的部分会逐渐被“按计划报废”（Planned Obsolescence）。这事的第一刀落下是在2018年3月，Oracle正式宣告Java EE成为历史名词。虽然Java SE、Java EE和Java ME三条产品线里确实只有Java SE称得上成功，但Java EE毕竟无比辉煌过，现在其中还持有着JDBC、JMS、Servlet等使用极为广泛的基础组件，然而Oracle仍选择把它“扫地出门”，所有权直接赠送给Eclipse基金会，唯一的条件是以后不准再使用“Java”这个商标[14]，所以取而代之的将是Jakarta EE。</p>\n<p>2018年10月，JavaOne 2018在旧金山举行，此前没有人想过这会是最后一届JavaOne大会，这个在1996年伴随着Java一同诞生、成长的开发者年度盛会，竟是Oracle下一个裁撤的对象[15]，此外还有Java Mission Control的开发团队，也在2018年6月被Oracle解散。</p>\n<p>2018年9月25日，JDK 11发布，这是一个LTS版本的JDK，包含17个JEP，其中有ZGC这样的革命性的垃圾收集器出现，也有把JDK 10中的类型推断加入Lambda语法这种可见的改进，但都比不过它发布时爆出来的谣言轰动：“Java要开始收费啦！”</p>\n<p>随着JDK 11发布，Oracle同时调整了JDK的授权许可证，里面包含了好几个动作。首先，Oracle从JDK 11起把以前的商业特性[16]全部开源给OpenJDK，这样OpenJDK 11和OracleJDK 11的代码和功能，在本质上就是完全相同的（官方原文是Essentially Identical）[17]。然后，Oracle宣布以后将会同时发行两个JDK：一个是以GPLv2+CE协议下由Oracle发行的OpenJDK（本书后面章节称其为Oracle OpenJDK），另一个是在新的OTN协议下发行的传统的OracleJDK，这两个JDK共享绝大部分源码，在功能上是几乎一样的[18]，核心差异是前者可以免费在开发、测试或生产环境中使用，但是只有半年时间的更新支持；后者个人依然可以免费使用，但若在生产环境中商用就必须付费，可以有三年时间的更新支持。如果说由此能得出“Java要收费”的结论，那是纯属标题党，最多只能说Oracle在迫使商业用户要么不断升级JDK的版本，要么就去购买商业支持[19]。</p>\n<p>2019年2月，在JDK 12发布前夕，Oracle果然如之前宣布那样在六个月之后就放弃了对上一个版本OpenJDK的维护，RedHat同时从Oracle手上接过OpenJDK 8和OpenJDK 11的管理权利和维护职责[20]。Oracle不愿意在旧版本上继续耗费资源，而RedHat或者说它背后的IBM又乐意扩大自己在Java社区的影响力，这是一笔双赢的交易。RedHat代替Oracle成为JDK历史版本的维护者，应该有利于Java的持续稳定，但从技术发展角度来看，这并不能为Oracle领导Java社区的局面带来根本性的改变，毕竟要添加新的或实验性的功能，仅会针对Java的最新版本，而不会在旧版本上动手。</p>\n<p>2019年3月20日，JDK 12发布，只包含8个JEP，其中主要有Switch表达式、Java微测试套件（JMH）等新功能，最引人注目的特性无疑是加入了由RedHat领导开发的Shen-andoah垃圾收集器。Shenandoah作为首个由非Oracle开发的垃圾收集器，其目标又与Oracle在JDK 11中发布的ZGC几乎完全一致，两者天生就存在竞争。Oracle马上用实际行动抵制了这个新收集器，在JDK 11发布时才说应尽可能保证OracleJDK和OpenJDK的兼容一致，转眼就在Oracle JDK 12里把Shenandoah的代码通过条件编译强行剔除掉，使其成为历史上唯一进入了OpenJDK发布清单，但在OracleJDK中无法使用的功能。</p>\n<p>Oracle收购Sun是Java发展历史上一道明显的分界线。在Sun掌舵的前十几年里，Java获得巨大成功，同时也渐渐显露出来语言演进的缓慢与社区决策的老朽；而在Oracle主导Java后，引起竞争的同时也带来新的活力，Java发展的速度要显著高于Sun时代。Java的未来是继续向前、再攀高峰，还是由盛转衰、锋芒挫缩，你我拭目以待。</p>\n<p>Java面临的危机挑战前所未有的艰巨，属于Java的未来也从未如此充满想象与可能。</p>\n<hr>\n<p>[1] Java从1.5版本开始，官方在正式文档与宣传上已经不再使用类似“JDK 1.5”的命名，只有程序员内<br>部使用的开发版本号（Developer Version，例如java-version的输出）中才继续沿用1.5、1.6、1.7这样的版本号，而公开版本号（Product Version）则是改为JDK 5.0、JDK 6、JDK 7的命名方式，JDK 5.0中“.0”的后缀从JDK 6起也被移除掉，本书为了行文统一，同样以JDK 5来指代JDK 5.0。<br>[2] 除了Java SE Support外，还有面向独立软件提供商的Java SE Advanced &amp; Suite产品线，差别是后者带有JMC等监控工具，详细内容可以参见本书第4章。<br>[3] 特指商业用户，个人使用仍然是可以免费获得这些更新包的。<br>[4] 这是官方的声明，而事实上直到JDK 8 Update 21之前在Windows XP上仍可正常运行。<br>[5] “HotRockit”项目的相关介绍：<a href=\"http://hirt.se/presentations/WhatToExpect.ppt%E3%80%82\">http://hirt.se/presentations/WhatToExpect.ppt。</a><br>[6] 除了JMC和JFR，HotSpot用本地内存代替永久代实现方法区，支持本地内存使用情况追（NMT）等功能是从JRockit借鉴过来的。<br>[7] 来自于以前的“DLL Hell”，如果读者不清楚什么是模块地狱的话，打开你计算机的windows目录或者windows\\system32目录就明白了。<br>[8] 其实就是以IBM为首，IBM一直与RedHat有密切合作，2018年IBM以340亿美元天价收购了RedHat。<br>[9] 投票记录：<a href=\"https://jcp.org/en/jsr/results?id=5959%E3%80%82\">https://jcp.org/en/jsr/results?id=5959。</a><br>[10] 公开信：<a href=\"https://www.infoq.cn/article/2017/05/jigsaw-open-letter%E3%80%82\">https://www.infoq.cn/article/2017/05/jigsaw-open-letter。</a><br>[11] 也改掉了在开发版号中1.7、1.8的命名，从JDK 10后将是年份加月份作为开发版本号，譬如18.3，即表示2018年3月的大版本。<br>[12] Oracle与Google的官司主要焦点在于Java API的版权问题，而不在程序是否能运行在标准Java虚拟机上。<br>[13] 资料来源：<a href=\"https://www.infoworld.com/article/2987529/insider-oracle-lost-interest-in-java.html%E3%80%82\">https://www.infoworld.com/article/2987529/insider-oracle-lost-interest-in-java.html。</a><br>[14] 最大的争议点是Oracle要求包名中不能出现java字样，导致一堆javax.*开头的包一旦修改或添加新代码，就必须重新命名，这将让用到它们的代码都受到影响。资料来源：<a href=\"https://www.infoq.cn/article/2018/02/from-javaee-to-jakartaee%E3%80%82\">https://www.infoq.cn/article/2018/02/from-javaee-to-jakartaee。</a><br>[15] Java One大会从2019年起停办，合并入Oracle CodeOne大会中。<br>[16] 需要使用+XX：+UnlockCommercialFeatures解锁的特性，包括JMC、JFR、NMT、AppCDS和ZGC等。<br>[17] 资料来源：<a href=\"https://blogs.oracle.com/java-platform-group/oracle-jdk-releases-for-java-11-and-later%E3%80%82\">https://blogs.oracle.com/java-platform-group/oracle-jdk-releases-for-java-11-and-later。</a><br>[18] JDK 11中仅有的微小差别是OpenJDK少了几个Module（如JavaFX），且不提供安装包，以压缩包形式发行。但在JDK 12又产生了新的分歧，OpenJDK的Shenandoah垃圾收集器被排除在OracleJDK之外，详见第4章的相关内容。<br>[19] 这里的商业支持不限定于Oracle公司，如Azul ZingJDK、AdoptOpenJDK等都能提供商业支持。<br>[20] Red Hat此前已经是OpenJDK 6（自2013年起）和OpenJDK 7（自2015年起）的维护者。</p>\n<h3 id=\"参考\"><a href=\"#参考\" class=\"headerlink\" title=\"参考\"></a>参考</h3><ul>\n<li>《深入理解Java虚拟机：JVM高级特性与最佳实践》周志明 第三版 </li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"概述\"><a href=\"#概述\" class=\"headerlink\" title=\"概述\"></a>概述</h1><p>Java不仅仅是一门编程语言，它还是一个由一系列计算机软件和规范组成的技术体系，这个技术体系提供了完整的用于软件开发和跨平台部署的支持环境，并广泛应用于嵌入式系统、移动终端、企业服务器、大型机等多种场合，如图1-1所示。时至今日，Java技术体系已经吸引了600多万软件开发者，这是全球最大的软件开发团队。使用Java的设备已经超过了45亿，其中包括8亿多台个人计算机、21亿部移动电话及其他手持设备、35亿个智能卡，以及大量机顶盒、导航系统和其他设备。</p>\n<p>Java能获得如此广泛的认可，除了它拥有一门结构严谨、面向对象的编程语言之外，还有许多不可忽视的优点：它摆脱了硬件平台的束缚，实现了“一次编写，到处运行”的理想；它提供了一种相对安全的内存管理和访问机制，避免了绝大部分内存泄漏和指针越界问题；它实现了热点代码检测和运行时编译及优化，这使得Java应用能随着运行时间的增长而获得更高的性能；它有一套完善的应用程序接口，还有无数来自商业机构和开源社区的第三方类库来帮助用户实现各种各样的功能……Java带来的这些好处，让软件的开发效率得到了极大的提升。作为一名Java程序员，在编写程序时除了尽情发挥Java的各种优势外，还会情不自禁地想去了解和思考一下Java技术体系中这些优秀的技术特性是如何出现及怎样实现的。认识这些技术运行的本质，是自己思考“程序这样写好不好”的必要基础与前提。</p>\n<h1 id=\"Java技术体系\"><a href=\"#Java技术体系\" class=\"headerlink\" title=\"Java技术体系\"></a>Java技术体系</h1><p>从广义上讲，Kotlin、Clojure、JRuby、Groovy等运行于Java虚拟机上的编程语言及其相关的程序都属于Java技术体系中的一员。如果仅从传统意义上来看，JCP官方[1]所定义的Java技术体系包括了以下几个组成部分：</p>\n<ul>\n<li>·Java程序设计语言</li>\n<li>·各种硬件平台上的Java虚拟机实现</li>\n<li>·Class文件格式</li>\n<li>·Java类库API</li>\n<li>·来自商业机构和开源社区的第三方Java类库</li>\n</ul>\n<p>我们可以把Java程序设计语言、Java虚拟机、Java类库这三部分统称为JDK（Java Development Kit），JDK是用于支持Java程序开发的最小环境，本书中为行文方便，在不产生歧义的地方常以JDK 来代指整个Java技术体系[2]。可以把Java类库API中的Java SE API子集[3]和Java虚拟机这两部分统称为JRE（Java Runtime Environment），JRE是支持Java程序运行的标准环境。图1-2展示了Java技术体系所包括的内容，以及JDK和JRE所涵盖的范围。以上是根据Java各个组成部分的功能来进行划分，如果按照技术所服务的领域来划分，或者按照技术关注的重点业务来划分的话，那Java技术体系可以分为以下四条主要的产品线：</p>\n<ul>\n<li>·Java Card：支持Java小程序（Applets）运行在小内存设备（如智能卡）上的平台。</li>\n<li>·Java ME（Micro Edition）：支持Java程序运行在移动终端（手机、PDA）上的平台，对Java API有所精简，并加入了移动终端的针对性支持，这条产品线在JDK 6以前被称为J2ME。有一点读者请勿混淆，现在在智能手机上非常流行的、主要使用Java语言开发程序的Android并不属于Java ME。</li>\n<li>·Java SE（Standard Edition）：支持面向桌面级应用（如Windows下的应用程序）的Java平台，提供了完整的Java核心API，这条产品线在JDK 6以前被称为J2SE。</li>\n<li>·Java EE（Enterprise Edition）：支持使用多层架构的企业应用（如ERP、MIS、CRM应用）的Java平台，除了提供Java SE API外，还对其做了大量有针对性的扩充[4]，并提供了相关的部署支持，这条产品线在JDK 6以前被称为J2EE，在JDK 10以后被Oracle放弃，捐献给Eclipse基金会管理，此后被称为Jakarta EE。</li>\n</ul>\n<h1 id=\"Java发展史\"><a href=\"#Java发展史\" class=\"headerlink\" title=\"Java发展史\"></a>Java发展史</h1><p>从Java的第一个版本诞生到现在已经有二十余年的时间，白驹过隙，沧海桑田，转眼已过了四分之一个世纪，在图1-3所示的时间线里，我们看到JDK的版本已经发展到了JDK 13。这二十多年里诞生过无数与Java相关的产品、技术与标准。现在让我们走入时间隧道，从孕育Java语言的时代开始，再来回顾一下Java的发展轨迹和历史变迁。</p>\n<p>1991年4月，由James Gosling博士领导的绿色计划（Green Project）开始启动，此计划最初的目标是开发一种能够在各种消费性电子产品（如机顶盒、冰箱、收音机等）上运行的程序架构。这个计划的产品就是Java语言的前身：Oak（得名于James Gosling办公室外的一棵橡树）。Oak当时在消费品市场上并不算成功，但随着1995年互联网潮流的兴起，Oak迅速找到了最适合自己发展的市场定位并蜕变成为Java语言。</p>\n<p>1995年5月23日，Oak语言改名为Java，并且在SunWorld大会上正式发布Java 1.0版本。Java语言第一次提出了“Write Once，Run Anywhere”的口号。</p>\n<p>1996年1月23日，JDK 1.0发布，Java语言有了第一个正式版本的运行环境。JDK 1.0提供了一个纯解释执行的Java虚拟机实现（Sun Classic VM）。JDK 1.0版本的代表技术包括：Java虚拟机、Applet、AWT等。</p>\n<p>1996年4月，十个最主要的操作系统和计算机供应商声明将在其产品中嵌入Java技术。同年9月，已有大约8.3万个网页应用了Java技术来制作。在1996年5月底，Sun于美国旧金山举行了首届JavaOne大会，从此JavaOne成为全世界数百万Java语言开发者每年一度的技术盛会。</p>\n<p>1997年2月19日，Sun公司发布了JDK 1.1，Java里许多最基础的技术支撑点（如JDBC等）都是在JDK 1.1版本中提出的，JDK 1.1版的技术代表有：JAR文件格式、JDBC、JavaBeans、RMI等。Java语言的语法也有了一定的增强，如内部类（Inner Class）和反射（Reflection）都是在这时候出现的。直到1999年4月8日，JDK 1.1一共发布了1.1.0至1.1.8这9个版本。从1.1.4以后，每个JDK版本都有一个属于自己的名字（工程代号），分别为：JDK 1.1.4-Sparkler（宝石）、JDK 1.1.5-Pumpkin（南瓜）、JDK 1.1.6-Abigail（阿比盖尔，女子名）、JDK 1.1.7-Brutus（布鲁图，古罗马政治家和将军）和JDK 1.1.8-Chelsea（切尔西，城市名）。</p>\n<p>1998年12月4日，JDK迎来了一个里程碑式的重要版本：工程代号为Playground（竞技场）的JDK 1.2，Sun在这个版本中把Java技术体系拆分为三个方向，分别是面向桌面应用开发的J2SE（Java 2 Platform，Standard Edition）、面向企业级开发的J2EE（Java 2 Platform，Enterprise Edition）和面向手机等移动终端开发的J2ME（Java 2 Platform，Micro Edition）。在这个版本中出现的代表性技术非常多，如EJB、Java Plug-in、Java IDL、Swing等，并且这个版本中Java虚拟机第一次内置了JIT（Just In Time）即时编译器（JDK 1.2中曾并存过三个虚拟机，Classic VM、HotSpot VM和Exact VM，其中Exact VM只在Solaris平台出现过；后面两款虚拟机都是内置了JIT即时编译器的，而之前版本所带的Classic VM只能以外挂的形式使用即时编译器）。在语言和API层面上，Java添加了strictfp关键字，Java类库添加了现在Java编码之中极为常用的一系列Collections集合类等。在1999年3月和7月，分别有JDK 1.2.1和JDK 1.2.2两个小升级版本发布。</p>\n<p>1999年4月27日，HotSpot虚拟机诞生。HotSpot最初由一家名为“Longview Techno-logies”的小公司开发，由于HotSpot的优异表现，这家公司在1997年被Sun公司收购。Hot-Spot虚拟机刚发布时是作为JDK 1.2的附加程序提供的，后来它成为JDK 1.3及之后所有JDK版本的默认Java虚拟机。</p>\n<p>2000年5月8日，工程代号为Kestrel（美洲红隼）的JDK 1.3发布。相对于JDK 1.2，JDK 1.3的改进主要体现在Java类库上（如数学运算和新的Timer API等），JNDI服务从JDK 1.3开始被作为一项平台级服务提供（以前JNDI仅仅是一项扩展服务），使用CORBA IIOP来实现RMI的通信协议，等等。这个版本还对Java 2D做了很多改进，提供了大量新的Java 2D API，并且新添加了JavaSound类库。JDK1.3有1个修正版本JDK 1.3.1，工程代号为Ladybird（瓢虫），于2001年5月17日发布。自从JDK 1.3开始，Sun公司维持着稳定的研发节奏：大约每隔两年发布一个JDK的主版本，以动物命名，期间发布的各个修正版本则以昆虫作为工程代号。</p>\n<p>2002年2月13日，JDK 1.4发布，工程代号为Merlin（灰背隼）。JDK 1.4是标志着Java真正走向成熟的一个版本，Compaq、Fujitsu、SAS、Symbian、IBM等著名公司都有参与功能规划，甚至实现自己独立发行的JDK 1.4。哪怕是在近二十年后的今天，仍然有一些主流应用能直接运行在JDK 1.4之上，或者继续发布能运行在1.4上的版本。JDK 1.4同样带来了很多新的技术特性，如正则表达式、异常链、NIO、日志类、XML解析器和XSLT转换器，等等。JDK 1.4有两个后续修正版：2002年9月16日发布的工程代号为Grasshopper（蚱蜢）的JDK 1.4.1与2003年6月26日发布的工程代号为Mantis（螳螂）的JDK 1.4.2。</p>\n<p>2002年前后还发生了一件与Java没有直接关系，但事实上对Java的发展进程影响很大的事件，就是微软的.NET Framework发布。这个无论是技术实现还是目标用户上都与Java有很多相近之处的技术平台给Java带来了很多讨论、比较与竞争，.NET平台和Java平台之间声势浩大的孰优孰劣的论战到今天为止都仍然没有完全平息。</p>\n<p>2004年9月30日，JDK 5发布，工程代号为Tiger（老虎）。Sun公司从这个版本开始放弃了谦逊的“JDK 1.x”的命名方式，将产品版本号修改成了“JDK x”[1]。从JDK 1.2以来，Java在语法层面上的变动一直很小，而JDK 5在Java语法易用性上做出了非常大的改进。如：自动装箱、泛型、动态注解、枚举、可变长参数、遍历循环（foreach循环）等语法特性都是在JDK 5中加入的。在虚拟机和API层面上，这个版本改进了Java的内存模型（Java Memory Model，JMM）、提供了java.util.concurrent并发包等。另外，JDK 5是官方声明可以支持Windows 9x操作系统的最后一个JDK版本。</p>\n<p>2006年12月11日，JDK 6发布，工程代号为Mustang（野马）。在这个版本中，Sun公司终结了从JDK 1.2开始已经有八年历史的J2EE、J2SE、J2ME的产品线命名方式，启用Java EE 6、Java SE 6、Java ME 6的新命名来代替。JDK 6的改进包括：提供初步的动态语言支持（通过内置Mozilla JavaScript Rhino引擎实现）、提供编译期注解处理器和微型HTTP服务器API，等等。同时，这个版本对Java虚拟机内部做了大量改进，包括锁与同步、垃圾收集、类加载等方面的实现都有相当多的改动。</p>\n<p>在2006年11月13日的JavaOne大会上，Sun公司宣布计划要把Java开源，在随后的一年多时间内，它陆续地将JDK的各个部分在GPLv2（GNU General Public License v2）协议下公开了源码，并建立了OpenJDK组织对这些源码进行独立管理。除了极少量的产权代码（Encumbered Code，这部分代码所有权不属于Sun公司，Sun本身也无权进行开源处理）外，OpenJDK几乎拥有了当时SunJDK 7的全部代码，OpenJDK的质量主管曾经表示在JDK 7中，SunJDK和OpenJDK除了代码文件头的版权注释之外，代码几乎是完全一样的，所以OpenJDK 7与SunJDK 7本质上就是同一套代码库出来的产品。</p>\n<p>JDK 6发布以后，由于代码复杂性的增加、Java开源、开发JavaFX、世界经济危机及Oracle对Sun的收购案等原因，Sun公司在发展Java以外的事情上耗费了太多精力和资源，JDK的更新没有能够继续维持两年发布一个主版本的研发速度，这导致了JDK 6的生命周期异常的长，一共发布了211个更新升级补丁，最后的版本为Java SE 6 Update 211，于2018年10月18日发布。</p>\n<p>2009年2月19日，工程代号为Dolphin（海豚）的JDK 7完成了其第一个里程碑版本。按照JDK 7最初的功能规划，一共会设置十个里程碑。最后一个里程碑版本原计划定于2010年9月9日结束，但由于各种原因，JDK 7最终无法按计划完成。从JDK 7最原始的功能清单来看，它本应是一个包含许多重要改进的JDK版本，其中规划的子项目都为Java业界翘首以盼，包括：</p>\n<ul>\n<li>·Lambda项目：支持Lambda表达式，支持函数式编程。</li>\n<li>·Jigsaw项目：虚拟机层面的模块化支持。</li>\n<li>·动态语言支持：Java是静态语言，为其他运行在Java虚拟机上的动态语言提供支持。</li>\n<li>·Garbage-First收集器。</li>\n<li>·Coin项目：Java语法细节进化。</li>\n</ul>\n<p>令人惋惜的是，在JDK 7开发期间，Sun公司相继在技术竞争和商业竞争中陷入泥潭，公司的股票市值跌至仅有高峰时期的3%，已无力推动JDK 7的研发工作按计划继续进行。为了尽快结束JDK 7长期跳票的问题，Oracle收购Sun公司后随即宣布马上实行“B计划”，大幅裁剪了JDK 7预定目标，以保证JDK 7的正式版能够于2011年7月28日准时发布。“B计划”的主要措施是把不能按时完成的Lambda项目、Jigsaw项目和Coin项目的部分改进延迟到JDK 8之中。最终，JDK 7包含的改进有：提供新的G1收集器（G1在发布时依然处于Experimental状态，直至2012年4月的Update 4中才正式商用）、加强对非Java语言的调用支持（JSR-292，这项特性在到JDK 11还有改动）、可并行的类加载架构等。Oracle公司接手了JDK开发工作以后，迅速展现出了完全不同于Sun时期的、极具商业化的处事风格。面对Java中使用最广泛而又一直免费的Java SE产品线，Oracle很快定义了一套新的Java SE Support[2]产品计划，把JDK的更新支持作为一项商业服务。JDK 7发布的前80个更新仍然免费面向所有用户提供，但后续的其他更新包，用户[3]只能从“将Java SE升级到Java SE Support”与“将JDK 7升级到最新版本”两个选项里挑一个。JDK 7计划维护至2022年，迄今（面向付费用户）已发布了超过两百个更新补丁，最新版本为JDK 7 Update 221。</p>\n<p>对于JDK 7，还有一点值得提起的是，从JDK 7 Update 4起，Java SE的核心功能正式开始为Mac OS X操作系统提供支持，并在JDK 7 Update 6中达到所有功能与Mac OS X完全兼容的程度；同时，JDK 7 Update 6还对ARM指令集架构提供了支持。至此，官方提供的JDK可以运行于Windows（不含Windows 9x）、Linux、Solaris和Mac OS X操作系统上，支持ARM、x86、x86-64和SPARC指令集架构，JDK 7也是可以支持Windows XP操作系统的最后一个版本[4]。</p>\n<p>2009年4月20日，Oracle宣布正式以74亿美元的价格收购市值曾超过2000亿美元的Sun公司，传奇的Sun Microsystems从此落幕成为历史，Java商标正式划归Oracle所有（Java语言本身并不属于哪间公司所有，它由JCP组织进行管理，尽管在JCP中Sun及后来的Oracle的话语权很大）。由于此前Oracle已经收购了另外一家大型的中间件企业BEA公司，当完成对Sun公司的收购之后，Oracle分别从BEA和Sun手中取得了世界三大商用虚拟机的其中两个：JRockit和HotSpot。当时Oracle宣布要在未来一至两年的时间内，把这两个优秀的Java虚拟机合二为一[5]。两者合并的结果只能说差强人意，JRockit的监控工具Java Mission Control被移植到了HotSpot，作为收费功能提供给购买了Java SE Advanced产品计划的用户，其他功能由于两者架构的差异性明显，HotSpot能够直接借鉴融合的功能寥寥无几[6]。</p>\n<p>JDK 8的第一个正式版本原定于2013年9月发布，最终还是跳票到了2014年3月18日，尽管仍然是没有赶上正点，但比起JDK 7那种以年作为计时单位、直接把公司跳崩的研发状况已是大有改善。为了保证日后JDK研发能更顺利地进行，从JDK 8开始，Oracle启用JEP（JDK Enhancement Proposals）来定义和管理纳入新版JDK发布范围的功能特性。JDK 8提供了那些曾在JDK 7中规划过，但最终未能在JDK 7中完成的功能，主要包括：</p>\n<ul>\n<li><p>·JEP 126：对Lambda表达式的支持，这让Java语言拥有了流畅的函数式表达能力。</p>\n</li>\n<li><p>·JEP 104：内置Nashorn JavaScript引擎的支持。</p>\n</li>\n<li><p>·JEP 150：新的时间、日期API。</p>\n</li>\n<li><p>·JEP 122：彻底移除HotSpot的永久代。</p>\n</li>\n<li><p>·……</p>\n</li>\n</ul>\n<p>“B计划”中原本说好的会在JDK 8提供的Jigsaw模块化功能再次被延期到了JDK 9，不得不说，即0使放到整个Java发展史里看，Jigsaw都能算是天字第一号的大坑。Java的模块化系统本身面临的技术挑战就很艰巨，从微软的DLL技术开始，到Java自己的JAR，再到.NET的Assembly，工程庞大起来都无一例外会陷入“模块地狱”[7]的困境之中，而Jigsaw面临的更大困难是厂商之间以标准话语权为目的，以技术为“找茬”手段的激烈竞争。原本JDK 9是计划在2016年发布的，但在2016年伊始，Oracle就宣布JDK 9肯定要延期至2017年，后来又连续经过了两次短时间的跳票，最终到2017年9月21日才得以艰难面世。后两次跳票的原因是以IBM和RedHat为首[8]的十三家企业在JCP执行委员会上联手否决了Oracle提出的Jigsaw作为Java模块化规范进入JDK 9发布范围的提案[9]。凭良心说，Java确实有模块化的刚需，不论是JDK自身（例如拆分出Java SE Embedded这样规模较小的产品）抑或是Java应用都需要用到模块化。这方面IBM本身就是各大Java发行厂商中做得最好的，它不仅让自家的JDK实现了高度模块化，还带头成立了OSGi联盟，制订了Java框架层面模块化的事实标准，所以它当然会想把OSGi推到Java规范里去争个“名份”，而不是被Jigsaw革掉“性命”。可是Oracle对此没有丝毫退让，不惜向JCP发去公开信[10]，直言如果提案最后无法通过，那Oracle将摒弃JSR专家组，独立发展带Jigsaw的Java版本，Java顿时面临如Python 2与Python3那般分裂的危机。</p>\n<p>不论如何，经过前后六轮投票，经历桌上桌下的斗争与妥协，Java没有分裂，JDK 9总算是带着Jigsaw最终发布了，除了Jigsaw外，JDK 9还增强了若干工具（JS Shell、JLink、JHSDB等），整顿了HotSpot各个模块各自为战的日志系统，支持HTTP 2客户单API等91个JEP。</p>\n<p>JDK 9发布后，Oracle随即宣布Java将会以持续交付的形式和更加敏捷的研发节奏向前推进，以后JDK将会在每年的3月和9月各发布一个大版本[11]，目的就是为避免众多功能特性被集中捆绑到一个JDK版本上而引发交付风险。这次改革确实从根源上解决了跳票问题，但也为Java的用户和发行商带来了颇大的压力，不仅程序员感慨“Java新版本还没开始用就已经过时了”，Oracle自己对着一堆JDK版本分支也在挠头，不知道该如何维护更新，该如何提供技术支持。Oracle的解决方案是顺理成章地终结掉“每个JDK版本最少维护三年”的优良传统，从此以后，每六个JDK大版本中才会被划出一个长期支持（Long Term Support，LTS）版，只有LTS版的JDK能够获得为期三年的支持和更新，普通版的JDK就只有短短六个月的生命周期。JDK 8和JDK 11会是LTS版，再下一个就到2021年发布的JDK 17了。</p>\n<p>2018年3月20日，JDK 10如期发布，这版本的主要研发目标是内部重构，诸如统一源仓库、统一垃圾收集器接口、统一即时编译器接口（JVMCI在JDK 9已经有了，这里是引入新的Graal即时编译器）等，这些都将会是对未来Java发展大有裨益的改进，但对普通用户来说JDK 10的新特性就显得乏善可陈，毕竟它只包含了12个JEP，而且其中只有本地类型推断这一个编码端可见的改进。尽管JDK10可见的改进有限，但2018这一年Java圈丝毫不缺乏谈资，相继发生了几件与“金钱”相关的历史性大事件。首先是2018年3月27日，Android的Java侵权案有了最终判决，法庭裁定Google赔偿Oracle合计88亿美元，要知道2009年Oracle收购Sun也就只花了74亿，收购完成后随即就用Sun的专利把Google告上了法庭，经过Oracle法务部的几轮神操作，一场官司的赔偿让收购Sun公司等同免费。对此事Java技术圈多数吃瓜群众是站在Google这边的，认为Oracle这样做是自绝Java的发展前景，毕竟当年Android刚刚起步的时候可是Sun向Google抛去的橄榄枝，Android的流行也巩固了Java“第一编程语言”的行业地位。摒弃对企业的好恶情感，就事论事，Google采用Java的语法和API类库，开发出来的程序却不能运行在其他Java虚拟机之上，这事情无论怎样都是有违Java技术的精神原旨的，也肯定违反了Java的使用协议[12]。如果说Oracle控告Google“不厚道”，那当年微软用J++做了同样的事情（借用语法和API，但程序不兼容标准Java虚拟机），被Sun告到登报道歉，一边赔款一边割地，声明放弃J++语言和Windows平台上的内置虚拟机，这又该找谁说理去？按常理说Java刚给Oracle赚了88亿美金，该颇为受宠才对，可Oracle是典型只谈利益不讲情怀的公司，InfoWorld披露的一封Oracle高管邮件表明[13]，Java体系中被认为无法盈利也没有太多战略前景的部分会逐渐被“按计划报废”（Planned Obsolescence）。这事的第一刀落下是在2018年3月，Oracle正式宣告Java EE成为历史名词。虽然Java SE、Java EE和Java ME三条产品线里确实只有Java SE称得上成功，但Java EE毕竟无比辉煌过，现在其中还持有着JDBC、JMS、Servlet等使用极为广泛的基础组件，然而Oracle仍选择把它“扫地出门”，所有权直接赠送给Eclipse基金会，唯一的条件是以后不准再使用“Java”这个商标[14]，所以取而代之的将是Jakarta EE。</p>\n<p>2018年10月，JavaOne 2018在旧金山举行，此前没有人想过这会是最后一届JavaOne大会，这个在1996年伴随着Java一同诞生、成长的开发者年度盛会，竟是Oracle下一个裁撤的对象[15]，此外还有Java Mission Control的开发团队，也在2018年6月被Oracle解散。</p>\n<p>2018年9月25日，JDK 11发布，这是一个LTS版本的JDK，包含17个JEP，其中有ZGC这样的革命性的垃圾收集器出现，也有把JDK 10中的类型推断加入Lambda语法这种可见的改进，但都比不过它发布时爆出来的谣言轰动：“Java要开始收费啦！”</p>\n<p>随着JDK 11发布，Oracle同时调整了JDK的授权许可证，里面包含了好几个动作。首先，Oracle从JDK 11起把以前的商业特性[16]全部开源给OpenJDK，这样OpenJDK 11和OracleJDK 11的代码和功能，在本质上就是完全相同的（官方原文是Essentially Identical）[17]。然后，Oracle宣布以后将会同时发行两个JDK：一个是以GPLv2+CE协议下由Oracle发行的OpenJDK（本书后面章节称其为Oracle OpenJDK），另一个是在新的OTN协议下发行的传统的OracleJDK，这两个JDK共享绝大部分源码，在功能上是几乎一样的[18]，核心差异是前者可以免费在开发、测试或生产环境中使用，但是只有半年时间的更新支持；后者个人依然可以免费使用，但若在生产环境中商用就必须付费，可以有三年时间的更新支持。如果说由此能得出“Java要收费”的结论，那是纯属标题党，最多只能说Oracle在迫使商业用户要么不断升级JDK的版本，要么就去购买商业支持[19]。</p>\n<p>2019年2月，在JDK 12发布前夕，Oracle果然如之前宣布那样在六个月之后就放弃了对上一个版本OpenJDK的维护，RedHat同时从Oracle手上接过OpenJDK 8和OpenJDK 11的管理权利和维护职责[20]。Oracle不愿意在旧版本上继续耗费资源，而RedHat或者说它背后的IBM又乐意扩大自己在Java社区的影响力，这是一笔双赢的交易。RedHat代替Oracle成为JDK历史版本的维护者，应该有利于Java的持续稳定，但从技术发展角度来看，这并不能为Oracle领导Java社区的局面带来根本性的改变，毕竟要添加新的或实验性的功能，仅会针对Java的最新版本，而不会在旧版本上动手。</p>\n<p>2019年3月20日，JDK 12发布，只包含8个JEP，其中主要有Switch表达式、Java微测试套件（JMH）等新功能，最引人注目的特性无疑是加入了由RedHat领导开发的Shen-andoah垃圾收集器。Shenandoah作为首个由非Oracle开发的垃圾收集器，其目标又与Oracle在JDK 11中发布的ZGC几乎完全一致，两者天生就存在竞争。Oracle马上用实际行动抵制了这个新收集器，在JDK 11发布时才说应尽可能保证OracleJDK和OpenJDK的兼容一致，转眼就在Oracle JDK 12里把Shenandoah的代码通过条件编译强行剔除掉，使其成为历史上唯一进入了OpenJDK发布清单，但在OracleJDK中无法使用的功能。</p>\n<p>Oracle收购Sun是Java发展历史上一道明显的分界线。在Sun掌舵的前十几年里，Java获得巨大成功，同时也渐渐显露出来语言演进的缓慢与社区决策的老朽；而在Oracle主导Java后，引起竞争的同时也带来新的活力，Java发展的速度要显著高于Sun时代。Java的未来是继续向前、再攀高峰，还是由盛转衰、锋芒挫缩，你我拭目以待。</p>\n<p>Java面临的危机挑战前所未有的艰巨，属于Java的未来也从未如此充满想象与可能。</p>\n<hr>\n<p>[1] Java从1.5版本开始，官方在正式文档与宣传上已经不再使用类似“JDK 1.5”的命名，只有程序员内<br>部使用的开发版本号（Developer Version，例如java-version的输出）中才继续沿用1.5、1.6、1.7这样的版本号，而公开版本号（Product Version）则是改为JDK 5.0、JDK 6、JDK 7的命名方式，JDK 5.0中“.0”的后缀从JDK 6起也被移除掉，本书为了行文统一，同样以JDK 5来指代JDK 5.0。<br>[2] 除了Java SE Support外，还有面向独立软件提供商的Java SE Advanced &amp; Suite产品线，差别是后者带有JMC等监控工具，详细内容可以参见本书第4章。<br>[3] 特指商业用户，个人使用仍然是可以免费获得这些更新包的。<br>[4] 这是官方的声明，而事实上直到JDK 8 Update 21之前在Windows XP上仍可正常运行。<br>[5] “HotRockit”项目的相关介绍：<a href=\"http://hirt.se/presentations/WhatToExpect.ppt%E3%80%82\">http://hirt.se/presentations/WhatToExpect.ppt。</a><br>[6] 除了JMC和JFR，HotSpot用本地内存代替永久代实现方法区，支持本地内存使用情况追（NMT）等功能是从JRockit借鉴过来的。<br>[7] 来自于以前的“DLL Hell”，如果读者不清楚什么是模块地狱的话，打开你计算机的windows目录或者windows\\system32目录就明白了。<br>[8] 其实就是以IBM为首，IBM一直与RedHat有密切合作，2018年IBM以340亿美元天价收购了RedHat。<br>[9] 投票记录：<a href=\"https://jcp.org/en/jsr/results?id=5959%E3%80%82\">https://jcp.org/en/jsr/results?id=5959。</a><br>[10] 公开信：<a href=\"https://www.infoq.cn/article/2017/05/jigsaw-open-letter%E3%80%82\">https://www.infoq.cn/article/2017/05/jigsaw-open-letter。</a><br>[11] 也改掉了在开发版号中1.7、1.8的命名，从JDK 10后将是年份加月份作为开发版本号，譬如18.3，即表示2018年3月的大版本。<br>[12] Oracle与Google的官司主要焦点在于Java API的版权问题，而不在程序是否能运行在标准Java虚拟机上。<br>[13] 资料来源：<a href=\"https://www.infoworld.com/article/2987529/insider-oracle-lost-interest-in-java.html%E3%80%82\">https://www.infoworld.com/article/2987529/insider-oracle-lost-interest-in-java.html。</a><br>[14] 最大的争议点是Oracle要求包名中不能出现java字样，导致一堆javax.*开头的包一旦修改或添加新代码，就必须重新命名，这将让用到它们的代码都受到影响。资料来源：<a href=\"https://www.infoq.cn/article/2018/02/from-javaee-to-jakartaee%E3%80%82\">https://www.infoq.cn/article/2018/02/from-javaee-to-jakartaee。</a><br>[15] Java One大会从2019年起停办，合并入Oracle CodeOne大会中。<br>[16] 需要使用+XX：+UnlockCommercialFeatures解锁的特性，包括JMC、JFR、NMT、AppCDS和ZGC等。<br>[17] 资料来源：<a href=\"https://blogs.oracle.com/java-platform-group/oracle-jdk-releases-for-java-11-and-later%E3%80%82\">https://blogs.oracle.com/java-platform-group/oracle-jdk-releases-for-java-11-and-later。</a><br>[18] JDK 11中仅有的微小差别是OpenJDK少了几个Module（如JavaFX），且不提供安装包，以压缩包形式发行。但在JDK 12又产生了新的分歧，OpenJDK的Shenandoah垃圾收集器被排除在OracleJDK之外，详见第4章的相关内容。<br>[19] 这里的商业支持不限定于Oracle公司，如Azul ZingJDK、AdoptOpenJDK等都能提供商业支持。<br>[20] Red Hat此前已经是OpenJDK 6（自2013年起）和OpenJDK 7（自2015年起）的维护者。</p>\n<h3 id=\"参考\"><a href=\"#参考\" class=\"headerlink\" title=\"参考\"></a>参考</h3><ul>\n<li>《深入理解Java虚拟机：JVM高级特性与最佳实践》周志明 第三版 </li>\n</ul>\n"},{"title":"Java基础-（2）开发环境搭建","date":"2018-06-30T15:12:15.000Z","description":"Java开发环境搭建","_content":"---\n\n\n\n# 搭建前准备\n\n\n\n\n\n# 一 搭建前准备\n\n## 梳理主要步骤\n\n- 1.确定安装环境Windows 、Linux（Ubuntu）及系统版本\n- 2.下载JDK及相关软件\n- 3.安装JDK\n- 4.配置环境变量\n- 5.测试验证\n\n## 安装所需资源\n\nJDK下载地址（需提前注册）：    【URL待补充】\n\n\n\n\n\n# Windows 10 系统下的安装\n\n## 1. 安装JDK\n\n\n\n\n\n## 2.配置JDK环境变量\n\n\n\n\n\n## 3.测试程序准备及验证\n\n- 安装后检查\n``` cmd\njava -version\n```\n```cmd\n【此处显示Java版本信息】\n```\n\n\n```java\n-- HelloWorld.java\npublic class HelloWorld{\n    public static void main(String[] args){\n       System.out.println(\"你好，世界！\");\n    }\n}\n\n```\n- 编译运行Demo程序  \n```java\njava HelloWorld.java\n```\n\n```cmd\n你好，世界！\n```\n\n至此完成JDK的安装及验证\n\n\n\n\n# Ubuntu 系统下的安装\n\n##  1.安装前说明\n- 详细安装步骤可以参考链接：\n- JDK下载地址   \n\n## 2.配置软件源\n\n\n\n## 3.安装软件\n\n\n\n\n## 4.测试验证\n\n\n\n\n\n\n\n","source":"_posts/Java基础-（2）开发环境搭建.md","raw":"---\ntitle: Java基础-（2）开发环境搭建\ndate: 2018-06-30 23:12:15\ncategories: \"Java\" #文章分類目錄 可以省略\ntags: \n     - Java\ndescription: Java开发环境搭建  #本頁的描述 可以省略一\n\n---\n---\n\n\n\n# 搭建前准备\n\n\n\n\n\n# 一 搭建前准备\n\n## 梳理主要步骤\n\n- 1.确定安装环境Windows 、Linux（Ubuntu）及系统版本\n- 2.下载JDK及相关软件\n- 3.安装JDK\n- 4.配置环境变量\n- 5.测试验证\n\n## 安装所需资源\n\nJDK下载地址（需提前注册）：    【URL待补充】\n\n\n\n\n\n# Windows 10 系统下的安装\n\n## 1. 安装JDK\n\n\n\n\n\n## 2.配置JDK环境变量\n\n\n\n\n\n## 3.测试程序准备及验证\n\n- 安装后检查\n``` cmd\njava -version\n```\n```cmd\n【此处显示Java版本信息】\n```\n\n\n```java\n-- HelloWorld.java\npublic class HelloWorld{\n    public static void main(String[] args){\n       System.out.println(\"你好，世界！\");\n    }\n}\n\n```\n- 编译运行Demo程序  \n```java\njava HelloWorld.java\n```\n\n```cmd\n你好，世界！\n```\n\n至此完成JDK的安装及验证\n\n\n\n\n# Ubuntu 系统下的安装\n\n##  1.安装前说明\n- 详细安装步骤可以参考链接：\n- JDK下载地址   \n\n## 2.配置软件源\n\n\n\n## 3.安装软件\n\n\n\n\n## 4.测试验证\n\n\n\n\n\n\n\n","slug":"Java基础-（2）开发环境搭建","published":1,"updated":"2025-03-26T06:43:52.996Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cm8pr0j270008gskz0c1k6myz","content":"<hr>\n<h1 id=\"搭建前准备\"><a href=\"#搭建前准备\" class=\"headerlink\" title=\"搭建前准备\"></a>搭建前准备</h1><h1 id=\"一-搭建前准备\"><a href=\"#一-搭建前准备\" class=\"headerlink\" title=\"一 搭建前准备\"></a>一 搭建前准备</h1><h2 id=\"梳理主要步骤\"><a href=\"#梳理主要步骤\" class=\"headerlink\" title=\"梳理主要步骤\"></a>梳理主要步骤</h2><ul>\n<li>1.确定安装环境Windows 、Linux（Ubuntu）及系统版本</li>\n<li>2.下载JDK及相关软件</li>\n<li>3.安装JDK</li>\n<li>4.配置环境变量</li>\n<li>5.测试验证</li>\n</ul>\n<h2 id=\"安装所需资源\"><a href=\"#安装所需资源\" class=\"headerlink\" title=\"安装所需资源\"></a>安装所需资源</h2><p>JDK下载地址（需提前注册）：    【URL待补充】</p>\n<h1 id=\"Windows-10-系统下的安装\"><a href=\"#Windows-10-系统下的安装\" class=\"headerlink\" title=\"Windows 10 系统下的安装\"></a>Windows 10 系统下的安装</h1><h2 id=\"1-安装JDK\"><a href=\"#1-安装JDK\" class=\"headerlink\" title=\"1. 安装JDK\"></a>1. 安装JDK</h2><h2 id=\"2-配置JDK环境变量\"><a href=\"#2-配置JDK环境变量\" class=\"headerlink\" title=\"2.配置JDK环境变量\"></a>2.配置JDK环境变量</h2><h2 id=\"3-测试程序准备及验证\"><a href=\"#3-测试程序准备及验证\" class=\"headerlink\" title=\"3.测试程序准备及验证\"></a>3.测试程序准备及验证</h2><ul>\n<li>安装后检查<figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs cmd\">java -version<br></code></pre></td></tr></table></figure>\n<figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs cmd\">【此处显示Java版本信息】<br></code></pre></td></tr></table></figure></li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\">-- HelloWorld.java<br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">HelloWorld</span></span>&#123;<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">main</span><span class=\"hljs-params\">(String[] args)</span></span>&#123;<br>       System.out.println(<span class=\"hljs-string\">&quot;你好，世界！&quot;</span>);<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>\n<ul>\n<li>编译运行Demo程序  <figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\">java HelloWorld.java<br></code></pre></td></tr></table></figure></li>\n</ul>\n<figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs cmd\">你好，世界！<br></code></pre></td></tr></table></figure>\n\n<p>至此完成JDK的安装及验证</p>\n<h1 id=\"Ubuntu-系统下的安装\"><a href=\"#Ubuntu-系统下的安装\" class=\"headerlink\" title=\"Ubuntu 系统下的安装\"></a>Ubuntu 系统下的安装</h1><h2 id=\"1-安装前说明\"><a href=\"#1-安装前说明\" class=\"headerlink\" title=\"1.安装前说明\"></a>1.安装前说明</h2><ul>\n<li>详细安装步骤可以参考链接：</li>\n<li>JDK下载地址   </li>\n</ul>\n<h2 id=\"2-配置软件源\"><a href=\"#2-配置软件源\" class=\"headerlink\" title=\"2.配置软件源\"></a>2.配置软件源</h2><h2 id=\"3-安装软件\"><a href=\"#3-安装软件\" class=\"headerlink\" title=\"3.安装软件\"></a>3.安装软件</h2><h2 id=\"4-测试验证\"><a href=\"#4-测试验证\" class=\"headerlink\" title=\"4.测试验证\"></a>4.测试验证</h2>","site":{"data":{}},"excerpt":"","more":"<hr>\n<h1 id=\"搭建前准备\"><a href=\"#搭建前准备\" class=\"headerlink\" title=\"搭建前准备\"></a>搭建前准备</h1><h1 id=\"一-搭建前准备\"><a href=\"#一-搭建前准备\" class=\"headerlink\" title=\"一 搭建前准备\"></a>一 搭建前准备</h1><h2 id=\"梳理主要步骤\"><a href=\"#梳理主要步骤\" class=\"headerlink\" title=\"梳理主要步骤\"></a>梳理主要步骤</h2><ul>\n<li>1.确定安装环境Windows 、Linux（Ubuntu）及系统版本</li>\n<li>2.下载JDK及相关软件</li>\n<li>3.安装JDK</li>\n<li>4.配置环境变量</li>\n<li>5.测试验证</li>\n</ul>\n<h2 id=\"安装所需资源\"><a href=\"#安装所需资源\" class=\"headerlink\" title=\"安装所需资源\"></a>安装所需资源</h2><p>JDK下载地址（需提前注册）：    【URL待补充】</p>\n<h1 id=\"Windows-10-系统下的安装\"><a href=\"#Windows-10-系统下的安装\" class=\"headerlink\" title=\"Windows 10 系统下的安装\"></a>Windows 10 系统下的安装</h1><h2 id=\"1-安装JDK\"><a href=\"#1-安装JDK\" class=\"headerlink\" title=\"1. 安装JDK\"></a>1. 安装JDK</h2><h2 id=\"2-配置JDK环境变量\"><a href=\"#2-配置JDK环境变量\" class=\"headerlink\" title=\"2.配置JDK环境变量\"></a>2.配置JDK环境变量</h2><h2 id=\"3-测试程序准备及验证\"><a href=\"#3-测试程序准备及验证\" class=\"headerlink\" title=\"3.测试程序准备及验证\"></a>3.测试程序准备及验证</h2><ul>\n<li>安装后检查<figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs cmd\">java -version<br></code></pre></td></tr></table></figure>\n<figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs cmd\">【此处显示Java版本信息】<br></code></pre></td></tr></table></figure></li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\">-- HelloWorld.java<br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">HelloWorld</span></span>&#123;<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">main</span><span class=\"hljs-params\">(String[] args)</span></span>&#123;<br>       System.out.println(<span class=\"hljs-string\">&quot;你好，世界！&quot;</span>);<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>\n<ul>\n<li>编译运行Demo程序  <figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\">java HelloWorld.java<br></code></pre></td></tr></table></figure></li>\n</ul>\n<figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs cmd\">你好，世界！<br></code></pre></td></tr></table></figure>\n\n<p>至此完成JDK的安装及验证</p>\n<h1 id=\"Ubuntu-系统下的安装\"><a href=\"#Ubuntu-系统下的安装\" class=\"headerlink\" title=\"Ubuntu 系统下的安装\"></a>Ubuntu 系统下的安装</h1><h2 id=\"1-安装前说明\"><a href=\"#1-安装前说明\" class=\"headerlink\" title=\"1.安装前说明\"></a>1.安装前说明</h2><ul>\n<li>详细安装步骤可以参考链接：</li>\n<li>JDK下载地址   </li>\n</ul>\n<h2 id=\"2-配置软件源\"><a href=\"#2-配置软件源\" class=\"headerlink\" title=\"2.配置软件源\"></a>2.配置软件源</h2><h2 id=\"3-安装软件\"><a href=\"#3-安装软件\" class=\"headerlink\" title=\"3.安装软件\"></a>3.安装软件</h2><h2 id=\"4-测试验证\"><a href=\"#4-测试验证\" class=\"headerlink\" title=\"4.测试验证\"></a>4.测试验证</h2>"},{"title":"Java基础-（4）基础语法","date":"2018-06-30T15:12:15.000Z","description":"Java基础语法","_content":"\n\n\n#  加减乘除\n\n\n\n# 其他常用运算\n\n\n\n## 其他常用计算类型\n\n\n\n## 位运算\n\n\n\n## 进制转换\n\n\n\n\n\n\n\n# 常用方法\n\n\n\n- main 方法\n\n  \n\n- 构造方法\n\n  \n\n- 静态方法\n\n  \n\n- setXX\n\n\n\n- getXX\n\n\n\n- toString()\n\n\n\n- hashCode()\n\n  \n\n- equals()\n\n  \n\n- instanceof\n\n\n\n\n\n\n\n","source":"_posts/Java基础-（4）基础语法.md","raw":"---\ntitle: Java基础-（4）基础语法\ndate: 2018-06-30 23:12:15\ncategories: \"Java\" #文章分類目錄 可以省略\ntags: \n     - Java\ndescription: Java基础语法  #本頁的描述 可以省略\n---\n\n\n\n#  加减乘除\n\n\n\n# 其他常用运算\n\n\n\n## 其他常用计算类型\n\n\n\n## 位运算\n\n\n\n## 进制转换\n\n\n\n\n\n\n\n# 常用方法\n\n\n\n- main 方法\n\n  \n\n- 构造方法\n\n  \n\n- 静态方法\n\n  \n\n- setXX\n\n\n\n- getXX\n\n\n\n- toString()\n\n\n\n- hashCode()\n\n  \n\n- equals()\n\n  \n\n- instanceof\n\n\n\n\n\n\n\n","slug":"Java基础-（4）基础语法","published":1,"updated":"2025-03-26T06:43:52.997Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cm8pr0j270009gskze3t4dp7m","content":"<h1 id=\"加减乘除\"><a href=\"#加减乘除\" class=\"headerlink\" title=\"加减乘除\"></a>加减乘除</h1><h1 id=\"其他常用运算\"><a href=\"#其他常用运算\" class=\"headerlink\" title=\"其他常用运算\"></a>其他常用运算</h1><h2 id=\"其他常用计算类型\"><a href=\"#其他常用计算类型\" class=\"headerlink\" title=\"其他常用计算类型\"></a>其他常用计算类型</h2><h2 id=\"位运算\"><a href=\"#位运算\" class=\"headerlink\" title=\"位运算\"></a>位运算</h2><h2 id=\"进制转换\"><a href=\"#进制转换\" class=\"headerlink\" title=\"进制转换\"></a>进制转换</h2><h1 id=\"常用方法\"><a href=\"#常用方法\" class=\"headerlink\" title=\"常用方法\"></a>常用方法</h1><ul>\n<li><p>main 方法</p>\n</li>\n<li><p>构造方法</p>\n</li>\n<li><p>静态方法</p>\n</li>\n<li><p>setXX</p>\n</li>\n</ul>\n<ul>\n<li>getXX</li>\n</ul>\n<ul>\n<li>toString()</li>\n</ul>\n<ul>\n<li><p>hashCode()</p>\n</li>\n<li><p>equals()</p>\n</li>\n<li><p>instanceof</p>\n</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"加减乘除\"><a href=\"#加减乘除\" class=\"headerlink\" title=\"加减乘除\"></a>加减乘除</h1><h1 id=\"其他常用运算\"><a href=\"#其他常用运算\" class=\"headerlink\" title=\"其他常用运算\"></a>其他常用运算</h1><h2 id=\"其他常用计算类型\"><a href=\"#其他常用计算类型\" class=\"headerlink\" title=\"其他常用计算类型\"></a>其他常用计算类型</h2><h2 id=\"位运算\"><a href=\"#位运算\" class=\"headerlink\" title=\"位运算\"></a>位运算</h2><h2 id=\"进制转换\"><a href=\"#进制转换\" class=\"headerlink\" title=\"进制转换\"></a>进制转换</h2><h1 id=\"常用方法\"><a href=\"#常用方法\" class=\"headerlink\" title=\"常用方法\"></a>常用方法</h1><ul>\n<li><p>main 方法</p>\n</li>\n<li><p>构造方法</p>\n</li>\n<li><p>静态方法</p>\n</li>\n<li><p>setXX</p>\n</li>\n</ul>\n<ul>\n<li>getXX</li>\n</ul>\n<ul>\n<li>toString()</li>\n</ul>\n<ul>\n<li><p>hashCode()</p>\n</li>\n<li><p>equals()</p>\n</li>\n<li><p>instanceof</p>\n</li>\n</ul>\n"},{"title":"Java基础-（6）变量","date":"2018-06-30T15:12:15.000Z","description":"Java变量","_content":"\n\n\n\n\n# 变量的声明\n\n\n\n","source":"_posts/Java基础-（6）变量.md","raw":"---\ntitle: Java基础-（6）变量\ndate: 2018-06-30 23:12:15\ncategories: \"Java\" #文章分類目錄 可以省略\ntags: \n     - Java\ndescription: Java变量  #本頁的描述 可以省略\n---\n\n\n\n\n\n# 变量的声明\n\n\n\n","slug":"Java基础-（6）变量","published":1,"updated":"2025-03-26T06:43:52.998Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cm8pr0j28000dgskz4ec1eyvr","content":"<h1 id=\"变量的声明\"><a href=\"#变量的声明\" class=\"headerlink\" title=\"变量的声明\"></a>变量的声明</h1>","site":{"data":{}},"excerpt":"","more":"<h1 id=\"变量的声明\"><a href=\"#变量的声明\" class=\"headerlink\" title=\"变量的声明\"></a>变量的声明</h1>"},{"title":"Java基础-（3）对象和类","date":"2018-06-30T15:12:15.000Z","description":"Java对象和类","_content":"\n\n\n\n\n# 万物皆对象\n\n在Java的世界里，万物皆对象包括，普通类、接口类、抽象类、枚举类、Record类（JDK14后支持）\n\nObject 是所有java对象类的公共超父类  ，java.lang.Object    对象是Java对象中最顶层的类，所有的其他对象都是其子类。\n\n\n\n\n\n# 类\n\n- 类的定义\n\n``` java\n// 普通类\npublic class HelloWorld {\n    \n    \n}\n\n// 接口类\npublic interface UserService{\n    \n}\n\n// 注解类\npublic @interface Entity{\n    \n}\n\n// 枚举类\npublic enum Day{\n    Monday,【此处需进一步完善】\n    Tusday,\n    Thirsday,\n    Wensday\n    Friday,\n    Sunday,\n    xxxday\n   \n}\n\n\n\n\n```\n\n\n\n\n\n\n\n\n\n# Java类的特性\n\n\n\n## 封装\n\n\n\n\n\n## 继承\n\n\n\n\n\n## 多态\n\n\n\n\n\n##  JavaBean\n\n\n\n\n\n\n\n## 类的延申\n\n### POJO\n\n\n\n### DTO\n\n\n\n### VO\n\n\n\n### DAO\n\n\n\n\n\n\n\n# this   和super\n\n\n\n# 对象的生命周期  \n\n从创建  到销毁的过程\n\n各方法的执行顺序\n\n\n\n\n\n\n\n\n\n","source":"_posts/Java基础-（3）对象和类.md","raw":"---\ntitle: Java基础-（3）对象和类\ndate: 2018-06-30 23:12:15\ncategories: \"Java\" #文章分類目錄 可以省略\ntags: \n     - Java\ndescription: Java对象和类  #本頁的描述 可以省略\n---\n\n\n\n\n\n# 万物皆对象\n\n在Java的世界里，万物皆对象包括，普通类、接口类、抽象类、枚举类、Record类（JDK14后支持）\n\nObject 是所有java对象类的公共超父类  ，java.lang.Object    对象是Java对象中最顶层的类，所有的其他对象都是其子类。\n\n\n\n\n\n# 类\n\n- 类的定义\n\n``` java\n// 普通类\npublic class HelloWorld {\n    \n    \n}\n\n// 接口类\npublic interface UserService{\n    \n}\n\n// 注解类\npublic @interface Entity{\n    \n}\n\n// 枚举类\npublic enum Day{\n    Monday,【此处需进一步完善】\n    Tusday,\n    Thirsday,\n    Wensday\n    Friday,\n    Sunday,\n    xxxday\n   \n}\n\n\n\n\n```\n\n\n\n\n\n\n\n\n\n# Java类的特性\n\n\n\n## 封装\n\n\n\n\n\n## 继承\n\n\n\n\n\n## 多态\n\n\n\n\n\n##  JavaBean\n\n\n\n\n\n\n\n## 类的延申\n\n### POJO\n\n\n\n### DTO\n\n\n\n### VO\n\n\n\n### DAO\n\n\n\n\n\n\n\n# this   和super\n\n\n\n# 对象的生命周期  \n\n从创建  到销毁的过程\n\n各方法的执行顺序\n\n\n\n\n\n\n\n\n\n","slug":"Java基础-（3）对象和类","published":1,"updated":"2025-03-26T06:43:52.997Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cm8pr0j29000fgskzgbau80lc","content":"<h1 id=\"万物皆对象\"><a href=\"#万物皆对象\" class=\"headerlink\" title=\"万物皆对象\"></a>万物皆对象</h1><p>在Java的世界里，万物皆对象包括，普通类、接口类、抽象类、枚举类、Record类（JDK14后支持）</p>\n<p>Object 是所有java对象类的公共超父类  ，java.lang.Object    对象是Java对象中最顶层的类，所有的其他对象都是其子类。</p>\n<h1 id=\"类\"><a href=\"#类\" class=\"headerlink\" title=\"类\"></a>类</h1><ul>\n<li>类的定义</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">// 普通类</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">HelloWorld</span> </span>&#123;<br>    <br>    <br>&#125;<br><br><span class=\"hljs-comment\">// 接口类</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">interface</span> <span class=\"hljs-title\">UserService</span></span>&#123;<br>    <br>&#125;<br><br><span class=\"hljs-comment\">// 注解类</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-meta\">@interface</span> Entity&#123;<br>    <br>&#125;<br><br><span class=\"hljs-comment\">// 枚举类</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">enum</span> <span class=\"hljs-title\">Day</span></span>&#123;<br>    Monday,【此处需进一步完善】<br>    Tusday,<br>    Thirsday,<br>    Wensday<br>    Friday,<br>    Sunday,<br>    xxxday<br>   <br>&#125;<br><br><br><br><br></code></pre></td></tr></table></figure>\n\n\n\n\n\n\n\n\n\n<h1 id=\"Java类的特性\"><a href=\"#Java类的特性\" class=\"headerlink\" title=\"Java类的特性\"></a>Java类的特性</h1><h2 id=\"封装\"><a href=\"#封装\" class=\"headerlink\" title=\"封装\"></a>封装</h2><h2 id=\"继承\"><a href=\"#继承\" class=\"headerlink\" title=\"继承\"></a>继承</h2><h2 id=\"多态\"><a href=\"#多态\" class=\"headerlink\" title=\"多态\"></a>多态</h2><h2 id=\"JavaBean\"><a href=\"#JavaBean\" class=\"headerlink\" title=\"JavaBean\"></a>JavaBean</h2><h2 id=\"类的延申\"><a href=\"#类的延申\" class=\"headerlink\" title=\"类的延申\"></a>类的延申</h2><h3 id=\"POJO\"><a href=\"#POJO\" class=\"headerlink\" title=\"POJO\"></a>POJO</h3><h3 id=\"DTO\"><a href=\"#DTO\" class=\"headerlink\" title=\"DTO\"></a>DTO</h3><h3 id=\"VO\"><a href=\"#VO\" class=\"headerlink\" title=\"VO\"></a>VO</h3><h3 id=\"DAO\"><a href=\"#DAO\" class=\"headerlink\" title=\"DAO\"></a>DAO</h3><h1 id=\"this-和super\"><a href=\"#this-和super\" class=\"headerlink\" title=\"this   和super\"></a>this   和super</h1><h1 id=\"对象的生命周期\"><a href=\"#对象的生命周期\" class=\"headerlink\" title=\"对象的生命周期\"></a>对象的生命周期</h1><p>从创建  到销毁的过程</p>\n<p>各方法的执行顺序</p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"万物皆对象\"><a href=\"#万物皆对象\" class=\"headerlink\" title=\"万物皆对象\"></a>万物皆对象</h1><p>在Java的世界里，万物皆对象包括，普通类、接口类、抽象类、枚举类、Record类（JDK14后支持）</p>\n<p>Object 是所有java对象类的公共超父类  ，java.lang.Object    对象是Java对象中最顶层的类，所有的其他对象都是其子类。</p>\n<h1 id=\"类\"><a href=\"#类\" class=\"headerlink\" title=\"类\"></a>类</h1><ul>\n<li>类的定义</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">// 普通类</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">HelloWorld</span> </span>&#123;<br>    <br>    <br>&#125;<br><br><span class=\"hljs-comment\">// 接口类</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">interface</span> <span class=\"hljs-title\">UserService</span></span>&#123;<br>    <br>&#125;<br><br><span class=\"hljs-comment\">// 注解类</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-meta\">@interface</span> Entity&#123;<br>    <br>&#125;<br><br><span class=\"hljs-comment\">// 枚举类</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">enum</span> <span class=\"hljs-title\">Day</span></span>&#123;<br>    Monday,【此处需进一步完善】<br>    Tusday,<br>    Thirsday,<br>    Wensday<br>    Friday,<br>    Sunday,<br>    xxxday<br>   <br>&#125;<br><br><br><br><br></code></pre></td></tr></table></figure>\n\n\n\n\n\n\n\n\n\n<h1 id=\"Java类的特性\"><a href=\"#Java类的特性\" class=\"headerlink\" title=\"Java类的特性\"></a>Java类的特性</h1><h2 id=\"封装\"><a href=\"#封装\" class=\"headerlink\" title=\"封装\"></a>封装</h2><h2 id=\"继承\"><a href=\"#继承\" class=\"headerlink\" title=\"继承\"></a>继承</h2><h2 id=\"多态\"><a href=\"#多态\" class=\"headerlink\" title=\"多态\"></a>多态</h2><h2 id=\"JavaBean\"><a href=\"#JavaBean\" class=\"headerlink\" title=\"JavaBean\"></a>JavaBean</h2><h2 id=\"类的延申\"><a href=\"#类的延申\" class=\"headerlink\" title=\"类的延申\"></a>类的延申</h2><h3 id=\"POJO\"><a href=\"#POJO\" class=\"headerlink\" title=\"POJO\"></a>POJO</h3><h3 id=\"DTO\"><a href=\"#DTO\" class=\"headerlink\" title=\"DTO\"></a>DTO</h3><h3 id=\"VO\"><a href=\"#VO\" class=\"headerlink\" title=\"VO\"></a>VO</h3><h3 id=\"DAO\"><a href=\"#DAO\" class=\"headerlink\" title=\"DAO\"></a>DAO</h3><h1 id=\"this-和super\"><a href=\"#this-和super\" class=\"headerlink\" title=\"this   和super\"></a>this   和super</h1><h1 id=\"对象的生命周期\"><a href=\"#对象的生命周期\" class=\"headerlink\" title=\"对象的生命周期\"></a>对象的生命周期</h1><p>从创建  到销毁的过程</p>\n<p>各方法的执行顺序</p>\n"},{"title":"Java基础-（5）基本数据类型","date":"2018-06-30T15:12:15.000Z","description":"Java基本数据类型","_content":"\n\n\n\n\n\n\n\n\n\n\n\n\n# 1.int\n\n\n\n# 2.short\n\n\n\n# 3.byte\n\n\n\n# 4.long\n\n\n\n# 5. float\n\n\n\n# 6.double\n\n\n\n# 7.char\n\n\n\n# 8. boolean\n\n\n\n\n\n# 拆箱与装箱\n\n\n\n\n\n# String 类的不可变性\n\n# String对象相关的问题\n\n### new   \n\n### 补充\n\n\n\n\n\n","source":"_posts/Java基础-（5）基本数据类型.md","raw":"---\ntitle: Java基础-（5）基本数据类型\ndate: 2018-06-30 23:12:15\ncategories: \"Java\" #文章分類目錄 可以省略\ntags: \n     - Java\ndescription: Java基本数据类型  #本頁的描述 可以省略\n---\n\n\n\n\n\n\n\n\n\n\n\n\n\n# 1.int\n\n\n\n# 2.short\n\n\n\n# 3.byte\n\n\n\n# 4.long\n\n\n\n# 5. float\n\n\n\n# 6.double\n\n\n\n# 7.char\n\n\n\n# 8. boolean\n\n\n\n\n\n# 拆箱与装箱\n\n\n\n\n\n# String 类的不可变性\n\n# String对象相关的问题\n\n### new   \n\n### 补充\n\n\n\n\n\n","slug":"Java基础-（5）基本数据类型","published":1,"updated":"2025-03-26T06:43:52.997Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cm8pr0j2a000kgskz3p65747t","content":"<h1 id=\"1-int\"><a href=\"#1-int\" class=\"headerlink\" title=\"1.int\"></a>1.int</h1><h1 id=\"2-short\"><a href=\"#2-short\" class=\"headerlink\" title=\"2.short\"></a>2.short</h1><h1 id=\"3-byte\"><a href=\"#3-byte\" class=\"headerlink\" title=\"3.byte\"></a>3.byte</h1><h1 id=\"4-long\"><a href=\"#4-long\" class=\"headerlink\" title=\"4.long\"></a>4.long</h1><h1 id=\"5-float\"><a href=\"#5-float\" class=\"headerlink\" title=\"5. float\"></a>5. float</h1><h1 id=\"6-double\"><a href=\"#6-double\" class=\"headerlink\" title=\"6.double\"></a>6.double</h1><h1 id=\"7-char\"><a href=\"#7-char\" class=\"headerlink\" title=\"7.char\"></a>7.char</h1><h1 id=\"8-boolean\"><a href=\"#8-boolean\" class=\"headerlink\" title=\"8. boolean\"></a>8. boolean</h1><h1 id=\"拆箱与装箱\"><a href=\"#拆箱与装箱\" class=\"headerlink\" title=\"拆箱与装箱\"></a>拆箱与装箱</h1><h1 id=\"String-类的不可变性\"><a href=\"#String-类的不可变性\" class=\"headerlink\" title=\"String 类的不可变性\"></a>String 类的不可变性</h1><h1 id=\"String对象相关的问题\"><a href=\"#String对象相关的问题\" class=\"headerlink\" title=\"String对象相关的问题\"></a>String对象相关的问题</h1><h3 id=\"new\"><a href=\"#new\" class=\"headerlink\" title=\"new\"></a>new</h3><h3 id=\"补充\"><a href=\"#补充\" class=\"headerlink\" title=\"补充\"></a>补充</h3>","site":{"data":{}},"excerpt":"","more":"<h1 id=\"1-int\"><a href=\"#1-int\" class=\"headerlink\" title=\"1.int\"></a>1.int</h1><h1 id=\"2-short\"><a href=\"#2-short\" class=\"headerlink\" title=\"2.short\"></a>2.short</h1><h1 id=\"3-byte\"><a href=\"#3-byte\" class=\"headerlink\" title=\"3.byte\"></a>3.byte</h1><h1 id=\"4-long\"><a href=\"#4-long\" class=\"headerlink\" title=\"4.long\"></a>4.long</h1><h1 id=\"5-float\"><a href=\"#5-float\" class=\"headerlink\" title=\"5. float\"></a>5. float</h1><h1 id=\"6-double\"><a href=\"#6-double\" class=\"headerlink\" title=\"6.double\"></a>6.double</h1><h1 id=\"7-char\"><a href=\"#7-char\" class=\"headerlink\" title=\"7.char\"></a>7.char</h1><h1 id=\"8-boolean\"><a href=\"#8-boolean\" class=\"headerlink\" title=\"8. boolean\"></a>8. boolean</h1><h1 id=\"拆箱与装箱\"><a href=\"#拆箱与装箱\" class=\"headerlink\" title=\"拆箱与装箱\"></a>拆箱与装箱</h1><h1 id=\"String-类的不可变性\"><a href=\"#String-类的不可变性\" class=\"headerlink\" title=\"String 类的不可变性\"></a>String 类的不可变性</h1><h1 id=\"String对象相关的问题\"><a href=\"#String对象相关的问题\" class=\"headerlink\" title=\"String对象相关的问题\"></a>String对象相关的问题</h1><h3 id=\"new\"><a href=\"#new\" class=\"headerlink\" title=\"new\"></a>new</h3><h3 id=\"补充\"><a href=\"#补充\" class=\"headerlink\" title=\"补充\"></a>补充</h3>"},{"title":"Java运算符","date":"2018-06-27T12:55:48.000Z","description":"Java基本运算符","_content":"\n\n## java 原码、反码、补码计算 以及取反(~)运算\n\n### 1.原码、反码、补码：\n     (1)在Java中，所有数据的表示方式都是以补码形式来表示\n     (2)正数：原码、反码、补码相同\n     (3)负数：符号位为1，其余各位是对原码取反，然后整个数加1\n     (4)~按位取反（反码加1称为补码。）步骤就是先求出这个数（因为java存的数是补码）的原码，然后对原码取反得到X，这个X就是我们要求的那个数的补码\n\n### 2.取反(~)运算\n     （1）n=37 ，二进制数就是 100101\n     因为在Java中，所有数据的表示方式都是以补码形式来表示，如果没有特别的说明，\n     Java 中的数据类型默认为int，int数据类型的长度为8位，就是32字节，32bit的意思，因此，n=100101的原码=补码（因为是正数，所以原=补=反）运算过程就是：\n     原码：00000000 00000000 00000000 00100101 ＝37\n\n\n     ~n（对n的原码）取反运算得：  11111111 11111111 11111111 11011010很明显，最高位是1，意思是原码为负数，负数的补码是其绝对值的原码取反，末尾再加1，因此，我们可将这个二进制数的补码进行还原：\n     首先，末尾减1得反码：11111111 11111111 11111111 11011001\n     其次，将各位取反得原码：00000000 00000000 00000000 00100110这个就是~n的绝对值形式，|~n|=38   ，\n\n     所以，~n＝－38，这个就是Java虚拟机的运算结果\n\n\n     （2）n=-4，取反 （~-4）\n     -4补码：10000000 00000000 00000000 00000100\n     -4反码：10000000 00000000 00000000 00000011\n     -4原码：11111111 11111111 11111111 11111100\n     对原码取反：00000000 00000000 00000000 00000011  （3）\n     因为是正数，所以补码等于原码等于反码=3，所以~-4=3\n\n\n### Create a new post\n\n``` bash\ndeploy:\n  - type: git\n    repo: # 像这样设置多个 git 仓库，`名称: 地址,分支`，逗号后面没有空格。\n      github: git@github.com:XXXXXX/XXXXXX.git,branch\n      coding: git@git.coding.net:XXXXXXX/XXXXXXX,coding-pages\n    message: Site updated by Hexo at {{ now('YYYY-MM-DD HH:mm:ss') }}.\n  - type: rsync\n    host: YOUR VPS IP # 你的服务器的 IP 地址\n    user: YOUR USERNAME # 你刚刚复制密钥的那个用户\n    root: YOUR DESTINATION # 你想把文件上传到哪里，比如我的是 `~/stackharbor.alynx.xyz/`\n    port: 22 # 这是 ssh 默认的端口，如果你修改了，这里也要改\n    args: --progress # 额外的 rsync 参数，我这里添加了一个进度条参数，你也可以不设置\n    delete: true # 是否删除旧的文件\n    verbose: true # 是否同步时显示详细状态\n    ignore_errors: false # 忽略错误\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/deployment.html)\n\n\n","source":"_posts/Java基础-（7）运算符.md","raw":"---\ntitle: Java运算符\ndate: 2018-06-27 20:55:48\ncategories: \"Java\" #文章分類目錄 可以省略\ntags: #Java \n     - Java\n     - 运算符\ndescription: Java基本运算符  #你對本頁的描述 可以省略\n---\n\n\n## java 原码、反码、补码计算 以及取反(~)运算\n\n### 1.原码、反码、补码：\n     (1)在Java中，所有数据的表示方式都是以补码形式来表示\n     (2)正数：原码、反码、补码相同\n     (3)负数：符号位为1，其余各位是对原码取反，然后整个数加1\n     (4)~按位取反（反码加1称为补码。）步骤就是先求出这个数（因为java存的数是补码）的原码，然后对原码取反得到X，这个X就是我们要求的那个数的补码\n\n### 2.取反(~)运算\n     （1）n=37 ，二进制数就是 100101\n     因为在Java中，所有数据的表示方式都是以补码形式来表示，如果没有特别的说明，\n     Java 中的数据类型默认为int，int数据类型的长度为8位，就是32字节，32bit的意思，因此，n=100101的原码=补码（因为是正数，所以原=补=反）运算过程就是：\n     原码：00000000 00000000 00000000 00100101 ＝37\n\n\n     ~n（对n的原码）取反运算得：  11111111 11111111 11111111 11011010很明显，最高位是1，意思是原码为负数，负数的补码是其绝对值的原码取反，末尾再加1，因此，我们可将这个二进制数的补码进行还原：\n     首先，末尾减1得反码：11111111 11111111 11111111 11011001\n     其次，将各位取反得原码：00000000 00000000 00000000 00100110这个就是~n的绝对值形式，|~n|=38   ，\n\n     所以，~n＝－38，这个就是Java虚拟机的运算结果\n\n\n     （2）n=-4，取反 （~-4）\n     -4补码：10000000 00000000 00000000 00000100\n     -4反码：10000000 00000000 00000000 00000011\n     -4原码：11111111 11111111 11111111 11111100\n     对原码取反：00000000 00000000 00000000 00000011  （3）\n     因为是正数，所以补码等于原码等于反码=3，所以~-4=3\n\n\n### Create a new post\n\n``` bash\ndeploy:\n  - type: git\n    repo: # 像这样设置多个 git 仓库，`名称: 地址,分支`，逗号后面没有空格。\n      github: git@github.com:XXXXXX/XXXXXX.git,branch\n      coding: git@git.coding.net:XXXXXXX/XXXXXXX,coding-pages\n    message: Site updated by Hexo at {{ now('YYYY-MM-DD HH:mm:ss') }}.\n  - type: rsync\n    host: YOUR VPS IP # 你的服务器的 IP 地址\n    user: YOUR USERNAME # 你刚刚复制密钥的那个用户\n    root: YOUR DESTINATION # 你想把文件上传到哪里，比如我的是 `~/stackharbor.alynx.xyz/`\n    port: 22 # 这是 ssh 默认的端口，如果你修改了，这里也要改\n    args: --progress # 额外的 rsync 参数，我这里添加了一个进度条参数，你也可以不设置\n    delete: true # 是否删除旧的文件\n    verbose: true # 是否同步时显示详细状态\n    ignore_errors: false # 忽略错误\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/deployment.html)\n\n\n","slug":"Java基础-（7）运算符","published":1,"updated":"2025-03-26T06:43:52.998Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cm8pr0j2a000mgskzetap93fp","content":"<h2 id=\"java-原码、反码、补码计算-以及取反-运算\"><a href=\"#java-原码、反码、补码计算-以及取反-运算\" class=\"headerlink\" title=\"java 原码、反码、补码计算 以及取反(~)运算\"></a>java 原码、反码、补码计算 以及取反(~)运算</h2><h3 id=\"1-原码、反码、补码：\"><a href=\"#1-原码、反码、补码：\" class=\"headerlink\" title=\"1.原码、反码、补码：\"></a>1.原码、反码、补码：</h3><pre><code> (1)在Java中，所有数据的表示方式都是以补码形式来表示\n (2)正数：原码、反码、补码相同\n (3)负数：符号位为1，其余各位是对原码取反，然后整个数加1\n (4)~按位取反（反码加1称为补码。）步骤就是先求出这个数（因为java存的数是补码）的原码，然后对原码取反得到X，这个X就是我们要求的那个数的补码\n</code></pre>\n<h3 id=\"2-取反-运算\"><a href=\"#2-取反-运算\" class=\"headerlink\" title=\"2.取反(~)运算\"></a>2.取反(~)运算</h3><pre><code> （1）n=37 ，二进制数就是 100101\n 因为在Java中，所有数据的表示方式都是以补码形式来表示，如果没有特别的说明，\n Java 中的数据类型默认为int，int数据类型的长度为8位，就是32字节，32bit的意思，因此，n=100101的原码=补码（因为是正数，所以原=补=反）运算过程就是：\n 原码：00000000 00000000 00000000 00100101 ＝37\n\n\n ~n（对n的原码）取反运算得：  11111111 11111111 11111111 11011010很明显，最高位是1，意思是原码为负数，负数的补码是其绝对值的原码取反，末尾再加1，因此，我们可将这个二进制数的补码进行还原：\n 首先，末尾减1得反码：11111111 11111111 11111111 11011001\n 其次，将各位取反得原码：00000000 00000000 00000000 00100110这个就是~n的绝对值形式，|~n|=38   ，\n\n 所以，~n＝－38，这个就是Java虚拟机的运算结果\n\n\n （2）n=-4，取反 （~-4）\n -4补码：10000000 00000000 00000000 00000100\n -4反码：10000000 00000000 00000000 00000011\n -4原码：11111111 11111111 11111111 11111100\n 对原码取反：00000000 00000000 00000000 00000011  （3）\n 因为是正数，所以补码等于原码等于反码=3，所以~-4=3\n</code></pre>\n<h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">deploy:<br>  - <span class=\"hljs-built_in\">type</span>: git<br>    repo: <span class=\"hljs-comment\"># 像这样设置多个 git 仓库，`名称: 地址,分支`，逗号后面没有空格。</span><br>      github: git@github.com:XXXXXX/XXXXXX.git,branch<br>      coding: git@git.coding.net:XXXXXXX/XXXXXXX,coding-pages<br>    message: Site updated by Hexo at &#123;&#123; now(<span class=\"hljs-string\">&#x27;YYYY-MM-DD HH:mm:ss&#x27;</span>) &#125;&#125;.<br>  - <span class=\"hljs-built_in\">type</span>: rsync<br>    host: YOUR VPS IP <span class=\"hljs-comment\"># 你的服务器的 IP 地址</span><br>    user: YOUR USERNAME <span class=\"hljs-comment\"># 你刚刚复制密钥的那个用户</span><br>    root: YOUR DESTINATION <span class=\"hljs-comment\"># 你想把文件上传到哪里，比如我的是 `~/stackharbor.alynx.xyz/`</span><br>    port: 22 <span class=\"hljs-comment\"># 这是 ssh 默认的端口，如果你修改了，这里也要改</span><br>    args: --progress <span class=\"hljs-comment\"># 额外的 rsync 参数，我这里添加了一个进度条参数，你也可以不设置</span><br>    delete: <span class=\"hljs-literal\">true</span> <span class=\"hljs-comment\"># 是否删除旧的文件</span><br>    verbose: <span class=\"hljs-literal\">true</span> <span class=\"hljs-comment\"># 是否同步时显示详细状态</span><br>    ignore_errors: <span class=\"hljs-literal\">false</span> <span class=\"hljs-comment\"># 忽略错误</span><br></code></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">$ hexo server<br></code></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/server.html\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">$ hexo generate<br></code></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">$ hexo deploy<br></code></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/deployment.html\">Deployment</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"java-原码、反码、补码计算-以及取反-运算\"><a href=\"#java-原码、反码、补码计算-以及取反-运算\" class=\"headerlink\" title=\"java 原码、反码、补码计算 以及取反(~)运算\"></a>java 原码、反码、补码计算 以及取反(~)运算</h2><h3 id=\"1-原码、反码、补码：\"><a href=\"#1-原码、反码、补码：\" class=\"headerlink\" title=\"1.原码、反码、补码：\"></a>1.原码、反码、补码：</h3><pre><code> (1)在Java中，所有数据的表示方式都是以补码形式来表示\n (2)正数：原码、反码、补码相同\n (3)负数：符号位为1，其余各位是对原码取反，然后整个数加1\n (4)~按位取反（反码加1称为补码。）步骤就是先求出这个数（因为java存的数是补码）的原码，然后对原码取反得到X，这个X就是我们要求的那个数的补码\n</code></pre>\n<h3 id=\"2-取反-运算\"><a href=\"#2-取反-运算\" class=\"headerlink\" title=\"2.取反(~)运算\"></a>2.取反(~)运算</h3><pre><code> （1）n=37 ，二进制数就是 100101\n 因为在Java中，所有数据的表示方式都是以补码形式来表示，如果没有特别的说明，\n Java 中的数据类型默认为int，int数据类型的长度为8位，就是32字节，32bit的意思，因此，n=100101的原码=补码（因为是正数，所以原=补=反）运算过程就是：\n 原码：00000000 00000000 00000000 00100101 ＝37\n\n\n ~n（对n的原码）取反运算得：  11111111 11111111 11111111 11011010很明显，最高位是1，意思是原码为负数，负数的补码是其绝对值的原码取反，末尾再加1，因此，我们可将这个二进制数的补码进行还原：\n 首先，末尾减1得反码：11111111 11111111 11111111 11011001\n 其次，将各位取反得原码：00000000 00000000 00000000 00100110这个就是~n的绝对值形式，|~n|=38   ，\n\n 所以，~n＝－38，这个就是Java虚拟机的运算结果\n\n\n （2）n=-4，取反 （~-4）\n -4补码：10000000 00000000 00000000 00000100\n -4反码：10000000 00000000 00000000 00000011\n -4原码：11111111 11111111 11111111 11111100\n 对原码取反：00000000 00000000 00000000 00000011  （3）\n 因为是正数，所以补码等于原码等于反码=3，所以~-4=3\n</code></pre>\n<h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">deploy:<br>  - <span class=\"hljs-built_in\">type</span>: git<br>    repo: <span class=\"hljs-comment\"># 像这样设置多个 git 仓库，`名称: 地址,分支`，逗号后面没有空格。</span><br>      github: git@github.com:XXXXXX/XXXXXX.git,branch<br>      coding: git@git.coding.net:XXXXXXX/XXXXXXX,coding-pages<br>    message: Site updated by Hexo at &#123;&#123; now(<span class=\"hljs-string\">&#x27;YYYY-MM-DD HH:mm:ss&#x27;</span>) &#125;&#125;.<br>  - <span class=\"hljs-built_in\">type</span>: rsync<br>    host: YOUR VPS IP <span class=\"hljs-comment\"># 你的服务器的 IP 地址</span><br>    user: YOUR USERNAME <span class=\"hljs-comment\"># 你刚刚复制密钥的那个用户</span><br>    root: YOUR DESTINATION <span class=\"hljs-comment\"># 你想把文件上传到哪里，比如我的是 `~/stackharbor.alynx.xyz/`</span><br>    port: 22 <span class=\"hljs-comment\"># 这是 ssh 默认的端口，如果你修改了，这里也要改</span><br>    args: --progress <span class=\"hljs-comment\"># 额外的 rsync 参数，我这里添加了一个进度条参数，你也可以不设置</span><br>    delete: <span class=\"hljs-literal\">true</span> <span class=\"hljs-comment\"># 是否删除旧的文件</span><br>    verbose: <span class=\"hljs-literal\">true</span> <span class=\"hljs-comment\"># 是否同步时显示详细状态</span><br>    ignore_errors: <span class=\"hljs-literal\">false</span> <span class=\"hljs-comment\"># 忽略错误</span><br></code></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">$ hexo server<br></code></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/server.html\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">$ hexo generate<br></code></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">$ hexo deploy<br></code></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/deployment.html\">Deployment</a></p>\n"},{"title":"Java基础-（8）执行结构（顺序、循环、条件）","date":"2018-06-27T12:55:48.000Z","description":"Java基本执行结构（顺序、循环、条件）","_content":"\n\n\n\n\n# 循环\n\n\n\nfor\n\n\n\nforeach\n\n\n\n\n\n# 条件\n\n- if  else\n\n- while \n\n- switch  case default\n\n\n\n- continue\n\n- break\n\n\n\n\n\n# 递归\n\n- 自己调用自己\n\n\n\n\n\n# goto\n\n- 不建议使用\n\n\n\n","source":"_posts/Java基础-（8）执行结构（顺序、循环、条件）.md","raw":"---\ntitle: Java基础-（8）执行结构（顺序、循环、条件）\ndate: 2018-06-27 20:55:48\ncategories: \"Java\" #文章分類目錄 可以省略\ntags:  \n     - Java\ndescription: Java基本执行结构（顺序、循环、条件）  #你對本頁的描述 可以省略\n---\n\n\n\n\n\n# 循环\n\n\n\nfor\n\n\n\nforeach\n\n\n\n\n\n# 条件\n\n- if  else\n\n- while \n\n- switch  case default\n\n\n\n- continue\n\n- break\n\n\n\n\n\n# 递归\n\n- 自己调用自己\n\n\n\n\n\n# goto\n\n- 不建议使用\n\n\n\n","slug":"Java基础-（8）执行结构（顺序、循环、条件）","published":1,"updated":"2025-03-26T06:43:52.998Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cm8pr0j2b000rgskz2ley4nvj","content":"<h1 id=\"循环\"><a href=\"#循环\" class=\"headerlink\" title=\"循环\"></a>循环</h1><p>for</p>\n<p>foreach</p>\n<h1 id=\"条件\"><a href=\"#条件\" class=\"headerlink\" title=\"条件\"></a>条件</h1><ul>\n<li><p>if  else</p>\n</li>\n<li><p>while </p>\n</li>\n<li><p>switch  case default</p>\n</li>\n</ul>\n<ul>\n<li><p>continue</p>\n</li>\n<li><p>break</p>\n</li>\n</ul>\n<h1 id=\"递归\"><a href=\"#递归\" class=\"headerlink\" title=\"递归\"></a>递归</h1><ul>\n<li>自己调用自己</li>\n</ul>\n<h1 id=\"goto\"><a href=\"#goto\" class=\"headerlink\" title=\"goto\"></a>goto</h1><ul>\n<li>不建议使用</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"循环\"><a href=\"#循环\" class=\"headerlink\" title=\"循环\"></a>循环</h1><p>for</p>\n<p>foreach</p>\n<h1 id=\"条件\"><a href=\"#条件\" class=\"headerlink\" title=\"条件\"></a>条件</h1><ul>\n<li><p>if  else</p>\n</li>\n<li><p>while </p>\n</li>\n<li><p>switch  case default</p>\n</li>\n</ul>\n<ul>\n<li><p>continue</p>\n</li>\n<li><p>break</p>\n</li>\n</ul>\n<h1 id=\"递归\"><a href=\"#递归\" class=\"headerlink\" title=\"递归\"></a>递归</h1><ul>\n<li>自己调用自己</li>\n</ul>\n<h1 id=\"goto\"><a href=\"#goto\" class=\"headerlink\" title=\"goto\"></a>goto</h1><ul>\n<li>不建议使用</li>\n</ul>\n"},{"title":"Java之23种设计模式深入理解","date":"2019-11-25T07:55:48.000Z","description":"Java23种设计模式","_content":"# 设计模式（Design Pattern）\n\n设计模式（Design pattern）是一套被反复使用、多数人知晓的、经过分类编目的、代码设计经验的总结。使用设计模式是为了可重用代码、让代码更容易被他人理解、保证代码可靠性。 毫无疑问，设计模式于己于他人于系统都是多赢的，设计模式使代码编制真正工程化，设计模式是软件工程的基石，如同大厦的一块块砖石一样。项目中合理的运用设计模式可以完美的解决很多问题，每种模式在现在中都有相应的原理来与之对应，每一个模式描述了一个在我们周围不断重复发生的问题，以及该问题的核心解决方案，这也是它能被广泛应用的原因。\n\n<!--  - 本章系Java之美[从菜鸟到高手演变]系列之设计模式，我们会以理论与实践相结合的方式来进行本章的学习，希望广大程序爱好者，学好设计模式，做一个优秀的软件工程师！-->\n\n\n#  一、设计模式的分类\n\n- 总体来说设计模式分为三大类：\n\n## 创建型模式，\n- 共五种：工厂方法模式、抽象工厂模式、单例模式、建造者模式、原型模式。\n\n## 结构型模式\n- 共七种：适配器模式、装饰器模式、代理模式、外观模式、桥接模式、组合模式、享元模式。\n\n## 行为型模式\n- 共十一种：策略模式、模板方法模式、观察者模式、迭代子模式、责任链模式、命令模式、备忘录模式、状态模式、访问者模式、中介者模式、解释器模式。\n\n### 其他模式\n- 其实还有两类：并发型模式和线程池模式。用一个图片来整体描述一下：\n![设计模式之间的关系](/Blog/static/image/20191125/RelationshipBetweenDesignPattern.jpg)\n\n<!--  http://www.itmayun.com/upload_files/files/1/subject/995726589692643/1.jpg  -->\n\n# 二、设计模式的六大原则\n\n## 1、开闭原则（Open Close Principle）\n- 开闭原则就是说对扩展开放，对修改关闭。在程序需要进行拓展的时候，不能去修改原有的代码，实现一个热插拔的效果。所以一句话概括就是：为了使程序的扩展性好，易于维护和升级。想要达到这样的效果，我们需要使用接口和抽象类，后面的具体设计中我们会提到这点。\n\n##  2、里氏代换原则（Liskov Substitution Principle）\n- 里氏代换原则(Liskov Substitution Principle LSP)面向对象设计的基本原则之一。 里氏代换原则中说，任何基类可以出现的地方，子类一定可以出现。 LSP是继承复用的基石，只有当衍生类可以替换掉基类，软件单位的功能不受到影响时，基类才能真正被复用，而衍生类也能够在基类的基础上增加新的行为。里氏代换原则是对“开-闭”原则的补充。实现“开-闭”原则的关键步骤就是抽象化。而基类与子类的继承关系就是抽象化的具体实现，所以里氏代换原则是对实现抽象化的具体步骤的规范。\n\n##  3、依赖倒转原则（Dependence Inversion Principle）\n- 这个是开闭原则的基础，具体内容：真对接口编程，依赖于抽象而不依赖于具体。\n\n##  4、接口隔离原则（Interface Segregation Principle）\n- 这个原则的意思是：使用多个隔离的接口，比使用单个接口要好。还是一个降低类之间的耦合度的意思，从这儿我们看出，其实设计模式就是一个软件的设计思想，从大型软件架构出发，为了升级和维护方便。所以上文中多次出现：降低依赖，降低耦合。\n\n##  5、迪米特法则（最少知道原则）（Demeter Principle）\n- 最少知道原则，就是说：一个实体应当尽量少的与其他实体之间发生相互作用，使得系统功能模块相对独立。\n\n## 6、合成复用原则（Composite Reuse Principle）\n- 原则是尽量使用合成/聚合的方式，而不是使用继承。\n\n\n# 模式分类Demo源码\n- 参考：http://www.cnblogs.com/foryang/p/5849402.html\n- 以下是学习过程中查询到的资料,比较容易理解(毕竟站在巨人的肩膀上...)\n\n## 创建型\n- 抽象工厂模式 http://www.cnblogs.com/java-my-life/archive/2012/03/28/2418836.html\n- 工厂方法 http://www.cnblogs.com/java-my-life/archive/2012/03/25/2416227.html\n- 建造者模式  http://www.cnblogs.com/java-my-life/archive/2012/04/07/2433939.html\n- 原型模式 http://www.cnblogs.com/java-my-life/archive/2012/04/11/2439387.html\n- 单态模式 http://www.cnblogs.com/java-my-life/archive/2012/03/31/2425631.html\n\n## 结构型\n\n- 适配器模式 http://www.cnblogs.com/java-my-life/archive/2012/04/13/2442795.html\n- 桥接模式 http://blog.csdn.net/jason0539/article/details/22568865\n- 组合模式 http://blog.csdn.net/jason0539/article/details/22642281\n- 外观模式 http://blog.csdn.net/jason0539/article/details/22775311\n- 装饰者模式 http://www.cnblogs.com/java-my-life/archive/2012/04/20/2455726.html\n- 享元模式 http://www.cnblogs.com/java-my-life/archive/2012/04/26/2468499.html\n- 代理模式 http://www.cnblogs.com/java-my-life/archive/2012/04/23/2466712.html\n\n## 行为型\n\n- 责任链模式 http://blog.csdn.net/zhouyong0/article/details/7909456\n- 命令模式 http://www.cnblogs.com/java-my-life/archive/2012/06/01/2526972.html\n- 解释器模式 http://www.cnblogs.com/java-my-life/archive/2012/06/19/2552617.html\n- 迭代模式 http://www.cnblogs.com/java-my-life/archive/2012/05/22/2511506.html\n- 中介者模式 http://blog.csdn.net/chenhuade85/article/details/8141831\n- 备忘录模式 http://www.cnblogs.com/java-my-life/archive/2012/06/06/2534942.html\n- 观察者模式 http://www.cnblogs.com/java-my-life/archive/2012/05/16/2502279.html\n- 状态模式 http://www.cnblogs.com/java-my-life/archive/2012/06/08/2538146.html\n- 策略模式 http://www.cnblogs.com/java-my-life/archive/2012/05/10/2491891.html\n- 模板方法模式 http://www.cnblogs.com/java-my-life/archive/2012/05/14/2495235.html\n- 访问者模式 http://www.cnblogs.com/java-my-life/archive/2012/06/14/2545381.html\n\n## 题外: http://www.ourlove1314.com/\n\n\n## 设计模式学习资料汇总\n- [我的设计模式Demo代码](https://gitee.com/ACANX/ACANX-JavaSEBase/tree/master/ACANX-JavaSE-Core/src/main/java/com/acanx/designpattern)\n- [Java 23种设计模式 深入理解](https://acanx.gitee.io/blog/2018/07/12/Java%2023%E7%A7%8D%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/) \n- [feixiao/DesignPattern](https://github.com/feixiao/DesignPattern/tree/master/Java)\n- [设计模式-菜鸟教程](https://www.runoob.com/design-pattern/design-pattern-tutorial.html)\n- [bjmashibing/DesignPatterns](https://github.com/bjmashibing/DesignPatterns)\n- [非常全的23种设计模式详解，收藏了](https://blog.csdn.net/u013829202/article/details/52513029)\n- [《Spring 5企业级开发实战》-设计模式源码](https://github.com/online-demo/spring5projectdemo/tree/master/chapter20/src/main/java/com/test)\n- [设计模式-C语言中文网](http://c.biancheng.net/view/1364.html)\n- [设计模式总结](https://www.cnblogs.com/chenssy/p/3357683.html)\n","source":"_posts/Java学习之23种设计模式深入理解.md","raw":"---\ntitle: Java之23种设计模式深入理解\ndate: 2019-11-25 15:55:48\ncategories: \"Java\" \ntags: #Java \n     - Java\n     - 设计模式\ndescription: Java23种设计模式  \n---\n# 设计模式（Design Pattern）\n\n设计模式（Design pattern）是一套被反复使用、多数人知晓的、经过分类编目的、代码设计经验的总结。使用设计模式是为了可重用代码、让代码更容易被他人理解、保证代码可靠性。 毫无疑问，设计模式于己于他人于系统都是多赢的，设计模式使代码编制真正工程化，设计模式是软件工程的基石，如同大厦的一块块砖石一样。项目中合理的运用设计模式可以完美的解决很多问题，每种模式在现在中都有相应的原理来与之对应，每一个模式描述了一个在我们周围不断重复发生的问题，以及该问题的核心解决方案，这也是它能被广泛应用的原因。\n\n<!--  - 本章系Java之美[从菜鸟到高手演变]系列之设计模式，我们会以理论与实践相结合的方式来进行本章的学习，希望广大程序爱好者，学好设计模式，做一个优秀的软件工程师！-->\n\n\n#  一、设计模式的分类\n\n- 总体来说设计模式分为三大类：\n\n## 创建型模式，\n- 共五种：工厂方法模式、抽象工厂模式、单例模式、建造者模式、原型模式。\n\n## 结构型模式\n- 共七种：适配器模式、装饰器模式、代理模式、外观模式、桥接模式、组合模式、享元模式。\n\n## 行为型模式\n- 共十一种：策略模式、模板方法模式、观察者模式、迭代子模式、责任链模式、命令模式、备忘录模式、状态模式、访问者模式、中介者模式、解释器模式。\n\n### 其他模式\n- 其实还有两类：并发型模式和线程池模式。用一个图片来整体描述一下：\n![设计模式之间的关系](/Blog/static/image/20191125/RelationshipBetweenDesignPattern.jpg)\n\n<!--  http://www.itmayun.com/upload_files/files/1/subject/995726589692643/1.jpg  -->\n\n# 二、设计模式的六大原则\n\n## 1、开闭原则（Open Close Principle）\n- 开闭原则就是说对扩展开放，对修改关闭。在程序需要进行拓展的时候，不能去修改原有的代码，实现一个热插拔的效果。所以一句话概括就是：为了使程序的扩展性好，易于维护和升级。想要达到这样的效果，我们需要使用接口和抽象类，后面的具体设计中我们会提到这点。\n\n##  2、里氏代换原则（Liskov Substitution Principle）\n- 里氏代换原则(Liskov Substitution Principle LSP)面向对象设计的基本原则之一。 里氏代换原则中说，任何基类可以出现的地方，子类一定可以出现。 LSP是继承复用的基石，只有当衍生类可以替换掉基类，软件单位的功能不受到影响时，基类才能真正被复用，而衍生类也能够在基类的基础上增加新的行为。里氏代换原则是对“开-闭”原则的补充。实现“开-闭”原则的关键步骤就是抽象化。而基类与子类的继承关系就是抽象化的具体实现，所以里氏代换原则是对实现抽象化的具体步骤的规范。\n\n##  3、依赖倒转原则（Dependence Inversion Principle）\n- 这个是开闭原则的基础，具体内容：真对接口编程，依赖于抽象而不依赖于具体。\n\n##  4、接口隔离原则（Interface Segregation Principle）\n- 这个原则的意思是：使用多个隔离的接口，比使用单个接口要好。还是一个降低类之间的耦合度的意思，从这儿我们看出，其实设计模式就是一个软件的设计思想，从大型软件架构出发，为了升级和维护方便。所以上文中多次出现：降低依赖，降低耦合。\n\n##  5、迪米特法则（最少知道原则）（Demeter Principle）\n- 最少知道原则，就是说：一个实体应当尽量少的与其他实体之间发生相互作用，使得系统功能模块相对独立。\n\n## 6、合成复用原则（Composite Reuse Principle）\n- 原则是尽量使用合成/聚合的方式，而不是使用继承。\n\n\n# 模式分类Demo源码\n- 参考：http://www.cnblogs.com/foryang/p/5849402.html\n- 以下是学习过程中查询到的资料,比较容易理解(毕竟站在巨人的肩膀上...)\n\n## 创建型\n- 抽象工厂模式 http://www.cnblogs.com/java-my-life/archive/2012/03/28/2418836.html\n- 工厂方法 http://www.cnblogs.com/java-my-life/archive/2012/03/25/2416227.html\n- 建造者模式  http://www.cnblogs.com/java-my-life/archive/2012/04/07/2433939.html\n- 原型模式 http://www.cnblogs.com/java-my-life/archive/2012/04/11/2439387.html\n- 单态模式 http://www.cnblogs.com/java-my-life/archive/2012/03/31/2425631.html\n\n## 结构型\n\n- 适配器模式 http://www.cnblogs.com/java-my-life/archive/2012/04/13/2442795.html\n- 桥接模式 http://blog.csdn.net/jason0539/article/details/22568865\n- 组合模式 http://blog.csdn.net/jason0539/article/details/22642281\n- 外观模式 http://blog.csdn.net/jason0539/article/details/22775311\n- 装饰者模式 http://www.cnblogs.com/java-my-life/archive/2012/04/20/2455726.html\n- 享元模式 http://www.cnblogs.com/java-my-life/archive/2012/04/26/2468499.html\n- 代理模式 http://www.cnblogs.com/java-my-life/archive/2012/04/23/2466712.html\n\n## 行为型\n\n- 责任链模式 http://blog.csdn.net/zhouyong0/article/details/7909456\n- 命令模式 http://www.cnblogs.com/java-my-life/archive/2012/06/01/2526972.html\n- 解释器模式 http://www.cnblogs.com/java-my-life/archive/2012/06/19/2552617.html\n- 迭代模式 http://www.cnblogs.com/java-my-life/archive/2012/05/22/2511506.html\n- 中介者模式 http://blog.csdn.net/chenhuade85/article/details/8141831\n- 备忘录模式 http://www.cnblogs.com/java-my-life/archive/2012/06/06/2534942.html\n- 观察者模式 http://www.cnblogs.com/java-my-life/archive/2012/05/16/2502279.html\n- 状态模式 http://www.cnblogs.com/java-my-life/archive/2012/06/08/2538146.html\n- 策略模式 http://www.cnblogs.com/java-my-life/archive/2012/05/10/2491891.html\n- 模板方法模式 http://www.cnblogs.com/java-my-life/archive/2012/05/14/2495235.html\n- 访问者模式 http://www.cnblogs.com/java-my-life/archive/2012/06/14/2545381.html\n\n## 题外: http://www.ourlove1314.com/\n\n\n## 设计模式学习资料汇总\n- [我的设计模式Demo代码](https://gitee.com/ACANX/ACANX-JavaSEBase/tree/master/ACANX-JavaSE-Core/src/main/java/com/acanx/designpattern)\n- [Java 23种设计模式 深入理解](https://acanx.gitee.io/blog/2018/07/12/Java%2023%E7%A7%8D%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/) \n- [feixiao/DesignPattern](https://github.com/feixiao/DesignPattern/tree/master/Java)\n- [设计模式-菜鸟教程](https://www.runoob.com/design-pattern/design-pattern-tutorial.html)\n- [bjmashibing/DesignPatterns](https://github.com/bjmashibing/DesignPatterns)\n- [非常全的23种设计模式详解，收藏了](https://blog.csdn.net/u013829202/article/details/52513029)\n- [《Spring 5企业级开发实战》-设计模式源码](https://github.com/online-demo/spring5projectdemo/tree/master/chapter20/src/main/java/com/test)\n- [设计模式-C语言中文网](http://c.biancheng.net/view/1364.html)\n- [设计模式总结](https://www.cnblogs.com/chenssy/p/3357683.html)\n","slug":"Java学习之23种设计模式深入理解","published":1,"updated":"2025-03-26T06:43:52.999Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cm8pr0j2c000tgskza0guf3x3","content":"<h1 id=\"设计模式（Design-Pattern）\"><a href=\"#设计模式（Design-Pattern）\" class=\"headerlink\" title=\"设计模式（Design Pattern）\"></a>设计模式（Design Pattern）</h1><p>设计模式（Design pattern）是一套被反复使用、多数人知晓的、经过分类编目的、代码设计经验的总结。使用设计模式是为了可重用代码、让代码更容易被他人理解、保证代码可靠性。 毫无疑问，设计模式于己于他人于系统都是多赢的，设计模式使代码编制真正工程化，设计模式是软件工程的基石，如同大厦的一块块砖石一样。项目中合理的运用设计模式可以完美的解决很多问题，每种模式在现在中都有相应的原理来与之对应，每一个模式描述了一个在我们周围不断重复发生的问题，以及该问题的核心解决方案，这也是它能被广泛应用的原因。</p>\n<!--  - 本章系Java之美[从菜鸟到高手演变]系列之设计模式，我们会以理论与实践相结合的方式来进行本章的学习，希望广大程序爱好者，学好设计模式，做一个优秀的软件工程师！-->\n\n\n<h1 id=\"一、设计模式的分类\"><a href=\"#一、设计模式的分类\" class=\"headerlink\" title=\"一、设计模式的分类\"></a>一、设计模式的分类</h1><ul>\n<li>总体来说设计模式分为三大类：</li>\n</ul>\n<h2 id=\"创建型模式，\"><a href=\"#创建型模式，\" class=\"headerlink\" title=\"创建型模式，\"></a>创建型模式，</h2><ul>\n<li>共五种：工厂方法模式、抽象工厂模式、单例模式、建造者模式、原型模式。</li>\n</ul>\n<h2 id=\"结构型模式\"><a href=\"#结构型模式\" class=\"headerlink\" title=\"结构型模式\"></a>结构型模式</h2><ul>\n<li>共七种：适配器模式、装饰器模式、代理模式、外观模式、桥接模式、组合模式、享元模式。</li>\n</ul>\n<h2 id=\"行为型模式\"><a href=\"#行为型模式\" class=\"headerlink\" title=\"行为型模式\"></a>行为型模式</h2><ul>\n<li>共十一种：策略模式、模板方法模式、观察者模式、迭代子模式、责任链模式、命令模式、备忘录模式、状态模式、访问者模式、中介者模式、解释器模式。</li>\n</ul>\n<h3 id=\"其他模式\"><a href=\"#其他模式\" class=\"headerlink\" title=\"其他模式\"></a>其他模式</h3><ul>\n<li>其实还有两类：并发型模式和线程池模式。用一个图片来整体描述一下：<br><img src=\"/Blog/static/image/20191125/RelationshipBetweenDesignPattern.jpg\" alt=\"设计模式之间的关系\"></li>\n</ul>\n<!--  http://www.itmayun.com/upload_files/files/1/subject/995726589692643/1.jpg  -->\n\n<h1 id=\"二、设计模式的六大原则\"><a href=\"#二、设计模式的六大原则\" class=\"headerlink\" title=\"二、设计模式的六大原则\"></a>二、设计模式的六大原则</h1><h2 id=\"1、开闭原则（Open-Close-Principle）\"><a href=\"#1、开闭原则（Open-Close-Principle）\" class=\"headerlink\" title=\"1、开闭原则（Open Close Principle）\"></a>1、开闭原则（Open Close Principle）</h2><ul>\n<li>开闭原则就是说对扩展开放，对修改关闭。在程序需要进行拓展的时候，不能去修改原有的代码，实现一个热插拔的效果。所以一句话概括就是：为了使程序的扩展性好，易于维护和升级。想要达到这样的效果，我们需要使用接口和抽象类，后面的具体设计中我们会提到这点。</li>\n</ul>\n<h2 id=\"2、里氏代换原则（Liskov-Substitution-Principle）\"><a href=\"#2、里氏代换原则（Liskov-Substitution-Principle）\" class=\"headerlink\" title=\"2、里氏代换原则（Liskov Substitution Principle）\"></a>2、里氏代换原则（Liskov Substitution Principle）</h2><ul>\n<li>里氏代换原则(Liskov Substitution Principle LSP)面向对象设计的基本原则之一。 里氏代换原则中说，任何基类可以出现的地方，子类一定可以出现。 LSP是继承复用的基石，只有当衍生类可以替换掉基类，软件单位的功能不受到影响时，基类才能真正被复用，而衍生类也能够在基类的基础上增加新的行为。里氏代换原则是对“开-闭”原则的补充。实现“开-闭”原则的关键步骤就是抽象化。而基类与子类的继承关系就是抽象化的具体实现，所以里氏代换原则是对实现抽象化的具体步骤的规范。</li>\n</ul>\n<h2 id=\"3、依赖倒转原则（Dependence-Inversion-Principle）\"><a href=\"#3、依赖倒转原则（Dependence-Inversion-Principle）\" class=\"headerlink\" title=\"3、依赖倒转原则（Dependence Inversion Principle）\"></a>3、依赖倒转原则（Dependence Inversion Principle）</h2><ul>\n<li>这个是开闭原则的基础，具体内容：真对接口编程，依赖于抽象而不依赖于具体。</li>\n</ul>\n<h2 id=\"4、接口隔离原则（Interface-Segregation-Principle）\"><a href=\"#4、接口隔离原则（Interface-Segregation-Principle）\" class=\"headerlink\" title=\"4、接口隔离原则（Interface Segregation Principle）\"></a>4、接口隔离原则（Interface Segregation Principle）</h2><ul>\n<li>这个原则的意思是：使用多个隔离的接口，比使用单个接口要好。还是一个降低类之间的耦合度的意思，从这儿我们看出，其实设计模式就是一个软件的设计思想，从大型软件架构出发，为了升级和维护方便。所以上文中多次出现：降低依赖，降低耦合。</li>\n</ul>\n<h2 id=\"5、迪米特法则（最少知道原则）（Demeter-Principle）\"><a href=\"#5、迪米特法则（最少知道原则）（Demeter-Principle）\" class=\"headerlink\" title=\"5、迪米特法则（最少知道原则）（Demeter Principle）\"></a>5、迪米特法则（最少知道原则）（Demeter Principle）</h2><ul>\n<li>最少知道原则，就是说：一个实体应当尽量少的与其他实体之间发生相互作用，使得系统功能模块相对独立。</li>\n</ul>\n<h2 id=\"6、合成复用原则（Composite-Reuse-Principle）\"><a href=\"#6、合成复用原则（Composite-Reuse-Principle）\" class=\"headerlink\" title=\"6、合成复用原则（Composite Reuse Principle）\"></a>6、合成复用原则（Composite Reuse Principle）</h2><ul>\n<li>原则是尽量使用合成/聚合的方式，而不是使用继承。</li>\n</ul>\n<h1 id=\"模式分类Demo源码\"><a href=\"#模式分类Demo源码\" class=\"headerlink\" title=\"模式分类Demo源码\"></a>模式分类Demo源码</h1><ul>\n<li>参考：<a href=\"http://www.cnblogs.com/foryang/p/5849402.html\">http://www.cnblogs.com/foryang/p/5849402.html</a></li>\n<li>以下是学习过程中查询到的资料,比较容易理解(毕竟站在巨人的肩膀上…)</li>\n</ul>\n<h2 id=\"创建型\"><a href=\"#创建型\" class=\"headerlink\" title=\"创建型\"></a>创建型</h2><ul>\n<li>抽象工厂模式 <a href=\"http://www.cnblogs.com/java-my-life/archive/2012/03/28/2418836.html\">http://www.cnblogs.com/java-my-life/archive/2012/03/28/2418836.html</a></li>\n<li>工厂方法 <a href=\"http://www.cnblogs.com/java-my-life/archive/2012/03/25/2416227.html\">http://www.cnblogs.com/java-my-life/archive/2012/03/25/2416227.html</a></li>\n<li>建造者模式  <a href=\"http://www.cnblogs.com/java-my-life/archive/2012/04/07/2433939.html\">http://www.cnblogs.com/java-my-life/archive/2012/04/07/2433939.html</a></li>\n<li>原型模式 <a href=\"http://www.cnblogs.com/java-my-life/archive/2012/04/11/2439387.html\">http://www.cnblogs.com/java-my-life/archive/2012/04/11/2439387.html</a></li>\n<li>单态模式 <a href=\"http://www.cnblogs.com/java-my-life/archive/2012/03/31/2425631.html\">http://www.cnblogs.com/java-my-life/archive/2012/03/31/2425631.html</a></li>\n</ul>\n<h2 id=\"结构型\"><a href=\"#结构型\" class=\"headerlink\" title=\"结构型\"></a>结构型</h2><ul>\n<li>适配器模式 <a href=\"http://www.cnblogs.com/java-my-life/archive/2012/04/13/2442795.html\">http://www.cnblogs.com/java-my-life/archive/2012/04/13/2442795.html</a></li>\n<li>桥接模式 <a href=\"http://blog.csdn.net/jason0539/article/details/22568865\">http://blog.csdn.net/jason0539/article/details/22568865</a></li>\n<li>组合模式 <a href=\"http://blog.csdn.net/jason0539/article/details/22642281\">http://blog.csdn.net/jason0539/article/details/22642281</a></li>\n<li>外观模式 <a href=\"http://blog.csdn.net/jason0539/article/details/22775311\">http://blog.csdn.net/jason0539/article/details/22775311</a></li>\n<li>装饰者模式 <a href=\"http://www.cnblogs.com/java-my-life/archive/2012/04/20/2455726.html\">http://www.cnblogs.com/java-my-life/archive/2012/04/20/2455726.html</a></li>\n<li>享元模式 <a href=\"http://www.cnblogs.com/java-my-life/archive/2012/04/26/2468499.html\">http://www.cnblogs.com/java-my-life/archive/2012/04/26/2468499.html</a></li>\n<li>代理模式 <a href=\"http://www.cnblogs.com/java-my-life/archive/2012/04/23/2466712.html\">http://www.cnblogs.com/java-my-life/archive/2012/04/23/2466712.html</a></li>\n</ul>\n<h2 id=\"行为型\"><a href=\"#行为型\" class=\"headerlink\" title=\"行为型\"></a>行为型</h2><ul>\n<li>责任链模式 <a href=\"http://blog.csdn.net/zhouyong0/article/details/7909456\">http://blog.csdn.net/zhouyong0/article/details/7909456</a></li>\n<li>命令模式 <a href=\"http://www.cnblogs.com/java-my-life/archive/2012/06/01/2526972.html\">http://www.cnblogs.com/java-my-life/archive/2012/06/01/2526972.html</a></li>\n<li>解释器模式 <a href=\"http://www.cnblogs.com/java-my-life/archive/2012/06/19/2552617.html\">http://www.cnblogs.com/java-my-life/archive/2012/06/19/2552617.html</a></li>\n<li>迭代模式 <a href=\"http://www.cnblogs.com/java-my-life/archive/2012/05/22/2511506.html\">http://www.cnblogs.com/java-my-life/archive/2012/05/22/2511506.html</a></li>\n<li>中介者模式 <a href=\"http://blog.csdn.net/chenhuade85/article/details/8141831\">http://blog.csdn.net/chenhuade85/article/details/8141831</a></li>\n<li>备忘录模式 <a href=\"http://www.cnblogs.com/java-my-life/archive/2012/06/06/2534942.html\">http://www.cnblogs.com/java-my-life/archive/2012/06/06/2534942.html</a></li>\n<li>观察者模式 <a href=\"http://www.cnblogs.com/java-my-life/archive/2012/05/16/2502279.html\">http://www.cnblogs.com/java-my-life/archive/2012/05/16/2502279.html</a></li>\n<li>状态模式 <a href=\"http://www.cnblogs.com/java-my-life/archive/2012/06/08/2538146.html\">http://www.cnblogs.com/java-my-life/archive/2012/06/08/2538146.html</a></li>\n<li>策略模式 <a href=\"http://www.cnblogs.com/java-my-life/archive/2012/05/10/2491891.html\">http://www.cnblogs.com/java-my-life/archive/2012/05/10/2491891.html</a></li>\n<li>模板方法模式 <a href=\"http://www.cnblogs.com/java-my-life/archive/2012/05/14/2495235.html\">http://www.cnblogs.com/java-my-life/archive/2012/05/14/2495235.html</a></li>\n<li>访问者模式 <a href=\"http://www.cnblogs.com/java-my-life/archive/2012/06/14/2545381.html\">http://www.cnblogs.com/java-my-life/archive/2012/06/14/2545381.html</a></li>\n</ul>\n<h2 id=\"题外-http-www-ourlove1314-com\"><a href=\"#题外-http-www-ourlove1314-com\" class=\"headerlink\" title=\"题外: http://www.ourlove1314.com/\"></a>题外: <a href=\"http://www.ourlove1314.com/\">http://www.ourlove1314.com/</a></h2><h2 id=\"设计模式学习资料汇总\"><a href=\"#设计模式学习资料汇总\" class=\"headerlink\" title=\"设计模式学习资料汇总\"></a>设计模式学习资料汇总</h2><ul>\n<li><a href=\"https://gitee.com/ACANX/ACANX-JavaSEBase/tree/master/ACANX-JavaSE-Core/src/main/java/com/acanx/designpattern\">我的设计模式Demo代码</a></li>\n<li><a href=\"https://acanx.gitee.io/blog/2018/07/12/Java%2023%E7%A7%8D%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/\">Java 23种设计模式 深入理解</a> </li>\n<li><a href=\"https://github.com/feixiao/DesignPattern/tree/master/Java\">feixiao/DesignPattern</a></li>\n<li><a href=\"https://www.runoob.com/design-pattern/design-pattern-tutorial.html\">设计模式-菜鸟教程</a></li>\n<li><a href=\"https://github.com/bjmashibing/DesignPatterns\">bjmashibing/DesignPatterns</a></li>\n<li><a href=\"https://blog.csdn.net/u013829202/article/details/52513029\">非常全的23种设计模式详解，收藏了</a></li>\n<li><a href=\"https://github.com/online-demo/spring5projectdemo/tree/master/chapter20/src/main/java/com/test\">《Spring 5企业级开发实战》-设计模式源码</a></li>\n<li><a href=\"http://c.biancheng.net/view/1364.html\">设计模式-C语言中文网</a></li>\n<li><a href=\"https://www.cnblogs.com/chenssy/p/3357683.html\">设计模式总结</a></li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"设计模式（Design-Pattern）\"><a href=\"#设计模式（Design-Pattern）\" class=\"headerlink\" title=\"设计模式（Design Pattern）\"></a>设计模式（Design Pattern）</h1><p>设计模式（Design pattern）是一套被反复使用、多数人知晓的、经过分类编目的、代码设计经验的总结。使用设计模式是为了可重用代码、让代码更容易被他人理解、保证代码可靠性。 毫无疑问，设计模式于己于他人于系统都是多赢的，设计模式使代码编制真正工程化，设计模式是软件工程的基石，如同大厦的一块块砖石一样。项目中合理的运用设计模式可以完美的解决很多问题，每种模式在现在中都有相应的原理来与之对应，每一个模式描述了一个在我们周围不断重复发生的问题，以及该问题的核心解决方案，这也是它能被广泛应用的原因。</p>\n<!--  - 本章系Java之美[从菜鸟到高手演变]系列之设计模式，我们会以理论与实践相结合的方式来进行本章的学习，希望广大程序爱好者，学好设计模式，做一个优秀的软件工程师！-->\n\n\n<h1 id=\"一、设计模式的分类\"><a href=\"#一、设计模式的分类\" class=\"headerlink\" title=\"一、设计模式的分类\"></a>一、设计模式的分类</h1><ul>\n<li>总体来说设计模式分为三大类：</li>\n</ul>\n<h2 id=\"创建型模式，\"><a href=\"#创建型模式，\" class=\"headerlink\" title=\"创建型模式，\"></a>创建型模式，</h2><ul>\n<li>共五种：工厂方法模式、抽象工厂模式、单例模式、建造者模式、原型模式。</li>\n</ul>\n<h2 id=\"结构型模式\"><a href=\"#结构型模式\" class=\"headerlink\" title=\"结构型模式\"></a>结构型模式</h2><ul>\n<li>共七种：适配器模式、装饰器模式、代理模式、外观模式、桥接模式、组合模式、享元模式。</li>\n</ul>\n<h2 id=\"行为型模式\"><a href=\"#行为型模式\" class=\"headerlink\" title=\"行为型模式\"></a>行为型模式</h2><ul>\n<li>共十一种：策略模式、模板方法模式、观察者模式、迭代子模式、责任链模式、命令模式、备忘录模式、状态模式、访问者模式、中介者模式、解释器模式。</li>\n</ul>\n<h3 id=\"其他模式\"><a href=\"#其他模式\" class=\"headerlink\" title=\"其他模式\"></a>其他模式</h3><ul>\n<li>其实还有两类：并发型模式和线程池模式。用一个图片来整体描述一下：<br><img src=\"/Blog/static/image/20191125/RelationshipBetweenDesignPattern.jpg\" alt=\"设计模式之间的关系\"></li>\n</ul>\n<!--  http://www.itmayun.com/upload_files/files/1/subject/995726589692643/1.jpg  -->\n\n<h1 id=\"二、设计模式的六大原则\"><a href=\"#二、设计模式的六大原则\" class=\"headerlink\" title=\"二、设计模式的六大原则\"></a>二、设计模式的六大原则</h1><h2 id=\"1、开闭原则（Open-Close-Principle）\"><a href=\"#1、开闭原则（Open-Close-Principle）\" class=\"headerlink\" title=\"1、开闭原则（Open Close Principle）\"></a>1、开闭原则（Open Close Principle）</h2><ul>\n<li>开闭原则就是说对扩展开放，对修改关闭。在程序需要进行拓展的时候，不能去修改原有的代码，实现一个热插拔的效果。所以一句话概括就是：为了使程序的扩展性好，易于维护和升级。想要达到这样的效果，我们需要使用接口和抽象类，后面的具体设计中我们会提到这点。</li>\n</ul>\n<h2 id=\"2、里氏代换原则（Liskov-Substitution-Principle）\"><a href=\"#2、里氏代换原则（Liskov-Substitution-Principle）\" class=\"headerlink\" title=\"2、里氏代换原则（Liskov Substitution Principle）\"></a>2、里氏代换原则（Liskov Substitution Principle）</h2><ul>\n<li>里氏代换原则(Liskov Substitution Principle LSP)面向对象设计的基本原则之一。 里氏代换原则中说，任何基类可以出现的地方，子类一定可以出现。 LSP是继承复用的基石，只有当衍生类可以替换掉基类，软件单位的功能不受到影响时，基类才能真正被复用，而衍生类也能够在基类的基础上增加新的行为。里氏代换原则是对“开-闭”原则的补充。实现“开-闭”原则的关键步骤就是抽象化。而基类与子类的继承关系就是抽象化的具体实现，所以里氏代换原则是对实现抽象化的具体步骤的规范。</li>\n</ul>\n<h2 id=\"3、依赖倒转原则（Dependence-Inversion-Principle）\"><a href=\"#3、依赖倒转原则（Dependence-Inversion-Principle）\" class=\"headerlink\" title=\"3、依赖倒转原则（Dependence Inversion Principle）\"></a>3、依赖倒转原则（Dependence Inversion Principle）</h2><ul>\n<li>这个是开闭原则的基础，具体内容：真对接口编程，依赖于抽象而不依赖于具体。</li>\n</ul>\n<h2 id=\"4、接口隔离原则（Interface-Segregation-Principle）\"><a href=\"#4、接口隔离原则（Interface-Segregation-Principle）\" class=\"headerlink\" title=\"4、接口隔离原则（Interface Segregation Principle）\"></a>4、接口隔离原则（Interface Segregation Principle）</h2><ul>\n<li>这个原则的意思是：使用多个隔离的接口，比使用单个接口要好。还是一个降低类之间的耦合度的意思，从这儿我们看出，其实设计模式就是一个软件的设计思想，从大型软件架构出发，为了升级和维护方便。所以上文中多次出现：降低依赖，降低耦合。</li>\n</ul>\n<h2 id=\"5、迪米特法则（最少知道原则）（Demeter-Principle）\"><a href=\"#5、迪米特法则（最少知道原则）（Demeter-Principle）\" class=\"headerlink\" title=\"5、迪米特法则（最少知道原则）（Demeter Principle）\"></a>5、迪米特法则（最少知道原则）（Demeter Principle）</h2><ul>\n<li>最少知道原则，就是说：一个实体应当尽量少的与其他实体之间发生相互作用，使得系统功能模块相对独立。</li>\n</ul>\n<h2 id=\"6、合成复用原则（Composite-Reuse-Principle）\"><a href=\"#6、合成复用原则（Composite-Reuse-Principle）\" class=\"headerlink\" title=\"6、合成复用原则（Composite Reuse Principle）\"></a>6、合成复用原则（Composite Reuse Principle）</h2><ul>\n<li>原则是尽量使用合成/聚合的方式，而不是使用继承。</li>\n</ul>\n<h1 id=\"模式分类Demo源码\"><a href=\"#模式分类Demo源码\" class=\"headerlink\" title=\"模式分类Demo源码\"></a>模式分类Demo源码</h1><ul>\n<li>参考：<a href=\"http://www.cnblogs.com/foryang/p/5849402.html\">http://www.cnblogs.com/foryang/p/5849402.html</a></li>\n<li>以下是学习过程中查询到的资料,比较容易理解(毕竟站在巨人的肩膀上…)</li>\n</ul>\n<h2 id=\"创建型\"><a href=\"#创建型\" class=\"headerlink\" title=\"创建型\"></a>创建型</h2><ul>\n<li>抽象工厂模式 <a href=\"http://www.cnblogs.com/java-my-life/archive/2012/03/28/2418836.html\">http://www.cnblogs.com/java-my-life/archive/2012/03/28/2418836.html</a></li>\n<li>工厂方法 <a href=\"http://www.cnblogs.com/java-my-life/archive/2012/03/25/2416227.html\">http://www.cnblogs.com/java-my-life/archive/2012/03/25/2416227.html</a></li>\n<li>建造者模式  <a href=\"http://www.cnblogs.com/java-my-life/archive/2012/04/07/2433939.html\">http://www.cnblogs.com/java-my-life/archive/2012/04/07/2433939.html</a></li>\n<li>原型模式 <a href=\"http://www.cnblogs.com/java-my-life/archive/2012/04/11/2439387.html\">http://www.cnblogs.com/java-my-life/archive/2012/04/11/2439387.html</a></li>\n<li>单态模式 <a href=\"http://www.cnblogs.com/java-my-life/archive/2012/03/31/2425631.html\">http://www.cnblogs.com/java-my-life/archive/2012/03/31/2425631.html</a></li>\n</ul>\n<h2 id=\"结构型\"><a href=\"#结构型\" class=\"headerlink\" title=\"结构型\"></a>结构型</h2><ul>\n<li>适配器模式 <a href=\"http://www.cnblogs.com/java-my-life/archive/2012/04/13/2442795.html\">http://www.cnblogs.com/java-my-life/archive/2012/04/13/2442795.html</a></li>\n<li>桥接模式 <a href=\"http://blog.csdn.net/jason0539/article/details/22568865\">http://blog.csdn.net/jason0539/article/details/22568865</a></li>\n<li>组合模式 <a href=\"http://blog.csdn.net/jason0539/article/details/22642281\">http://blog.csdn.net/jason0539/article/details/22642281</a></li>\n<li>外观模式 <a href=\"http://blog.csdn.net/jason0539/article/details/22775311\">http://blog.csdn.net/jason0539/article/details/22775311</a></li>\n<li>装饰者模式 <a href=\"http://www.cnblogs.com/java-my-life/archive/2012/04/20/2455726.html\">http://www.cnblogs.com/java-my-life/archive/2012/04/20/2455726.html</a></li>\n<li>享元模式 <a href=\"http://www.cnblogs.com/java-my-life/archive/2012/04/26/2468499.html\">http://www.cnblogs.com/java-my-life/archive/2012/04/26/2468499.html</a></li>\n<li>代理模式 <a href=\"http://www.cnblogs.com/java-my-life/archive/2012/04/23/2466712.html\">http://www.cnblogs.com/java-my-life/archive/2012/04/23/2466712.html</a></li>\n</ul>\n<h2 id=\"行为型\"><a href=\"#行为型\" class=\"headerlink\" title=\"行为型\"></a>行为型</h2><ul>\n<li>责任链模式 <a href=\"http://blog.csdn.net/zhouyong0/article/details/7909456\">http://blog.csdn.net/zhouyong0/article/details/7909456</a></li>\n<li>命令模式 <a href=\"http://www.cnblogs.com/java-my-life/archive/2012/06/01/2526972.html\">http://www.cnblogs.com/java-my-life/archive/2012/06/01/2526972.html</a></li>\n<li>解释器模式 <a href=\"http://www.cnblogs.com/java-my-life/archive/2012/06/19/2552617.html\">http://www.cnblogs.com/java-my-life/archive/2012/06/19/2552617.html</a></li>\n<li>迭代模式 <a href=\"http://www.cnblogs.com/java-my-life/archive/2012/05/22/2511506.html\">http://www.cnblogs.com/java-my-life/archive/2012/05/22/2511506.html</a></li>\n<li>中介者模式 <a href=\"http://blog.csdn.net/chenhuade85/article/details/8141831\">http://blog.csdn.net/chenhuade85/article/details/8141831</a></li>\n<li>备忘录模式 <a href=\"http://www.cnblogs.com/java-my-life/archive/2012/06/06/2534942.html\">http://www.cnblogs.com/java-my-life/archive/2012/06/06/2534942.html</a></li>\n<li>观察者模式 <a href=\"http://www.cnblogs.com/java-my-life/archive/2012/05/16/2502279.html\">http://www.cnblogs.com/java-my-life/archive/2012/05/16/2502279.html</a></li>\n<li>状态模式 <a href=\"http://www.cnblogs.com/java-my-life/archive/2012/06/08/2538146.html\">http://www.cnblogs.com/java-my-life/archive/2012/06/08/2538146.html</a></li>\n<li>策略模式 <a href=\"http://www.cnblogs.com/java-my-life/archive/2012/05/10/2491891.html\">http://www.cnblogs.com/java-my-life/archive/2012/05/10/2491891.html</a></li>\n<li>模板方法模式 <a href=\"http://www.cnblogs.com/java-my-life/archive/2012/05/14/2495235.html\">http://www.cnblogs.com/java-my-life/archive/2012/05/14/2495235.html</a></li>\n<li>访问者模式 <a href=\"http://www.cnblogs.com/java-my-life/archive/2012/06/14/2545381.html\">http://www.cnblogs.com/java-my-life/archive/2012/06/14/2545381.html</a></li>\n</ul>\n<h2 id=\"题外-http-www-ourlove1314-com\"><a href=\"#题外-http-www-ourlove1314-com\" class=\"headerlink\" title=\"题外: http://www.ourlove1314.com/\"></a>题外: <a href=\"http://www.ourlove1314.com/\">http://www.ourlove1314.com/</a></h2><h2 id=\"设计模式学习资料汇总\"><a href=\"#设计模式学习资料汇总\" class=\"headerlink\" title=\"设计模式学习资料汇总\"></a>设计模式学习资料汇总</h2><ul>\n<li><a href=\"https://gitee.com/ACANX/ACANX-JavaSEBase/tree/master/ACANX-JavaSE-Core/src/main/java/com/acanx/designpattern\">我的设计模式Demo代码</a></li>\n<li><a href=\"https://acanx.gitee.io/blog/2018/07/12/Java%2023%E7%A7%8D%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/\">Java 23种设计模式 深入理解</a> </li>\n<li><a href=\"https://github.com/feixiao/DesignPattern/tree/master/Java\">feixiao/DesignPattern</a></li>\n<li><a href=\"https://www.runoob.com/design-pattern/design-pattern-tutorial.html\">设计模式-菜鸟教程</a></li>\n<li><a href=\"https://github.com/bjmashibing/DesignPatterns\">bjmashibing/DesignPatterns</a></li>\n<li><a href=\"https://blog.csdn.net/u013829202/article/details/52513029\">非常全的23种设计模式详解，收藏了</a></li>\n<li><a href=\"https://github.com/online-demo/spring5projectdemo/tree/master/chapter20/src/main/java/com/test\">《Spring 5企业级开发实战》-设计模式源码</a></li>\n<li><a href=\"http://c.biancheng.net/view/1364.html\">设计模式-C语言中文网</a></li>\n<li><a href=\"https://www.cnblogs.com/chenssy/p/3357683.html\">设计模式总结</a></li>\n</ul>\n"},{"title":"Markdown文章样式HTML","date":"2018-09-22T12:55:48.000Z","description":"MyBatis中JavaBean 与MySQL的table字段自动映射","_content":"\n\n\n---\n\n\n# MyBatis自动映射\n\n 在简单的场景下，MyBatis可以替你自动映射查询结果。 如果遇到复杂的场景，你需要构建一个result map。 但是在这里你将看到，你也可以混合使用这两种策略。 \n我们再深入看看自动映射是怎样工作的。当自动映射查询结果时，MyBatis会获取sql返回的列名并在java类中查找相同名字的属性（忽略大小写）。 这意味着如果Mybatis发现了ID列和id属性，Mybatis会将ID的值赋给id。通常数据库列使用大写单词命名，单词间用下划线分隔；而java属性一般遵循驼峰命名法。 为了在这两种命名方式之间启用自动映射，需要将 mapUnderscoreToCamelCase设置为true。自动映射甚至在特定的result map下也能工作。在这种情况下，对于每一个result map,所有的ResultSet提供的列， 如果没有被手工映射，则将被自动映射。自动映射处理完毕后手工映射才会被处理。 在接下来的例子中， id 和 userName列将被自动映射， hashed_password 列将根据配置映射。\n\n\n### UserMapper.xml中的配置：\n```xml\n <resultMap id=\"userResultMap\" type=\"User\">\n  <result property=\"password\" column=\"hash_password\" />\n  <result column=\"gmt_create\" jdbcType=\"TIMESTAMP\" property=\"gmtCreate\" javaType=\"java.util.Date\" />\n  <result column=\"gmt_modified\" jdbcType=\"TIMESTAMP\" property=\"gmtModified\" javaType=\"java.util.Date\" />\n </resultMap>\n```\n\n\n\n### mybatis-config.xml中的配置：\n```xml\n<configuration>     \n <settings>       \n  <setting name=\"mapUnderscoreToCamelCase\" value=\"true\" />\n </settings>  \n</configuration>\n```\n\n\n\n# 标题一\n\n## 标题二\n\n\n## 英语听力考试试音时间\n\n小车正穿行在洛基山脉蜿蜒曲折的盘山公路上，克里朵托夫里维静静地看着窗外，发现车子每当行驶到无路的关头，\n\n路边都会出现一块交通指示牌：“前方转弯”或写着“注意急转弯”。而转过每一道弯道之后前方照例又是一片柳暗花明、豁然开朗。\n\n山路弯弯、峰回路转，“前方转弯”几个大字一次次冲击着他的眼球，也渐渐敲醒了他的心扉。\n\n原来不是路已到了尽头，而是该转弯了……路在脚下，更在心中，心随路转，心路常宽。\n\n学会转弯也是人生的智慧，因为挫折往往是转折，危机同时是转机。\n\n### 代码样式\n\n\n### Create a new post\n\n#### 四级标题\n\n\n\n\n\n# Markdown中实现首行缩进的两种方法\n\n### 方法1\n半方大的空白&ensp;或&#8194;\n### 方法2\n全方大的空白&emsp;或&#8195;\n### 方法3\n不断行的空白格&nbsp;或&#160;\n\n---\n\n&emsp;&emsp;量子霸权的实现，将是量子计算发展的一座重要里程碑，代表「量子计算的超强计算能力」自 37 年前提出以来首次从理论走进实验，标志一个新的计算能力飞跃时代的开始。近年来，随着「实现量子霸权」的日益临近，「称霸标准」成为量子计算领域最重要的科学问题之一。\n\n我国科学家最早开启了「称霸标准」问题的研究。最近，《国家科学评论》（National Science Review）以「A Benchmark Test of Boson Sampling on Tianhe-2 Supercomputer」为题正式发表了国防科技大学吴俊杰团队与上海交通大学金贤敏教授的合作研究成果，报道了玻色采样案例的「称霸标准」。","source":"_posts/MyBatis中JavaBean 与MySQL的table字段自动映射.md","raw":"---\ntitle: Markdown文章样式HTML\ndate: 2018-09-22 20:55:48\ncategories: \"默认\" #文章分類目錄 可以省略\ntags: #Java \n     - MyBatis\n     - JavaBean\n     - MySQL\n     - 自动映射\ndescription: MyBatis中JavaBean 与MySQL的table字段自动映射\n---\n\n\n\n---\n\n\n# MyBatis自动映射\n\n 在简单的场景下，MyBatis可以替你自动映射查询结果。 如果遇到复杂的场景，你需要构建一个result map。 但是在这里你将看到，你也可以混合使用这两种策略。 \n我们再深入看看自动映射是怎样工作的。当自动映射查询结果时，MyBatis会获取sql返回的列名并在java类中查找相同名字的属性（忽略大小写）。 这意味着如果Mybatis发现了ID列和id属性，Mybatis会将ID的值赋给id。通常数据库列使用大写单词命名，单词间用下划线分隔；而java属性一般遵循驼峰命名法。 为了在这两种命名方式之间启用自动映射，需要将 mapUnderscoreToCamelCase设置为true。自动映射甚至在特定的result map下也能工作。在这种情况下，对于每一个result map,所有的ResultSet提供的列， 如果没有被手工映射，则将被自动映射。自动映射处理完毕后手工映射才会被处理。 在接下来的例子中， id 和 userName列将被自动映射， hashed_password 列将根据配置映射。\n\n\n### UserMapper.xml中的配置：\n```xml\n <resultMap id=\"userResultMap\" type=\"User\">\n  <result property=\"password\" column=\"hash_password\" />\n  <result column=\"gmt_create\" jdbcType=\"TIMESTAMP\" property=\"gmtCreate\" javaType=\"java.util.Date\" />\n  <result column=\"gmt_modified\" jdbcType=\"TIMESTAMP\" property=\"gmtModified\" javaType=\"java.util.Date\" />\n </resultMap>\n```\n\n\n\n### mybatis-config.xml中的配置：\n```xml\n<configuration>     \n <settings>       \n  <setting name=\"mapUnderscoreToCamelCase\" value=\"true\" />\n </settings>  \n</configuration>\n```\n\n\n\n# 标题一\n\n## 标题二\n\n\n## 英语听力考试试音时间\n\n小车正穿行在洛基山脉蜿蜒曲折的盘山公路上，克里朵托夫里维静静地看着窗外，发现车子每当行驶到无路的关头，\n\n路边都会出现一块交通指示牌：“前方转弯”或写着“注意急转弯”。而转过每一道弯道之后前方照例又是一片柳暗花明、豁然开朗。\n\n山路弯弯、峰回路转，“前方转弯”几个大字一次次冲击着他的眼球，也渐渐敲醒了他的心扉。\n\n原来不是路已到了尽头，而是该转弯了……路在脚下，更在心中，心随路转，心路常宽。\n\n学会转弯也是人生的智慧，因为挫折往往是转折，危机同时是转机。\n\n### 代码样式\n\n\n### Create a new post\n\n#### 四级标题\n\n\n\n\n\n# Markdown中实现首行缩进的两种方法\n\n### 方法1\n半方大的空白&ensp;或&#8194;\n### 方法2\n全方大的空白&emsp;或&#8195;\n### 方法3\n不断行的空白格&nbsp;或&#160;\n\n---\n\n&emsp;&emsp;量子霸权的实现，将是量子计算发展的一座重要里程碑，代表「量子计算的超强计算能力」自 37 年前提出以来首次从理论走进实验，标志一个新的计算能力飞跃时代的开始。近年来，随着「实现量子霸权」的日益临近，「称霸标准」成为量子计算领域最重要的科学问题之一。\n\n我国科学家最早开启了「称霸标准」问题的研究。最近，《国家科学评论》（National Science Review）以「A Benchmark Test of Boson Sampling on Tianhe-2 Supercomputer」为题正式发表了国防科技大学吴俊杰团队与上海交通大学金贤敏教授的合作研究成果，报道了玻色采样案例的「称霸标准」。","slug":"MyBatis中JavaBean 与MySQL的table字段自动映射","published":1,"updated":"2025-03-26T06:43:53.001Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cm8pr0j2d000ygskzg0p9au61","content":"<hr>\n<h1 id=\"MyBatis自动映射\"><a href=\"#MyBatis自动映射\" class=\"headerlink\" title=\"MyBatis自动映射\"></a>MyBatis自动映射</h1><p> 在简单的场景下，MyBatis可以替你自动映射查询结果。 如果遇到复杂的场景，你需要构建一个result map。 但是在这里你将看到，你也可以混合使用这两种策略。<br>我们再深入看看自动映射是怎样工作的。当自动映射查询结果时，MyBatis会获取sql返回的列名并在java类中查找相同名字的属性（忽略大小写）。 这意味着如果Mybatis发现了ID列和id属性，Mybatis会将ID的值赋给id。通常数据库列使用大写单词命名，单词间用下划线分隔；而java属性一般遵循驼峰命名法。 为了在这两种命名方式之间启用自动映射，需要将 mapUnderscoreToCamelCase设置为true。自动映射甚至在特定的result map下也能工作。在这种情况下，对于每一个result map,所有的ResultSet提供的列， 如果没有被手工映射，则将被自动映射。自动映射处理完毕后手工映射才会被处理。 在接下来的例子中， id 和 userName列将被自动映射， hashed_password 列将根据配置映射。</p>\n<h3 id=\"UserMapper-xml中的配置：\"><a href=\"#UserMapper-xml中的配置：\" class=\"headerlink\" title=\"UserMapper.xml中的配置：\"></a>UserMapper.xml中的配置：</h3><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">resultMap</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;userResultMap&quot;</span> <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">&quot;User&quot;</span>&gt;</span><br> <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">result</span> <span class=\"hljs-attr\">property</span>=<span class=\"hljs-string\">&quot;password&quot;</span> <span class=\"hljs-attr\">column</span>=<span class=\"hljs-string\">&quot;hash_password&quot;</span> /&gt;</span><br> <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">result</span> <span class=\"hljs-attr\">column</span>=<span class=\"hljs-string\">&quot;gmt_create&quot;</span> <span class=\"hljs-attr\">jdbcType</span>=<span class=\"hljs-string\">&quot;TIMESTAMP&quot;</span> <span class=\"hljs-attr\">property</span>=<span class=\"hljs-string\">&quot;gmtCreate&quot;</span> <span class=\"hljs-attr\">javaType</span>=<span class=\"hljs-string\">&quot;java.util.Date&quot;</span> /&gt;</span><br> <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">result</span> <span class=\"hljs-attr\">column</span>=<span class=\"hljs-string\">&quot;gmt_modified&quot;</span> <span class=\"hljs-attr\">jdbcType</span>=<span class=\"hljs-string\">&quot;TIMESTAMP&quot;</span> <span class=\"hljs-attr\">property</span>=<span class=\"hljs-string\">&quot;gmtModified&quot;</span> <span class=\"hljs-attr\">javaType</span>=<span class=\"hljs-string\">&quot;java.util.Date&quot;</span> /&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">resultMap</span>&gt;</span><br></code></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"mybatis-config-xml中的配置：\"><a href=\"#mybatis-config-xml中的配置：\" class=\"headerlink\" title=\"mybatis-config.xml中的配置：\"></a>mybatis-config.xml中的配置：</h3><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">configuration</span>&gt;</span>     <br> <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">settings</span>&gt;</span>       <br>  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">setting</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;mapUnderscoreToCamelCase&quot;</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">&quot;true&quot;</span> /&gt;</span><br> <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">settings</span>&gt;</span>  <br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">configuration</span>&gt;</span><br></code></pre></td></tr></table></figure>\n\n\n\n<h1 id=\"标题一\"><a href=\"#标题一\" class=\"headerlink\" title=\"标题一\"></a>标题一</h1><h2 id=\"标题二\"><a href=\"#标题二\" class=\"headerlink\" title=\"标题二\"></a>标题二</h2><h2 id=\"英语听力考试试音时间\"><a href=\"#英语听力考试试音时间\" class=\"headerlink\" title=\"英语听力考试试音时间\"></a>英语听力考试试音时间</h2><p>小车正穿行在洛基山脉蜿蜒曲折的盘山公路上，克里朵托夫里维静静地看着窗外，发现车子每当行驶到无路的关头，</p>\n<p>路边都会出现一块交通指示牌：“前方转弯”或写着“注意急转弯”。而转过每一道弯道之后前方照例又是一片柳暗花明、豁然开朗。</p>\n<p>山路弯弯、峰回路转，“前方转弯”几个大字一次次冲击着他的眼球，也渐渐敲醒了他的心扉。</p>\n<p>原来不是路已到了尽头，而是该转弯了……路在脚下，更在心中，心随路转，心路常宽。</p>\n<p>学会转弯也是人生的智慧，因为挫折往往是转折，危机同时是转机。</p>\n<h3 id=\"代码样式\"><a href=\"#代码样式\" class=\"headerlink\" title=\"代码样式\"></a>代码样式</h3><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><h4 id=\"四级标题\"><a href=\"#四级标题\" class=\"headerlink\" title=\"四级标题\"></a>四级标题</h4><h1 id=\"Markdown中实现首行缩进的两种方法\"><a href=\"#Markdown中实现首行缩进的两种方法\" class=\"headerlink\" title=\"Markdown中实现首行缩进的两种方法\"></a>Markdown中实现首行缩进的两种方法</h1><h3 id=\"方法1\"><a href=\"#方法1\" class=\"headerlink\" title=\"方法1\"></a>方法1</h3><p>半方大的空白&ensp;或&#8194;</p>\n<h3 id=\"方法2\"><a href=\"#方法2\" class=\"headerlink\" title=\"方法2\"></a>方法2</h3><p>全方大的空白&emsp;或&#8195;</p>\n<h3 id=\"方法3\"><a href=\"#方法3\" class=\"headerlink\" title=\"方法3\"></a>方法3</h3><p>不断行的空白格&nbsp;或&#160;</p>\n<hr>\n<p>&emsp;&emsp;量子霸权的实现，将是量子计算发展的一座重要里程碑，代表「量子计算的超强计算能力」自 37 年前提出以来首次从理论走进实验，标志一个新的计算能力飞跃时代的开始。近年来，随着「实现量子霸权」的日益临近，「称霸标准」成为量子计算领域最重要的科学问题之一。</p>\n<p>我国科学家最早开启了「称霸标准」问题的研究。最近，《国家科学评论》（National Science Review）以「A Benchmark Test of Boson Sampling on Tianhe-2 Supercomputer」为题正式发表了国防科技大学吴俊杰团队与上海交通大学金贤敏教授的合作研究成果，报道了玻色采样案例的「称霸标准」。</p>\n","site":{"data":{}},"excerpt":"","more":"<hr>\n<h1 id=\"MyBatis自动映射\"><a href=\"#MyBatis自动映射\" class=\"headerlink\" title=\"MyBatis自动映射\"></a>MyBatis自动映射</h1><p> 在简单的场景下，MyBatis可以替你自动映射查询结果。 如果遇到复杂的场景，你需要构建一个result map。 但是在这里你将看到，你也可以混合使用这两种策略。<br>我们再深入看看自动映射是怎样工作的。当自动映射查询结果时，MyBatis会获取sql返回的列名并在java类中查找相同名字的属性（忽略大小写）。 这意味着如果Mybatis发现了ID列和id属性，Mybatis会将ID的值赋给id。通常数据库列使用大写单词命名，单词间用下划线分隔；而java属性一般遵循驼峰命名法。 为了在这两种命名方式之间启用自动映射，需要将 mapUnderscoreToCamelCase设置为true。自动映射甚至在特定的result map下也能工作。在这种情况下，对于每一个result map,所有的ResultSet提供的列， 如果没有被手工映射，则将被自动映射。自动映射处理完毕后手工映射才会被处理。 在接下来的例子中， id 和 userName列将被自动映射， hashed_password 列将根据配置映射。</p>\n<h3 id=\"UserMapper-xml中的配置：\"><a href=\"#UserMapper-xml中的配置：\" class=\"headerlink\" title=\"UserMapper.xml中的配置：\"></a>UserMapper.xml中的配置：</h3><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">resultMap</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;userResultMap&quot;</span> <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">&quot;User&quot;</span>&gt;</span><br> <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">result</span> <span class=\"hljs-attr\">property</span>=<span class=\"hljs-string\">&quot;password&quot;</span> <span class=\"hljs-attr\">column</span>=<span class=\"hljs-string\">&quot;hash_password&quot;</span> /&gt;</span><br> <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">result</span> <span class=\"hljs-attr\">column</span>=<span class=\"hljs-string\">&quot;gmt_create&quot;</span> <span class=\"hljs-attr\">jdbcType</span>=<span class=\"hljs-string\">&quot;TIMESTAMP&quot;</span> <span class=\"hljs-attr\">property</span>=<span class=\"hljs-string\">&quot;gmtCreate&quot;</span> <span class=\"hljs-attr\">javaType</span>=<span class=\"hljs-string\">&quot;java.util.Date&quot;</span> /&gt;</span><br> <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">result</span> <span class=\"hljs-attr\">column</span>=<span class=\"hljs-string\">&quot;gmt_modified&quot;</span> <span class=\"hljs-attr\">jdbcType</span>=<span class=\"hljs-string\">&quot;TIMESTAMP&quot;</span> <span class=\"hljs-attr\">property</span>=<span class=\"hljs-string\">&quot;gmtModified&quot;</span> <span class=\"hljs-attr\">javaType</span>=<span class=\"hljs-string\">&quot;java.util.Date&quot;</span> /&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">resultMap</span>&gt;</span><br></code></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"mybatis-config-xml中的配置：\"><a href=\"#mybatis-config-xml中的配置：\" class=\"headerlink\" title=\"mybatis-config.xml中的配置：\"></a>mybatis-config.xml中的配置：</h3><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">configuration</span>&gt;</span>     <br> <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">settings</span>&gt;</span>       <br>  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">setting</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;mapUnderscoreToCamelCase&quot;</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">&quot;true&quot;</span> /&gt;</span><br> <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">settings</span>&gt;</span>  <br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">configuration</span>&gt;</span><br></code></pre></td></tr></table></figure>\n\n\n\n<h1 id=\"标题一\"><a href=\"#标题一\" class=\"headerlink\" title=\"标题一\"></a>标题一</h1><h2 id=\"标题二\"><a href=\"#标题二\" class=\"headerlink\" title=\"标题二\"></a>标题二</h2><h2 id=\"英语听力考试试音时间\"><a href=\"#英语听力考试试音时间\" class=\"headerlink\" title=\"英语听力考试试音时间\"></a>英语听力考试试音时间</h2><p>小车正穿行在洛基山脉蜿蜒曲折的盘山公路上，克里朵托夫里维静静地看着窗外，发现车子每当行驶到无路的关头，</p>\n<p>路边都会出现一块交通指示牌：“前方转弯”或写着“注意急转弯”。而转过每一道弯道之后前方照例又是一片柳暗花明、豁然开朗。</p>\n<p>山路弯弯、峰回路转，“前方转弯”几个大字一次次冲击着他的眼球，也渐渐敲醒了他的心扉。</p>\n<p>原来不是路已到了尽头，而是该转弯了……路在脚下，更在心中，心随路转，心路常宽。</p>\n<p>学会转弯也是人生的智慧，因为挫折往往是转折，危机同时是转机。</p>\n<h3 id=\"代码样式\"><a href=\"#代码样式\" class=\"headerlink\" title=\"代码样式\"></a>代码样式</h3><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><h4 id=\"四级标题\"><a href=\"#四级标题\" class=\"headerlink\" title=\"四级标题\"></a>四级标题</h4><h1 id=\"Markdown中实现首行缩进的两种方法\"><a href=\"#Markdown中实现首行缩进的两种方法\" class=\"headerlink\" title=\"Markdown中实现首行缩进的两种方法\"></a>Markdown中实现首行缩进的两种方法</h1><h3 id=\"方法1\"><a href=\"#方法1\" class=\"headerlink\" title=\"方法1\"></a>方法1</h3><p>半方大的空白&ensp;或&#8194;</p>\n<h3 id=\"方法2\"><a href=\"#方法2\" class=\"headerlink\" title=\"方法2\"></a>方法2</h3><p>全方大的空白&emsp;或&#8195;</p>\n<h3 id=\"方法3\"><a href=\"#方法3\" class=\"headerlink\" title=\"方法3\"></a>方法3</h3><p>不断行的空白格&nbsp;或&#160;</p>\n<hr>\n<p>&emsp;&emsp;量子霸权的实现，将是量子计算发展的一座重要里程碑，代表「量子计算的超强计算能力」自 37 年前提出以来首次从理论走进实验，标志一个新的计算能力飞跃时代的开始。近年来，随着「实现量子霸权」的日益临近，「称霸标准」成为量子计算领域最重要的科学问题之一。</p>\n<p>我国科学家最早开启了「称霸标准」问题的研究。最近，《国家科学评论》（National Science Review）以「A Benchmark Test of Boson Sampling on Tianhe-2 Supercomputer」为题正式发表了国防科技大学吴俊杰团队与上海交通大学金贤敏教授的合作研究成果，报道了玻色采样案例的「称霸标准」。</p>\n"},{"title":"Kubernetes集群部署实战(基于v1.23.3版本)","date":"2025-03-23T02:10:00.000Z","description":"Kubernetes集群部署实战，基于Kubernetes v1.32.3、Ubuntu 24.04.2 LTS、Containerd v1.7.29版本搭建","_content":"\n# 前言\n\n![components-of-kubernetes](https://kubernetes.io/images/docs/components-of-kubernetes.svg)\n\n\n[Kubernetes集群](https://kubernetes.io/zh-cn/docs/concepts/overview/components/)部署实战，基于Kubernetes v1.32.3、Ubuntu 24.04.2 LTS、Containerd v1.7.27版本搭建。\n\n\n\n## 1.1 前置准备\n\n### 1.1.1 前置依赖软件及物料准备\n\n- 服务器系统：PVE 8.1 \n- 虚拟机操作系统 Ubuntu 24.04.2 LTS ISO\n- Kubernetes v1.32.3 （kubeadm、kubelet、kubectl、kube-apiserver、kube-controller-manager、kube-scheduler、kube-proxy）\n- Cri-Containerd v1.7.27    [releases](https://github.com/containerd/containerd/releases)       crictl\n- CoreDNS v1.11.3\n- Pause v3.10\n- Etcd v3.5.16-0\n- Calico v3.29.2\n- Nginx镜像\n- Helm v3.17.2\n- Kubernetes Dashboard v7.11.1\n\n\n### 1.1.2 K8S集群网络IP规划\n\n| 节点名称      | 规划IP       | 当前验证实际使用IP  |          备注           |\n| :----------: | :----------: | :---------------: | :---------------------: |\n| K8S-Master01 | 10.200.10.11 | 192.168.11.161    | ...                     |\n| K8S-Master02 | 10.200.10.12 |                   | ...                     |\n| K8S-Master03 | 10.200.10.13 |                   | ...                     |\n| k8S-Worker01 | 10.200.10.21 | 192.168.11.165    | ...                     |\n| K8S-Worker02 | 10.200.10.22 | 192.168.11.166    | ...                     |\n| K8S-Worker03 | 10.200.10.23 |                   | ...                     |\n| K8S-Worker04 | 10.200.10.24 |                   | ...                     |\n| K8S-Worker05 | 10.200.10.25 |                   | ...                     |\n\n\n### 1.1.3 主机硬件配置说明 \n\n| 节点名称      | 角色     | CPU  |  内存   | 硬盘  | 备注   |\n| :----------: | :--- --: | :--: | :----: | :---: | :-------: |\n| K8S-Master01 | master   |  4C  |  8G    | 200GB | 最低4C8G   |\n| k8S-Worker01 | worker   |  8C  |  16G   | 200GB | 最低8C16G  |\n| K8S-Worker02 | worker   |  8C  |  16G   | 200GB | 最低8C16G  |\n\n                \n\n## 1.2 主机系统基础环境准备 \n\n### 1.2.1 正式安装前，系统需要检查及准备以下操作\n\n- 更新基础软件版本  \n- 安装 net-tools、iputils-ping 工具，查看IP配置、网络状况\n- 安装必要的编辑器\n- 启用SSH连接 OpenSSH  开启SSH服务\n- 支持cron定时任务\n- 远程时间同步服务支持 \n- 初始化系统 systemd 支持程序开机自启动\n- 网络下载工具：wget、curl\n- 签名校验工具gpg\n\n安装必要的软件及工具\n\n```bash\n~# sudo apt-get update\n~# sudo apt install net-tools iputils-ping systemd nano openssh-server cron ntpdate ipset ipvsadm debianutils tar which apt-transport-https ca-certificates curl wget gpg -y\n~# sudo apt-get upgrade -y\n```\n\n\n\n### 1.2.2 开启SSH远程登录服务\n\n确认你的系统使用的是哪种初始化系统：\n\n```bash\n~# ps -p 1 -o comm=\n```\n\n```bash\n~$ sudo systemctl enable ssh\n\n~$ sudo systemctl start ssh\n\n~$ sudo system status ssh      # 查看ssh状态 \n```\n\n\n## 1.3 集群主机配置\n\n### 1.3.1 主机名配置 \n\n由于本次使用3台主机完成kubernetes集群部署，其中1台为master节点,名称为k8s-master01;其中2台为worker节点，名称分别为：k8s-worker01及k8s-worker02\n\nmaster01节点\n\n```bash\n~# hostnamectl set-hostname k8s-master01\n```\n\nworker01节点\n\n```bash\n~# hostnamectl set-hostname k8s-worker01\n```\n\n\nworker02节点\n\n```bash\n~# hostnamectl set-hostname k8s-worker02\n```\n\n\n### 1.3.2 主机IP地址配置 \n\nk8s-master01节点IP地址为：192.168.11.161/24\n\n```bash\n root@k8s-master01:~# nano /etc/netplan/50-cloud-init.yaml\n root@k8s-master01:~# cat /etc/netplan/50-cloud-init.yaml\n```\n\n50-cloud-init.yaml文件中添加或修改IP地址（注意网卡名称需要与系统中的以太网卡一致）\n\n```yaml\nnetwork:\n  version: 2\n  renderer: networkd\n  ethernets:\n    ens18:\n      dhcp4: no\n      addresses:\n        - 192.168.11.161/24\n      routes:\n        - to: default\n          via: 192.168.11.1\n      nameservers:\n        addresses: [119.29.29.29,114.114.114.114,8.8.8.8]\n```\n\n保存k8s-master01的网卡配置\n\n```bash\nroot@k8s-master01:~# sudo netplan apply\n```\n\n重新按新ip连接主机，然后使用以下命名查看ip地址信息\n\n\n```bash\nip a s\n```\n\nk8s-worker01节点IP地址为：192.168.11.165/24\n\n```bash\nroot@k8s-worker01:~# nano /etc/netplan/50-cloud-init.yaml\nroot@k8s-worker01:~# cat /etc/netplan/50-cloud-init.yaml\n```\n\n```yaml\nnetwork:\n  version: 2\n  renderer: networkd\n  ethernets:\n    enp6s18:\n      dhcp4: no\n      addresses:\n        - 192.168.11.165/24\n      routes:\n        - to: default\n          via: 192.168.11.1\n      nameservers:\n        addresses: [119.29.29.29,114.114.114.114,8.8.8.8]\n```\n\n保存k8s-worker01的网卡配置\n\n```bash\nroot@k8s-worker01:~# sudo netplan apply\n```\n\n\nk8s-worker02节点IP地址为：192.168.11.166/24\n\n```bash\nroot@k8s-worker02:~# nano /etc/netplan/50-cloud-init.yaml\nroot@k8s-worker02:~# cat /etc/netplan/50-cloud-init.yaml\n```\n\n```yaml\nnetwork:\n  version: 2\n  renderer: networkd\n  ethernets:\n    enp6s18:\n      dhcp4: no\n      addresses:\n        - 192.168.11.166/24\n      routes:\n        - to: default\n          via: 192.168.11.1\n      nameservers:\n        addresses: [119.29.29.29,114.114.114.114,8.8.8.8]\n```\n\n保存k8s-worker02的网卡配置\n\n```bash\nroot@k8s-worker02:~# sudo netplan apply\n```\n\n\n\n\n### 1.3.3 主机名与IP地址解析 \n \n\n所有集群主机均需要进行配置。\n\n\n在没有DNS服务器的环境中需要先能解析到各个节点的IP地址\n\n\n\n```bash\n~# sudo nano /etc/hosts\n```\n\n- 在文件后面追加以下内容\n\n```bash\n192.168.11.161 k8s-master01\n192.168.11.165 k8s-worker01\n192.168.11.166 k8s-worker02\n```\n\n\n修改后Ctrl+O,然后Enter键，再Ctrl+X保存文件修改并退出\n\n查看IP解析配置是否生效命令\n\n```bash\n~$ ping -c 4 k8s-master01\n~$ ping -c 4 k8s-worker01\n~$ ping -c 4 k8s-worker02\n```\n\n### 1.3.4 时间同步配置 \n\n查看时间\n\n```bash\n~# date\n Thu Sep  7 05:39:21 AM UTC 2024\n```\n\n更换时区\n\n```bash\n~# timedatectl set-timezone Asia/Shanghai\n```\n \n再次查看时间\n```bash\n~# date\n Thu Sep  7 01:39:51 PM CST 2024\n```\n\n安装ntpdate命令\n\n```bash\n~# apt install ntpdate -y\n```\n\n使用ntpdate命令同步时间\n\n```bash\n~# ntpdate time1.aliyun.com\n```\n\n\n通过计划任务实现时间同步\n\n```bash\n~# apt install cron -y\n~# crontab -e\n no crontab for root - using an empty one\n Select an editor.  To change later, run 'select-editor'.\n  1. /bin/nano        <---- easiest\n  2. /usr/bin/vim.basic\n  3. /usr/bin/vim.tiny\n  4. /bin/ed\n Choose 1-4 [1]: 2\n ......\n0 */1 * * * ntpdate time1.aliyun.com           // 写入配置文件\n~# crontab -l   // 查看crontab配置\n ......\n0 */1 * * * ntpdate time1.aliyun.com        \n```\n\n\n### 1.3.5 配置内核转发及网桥过滤 \n\n所有主机均需要操作。\n\n\nWay1：手动执行，手动加载内核转发及网桥过滤模块\n\n```bash\n~# modprobe overlay\n~# modprobe br_netfilter\n```\n\n\nWay2：创建加载内核模块文件\n\n```bash\n~# sudo cat << EOF | tee /etc/modules-load.d/k8s.conf\noverlay\nbr_netfilter\nEOF\n```\n\n- 查看已加载的模块\n\n```bash\n~# lsmod | egrep \"overlay\"\noverlay               151552  0\n```\n\n\n```bash\n~# lsmod | egrep \"br_netfilter\"\nbr_netfilter    32768   0       \nbridge           307200  1 br_netfilter\n```\n\n\n- 添加网桥过滤及内核转发配置文件\n\n```bash\n~# cat << EOF| tee /etc/sysctl.d/k8s.conf\nnet.bridge.bridge-nf-call-ip6tables = 1\nnet.bridge.bridge-nf-call-iptables = 1\nnet.ipv4.ip_forward = 1\nEOF\n```\n\n查看配置文件\n\n```bash\n~# nano /etc/modules-load.d/k8s.conf\n~# cat /etc/modules-load.d/k8s.conf\n```\n\n加载内核参数,使之生效\n\n```bash\n~# sysctl --system\n```\n\n检查输出的结果中是否包含以下三项：\n\n```\nnet.bridge.bridge-nf-call-ip6tables = 1\nnet.bridge.bridge-nf-call-iptables = 1\nnet.ipv4.ip_forward = 1\n```\n\n\n\n### 1.3.6 安装ipset及ipvsadm \n\n所有主机均需要操作。\n\n\n安装ipset及ipvsadm命令\n\n```bash\n ~# apt install ipset ipvsadm -y\n```\n\n配置ipvsadm模块加载\n\n添加系统启动需要加载的模块文件\n\n```bash\n~# cat << EOF | tee /etc/modules-load.d/ipvs.conf\nip_vs\nip_vs_rr\nip_vs_wrr\nip_vs_sh\nnf_conntrack\nEOF\n```\n\n创建加载模块脚本文件\n\n```bash\n~# cat << EOF | tee ipvs.sh\n#!/bin/sh\nmodprobe -- ip_vs\nmodprobe -- ip_vs_rr\nmodprobe -- ip_vs_wrr\nmodprobe -- ip_vs_sh\nmodprobe -- nf_conntrack\nEOF\n```\n\n上述命令执行完成后，当前目录下会生成一个ipvs.sh脚本文件，接下来使用bash命令执行它\n\n执行ipvs.sh脚本文件，以加载模块\n\n```bash\n~# sh ipvs.sh\n```\n\n查看ipvs配置是否已生效\n\n```bash\nroot@k8s-master01:~# lsmod | grep ip_vs\nip_vs_sh               12288  0\nip_vs_wrr              12288  0\nip_vs_rr               12288  0\nip_vs                 221184  6 ip_vs_rr,ip_vs_sh,ip_vs_wrr\nnf_conntrack          196608  1 ip_vs\nnf_defrag_ipv6         24576  2 nf_conntrack,ip_vs\nlibcrc32c              12288  4 nf_conntrack,btrfs,raid456,ip_vs\n```\n\n### 1.3.7 关闭SWAP分区 \n\n修改完成后需要重启操作系统，\n\nWay1：临时关闭（不推荐），若不重启，命令为\n\n```bash\n~# swapoff -a\n```\n\nWay2：永久关闭swap分区（推荐，操作需要重启操作系统）\n\n```bash\n~# nano /etc/fstab    // 进入分区配置文件\n ......\n\n #/swap.img   none    swap   sw      0       0    // 在此行首添加“#”以注释swap分区的配置\n```\n\n修改完成后保存文件并退出\n\n\n# 二、K8S集群容器运行时 Containerd 准备 \n\n- 安装docker-ce方法：[https://docs.docker.com/engine/install/ubuntu/](https://docs.docker.com/engine/install/ubuntu/)\n\n- 本文实际采用containerd作为集群容器镜像的运行平台\n\n## 2.1 Containerd部署文件获取\n\nwget下载1.7.27版本containerd\n\n```bash\n~# wget https://github.com/containerd/containerd/releases/download/v1.7.27/cri-containerd-1.7.27-linux-amd64.tar.gz\n```\n\n解压安装\n\n```bash\n~# sudo apt install debianutils\n~# sudo apt install --reinstall libc6\n~# sudo apt install --reinstall which\n\n\n~# sudo tar xf /home/acanx/cri-containerd-1.7.27-linux-amd64.tar.gz  -C /\n\n~# which containerd\n\n/usr/local/bin/containerd\n~# which runc\n\n/usr/local/sbin/runc\n```\n\n验证containerd、runc是否安装成功\n\n```bash\n~# which containerd\n~# which runc\n~# whereis containerd\n```\n\n## 2.2 Containerd配置文件生成并修改 \n\n创建containerd配置文件目录/etc/containerd\n\n```bash\n~# mkdir /etc/containerd\n~# sudo chmod -R 777 /etc/containerd/       // 然后可以上传配置文件\n```\n\n生成配置文件config.toml及默认配置\n\n```bash\n~# containerd config default > /etc/containerd/config.toml\n```\n\n修改配置文件的第67行\n\n```bash\n~# nano /etc/containerd/config.toml\n```\n\n```txt\n sandbox_image = \"registry.k8s.io/pause:3.10\"  // 由3.9修改为3.10\n```\n\n- 如果使用阿里云容器镜像仓库，也可以修改为：\n\n```txt\nsandbox_image = \"registry.aliyuncs.com/google_containers/pause:3.9\"  // 由3.9修改为3.10\n```\n\n修改配置文件的第139行\n\n\n```bash\n~# vim /etc/containerd/config.toml\n SystemdCgroup = true 由false修改为true\n```\n\n\n## 2.3 Containerd启动及开机自启动 \n\n设置containerd开机自启并立即启动\n\n```bash\n~# sudo tee /etc/systemd/system/containerd.service <<EOF\n[Unit]\nDescription=containerd container runtime\nDocumentation=https://containerd.io\nAfter=network.target local-fs.target\n \n[Service]\nExecStartPre=-/sbin/modprobe overlay\nExecStart=/usr/local/bin/containerd\n \nType=notify\nDelegate=yes\nKillMode=process\nRestart=always\nRestartSec=5\n \n# 限制日志大小\nLimitNOFILE=infinity\n \n[Install]\nWantedBy=multi-user.target\nEOF\n```\n\n\n```bash\n~# ls /etc/systemd/system/containerd.service\n~# systemctl enable --now containerd\n```\n\n验证containerd版本\n\n```bash\n~# containerd --version\n```\n\n\n\n# 三、K8S集群部署 \n\n## 3.1 K8S集群软件apt源准备 \n\n本次使用kubernetes社区软件源仓库或阿里云软件源仓库，建议网络不畅通的选择阿里云软件源仓库\n\n下载用于 Kubernetes 软件包仓库的公共签名密钥,所有仓库都使用相同的签名密钥，因此你可以忽略URL中的版本：\n\n- K8S社区软件源仓库签名文件下载\n\n```bash\n\n~# curl -fsSL https://pkgs.k8s.io/core:/stable:/v1.32/deb/Release.key | sudo gpg --dearmor -o /etc/apt/keyrings/kubernetes-apt-keyring.gpg\n~# ls /etc/apt/keyrings/kubernetes-apt-keyring.gpg\n```\n\n- 阿里云软件源仓库签名文件下载\n\n```bash\n~# curl -fsSL https://mirrors.aliyun.com/kubernetes-new/core/stable/v1.32/deb/Release.key | gpg --dearmor -o /etc/apt/keyrings/kubernetes-apt-keyring.gpg\n```\n\n### 添加 Kubernetes apt 仓库\n\n请注意，此仓库仅包含适用于 Kubernetes 1.32.3 的软件包； 对于其他 Kubernetes 次要版本，则需要更改 URL 中的 Kubernetes 次要版本以匹配你所需的次要版本 。\n\n此操作会覆盖 /etc/apt/sources.list.d/kubernetes.list 中现存的所有配置，如果有的情况下。\n\n\n#### K8S社区\n\n```bash\n~# echo 'deb [signed-by=/etc/apt/keyrings/kubernetes-apt-keyring.gpg] https://pkgs.k8s.io/core:/stable:/v1.32/deb/ /' | sudo tee /etc/apt/sources.list.d/kubernetes.list\n```\n\n#### 阿里云\n\n```bash\n~# echo \"deb [signed-by=/etc/apt/keyrings/kubernetes-apt-keyring.gpg] https://mirrors.aliyun.com/kubernetes-new/core/stable/v1.32/deb/ /\" | tee /etc/apt/sources.list.d/kubernetes.list\n```\n\n\n更新 apt 包索引\n\n```bash\n~# sudo apt-get update\n```\n\n\n\n\n## 3.2 K8S集群软件安装及kubelet配置 \n\n所有节点均可安装\n\n### 3.2.1 k8s集群软件安装 \n \n查看软件列表\n\n\n```bash\nroot@k8s-master01:~# apt-cache policy kubeadm\n\nkubeadm:\n  Installed: (none)\n  Candidate: 1.32.3-1.1\n  Version table:\n     1.32.3-1.1 500\n        500 https://mirrors.aliyun.com/kubernetes-new/core/stable/v1.32/deb  Packages\n     1.32.2-1.1 500\n        500 https://mirrors.aliyun.com/kubernetes-new/core/stable/v1.32/deb  Packages\n     1.32.1-1.1 500\n        500 https://mirrors.aliyun.com/kubernetes-new/core/stable/v1.32/deb  Packages\n     1.32.0-1.1 500\n        500 https://mirrors.aliyun.com/kubernetes-new/core/stable/v1.32/deb  Packages\n```\n\n\n查看软件列表及其依赖关系\n\n```bash\nroot@k8s-master01:~# apt-cache showpkg kubeadm\n\nPackage: kubeadm\nVersions: \n1.32.3-1.1 (/var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages)\n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n\n1.32.2-1.1 (/var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages)\n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n\n1.32.1-1.1 (/var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages)\n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n\n1.32.0-1.1 (/var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages)\n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n\n\nReverse Depends: \n  kubeadm:ppc64el,kubeadm\n  kubeadm:s390x,kubeadm\n  kubeadm:arm64,kubeadm\n  kubeadm:ppc64el,kubeadm\n  kubeadm:s390x,kubeadm\n  kubeadm:arm64,kubeadm\n  kubeadm:ppc64el,kubeadm\n  kubeadm:s390x,kubeadm\n  kubeadm:arm64,kubeadm\n  kubeadm:ppc64el,kubeadm\n  kubeadm:s390x,kubeadm\n  kubeadm:arm64,kubeadm\nDependencies: \n1.32.3-1.1 - cri-tools (2 1.30.0) kubeadm:ppc64el (32 (null)) kubeadm:arm64 (32 (null)) kubeadm:s390x (32 (null)) \n1.32.2-1.1 - cri-tools (2 1.30.0) kubeadm:ppc64el (32 (null)) kubeadm:arm64 (32 (null)) kubeadm:s390x (32 (null)) \n1.32.1-1.1 - cri-tools (2 1.30.0) kubeadm:ppc64el (32 (null)) kubeadm:arm64 (32 (null)) kubeadm:s390x (32 (null)) \n1.32.0-1.1 - cri-tools (2 1.30.0) kubeadm:ppc64el (32 (null)) kubeadm:arm64 (32 (null)) kubeadm:s390x (32 (null)) \nProvides: \n1.32.3-1.1 - \n1.32.2-1.1 - \n1.32.1-1.1 - \n1.32.0-1.1 - \nReverse Provides: \n```\n\n查看可用软件列表\n\n```bash\nroot@k8s-master01:~# apt-cache madison kubeadm\n\n   kubeadm | 1.32.3-1.1 | https://mirrors.aliyun.com/kubernetes-new/core/stable/v1.32/deb  Packages\n   kubeadm | 1.32.2-1.1 | https://mirrors.aliyun.com/kubernetes-new/core/stable/v1.32/deb  Packages\n   kubeadm | 1.32.1-1.1 | https://mirrors.aliyun.com/kubernetes-new/core/stable/v1.32/deb  Packages\n   kubeadm | 1.32.0-1.1 | https://mirrors.aliyun.com/kubernetes-new/core/stable/v1.32/deb  Packages\n```\n\nWay1：采用默认安装\n\n```bash\n~# sudo apt-get install kubelet kubeadm kubectl -y\n```\n\n\nWay2：安装指定版本(v1.32.3-1.1)\n\n```bash\n~# sudo apt-get install -y kubelet=1.32.3-1.1 kubeadm=1.32.3-1.1 kubectl=1.32.3-1.1\n```\n\n- 如有报错：\n\n```bash\nE: Could not get lock /var/lib/dpkg/lock-frontend. It is held by process 5005 \n(unattended-upgr)\n N: Be aware that removing the lock file is not a solution and may break your \nsystem.\n E: Unable to acquire the dpkg frontend lock (/var/lib/dpkg/lock-frontend), is \nanother process using it?\n```\n可稍等等\n\n锁定版本，防止后期自动更新\n\n```bash\n~# sudo apt-mark hold kubelet kubeadm kubectl\n```\n\n\n解锁版本，则可以执行更新\n\n```bash\n~# sudo apt-mark unhold kubelet kubeadm kubectl\n```\n\n\n### 3.2.2 配置kubelet \n \n为了实现容器运行时使用的cgroupdriver与kubelet使用的cgroup的一致性，建议修改如下文件内容。\n\n```bash\n~# nano /etc/default/kubelet\n KUBELET_EXTRA_ARGS=\"--cgroup-driver=systemd\"\n```\n\n- 设置kubelet为开机自启动，由于没有生成配置文件，集群初始化后自动启动\n\n```bash\n~# systemctl enable kubelet\n```\n\n\n## 3.3 K8S集群初始化 \n\n### 3.3.1 查看版本 \n\n```bash\nroot@k8s-master01:~# kubeadm version\n\nkubeadm version: &version.Info{Major:\"1\", Minor:\"32\", GitVersion:\"v1.32.3\", GitCommit:\"32cc146f75aad04beaaa245a7157eb35063a9f99\", GitTreeState:\"clean\", BuildDate:\"2025-03-11T19:57:38Z\", GoVersion:\"go1.23.6\", Compiler:\"gc\", Platform:\"linux/amd64\"}\n\n```\n\n\n\n### 3.3.2 生成部署配置文件 \n\n\n生成kubeadm部署默认配置文件\n\n```bash\nroot@k8s-master01:~# kubeadm config print init-defaults > /home/acanx/kubeadm-config.yaml\n```\n\n#### 使用kubernetes社区版容器镜像仓库\n\n```bash\nroot@k8s-master01:~# nano /home/acanx/kubeadm-config.yaml\nroot@k8s-master01:~# cat kubeadm-config.yaml\n```\n\nkubeadm-config.yaml文件中 的配置\n\n```yaml\n apiVersion: kubeadm.k8s.io/v1beta3\n bootstrapTokens:- groups:- system:bootstrappers:kubeadm:default-node-token\n token: abcdef.0123456789abcdef\n ttl: 24h0m0s\n usages:- signing- authentication\n kind: InitConfiguration\n localAPIEndpoint:\n advertiseAddress: 192.168.10.140\n bindPort: 6443\n nodeRegistration:\n criSocket: unix:///var/run/containerd/containerd.sock\n imagePullPolicy: IfNotPresent\n name: k8s-master01\n taints: null--\napiServer:\n timeoutForControlPlane: 4m0s\n apiVersion: kubeadm.k8s.io/v1beta3\n certificatesDir: /etc/kubernetes/pki\n clusterName: kubernetes\n controllerManager: {}\n dns: {}\n etcd:\n local:\n dataDir: /var/lib/etcd\n imageRepository: registry.k8s.io\n kind: ClusterConfiguration\n kubernetesVersion: 1.30.0\n networking:\n dnsDomain: cluster.local\n serviceSubnet: 10.96.0.0/12\n podSubnet: 10.244.0.0/16\nscheduler: {}\n--\nkind: KubeletConfiguration\napiVersion: kubelet.config.k8s.io/v1beta1\ncgroupDriver: systemd\n```\n\n\n\n#### 使用阿里云容器镜像仓库\n\n编辑kubeadm配置文件（使用阿里云容器镜像仓库）\n\n```bash\nroot@k8s-master01:~# nano kubeadm-config.yaml\n```\n\n```yaml\napiVersion: kubeadm.k8s.io/v1beta4\nbootstrapTokens:\n- groups:\n  - system:bootstrappers:kubeadm:default-node-token\n  token: abcdef.0123456789abcdef\n  ttl: 24h0m0s\n  usages:\n  - signing\n  - authentication\nkind: InitConfiguration\nlocalAPIEndpoint:\n  advertiseAddress: 192.168.11.161   # 设置节点IP地址\n  bindPort: 6443\nnodeRegistration:\n  criSocket: unix:///var/run/containerd/containerd.sock\n  imagePullPolicy: IfNotPresent\n  imagePullSerial: true\n  name: k8s-master01      # 修改节点名称\n  taints: null\ntimeouts:\n  controlPlaneComponentHealthCheck: 4m0s\n  discovery: 5m0s\n  etcdAPICall: 2m0s\n  kubeletHealthCheck: 4m0s\n  kubernetesAPICall: 1m0s\n  tlsBootstrap: 5m0s\n  upgradeManifests: 5m0s\n---\napiServer: {}\napiVersion: kubeadm.k8s.io/v1beta4\ncaCertificateValidityPeriod: 87600h0m0s\ncertificateValidityPeriod: 8760h0m0s\ncertificatesDir: /etc/kubernetes/pki\nclusterName: kubernetes\ncontrollerManager: {}\ndns: {}\nencryptionAlgorithm: RSA-2048\netcd:\n  local:\n    dataDir: /var/lib/etcd\nimageRepository: registry.aliyuncs.com/google_containers   # 修改镜像地址\nkind: ClusterConfiguration\nkubernetesVersion: 1.32.0\nnetworking:\n  dnsDomain: cluster.local\n  serviceSubnet: 10.96.0.0/12\n  podSubnet: 10.244.0.0/16    # 可按需修改，原则：不与已有的节点网段重合\nproxy: {}\nscheduler: {}\n---\nkind: KubeletConfiguration                   # 最后四行是补加的\napiVersion: kubelet.config.k8s.io/v1beta1\ncgroupDriver: systemd\n```\n\n### 3.3.3 查看并下载镜像 \n\n\n#### 查看及使用Kubernetes社区镜像仓库下载镜像\n\n查看镜像列表（K8S社区镜像仓库）\n\n```bash\nroot@k8s-master01:~# kubeadm config images list   # 查看kubernetes镜像默认版本\n\nroot@k8s-master01:~# kubeadm config images list --kubernetes-version=v1.32.3    # 指定kubernetes镜像版本\n\nregistry.k8s.io/kube-apiserver:v1.32.3\nregistry.k8s.io/kube-controller-manager:v1.32.3\nregistry.k8s.io/kube-scheduler:v1.32.3\nregistry.k8s.io/kube-proxy:v1.32.3\nregistry.k8s.io/coredns/coredns:v1.11.3\nregistry.k8s.io/pause:3.10\nregistry.k8s.io/etcd:3.5.16-0\n```\n\n\n```bash\n root@k8s-master01:~# kubeadm config images pull           # 默认从K8S社区镜像仓库下载镜像\n\n [config/images] Pulled registry.k8s.io/kube-apiserver:v1.32.3\n [config/images] Pulled registry.k8s.io/kube-controller-manager:v1.32.3\n [config/images] Pulled registry.k8s.io/kube-scheduler:v1.32.3\n [config/images] Pulled registry.k8s.io/kube-proxy:v1.32.3\n [config/images] Pulled registry.k8s.io/coredns/coredns:v1.11.3\n [config/images] Pulled registry.k8s.io/pause:3.10\n [config/images] Pulled registry.k8s.io/etcd:3.5.16-0\n```\n\n\n#### 查看及使用阿里云容器镜像仓库下载镜像\n\n\n查看镜像列表（阿里云容器镜像仓库）\n\n```bash\nroot@k8s-master01:~# kubeadm config images list --image-repository registry.aliyuncs.com/google_containers\n\nregistry.aliyuncs.com/google_containers/kube-apiserver:v1.32.3\nregistry.aliyuncs.com/google_containers/kube-controller-manager:v1.32.3\nregistry.aliyuncs.com/google_containers/kube-scheduler:v1.32.3\nregistry.aliyuncs.com/google_containers/kube-proxy:v1.32.3\nregistry.aliyuncs.com/google_containers/coredns:v1.11.3\nregistry.aliyuncs.com/google_containers/pause:3.10\nregistry.aliyuncs.com/google_containers/etcd:3.5.16-0\n```\n\n使用阿里云容器镜像仓库下载\n\n```bash\nroot@k8s-master01:~# kubeadm config images pull --image-repository registry.aliyuncs.com/google_containers --cri-socket=unix:///run/containerd/containerd.sock\n\n[config/images] Pulled registry.aliyuncs.com/google_containers/kube-apiserver:v1.32.3\n[config/images] Pulled registry.aliyuncs.com/google_containers/kube-controller-manager:v1.32.3\n[config/images] Pulled registry.aliyuncs.com/google_containers/kube-scheduler:v1.32.3\n[config/images] Pulled registry.aliyuncs.com/google_containers/kube-proxy:v1.32.3\n[config/images] Pulled registry.aliyuncs.com/google_containers/coredns:v1.11.3\n[config/images] Pulled registry.aliyuncs.com/google_containers/pause:3.10\n[config/images] Pulled registry.aliyuncs.com/google_containers/etcd:3.5.16-0\n```\n\n\n#### 查看下载的镜像\n\n查看本地下载的containerd镜像\n\n```bash\nroot@k8s-master01:~# crictl images\n\nWARN[0000] Config \"/etc/crictl.yaml\" does not exist, trying next: \"/usr/bin/crictl.yaml\" \nWARN[0000] Image connect using default endpoints: [unix:///run/containerd/containerd.sock unix:///run/crio/crio.sock unix:///var/run/cri-dockerd.sock]. As the default settings are now deprecated, you should set the endpoint instead. \nIMAGE                                                             TAG                 IMAGE ID            SIZE\nregistry.aliyuncs.com/google_containers/coredns                   v1.11.3             c69fa2e9cbf5f       18.6MB\nregistry.aliyuncs.com/google_containers/etcd                      3.5.16-0            a9e7e6b294baf       57.7MB\nregistry.aliyuncs.com/google_containers/kube-apiserver            v1.32.0             c2e17b8d0f4a3       28.7MB\nregistry.aliyuncs.com/google_containers/kube-apiserver            v1.32.3             f8bdc4cfa0651       28.7MB\nregistry.aliyuncs.com/google_containers/kube-controller-manager   v1.32.0             8cab3d2a8bd0f       26.3MB\nregistry.aliyuncs.com/google_containers/kube-controller-manager   v1.32.3             085818208a521       26.3MB\nregistry.aliyuncs.com/google_containers/kube-proxy                v1.32.0             040f9f8aac8cd       30.9MB\nregistry.aliyuncs.com/google_containers/kube-proxy                v1.32.3             a1ae78fd2f9d8       30.9MB\nregistry.aliyuncs.com/google_containers/kube-scheduler            v1.32.0             a389e107f4ff1       20.7MB\nregistry.aliyuncs.com/google_containers/kube-scheduler            v1.32.3             b4260bf5078ab       20.7MB\nregistry.aliyuncs.com/google_containers/pause                     3.10                873ed75102791       320kB\n```\n\n\n\n\n### 3.3.4 使用部署配置文件初始化K8S集群 \n\n\n使用命令初始化Kubeadm（只在Master节点操作）\n\n```bash\nroot@k8s-master01:~# kubeadm init --config /home/acanx/kubeadm-config.yaml  --upload-certs --v=9  --cri-socket=unix:///run/containerd/containerd.sock\n```\n输出内容如下：\n\n```bash\nI0322 20:07:35.623621    4886 initconfiguration.go:261] loading configuration from \"/home/acanx/kubeadm-config.yaml\"\n[init] Using Kubernetes version: v1.32.0\n[preflight] Running pre-flight checks\nI0322 20:07:35.633576    4886 checks.go:561] validating Kubernetes and kubeadm version\nI0322 20:07:35.633610    4886 checks.go:166] validating if the firewall is enabled and active\nI0322 20:07:35.651826    4886 checks.go:201] validating availability of port 6443\nI0322 20:07:35.652309    4886 checks.go:201] validating availability of port 10259\nI0322 20:07:35.652373    4886 checks.go:201] validating availability of port 10257\nI0322 20:07:35.652434    4886 checks.go:278] validating the existence of file /etc/kubernetes/manifests/kube-apiserver.yaml\nI0322 20:07:35.652491    4886 checks.go:278] validating the existence of file /etc/kubernetes/manifests/kube-controller-manager.yaml\nI0322 20:07:35.652520    4886 checks.go:278] validating the existence of file /etc/kubernetes/manifests/kube-scheduler.yaml\nI0322 20:07:35.652560    4886 checks.go:278] validating the existence of file /etc/kubernetes/manifests/etcd.yaml\nI0322 20:07:35.652582    4886 checks.go:428] validating if the connectivity type is via proxy or direct\nI0322 20:07:35.652631    4886 checks.go:467] validating http connectivity to first IP address in the CIDR\nI0322 20:07:35.652672    4886 checks.go:467] validating http connectivity to first IP address in the CIDR\nI0322 20:07:35.652699    4886 checks.go:102] validating the container runtime\nI0322 20:07:35.653795    4886 checks.go:637] validating whether swap is enabled or not\nI0322 20:07:35.653855    4886 checks.go:368] validating the presence of executable ip\nI0322 20:07:35.653947    4886 checks.go:368] validating the presence of executable iptables\nI0322 20:07:35.654055    4886 checks.go:368] validating the presence of executable mount\nI0322 20:07:35.654080    4886 checks.go:368] validating the presence of executable nsenter\nI0322 20:07:35.654117    4886 checks.go:368] validating the presence of executable ethtool\nI0322 20:07:35.654145    4886 checks.go:368] validating the presence of executable tc\nI0322 20:07:35.654182    4886 checks.go:368] validating the presence of executable touch\nI0322 20:07:35.654210    4886 checks.go:514] running all checks\nI0322 20:07:35.680418    4886 checks.go:399] checking whether the given node name is valid and reachable using net.LookupHost\nI0322 20:07:35.680635    4886 checks.go:603] validating kubelet version\nI0322 20:07:35.753081    4886 checks.go:128] validating if the \"kubelet\" service is enabled and active\nI0322 20:07:35.774195    4886 checks.go:201] validating availability of port 10250\nI0322 20:07:35.774355    4886 checks.go:327] validating the contents of file /proc/sys/net/ipv4/ip_forward\nI0322 20:07:35.774477    4886 checks.go:201] validating availability of port 2379\nI0322 20:07:35.774568    4886 checks.go:201] validating availability of port 2380\nI0322 20:07:35.774631    4886 checks.go:241] validating the existence and emptiness of directory /var/lib/etcd\n[preflight] Pulling images required for setting up a Kubernetes cluster\n[preflight] This might take a minute or two, depending on the speed of your internet connection\n[preflight] You can also perform this action beforehand using 'kubeadm config images pull'\nI0322 20:07:35.777659    4886 checks.go:832] using image pull policy: IfNotPresent\nI0322 20:07:35.779807    4886 checks.go:868] pulling: registry.aliyuncs.com/google_containers/kube-apiserver:v1.32.0\nI0322 20:08:11.358938    4886 checks.go:868] pulling: registry.aliyuncs.com/google_containers/kube-controller-manager:v1.32.0\nI0322 20:08:38.140994    4886 checks.go:868] pulling: registry.aliyuncs.com/google_containers/kube-scheduler:v1.32.0\nI0322 20:09:00.270475    4886 checks.go:868] pulling: registry.aliyuncs.com/google_containers/kube-proxy:v1.32.0\nI0322 20:09:26.947685    4886 checks.go:863] image exists: registry.aliyuncs.com/google_containers/coredns:v1.11.3\nI0322 20:09:26.948207    4886 checks.go:863] image exists: registry.aliyuncs.com/google_containers/pause:3.10\nI0322 20:09:26.948594    4886 checks.go:863] image exists: registry.aliyuncs.com/google_containers/etcd:3.5.16-0\n[certs] Using certificateDir folder \"/etc/kubernetes/pki\"\nI0322 20:09:26.948692    4886 certs.go:112] creating a new certificate authority for ca\n[certs] Generating \"ca\" certificate and key\nI0322 20:09:27.066597    4886 certs.go:473] validating certificate period for ca certificate\n[certs] Generating \"apiserver\" certificate and key\n[certs] apiserver serving cert is signed for DNS names [k8s-master01 kubernetes kubernetes.default kubernetes.default.svc kubernetes.default.svc.cluster.local] and IPs [10.96.0.1 192.168.11.161]\n[certs] Generating \"apiserver-kubelet-client\" certificate and key\nI0322 20:09:27.313725    4886 certs.go:112] creating a new certificate authority for front-proxy-ca\n[certs] Generating \"front-proxy-ca\" certificate and key\nI0322 20:09:27.439421    4886 certs.go:473] validating certificate period for front-proxy-ca certificate\n[certs] Generating \"front-proxy-client\" certificate and key\nI0322 20:09:27.532545    4886 certs.go:112] creating a new certificate authority for etcd-ca\n[certs] Generating \"etcd/ca\" certificate and key\nI0322 20:09:27.631261    4886 certs.go:473] validating certificate period for etcd/ca certificate\n[certs] Generating \"etcd/server\" certificate and key\n[certs] etcd/server serving cert is signed for DNS names [k8s-master01 localhost] and IPs [192.168.11.161 127.0.0.1 ::1]\n[certs] Generating \"etcd/peer\" certificate and key\n[certs] etcd/peer serving cert is signed for DNS names [k8s-master01 localhost] and IPs [192.168.11.161 127.0.0.1 ::1]\n[certs] Generating \"etcd/healthcheck-client\" certificate and key\n[certs] Generating \"apiserver-etcd-client\" certificate and key\nI0322 20:09:28.312889    4886 certs.go:78] creating new public/private key files for signing service account users\n[certs] Generating \"sa\" key and public key\n[kubeconfig] Using kubeconfig folder \"/etc/kubernetes\"\nI0322 20:09:28.495281    4886 kubeconfig.go:111] creating kubeconfig file for admin.conf\n[kubeconfig] Writing \"admin.conf\" kubeconfig file\nI0322 20:09:28.848054    4886 kubeconfig.go:111] creating kubeconfig file for super-admin.conf\n[kubeconfig] Writing \"super-admin.conf\" kubeconfig file\nI0322 20:09:29.129094    4886 kubeconfig.go:111] creating kubeconfig file for kubelet.conf\n[kubeconfig] Writing \"kubelet.conf\" kubeconfig file\nI0322 20:09:29.386206    4886 kubeconfig.go:111] creating kubeconfig file for controller-manager.conf\n[kubeconfig] Writing \"controller-manager.conf\" kubeconfig file\nI0322 20:09:29.483874    4886 kubeconfig.go:111] creating kubeconfig file for scheduler.conf\n[kubeconfig] Writing \"scheduler.conf\" kubeconfig file\n[etcd] Creating static Pod manifest for local etcd in \"/etc/kubernetes/manifests\"\nI0322 20:09:29.607843    4886 local.go:66] [etcd] wrote Static Pod manifest for a local etcd member to \"/etc/kubernetes/manifests/etcd.yaml\"\n[control-plane] Using manifest folder \"/etc/kubernetes/manifests\"\n[control-plane] Creating static Pod manifest for \"kube-apiserver\"\nI0322 20:09:29.607888    4886 manifests.go:104] [control-plane] getting StaticPodSpecs\nI0322 20:09:29.608085    4886 certs.go:473] validating certificate period for CA certificate\nI0322 20:09:29.608178    4886 manifests.go:130] [control-plane] adding volume \"ca-certs\" for component \"kube-apiserver\"\nI0322 20:09:29.608192    4886 manifests.go:130] [control-plane] adding volume \"etc-ca-certificates\" for component \"kube-apiserver\"\nI0322 20:09:29.608198    4886 manifests.go:130] [control-plane] adding volume \"k8s-certs\" for component \"kube-apiserver\"\nI0322 20:09:29.608206    4886 manifests.go:130] [control-plane] adding volume \"usr-local-share-ca-certificates\" for component \"kube-apiserver\"\nI0322 20:09:29.608214    4886 manifests.go:130] [control-plane] adding volume \"usr-share-ca-certificates\" for component \"kube-apiserver\"\nI0322 20:09:29.609567    4886 manifests.go:159] [control-plane] wrote static Pod manifest for component \"kube-apiserver\" to \"/etc/kubernetes/manifests/kube-apiserver.yaml\"\n[control-plane] Creating static Pod manifest for \"kube-controller-manager\"\nI0322 20:09:29.609599    4886 manifests.go:104] [control-plane] getting StaticPodSpecs\nI0322 20:09:29.609807    4886 manifests.go:130] [control-plane] adding volume \"ca-certs\" for component \"kube-controller-manager\"\nI0322 20:09:29.609819    4886 manifests.go:130] [control-plane] adding volume \"etc-ca-certificates\" for component \"kube-controller-manager\"\nI0322 20:09:29.609824    4886 manifests.go:130] [control-plane] adding volume \"flexvolume-dir\" for component \"kube-controller-manager\"\nI0322 20:09:29.609835    4886 manifests.go:130] [control-plane] adding volume \"k8s-certs\" for component \"kube-controller-manager\"\nI0322 20:09:29.609841    4886 manifests.go:130] [control-plane] adding volume \"kubeconfig\" for component \"kube-controller-manager\"\nI0322 20:09:29.609846    4886 manifests.go:130] [control-plane] adding volume \"usr-local-share-ca-certificates\" for component \"kube-controller-manager\"\nI0322 20:09:29.609854    4886 manifests.go:130] [control-plane] adding volume \"usr-share-ca-certificates\" for component \"kube-controller-manager\"\nI0322 20:09:29.610610    4886 manifests.go:159] [control-plane] wrote static Pod manifest for component \"kube-controller-manager\" to \"/etc/kubernetes/manifests/kube-controller-manager.yaml\"\n[control-plane] Creating static Pod manifest for \"kube-scheduler\"\nI0322 20:09:29.610640    4886 manifests.go:104] [control-plane] getting StaticPodSpecs\nI0322 20:09:29.610848    4886 manifests.go:130] [control-plane] adding volume \"kubeconfig\" for component \"kube-scheduler\"\nI0322 20:09:29.611322    4886 manifests.go:159] [control-plane] wrote static Pod manifest for component \"kube-scheduler\" to \"/etc/kubernetes/manifests/kube-scheduler.yaml\"\nI0322 20:09:29.611339    4886 kubelet.go:70] Stopping the kubelet\n[kubelet-start] Writing kubelet environment file with flags to file \"/var/lib/kubelet/kubeadm-flags.env\"\n[kubelet-start] Writing kubelet configuration to file \"/var/lib/kubelet/config.yaml\"\n[kubelet-start] Starting the kubelet\nI0322 20:09:29.948568    4886 loader.go:402] Config loaded from file:  /etc/kubernetes/admin.conf\nI0322 20:09:29.949088    4886 envvar.go:172] \"Feature gate default state\" feature=\"ClientsAllowCBOR\" enabled=false\nI0322 20:09:29.949115    4886 envvar.go:172] \"Feature gate default state\" feature=\"ClientsPreferCBOR\" enabled=false\nI0322 20:09:29.949124    4886 envvar.go:172] \"Feature gate default state\" feature=\"InformerResourceVersion\" enabled=false\nI0322 20:09:29.949144    4886 envvar.go:172] \"Feature gate default state\" feature=\"WatchListClient\" enabled=false\n[wait-control-plane] Waiting for the kubelet to boot up the control plane as static Pods from directory \"/etc/kubernetes/manifests\"\n[kubelet-check] Waiting for a healthy kubelet at http://127.0.0.1:10248/healthz. This can take up to 4m0s\n[kubelet-check] The kubelet is healthy after 502.456949ms\n[api-check] Waiting for a healthy API server. This can take up to 4m0s\nI0322 20:09:30.452200    4886 wait.go:220] \"Request Body\" body=\"\"\nI0322 20:09:30.452302    4886 round_trippers.go:473] curl -v -XGET  -H \"Accept: application/json, */*\" -H \"User-Agent: kubeadm/v1.32.3 (linux/amd64) kubernetes/32cc146\" 'https://192.168.11.161:6443/healthz?timeout=10s'\nI0322 20:09:30.452515    4886 round_trippers.go:515] HTTP Trace: Dial to tcp:192.168.11.161:6443 failed: dial tcp 192.168.11.161:6443: connect: connection refused\nI0322 20:09:30.452547    4886 round_trippers.go:560] GET https://192.168.11.161:6443/healthz?timeout=10s  in 0 milliseconds\nI0322 20:09:30.452664    4886 round_trippers.go:577] HTTP Statistics: DNSLookup 0 ms Dial 0 ms TLSHandshake 0 ms Duration 0 ms\nI0322 20:09:30.452746    4886 round_trippers.go:584] Response Headers:\nI0322 20:09:30.952488    4886 wait.go:220] \"Request Body\" body=\"\"\nI0322 20:09:30.952695    4886 round_trippers.go:473] curl -v -XGET  -H \"Accept: application/json, */*\" -H \"User-Agent: kubeadm/v1.32.3 (linux/amd64) kubernetes/32cc146\" 'https://192.168.11.161:6443/healthz?timeout=10s'\nI0322 20:09:30.953055    4886 round_trippers.go:515] HTTP Trace: Dial to tcp:192.168.11.161:6443 failed: dial tcp 192.168.11.161:6443: connect: connection refused\nI0322 20:09:30.953141    4886 round_trippers.go:560] GET https://192.168.11.161:6443/healthz?timeout=10s  in 0 milliseconds\nI0322 20:09:30.953178    4886 round_trippers.go:577] HTTP Statistics: DNSLookup 0 ms Dial 0 ms TLSHandshake 0 ms Duration 0 ms\nI0322 20:09:30.953196    4886 round_trippers.go:584] Response Headers:\nI0322 20:09:31.453072    4886 wait.go:220] \"Request Body\" body=\"\"\nI0322 20:09:31.453425    4886 round_trippers.go:473] curl -v -XGET  -H \"Accept: application/json, */*\" -H \"User-Agent: kubeadm/v1.32.3 (linux/amd64) kubernetes/32cc146\" 'https://192.168.11.161:6443/healthz?timeout=10s'\nI0322 20:09:31.453892    4886 round_trippers.go:515] HTTP Trace: Dial to tcp:192.168.11.161:6443 failed: dial tcp 192.168.11.161:6443: connect: connection refused\nI0322 20:09:31.453935    4886 round_trippers.go:560] GET https://192.168.11.161:6443/healthz?timeout=10s  in 0 milliseconds\nI0322 20:09:31.453947    4886 round_trippers.go:577] HTTP Statistics: DNSLookup 0 ms Dial 0 ms TLSHandshake 0 ms Duration 0 ms\nI0322 20:09:31.453955    4886 round_trippers.go:584] Response Headers:\nI0322 20:09:31.952836    4886 wait.go:220] \"Request Body\" body=\"\"\nI0322 20:09:31.953094    4886 round_trippers.go:473] curl -v -XGET  -H \"Accept: application/json, */*\" -H \"User-Agent: kubeadm/v1.32.3 (linux/amd64) kubernetes/32cc146\" 'https://192.168.11.161:6443/healthz?timeout=10s'\nI0322 20:09:31.953553    4886 round_trippers.go:517] HTTP Trace: Dial to tcp:192.168.11.161:6443 succeed\nI0322 20:09:33.315605    4886 round_trippers.go:560] GET https://192.168.11.161:6443/healthz?timeout=10s 403 Forbidden in 1362 milliseconds\nI0322 20:09:33.315644    4886 round_trippers.go:577] HTTP Statistics: DNSLookup 0 ms Dial 0 ms TLSHandshake 1336 ms ServerProcessing 25 ms Duration 1362 ms\nI0322 20:09:33.315657    4886 round_trippers.go:584] Response Headers:\nI0322 20:09:33.315670    4886 round_trippers.go:587]     X-Content-Type-Options: nosniff\nI0322 20:09:33.315701    4886 round_trippers.go:587]     X-Kubernetes-Pf-Flowschema-Uid: \nI0322 20:09:33.315710    4886 round_trippers.go:587]     X-Kubernetes-Pf-Prioritylevel-Uid: \nI0322 20:09:33.315717    4886 round_trippers.go:587]     Content-Length: 192\nI0322 20:09:33.315723    4886 round_trippers.go:587]     Date: Sat, 22 Mar 2025 12:09:33 GMT\nI0322 20:09:33.315731    4886 round_trippers.go:587]     Audit-Id: 989b38d0-29d4-4450-b564-12e6142c52b7\nI0322 20:09:33.315737    4886 round_trippers.go:587]     Cache-Control: no-cache, private\nI0322 20:09:33.315741    4886 round_trippers.go:587]     Content-Type: application/json\nI0322 20:09:33.316997    4886 wait.go:220] \"Response Body\" body=<\n\t{\"kind\":\"Status\",\"apiVersion\":\"v1\",\"metadata\":{},\"status\":\"Failure\",\"message\":\"forbidden: User \\\"kubernetes-admin\\\" cannot get path \\\"/healthz\\\"\",\"reason\":\"Forbidden\",\"details\":{},\"code\":403}\n >\n\n.......   中间冗长的日志省略\n\nI0322 20:09:37.294961    4886 round_trippers.go:473] curl -v -XPOST  -H \"User-Agent: kubeadm/v1.32.3 (linux/amd64) kubernetes/32cc146\" -H \"Accept: application/vnd.kubernetes.protobuf,application/json\" -H \"Content-Type: application/vnd.kubernetes.protobuf\" 'https://192.168.11.161:6443/apis/rbac.authorization.k8s.io/v1/namespaces/kube-system/rolebindings?timeout=10s'\nI0322 20:09:37.298583    4886 round_trippers.go:560] POST https://192.168.11.161:6443/apis/rbac.authorization.k8s.io/v1/namespaces/kube-system/rolebindings?timeout=10s 201 Created in 3 milliseconds\nI0322 20:09:37.298609    4886 round_trippers.go:577] HTTP Statistics: GetConnection 0 ms ServerProcessing 3 ms Duration 3 ms\nI0322 20:09:37.298634    4886 round_trippers.go:584] Response Headers:\nI0322 20:09:37.298649    4886 round_trippers.go:587]     X-Kubernetes-Pf-Flowschema-Uid: 9a8a526f-0630-4d03-b851-7ace48e8dc05\nI0322 20:09:37.298661    4886 round_trippers.go:587]     X-Kubernetes-Pf-Prioritylevel-Uid: d044472a-2a80-46df-8bc8-7d94366f6e34\nI0322 20:09:37.298667    4886 round_trippers.go:587]     Content-Length: 385\nI0322 20:09:37.298675    4886 round_trippers.go:587]     Date: Sat, 22 Mar 2025 12:09:37 GMT\nI0322 20:09:37.298680    4886 round_trippers.go:587]     Audit-Id: ece06481-523b-4fe4-9d2c-2d369eceecc1\nI0322 20:09:37.298690    4886 round_trippers.go:587]     Cache-Control: no-cache, private\nI0322 20:09:37.298695    4886 round_trippers.go:587]     Content-Type: application/vnd.kubernetes.protobuf\nI0322 20:09:37.298744    4886 type.go:252] \"Response Body\" body=<\n\t00000000  6b 38 73 00 0a 2b 0a 1c  72 62 61 63 2e 61 75 74  |k8s..+..rbac.aut|\n\t00000010  68 6f 72 69 7a 61 74 69  6f 6e 2e 6b 38 73 2e 69  |horization.k8s.i|\n\t00000020  6f 2f 76 31 12 0b 52 6f  6c 65 42 69 6e 64 69 6e  |o/v1..RoleBindin|\n\t00000030  67 12 c9 02 0a c0 01 0a  0a 6b 75 62 65 2d 70 72  |g........kube-pr|\n\t00000040  6f 78 79 12 00 1a 0b 6b  75 62 65 2d 73 79 73 74  |oxy....kube-syst|\n\t00000050  65 6d 22 00 2a 24 63 38  62 62 36 66 63 64 2d 38  |em\".*$c8bb6fcd-8|\n\t00000060  66 35 38 2d 34 35 35 34  2d 39 66 36 30 2d 38 39  |f58-4554-9f60-89|\n\t00000070  39 32 61 39 65 36 64 36  64 39 32 03 33 30 33 38  |92a9e6d6d92.3038|\n\t00000080  00 42 08 08 81 d1 fa be  06 10 00 8a 01 69 0a 07  |.B...........i..|\n\t00000090  6b 75 62 65 61 64 6d 12  06 55 70 64 61 74 65 1a  |kubeadm..Update.|\n\t000000a0  1c 72 62 61 63 2e 61 75  74 68 6f 72 69 7a 61 74  |.rbac.authorizat|\n\t000000b0  69 6f 6e 2e 6b 38 73 2e  69 6f 2f 76 31 22 08 08  |ion.k8s.io/v1\"..|\n\t000000c0  81 d1 fa be 06 10 00 32  08 46 69 65 6c 64 73 56  |.......2.FieldsV|\n\t000000d0  31 3a 22 0a 20 7b 22 66  3a 72 6f 6c 65 52 65 66  |1:\". {\"f:roleRef|\n\t000000e0  22 3a 7b 7d 2c 22 66 3a  73 75 62 6a 65 63 74 73  |\":{},\"f:subjects|\n\t000000f0  22 3a 7b 7d 7d 42 00 12  55 0a 05 47 72 6f 75 70  |\":{}}B..U..Group|\n\t00000100  12 19 72 62 61 63 2e 61  75 74 68 6f 72 69 7a 61  |..rbac.authoriza|\n\t00000110  74 69 6f 6e 2e 6b 38 73  2e 69 6f 1a 2f 73 79 73  |tion.k8s.io./sys|\n\t00000120  74 65 6d 3a 62 6f 6f 74  73 74 72 61 70 70 65 72  |tem:bootstrapper|\n\t00000130  73 3a 6b 75 62 65 61 64  6d 3a 64 65 66 61 75 6c  |s:kubeadm:defaul|\n\t00000140  74 2d 6e 6f 64 65 2d 74  6f 6b 65 6e 22 00 1a 2d  |t-node-token\"..-|\n\t00000150  0a 19 72 62 61 63 2e 61  75 74 68 6f 72 69 7a 61  |..rbac.authoriza|\n\t00000160  74 69 6f 6e 2e 6b 38 73  2e 69 6f 12 04 52 6f 6c  |tion.k8s.io..Rol|\n\t00000170  65 1a 0a 6b 75 62 65 2d  70 72 6f 78 79 1a 00 22  |e..kube-proxy..\"|\n\t00000180  00                                                |.|\n >\n[addons] Applied essential addon: kube-proxy\nI0322 20:09:37.299409    4886 loader.go:402] Config loaded from file:  /etc/kubernetes/admin.conf\nI0322 20:09:37.300120    4886 loader.go:402] Config loaded from file:  /etc/kubernetes/admin.conf\n\nYour Kubernetes control-plane has initialized successfully!\n\nTo start using your cluster, you need to run the following as a regular user:\n\n  mkdir -p $HOME/.kube\n  sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config\n  sudo chown $(id -u):$(id -g) $HOME/.kube/config\n\nAlternatively, if you are the root user, you can run:\n\n  export KUBECONFIG=/etc/kubernetes/admin.conf\n\nYou should now deploy a pod network to the cluster.\nRun \"kubectl apply -f [podnetwork].yaml\" with one of the options listed at:\n  https://kubernetes.io/docs/concepts/cluster-administration/addons/\n\nThen you can join any number of worker nodes by running the following on each as root:\n\nkubeadm join 192.168.11.161:6443 --token abcdef.0123456789abcdef \\\n\t--discovery-token-ca-cert-hash sha256:c7a1d928a82c30bec6dec880092339e64309b24cc01782d8a9d9c6c0ecfde58f \n\n```\n\n\n## 3.4 准备kubectl配置文件 \n\n以下操作仅在Master节点上进行。\n\n```bash\nmkdir -p $HOME/.kube\nsudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config\nsudo chown $(id -u):$(id -g) $HOME/.kube/config\n```\n\n## 3.5 工作节点加入集群 \n\n### k8s-worker01节点加入集群 \n\n以下操作仅在Worker节点操作\n\n```bash\nroot@k8s-worker01:~# kubeadm join 192.168.11.161:6443 --token abcdef.0123456789abcdef --discovery-token-ca-cert-hash sha256:c7a1d928a82c30bec6dec880092339e64309b24cc01782d8a9d9c6c0ecfde58f \n```\n\n### k8s-worker02节点加入集群 \n\n以下操作仅在Worker节点操作\n\n```bash\nroot@k8s-worker02:~# kubeadm join 192.168.11.161:6443 --token abcdef.0123456789abcdef --discovery-token-ca-cert-hash sha256:c7a1d928a82c30bec6dec880092339e64309b24cc01782d8a9d9c6c0ecfde58f\n```\n\n\n## 3.6 验证K8S集群节点是否可用 \n\n在Master节点检查集群节点是否可用 \n\n```bash\nroot@k8s-master01:~# kubectl get nodes\n\nNAME           STATUS     ROLES           AGE     VERSION\nk8s-master01   NotReady   control-plane   103m    v1.32.3\nk8s-worker01   NotReady   <none>          4m12s   v1.32.3\nk8s-worker02   NotReady   <none>          4m12s   v1.32.3\n```\n\n在Master节点检查集群Pod状态（按命名空间筛选） \n\n```bash\nroot@k8s-master01:~# kubectl get pods -n kube-system\n\nNAME                                   READY   STATUS    RESTARTS   AGE\ncoredns-6766b7b6bb-6dtl7               0/1     Pending   0          104m\ncoredns-6766b7b6bb-lrpw7               0/1     Pending   0          104m\netcd-k8s-master01                      1/1     Running   0          104m      // 静态pod\nkube-apiserver-k8s-master01            1/1     Running   0          104m      // 静态pod\nkube-controller-manager-k8s-master01   1/1     Running   0          104m      // 静态pod    \nkube-proxy-6g8dn                       1/1     Running   0          104m      \nkube-proxy-kmzv6                       1/1     Running   0          5m1s\nkube-proxy-pj2t5                       1/1     Running   0          5m1s\nkube-scheduler-k8s-master01            1/1     Running   0          104m      // 静态pod \n```\n\n查看命名空间\n\n```bash\nroot@k8s-master01:~# kubectl get cs\n\nWarning: v1 ComponentStatus is deprecated in v1.19+\nNAME                 STATUS    MESSAGE   ERROR\netcd-0               Healthy   ok        \nscheduler            Healthy   ok        \ncontroller-manager   Healthy   ok  \n```\n\n\n# 四、K8S集群网络插件calico部署 \n\n[calico网络插件](https://projectcalico.docs.tigera.io/about/about-calico)\n\n\n\n## 4.1 第一步：安装tigera-operator\n\n```bash\nroot@k8s-master01:~# kubectl create -f https://raw.githubusercontent.com/projectcalico/calico/v3.29.2/manifests/tigera-operator.yaml\n```\n\n### 4.1.1 输出内容：\n\n``` bash\nroot@k8s-master01:~# kubectl create -f https://raw.githubusercontent.com/projectcalico/calico/v3.29.2/manifests/tigera-operator.yaml\n\nnamespace/tigera-operator created\ncustomresourcedefinition.apiextensions.k8s.io/bgpconfigurations.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/bgpfilters.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/bgppeers.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/blockaffinities.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/caliconodestatuses.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/clusterinformations.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/felixconfigurations.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/globalnetworkpolicies.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/globalnetworksets.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/hostendpoints.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/ipamblocks.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/ipamconfigs.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/ipamhandles.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/ippools.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/ipreservations.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/kubecontrollersconfigurations.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/networkpolicies.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/networksets.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/tiers.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/adminnetworkpolicies.policy.networking.k8s.io created\ncustomresourcedefinition.apiextensions.k8s.io/apiservers.operator.tigera.io created\ncustomresourcedefinition.apiextensions.k8s.io/imagesets.operator.tigera.io created\ncustomresourcedefinition.apiextensions.k8s.io/installations.operator.tigera.io created\ncustomresourcedefinition.apiextensions.k8s.io/tigerastatuses.operator.tigera.io created\nserviceaccount/tigera-operator created\nclusterrole.rbac.authorization.k8s.io/tigera-operator created\nclusterrolebinding.rbac.authorization.k8s.io/tigera-operator created\ndeployment.apps/tigera-operator created\n```\n \n\n\n```bash\nroot@k8s-master01:~# kubectl get ns\n\nNAME              STATUS   AGE\ndefault           Active   116m\nkube-node-lease   Active   116m\nkube-public       Active   116m\nkube-system       Active   116m\ntigera-operator   Active   106s      // 新增的pod\n```\n\n\n```bash\nroot@k8s-master01:~# kubectl get pods -n tigera-operator\n\nNAME                              READY   STATUS             RESTARTS   AGE\ntigera-operator-ccfc44587-vswlt   0/1     ImagePullBackOff   0          3m44s\n```\n\n\n## 4.2 第二步：安装calico-system\n\n\n### 4.2.1 下载custom-resources.yaml\n\n```bash\n~# wget https://raw.githubusercontent.com/projectcalico/calico/v3.29.2/manifests/custom-resources.yaml\n```\n\n\n### 4.2.2 修改custom-resources.yaml中的网段cidr配置\n\n```bash \n~# nano custom-resources.yaml\n```\n\n```yaml\n# This section includes base Calico installation configuration.\n# For more information, see: https://projectcalico.docs.tigera.io/master/reference/installation/api#operator.tigera.io/v1.Installation\n apiVersion: operator.tigera.io/v1\n kind: Installation\n metadata:\n  name: default\n spec:\n  # Configures Calico networking.\n  calicoNetwork:\n    # Note: The ipPools section cannot be modified post-install.\n    ipPools:\n    - blockSize: 26\n      cidr: 10.244.0.0/16                # 修改此行内容为初始化时定义的pod network cidr\n      encapsulation: VXLANCrossSubnet\n      natOutgoing: Enabled\n      nodeSelector: all()\n      \n---\n# This section configures the Calico API server.\n# For more information, see: https://projectcalico.docs.tigera.io/master/reference/installation/api#operator.tigera.io/v1.APIServer\napiVersion: operator.tigera.io/v1\nkind: APIServer\nmetadata:\n  name: default\n spec: {}\n```\n\n\n- 再次检查修改后的配置文件\n\n```bash\n~# cat custom-resources.yaml\n```\n\n\n### 4.2.3 应用部署配置文件，进行部署\n\n```bash\nroot@k8s-master01:~# kubectl create -f custom-resources.yaml\n\ninstallation.operator.tigera.io/default created\napiserver.operator.tigera.io/default created\n```\n\n\n### 4.2.4 检查calico安装结果\n\n```bash\nroot@k8s-master01:~# watch kubectl get pods -n calico-system\n```\n\n经过一段时间的下载安装，全部署完成后大致如下输出所示：\n\n```bash\nroot@k8s-master01:~# kubectl get pods -n calico-system\n\nNAME                                      READY   STATUS    RESTARTS   AGE\ncalico-kube-controllers-cf49d8944-6zv2z   1/1     Running   0          53m\ncalico-node-2nfvf                         1/1     Running   0          53m\ncalico-node-nxhvj                         1/1     Running   0          53m\ncalico-node-v9lp9                         1/1     Running   0          53m\ncalico-typha-7b6f98bc78-49bf5             1/1     Running   0          53m\ncalico-typha-7b6f98bc78-7vhd6             1/1     Running   0          53m\ncsi-node-driver-6nbvr                     2/2     Running   0          53m\ncsi-node-driver-9cqq5                     2/2     Running   0          53m\ncsi-node-driver-9pm4t                     2/2     Running   0          53m   \n```\n\n\n查看节点状态变化：\n\n```bash\nroot@k8s-master01:~# kubectl get nodes\n\nNAME           STATUS   ROLES           AGE     VERSION\nk8s-master01   Ready    control-plane   3h40m   v1.32.3\nk8s-worker01   Ready    <none>          121m    v1.32.3\nk8s-worker02   Ready    <none>          121m    v1.32.3\n```\n\n查看pod状态\n\n```bash\nroot@k8s-master01:~# kubectl get pods -n kube-system\n\nNAME                                   READY   STATUS    RESTARTS   AGE\ncoredns-6766b7b6bb-6dtl7               1/1     Running   0          3h42m\ncoredns-6766b7b6bb-lrpw7               1/1     Running   0          3h42m\netcd-k8s-master01                      1/1     Running   0          3h42m\nkube-apiserver-k8s-master01            1/1     Running   0          3h42m\nkube-controller-manager-k8s-master01   1/1     Running   0          3h42m\nkube-proxy-6g8dn                       1/1     Running   0          3h42m\nkube-proxy-kmzv6                       1/1     Running   0          122m\nkube-proxy-pj2t5                       1/1     Running   0          122m\nkube-scheduler-k8s-master01            1/1     Running   0          3h42m\n```\n\n查看pod的IP及网段\n\n```bash\nroot@k8s-master01:~# kubectl get pods -n kube-system -o wide\n\nNAME                                   READY   STATUS    RESTARTS   AGE     IP               NODE           NOMINATED NODE   READINESS GATES\ncoredns-6766b7b6bb-6dtl7               1/1     Running   0          3h43m   10.244.69.198    k8s-worker02   <none>           <none>\ncoredns-6766b7b6bb-lrpw7               1/1     Running   0          3h43m   10.244.69.197    k8s-worker02   <none>           <none>\netcd-k8s-master01                      1/1     Running   0          3h44m   192.168.11.161   k8s-master01   <none>           <none>\nkube-apiserver-k8s-master01            1/1     Running   0          3h44m   192.168.11.161   k8s-master01   <none>           <none>\nkube-controller-manager-k8s-master01   1/1     Running   0          3h44m   192.168.11.161   k8s-master01   <none>           <none>\nkube-proxy-6g8dn                       1/1     Running   0          3h43m   192.168.11.161   k8s-master01   <none>           <none>\nkube-proxy-kmzv6                       1/1     Running   0          124m    192.168.11.165   k8s-worker01   <none>           <none>\nkube-proxy-pj2t5                       1/1     Running   0          124m    192.168.11.166   k8s-worker02   <none>           <none>\nkube-scheduler-k8s-master01            1/1     Running   0          3h44m   192.168.11.161   k8s-master01   <none>           <none>\n```\n\n\n\n# 五、部署Nginx应用验证K8S集群可用性 \n\n本章以Nginx为例，先添加nginx应用配置文件nginx.yaml，再添加相关应用配置\n\n\n## 5.1 配置NginxWeb部署配置文件nginx-website.yaml\n\n```bash\nroot@k8s-master01:~# nano /home/acanx/nginx-website.yaml\n```\n\n```yaml\n---\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: nginxweb\nspec:\n  selector:\n    matchLabels:\n      app: nginxwebsite\n  replicas: 3\n  template:\n    metadata:\n      labels:\n        app: nginxwebsite\n    spec:\n      containers:\n      - name: nginxwebsite\n        image: nginx:latest\n        imagePullPolicy: IfNotPresent\n        ports:\n        - containerPort: 80\n---\napiVersion: v1\nkind: Service\nmetadata:\n  name: nginxweb-service\nspec:\n  externalTrafficPolicy: Cluster\n  selector:\n    app: nginxwebsite\n  ports:\n  - protocol: TCP\n    port: 80\n    targetPort: 80\n    nodePort: 30080\n  type: NodePort\n```\n\n\n## 5.2 执行命令部署nginx服务\n\n```bash\nroot@k8s-master01:~# kubectl apply -f /home/acanx/nginx-website.yaml\n```\n\n```\ndeployment.apps/nginxweb created\nservice/nginxweb-service created\n```\n\n\n## 5.3 检查部署结果\n\n```bash\nroot@k8s-master01:~# kubectl get deployment\n\nNAME       READY   UP-TO-DATE   AVAILABLE   AGE\nnginxweb   0/3     3            0           2m35s\n```\n\n```bash\nroot@k8s-master01:~# kubectl get pods\n\nNAME                       READY   STATUS              RESTARTS   AGE\nnginxweb-7c88f6c77-pck4f   0/1     ContainerCreating   0          3m43s\nnginxweb-7c88f6c77-rv76n   0/1     ContainerCreating   0          3m43s\nnginxweb-7c88f6c77-vb8xj   0/1     ContainerCreating   0          3m43s\n```\n\n\n### 5.3.1 测试K8S集群内访问\n\n```bash\nroot@k8s-master01:~# kubectl get service\n\nNAME               TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)        AGE\nkubernetes         ClusterIP   10.96.0.1       <none>        443/TCP        4h11m\nnginxweb-service   NodePort    10.106.65.218   <none>        80:30080/TCP   10m\nroot@k8s-master01:~# curl http://10.106.65.218               // 验证在K8S集群内布访问\n\n<!DOCTYPE html>\n<html>\n<head>\n<title>Welcome to nginx!</title>\n<style>\nhtml { color-scheme: light dark; }\nbody { width: 35em; margin: 0 auto;\nfont-family: Tahoma, Verdana, Arial, sans-serif; }\n</style>\n</head>\n<body>\n<h1>Welcome to nginx!</h1>\n<p>If you see this page, the nginx web server is successfully installed and\nworking. Further configuration is required.</p>\n\n<p>For online documentation and support please refer to\n<a href=\"http://nginx.org/\">nginx.org</a>.<br/>\nCommercial support is available at\n<a href=\"http://nginx.com/\">nginx.com</a>.</p>\n\n<p><em>Thank you for using nginx.</em></p>\n</body>\n</html>\n```\n\n### 5.3.2 测试集群外访问\n\n打开集群外的局域网内内主机，正常情况下集群内任意一个节点IP加对应端口号都可以访问，实际分别测试访问 http://192.168.11.161:30080/ http://192.168.11.165:30080/  http://192.168.11.166:30080/ 页面，以上三个url链接均可以正常打开。\n\n效果如下图所示：\n\n![Master01](/Node/imgs/03_02/Nginx-K8SMaster01.png)\n![Worker01](/Node/imgs/03_02/Nginx-K8SWorker01.png)\n![Worker02](/Node/imgs/03_02/Nginx-K8SWorker02.png)\n\n上述页面可以正常显示则说明nginx演示应用部署成功！\n\n\n\n# 六、 部署Kubernetes Dashboard应用\n\n- [部署和访问 Kubernetes 仪表板（Dashboard）](https://kubernetes.io/zh-cn/docs/tasks/access-application-cluster/web-ui-dashboard/)\n\n## 6.1 安装Helm \n\n### 6.1.1 Helm介绍及下载\n\nHelm 是查找、分享和使用软件构建 Kubernetes 的最优方式。\n\n- 官网 https://helm.sh/\n- 项目地址 https://github.com/helm/helm\n- Helm安装文档 https://helm.sh/zh/docs/intro/install/\n\n### 6.1.2 Helm安装\n\n\n```bash\nroot@k8s-master01:~# wget https://get.helm.sh/helm-v3.17.2-linux-amd64.tar.gz   # 下载文件\n\nroot@k8s-master01:~# tar -zxvf /home/acanx/helm-v3.0.0-linux-amd64.tar.gz         # 解压文件\n\nroot@k8s-master01:~# sudo mv linux-amd64/helm /usr/local/bin/helm                    # 移动到指定目录\nroot@k8s-master01:~# sudo mv /home/acanx/helm /usr/local/bin/helm                    # 移动到指定目录\n\nroot@k8s-master01:~# ls -l /usr/local/bin/helm\n\nroot@k8s-master01:~# chmod 755 /usr/local/bin/helm\n\nroot@k8s-master01:~# helm \n```\n\n```bash\nroot@k8s-master01:~# helm\n\nThe Kubernetes package manager\n\nCommon actions for Helm:\n\n- helm search:    search for charts\n- helm pull:      download a chart to your local directory to view\n- helm install:   upload the chart to Kubernetes\n- helm list:      list releases of charts\n\nEnvironment variables:\n\n| Name                               | Description                                                                                                |\n|------------------------------------|------------------------------------------------------------------------------------------------------------|\n| $HELM_CACHE_HOME                   | set an alternative location for storing cached files.                                                      |\n| $HELM_CONFIG_HOME                  | set an alternative location for storing Helm configuration.                                                |\n| $HELM_DATA_HOME                    | set an alternative location for storing Helm data.                                                         |\n| $HELM_DEBUG                        | indicate whether or not Helm is running in Debug mode                                                      |\n| $HELM_DRIVER                       | set the backend storage driver. Values are: configmap, secret, memory, sql.                                |\n| $HELM_DRIVER_SQL_CONNECTION_STRING | set the connection string the SQL storage driver should use.                                               |\n| $HELM_MAX_HISTORY                  | set the maximum number of helm release history.                                                            |\n| $HELM_NAMESPACE                    | set the namespace used for the helm operations.                                                            |\n| $HELM_NO_PLUGINS                   | disable plugins. Set HELM_NO_PLUGINS=1 to disable plugins.                                                 |\n| $HELM_PLUGINS                      | set the path to the plugins directory                                                                      |\n| $HELM_REGISTRY_CONFIG              | set the path to the registry config file.                                                                  |\n| $HELM_REPOSITORY_CACHE             | set the path to the repository cache directory                                                             |\n| $HELM_REPOSITORY_CONFIG            | set the path to the repositories file.                                                                     |\n| $KUBECONFIG                        | set an alternative Kubernetes configuration file (default \"~/.kube/config\")                                |\n| $HELM_KUBEAPISERVER                | set the Kubernetes API Server Endpoint for authentication                                                  |\n| $HELM_KUBECAFILE                   | set the Kubernetes certificate authority file.                                                             |\n| $HELM_KUBEASGROUPS                 | set the Groups to use for impersonation using a comma-separated list.                                      |\n| $HELM_KUBEASUSER                   | set the Username to impersonate for the operation.                                                         |\n| $HELM_KUBECONTEXT                  | set the name of the kubeconfig context.                                                                    |\n| $HELM_KUBETOKEN                    | set the Bearer KubeToken used for authentication.                                                          |\n| $HELM_KUBEINSECURE_SKIP_TLS_VERIFY | indicate if the Kubernetes API server's certificate validation should be skipped (insecure)                |\n| $HELM_KUBETLS_SERVER_NAME          | set the server name used to validate the Kubernetes API server certificate                                 |\n| $HELM_BURST_LIMIT                  | set the default burst limit in the case the server contains many CRDs (default 100, -1 to disable)         |\n| $HELM_QPS                          | set the Queries Per Second in cases where a high number of calls exceed the option for higher burst values |\n\nHelm stores cache, configuration, and data based on the following configuration order:\n\n- If a HELM_*_HOME environment variable is set, it will be used\n- Otherwise, on systems supporting the XDG base directory specification, the XDG variables will be used\n- When no other location is set a default location will be used based on the operating system\n\nBy default, the default directories depend on the Operating System. The defaults are listed below:\n\n| Operating System | Cache Path                | Configuration Path             | Data Path               |\n|------------------|---------------------------|--------------------------------|-------------------------|\n| Linux            | $HOME/.cache/helm         | $HOME/.config/helm             | $HOME/.local/share/helm |\n| macOS            | $HOME/Library/Caches/helm | $HOME/Library/Preferences/helm | $HOME/Library/helm      |\n| Windows          | %TEMP%\\helm               | %APPDATA%\\helm                 | %APPDATA%\\helm          |\n\nUsage:\n  helm [command]\n\nAvailable Commands:\n  completion  generate autocompletion scripts for the specified shell\n  create      create a new chart with the given name\n  dependency  manage a chart's dependencies\n  env         helm client environment information\n  get         download extended information of a named release\n  help        Help about any command\n  history     fetch release history\n  install     install a chart\n  lint        examine a chart for possible issues\n  list        list releases\n  package     package a chart directory into a chart archive\n  plugin      install, list, or uninstall Helm plugins\n  pull        download a chart from a repository and (optionally) unpack it in local directory\n  push        push a chart to remote\n  registry    login to or logout from a registry\n  repo        add, list, remove, update, and index chart repositories\n  rollback    roll back a release to a previous revision\n  search      search for a keyword in charts\n  show        show information of a chart\n  status      display the status of the named release\n  template    locally render templates\n  test        run tests for a release\n  uninstall   uninstall a release\n  upgrade     upgrade a release\n  verify      verify that a chart at the given path has been signed and is valid\n  version     print the client version information\n\nFlags:\n      --burst-limit int                 client-side default throttling limit (default 100)\n      --debug                           enable verbose output\n  -h, --help                            help for helm\n      --kube-apiserver string           the address and the port for the Kubernetes API server\n      --kube-as-group stringArray       group to impersonate for the operation, this flag can be repeated to specify multiple groups.\n      --kube-as-user string             username to impersonate for the operation\n      --kube-ca-file string             the certificate authority file for the Kubernetes API server connection\n      --kube-context string             name of the kubeconfig context to use\n      --kube-insecure-skip-tls-verify   if true, the Kubernetes API server's certificate will not be checked for validity. This will make your HTTPS connections insecure\n      --kube-tls-server-name string     server name to use for Kubernetes API server certificate validation. If it is not provided, the hostname used to contact the server is used\n      --kube-token string               bearer token used for authentication\n      --kubeconfig string               path to the kubeconfig file\n  -n, --namespace string                namespace scope for this request\n      --qps float32                     queries per second used when communicating with the Kubernetes API, not including bursting\n      --registry-config string          path to the registry config file (default \"/root/.config/helm/registry/config.json\")\n      --repository-cache string         path to the directory containing cached repository indexes (default \"/root/.cache/helm/repository\")\n      --repository-config string        path to the file containing repository names and URLs (default \"/root/.config/helm/repositories.yaml\")\n\nUse \"helm [command] --help\" for more information about a command.\nroot@k8s-master01:~# \n```\n\n若输出上述内容，则说明安装成功\n\n\n\n## 6.2 安装kubernetes-dashboard\n\n\n### 6.2.1 添加 kubernetes-dashboard 仓库\n\n```bash\nhelm repo add kubernetes-dashboard https://kubernetes.github.io/dashboard/\n```\n\n- /root/.cache/helm/repository/kubernetes-dashboard-charts.txt\n- /root/.cache/helm/repository/kubernetes-dashboard-index.yaml\n\n\n```bash\nroot@k8s-master01:~/.cache/helm/repository# helm repo list\n\nNAME                \tURL                                    \nkubernetes-dashboard\thttps://kubernetes.github.io/dashboard/\nroot@k8s-master01:~/.cache/helm/repository# \n```\n\n\n\n### 6.2.2 使用 kubernetes-dashboard Chart 部署名为“kubernetes-dashboard” 的 Helm Release\n\n```bash\nhelm upgrade --install kubernetes-dashboard kubernetes-dashboard/kubernetes-dashboard --create-namespace --namespace kubernetes-dashboard\n```\n\n```bash\nroot@k8s-master01:~# helm upgrade --install kubernetes-dashboard kubernetes-dashboard/kubernetes-dashboard --create-namespace --namespace kubernetes-dashboard\n\nRelease \"kubernetes-dashboard\" does not exist. Installing it now.\nNAME: kubernetes-dashboard\nLAST DEPLOYED: Sun Mar 23 17:44:31 2025\nNAMESPACE: kubernetes-dashboard\nSTATUS: deployed\nREVISION: 1\nTEST SUITE: None\nNOTES:\n*************************************************************************************************\n*** PLEASE BE PATIENT: Kubernetes Dashboard may need a few minutes to get up and become ready ***\n*************************************************************************************************\n\nCongratulations! You have just installed Kubernetes Dashboard in your cluster.\n\nTo access Dashboard run:\n  kubectl -n kubernetes-dashboard port-forward svc/kubernetes-dashboard-kong-proxy 8443:443\n\nNOTE: In case port-forward command does not work, make sure that kong service name is correct.\n      Check the services in Kubernetes Dashboard namespace using:\n        kubectl -n kubernetes-dashboard get svc\n\nDashboard will be available at:\n  https://localhost:8443\nroot@k8s-master01:~# \n\n\n\n# 注意：以下命令未做验证，后续可以测试确认\n# 我的集群使用默认参数安装 kubernetes-dashboard-kong 出现异常 8444 端口占用\n# 使用下面的命令进行安装，在安装时关闭kong.tls功能\nroot@k8s-master01:~# helm upgrade --install kubernetes-dashboard kubernetes-dashboard/kubernetes-dashboard --namespace kubernetes-dashboard --set kong.admin.tls.enabled=false   # 原文链接：https://blog.csdn.net/qq_33921750/article/details/136668014\n```\n\n#### 查看kubernetes-dashboard相关的pod的安装情况\n\n```bash\nroot@k8s-master01:~# watch kubectl get pod -A\n\nNAMESPACE              NAME                                                    READY   STATUS              RESTARTS   AGE\ncalico-apiserver       calico-apiserver-7b7bbf4d75-b77ph                       1/1     Running             0          18h\ncalico-apiserver       calico-apiserver-7b7bbf4d75-gqq5w                       1/1     Running             0          18h\ncalico-system          calico-kube-controllers-cf49d8944-6zv2z                 1/1     Running             0          18h\ncalico-system          calico-node-2nfvf                                       1/1     Running             0          18h\ncalico-system          calico-node-nxhvj                                       1/1     Running             0          18h\ncalico-system          calico-node-v9lp9                                       1/1     Running             0          18h\ncalico-system          calico-typha-7b6f98bc78-49bf5                           1/1     Running             0          18h\ncalico-system          calico-typha-7b6f98bc78-7vhd6                           1/1     Running             0          18h\ncalico-system          csi-node-driver-6nbvr                                   2/2     Running             0          18h\ncalico-system          csi-node-driver-9cqq5                                   2/2     Running             0          18h\ncalico-system          csi-node-driver-9pm4t                                   2/2     Running             0          18h\ndefault                nginxweb-7c88f6c77-pck4f                                1/1     Running             0          17h\ndefault                nginxweb-7c88f6c77-rv76n                                1/1     Running             0          17h\ndefault                nginxweb-7c88f6c77-vb8xj                                1/1     Running             0          17h\nkube-system            coredns-6766b7b6bb-6dtl7                                1/1     Running             0          21h\nkube-system            coredns-6766b7b6bb-lrpw7                                1/1     Running             0          21h\nkube-system            etcd-k8s-master01                                       1/1     Running             0          21h\nkube-system            kube-apiserver-k8s-master01                             1/1     Running             0          21h\nkube-system            kube-controller-manager-k8s-master01                    1/1     Running             0          21h\nkube-system            kube-proxy-6g8dn                                        1/1     Running             0          21h\nkube-system            kube-proxy-kmzv6                                        1/1     Running             0          19h\nkube-system            kube-proxy-pj2t5                                        1/1     Running             0          19h\nkube-system            kube-scheduler-k8s-master01                             1/1     Running             0          21h\nkubernetes-dashboard   kubernetes-dashboard-api-c787c9d97-5rqvp                0/1     ContainerCreating   0          2m35s\nkubernetes-dashboard   kubernetes-dashboard-auth-7ff7855689-vmltw              0/1     ContainerCreating   0          2m35s\nkubernetes-dashboard   kubernetes-dashboard-kong-79867c9c48-txfql              0/1     Init:0/1            0          2m35s\nkubernetes-dashboard   kubernetes-dashboard-metrics-scraper-84655b9bd8-mq8h7   0/1     ContainerCreating   0          2m35s\nkubernetes-dashboard   kubernetes-dashboard-web-658946f7f9-crj69               0/1     ContainerCreating   0          2m35s\ntigera-operator        tigera-operator-ccfc44587-vswlt                         1/1     Running             0          19h\n\n\n\nroot@k8s-master01:~/.cache/helm/repository# kubectl get pod -A\n\nNAMESPACE              NAME                                                    READY   STATUS    RESTARTS   AGE\ncalico-apiserver       calico-apiserver-7b7bbf4d75-b77ph                       1/1     Running   0          19h\ncalico-apiserver       calico-apiserver-7b7bbf4d75-gqq5w                       1/1     Running   0          19h\ncalico-system          calico-kube-controllers-cf49d8944-6zv2z                 1/1     Running   0          19h\ncalico-system          calico-node-2nfvf                                       1/1     Running   0          19h\ncalico-system          calico-node-nxhvj                                       1/1     Running   0          19h\ncalico-system          calico-node-v9lp9                                       1/1     Running   0          19h\ncalico-system          calico-typha-7b6f98bc78-49bf5                           1/1     Running   0          19h\ncalico-system          calico-typha-7b6f98bc78-7vhd6                           1/1     Running   0          19h\ncalico-system          csi-node-driver-6nbvr                                   2/2     Running   0          19h\ncalico-system          csi-node-driver-9cqq5                                   2/2     Running   0          19h\ncalico-system          csi-node-driver-9pm4t                                   2/2     Running   0          19h\ndefault                nginxweb-7c88f6c77-pck4f                                1/1     Running   0          18h\ndefault                nginxweb-7c88f6c77-rv76n                                1/1     Running   0          18h\ndefault                nginxweb-7c88f6c77-vb8xj                                1/1     Running   0          18h\nkube-system            coredns-6766b7b6bb-6dtl7                                1/1     Running   0          22h\nkube-system            coredns-6766b7b6bb-lrpw7                                1/1     Running   0          22h\nkube-system            etcd-k8s-master01                                       1/1     Running   0          22h\nkube-system            kube-apiserver-k8s-master01                             1/1     Running   0          22h\nkube-system            kube-controller-manager-k8s-master01                    1/1     Running   0          22h\nkube-system            kube-proxy-6g8dn                                        1/1     Running   0          22h\nkube-system            kube-proxy-kmzv6                                        1/1     Running   0          20h\nkube-system            kube-proxy-pj2t5                                        1/1     Running   0          20h\nkube-system            kube-scheduler-k8s-master01                             1/1     Running   0          22h\nkubernetes-dashboard   kubernetes-dashboard-api-c787c9d97-5rqvp                1/1     Running   0          41m\nkubernetes-dashboard   kubernetes-dashboard-auth-7ff7855689-vmltw              1/1     Running   0          41m\nkubernetes-dashboard   kubernetes-dashboard-kong-79867c9c48-txfql              1/1     Running   0          41m\nkubernetes-dashboard   kubernetes-dashboard-metrics-scraper-84655b9bd8-mq8h7   1/1     Running   0          41m\nkubernetes-dashboard   kubernetes-dashboard-web-658946f7f9-crj69               1/1     Running   0          41m\ntigera-operator        tigera-operator-ccfc44587-vswlt                         1/1     Running   0          20h\n```\n\n\n## 6.3 访问Dashboard前的准备\n\n本节参考自官方文档 \n\n- [创建示例用户](https://github.com/kubernetes/dashboard/blob/master/docs/user/access-control/creating-sample-user.md)\n\n\n### 6.3.1 创建示例用户 service-account\n\n创建dashboard-service-account.yaml文件\n\n```yaml\napiVersion: v1\nkind: ServiceAccount\nmetadata:\n  name: admin-user\n  namespace: kubernetes-dashboard\n```\n\n创建示例用户service-account命令\n\n```bash\nroot@k8s-master01:~# kubectl create -f dashboard-service-account.yaml\n```\n\n\n### 6.3.2 创建 ClusterRoleBinding\n\n创建dashboard-cluster-role-binding.yaml文件\n\n```yaml\napiVersion: rbac.authorization.k8s.io/v1\nkind: ClusterRoleBinding\nmetadata:\n  name: admin-user\nroleRef:\n  apiGroup: rbac.authorization.k8s.io\n  kind: ClusterRole\n  name: cluster-admin\nsubjects:\n- kind: ServiceAccount\n  name: admin-user\n  namespace: kubernetes-dashboard\n```\n\n创建 ClusterRoleBinding\n\n```bash\n# 创建 ClusterRoleBinding\nroot@k8s-master01:~# kubectl create -f dashboard-cluster-role-binding.yaml\n```\n\n\n\n创建dashboard-admin-user.yaml 文件\n\n```yaml\napiVersion: v1\nkind: ServiceAccount\nmetadata:\n  name: admin-user\n  namespace: kubernetes-dashboard\n---\napiVersion: rbac.authorization.k8s.io/v1\nkind: ClusterRoleBinding\nmetadata:\n  name: admin-user\nroleRef:\n  apiGroup: rbac.authorization.k8s.io\n  kind: ClusterRole\n  name: cluster-admin\nsubjects:\n- kind: ServiceAccount\n  name: admin-user\n  namespace: kubernetes-dashboard\n```\n\n创建 ServiceAccount、ClusterRoleBinding\n\n```bash\nroot@k8s-master01:~/.cache/helm/repository# kubectl create -f /home/acanx/Dashboard/dashboard-admin-user.yaml\n\nserviceaccount/admin-user created\nclusterrolebinding.rbac.authorization.k8s.io/admin-user created\n```\n\n#### 6.3.3 获取 ServiceAccount 的 Bearer Token（短期访问的Token令牌） \n\n```bash\n# 生成toke命令\nroot@k8s-master01:~/.cache/helm/repository# kubectl -n kubernetes-dashboard create token admin-user\n\neyJhbGciOiJSUzI1NiIsImtpZCI6IjZPMURRc2RoVjl0YWJnUGU2RDVyLTRKblhybnhBaG1oS3JoVGNBTjh6UkkifQ.eyJhdWQiOlsiaHR0cHM6Ly9rdWJlcm5ldGVzLmRlZmF1bHQuc3ZjLmNsdXN0ZXIubG9jYWwiXSwiZXhwIjoxNzQyNzMxMjUwLCJpYXQiOjE3NDI3Mjc2NTAsImlzcyI6Imh0dHBzOi8va3ViZXJuZXRlcy5kZWZhdWx0LnN2Yy5jbHVzdGVyLmxvY2FsIiwianRpIjoiYWM2NWZiNTItNjViMi00ZmQ5LWI4OTctMzQ4NjI4N2UzYTlmIiwia3ViZXJuZXRlcy5pbyI6eyJuYW1lc3BhY2UiOiJrdWJlcm5ldGVzLWRhc2hib2FyZCIsInNlcnZpY2VhY2NvdW50Ijp7Im5hbWUiOiJhZG1pbi11c2VyIiwidWlkIjoiNTBhNzgwZTYtODgzOC00ODI1LTk5ODktMzdhYTE0ZjM5ZjlkIn19LCJuYmYiOjE3NDI3Mjc2NTAsInN1YiI6InN5c3RlbTpzZXJ2aWNlYWNjb3VudDprdWJlcm5ldGVzLWRhc2hib2FyZDphZG1pbi11c2VyIn0.9j0DPg2sKuVfODjWBxxXN3-r1GmXCGV58LULx81fiCwE5IdCp0LK4to0T35c55yiZjkW2fc7l01k6V7uKFTCGiJ3TDJn_1JJe5lZpWBWXSWoO_q-1nkMgniGPowieHEny3ZU1wm-Kk-nrr2CYZKhXShGDbRxpnjAPf1X0aB6lAzPt59GKVYpPaMYhcEBMMT_ASZrGLYrNR31UpbEXf2UP9Cgyh9m5vpA48FOJKZNt8FRq20egHWlWCw4a4PPb261w81vcWWB1bwTHIw-8CyNZjptrPVX06ch4DT-eX5No5jr8kh2gCiq--bARESxjgDjCebBS8O96NpKRWtQMQbFAQ\n```\n\n获取到的toke是类似上述的字符串\n\n\n\n#### 6.3.4 获取 ServiceAccount 的长期 Bearer Token （长期Token） \n\n- 创建dashboard-secret.yaml文件\n\n```yaml\napiVersion: v1\nkind: Secret\nmetadata:\n  name: admin-user\n  namespace: kubernetes-dashboard\n  annotations:\n    kubernetes.io/service-account.name: \"admin-user\"   \ntype: kubernetes.io/service-account-token  \n```\n\n- 获取 ServiceAccount 的长期 Bearer Token \n\n```bash\n# 创建\nroot@k8s-master01:~# kubectl create -f /home/acanx/Dashboard/dashboard-secret.yaml\n\n# 获取对应的token令牌\nroot@k8s-master01:~# kubectl get secret admin-user -n kubernetes-dashboard -o jsonpath=\"{.data.token}\" | base64 -d\n\neyJhbGciOiJSUzI1NiIsImtpZCI6IjZPMURRc2RoVjl0YWJnUGU2RDVyLTRKblhybnhBaG1oS3JoVGNBTjh6UkkifQ.eyJpc3MiOiJrdWJlcm5ldGVzL3NlcnZpY2VhY2NvdW50Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9uYW1lc3BhY2UiOiJrdWJlcm5ldGVzLWRhc2hib2FyZCIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VjcmV0Lm5hbWUiOiJhZG1pbi11c2VyIiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9zZXJ2aWNlLWFjY291bnQubmFtZSI6ImFkbWluLXVzZXIiLCJrdWJlcm5ldGVzLmlvL3NlcnZpY2VhY2NvdW50L3NlcnZpY2UtYWNjb3VudC51aWQiOiI1MGE3ODBlNi04ODM4LTQ4MjUtOTk4OS0zN2FhMTRmMzlmOWQiLCJzdWIiOiJzeXN0ZW06c2VydmljZWFjY291bnQ6a3ViZXJuZXRlcy1kYXNoYm9hcmQ6YWRtaW4tdXNlciJ9.UG-iAoiCRrMeUePUi5ryn4tUOhFC94eTv_THHkrT_XZhUwC-IHqy9zkmi20tfQ-jnSnzy9_H9Z_auNw6Y4VtGB6pUs7srk6X9AIr4JDrScEVSMLbLXyCsdwGKbAaQJ8n2KA0J_pXibAiaQ77vCIDs9A4HXjn-T7GhoWEeswAcZF1N1SYbDyMxC-paMKb2I5CxL6pxtgWXuPCFkHxVnzeAT9Pswj-q0_Htr46U0Ieyo3dEBVGoOE4FA56UCYEnIfIv-OHXHytcxdaETrKl22EWleAYYENQy82qrdn8eCMK9ahOQyvCFORUbltJWP0hRkIRoMSGx1gD1DMHWMd6T9IRw\n```\n\n\n\n### 6.4 正式访问Dashboard  \n\n参考资料 [Kubernetes 集群中安装和配置 Kubernetes Dashboard](https://blog.csdn.net/qq719779232/article/details/145212142)\n\n\n### 6.4.1 方式一：使用 Port Forwarding进行命令行代理\n\nPort Forwarding 是一种临时性的解决方案，它允许你通过本地机器上的端口直接访问集群内部的服务。这对于开发人员来说非常方便，因为他们不需要对外暴露服务即可进行调试或测试。\n\n\n#### 6.4.1.1 开启访问\n\n通过 Port Forwarding 访问 Dashboard，需要先执行如下命令：\n\n```bash\nkubectl -n kubernetes-dashboard port-forward svc/kubernetes-dashboard 8443:443\n```\n\n这将Dashboard在 [https://localhost:8443](https://localhost:8443) 上可用。\n\n\n#### 6.4.1.2 优点与缺点\n\n- 这种方式的优点在于方法简单易用，无需更改任何集群配置，适合小规模测试或个人使用。但仅限于执行命令的本地机器，它是临时的，关闭终端后连接即断开，无法在其他机器上访问，并且每次使用时都需要手动开启端口转发。\n\n- 也就是说，无法直接在集群外部访问，此方案不适合本次（集群外访问）实际访问场景，因此需要调整采用其他方案\n\n\n### 6.4.2 方式二：修改服务类型为 NodePort\n\n#### 6.4.2.1 方法概述\n\n- NodePort 允许 Kubernetes 服务在各个集群节点的特定端口上对外暴露。这使得用户能够通过任意节点的 IP 地址和指定 NodePort 进行访问 Dashboard。（范围通常是 30000-32767），从而允许外部流量通过该端口进入集群并访问指定的服务。\n\n- 也就是支持集群外部访问\n\n\n#### 6.4.2.2 开启访问\n\n编辑 Dashboard 的服务配置，将其类型更改为 NodePort：\n\n```bash\nroot@k8s-master01:~# kubectl patch svc kubernetes-dashboard-kong-proxy -n kubernetes-dashboard --type='json' -p '[{\"op\":\"replace\",\"path\":\"/spec/type\",\"value\":\"NodePort\"}]'\n# TODO 若需要指定端口，可以指定一个固定的 nodePort：\nroot@k8s-master01:~# kubectl patch svc kubernetes-dashboard-kong-proxy -n kubernetes-dashboard --type='json' -p '[{\"op\":\"add\",\"path\":\"/spec/ports/0/nodePort\",\"value\":30000}]'\n```\n\n以下是实际操作及结果：\n\n```bash\nroot@k8s-master01:~# kubectl patch svc kubernetes-dashboard-kong-proxy -n kubernetes-dashboard --type='json' -p '[{\"op\":\"replace\",\"path\":\"/spec/type\",\"value\":\"NodePort\"}]'\n\nservice/kubernetes-dashboard-kong-proxy patched\nroot@k8s-master01:~# kubectl get svc -A\n\nNAMESPACE              NAME                                   TYPE        CLUSTER-IP       EXTERNAL-IP   PORT(S)                  AGE\ncalico-apiserver       calico-api                             ClusterIP   10.109.219.68    <none>        443/TCP                  21h\ncalico-system          calico-kube-controllers-metrics        ClusterIP   None             <none>        9094/TCP                 20h\ncalico-system          calico-typha                           ClusterIP   10.104.149.150   <none>        5473/TCP                 21h\ndefault                kubernetes                             ClusterIP   10.96.0.1        <none>        443/TCP                  23h\ndefault                nginxweb-service                       NodePort    10.106.65.218    <none>        80:30080/TCP             19h\nkube-system            kube-dns                               ClusterIP   10.96.0.10       <none>        53/UDP,53/TCP,9153/TCP   23h\nkubernetes-dashboard   kubernetes-dashboard-api               ClusterIP   10.104.42.174    <none>        8000/TCP                 128m\nkubernetes-dashboard   kubernetes-dashboard-auth              ClusterIP   10.98.125.185    <none>        8000/TCP                 128m\nkubernetes-dashboard   kubernetes-dashboard-external          NodePort    10.101.246.117   <none>        443:30011/TCP            7m8s\nkubernetes-dashboard   kubernetes-dashboard-kong-proxy        NodePort    10.110.23.250    <none>        443:31094/TCP            128m\nkubernetes-dashboard   kubernetes-dashboard-metrics-scraper   ClusterIP   10.102.211.164   <none>        8000/TCP                 128m\nkubernetes-dashboard   kubernetes-dashboard-web               ClusterIP   10.107.236.126   <none>        8000/TCP                 128m\n\n# 相关的命令1\nroot@k8s-master01:~# kubectl get svc -A | grep dash\n\nkubernetes-dashboard   kubernetes-dashboard-api               ClusterIP   10.104.42.174    <none>        8000/TCP                 166m\nkubernetes-dashboard   kubernetes-dashboard-auth              ClusterIP   10.98.125.185    <none>        8000/TCP                 166m\nkubernetes-dashboard   kubernetes-dashboard-external          NodePort    10.101.246.117   <none>        443:30011/TCP            44m\nkubernetes-dashboard   kubernetes-dashboard-kong-proxy        NodePort    10.110.23.250    <none>        443:31094/TCP            166m\nkubernetes-dashboard   kubernetes-dashboard-metrics-scraper   ClusterIP   10.102.211.164   <none>        8000/TCP                 166m\nkubernetes-dashboard   kubernetes-dashboard-web               ClusterIP   10.107.236.126   <none>        8000/TCP                 166m\n\n# 相关的命令2\nroot@k8s-master01:~# kubectl get svc -A -n kubernetes-dashboard\n\nNAMESPACE              NAME                                   TYPE        CLUSTER-IP       EXTERNAL-IP   PORT(S)                  AGE\ncalico-apiserver       calico-api                             ClusterIP   10.109.219.68    <none>        443/TCP                  21h\ncalico-system          calico-kube-controllers-metrics        ClusterIP   None             <none>        9094/TCP                 21h\ncalico-system          calico-typha                           ClusterIP   10.104.149.150   <none>        5473/TCP                 21h\ndefault                kubernetes                             ClusterIP   10.96.0.1        <none>        443/TCP                  24h\ndefault                nginxweb-service                       NodePort    10.106.65.218    <none>        80:30080/TCP             20h\nkube-system            kube-dns                               ClusterIP   10.96.0.10       <none>        53/UDP,53/TCP,9153/TCP   24h\nkubernetes-dashboard   kubernetes-dashboard-api               ClusterIP   10.104.42.174    <none>        8000/TCP                 165m\nkubernetes-dashboard   kubernetes-dashboard-auth              ClusterIP   10.98.125.185    <none>        8000/TCP                 165m\nkubernetes-dashboard   kubernetes-dashboard-external          NodePort    10.101.246.117   <none>        443:30011/TCP            44m\nkubernetes-dashboard   kubernetes-dashboard-kong-proxy        NodePort    10.110.23.250    <none>        443:31094/TCP            165m\nkubernetes-dashboard   kubernetes-dashboard-metrics-scraper   ClusterIP   10.102.211.164   <none>        8000/TCP                 165m\nkubernetes-dashboard   kubernetes-dashboard-web               ClusterIP   10.107.236.126   <none>        8000/TCP                 165m\n\n```\n\n\n\n如果显示您的连接不是私密连接，在当前页面用键盘输入thisisunsafe,不是在地址栏输入，就直接输入，页面即会自动刷新进入网页。不行就多输入几次，但是要确保输入是正确的。具体请查看这篇[博客](https://blog.csdn.net/qq719779232/article/details/144852360)\n\n\n#### 6.4.2.4 访问Kubernetes Dashboard Web页面\n\n可以看到随机开放了31094端口访问，浏览器中打开 https://192.168.11.161:31094 测试（忽略不是私密连接的提示后）可以正常打开，输入token后能够正常登录。\n\n![Kubernetes-Dashboard-HomePage](/Node/imgs/03_02/Dashboard-Load.png)\n\n![Kubernetes-Dashboard-HomePage](/Node/imgs/03_02/Dashboard.png)\n\n\n\n#### 6.4.2.5 优点与缺点\n\n- 这种方法一旦配置完成，只要集群存在就可以持续访问，提供了长期稳定的访问途径；同时可以直接通过任意节点 IP 加上指定端口号来访问服务，易于访问。\n\n- 但是，它也带来了较高的安全风险，如果未正确配置防火墙规则，可能会导致服务被未经授权的人访问；\n\n- 此外，还需要选择一个未被占用的端口，因此有一定的端口限制。\n\n\n#### 6.4.2.6 参考资料\n\n- [kubernetes-dashboard-7.11.1/README.md](https://github.com/kubernetes/dashboard/blob/kubernetes-dashboard-7.11.1/README.md)\n- [访问仪表板](https://github.com/kubernetes/dashboard/tree/master/docs/user/accessing-dashboard)\n- [69.Kubernetes(k8s)手把手教程—部署Dashboard以图形化方式管理Kubernetes](https://www.bilibili.com/video/BV15UsSeDEZA/)\n- [Kubernetes(k8s) Web-UI界面(一)：部署和访问仪表板(Dashboard)](https://www.cnblogs.com/renshengdezheli/p/17513879.html)\n- [二进制安装Kubernetes（k8s）v1.32.0](https://www.oiox.cn/index.php/archives/428/)\n\n### 6.5 清理和后续步骤\n\n删除管理员ServiceAccount和ClusterRoleBinding。\n\n```bash\nroot@k8s-master01:~# kubectl -n kubernetes-dashboard delete serviceaccount admin-user\nroot@k8s-master01:~# kubectl -n kubernetes-dashboard delete clusterrolebinding admin-user\n```\n\n了解有关如何在 Kubernetes 中授予/拒绝权限的更多信息，阅读官方[身份验证](https://kubernetes.io/docs/reference/access-authn-authz/authentication/)和[授权](https://kubernetes.io/docs/reference/access-authn-authz/authorization/)文档。\n\n\n\n\n\n\n# 七、 实际部署过程中遇到的问题\n\n\n### 7.1.1操作系统重启后无法使用原账户登录\n\n\n### 7.1.2 kubeadm初始化失败，抛出错误\n\n\n### 7.1.3 安装如遇到错误，需要修改配置，关闭kubelet \n\n```bash\n~# sudo rm -rf /etc/kubernetes/manifests/kube-apiserver.yaml\n~# sudo rm -rf /etc/kubernetes/manifests/kube-controller-manager.yaml\n~# sudo rm -rf /etc/kubernetes/manifests/kube-scheduler.yaml\n~# sudo rm -rf /etc/kubernetes/manifests/etcd.yaml\n\n~# sudo rm -rf /etc/kubernetes/manifests/kube-apiserver.yaml && sudo rm -rf /etc/kubernetes/manifests/kube-controller-manager.yaml && sudo rm -rf /etc/kubernetes/manifests/kube-scheduler.yaml && sudo rm -rf /etc/kubernetes/manifests/etcd.yaml\n\nsudo netstat -tulnp | grep :10250\nsudo lsof -i :10250\n\nsudo kill 2832\nsudo kill -9 1234\n\n~# systemctl status kubelet\n~# systemctl stop kubelet\n```\n\n#### 7.1.3.2 重新初始化 Kubernetes 集群\n\n- 步骤 1：重置 kubeadm\\2：清理残留文件\n\n```bash\n~# sudo kubeadm reset -f && sudo rm -rf /etc/kubernetes /var/lib/etcd /var/lib/kubelet\n```\n\n\n-  https://blog.csdn.net/m0_51510236/article/details/136329885\n\n```bash\nroot@k8s-master01:~# sudo kubeadm init \\\n--apiserver-advertise-address=192.168.11.161 \\\n--apiserver-cert-extra-sans=k8s-master01 \\\n--image-repository=registry.aliyuncs.com/google_containers \\\n--kubernetes-version=v1.32.3 \\\n--service-cidr=10.96.0.0/12 \\\n--pod-network-cidr=10.244.0.0/16 \\\n--cri-socket=unix:///run/containerd/containerd.sock \\\n--cgroup-driver=systemd \\\n--upload-certs \\\n--v=9\n```\n\n\n\n\n```bash\nMar 22 13:26:21 k8s-master01 kubelet[9760]: E0322 13:26:21.545465    9760 pod_workers.go:1301] \"Error syncing pod, skipping\" err=\"failed to \\\"CreatePodSandbox\\\" for \\\"kube-controller-manager-k8s-master01_kube-system(19dfb154dd163834eef61b7252703fed)\\\" with CreatePodSandboxError: \\\"Failed to create sandbox for pod \\\\\\\"kube-controller-manager-k8s-master01_kube-system(19dfb154dd163834eef61b7252703fed)\\\\\\\": rpc error: code = Unknown desc = failed to start sandbox \\\\\\\"623e76469b34076613d313938932728b1c6e63d0951c4c1a1a7563332c35b2e2\\\\\\\": failed to create containerd task: failed to create shim task: OCI runtime create failed: unable to retrieve OCI runtime error (open /run/containerd/io.containerd.runtime.v2.task/k8s.io/623e76469b34076613d313938932728b1c6e63d0951c4c1a1a7563332c35b2e2/log.json: no such file or directory): exec: \\\\\\\"runc\\\\\\\": executable file not found in $PATH\\\"\" pod=\"kube-system/kube-controller-manager-k8s-master01\" podUID=\"19dfb154dd163834eef61b7252703fed\"\nMar 22 13:26:23 k8s-master01 kubelet[9760]: E0322 13:26:23.120378    9760 controller.go:145] \"Failed to ensure lease exists, will retry\" err=\"Get \\\"https://192.168.11.161:6443/apis/coordination.k8s.io/v1/namespaces/kube-node-lease/leases/k8s-master01?timeout=10s\\\": dial tcp 192.168.11.161:6443: connect: connection refused\" interval=\"7s\"\nMar 22 13:26:23 k8s-master01 kubelet[9760]: I0322 13:26:23.327532    9760 kubelet_node_status.go:75] \"Attempting to register node\" node=\"k8s-master01\"\nMar 22 13:26:23 k8s-master01 kubelet[9760]: E0322 13:26:23.328029    9760 kubelet_node_status.go:107] \"Unable to register node with API server\" err=\"Post \\\"https://192.168.11.161:6443/api/v1/nodes\\\": dial tcp 192.168.11.161:6443: connect: connection refused\" node=\"k8s-master01\"\nMar 22 13:26:25 k8s-master01 kubelet[9760]: W0322 13:26:25.039914    9760 reflector.go:569] k8s.io/client-go/informers/factory.go:160: failed to list *v1.CSIDriver: Get \"https://192.168.11.161:6443/apis/storage.k8s.io/v1/csidrivers?limit=500&resourceVersion=0\": dial tcp 192.168.11.161:6443: connect: connection refused\nMar 22 13:26:25 k8s-master01 kubelet[9760]: E0322 13:26:25.040030    9760 reflector.go:166] \"Unhandled Error\" err=\"k8s.io/client-go/informers/factory.go:160: Failed to watch *v1.CSIDriver: failed to list *v1.CSIDriver: Get \\\"https://192.168.11.161:6443/apis/storage.k8s.io/v1/csidrivers?limit=500&resourceVersion=0\\\": dial tcp 192.168.11.161:6443: connect: connection refused\" logger=\"UnhandledError\"\nMar 22 13:26:26 k8s-master01 kubelet[9760]: W0322 13:26:26.039053    9760 reflector.go:569] k8s.io/client-go/informers/factory.go:160: failed to list *v1.Service: Get \"https://192.168.11.161:6443/api/v1/services?fieldSelector=spec.clusterIP%21%3DNone&limit=500&resourceVersion=0\": dial tcp 192.168.11.161:6443: connect: connection refused\nMar 22 13:26:26 k8s-master01 kubelet[9760]: E0322 13:26:26.039171    9760 reflector.go:166] \"Unhandled Error\" err=\"k8s.io/client-go/informers/factory.go:160: Failed to watch *v1.Service: failed to list *v1.Service: Get \\\"https://192.168.11.161:6443/api/v1/services?fieldSelector=spec.clusterIP%21%3DNone&limit=500&resourceVersion=0\\\": dial tcp 192.168.11.161:6443: connect: connection refused\" logger=\"UnhandledError\"\nMar 22 13:26:26 k8s-master01 kubelet[9760]: E0322 13:26:26.450839    9760 kubelet.go:3190] \"No need to create a mirror pod, since failed to get node info from the cluster\" err=\"node \\\"k8s-master01\\\" not found\" node=\"k8s-master01\"\nMar 22 13:26:26 k8s-master01 kubelet[9760]: E0322 13:26:26.451717    9760 dns.go:153] \"Nameserver limits exceeded\" err=\"Nameserver limits were exceeded, some nameservers have been omitted, the applied nameserver line is: 119.29.29.29 114.114.114.114 8.8.8.8\"\nMar 22 13:26:26 k8s-master01 kubelet[9760]: E0322 13:26:26.547499    9760 log.go:32] \"RunPodSandbox from runtime service failed\" err=\"rpc error: code = Unknown desc = failed to start sandbox \\\"c54802a9d762ba695f68d28021ea9339eb8e9845d41161d6fa1f9bfb4d811c54\\\": failed to create containerd task: failed to create shim task: OCI runtime create failed: unable to retrieve OCI runtime error (open /run/containerd/io.containerd.runtime.v2.task/k8s.io/c54802a9d762ba695f68d28021ea9339eb8e9845d41161d6fa1f9bfb4d811c54/log.json: no such file or directory): exec: \\\"runc\\\": executable file not found in $PATH\"\nMar 22 13:26:26 k8s-master01 kubelet[9760]: E0322 13:26:26.547575    9760 kuberuntime_sandbox.go:72] \"Failed to create sandbox for pod\" err=\"rpc error: code = Unknown desc = failed to start sandbox \\\"c54802a9d762ba695f68d28021ea9339eb8e9845d41161d6fa1f9bfb4d811c54\\\": failed to create containerd task: failed to create shim task: OCI runtime create failed: unable to retrieve OCI runtime error (open /run/containerd/io.containerd.runtime.v2.task/k8s.io/c54802a9d762ba695f68d28021ea9339eb8e9845d41161d6fa1f9bfb4d811c54/log.json: no such file or directory): exec: \\\"runc\\\": executable file not found in $PATH\" pod=\"kube-system/kube-apiserver-k8s-master01\"\nMar 22 13:26:26 k8s-master01 kubelet[9760]: E0322 13:26:26.547611    9760 kuberuntime_manager.go:1237] \"CreatePodSandbox for pod failed\" err=\"rpc error: code = Unknown desc = failed to start sandbox \\\"c54802a9d762ba695f68d28021ea9339eb8e9845d41161d6fa1f9bfb4d811c54\\\": failed to create containerd task: failed to create shim task: OCI runtime create failed: unable to retrieve OCI runtime error (open /run/containerd/io.containerd.runtime.v2.task/k8s.io/c54802a9d762ba695f68d28021ea9339eb8e9845d41161d6fa1f9bfb4d811c54/log.json: no such file or directory): exec: \\\"runc\\\": executable file not found in $PATH\" pod=\"kube-system/kube-apiserver-k8s-master01\"\nMar 22 13:26:26 k8s-master01 kubelet[9760]: E0322 13:26:26.547680    9760 pod_workers.go:1301] \"Error syncing pod, skipping\" err=\"failed to \\\"CreatePodSandbox\\\" for \\\"kube-apiserver-k8s-master01_kube-system(843638c9eef6e3d63d22d53c9d990887)\\\" with CreatePodSandboxError: \\\"Failed to create sandbox for pod \\\\\\\"kube-apiserver-k8s-master01_kube-system(843638c9eef6e3d63d22d53c9d990887)\\\\\\\": rpc error: code = Unknown desc = failed to start sandbox \\\\\\\"c54802a9d762ba695f68d28021ea9339eb8e9845d41161d6fa1f9bfb4d811c54\\\\\\\": failed to create containerd task: failed to create shim task: OCI runtime create failed: unable to retrieve OCI runtime error (open /run/containerd/io.containerd.runtime.v2.task/k8s.io/c54802a9d762ba695f68d28021ea9339eb8e9845d41161d6fa1f9bfb4d811c54/log.json: no such file or directory): exec: \\\\\\\"runc\\\\\\\": executable file not found in $PATH\\\"\" pod=\"kube-system/kube-apiserver-k8s-master01\" podUID=\"843638c9eef6e3d63d22d53c9d990887\"\nMar 22 13:26:29 k8s-master01 kubelet[9760]: E0322 13:26:29.498553    9760 eviction_manager.go:292] \"Eviction manager: failed to get summary stats\" err=\"failed to get node info: node \\\"k8s-master01\\\" not found\"\nMar 22 13:26:30 k8s-master01 kubelet[9760]: E0322 13:26:30.122192    9760 controller.go:145] \"Failed to ensure lease exists, will retry\" err=\"Get \\\"https://192.168.11.161:6443/apis/coordination.k8s.io/v1/namespaces/kube-node-lease/leases/k8s-master01?timeout=10s\\\": dial tcp 192.168.11.161:6443: connect: connection refused\" interval=\"7s\"\nMar 22 13:26:30 k8s-master01 kubelet[9760]: I0322 13:26:30.329597    9760 kubelet_node_status.go:75] \"Attempting to register node\" node=\"k8s-master01\"\nMar 22 13:26:30 k8s-master01 kubelet[9760]: E0322 13:26:30.330070    9760 kubelet_node_status.go:107] \"Unable to register node with API server\" err=\"Post \\\"https://192.168.11.161:6443/api/v1/nodes\\\": dial tcp 192.168.11.161:6443: connect: connection refused\" node=\"k8s-master01\"\nMar 22 13:26:30 k8s-master01 kubelet[9760]: E0322 13:26:30.450085    9760 kubelet.go:3190] \"No need to create a mirror pod, since failed to get node info from the cluster\" err=\"node \\\"k8s-master01\\\" not found\" node=\"k8s-master01\"\nMar 22 13:26:30 k8s-master01 kubelet[9760]: E0322 13:26:30.450964    9760 dns.go:153] \"Nameserver limits exceeded\" err=\"Nameserver limits were exceeded, some nameservers have been omitted, the applied nameserver line is: 119.29.29.29 114.114.114.114 8.8.8.8\"\nMar 22 13:26:30 k8s-master01 kubelet[9760]: E0322 13:26:30.548988    9760 log.go:32] \"RunPodSandbox from runtime service failed\" err=\"rpc error: code = Unknown desc = failed to start sandbox \\\"f8b4188ebe49ae964cfbbb1837c3899194dede9e323889d10636e4002993581b\\\": failed to create containerd task: failed to create shim task: OCI runtime create failed: unable to retrieve OCI runtime error (open /run/containerd/io.containerd.runtime.v2.task/k8s.io/f8b4188ebe49ae964cfbbb1837c3899194dede9e323889d10636e4002993581b/log.json: no such file or directory): exec: \\\"runc\\\": executable file not found in $PATH\"\nMar 22 13:26:30 k8s-master01 kubelet[9760]: E0322 13:26:30.549096    9760 kuberuntime_sandbox.go:72] \"Failed to create sandbox for pod\" err=\"rpc error: code = Unknown desc = failed to start sandbox \\\"f8b4188ebe49ae964cfbbb1837c3899194dede9e323889d10636e4002993581b\\\": failed to create containerd task: failed to create shim task: OCI runtime create failed: unable to retrieve OCI runtime error (open /run/containerd/io.containerd.runtime.v2.task/k8s.io/f8b4188ebe49ae964cfbbb1837c3899194dede9e323889d10636e4002993581b/log.json: no such file or directory): exec: \\\"runc\\\": executable file not found in $PATH\" pod=\"kube-system/kube-scheduler-k8s-master01\"\nMar 22 13:26:30 k8s-master01 kubelet[9760]: E0322 13:26:30.549145    9760 kuberuntime_manager.go:1237] \"CreatePodSandbox for pod failed\" err=\"rpc error: code = Unknown desc = failed to start sandbox \\\"f8b4188ebe49ae964cfbbb1837c3899194dede9e323889d10636e4002993581b\\\": failed to create containerd task: failed to create shim task: OCI runtime create failed: unable to retrieve OCI runtime error (open /run/containerd/io.containerd.runtime.v2.task/k8s.io/f8b4188ebe49ae964cfbbb1837c3899194dede9e323889d10636e4002993581b/log.json: no such file or directory): exec: \\\"runc\\\": executable file not found in $PATH\" pod=\"kube-system/kube-scheduler-k8s-master01\"\nMar 22 13:26:30 k8s-master01 kubelet[9760]: E0322 13:26:30.549256    9760 pod_workers.go:1301] \"Error syncing pod, skipping\" err=\"failed to \\\"CreatePodSandbox\\\" for \\\"kube-scheduler-k8s-master01_kube-system(c7ec3024ac27f675ae60ec998a90ce85)\\\" with CreatePodSandboxError: \\\"Failed to create sandbox for pod \\\\\\\"kube-scheduler-k8s-master01_kube-system(c7ec3024ac27f675ae60ec998a90ce85)\\\\\\\": rpc error: code = Unknown desc = failed to start sandbox \\\\\\\"f8b4188ebe49ae964cfbbb1837c3899194dede9e323889d10636e4002993581b\\\\\\\": failed to create containerd task: failed to create shim task: OCI runtime create failed: unable to retrieve OCI runtime error (open /run/containerd/io.containerd.runtime.v2.task/k8s.io/f8b4188ebe49ae964cfbbb1837c3899194dede9e323889d10636e4002993581b/log.json: no such file or directory): exec: \\\\\\\"runc\\\\\\\": executable file not found in $PATH\\\"\" pod=\"kube-system/kube-scheduler-k8s-master01\" podUID=\"c7ec3024ac27f675ae60ec998a90ce85\"\nMar 22 13:26:31 k8s-master01 kubelet[9760]: E0322 13:26:31.073491    9760 event.go:368] \"Unable to write event (may retry after sleeping)\" err=\"Post \\\"https://192.168.11.161:6443/api/v1/namespaces/default/events\\\": dial tcp 192.168.11.161:6443: connect: connection refused\" event=\"&Event{ObjectMeta:{k8s-master01.182f0852158da106  default    0 0001-01-01 00:00:00 +0000 UTC <nil> <nil> map[] map[] [] [] []},InvolvedObject:ObjectReference{Kind:Node,Namespace:,Name:k8s-master01,UID:k8s-master01,APIVersion:,ResourceVersion:,FieldPath:,},Reason:NodeHasSufficientPID,Message:Node k8s-master01 status is now: NodeHasSufficientPID,Source:EventSource{Component:kubelet,Host:k8s-master01,},FirstTimestamp:2025-03-22 13:18:49.45761511 +0800 CST m=+0.101712151,LastTimestamp:2025-03-22 13:18:49.45761511 +0800 CST m=+0.101712151,Count:1,Type:Normal,EventTime:0001-01-01 00:00:00 +0000 UTC,Series:nil,Action:,Related:nil,ReportingController:kubelet,ReportingInstance:k8s-master01,}\"\n\n```\n\n\n\n### 7.1.4 Kubernets集群中部署calico网络插件时kubectl get pods -n tigera-operator命令一直显示pod为ImagePullBackOff状态\n\n```bash\n~# kubectl describe pod tigera-operator-ccfc44587-vswlt -n tigera-operator\n```\n\n```bash\n~# kubectl get pods -n tigera-operator -o wide\n```\n\n查到“Failed to pull image \"quay.io/tigera/operator:v1.36.5\": failed to pull and unpack image \"quay.io/tigera/operator:v1.36.5\": failed to copy: read tcp 192.168.11.166:53828->23.60.96.137:443: read: connection reset by peer\n”\n需要手动拉取镜像或者增加镜像源（参考https://blog.csdn.net/nxg810251/article/details/145170594中的config.toml文件的Line206~Line219中的配置） \n\n\n```bash\n~# sudo systemctl daemon-reload && sudo systemctl restart containerd && sudo systemctl restart kubelet\n```\n\n```bash\n~# systemctl daemon-reload && systemctl restart containerd\n```\n\n\n#### 7.1.4.3 参考：\n\n- [K8s的Pod出现Init:ImagePullBackOff问题的解决(以calico为例)](https://blog.csdn.net/weixin_40444270/article/details/132543441)\n- [Kubernetes1.32版本搭建【超详细】](https://blog.csdn.net/nxg810251/article/details/145170594)\n- [Kubernetes1.32版本搭建【极简版】](https://blog.csdn.net/weixin_42434261/article/details/144539712)\n\n\n\n# 八、 总结\n\n## 8.1 可以继续优化的流程\n\n### 8.1.1 虚拟机镜像准备\n\n### 8.1.2 containerd版本选择\n\n### 8.1.3 镜像源加速\n\n### 8.1.4 网络配置\n\n\n\n","source":"_posts/Kubernetes集群部署实战(V1.23.3).md","raw":"---\ntitle: Kubernetes集群部署实战(基于v1.23.3版本)\ndate: 2025-03-23 10:10:00\ncategories: \"Kubernetes\" #文章分类目录 可以省略\ntags: #Java \n     - Kubernetes\n     - Ubuntu\n     - containerd\n     - Calico\n     - Helm\n     - KubernetesDashboard\n     - 云原生\n     - K8S\n     - PVE\ndescription: Kubernetes集群部署实战，基于Kubernetes v1.32.3、Ubuntu 24.04.2 LTS、Containerd v1.7.29版本搭建  #你對本頁的描述 可以省略\n---\n\n# 前言\n\n![components-of-kubernetes](https://kubernetes.io/images/docs/components-of-kubernetes.svg)\n\n\n[Kubernetes集群](https://kubernetes.io/zh-cn/docs/concepts/overview/components/)部署实战，基于Kubernetes v1.32.3、Ubuntu 24.04.2 LTS、Containerd v1.7.27版本搭建。\n\n\n\n## 1.1 前置准备\n\n### 1.1.1 前置依赖软件及物料准备\n\n- 服务器系统：PVE 8.1 \n- 虚拟机操作系统 Ubuntu 24.04.2 LTS ISO\n- Kubernetes v1.32.3 （kubeadm、kubelet、kubectl、kube-apiserver、kube-controller-manager、kube-scheduler、kube-proxy）\n- Cri-Containerd v1.7.27    [releases](https://github.com/containerd/containerd/releases)       crictl\n- CoreDNS v1.11.3\n- Pause v3.10\n- Etcd v3.5.16-0\n- Calico v3.29.2\n- Nginx镜像\n- Helm v3.17.2\n- Kubernetes Dashboard v7.11.1\n\n\n### 1.1.2 K8S集群网络IP规划\n\n| 节点名称      | 规划IP       | 当前验证实际使用IP  |          备注           |\n| :----------: | :----------: | :---------------: | :---------------------: |\n| K8S-Master01 | 10.200.10.11 | 192.168.11.161    | ...                     |\n| K8S-Master02 | 10.200.10.12 |                   | ...                     |\n| K8S-Master03 | 10.200.10.13 |                   | ...                     |\n| k8S-Worker01 | 10.200.10.21 | 192.168.11.165    | ...                     |\n| K8S-Worker02 | 10.200.10.22 | 192.168.11.166    | ...                     |\n| K8S-Worker03 | 10.200.10.23 |                   | ...                     |\n| K8S-Worker04 | 10.200.10.24 |                   | ...                     |\n| K8S-Worker05 | 10.200.10.25 |                   | ...                     |\n\n\n### 1.1.3 主机硬件配置说明 \n\n| 节点名称      | 角色     | CPU  |  内存   | 硬盘  | 备注   |\n| :----------: | :--- --: | :--: | :----: | :---: | :-------: |\n| K8S-Master01 | master   |  4C  |  8G    | 200GB | 最低4C8G   |\n| k8S-Worker01 | worker   |  8C  |  16G   | 200GB | 最低8C16G  |\n| K8S-Worker02 | worker   |  8C  |  16G   | 200GB | 最低8C16G  |\n\n                \n\n## 1.2 主机系统基础环境准备 \n\n### 1.2.1 正式安装前，系统需要检查及准备以下操作\n\n- 更新基础软件版本  \n- 安装 net-tools、iputils-ping 工具，查看IP配置、网络状况\n- 安装必要的编辑器\n- 启用SSH连接 OpenSSH  开启SSH服务\n- 支持cron定时任务\n- 远程时间同步服务支持 \n- 初始化系统 systemd 支持程序开机自启动\n- 网络下载工具：wget、curl\n- 签名校验工具gpg\n\n安装必要的软件及工具\n\n```bash\n~# sudo apt-get update\n~# sudo apt install net-tools iputils-ping systemd nano openssh-server cron ntpdate ipset ipvsadm debianutils tar which apt-transport-https ca-certificates curl wget gpg -y\n~# sudo apt-get upgrade -y\n```\n\n\n\n### 1.2.2 开启SSH远程登录服务\n\n确认你的系统使用的是哪种初始化系统：\n\n```bash\n~# ps -p 1 -o comm=\n```\n\n```bash\n~$ sudo systemctl enable ssh\n\n~$ sudo systemctl start ssh\n\n~$ sudo system status ssh      # 查看ssh状态 \n```\n\n\n## 1.3 集群主机配置\n\n### 1.3.1 主机名配置 \n\n由于本次使用3台主机完成kubernetes集群部署，其中1台为master节点,名称为k8s-master01;其中2台为worker节点，名称分别为：k8s-worker01及k8s-worker02\n\nmaster01节点\n\n```bash\n~# hostnamectl set-hostname k8s-master01\n```\n\nworker01节点\n\n```bash\n~# hostnamectl set-hostname k8s-worker01\n```\n\n\nworker02节点\n\n```bash\n~# hostnamectl set-hostname k8s-worker02\n```\n\n\n### 1.3.2 主机IP地址配置 \n\nk8s-master01节点IP地址为：192.168.11.161/24\n\n```bash\n root@k8s-master01:~# nano /etc/netplan/50-cloud-init.yaml\n root@k8s-master01:~# cat /etc/netplan/50-cloud-init.yaml\n```\n\n50-cloud-init.yaml文件中添加或修改IP地址（注意网卡名称需要与系统中的以太网卡一致）\n\n```yaml\nnetwork:\n  version: 2\n  renderer: networkd\n  ethernets:\n    ens18:\n      dhcp4: no\n      addresses:\n        - 192.168.11.161/24\n      routes:\n        - to: default\n          via: 192.168.11.1\n      nameservers:\n        addresses: [119.29.29.29,114.114.114.114,8.8.8.8]\n```\n\n保存k8s-master01的网卡配置\n\n```bash\nroot@k8s-master01:~# sudo netplan apply\n```\n\n重新按新ip连接主机，然后使用以下命名查看ip地址信息\n\n\n```bash\nip a s\n```\n\nk8s-worker01节点IP地址为：192.168.11.165/24\n\n```bash\nroot@k8s-worker01:~# nano /etc/netplan/50-cloud-init.yaml\nroot@k8s-worker01:~# cat /etc/netplan/50-cloud-init.yaml\n```\n\n```yaml\nnetwork:\n  version: 2\n  renderer: networkd\n  ethernets:\n    enp6s18:\n      dhcp4: no\n      addresses:\n        - 192.168.11.165/24\n      routes:\n        - to: default\n          via: 192.168.11.1\n      nameservers:\n        addresses: [119.29.29.29,114.114.114.114,8.8.8.8]\n```\n\n保存k8s-worker01的网卡配置\n\n```bash\nroot@k8s-worker01:~# sudo netplan apply\n```\n\n\nk8s-worker02节点IP地址为：192.168.11.166/24\n\n```bash\nroot@k8s-worker02:~# nano /etc/netplan/50-cloud-init.yaml\nroot@k8s-worker02:~# cat /etc/netplan/50-cloud-init.yaml\n```\n\n```yaml\nnetwork:\n  version: 2\n  renderer: networkd\n  ethernets:\n    enp6s18:\n      dhcp4: no\n      addresses:\n        - 192.168.11.166/24\n      routes:\n        - to: default\n          via: 192.168.11.1\n      nameservers:\n        addresses: [119.29.29.29,114.114.114.114,8.8.8.8]\n```\n\n保存k8s-worker02的网卡配置\n\n```bash\nroot@k8s-worker02:~# sudo netplan apply\n```\n\n\n\n\n### 1.3.3 主机名与IP地址解析 \n \n\n所有集群主机均需要进行配置。\n\n\n在没有DNS服务器的环境中需要先能解析到各个节点的IP地址\n\n\n\n```bash\n~# sudo nano /etc/hosts\n```\n\n- 在文件后面追加以下内容\n\n```bash\n192.168.11.161 k8s-master01\n192.168.11.165 k8s-worker01\n192.168.11.166 k8s-worker02\n```\n\n\n修改后Ctrl+O,然后Enter键，再Ctrl+X保存文件修改并退出\n\n查看IP解析配置是否生效命令\n\n```bash\n~$ ping -c 4 k8s-master01\n~$ ping -c 4 k8s-worker01\n~$ ping -c 4 k8s-worker02\n```\n\n### 1.3.4 时间同步配置 \n\n查看时间\n\n```bash\n~# date\n Thu Sep  7 05:39:21 AM UTC 2024\n```\n\n更换时区\n\n```bash\n~# timedatectl set-timezone Asia/Shanghai\n```\n \n再次查看时间\n```bash\n~# date\n Thu Sep  7 01:39:51 PM CST 2024\n```\n\n安装ntpdate命令\n\n```bash\n~# apt install ntpdate -y\n```\n\n使用ntpdate命令同步时间\n\n```bash\n~# ntpdate time1.aliyun.com\n```\n\n\n通过计划任务实现时间同步\n\n```bash\n~# apt install cron -y\n~# crontab -e\n no crontab for root - using an empty one\n Select an editor.  To change later, run 'select-editor'.\n  1. /bin/nano        <---- easiest\n  2. /usr/bin/vim.basic\n  3. /usr/bin/vim.tiny\n  4. /bin/ed\n Choose 1-4 [1]: 2\n ......\n0 */1 * * * ntpdate time1.aliyun.com           // 写入配置文件\n~# crontab -l   // 查看crontab配置\n ......\n0 */1 * * * ntpdate time1.aliyun.com        \n```\n\n\n### 1.3.5 配置内核转发及网桥过滤 \n\n所有主机均需要操作。\n\n\nWay1：手动执行，手动加载内核转发及网桥过滤模块\n\n```bash\n~# modprobe overlay\n~# modprobe br_netfilter\n```\n\n\nWay2：创建加载内核模块文件\n\n```bash\n~# sudo cat << EOF | tee /etc/modules-load.d/k8s.conf\noverlay\nbr_netfilter\nEOF\n```\n\n- 查看已加载的模块\n\n```bash\n~# lsmod | egrep \"overlay\"\noverlay               151552  0\n```\n\n\n```bash\n~# lsmod | egrep \"br_netfilter\"\nbr_netfilter    32768   0       \nbridge           307200  1 br_netfilter\n```\n\n\n- 添加网桥过滤及内核转发配置文件\n\n```bash\n~# cat << EOF| tee /etc/sysctl.d/k8s.conf\nnet.bridge.bridge-nf-call-ip6tables = 1\nnet.bridge.bridge-nf-call-iptables = 1\nnet.ipv4.ip_forward = 1\nEOF\n```\n\n查看配置文件\n\n```bash\n~# nano /etc/modules-load.d/k8s.conf\n~# cat /etc/modules-load.d/k8s.conf\n```\n\n加载内核参数,使之生效\n\n```bash\n~# sysctl --system\n```\n\n检查输出的结果中是否包含以下三项：\n\n```\nnet.bridge.bridge-nf-call-ip6tables = 1\nnet.bridge.bridge-nf-call-iptables = 1\nnet.ipv4.ip_forward = 1\n```\n\n\n\n### 1.3.6 安装ipset及ipvsadm \n\n所有主机均需要操作。\n\n\n安装ipset及ipvsadm命令\n\n```bash\n ~# apt install ipset ipvsadm -y\n```\n\n配置ipvsadm模块加载\n\n添加系统启动需要加载的模块文件\n\n```bash\n~# cat << EOF | tee /etc/modules-load.d/ipvs.conf\nip_vs\nip_vs_rr\nip_vs_wrr\nip_vs_sh\nnf_conntrack\nEOF\n```\n\n创建加载模块脚本文件\n\n```bash\n~# cat << EOF | tee ipvs.sh\n#!/bin/sh\nmodprobe -- ip_vs\nmodprobe -- ip_vs_rr\nmodprobe -- ip_vs_wrr\nmodprobe -- ip_vs_sh\nmodprobe -- nf_conntrack\nEOF\n```\n\n上述命令执行完成后，当前目录下会生成一个ipvs.sh脚本文件，接下来使用bash命令执行它\n\n执行ipvs.sh脚本文件，以加载模块\n\n```bash\n~# sh ipvs.sh\n```\n\n查看ipvs配置是否已生效\n\n```bash\nroot@k8s-master01:~# lsmod | grep ip_vs\nip_vs_sh               12288  0\nip_vs_wrr              12288  0\nip_vs_rr               12288  0\nip_vs                 221184  6 ip_vs_rr,ip_vs_sh,ip_vs_wrr\nnf_conntrack          196608  1 ip_vs\nnf_defrag_ipv6         24576  2 nf_conntrack,ip_vs\nlibcrc32c              12288  4 nf_conntrack,btrfs,raid456,ip_vs\n```\n\n### 1.3.7 关闭SWAP分区 \n\n修改完成后需要重启操作系统，\n\nWay1：临时关闭（不推荐），若不重启，命令为\n\n```bash\n~# swapoff -a\n```\n\nWay2：永久关闭swap分区（推荐，操作需要重启操作系统）\n\n```bash\n~# nano /etc/fstab    // 进入分区配置文件\n ......\n\n #/swap.img   none    swap   sw      0       0    // 在此行首添加“#”以注释swap分区的配置\n```\n\n修改完成后保存文件并退出\n\n\n# 二、K8S集群容器运行时 Containerd 准备 \n\n- 安装docker-ce方法：[https://docs.docker.com/engine/install/ubuntu/](https://docs.docker.com/engine/install/ubuntu/)\n\n- 本文实际采用containerd作为集群容器镜像的运行平台\n\n## 2.1 Containerd部署文件获取\n\nwget下载1.7.27版本containerd\n\n```bash\n~# wget https://github.com/containerd/containerd/releases/download/v1.7.27/cri-containerd-1.7.27-linux-amd64.tar.gz\n```\n\n解压安装\n\n```bash\n~# sudo apt install debianutils\n~# sudo apt install --reinstall libc6\n~# sudo apt install --reinstall which\n\n\n~# sudo tar xf /home/acanx/cri-containerd-1.7.27-linux-amd64.tar.gz  -C /\n\n~# which containerd\n\n/usr/local/bin/containerd\n~# which runc\n\n/usr/local/sbin/runc\n```\n\n验证containerd、runc是否安装成功\n\n```bash\n~# which containerd\n~# which runc\n~# whereis containerd\n```\n\n## 2.2 Containerd配置文件生成并修改 \n\n创建containerd配置文件目录/etc/containerd\n\n```bash\n~# mkdir /etc/containerd\n~# sudo chmod -R 777 /etc/containerd/       // 然后可以上传配置文件\n```\n\n生成配置文件config.toml及默认配置\n\n```bash\n~# containerd config default > /etc/containerd/config.toml\n```\n\n修改配置文件的第67行\n\n```bash\n~# nano /etc/containerd/config.toml\n```\n\n```txt\n sandbox_image = \"registry.k8s.io/pause:3.10\"  // 由3.9修改为3.10\n```\n\n- 如果使用阿里云容器镜像仓库，也可以修改为：\n\n```txt\nsandbox_image = \"registry.aliyuncs.com/google_containers/pause:3.9\"  // 由3.9修改为3.10\n```\n\n修改配置文件的第139行\n\n\n```bash\n~# vim /etc/containerd/config.toml\n SystemdCgroup = true 由false修改为true\n```\n\n\n## 2.3 Containerd启动及开机自启动 \n\n设置containerd开机自启并立即启动\n\n```bash\n~# sudo tee /etc/systemd/system/containerd.service <<EOF\n[Unit]\nDescription=containerd container runtime\nDocumentation=https://containerd.io\nAfter=network.target local-fs.target\n \n[Service]\nExecStartPre=-/sbin/modprobe overlay\nExecStart=/usr/local/bin/containerd\n \nType=notify\nDelegate=yes\nKillMode=process\nRestart=always\nRestartSec=5\n \n# 限制日志大小\nLimitNOFILE=infinity\n \n[Install]\nWantedBy=multi-user.target\nEOF\n```\n\n\n```bash\n~# ls /etc/systemd/system/containerd.service\n~# systemctl enable --now containerd\n```\n\n验证containerd版本\n\n```bash\n~# containerd --version\n```\n\n\n\n# 三、K8S集群部署 \n\n## 3.1 K8S集群软件apt源准备 \n\n本次使用kubernetes社区软件源仓库或阿里云软件源仓库，建议网络不畅通的选择阿里云软件源仓库\n\n下载用于 Kubernetes 软件包仓库的公共签名密钥,所有仓库都使用相同的签名密钥，因此你可以忽略URL中的版本：\n\n- K8S社区软件源仓库签名文件下载\n\n```bash\n\n~# curl -fsSL https://pkgs.k8s.io/core:/stable:/v1.32/deb/Release.key | sudo gpg --dearmor -o /etc/apt/keyrings/kubernetes-apt-keyring.gpg\n~# ls /etc/apt/keyrings/kubernetes-apt-keyring.gpg\n```\n\n- 阿里云软件源仓库签名文件下载\n\n```bash\n~# curl -fsSL https://mirrors.aliyun.com/kubernetes-new/core/stable/v1.32/deb/Release.key | gpg --dearmor -o /etc/apt/keyrings/kubernetes-apt-keyring.gpg\n```\n\n### 添加 Kubernetes apt 仓库\n\n请注意，此仓库仅包含适用于 Kubernetes 1.32.3 的软件包； 对于其他 Kubernetes 次要版本，则需要更改 URL 中的 Kubernetes 次要版本以匹配你所需的次要版本 。\n\n此操作会覆盖 /etc/apt/sources.list.d/kubernetes.list 中现存的所有配置，如果有的情况下。\n\n\n#### K8S社区\n\n```bash\n~# echo 'deb [signed-by=/etc/apt/keyrings/kubernetes-apt-keyring.gpg] https://pkgs.k8s.io/core:/stable:/v1.32/deb/ /' | sudo tee /etc/apt/sources.list.d/kubernetes.list\n```\n\n#### 阿里云\n\n```bash\n~# echo \"deb [signed-by=/etc/apt/keyrings/kubernetes-apt-keyring.gpg] https://mirrors.aliyun.com/kubernetes-new/core/stable/v1.32/deb/ /\" | tee /etc/apt/sources.list.d/kubernetes.list\n```\n\n\n更新 apt 包索引\n\n```bash\n~# sudo apt-get update\n```\n\n\n\n\n## 3.2 K8S集群软件安装及kubelet配置 \n\n所有节点均可安装\n\n### 3.2.1 k8s集群软件安装 \n \n查看软件列表\n\n\n```bash\nroot@k8s-master01:~# apt-cache policy kubeadm\n\nkubeadm:\n  Installed: (none)\n  Candidate: 1.32.3-1.1\n  Version table:\n     1.32.3-1.1 500\n        500 https://mirrors.aliyun.com/kubernetes-new/core/stable/v1.32/deb  Packages\n     1.32.2-1.1 500\n        500 https://mirrors.aliyun.com/kubernetes-new/core/stable/v1.32/deb  Packages\n     1.32.1-1.1 500\n        500 https://mirrors.aliyun.com/kubernetes-new/core/stable/v1.32/deb  Packages\n     1.32.0-1.1 500\n        500 https://mirrors.aliyun.com/kubernetes-new/core/stable/v1.32/deb  Packages\n```\n\n\n查看软件列表及其依赖关系\n\n```bash\nroot@k8s-master01:~# apt-cache showpkg kubeadm\n\nPackage: kubeadm\nVersions: \n1.32.3-1.1 (/var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages)\n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n\n1.32.2-1.1 (/var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages)\n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n\n1.32.1-1.1 (/var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages)\n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n\n1.32.0-1.1 (/var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages)\n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n Description Language: \n                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages\n                  MD5: \n\n\nReverse Depends: \n  kubeadm:ppc64el,kubeadm\n  kubeadm:s390x,kubeadm\n  kubeadm:arm64,kubeadm\n  kubeadm:ppc64el,kubeadm\n  kubeadm:s390x,kubeadm\n  kubeadm:arm64,kubeadm\n  kubeadm:ppc64el,kubeadm\n  kubeadm:s390x,kubeadm\n  kubeadm:arm64,kubeadm\n  kubeadm:ppc64el,kubeadm\n  kubeadm:s390x,kubeadm\n  kubeadm:arm64,kubeadm\nDependencies: \n1.32.3-1.1 - cri-tools (2 1.30.0) kubeadm:ppc64el (32 (null)) kubeadm:arm64 (32 (null)) kubeadm:s390x (32 (null)) \n1.32.2-1.1 - cri-tools (2 1.30.0) kubeadm:ppc64el (32 (null)) kubeadm:arm64 (32 (null)) kubeadm:s390x (32 (null)) \n1.32.1-1.1 - cri-tools (2 1.30.0) kubeadm:ppc64el (32 (null)) kubeadm:arm64 (32 (null)) kubeadm:s390x (32 (null)) \n1.32.0-1.1 - cri-tools (2 1.30.0) kubeadm:ppc64el (32 (null)) kubeadm:arm64 (32 (null)) kubeadm:s390x (32 (null)) \nProvides: \n1.32.3-1.1 - \n1.32.2-1.1 - \n1.32.1-1.1 - \n1.32.0-1.1 - \nReverse Provides: \n```\n\n查看可用软件列表\n\n```bash\nroot@k8s-master01:~# apt-cache madison kubeadm\n\n   kubeadm | 1.32.3-1.1 | https://mirrors.aliyun.com/kubernetes-new/core/stable/v1.32/deb  Packages\n   kubeadm | 1.32.2-1.1 | https://mirrors.aliyun.com/kubernetes-new/core/stable/v1.32/deb  Packages\n   kubeadm | 1.32.1-1.1 | https://mirrors.aliyun.com/kubernetes-new/core/stable/v1.32/deb  Packages\n   kubeadm | 1.32.0-1.1 | https://mirrors.aliyun.com/kubernetes-new/core/stable/v1.32/deb  Packages\n```\n\nWay1：采用默认安装\n\n```bash\n~# sudo apt-get install kubelet kubeadm kubectl -y\n```\n\n\nWay2：安装指定版本(v1.32.3-1.1)\n\n```bash\n~# sudo apt-get install -y kubelet=1.32.3-1.1 kubeadm=1.32.3-1.1 kubectl=1.32.3-1.1\n```\n\n- 如有报错：\n\n```bash\nE: Could not get lock /var/lib/dpkg/lock-frontend. It is held by process 5005 \n(unattended-upgr)\n N: Be aware that removing the lock file is not a solution and may break your \nsystem.\n E: Unable to acquire the dpkg frontend lock (/var/lib/dpkg/lock-frontend), is \nanother process using it?\n```\n可稍等等\n\n锁定版本，防止后期自动更新\n\n```bash\n~# sudo apt-mark hold kubelet kubeadm kubectl\n```\n\n\n解锁版本，则可以执行更新\n\n```bash\n~# sudo apt-mark unhold kubelet kubeadm kubectl\n```\n\n\n### 3.2.2 配置kubelet \n \n为了实现容器运行时使用的cgroupdriver与kubelet使用的cgroup的一致性，建议修改如下文件内容。\n\n```bash\n~# nano /etc/default/kubelet\n KUBELET_EXTRA_ARGS=\"--cgroup-driver=systemd\"\n```\n\n- 设置kubelet为开机自启动，由于没有生成配置文件，集群初始化后自动启动\n\n```bash\n~# systemctl enable kubelet\n```\n\n\n## 3.3 K8S集群初始化 \n\n### 3.3.1 查看版本 \n\n```bash\nroot@k8s-master01:~# kubeadm version\n\nkubeadm version: &version.Info{Major:\"1\", Minor:\"32\", GitVersion:\"v1.32.3\", GitCommit:\"32cc146f75aad04beaaa245a7157eb35063a9f99\", GitTreeState:\"clean\", BuildDate:\"2025-03-11T19:57:38Z\", GoVersion:\"go1.23.6\", Compiler:\"gc\", Platform:\"linux/amd64\"}\n\n```\n\n\n\n### 3.3.2 生成部署配置文件 \n\n\n生成kubeadm部署默认配置文件\n\n```bash\nroot@k8s-master01:~# kubeadm config print init-defaults > /home/acanx/kubeadm-config.yaml\n```\n\n#### 使用kubernetes社区版容器镜像仓库\n\n```bash\nroot@k8s-master01:~# nano /home/acanx/kubeadm-config.yaml\nroot@k8s-master01:~# cat kubeadm-config.yaml\n```\n\nkubeadm-config.yaml文件中 的配置\n\n```yaml\n apiVersion: kubeadm.k8s.io/v1beta3\n bootstrapTokens:- groups:- system:bootstrappers:kubeadm:default-node-token\n token: abcdef.0123456789abcdef\n ttl: 24h0m0s\n usages:- signing- authentication\n kind: InitConfiguration\n localAPIEndpoint:\n advertiseAddress: 192.168.10.140\n bindPort: 6443\n nodeRegistration:\n criSocket: unix:///var/run/containerd/containerd.sock\n imagePullPolicy: IfNotPresent\n name: k8s-master01\n taints: null--\napiServer:\n timeoutForControlPlane: 4m0s\n apiVersion: kubeadm.k8s.io/v1beta3\n certificatesDir: /etc/kubernetes/pki\n clusterName: kubernetes\n controllerManager: {}\n dns: {}\n etcd:\n local:\n dataDir: /var/lib/etcd\n imageRepository: registry.k8s.io\n kind: ClusterConfiguration\n kubernetesVersion: 1.30.0\n networking:\n dnsDomain: cluster.local\n serviceSubnet: 10.96.0.0/12\n podSubnet: 10.244.0.0/16\nscheduler: {}\n--\nkind: KubeletConfiguration\napiVersion: kubelet.config.k8s.io/v1beta1\ncgroupDriver: systemd\n```\n\n\n\n#### 使用阿里云容器镜像仓库\n\n编辑kubeadm配置文件（使用阿里云容器镜像仓库）\n\n```bash\nroot@k8s-master01:~# nano kubeadm-config.yaml\n```\n\n```yaml\napiVersion: kubeadm.k8s.io/v1beta4\nbootstrapTokens:\n- groups:\n  - system:bootstrappers:kubeadm:default-node-token\n  token: abcdef.0123456789abcdef\n  ttl: 24h0m0s\n  usages:\n  - signing\n  - authentication\nkind: InitConfiguration\nlocalAPIEndpoint:\n  advertiseAddress: 192.168.11.161   # 设置节点IP地址\n  bindPort: 6443\nnodeRegistration:\n  criSocket: unix:///var/run/containerd/containerd.sock\n  imagePullPolicy: IfNotPresent\n  imagePullSerial: true\n  name: k8s-master01      # 修改节点名称\n  taints: null\ntimeouts:\n  controlPlaneComponentHealthCheck: 4m0s\n  discovery: 5m0s\n  etcdAPICall: 2m0s\n  kubeletHealthCheck: 4m0s\n  kubernetesAPICall: 1m0s\n  tlsBootstrap: 5m0s\n  upgradeManifests: 5m0s\n---\napiServer: {}\napiVersion: kubeadm.k8s.io/v1beta4\ncaCertificateValidityPeriod: 87600h0m0s\ncertificateValidityPeriod: 8760h0m0s\ncertificatesDir: /etc/kubernetes/pki\nclusterName: kubernetes\ncontrollerManager: {}\ndns: {}\nencryptionAlgorithm: RSA-2048\netcd:\n  local:\n    dataDir: /var/lib/etcd\nimageRepository: registry.aliyuncs.com/google_containers   # 修改镜像地址\nkind: ClusterConfiguration\nkubernetesVersion: 1.32.0\nnetworking:\n  dnsDomain: cluster.local\n  serviceSubnet: 10.96.0.0/12\n  podSubnet: 10.244.0.0/16    # 可按需修改，原则：不与已有的节点网段重合\nproxy: {}\nscheduler: {}\n---\nkind: KubeletConfiguration                   # 最后四行是补加的\napiVersion: kubelet.config.k8s.io/v1beta1\ncgroupDriver: systemd\n```\n\n### 3.3.3 查看并下载镜像 \n\n\n#### 查看及使用Kubernetes社区镜像仓库下载镜像\n\n查看镜像列表（K8S社区镜像仓库）\n\n```bash\nroot@k8s-master01:~# kubeadm config images list   # 查看kubernetes镜像默认版本\n\nroot@k8s-master01:~# kubeadm config images list --kubernetes-version=v1.32.3    # 指定kubernetes镜像版本\n\nregistry.k8s.io/kube-apiserver:v1.32.3\nregistry.k8s.io/kube-controller-manager:v1.32.3\nregistry.k8s.io/kube-scheduler:v1.32.3\nregistry.k8s.io/kube-proxy:v1.32.3\nregistry.k8s.io/coredns/coredns:v1.11.3\nregistry.k8s.io/pause:3.10\nregistry.k8s.io/etcd:3.5.16-0\n```\n\n\n```bash\n root@k8s-master01:~# kubeadm config images pull           # 默认从K8S社区镜像仓库下载镜像\n\n [config/images] Pulled registry.k8s.io/kube-apiserver:v1.32.3\n [config/images] Pulled registry.k8s.io/kube-controller-manager:v1.32.3\n [config/images] Pulled registry.k8s.io/kube-scheduler:v1.32.3\n [config/images] Pulled registry.k8s.io/kube-proxy:v1.32.3\n [config/images] Pulled registry.k8s.io/coredns/coredns:v1.11.3\n [config/images] Pulled registry.k8s.io/pause:3.10\n [config/images] Pulled registry.k8s.io/etcd:3.5.16-0\n```\n\n\n#### 查看及使用阿里云容器镜像仓库下载镜像\n\n\n查看镜像列表（阿里云容器镜像仓库）\n\n```bash\nroot@k8s-master01:~# kubeadm config images list --image-repository registry.aliyuncs.com/google_containers\n\nregistry.aliyuncs.com/google_containers/kube-apiserver:v1.32.3\nregistry.aliyuncs.com/google_containers/kube-controller-manager:v1.32.3\nregistry.aliyuncs.com/google_containers/kube-scheduler:v1.32.3\nregistry.aliyuncs.com/google_containers/kube-proxy:v1.32.3\nregistry.aliyuncs.com/google_containers/coredns:v1.11.3\nregistry.aliyuncs.com/google_containers/pause:3.10\nregistry.aliyuncs.com/google_containers/etcd:3.5.16-0\n```\n\n使用阿里云容器镜像仓库下载\n\n```bash\nroot@k8s-master01:~# kubeadm config images pull --image-repository registry.aliyuncs.com/google_containers --cri-socket=unix:///run/containerd/containerd.sock\n\n[config/images] Pulled registry.aliyuncs.com/google_containers/kube-apiserver:v1.32.3\n[config/images] Pulled registry.aliyuncs.com/google_containers/kube-controller-manager:v1.32.3\n[config/images] Pulled registry.aliyuncs.com/google_containers/kube-scheduler:v1.32.3\n[config/images] Pulled registry.aliyuncs.com/google_containers/kube-proxy:v1.32.3\n[config/images] Pulled registry.aliyuncs.com/google_containers/coredns:v1.11.3\n[config/images] Pulled registry.aliyuncs.com/google_containers/pause:3.10\n[config/images] Pulled registry.aliyuncs.com/google_containers/etcd:3.5.16-0\n```\n\n\n#### 查看下载的镜像\n\n查看本地下载的containerd镜像\n\n```bash\nroot@k8s-master01:~# crictl images\n\nWARN[0000] Config \"/etc/crictl.yaml\" does not exist, trying next: \"/usr/bin/crictl.yaml\" \nWARN[0000] Image connect using default endpoints: [unix:///run/containerd/containerd.sock unix:///run/crio/crio.sock unix:///var/run/cri-dockerd.sock]. As the default settings are now deprecated, you should set the endpoint instead. \nIMAGE                                                             TAG                 IMAGE ID            SIZE\nregistry.aliyuncs.com/google_containers/coredns                   v1.11.3             c69fa2e9cbf5f       18.6MB\nregistry.aliyuncs.com/google_containers/etcd                      3.5.16-0            a9e7e6b294baf       57.7MB\nregistry.aliyuncs.com/google_containers/kube-apiserver            v1.32.0             c2e17b8d0f4a3       28.7MB\nregistry.aliyuncs.com/google_containers/kube-apiserver            v1.32.3             f8bdc4cfa0651       28.7MB\nregistry.aliyuncs.com/google_containers/kube-controller-manager   v1.32.0             8cab3d2a8bd0f       26.3MB\nregistry.aliyuncs.com/google_containers/kube-controller-manager   v1.32.3             085818208a521       26.3MB\nregistry.aliyuncs.com/google_containers/kube-proxy                v1.32.0             040f9f8aac8cd       30.9MB\nregistry.aliyuncs.com/google_containers/kube-proxy                v1.32.3             a1ae78fd2f9d8       30.9MB\nregistry.aliyuncs.com/google_containers/kube-scheduler            v1.32.0             a389e107f4ff1       20.7MB\nregistry.aliyuncs.com/google_containers/kube-scheduler            v1.32.3             b4260bf5078ab       20.7MB\nregistry.aliyuncs.com/google_containers/pause                     3.10                873ed75102791       320kB\n```\n\n\n\n\n### 3.3.4 使用部署配置文件初始化K8S集群 \n\n\n使用命令初始化Kubeadm（只在Master节点操作）\n\n```bash\nroot@k8s-master01:~# kubeadm init --config /home/acanx/kubeadm-config.yaml  --upload-certs --v=9  --cri-socket=unix:///run/containerd/containerd.sock\n```\n输出内容如下：\n\n```bash\nI0322 20:07:35.623621    4886 initconfiguration.go:261] loading configuration from \"/home/acanx/kubeadm-config.yaml\"\n[init] Using Kubernetes version: v1.32.0\n[preflight] Running pre-flight checks\nI0322 20:07:35.633576    4886 checks.go:561] validating Kubernetes and kubeadm version\nI0322 20:07:35.633610    4886 checks.go:166] validating if the firewall is enabled and active\nI0322 20:07:35.651826    4886 checks.go:201] validating availability of port 6443\nI0322 20:07:35.652309    4886 checks.go:201] validating availability of port 10259\nI0322 20:07:35.652373    4886 checks.go:201] validating availability of port 10257\nI0322 20:07:35.652434    4886 checks.go:278] validating the existence of file /etc/kubernetes/manifests/kube-apiserver.yaml\nI0322 20:07:35.652491    4886 checks.go:278] validating the existence of file /etc/kubernetes/manifests/kube-controller-manager.yaml\nI0322 20:07:35.652520    4886 checks.go:278] validating the existence of file /etc/kubernetes/manifests/kube-scheduler.yaml\nI0322 20:07:35.652560    4886 checks.go:278] validating the existence of file /etc/kubernetes/manifests/etcd.yaml\nI0322 20:07:35.652582    4886 checks.go:428] validating if the connectivity type is via proxy or direct\nI0322 20:07:35.652631    4886 checks.go:467] validating http connectivity to first IP address in the CIDR\nI0322 20:07:35.652672    4886 checks.go:467] validating http connectivity to first IP address in the CIDR\nI0322 20:07:35.652699    4886 checks.go:102] validating the container runtime\nI0322 20:07:35.653795    4886 checks.go:637] validating whether swap is enabled or not\nI0322 20:07:35.653855    4886 checks.go:368] validating the presence of executable ip\nI0322 20:07:35.653947    4886 checks.go:368] validating the presence of executable iptables\nI0322 20:07:35.654055    4886 checks.go:368] validating the presence of executable mount\nI0322 20:07:35.654080    4886 checks.go:368] validating the presence of executable nsenter\nI0322 20:07:35.654117    4886 checks.go:368] validating the presence of executable ethtool\nI0322 20:07:35.654145    4886 checks.go:368] validating the presence of executable tc\nI0322 20:07:35.654182    4886 checks.go:368] validating the presence of executable touch\nI0322 20:07:35.654210    4886 checks.go:514] running all checks\nI0322 20:07:35.680418    4886 checks.go:399] checking whether the given node name is valid and reachable using net.LookupHost\nI0322 20:07:35.680635    4886 checks.go:603] validating kubelet version\nI0322 20:07:35.753081    4886 checks.go:128] validating if the \"kubelet\" service is enabled and active\nI0322 20:07:35.774195    4886 checks.go:201] validating availability of port 10250\nI0322 20:07:35.774355    4886 checks.go:327] validating the contents of file /proc/sys/net/ipv4/ip_forward\nI0322 20:07:35.774477    4886 checks.go:201] validating availability of port 2379\nI0322 20:07:35.774568    4886 checks.go:201] validating availability of port 2380\nI0322 20:07:35.774631    4886 checks.go:241] validating the existence and emptiness of directory /var/lib/etcd\n[preflight] Pulling images required for setting up a Kubernetes cluster\n[preflight] This might take a minute or two, depending on the speed of your internet connection\n[preflight] You can also perform this action beforehand using 'kubeadm config images pull'\nI0322 20:07:35.777659    4886 checks.go:832] using image pull policy: IfNotPresent\nI0322 20:07:35.779807    4886 checks.go:868] pulling: registry.aliyuncs.com/google_containers/kube-apiserver:v1.32.0\nI0322 20:08:11.358938    4886 checks.go:868] pulling: registry.aliyuncs.com/google_containers/kube-controller-manager:v1.32.0\nI0322 20:08:38.140994    4886 checks.go:868] pulling: registry.aliyuncs.com/google_containers/kube-scheduler:v1.32.0\nI0322 20:09:00.270475    4886 checks.go:868] pulling: registry.aliyuncs.com/google_containers/kube-proxy:v1.32.0\nI0322 20:09:26.947685    4886 checks.go:863] image exists: registry.aliyuncs.com/google_containers/coredns:v1.11.3\nI0322 20:09:26.948207    4886 checks.go:863] image exists: registry.aliyuncs.com/google_containers/pause:3.10\nI0322 20:09:26.948594    4886 checks.go:863] image exists: registry.aliyuncs.com/google_containers/etcd:3.5.16-0\n[certs] Using certificateDir folder \"/etc/kubernetes/pki\"\nI0322 20:09:26.948692    4886 certs.go:112] creating a new certificate authority for ca\n[certs] Generating \"ca\" certificate and key\nI0322 20:09:27.066597    4886 certs.go:473] validating certificate period for ca certificate\n[certs] Generating \"apiserver\" certificate and key\n[certs] apiserver serving cert is signed for DNS names [k8s-master01 kubernetes kubernetes.default kubernetes.default.svc kubernetes.default.svc.cluster.local] and IPs [10.96.0.1 192.168.11.161]\n[certs] Generating \"apiserver-kubelet-client\" certificate and key\nI0322 20:09:27.313725    4886 certs.go:112] creating a new certificate authority for front-proxy-ca\n[certs] Generating \"front-proxy-ca\" certificate and key\nI0322 20:09:27.439421    4886 certs.go:473] validating certificate period for front-proxy-ca certificate\n[certs] Generating \"front-proxy-client\" certificate and key\nI0322 20:09:27.532545    4886 certs.go:112] creating a new certificate authority for etcd-ca\n[certs] Generating \"etcd/ca\" certificate and key\nI0322 20:09:27.631261    4886 certs.go:473] validating certificate period for etcd/ca certificate\n[certs] Generating \"etcd/server\" certificate and key\n[certs] etcd/server serving cert is signed for DNS names [k8s-master01 localhost] and IPs [192.168.11.161 127.0.0.1 ::1]\n[certs] Generating \"etcd/peer\" certificate and key\n[certs] etcd/peer serving cert is signed for DNS names [k8s-master01 localhost] and IPs [192.168.11.161 127.0.0.1 ::1]\n[certs] Generating \"etcd/healthcheck-client\" certificate and key\n[certs] Generating \"apiserver-etcd-client\" certificate and key\nI0322 20:09:28.312889    4886 certs.go:78] creating new public/private key files for signing service account users\n[certs] Generating \"sa\" key and public key\n[kubeconfig] Using kubeconfig folder \"/etc/kubernetes\"\nI0322 20:09:28.495281    4886 kubeconfig.go:111] creating kubeconfig file for admin.conf\n[kubeconfig] Writing \"admin.conf\" kubeconfig file\nI0322 20:09:28.848054    4886 kubeconfig.go:111] creating kubeconfig file for super-admin.conf\n[kubeconfig] Writing \"super-admin.conf\" kubeconfig file\nI0322 20:09:29.129094    4886 kubeconfig.go:111] creating kubeconfig file for kubelet.conf\n[kubeconfig] Writing \"kubelet.conf\" kubeconfig file\nI0322 20:09:29.386206    4886 kubeconfig.go:111] creating kubeconfig file for controller-manager.conf\n[kubeconfig] Writing \"controller-manager.conf\" kubeconfig file\nI0322 20:09:29.483874    4886 kubeconfig.go:111] creating kubeconfig file for scheduler.conf\n[kubeconfig] Writing \"scheduler.conf\" kubeconfig file\n[etcd] Creating static Pod manifest for local etcd in \"/etc/kubernetes/manifests\"\nI0322 20:09:29.607843    4886 local.go:66] [etcd] wrote Static Pod manifest for a local etcd member to \"/etc/kubernetes/manifests/etcd.yaml\"\n[control-plane] Using manifest folder \"/etc/kubernetes/manifests\"\n[control-plane] Creating static Pod manifest for \"kube-apiserver\"\nI0322 20:09:29.607888    4886 manifests.go:104] [control-plane] getting StaticPodSpecs\nI0322 20:09:29.608085    4886 certs.go:473] validating certificate period for CA certificate\nI0322 20:09:29.608178    4886 manifests.go:130] [control-plane] adding volume \"ca-certs\" for component \"kube-apiserver\"\nI0322 20:09:29.608192    4886 manifests.go:130] [control-plane] adding volume \"etc-ca-certificates\" for component \"kube-apiserver\"\nI0322 20:09:29.608198    4886 manifests.go:130] [control-plane] adding volume \"k8s-certs\" for component \"kube-apiserver\"\nI0322 20:09:29.608206    4886 manifests.go:130] [control-plane] adding volume \"usr-local-share-ca-certificates\" for component \"kube-apiserver\"\nI0322 20:09:29.608214    4886 manifests.go:130] [control-plane] adding volume \"usr-share-ca-certificates\" for component \"kube-apiserver\"\nI0322 20:09:29.609567    4886 manifests.go:159] [control-plane] wrote static Pod manifest for component \"kube-apiserver\" to \"/etc/kubernetes/manifests/kube-apiserver.yaml\"\n[control-plane] Creating static Pod manifest for \"kube-controller-manager\"\nI0322 20:09:29.609599    4886 manifests.go:104] [control-plane] getting StaticPodSpecs\nI0322 20:09:29.609807    4886 manifests.go:130] [control-plane] adding volume \"ca-certs\" for component \"kube-controller-manager\"\nI0322 20:09:29.609819    4886 manifests.go:130] [control-plane] adding volume \"etc-ca-certificates\" for component \"kube-controller-manager\"\nI0322 20:09:29.609824    4886 manifests.go:130] [control-plane] adding volume \"flexvolume-dir\" for component \"kube-controller-manager\"\nI0322 20:09:29.609835    4886 manifests.go:130] [control-plane] adding volume \"k8s-certs\" for component \"kube-controller-manager\"\nI0322 20:09:29.609841    4886 manifests.go:130] [control-plane] adding volume \"kubeconfig\" for component \"kube-controller-manager\"\nI0322 20:09:29.609846    4886 manifests.go:130] [control-plane] adding volume \"usr-local-share-ca-certificates\" for component \"kube-controller-manager\"\nI0322 20:09:29.609854    4886 manifests.go:130] [control-plane] adding volume \"usr-share-ca-certificates\" for component \"kube-controller-manager\"\nI0322 20:09:29.610610    4886 manifests.go:159] [control-plane] wrote static Pod manifest for component \"kube-controller-manager\" to \"/etc/kubernetes/manifests/kube-controller-manager.yaml\"\n[control-plane] Creating static Pod manifest for \"kube-scheduler\"\nI0322 20:09:29.610640    4886 manifests.go:104] [control-plane] getting StaticPodSpecs\nI0322 20:09:29.610848    4886 manifests.go:130] [control-plane] adding volume \"kubeconfig\" for component \"kube-scheduler\"\nI0322 20:09:29.611322    4886 manifests.go:159] [control-plane] wrote static Pod manifest for component \"kube-scheduler\" to \"/etc/kubernetes/manifests/kube-scheduler.yaml\"\nI0322 20:09:29.611339    4886 kubelet.go:70] Stopping the kubelet\n[kubelet-start] Writing kubelet environment file with flags to file \"/var/lib/kubelet/kubeadm-flags.env\"\n[kubelet-start] Writing kubelet configuration to file \"/var/lib/kubelet/config.yaml\"\n[kubelet-start] Starting the kubelet\nI0322 20:09:29.948568    4886 loader.go:402] Config loaded from file:  /etc/kubernetes/admin.conf\nI0322 20:09:29.949088    4886 envvar.go:172] \"Feature gate default state\" feature=\"ClientsAllowCBOR\" enabled=false\nI0322 20:09:29.949115    4886 envvar.go:172] \"Feature gate default state\" feature=\"ClientsPreferCBOR\" enabled=false\nI0322 20:09:29.949124    4886 envvar.go:172] \"Feature gate default state\" feature=\"InformerResourceVersion\" enabled=false\nI0322 20:09:29.949144    4886 envvar.go:172] \"Feature gate default state\" feature=\"WatchListClient\" enabled=false\n[wait-control-plane] Waiting for the kubelet to boot up the control plane as static Pods from directory \"/etc/kubernetes/manifests\"\n[kubelet-check] Waiting for a healthy kubelet at http://127.0.0.1:10248/healthz. This can take up to 4m0s\n[kubelet-check] The kubelet is healthy after 502.456949ms\n[api-check] Waiting for a healthy API server. This can take up to 4m0s\nI0322 20:09:30.452200    4886 wait.go:220] \"Request Body\" body=\"\"\nI0322 20:09:30.452302    4886 round_trippers.go:473] curl -v -XGET  -H \"Accept: application/json, */*\" -H \"User-Agent: kubeadm/v1.32.3 (linux/amd64) kubernetes/32cc146\" 'https://192.168.11.161:6443/healthz?timeout=10s'\nI0322 20:09:30.452515    4886 round_trippers.go:515] HTTP Trace: Dial to tcp:192.168.11.161:6443 failed: dial tcp 192.168.11.161:6443: connect: connection refused\nI0322 20:09:30.452547    4886 round_trippers.go:560] GET https://192.168.11.161:6443/healthz?timeout=10s  in 0 milliseconds\nI0322 20:09:30.452664    4886 round_trippers.go:577] HTTP Statistics: DNSLookup 0 ms Dial 0 ms TLSHandshake 0 ms Duration 0 ms\nI0322 20:09:30.452746    4886 round_trippers.go:584] Response Headers:\nI0322 20:09:30.952488    4886 wait.go:220] \"Request Body\" body=\"\"\nI0322 20:09:30.952695    4886 round_trippers.go:473] curl -v -XGET  -H \"Accept: application/json, */*\" -H \"User-Agent: kubeadm/v1.32.3 (linux/amd64) kubernetes/32cc146\" 'https://192.168.11.161:6443/healthz?timeout=10s'\nI0322 20:09:30.953055    4886 round_trippers.go:515] HTTP Trace: Dial to tcp:192.168.11.161:6443 failed: dial tcp 192.168.11.161:6443: connect: connection refused\nI0322 20:09:30.953141    4886 round_trippers.go:560] GET https://192.168.11.161:6443/healthz?timeout=10s  in 0 milliseconds\nI0322 20:09:30.953178    4886 round_trippers.go:577] HTTP Statistics: DNSLookup 0 ms Dial 0 ms TLSHandshake 0 ms Duration 0 ms\nI0322 20:09:30.953196    4886 round_trippers.go:584] Response Headers:\nI0322 20:09:31.453072    4886 wait.go:220] \"Request Body\" body=\"\"\nI0322 20:09:31.453425    4886 round_trippers.go:473] curl -v -XGET  -H \"Accept: application/json, */*\" -H \"User-Agent: kubeadm/v1.32.3 (linux/amd64) kubernetes/32cc146\" 'https://192.168.11.161:6443/healthz?timeout=10s'\nI0322 20:09:31.453892    4886 round_trippers.go:515] HTTP Trace: Dial to tcp:192.168.11.161:6443 failed: dial tcp 192.168.11.161:6443: connect: connection refused\nI0322 20:09:31.453935    4886 round_trippers.go:560] GET https://192.168.11.161:6443/healthz?timeout=10s  in 0 milliseconds\nI0322 20:09:31.453947    4886 round_trippers.go:577] HTTP Statistics: DNSLookup 0 ms Dial 0 ms TLSHandshake 0 ms Duration 0 ms\nI0322 20:09:31.453955    4886 round_trippers.go:584] Response Headers:\nI0322 20:09:31.952836    4886 wait.go:220] \"Request Body\" body=\"\"\nI0322 20:09:31.953094    4886 round_trippers.go:473] curl -v -XGET  -H \"Accept: application/json, */*\" -H \"User-Agent: kubeadm/v1.32.3 (linux/amd64) kubernetes/32cc146\" 'https://192.168.11.161:6443/healthz?timeout=10s'\nI0322 20:09:31.953553    4886 round_trippers.go:517] HTTP Trace: Dial to tcp:192.168.11.161:6443 succeed\nI0322 20:09:33.315605    4886 round_trippers.go:560] GET https://192.168.11.161:6443/healthz?timeout=10s 403 Forbidden in 1362 milliseconds\nI0322 20:09:33.315644    4886 round_trippers.go:577] HTTP Statistics: DNSLookup 0 ms Dial 0 ms TLSHandshake 1336 ms ServerProcessing 25 ms Duration 1362 ms\nI0322 20:09:33.315657    4886 round_trippers.go:584] Response Headers:\nI0322 20:09:33.315670    4886 round_trippers.go:587]     X-Content-Type-Options: nosniff\nI0322 20:09:33.315701    4886 round_trippers.go:587]     X-Kubernetes-Pf-Flowschema-Uid: \nI0322 20:09:33.315710    4886 round_trippers.go:587]     X-Kubernetes-Pf-Prioritylevel-Uid: \nI0322 20:09:33.315717    4886 round_trippers.go:587]     Content-Length: 192\nI0322 20:09:33.315723    4886 round_trippers.go:587]     Date: Sat, 22 Mar 2025 12:09:33 GMT\nI0322 20:09:33.315731    4886 round_trippers.go:587]     Audit-Id: 989b38d0-29d4-4450-b564-12e6142c52b7\nI0322 20:09:33.315737    4886 round_trippers.go:587]     Cache-Control: no-cache, private\nI0322 20:09:33.315741    4886 round_trippers.go:587]     Content-Type: application/json\nI0322 20:09:33.316997    4886 wait.go:220] \"Response Body\" body=<\n\t{\"kind\":\"Status\",\"apiVersion\":\"v1\",\"metadata\":{},\"status\":\"Failure\",\"message\":\"forbidden: User \\\"kubernetes-admin\\\" cannot get path \\\"/healthz\\\"\",\"reason\":\"Forbidden\",\"details\":{},\"code\":403}\n >\n\n.......   中间冗长的日志省略\n\nI0322 20:09:37.294961    4886 round_trippers.go:473] curl -v -XPOST  -H \"User-Agent: kubeadm/v1.32.3 (linux/amd64) kubernetes/32cc146\" -H \"Accept: application/vnd.kubernetes.protobuf,application/json\" -H \"Content-Type: application/vnd.kubernetes.protobuf\" 'https://192.168.11.161:6443/apis/rbac.authorization.k8s.io/v1/namespaces/kube-system/rolebindings?timeout=10s'\nI0322 20:09:37.298583    4886 round_trippers.go:560] POST https://192.168.11.161:6443/apis/rbac.authorization.k8s.io/v1/namespaces/kube-system/rolebindings?timeout=10s 201 Created in 3 milliseconds\nI0322 20:09:37.298609    4886 round_trippers.go:577] HTTP Statistics: GetConnection 0 ms ServerProcessing 3 ms Duration 3 ms\nI0322 20:09:37.298634    4886 round_trippers.go:584] Response Headers:\nI0322 20:09:37.298649    4886 round_trippers.go:587]     X-Kubernetes-Pf-Flowschema-Uid: 9a8a526f-0630-4d03-b851-7ace48e8dc05\nI0322 20:09:37.298661    4886 round_trippers.go:587]     X-Kubernetes-Pf-Prioritylevel-Uid: d044472a-2a80-46df-8bc8-7d94366f6e34\nI0322 20:09:37.298667    4886 round_trippers.go:587]     Content-Length: 385\nI0322 20:09:37.298675    4886 round_trippers.go:587]     Date: Sat, 22 Mar 2025 12:09:37 GMT\nI0322 20:09:37.298680    4886 round_trippers.go:587]     Audit-Id: ece06481-523b-4fe4-9d2c-2d369eceecc1\nI0322 20:09:37.298690    4886 round_trippers.go:587]     Cache-Control: no-cache, private\nI0322 20:09:37.298695    4886 round_trippers.go:587]     Content-Type: application/vnd.kubernetes.protobuf\nI0322 20:09:37.298744    4886 type.go:252] \"Response Body\" body=<\n\t00000000  6b 38 73 00 0a 2b 0a 1c  72 62 61 63 2e 61 75 74  |k8s..+..rbac.aut|\n\t00000010  68 6f 72 69 7a 61 74 69  6f 6e 2e 6b 38 73 2e 69  |horization.k8s.i|\n\t00000020  6f 2f 76 31 12 0b 52 6f  6c 65 42 69 6e 64 69 6e  |o/v1..RoleBindin|\n\t00000030  67 12 c9 02 0a c0 01 0a  0a 6b 75 62 65 2d 70 72  |g........kube-pr|\n\t00000040  6f 78 79 12 00 1a 0b 6b  75 62 65 2d 73 79 73 74  |oxy....kube-syst|\n\t00000050  65 6d 22 00 2a 24 63 38  62 62 36 66 63 64 2d 38  |em\".*$c8bb6fcd-8|\n\t00000060  66 35 38 2d 34 35 35 34  2d 39 66 36 30 2d 38 39  |f58-4554-9f60-89|\n\t00000070  39 32 61 39 65 36 64 36  64 39 32 03 33 30 33 38  |92a9e6d6d92.3038|\n\t00000080  00 42 08 08 81 d1 fa be  06 10 00 8a 01 69 0a 07  |.B...........i..|\n\t00000090  6b 75 62 65 61 64 6d 12  06 55 70 64 61 74 65 1a  |kubeadm..Update.|\n\t000000a0  1c 72 62 61 63 2e 61 75  74 68 6f 72 69 7a 61 74  |.rbac.authorizat|\n\t000000b0  69 6f 6e 2e 6b 38 73 2e  69 6f 2f 76 31 22 08 08  |ion.k8s.io/v1\"..|\n\t000000c0  81 d1 fa be 06 10 00 32  08 46 69 65 6c 64 73 56  |.......2.FieldsV|\n\t000000d0  31 3a 22 0a 20 7b 22 66  3a 72 6f 6c 65 52 65 66  |1:\". {\"f:roleRef|\n\t000000e0  22 3a 7b 7d 2c 22 66 3a  73 75 62 6a 65 63 74 73  |\":{},\"f:subjects|\n\t000000f0  22 3a 7b 7d 7d 42 00 12  55 0a 05 47 72 6f 75 70  |\":{}}B..U..Group|\n\t00000100  12 19 72 62 61 63 2e 61  75 74 68 6f 72 69 7a 61  |..rbac.authoriza|\n\t00000110  74 69 6f 6e 2e 6b 38 73  2e 69 6f 1a 2f 73 79 73  |tion.k8s.io./sys|\n\t00000120  74 65 6d 3a 62 6f 6f 74  73 74 72 61 70 70 65 72  |tem:bootstrapper|\n\t00000130  73 3a 6b 75 62 65 61 64  6d 3a 64 65 66 61 75 6c  |s:kubeadm:defaul|\n\t00000140  74 2d 6e 6f 64 65 2d 74  6f 6b 65 6e 22 00 1a 2d  |t-node-token\"..-|\n\t00000150  0a 19 72 62 61 63 2e 61  75 74 68 6f 72 69 7a 61  |..rbac.authoriza|\n\t00000160  74 69 6f 6e 2e 6b 38 73  2e 69 6f 12 04 52 6f 6c  |tion.k8s.io..Rol|\n\t00000170  65 1a 0a 6b 75 62 65 2d  70 72 6f 78 79 1a 00 22  |e..kube-proxy..\"|\n\t00000180  00                                                |.|\n >\n[addons] Applied essential addon: kube-proxy\nI0322 20:09:37.299409    4886 loader.go:402] Config loaded from file:  /etc/kubernetes/admin.conf\nI0322 20:09:37.300120    4886 loader.go:402] Config loaded from file:  /etc/kubernetes/admin.conf\n\nYour Kubernetes control-plane has initialized successfully!\n\nTo start using your cluster, you need to run the following as a regular user:\n\n  mkdir -p $HOME/.kube\n  sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config\n  sudo chown $(id -u):$(id -g) $HOME/.kube/config\n\nAlternatively, if you are the root user, you can run:\n\n  export KUBECONFIG=/etc/kubernetes/admin.conf\n\nYou should now deploy a pod network to the cluster.\nRun \"kubectl apply -f [podnetwork].yaml\" with one of the options listed at:\n  https://kubernetes.io/docs/concepts/cluster-administration/addons/\n\nThen you can join any number of worker nodes by running the following on each as root:\n\nkubeadm join 192.168.11.161:6443 --token abcdef.0123456789abcdef \\\n\t--discovery-token-ca-cert-hash sha256:c7a1d928a82c30bec6dec880092339e64309b24cc01782d8a9d9c6c0ecfde58f \n\n```\n\n\n## 3.4 准备kubectl配置文件 \n\n以下操作仅在Master节点上进行。\n\n```bash\nmkdir -p $HOME/.kube\nsudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config\nsudo chown $(id -u):$(id -g) $HOME/.kube/config\n```\n\n## 3.5 工作节点加入集群 \n\n### k8s-worker01节点加入集群 \n\n以下操作仅在Worker节点操作\n\n```bash\nroot@k8s-worker01:~# kubeadm join 192.168.11.161:6443 --token abcdef.0123456789abcdef --discovery-token-ca-cert-hash sha256:c7a1d928a82c30bec6dec880092339e64309b24cc01782d8a9d9c6c0ecfde58f \n```\n\n### k8s-worker02节点加入集群 \n\n以下操作仅在Worker节点操作\n\n```bash\nroot@k8s-worker02:~# kubeadm join 192.168.11.161:6443 --token abcdef.0123456789abcdef --discovery-token-ca-cert-hash sha256:c7a1d928a82c30bec6dec880092339e64309b24cc01782d8a9d9c6c0ecfde58f\n```\n\n\n## 3.6 验证K8S集群节点是否可用 \n\n在Master节点检查集群节点是否可用 \n\n```bash\nroot@k8s-master01:~# kubectl get nodes\n\nNAME           STATUS     ROLES           AGE     VERSION\nk8s-master01   NotReady   control-plane   103m    v1.32.3\nk8s-worker01   NotReady   <none>          4m12s   v1.32.3\nk8s-worker02   NotReady   <none>          4m12s   v1.32.3\n```\n\n在Master节点检查集群Pod状态（按命名空间筛选） \n\n```bash\nroot@k8s-master01:~# kubectl get pods -n kube-system\n\nNAME                                   READY   STATUS    RESTARTS   AGE\ncoredns-6766b7b6bb-6dtl7               0/1     Pending   0          104m\ncoredns-6766b7b6bb-lrpw7               0/1     Pending   0          104m\netcd-k8s-master01                      1/1     Running   0          104m      // 静态pod\nkube-apiserver-k8s-master01            1/1     Running   0          104m      // 静态pod\nkube-controller-manager-k8s-master01   1/1     Running   0          104m      // 静态pod    \nkube-proxy-6g8dn                       1/1     Running   0          104m      \nkube-proxy-kmzv6                       1/1     Running   0          5m1s\nkube-proxy-pj2t5                       1/1     Running   0          5m1s\nkube-scheduler-k8s-master01            1/1     Running   0          104m      // 静态pod \n```\n\n查看命名空间\n\n```bash\nroot@k8s-master01:~# kubectl get cs\n\nWarning: v1 ComponentStatus is deprecated in v1.19+\nNAME                 STATUS    MESSAGE   ERROR\netcd-0               Healthy   ok        \nscheduler            Healthy   ok        \ncontroller-manager   Healthy   ok  \n```\n\n\n# 四、K8S集群网络插件calico部署 \n\n[calico网络插件](https://projectcalico.docs.tigera.io/about/about-calico)\n\n\n\n## 4.1 第一步：安装tigera-operator\n\n```bash\nroot@k8s-master01:~# kubectl create -f https://raw.githubusercontent.com/projectcalico/calico/v3.29.2/manifests/tigera-operator.yaml\n```\n\n### 4.1.1 输出内容：\n\n``` bash\nroot@k8s-master01:~# kubectl create -f https://raw.githubusercontent.com/projectcalico/calico/v3.29.2/manifests/tigera-operator.yaml\n\nnamespace/tigera-operator created\ncustomresourcedefinition.apiextensions.k8s.io/bgpconfigurations.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/bgpfilters.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/bgppeers.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/blockaffinities.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/caliconodestatuses.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/clusterinformations.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/felixconfigurations.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/globalnetworkpolicies.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/globalnetworksets.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/hostendpoints.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/ipamblocks.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/ipamconfigs.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/ipamhandles.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/ippools.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/ipreservations.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/kubecontrollersconfigurations.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/networkpolicies.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/networksets.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/tiers.crd.projectcalico.org created\ncustomresourcedefinition.apiextensions.k8s.io/adminnetworkpolicies.policy.networking.k8s.io created\ncustomresourcedefinition.apiextensions.k8s.io/apiservers.operator.tigera.io created\ncustomresourcedefinition.apiextensions.k8s.io/imagesets.operator.tigera.io created\ncustomresourcedefinition.apiextensions.k8s.io/installations.operator.tigera.io created\ncustomresourcedefinition.apiextensions.k8s.io/tigerastatuses.operator.tigera.io created\nserviceaccount/tigera-operator created\nclusterrole.rbac.authorization.k8s.io/tigera-operator created\nclusterrolebinding.rbac.authorization.k8s.io/tigera-operator created\ndeployment.apps/tigera-operator created\n```\n \n\n\n```bash\nroot@k8s-master01:~# kubectl get ns\n\nNAME              STATUS   AGE\ndefault           Active   116m\nkube-node-lease   Active   116m\nkube-public       Active   116m\nkube-system       Active   116m\ntigera-operator   Active   106s      // 新增的pod\n```\n\n\n```bash\nroot@k8s-master01:~# kubectl get pods -n tigera-operator\n\nNAME                              READY   STATUS             RESTARTS   AGE\ntigera-operator-ccfc44587-vswlt   0/1     ImagePullBackOff   0          3m44s\n```\n\n\n## 4.2 第二步：安装calico-system\n\n\n### 4.2.1 下载custom-resources.yaml\n\n```bash\n~# wget https://raw.githubusercontent.com/projectcalico/calico/v3.29.2/manifests/custom-resources.yaml\n```\n\n\n### 4.2.2 修改custom-resources.yaml中的网段cidr配置\n\n```bash \n~# nano custom-resources.yaml\n```\n\n```yaml\n# This section includes base Calico installation configuration.\n# For more information, see: https://projectcalico.docs.tigera.io/master/reference/installation/api#operator.tigera.io/v1.Installation\n apiVersion: operator.tigera.io/v1\n kind: Installation\n metadata:\n  name: default\n spec:\n  # Configures Calico networking.\n  calicoNetwork:\n    # Note: The ipPools section cannot be modified post-install.\n    ipPools:\n    - blockSize: 26\n      cidr: 10.244.0.0/16                # 修改此行内容为初始化时定义的pod network cidr\n      encapsulation: VXLANCrossSubnet\n      natOutgoing: Enabled\n      nodeSelector: all()\n      \n---\n# This section configures the Calico API server.\n# For more information, see: https://projectcalico.docs.tigera.io/master/reference/installation/api#operator.tigera.io/v1.APIServer\napiVersion: operator.tigera.io/v1\nkind: APIServer\nmetadata:\n  name: default\n spec: {}\n```\n\n\n- 再次检查修改后的配置文件\n\n```bash\n~# cat custom-resources.yaml\n```\n\n\n### 4.2.3 应用部署配置文件，进行部署\n\n```bash\nroot@k8s-master01:~# kubectl create -f custom-resources.yaml\n\ninstallation.operator.tigera.io/default created\napiserver.operator.tigera.io/default created\n```\n\n\n### 4.2.4 检查calico安装结果\n\n```bash\nroot@k8s-master01:~# watch kubectl get pods -n calico-system\n```\n\n经过一段时间的下载安装，全部署完成后大致如下输出所示：\n\n```bash\nroot@k8s-master01:~# kubectl get pods -n calico-system\n\nNAME                                      READY   STATUS    RESTARTS   AGE\ncalico-kube-controllers-cf49d8944-6zv2z   1/1     Running   0          53m\ncalico-node-2nfvf                         1/1     Running   0          53m\ncalico-node-nxhvj                         1/1     Running   0          53m\ncalico-node-v9lp9                         1/1     Running   0          53m\ncalico-typha-7b6f98bc78-49bf5             1/1     Running   0          53m\ncalico-typha-7b6f98bc78-7vhd6             1/1     Running   0          53m\ncsi-node-driver-6nbvr                     2/2     Running   0          53m\ncsi-node-driver-9cqq5                     2/2     Running   0          53m\ncsi-node-driver-9pm4t                     2/2     Running   0          53m   \n```\n\n\n查看节点状态变化：\n\n```bash\nroot@k8s-master01:~# kubectl get nodes\n\nNAME           STATUS   ROLES           AGE     VERSION\nk8s-master01   Ready    control-plane   3h40m   v1.32.3\nk8s-worker01   Ready    <none>          121m    v1.32.3\nk8s-worker02   Ready    <none>          121m    v1.32.3\n```\n\n查看pod状态\n\n```bash\nroot@k8s-master01:~# kubectl get pods -n kube-system\n\nNAME                                   READY   STATUS    RESTARTS   AGE\ncoredns-6766b7b6bb-6dtl7               1/1     Running   0          3h42m\ncoredns-6766b7b6bb-lrpw7               1/1     Running   0          3h42m\netcd-k8s-master01                      1/1     Running   0          3h42m\nkube-apiserver-k8s-master01            1/1     Running   0          3h42m\nkube-controller-manager-k8s-master01   1/1     Running   0          3h42m\nkube-proxy-6g8dn                       1/1     Running   0          3h42m\nkube-proxy-kmzv6                       1/1     Running   0          122m\nkube-proxy-pj2t5                       1/1     Running   0          122m\nkube-scheduler-k8s-master01            1/1     Running   0          3h42m\n```\n\n查看pod的IP及网段\n\n```bash\nroot@k8s-master01:~# kubectl get pods -n kube-system -o wide\n\nNAME                                   READY   STATUS    RESTARTS   AGE     IP               NODE           NOMINATED NODE   READINESS GATES\ncoredns-6766b7b6bb-6dtl7               1/1     Running   0          3h43m   10.244.69.198    k8s-worker02   <none>           <none>\ncoredns-6766b7b6bb-lrpw7               1/1     Running   0          3h43m   10.244.69.197    k8s-worker02   <none>           <none>\netcd-k8s-master01                      1/1     Running   0          3h44m   192.168.11.161   k8s-master01   <none>           <none>\nkube-apiserver-k8s-master01            1/1     Running   0          3h44m   192.168.11.161   k8s-master01   <none>           <none>\nkube-controller-manager-k8s-master01   1/1     Running   0          3h44m   192.168.11.161   k8s-master01   <none>           <none>\nkube-proxy-6g8dn                       1/1     Running   0          3h43m   192.168.11.161   k8s-master01   <none>           <none>\nkube-proxy-kmzv6                       1/1     Running   0          124m    192.168.11.165   k8s-worker01   <none>           <none>\nkube-proxy-pj2t5                       1/1     Running   0          124m    192.168.11.166   k8s-worker02   <none>           <none>\nkube-scheduler-k8s-master01            1/1     Running   0          3h44m   192.168.11.161   k8s-master01   <none>           <none>\n```\n\n\n\n# 五、部署Nginx应用验证K8S集群可用性 \n\n本章以Nginx为例，先添加nginx应用配置文件nginx.yaml，再添加相关应用配置\n\n\n## 5.1 配置NginxWeb部署配置文件nginx-website.yaml\n\n```bash\nroot@k8s-master01:~# nano /home/acanx/nginx-website.yaml\n```\n\n```yaml\n---\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: nginxweb\nspec:\n  selector:\n    matchLabels:\n      app: nginxwebsite\n  replicas: 3\n  template:\n    metadata:\n      labels:\n        app: nginxwebsite\n    spec:\n      containers:\n      - name: nginxwebsite\n        image: nginx:latest\n        imagePullPolicy: IfNotPresent\n        ports:\n        - containerPort: 80\n---\napiVersion: v1\nkind: Service\nmetadata:\n  name: nginxweb-service\nspec:\n  externalTrafficPolicy: Cluster\n  selector:\n    app: nginxwebsite\n  ports:\n  - protocol: TCP\n    port: 80\n    targetPort: 80\n    nodePort: 30080\n  type: NodePort\n```\n\n\n## 5.2 执行命令部署nginx服务\n\n```bash\nroot@k8s-master01:~# kubectl apply -f /home/acanx/nginx-website.yaml\n```\n\n```\ndeployment.apps/nginxweb created\nservice/nginxweb-service created\n```\n\n\n## 5.3 检查部署结果\n\n```bash\nroot@k8s-master01:~# kubectl get deployment\n\nNAME       READY   UP-TO-DATE   AVAILABLE   AGE\nnginxweb   0/3     3            0           2m35s\n```\n\n```bash\nroot@k8s-master01:~# kubectl get pods\n\nNAME                       READY   STATUS              RESTARTS   AGE\nnginxweb-7c88f6c77-pck4f   0/1     ContainerCreating   0          3m43s\nnginxweb-7c88f6c77-rv76n   0/1     ContainerCreating   0          3m43s\nnginxweb-7c88f6c77-vb8xj   0/1     ContainerCreating   0          3m43s\n```\n\n\n### 5.3.1 测试K8S集群内访问\n\n```bash\nroot@k8s-master01:~# kubectl get service\n\nNAME               TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)        AGE\nkubernetes         ClusterIP   10.96.0.1       <none>        443/TCP        4h11m\nnginxweb-service   NodePort    10.106.65.218   <none>        80:30080/TCP   10m\nroot@k8s-master01:~# curl http://10.106.65.218               // 验证在K8S集群内布访问\n\n<!DOCTYPE html>\n<html>\n<head>\n<title>Welcome to nginx!</title>\n<style>\nhtml { color-scheme: light dark; }\nbody { width: 35em; margin: 0 auto;\nfont-family: Tahoma, Verdana, Arial, sans-serif; }\n</style>\n</head>\n<body>\n<h1>Welcome to nginx!</h1>\n<p>If you see this page, the nginx web server is successfully installed and\nworking. Further configuration is required.</p>\n\n<p>For online documentation and support please refer to\n<a href=\"http://nginx.org/\">nginx.org</a>.<br/>\nCommercial support is available at\n<a href=\"http://nginx.com/\">nginx.com</a>.</p>\n\n<p><em>Thank you for using nginx.</em></p>\n</body>\n</html>\n```\n\n### 5.3.2 测试集群外访问\n\n打开集群外的局域网内内主机，正常情况下集群内任意一个节点IP加对应端口号都可以访问，实际分别测试访问 http://192.168.11.161:30080/ http://192.168.11.165:30080/  http://192.168.11.166:30080/ 页面，以上三个url链接均可以正常打开。\n\n效果如下图所示：\n\n![Master01](/Node/imgs/03_02/Nginx-K8SMaster01.png)\n![Worker01](/Node/imgs/03_02/Nginx-K8SWorker01.png)\n![Worker02](/Node/imgs/03_02/Nginx-K8SWorker02.png)\n\n上述页面可以正常显示则说明nginx演示应用部署成功！\n\n\n\n# 六、 部署Kubernetes Dashboard应用\n\n- [部署和访问 Kubernetes 仪表板（Dashboard）](https://kubernetes.io/zh-cn/docs/tasks/access-application-cluster/web-ui-dashboard/)\n\n## 6.1 安装Helm \n\n### 6.1.1 Helm介绍及下载\n\nHelm 是查找、分享和使用软件构建 Kubernetes 的最优方式。\n\n- 官网 https://helm.sh/\n- 项目地址 https://github.com/helm/helm\n- Helm安装文档 https://helm.sh/zh/docs/intro/install/\n\n### 6.1.2 Helm安装\n\n\n```bash\nroot@k8s-master01:~# wget https://get.helm.sh/helm-v3.17.2-linux-amd64.tar.gz   # 下载文件\n\nroot@k8s-master01:~# tar -zxvf /home/acanx/helm-v3.0.0-linux-amd64.tar.gz         # 解压文件\n\nroot@k8s-master01:~# sudo mv linux-amd64/helm /usr/local/bin/helm                    # 移动到指定目录\nroot@k8s-master01:~# sudo mv /home/acanx/helm /usr/local/bin/helm                    # 移动到指定目录\n\nroot@k8s-master01:~# ls -l /usr/local/bin/helm\n\nroot@k8s-master01:~# chmod 755 /usr/local/bin/helm\n\nroot@k8s-master01:~# helm \n```\n\n```bash\nroot@k8s-master01:~# helm\n\nThe Kubernetes package manager\n\nCommon actions for Helm:\n\n- helm search:    search for charts\n- helm pull:      download a chart to your local directory to view\n- helm install:   upload the chart to Kubernetes\n- helm list:      list releases of charts\n\nEnvironment variables:\n\n| Name                               | Description                                                                                                |\n|------------------------------------|------------------------------------------------------------------------------------------------------------|\n| $HELM_CACHE_HOME                   | set an alternative location for storing cached files.                                                      |\n| $HELM_CONFIG_HOME                  | set an alternative location for storing Helm configuration.                                                |\n| $HELM_DATA_HOME                    | set an alternative location for storing Helm data.                                                         |\n| $HELM_DEBUG                        | indicate whether or not Helm is running in Debug mode                                                      |\n| $HELM_DRIVER                       | set the backend storage driver. Values are: configmap, secret, memory, sql.                                |\n| $HELM_DRIVER_SQL_CONNECTION_STRING | set the connection string the SQL storage driver should use.                                               |\n| $HELM_MAX_HISTORY                  | set the maximum number of helm release history.                                                            |\n| $HELM_NAMESPACE                    | set the namespace used for the helm operations.                                                            |\n| $HELM_NO_PLUGINS                   | disable plugins. Set HELM_NO_PLUGINS=1 to disable plugins.                                                 |\n| $HELM_PLUGINS                      | set the path to the plugins directory                                                                      |\n| $HELM_REGISTRY_CONFIG              | set the path to the registry config file.                                                                  |\n| $HELM_REPOSITORY_CACHE             | set the path to the repository cache directory                                                             |\n| $HELM_REPOSITORY_CONFIG            | set the path to the repositories file.                                                                     |\n| $KUBECONFIG                        | set an alternative Kubernetes configuration file (default \"~/.kube/config\")                                |\n| $HELM_KUBEAPISERVER                | set the Kubernetes API Server Endpoint for authentication                                                  |\n| $HELM_KUBECAFILE                   | set the Kubernetes certificate authority file.                                                             |\n| $HELM_KUBEASGROUPS                 | set the Groups to use for impersonation using a comma-separated list.                                      |\n| $HELM_KUBEASUSER                   | set the Username to impersonate for the operation.                                                         |\n| $HELM_KUBECONTEXT                  | set the name of the kubeconfig context.                                                                    |\n| $HELM_KUBETOKEN                    | set the Bearer KubeToken used for authentication.                                                          |\n| $HELM_KUBEINSECURE_SKIP_TLS_VERIFY | indicate if the Kubernetes API server's certificate validation should be skipped (insecure)                |\n| $HELM_KUBETLS_SERVER_NAME          | set the server name used to validate the Kubernetes API server certificate                                 |\n| $HELM_BURST_LIMIT                  | set the default burst limit in the case the server contains many CRDs (default 100, -1 to disable)         |\n| $HELM_QPS                          | set the Queries Per Second in cases where a high number of calls exceed the option for higher burst values |\n\nHelm stores cache, configuration, and data based on the following configuration order:\n\n- If a HELM_*_HOME environment variable is set, it will be used\n- Otherwise, on systems supporting the XDG base directory specification, the XDG variables will be used\n- When no other location is set a default location will be used based on the operating system\n\nBy default, the default directories depend on the Operating System. The defaults are listed below:\n\n| Operating System | Cache Path                | Configuration Path             | Data Path               |\n|------------------|---------------------------|--------------------------------|-------------------------|\n| Linux            | $HOME/.cache/helm         | $HOME/.config/helm             | $HOME/.local/share/helm |\n| macOS            | $HOME/Library/Caches/helm | $HOME/Library/Preferences/helm | $HOME/Library/helm      |\n| Windows          | %TEMP%\\helm               | %APPDATA%\\helm                 | %APPDATA%\\helm          |\n\nUsage:\n  helm [command]\n\nAvailable Commands:\n  completion  generate autocompletion scripts for the specified shell\n  create      create a new chart with the given name\n  dependency  manage a chart's dependencies\n  env         helm client environment information\n  get         download extended information of a named release\n  help        Help about any command\n  history     fetch release history\n  install     install a chart\n  lint        examine a chart for possible issues\n  list        list releases\n  package     package a chart directory into a chart archive\n  plugin      install, list, or uninstall Helm plugins\n  pull        download a chart from a repository and (optionally) unpack it in local directory\n  push        push a chart to remote\n  registry    login to or logout from a registry\n  repo        add, list, remove, update, and index chart repositories\n  rollback    roll back a release to a previous revision\n  search      search for a keyword in charts\n  show        show information of a chart\n  status      display the status of the named release\n  template    locally render templates\n  test        run tests for a release\n  uninstall   uninstall a release\n  upgrade     upgrade a release\n  verify      verify that a chart at the given path has been signed and is valid\n  version     print the client version information\n\nFlags:\n      --burst-limit int                 client-side default throttling limit (default 100)\n      --debug                           enable verbose output\n  -h, --help                            help for helm\n      --kube-apiserver string           the address and the port for the Kubernetes API server\n      --kube-as-group stringArray       group to impersonate for the operation, this flag can be repeated to specify multiple groups.\n      --kube-as-user string             username to impersonate for the operation\n      --kube-ca-file string             the certificate authority file for the Kubernetes API server connection\n      --kube-context string             name of the kubeconfig context to use\n      --kube-insecure-skip-tls-verify   if true, the Kubernetes API server's certificate will not be checked for validity. This will make your HTTPS connections insecure\n      --kube-tls-server-name string     server name to use for Kubernetes API server certificate validation. If it is not provided, the hostname used to contact the server is used\n      --kube-token string               bearer token used for authentication\n      --kubeconfig string               path to the kubeconfig file\n  -n, --namespace string                namespace scope for this request\n      --qps float32                     queries per second used when communicating with the Kubernetes API, not including bursting\n      --registry-config string          path to the registry config file (default \"/root/.config/helm/registry/config.json\")\n      --repository-cache string         path to the directory containing cached repository indexes (default \"/root/.cache/helm/repository\")\n      --repository-config string        path to the file containing repository names and URLs (default \"/root/.config/helm/repositories.yaml\")\n\nUse \"helm [command] --help\" for more information about a command.\nroot@k8s-master01:~# \n```\n\n若输出上述内容，则说明安装成功\n\n\n\n## 6.2 安装kubernetes-dashboard\n\n\n### 6.2.1 添加 kubernetes-dashboard 仓库\n\n```bash\nhelm repo add kubernetes-dashboard https://kubernetes.github.io/dashboard/\n```\n\n- /root/.cache/helm/repository/kubernetes-dashboard-charts.txt\n- /root/.cache/helm/repository/kubernetes-dashboard-index.yaml\n\n\n```bash\nroot@k8s-master01:~/.cache/helm/repository# helm repo list\n\nNAME                \tURL                                    \nkubernetes-dashboard\thttps://kubernetes.github.io/dashboard/\nroot@k8s-master01:~/.cache/helm/repository# \n```\n\n\n\n### 6.2.2 使用 kubernetes-dashboard Chart 部署名为“kubernetes-dashboard” 的 Helm Release\n\n```bash\nhelm upgrade --install kubernetes-dashboard kubernetes-dashboard/kubernetes-dashboard --create-namespace --namespace kubernetes-dashboard\n```\n\n```bash\nroot@k8s-master01:~# helm upgrade --install kubernetes-dashboard kubernetes-dashboard/kubernetes-dashboard --create-namespace --namespace kubernetes-dashboard\n\nRelease \"kubernetes-dashboard\" does not exist. Installing it now.\nNAME: kubernetes-dashboard\nLAST DEPLOYED: Sun Mar 23 17:44:31 2025\nNAMESPACE: kubernetes-dashboard\nSTATUS: deployed\nREVISION: 1\nTEST SUITE: None\nNOTES:\n*************************************************************************************************\n*** PLEASE BE PATIENT: Kubernetes Dashboard may need a few minutes to get up and become ready ***\n*************************************************************************************************\n\nCongratulations! You have just installed Kubernetes Dashboard in your cluster.\n\nTo access Dashboard run:\n  kubectl -n kubernetes-dashboard port-forward svc/kubernetes-dashboard-kong-proxy 8443:443\n\nNOTE: In case port-forward command does not work, make sure that kong service name is correct.\n      Check the services in Kubernetes Dashboard namespace using:\n        kubectl -n kubernetes-dashboard get svc\n\nDashboard will be available at:\n  https://localhost:8443\nroot@k8s-master01:~# \n\n\n\n# 注意：以下命令未做验证，后续可以测试确认\n# 我的集群使用默认参数安装 kubernetes-dashboard-kong 出现异常 8444 端口占用\n# 使用下面的命令进行安装，在安装时关闭kong.tls功能\nroot@k8s-master01:~# helm upgrade --install kubernetes-dashboard kubernetes-dashboard/kubernetes-dashboard --namespace kubernetes-dashboard --set kong.admin.tls.enabled=false   # 原文链接：https://blog.csdn.net/qq_33921750/article/details/136668014\n```\n\n#### 查看kubernetes-dashboard相关的pod的安装情况\n\n```bash\nroot@k8s-master01:~# watch kubectl get pod -A\n\nNAMESPACE              NAME                                                    READY   STATUS              RESTARTS   AGE\ncalico-apiserver       calico-apiserver-7b7bbf4d75-b77ph                       1/1     Running             0          18h\ncalico-apiserver       calico-apiserver-7b7bbf4d75-gqq5w                       1/1     Running             0          18h\ncalico-system          calico-kube-controllers-cf49d8944-6zv2z                 1/1     Running             0          18h\ncalico-system          calico-node-2nfvf                                       1/1     Running             0          18h\ncalico-system          calico-node-nxhvj                                       1/1     Running             0          18h\ncalico-system          calico-node-v9lp9                                       1/1     Running             0          18h\ncalico-system          calico-typha-7b6f98bc78-49bf5                           1/1     Running             0          18h\ncalico-system          calico-typha-7b6f98bc78-7vhd6                           1/1     Running             0          18h\ncalico-system          csi-node-driver-6nbvr                                   2/2     Running             0          18h\ncalico-system          csi-node-driver-9cqq5                                   2/2     Running             0          18h\ncalico-system          csi-node-driver-9pm4t                                   2/2     Running             0          18h\ndefault                nginxweb-7c88f6c77-pck4f                                1/1     Running             0          17h\ndefault                nginxweb-7c88f6c77-rv76n                                1/1     Running             0          17h\ndefault                nginxweb-7c88f6c77-vb8xj                                1/1     Running             0          17h\nkube-system            coredns-6766b7b6bb-6dtl7                                1/1     Running             0          21h\nkube-system            coredns-6766b7b6bb-lrpw7                                1/1     Running             0          21h\nkube-system            etcd-k8s-master01                                       1/1     Running             0          21h\nkube-system            kube-apiserver-k8s-master01                             1/1     Running             0          21h\nkube-system            kube-controller-manager-k8s-master01                    1/1     Running             0          21h\nkube-system            kube-proxy-6g8dn                                        1/1     Running             0          21h\nkube-system            kube-proxy-kmzv6                                        1/1     Running             0          19h\nkube-system            kube-proxy-pj2t5                                        1/1     Running             0          19h\nkube-system            kube-scheduler-k8s-master01                             1/1     Running             0          21h\nkubernetes-dashboard   kubernetes-dashboard-api-c787c9d97-5rqvp                0/1     ContainerCreating   0          2m35s\nkubernetes-dashboard   kubernetes-dashboard-auth-7ff7855689-vmltw              0/1     ContainerCreating   0          2m35s\nkubernetes-dashboard   kubernetes-dashboard-kong-79867c9c48-txfql              0/1     Init:0/1            0          2m35s\nkubernetes-dashboard   kubernetes-dashboard-metrics-scraper-84655b9bd8-mq8h7   0/1     ContainerCreating   0          2m35s\nkubernetes-dashboard   kubernetes-dashboard-web-658946f7f9-crj69               0/1     ContainerCreating   0          2m35s\ntigera-operator        tigera-operator-ccfc44587-vswlt                         1/1     Running             0          19h\n\n\n\nroot@k8s-master01:~/.cache/helm/repository# kubectl get pod -A\n\nNAMESPACE              NAME                                                    READY   STATUS    RESTARTS   AGE\ncalico-apiserver       calico-apiserver-7b7bbf4d75-b77ph                       1/1     Running   0          19h\ncalico-apiserver       calico-apiserver-7b7bbf4d75-gqq5w                       1/1     Running   0          19h\ncalico-system          calico-kube-controllers-cf49d8944-6zv2z                 1/1     Running   0          19h\ncalico-system          calico-node-2nfvf                                       1/1     Running   0          19h\ncalico-system          calico-node-nxhvj                                       1/1     Running   0          19h\ncalico-system          calico-node-v9lp9                                       1/1     Running   0          19h\ncalico-system          calico-typha-7b6f98bc78-49bf5                           1/1     Running   0          19h\ncalico-system          calico-typha-7b6f98bc78-7vhd6                           1/1     Running   0          19h\ncalico-system          csi-node-driver-6nbvr                                   2/2     Running   0          19h\ncalico-system          csi-node-driver-9cqq5                                   2/2     Running   0          19h\ncalico-system          csi-node-driver-9pm4t                                   2/2     Running   0          19h\ndefault                nginxweb-7c88f6c77-pck4f                                1/1     Running   0          18h\ndefault                nginxweb-7c88f6c77-rv76n                                1/1     Running   0          18h\ndefault                nginxweb-7c88f6c77-vb8xj                                1/1     Running   0          18h\nkube-system            coredns-6766b7b6bb-6dtl7                                1/1     Running   0          22h\nkube-system            coredns-6766b7b6bb-lrpw7                                1/1     Running   0          22h\nkube-system            etcd-k8s-master01                                       1/1     Running   0          22h\nkube-system            kube-apiserver-k8s-master01                             1/1     Running   0          22h\nkube-system            kube-controller-manager-k8s-master01                    1/1     Running   0          22h\nkube-system            kube-proxy-6g8dn                                        1/1     Running   0          22h\nkube-system            kube-proxy-kmzv6                                        1/1     Running   0          20h\nkube-system            kube-proxy-pj2t5                                        1/1     Running   0          20h\nkube-system            kube-scheduler-k8s-master01                             1/1     Running   0          22h\nkubernetes-dashboard   kubernetes-dashboard-api-c787c9d97-5rqvp                1/1     Running   0          41m\nkubernetes-dashboard   kubernetes-dashboard-auth-7ff7855689-vmltw              1/1     Running   0          41m\nkubernetes-dashboard   kubernetes-dashboard-kong-79867c9c48-txfql              1/1     Running   0          41m\nkubernetes-dashboard   kubernetes-dashboard-metrics-scraper-84655b9bd8-mq8h7   1/1     Running   0          41m\nkubernetes-dashboard   kubernetes-dashboard-web-658946f7f9-crj69               1/1     Running   0          41m\ntigera-operator        tigera-operator-ccfc44587-vswlt                         1/1     Running   0          20h\n```\n\n\n## 6.3 访问Dashboard前的准备\n\n本节参考自官方文档 \n\n- [创建示例用户](https://github.com/kubernetes/dashboard/blob/master/docs/user/access-control/creating-sample-user.md)\n\n\n### 6.3.1 创建示例用户 service-account\n\n创建dashboard-service-account.yaml文件\n\n```yaml\napiVersion: v1\nkind: ServiceAccount\nmetadata:\n  name: admin-user\n  namespace: kubernetes-dashboard\n```\n\n创建示例用户service-account命令\n\n```bash\nroot@k8s-master01:~# kubectl create -f dashboard-service-account.yaml\n```\n\n\n### 6.3.2 创建 ClusterRoleBinding\n\n创建dashboard-cluster-role-binding.yaml文件\n\n```yaml\napiVersion: rbac.authorization.k8s.io/v1\nkind: ClusterRoleBinding\nmetadata:\n  name: admin-user\nroleRef:\n  apiGroup: rbac.authorization.k8s.io\n  kind: ClusterRole\n  name: cluster-admin\nsubjects:\n- kind: ServiceAccount\n  name: admin-user\n  namespace: kubernetes-dashboard\n```\n\n创建 ClusterRoleBinding\n\n```bash\n# 创建 ClusterRoleBinding\nroot@k8s-master01:~# kubectl create -f dashboard-cluster-role-binding.yaml\n```\n\n\n\n创建dashboard-admin-user.yaml 文件\n\n```yaml\napiVersion: v1\nkind: ServiceAccount\nmetadata:\n  name: admin-user\n  namespace: kubernetes-dashboard\n---\napiVersion: rbac.authorization.k8s.io/v1\nkind: ClusterRoleBinding\nmetadata:\n  name: admin-user\nroleRef:\n  apiGroup: rbac.authorization.k8s.io\n  kind: ClusterRole\n  name: cluster-admin\nsubjects:\n- kind: ServiceAccount\n  name: admin-user\n  namespace: kubernetes-dashboard\n```\n\n创建 ServiceAccount、ClusterRoleBinding\n\n```bash\nroot@k8s-master01:~/.cache/helm/repository# kubectl create -f /home/acanx/Dashboard/dashboard-admin-user.yaml\n\nserviceaccount/admin-user created\nclusterrolebinding.rbac.authorization.k8s.io/admin-user created\n```\n\n#### 6.3.3 获取 ServiceAccount 的 Bearer Token（短期访问的Token令牌） \n\n```bash\n# 生成toke命令\nroot@k8s-master01:~/.cache/helm/repository# kubectl -n kubernetes-dashboard create token admin-user\n\neyJhbGciOiJSUzI1NiIsImtpZCI6IjZPMURRc2RoVjl0YWJnUGU2RDVyLTRKblhybnhBaG1oS3JoVGNBTjh6UkkifQ.eyJhdWQiOlsiaHR0cHM6Ly9rdWJlcm5ldGVzLmRlZmF1bHQuc3ZjLmNsdXN0ZXIubG9jYWwiXSwiZXhwIjoxNzQyNzMxMjUwLCJpYXQiOjE3NDI3Mjc2NTAsImlzcyI6Imh0dHBzOi8va3ViZXJuZXRlcy5kZWZhdWx0LnN2Yy5jbHVzdGVyLmxvY2FsIiwianRpIjoiYWM2NWZiNTItNjViMi00ZmQ5LWI4OTctMzQ4NjI4N2UzYTlmIiwia3ViZXJuZXRlcy5pbyI6eyJuYW1lc3BhY2UiOiJrdWJlcm5ldGVzLWRhc2hib2FyZCIsInNlcnZpY2VhY2NvdW50Ijp7Im5hbWUiOiJhZG1pbi11c2VyIiwidWlkIjoiNTBhNzgwZTYtODgzOC00ODI1LTk5ODktMzdhYTE0ZjM5ZjlkIn19LCJuYmYiOjE3NDI3Mjc2NTAsInN1YiI6InN5c3RlbTpzZXJ2aWNlYWNjb3VudDprdWJlcm5ldGVzLWRhc2hib2FyZDphZG1pbi11c2VyIn0.9j0DPg2sKuVfODjWBxxXN3-r1GmXCGV58LULx81fiCwE5IdCp0LK4to0T35c55yiZjkW2fc7l01k6V7uKFTCGiJ3TDJn_1JJe5lZpWBWXSWoO_q-1nkMgniGPowieHEny3ZU1wm-Kk-nrr2CYZKhXShGDbRxpnjAPf1X0aB6lAzPt59GKVYpPaMYhcEBMMT_ASZrGLYrNR31UpbEXf2UP9Cgyh9m5vpA48FOJKZNt8FRq20egHWlWCw4a4PPb261w81vcWWB1bwTHIw-8CyNZjptrPVX06ch4DT-eX5No5jr8kh2gCiq--bARESxjgDjCebBS8O96NpKRWtQMQbFAQ\n```\n\n获取到的toke是类似上述的字符串\n\n\n\n#### 6.3.4 获取 ServiceAccount 的长期 Bearer Token （长期Token） \n\n- 创建dashboard-secret.yaml文件\n\n```yaml\napiVersion: v1\nkind: Secret\nmetadata:\n  name: admin-user\n  namespace: kubernetes-dashboard\n  annotations:\n    kubernetes.io/service-account.name: \"admin-user\"   \ntype: kubernetes.io/service-account-token  \n```\n\n- 获取 ServiceAccount 的长期 Bearer Token \n\n```bash\n# 创建\nroot@k8s-master01:~# kubectl create -f /home/acanx/Dashboard/dashboard-secret.yaml\n\n# 获取对应的token令牌\nroot@k8s-master01:~# kubectl get secret admin-user -n kubernetes-dashboard -o jsonpath=\"{.data.token}\" | base64 -d\n\neyJhbGciOiJSUzI1NiIsImtpZCI6IjZPMURRc2RoVjl0YWJnUGU2RDVyLTRKblhybnhBaG1oS3JoVGNBTjh6UkkifQ.eyJpc3MiOiJrdWJlcm5ldGVzL3NlcnZpY2VhY2NvdW50Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9uYW1lc3BhY2UiOiJrdWJlcm5ldGVzLWRhc2hib2FyZCIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VjcmV0Lm5hbWUiOiJhZG1pbi11c2VyIiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9zZXJ2aWNlLWFjY291bnQubmFtZSI6ImFkbWluLXVzZXIiLCJrdWJlcm5ldGVzLmlvL3NlcnZpY2VhY2NvdW50L3NlcnZpY2UtYWNjb3VudC51aWQiOiI1MGE3ODBlNi04ODM4LTQ4MjUtOTk4OS0zN2FhMTRmMzlmOWQiLCJzdWIiOiJzeXN0ZW06c2VydmljZWFjY291bnQ6a3ViZXJuZXRlcy1kYXNoYm9hcmQ6YWRtaW4tdXNlciJ9.UG-iAoiCRrMeUePUi5ryn4tUOhFC94eTv_THHkrT_XZhUwC-IHqy9zkmi20tfQ-jnSnzy9_H9Z_auNw6Y4VtGB6pUs7srk6X9AIr4JDrScEVSMLbLXyCsdwGKbAaQJ8n2KA0J_pXibAiaQ77vCIDs9A4HXjn-T7GhoWEeswAcZF1N1SYbDyMxC-paMKb2I5CxL6pxtgWXuPCFkHxVnzeAT9Pswj-q0_Htr46U0Ieyo3dEBVGoOE4FA56UCYEnIfIv-OHXHytcxdaETrKl22EWleAYYENQy82qrdn8eCMK9ahOQyvCFORUbltJWP0hRkIRoMSGx1gD1DMHWMd6T9IRw\n```\n\n\n\n### 6.4 正式访问Dashboard  \n\n参考资料 [Kubernetes 集群中安装和配置 Kubernetes Dashboard](https://blog.csdn.net/qq719779232/article/details/145212142)\n\n\n### 6.4.1 方式一：使用 Port Forwarding进行命令行代理\n\nPort Forwarding 是一种临时性的解决方案，它允许你通过本地机器上的端口直接访问集群内部的服务。这对于开发人员来说非常方便，因为他们不需要对外暴露服务即可进行调试或测试。\n\n\n#### 6.4.1.1 开启访问\n\n通过 Port Forwarding 访问 Dashboard，需要先执行如下命令：\n\n```bash\nkubectl -n kubernetes-dashboard port-forward svc/kubernetes-dashboard 8443:443\n```\n\n这将Dashboard在 [https://localhost:8443](https://localhost:8443) 上可用。\n\n\n#### 6.4.1.2 优点与缺点\n\n- 这种方式的优点在于方法简单易用，无需更改任何集群配置，适合小规模测试或个人使用。但仅限于执行命令的本地机器，它是临时的，关闭终端后连接即断开，无法在其他机器上访问，并且每次使用时都需要手动开启端口转发。\n\n- 也就是说，无法直接在集群外部访问，此方案不适合本次（集群外访问）实际访问场景，因此需要调整采用其他方案\n\n\n### 6.4.2 方式二：修改服务类型为 NodePort\n\n#### 6.4.2.1 方法概述\n\n- NodePort 允许 Kubernetes 服务在各个集群节点的特定端口上对外暴露。这使得用户能够通过任意节点的 IP 地址和指定 NodePort 进行访问 Dashboard。（范围通常是 30000-32767），从而允许外部流量通过该端口进入集群并访问指定的服务。\n\n- 也就是支持集群外部访问\n\n\n#### 6.4.2.2 开启访问\n\n编辑 Dashboard 的服务配置，将其类型更改为 NodePort：\n\n```bash\nroot@k8s-master01:~# kubectl patch svc kubernetes-dashboard-kong-proxy -n kubernetes-dashboard --type='json' -p '[{\"op\":\"replace\",\"path\":\"/spec/type\",\"value\":\"NodePort\"}]'\n# TODO 若需要指定端口，可以指定一个固定的 nodePort：\nroot@k8s-master01:~# kubectl patch svc kubernetes-dashboard-kong-proxy -n kubernetes-dashboard --type='json' -p '[{\"op\":\"add\",\"path\":\"/spec/ports/0/nodePort\",\"value\":30000}]'\n```\n\n以下是实际操作及结果：\n\n```bash\nroot@k8s-master01:~# kubectl patch svc kubernetes-dashboard-kong-proxy -n kubernetes-dashboard --type='json' -p '[{\"op\":\"replace\",\"path\":\"/spec/type\",\"value\":\"NodePort\"}]'\n\nservice/kubernetes-dashboard-kong-proxy patched\nroot@k8s-master01:~# kubectl get svc -A\n\nNAMESPACE              NAME                                   TYPE        CLUSTER-IP       EXTERNAL-IP   PORT(S)                  AGE\ncalico-apiserver       calico-api                             ClusterIP   10.109.219.68    <none>        443/TCP                  21h\ncalico-system          calico-kube-controllers-metrics        ClusterIP   None             <none>        9094/TCP                 20h\ncalico-system          calico-typha                           ClusterIP   10.104.149.150   <none>        5473/TCP                 21h\ndefault                kubernetes                             ClusterIP   10.96.0.1        <none>        443/TCP                  23h\ndefault                nginxweb-service                       NodePort    10.106.65.218    <none>        80:30080/TCP             19h\nkube-system            kube-dns                               ClusterIP   10.96.0.10       <none>        53/UDP,53/TCP,9153/TCP   23h\nkubernetes-dashboard   kubernetes-dashboard-api               ClusterIP   10.104.42.174    <none>        8000/TCP                 128m\nkubernetes-dashboard   kubernetes-dashboard-auth              ClusterIP   10.98.125.185    <none>        8000/TCP                 128m\nkubernetes-dashboard   kubernetes-dashboard-external          NodePort    10.101.246.117   <none>        443:30011/TCP            7m8s\nkubernetes-dashboard   kubernetes-dashboard-kong-proxy        NodePort    10.110.23.250    <none>        443:31094/TCP            128m\nkubernetes-dashboard   kubernetes-dashboard-metrics-scraper   ClusterIP   10.102.211.164   <none>        8000/TCP                 128m\nkubernetes-dashboard   kubernetes-dashboard-web               ClusterIP   10.107.236.126   <none>        8000/TCP                 128m\n\n# 相关的命令1\nroot@k8s-master01:~# kubectl get svc -A | grep dash\n\nkubernetes-dashboard   kubernetes-dashboard-api               ClusterIP   10.104.42.174    <none>        8000/TCP                 166m\nkubernetes-dashboard   kubernetes-dashboard-auth              ClusterIP   10.98.125.185    <none>        8000/TCP                 166m\nkubernetes-dashboard   kubernetes-dashboard-external          NodePort    10.101.246.117   <none>        443:30011/TCP            44m\nkubernetes-dashboard   kubernetes-dashboard-kong-proxy        NodePort    10.110.23.250    <none>        443:31094/TCP            166m\nkubernetes-dashboard   kubernetes-dashboard-metrics-scraper   ClusterIP   10.102.211.164   <none>        8000/TCP                 166m\nkubernetes-dashboard   kubernetes-dashboard-web               ClusterIP   10.107.236.126   <none>        8000/TCP                 166m\n\n# 相关的命令2\nroot@k8s-master01:~# kubectl get svc -A -n kubernetes-dashboard\n\nNAMESPACE              NAME                                   TYPE        CLUSTER-IP       EXTERNAL-IP   PORT(S)                  AGE\ncalico-apiserver       calico-api                             ClusterIP   10.109.219.68    <none>        443/TCP                  21h\ncalico-system          calico-kube-controllers-metrics        ClusterIP   None             <none>        9094/TCP                 21h\ncalico-system          calico-typha                           ClusterIP   10.104.149.150   <none>        5473/TCP                 21h\ndefault                kubernetes                             ClusterIP   10.96.0.1        <none>        443/TCP                  24h\ndefault                nginxweb-service                       NodePort    10.106.65.218    <none>        80:30080/TCP             20h\nkube-system            kube-dns                               ClusterIP   10.96.0.10       <none>        53/UDP,53/TCP,9153/TCP   24h\nkubernetes-dashboard   kubernetes-dashboard-api               ClusterIP   10.104.42.174    <none>        8000/TCP                 165m\nkubernetes-dashboard   kubernetes-dashboard-auth              ClusterIP   10.98.125.185    <none>        8000/TCP                 165m\nkubernetes-dashboard   kubernetes-dashboard-external          NodePort    10.101.246.117   <none>        443:30011/TCP            44m\nkubernetes-dashboard   kubernetes-dashboard-kong-proxy        NodePort    10.110.23.250    <none>        443:31094/TCP            165m\nkubernetes-dashboard   kubernetes-dashboard-metrics-scraper   ClusterIP   10.102.211.164   <none>        8000/TCP                 165m\nkubernetes-dashboard   kubernetes-dashboard-web               ClusterIP   10.107.236.126   <none>        8000/TCP                 165m\n\n```\n\n\n\n如果显示您的连接不是私密连接，在当前页面用键盘输入thisisunsafe,不是在地址栏输入，就直接输入，页面即会自动刷新进入网页。不行就多输入几次，但是要确保输入是正确的。具体请查看这篇[博客](https://blog.csdn.net/qq719779232/article/details/144852360)\n\n\n#### 6.4.2.4 访问Kubernetes Dashboard Web页面\n\n可以看到随机开放了31094端口访问，浏览器中打开 https://192.168.11.161:31094 测试（忽略不是私密连接的提示后）可以正常打开，输入token后能够正常登录。\n\n![Kubernetes-Dashboard-HomePage](/Node/imgs/03_02/Dashboard-Load.png)\n\n![Kubernetes-Dashboard-HomePage](/Node/imgs/03_02/Dashboard.png)\n\n\n\n#### 6.4.2.5 优点与缺点\n\n- 这种方法一旦配置完成，只要集群存在就可以持续访问，提供了长期稳定的访问途径；同时可以直接通过任意节点 IP 加上指定端口号来访问服务，易于访问。\n\n- 但是，它也带来了较高的安全风险，如果未正确配置防火墙规则，可能会导致服务被未经授权的人访问；\n\n- 此外，还需要选择一个未被占用的端口，因此有一定的端口限制。\n\n\n#### 6.4.2.6 参考资料\n\n- [kubernetes-dashboard-7.11.1/README.md](https://github.com/kubernetes/dashboard/blob/kubernetes-dashboard-7.11.1/README.md)\n- [访问仪表板](https://github.com/kubernetes/dashboard/tree/master/docs/user/accessing-dashboard)\n- [69.Kubernetes(k8s)手把手教程—部署Dashboard以图形化方式管理Kubernetes](https://www.bilibili.com/video/BV15UsSeDEZA/)\n- [Kubernetes(k8s) Web-UI界面(一)：部署和访问仪表板(Dashboard)](https://www.cnblogs.com/renshengdezheli/p/17513879.html)\n- [二进制安装Kubernetes（k8s）v1.32.0](https://www.oiox.cn/index.php/archives/428/)\n\n### 6.5 清理和后续步骤\n\n删除管理员ServiceAccount和ClusterRoleBinding。\n\n```bash\nroot@k8s-master01:~# kubectl -n kubernetes-dashboard delete serviceaccount admin-user\nroot@k8s-master01:~# kubectl -n kubernetes-dashboard delete clusterrolebinding admin-user\n```\n\n了解有关如何在 Kubernetes 中授予/拒绝权限的更多信息，阅读官方[身份验证](https://kubernetes.io/docs/reference/access-authn-authz/authentication/)和[授权](https://kubernetes.io/docs/reference/access-authn-authz/authorization/)文档。\n\n\n\n\n\n\n# 七、 实际部署过程中遇到的问题\n\n\n### 7.1.1操作系统重启后无法使用原账户登录\n\n\n### 7.1.2 kubeadm初始化失败，抛出错误\n\n\n### 7.1.3 安装如遇到错误，需要修改配置，关闭kubelet \n\n```bash\n~# sudo rm -rf /etc/kubernetes/manifests/kube-apiserver.yaml\n~# sudo rm -rf /etc/kubernetes/manifests/kube-controller-manager.yaml\n~# sudo rm -rf /etc/kubernetes/manifests/kube-scheduler.yaml\n~# sudo rm -rf /etc/kubernetes/manifests/etcd.yaml\n\n~# sudo rm -rf /etc/kubernetes/manifests/kube-apiserver.yaml && sudo rm -rf /etc/kubernetes/manifests/kube-controller-manager.yaml && sudo rm -rf /etc/kubernetes/manifests/kube-scheduler.yaml && sudo rm -rf /etc/kubernetes/manifests/etcd.yaml\n\nsudo netstat -tulnp | grep :10250\nsudo lsof -i :10250\n\nsudo kill 2832\nsudo kill -9 1234\n\n~# systemctl status kubelet\n~# systemctl stop kubelet\n```\n\n#### 7.1.3.2 重新初始化 Kubernetes 集群\n\n- 步骤 1：重置 kubeadm\\2：清理残留文件\n\n```bash\n~# sudo kubeadm reset -f && sudo rm -rf /etc/kubernetes /var/lib/etcd /var/lib/kubelet\n```\n\n\n-  https://blog.csdn.net/m0_51510236/article/details/136329885\n\n```bash\nroot@k8s-master01:~# sudo kubeadm init \\\n--apiserver-advertise-address=192.168.11.161 \\\n--apiserver-cert-extra-sans=k8s-master01 \\\n--image-repository=registry.aliyuncs.com/google_containers \\\n--kubernetes-version=v1.32.3 \\\n--service-cidr=10.96.0.0/12 \\\n--pod-network-cidr=10.244.0.0/16 \\\n--cri-socket=unix:///run/containerd/containerd.sock \\\n--cgroup-driver=systemd \\\n--upload-certs \\\n--v=9\n```\n\n\n\n\n```bash\nMar 22 13:26:21 k8s-master01 kubelet[9760]: E0322 13:26:21.545465    9760 pod_workers.go:1301] \"Error syncing pod, skipping\" err=\"failed to \\\"CreatePodSandbox\\\" for \\\"kube-controller-manager-k8s-master01_kube-system(19dfb154dd163834eef61b7252703fed)\\\" with CreatePodSandboxError: \\\"Failed to create sandbox for pod \\\\\\\"kube-controller-manager-k8s-master01_kube-system(19dfb154dd163834eef61b7252703fed)\\\\\\\": rpc error: code = Unknown desc = failed to start sandbox \\\\\\\"623e76469b34076613d313938932728b1c6e63d0951c4c1a1a7563332c35b2e2\\\\\\\": failed to create containerd task: failed to create shim task: OCI runtime create failed: unable to retrieve OCI runtime error (open /run/containerd/io.containerd.runtime.v2.task/k8s.io/623e76469b34076613d313938932728b1c6e63d0951c4c1a1a7563332c35b2e2/log.json: no such file or directory): exec: \\\\\\\"runc\\\\\\\": executable file not found in $PATH\\\"\" pod=\"kube-system/kube-controller-manager-k8s-master01\" podUID=\"19dfb154dd163834eef61b7252703fed\"\nMar 22 13:26:23 k8s-master01 kubelet[9760]: E0322 13:26:23.120378    9760 controller.go:145] \"Failed to ensure lease exists, will retry\" err=\"Get \\\"https://192.168.11.161:6443/apis/coordination.k8s.io/v1/namespaces/kube-node-lease/leases/k8s-master01?timeout=10s\\\": dial tcp 192.168.11.161:6443: connect: connection refused\" interval=\"7s\"\nMar 22 13:26:23 k8s-master01 kubelet[9760]: I0322 13:26:23.327532    9760 kubelet_node_status.go:75] \"Attempting to register node\" node=\"k8s-master01\"\nMar 22 13:26:23 k8s-master01 kubelet[9760]: E0322 13:26:23.328029    9760 kubelet_node_status.go:107] \"Unable to register node with API server\" err=\"Post \\\"https://192.168.11.161:6443/api/v1/nodes\\\": dial tcp 192.168.11.161:6443: connect: connection refused\" node=\"k8s-master01\"\nMar 22 13:26:25 k8s-master01 kubelet[9760]: W0322 13:26:25.039914    9760 reflector.go:569] k8s.io/client-go/informers/factory.go:160: failed to list *v1.CSIDriver: Get \"https://192.168.11.161:6443/apis/storage.k8s.io/v1/csidrivers?limit=500&resourceVersion=0\": dial tcp 192.168.11.161:6443: connect: connection refused\nMar 22 13:26:25 k8s-master01 kubelet[9760]: E0322 13:26:25.040030    9760 reflector.go:166] \"Unhandled Error\" err=\"k8s.io/client-go/informers/factory.go:160: Failed to watch *v1.CSIDriver: failed to list *v1.CSIDriver: Get \\\"https://192.168.11.161:6443/apis/storage.k8s.io/v1/csidrivers?limit=500&resourceVersion=0\\\": dial tcp 192.168.11.161:6443: connect: connection refused\" logger=\"UnhandledError\"\nMar 22 13:26:26 k8s-master01 kubelet[9760]: W0322 13:26:26.039053    9760 reflector.go:569] k8s.io/client-go/informers/factory.go:160: failed to list *v1.Service: Get \"https://192.168.11.161:6443/api/v1/services?fieldSelector=spec.clusterIP%21%3DNone&limit=500&resourceVersion=0\": dial tcp 192.168.11.161:6443: connect: connection refused\nMar 22 13:26:26 k8s-master01 kubelet[9760]: E0322 13:26:26.039171    9760 reflector.go:166] \"Unhandled Error\" err=\"k8s.io/client-go/informers/factory.go:160: Failed to watch *v1.Service: failed to list *v1.Service: Get \\\"https://192.168.11.161:6443/api/v1/services?fieldSelector=spec.clusterIP%21%3DNone&limit=500&resourceVersion=0\\\": dial tcp 192.168.11.161:6443: connect: connection refused\" logger=\"UnhandledError\"\nMar 22 13:26:26 k8s-master01 kubelet[9760]: E0322 13:26:26.450839    9760 kubelet.go:3190] \"No need to create a mirror pod, since failed to get node info from the cluster\" err=\"node \\\"k8s-master01\\\" not found\" node=\"k8s-master01\"\nMar 22 13:26:26 k8s-master01 kubelet[9760]: E0322 13:26:26.451717    9760 dns.go:153] \"Nameserver limits exceeded\" err=\"Nameserver limits were exceeded, some nameservers have been omitted, the applied nameserver line is: 119.29.29.29 114.114.114.114 8.8.8.8\"\nMar 22 13:26:26 k8s-master01 kubelet[9760]: E0322 13:26:26.547499    9760 log.go:32] \"RunPodSandbox from runtime service failed\" err=\"rpc error: code = Unknown desc = failed to start sandbox \\\"c54802a9d762ba695f68d28021ea9339eb8e9845d41161d6fa1f9bfb4d811c54\\\": failed to create containerd task: failed to create shim task: OCI runtime create failed: unable to retrieve OCI runtime error (open /run/containerd/io.containerd.runtime.v2.task/k8s.io/c54802a9d762ba695f68d28021ea9339eb8e9845d41161d6fa1f9bfb4d811c54/log.json: no such file or directory): exec: \\\"runc\\\": executable file not found in $PATH\"\nMar 22 13:26:26 k8s-master01 kubelet[9760]: E0322 13:26:26.547575    9760 kuberuntime_sandbox.go:72] \"Failed to create sandbox for pod\" err=\"rpc error: code = Unknown desc = failed to start sandbox \\\"c54802a9d762ba695f68d28021ea9339eb8e9845d41161d6fa1f9bfb4d811c54\\\": failed to create containerd task: failed to create shim task: OCI runtime create failed: unable to retrieve OCI runtime error (open /run/containerd/io.containerd.runtime.v2.task/k8s.io/c54802a9d762ba695f68d28021ea9339eb8e9845d41161d6fa1f9bfb4d811c54/log.json: no such file or directory): exec: \\\"runc\\\": executable file not found in $PATH\" pod=\"kube-system/kube-apiserver-k8s-master01\"\nMar 22 13:26:26 k8s-master01 kubelet[9760]: E0322 13:26:26.547611    9760 kuberuntime_manager.go:1237] \"CreatePodSandbox for pod failed\" err=\"rpc error: code = Unknown desc = failed to start sandbox \\\"c54802a9d762ba695f68d28021ea9339eb8e9845d41161d6fa1f9bfb4d811c54\\\": failed to create containerd task: failed to create shim task: OCI runtime create failed: unable to retrieve OCI runtime error (open /run/containerd/io.containerd.runtime.v2.task/k8s.io/c54802a9d762ba695f68d28021ea9339eb8e9845d41161d6fa1f9bfb4d811c54/log.json: no such file or directory): exec: \\\"runc\\\": executable file not found in $PATH\" pod=\"kube-system/kube-apiserver-k8s-master01\"\nMar 22 13:26:26 k8s-master01 kubelet[9760]: E0322 13:26:26.547680    9760 pod_workers.go:1301] \"Error syncing pod, skipping\" err=\"failed to \\\"CreatePodSandbox\\\" for \\\"kube-apiserver-k8s-master01_kube-system(843638c9eef6e3d63d22d53c9d990887)\\\" with CreatePodSandboxError: \\\"Failed to create sandbox for pod \\\\\\\"kube-apiserver-k8s-master01_kube-system(843638c9eef6e3d63d22d53c9d990887)\\\\\\\": rpc error: code = Unknown desc = failed to start sandbox \\\\\\\"c54802a9d762ba695f68d28021ea9339eb8e9845d41161d6fa1f9bfb4d811c54\\\\\\\": failed to create containerd task: failed to create shim task: OCI runtime create failed: unable to retrieve OCI runtime error (open /run/containerd/io.containerd.runtime.v2.task/k8s.io/c54802a9d762ba695f68d28021ea9339eb8e9845d41161d6fa1f9bfb4d811c54/log.json: no such file or directory): exec: \\\\\\\"runc\\\\\\\": executable file not found in $PATH\\\"\" pod=\"kube-system/kube-apiserver-k8s-master01\" podUID=\"843638c9eef6e3d63d22d53c9d990887\"\nMar 22 13:26:29 k8s-master01 kubelet[9760]: E0322 13:26:29.498553    9760 eviction_manager.go:292] \"Eviction manager: failed to get summary stats\" err=\"failed to get node info: node \\\"k8s-master01\\\" not found\"\nMar 22 13:26:30 k8s-master01 kubelet[9760]: E0322 13:26:30.122192    9760 controller.go:145] \"Failed to ensure lease exists, will retry\" err=\"Get \\\"https://192.168.11.161:6443/apis/coordination.k8s.io/v1/namespaces/kube-node-lease/leases/k8s-master01?timeout=10s\\\": dial tcp 192.168.11.161:6443: connect: connection refused\" interval=\"7s\"\nMar 22 13:26:30 k8s-master01 kubelet[9760]: I0322 13:26:30.329597    9760 kubelet_node_status.go:75] \"Attempting to register node\" node=\"k8s-master01\"\nMar 22 13:26:30 k8s-master01 kubelet[9760]: E0322 13:26:30.330070    9760 kubelet_node_status.go:107] \"Unable to register node with API server\" err=\"Post \\\"https://192.168.11.161:6443/api/v1/nodes\\\": dial tcp 192.168.11.161:6443: connect: connection refused\" node=\"k8s-master01\"\nMar 22 13:26:30 k8s-master01 kubelet[9760]: E0322 13:26:30.450085    9760 kubelet.go:3190] \"No need to create a mirror pod, since failed to get node info from the cluster\" err=\"node \\\"k8s-master01\\\" not found\" node=\"k8s-master01\"\nMar 22 13:26:30 k8s-master01 kubelet[9760]: E0322 13:26:30.450964    9760 dns.go:153] \"Nameserver limits exceeded\" err=\"Nameserver limits were exceeded, some nameservers have been omitted, the applied nameserver line is: 119.29.29.29 114.114.114.114 8.8.8.8\"\nMar 22 13:26:30 k8s-master01 kubelet[9760]: E0322 13:26:30.548988    9760 log.go:32] \"RunPodSandbox from runtime service failed\" err=\"rpc error: code = Unknown desc = failed to start sandbox \\\"f8b4188ebe49ae964cfbbb1837c3899194dede9e323889d10636e4002993581b\\\": failed to create containerd task: failed to create shim task: OCI runtime create failed: unable to retrieve OCI runtime error (open /run/containerd/io.containerd.runtime.v2.task/k8s.io/f8b4188ebe49ae964cfbbb1837c3899194dede9e323889d10636e4002993581b/log.json: no such file or directory): exec: \\\"runc\\\": executable file not found in $PATH\"\nMar 22 13:26:30 k8s-master01 kubelet[9760]: E0322 13:26:30.549096    9760 kuberuntime_sandbox.go:72] \"Failed to create sandbox for pod\" err=\"rpc error: code = Unknown desc = failed to start sandbox \\\"f8b4188ebe49ae964cfbbb1837c3899194dede9e323889d10636e4002993581b\\\": failed to create containerd task: failed to create shim task: OCI runtime create failed: unable to retrieve OCI runtime error (open /run/containerd/io.containerd.runtime.v2.task/k8s.io/f8b4188ebe49ae964cfbbb1837c3899194dede9e323889d10636e4002993581b/log.json: no such file or directory): exec: \\\"runc\\\": executable file not found in $PATH\" pod=\"kube-system/kube-scheduler-k8s-master01\"\nMar 22 13:26:30 k8s-master01 kubelet[9760]: E0322 13:26:30.549145    9760 kuberuntime_manager.go:1237] \"CreatePodSandbox for pod failed\" err=\"rpc error: code = Unknown desc = failed to start sandbox \\\"f8b4188ebe49ae964cfbbb1837c3899194dede9e323889d10636e4002993581b\\\": failed to create containerd task: failed to create shim task: OCI runtime create failed: unable to retrieve OCI runtime error (open /run/containerd/io.containerd.runtime.v2.task/k8s.io/f8b4188ebe49ae964cfbbb1837c3899194dede9e323889d10636e4002993581b/log.json: no such file or directory): exec: \\\"runc\\\": executable file not found in $PATH\" pod=\"kube-system/kube-scheduler-k8s-master01\"\nMar 22 13:26:30 k8s-master01 kubelet[9760]: E0322 13:26:30.549256    9760 pod_workers.go:1301] \"Error syncing pod, skipping\" err=\"failed to \\\"CreatePodSandbox\\\" for \\\"kube-scheduler-k8s-master01_kube-system(c7ec3024ac27f675ae60ec998a90ce85)\\\" with CreatePodSandboxError: \\\"Failed to create sandbox for pod \\\\\\\"kube-scheduler-k8s-master01_kube-system(c7ec3024ac27f675ae60ec998a90ce85)\\\\\\\": rpc error: code = Unknown desc = failed to start sandbox \\\\\\\"f8b4188ebe49ae964cfbbb1837c3899194dede9e323889d10636e4002993581b\\\\\\\": failed to create containerd task: failed to create shim task: OCI runtime create failed: unable to retrieve OCI runtime error (open /run/containerd/io.containerd.runtime.v2.task/k8s.io/f8b4188ebe49ae964cfbbb1837c3899194dede9e323889d10636e4002993581b/log.json: no such file or directory): exec: \\\\\\\"runc\\\\\\\": executable file not found in $PATH\\\"\" pod=\"kube-system/kube-scheduler-k8s-master01\" podUID=\"c7ec3024ac27f675ae60ec998a90ce85\"\nMar 22 13:26:31 k8s-master01 kubelet[9760]: E0322 13:26:31.073491    9760 event.go:368] \"Unable to write event (may retry after sleeping)\" err=\"Post \\\"https://192.168.11.161:6443/api/v1/namespaces/default/events\\\": dial tcp 192.168.11.161:6443: connect: connection refused\" event=\"&Event{ObjectMeta:{k8s-master01.182f0852158da106  default    0 0001-01-01 00:00:00 +0000 UTC <nil> <nil> map[] map[] [] [] []},InvolvedObject:ObjectReference{Kind:Node,Namespace:,Name:k8s-master01,UID:k8s-master01,APIVersion:,ResourceVersion:,FieldPath:,},Reason:NodeHasSufficientPID,Message:Node k8s-master01 status is now: NodeHasSufficientPID,Source:EventSource{Component:kubelet,Host:k8s-master01,},FirstTimestamp:2025-03-22 13:18:49.45761511 +0800 CST m=+0.101712151,LastTimestamp:2025-03-22 13:18:49.45761511 +0800 CST m=+0.101712151,Count:1,Type:Normal,EventTime:0001-01-01 00:00:00 +0000 UTC,Series:nil,Action:,Related:nil,ReportingController:kubelet,ReportingInstance:k8s-master01,}\"\n\n```\n\n\n\n### 7.1.4 Kubernets集群中部署calico网络插件时kubectl get pods -n tigera-operator命令一直显示pod为ImagePullBackOff状态\n\n```bash\n~# kubectl describe pod tigera-operator-ccfc44587-vswlt -n tigera-operator\n```\n\n```bash\n~# kubectl get pods -n tigera-operator -o wide\n```\n\n查到“Failed to pull image \"quay.io/tigera/operator:v1.36.5\": failed to pull and unpack image \"quay.io/tigera/operator:v1.36.5\": failed to copy: read tcp 192.168.11.166:53828->23.60.96.137:443: read: connection reset by peer\n”\n需要手动拉取镜像或者增加镜像源（参考https://blog.csdn.net/nxg810251/article/details/145170594中的config.toml文件的Line206~Line219中的配置） \n\n\n```bash\n~# sudo systemctl daemon-reload && sudo systemctl restart containerd && sudo systemctl restart kubelet\n```\n\n```bash\n~# systemctl daemon-reload && systemctl restart containerd\n```\n\n\n#### 7.1.4.3 参考：\n\n- [K8s的Pod出现Init:ImagePullBackOff问题的解决(以calico为例)](https://blog.csdn.net/weixin_40444270/article/details/132543441)\n- [Kubernetes1.32版本搭建【超详细】](https://blog.csdn.net/nxg810251/article/details/145170594)\n- [Kubernetes1.32版本搭建【极简版】](https://blog.csdn.net/weixin_42434261/article/details/144539712)\n\n\n\n# 八、 总结\n\n## 8.1 可以继续优化的流程\n\n### 8.1.1 虚拟机镜像准备\n\n### 8.1.2 containerd版本选择\n\n### 8.1.3 镜像源加速\n\n### 8.1.4 网络配置\n\n\n\n","slug":"Kubernetes集群部署实战(V1.23.3)","published":1,"updated":"2025-03-26T06:43:52.999Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cm8pr0j2d0011gskz8szvhkmo","content":"<h1 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h1><p><img src=\"https://kubernetes.io/images/docs/components-of-kubernetes.svg\" alt=\"components-of-kubernetes\"></p>\n<p><a href=\"https://kubernetes.io/zh-cn/docs/concepts/overview/components/\">Kubernetes集群</a>部署实战，基于Kubernetes v1.32.3、Ubuntu 24.04.2 LTS、Containerd v1.7.27版本搭建。</p>\n<h2 id=\"1-1-前置准备\"><a href=\"#1-1-前置准备\" class=\"headerlink\" title=\"1.1 前置准备\"></a>1.1 前置准备</h2><h3 id=\"1-1-1-前置依赖软件及物料准备\"><a href=\"#1-1-1-前置依赖软件及物料准备\" class=\"headerlink\" title=\"1.1.1 前置依赖软件及物料准备\"></a>1.1.1 前置依赖软件及物料准备</h3><ul>\n<li>服务器系统：PVE 8.1 </li>\n<li>虚拟机操作系统 Ubuntu 24.04.2 LTS ISO</li>\n<li>Kubernetes v1.32.3 （kubeadm、kubelet、kubectl、kube-apiserver、kube-controller-manager、kube-scheduler、kube-proxy）</li>\n<li>Cri-Containerd v1.7.27    <a href=\"https://github.com/containerd/containerd/releases\">releases</a>       crictl</li>\n<li>CoreDNS v1.11.3</li>\n<li>Pause v3.10</li>\n<li>Etcd v3.5.16-0</li>\n<li>Calico v3.29.2</li>\n<li>Nginx镜像</li>\n<li>Helm v3.17.2</li>\n<li>Kubernetes Dashboard v7.11.1</li>\n</ul>\n<h3 id=\"1-1-2-K8S集群网络IP规划\"><a href=\"#1-1-2-K8S集群网络IP规划\" class=\"headerlink\" title=\"1.1.2 K8S集群网络IP规划\"></a>1.1.2 K8S集群网络IP规划</h3><table>\n<thead>\n<tr>\n<th align=\"center\">节点名称</th>\n<th align=\"center\">规划IP</th>\n<th align=\"center\">当前验证实际使用IP</th>\n<th align=\"center\">备注</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">K8S-Master01</td>\n<td align=\"center\">10.200.10.11</td>\n<td align=\"center\">192.168.11.161</td>\n<td align=\"center\">…</td>\n</tr>\n<tr>\n<td align=\"center\">K8S-Master02</td>\n<td align=\"center\">10.200.10.12</td>\n<td align=\"center\"></td>\n<td align=\"center\">…</td>\n</tr>\n<tr>\n<td align=\"center\">K8S-Master03</td>\n<td align=\"center\">10.200.10.13</td>\n<td align=\"center\"></td>\n<td align=\"center\">…</td>\n</tr>\n<tr>\n<td align=\"center\">k8S-Worker01</td>\n<td align=\"center\">10.200.10.21</td>\n<td align=\"center\">192.168.11.165</td>\n<td align=\"center\">…</td>\n</tr>\n<tr>\n<td align=\"center\">K8S-Worker02</td>\n<td align=\"center\">10.200.10.22</td>\n<td align=\"center\">192.168.11.166</td>\n<td align=\"center\">…</td>\n</tr>\n<tr>\n<td align=\"center\">K8S-Worker03</td>\n<td align=\"center\">10.200.10.23</td>\n<td align=\"center\"></td>\n<td align=\"center\">…</td>\n</tr>\n<tr>\n<td align=\"center\">K8S-Worker04</td>\n<td align=\"center\">10.200.10.24</td>\n<td align=\"center\"></td>\n<td align=\"center\">…</td>\n</tr>\n<tr>\n<td align=\"center\">K8S-Worker05</td>\n<td align=\"center\">10.200.10.25</td>\n<td align=\"center\"></td>\n<td align=\"center\">…</td>\n</tr>\n</tbody></table>\n<h3 id=\"1-1-3-主机硬件配置说明\"><a href=\"#1-1-3-主机硬件配置说明\" class=\"headerlink\" title=\"1.1.3 主机硬件配置说明\"></a>1.1.3 主机硬件配置说明</h3><table>\n<thead>\n<tr>\n<th align=\"center\">节点名称</th>\n<th>角色</th>\n<th align=\"center\">CPU</th>\n<th align=\"center\">内存</th>\n<th align=\"center\">硬盘</th>\n<th align=\"center\">备注</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">K8S-Master01</td>\n<td>master</td>\n<td align=\"center\">4C</td>\n<td align=\"center\">8G</td>\n<td align=\"center\">200GB</td>\n<td align=\"center\">最低4C8G</td>\n</tr>\n<tr>\n<td align=\"center\">k8S-Worker01</td>\n<td>worker</td>\n<td align=\"center\">8C</td>\n<td align=\"center\">16G</td>\n<td align=\"center\">200GB</td>\n<td align=\"center\">最低8C16G</td>\n</tr>\n<tr>\n<td align=\"center\">K8S-Worker02</td>\n<td>worker</td>\n<td align=\"center\">8C</td>\n<td align=\"center\">16G</td>\n<td align=\"center\">200GB</td>\n<td align=\"center\">最低8C16G</td>\n</tr>\n</tbody></table>\n<h2 id=\"1-2-主机系统基础环境准备\"><a href=\"#1-2-主机系统基础环境准备\" class=\"headerlink\" title=\"1.2 主机系统基础环境准备\"></a>1.2 主机系统基础环境准备</h2><h3 id=\"1-2-1-正式安装前，系统需要检查及准备以下操作\"><a href=\"#1-2-1-正式安装前，系统需要检查及准备以下操作\" class=\"headerlink\" title=\"1.2.1 正式安装前，系统需要检查及准备以下操作\"></a>1.2.1 正式安装前，系统需要检查及准备以下操作</h3><ul>\n<li>更新基础软件版本  </li>\n<li>安装 net-tools、iputils-ping 工具，查看IP配置、网络状况</li>\n<li>安装必要的编辑器</li>\n<li>启用SSH连接 OpenSSH  开启SSH服务</li>\n<li>支持cron定时任务</li>\n<li>远程时间同步服务支持 </li>\n<li>初始化系统 systemd 支持程序开机自启动</li>\n<li>网络下载工具：wget、curl</li>\n<li>签名校验工具gpg</li>\n</ul>\n<p>安装必要的软件及工具</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># sudo apt-get update</span><br>~<span class=\"hljs-comment\"># sudo apt install net-tools iputils-ping systemd nano openssh-server cron ntpdate ipset ipvsadm debianutils tar which apt-transport-https ca-certificates curl wget gpg -y</span><br>~<span class=\"hljs-comment\"># sudo apt-get upgrade -y</span><br></code></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"1-2-2-开启SSH远程登录服务\"><a href=\"#1-2-2-开启SSH远程登录服务\" class=\"headerlink\" title=\"1.2.2 开启SSH远程登录服务\"></a>1.2.2 开启SSH远程登录服务</h3><p>确认你的系统使用的是哪种初始化系统：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># ps -p 1 -o comm=</span><br></code></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~$ sudo systemctl <span class=\"hljs-built_in\">enable</span> ssh<br><br>~$ sudo systemctl start ssh<br><br>~$ sudo system status ssh      <span class=\"hljs-comment\"># 查看ssh状态 </span><br></code></pre></td></tr></table></figure>\n\n\n<h2 id=\"1-3-集群主机配置\"><a href=\"#1-3-集群主机配置\" class=\"headerlink\" title=\"1.3 集群主机配置\"></a>1.3 集群主机配置</h2><h3 id=\"1-3-1-主机名配置\"><a href=\"#1-3-1-主机名配置\" class=\"headerlink\" title=\"1.3.1 主机名配置\"></a>1.3.1 主机名配置</h3><p>由于本次使用3台主机完成kubernetes集群部署，其中1台为master节点,名称为k8s-master01;其中2台为worker节点，名称分别为：k8s-worker01及k8s-worker02</p>\n<p>master01节点</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># hostnamectl set-hostname k8s-master01</span><br></code></pre></td></tr></table></figure>\n\n<p>worker01节点</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># hostnamectl set-hostname k8s-worker01</span><br></code></pre></td></tr></table></figure>\n\n\n<p>worker02节点</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># hostnamectl set-hostname k8s-worker02</span><br></code></pre></td></tr></table></figure>\n\n\n<h3 id=\"1-3-2-主机IP地址配置\"><a href=\"#1-3-2-主机IP地址配置\" class=\"headerlink\" title=\"1.3.2 主机IP地址配置\"></a>1.3.2 主机IP地址配置</h3><p>k8s-master01节点IP地址为：192.168.11.161/24</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># nano /etc/netplan/50-cloud-init.yaml</span><br>root@k8s-master01:~<span class=\"hljs-comment\"># cat /etc/netplan/50-cloud-init.yaml</span><br></code></pre></td></tr></table></figure>\n\n<p>50-cloud-init.yaml文件中添加或修改IP地址（注意网卡名称需要与系统中的以太网卡一致）</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs yaml\"><span class=\"hljs-attr\">network:</span><br>  <span class=\"hljs-attr\">version:</span> <span class=\"hljs-number\">2</span><br>  <span class=\"hljs-attr\">renderer:</span> <span class=\"hljs-string\">networkd</span><br>  <span class=\"hljs-attr\">ethernets:</span><br>    <span class=\"hljs-attr\">ens18:</span><br>      <span class=\"hljs-attr\">dhcp4:</span> <span class=\"hljs-literal\">no</span><br>      <span class=\"hljs-attr\">addresses:</span><br>        <span class=\"hljs-bullet\">-</span> <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.11</span><span class=\"hljs-number\">.161</span><span class=\"hljs-string\">/24</span><br>      <span class=\"hljs-attr\">routes:</span><br>        <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">to:</span> <span class=\"hljs-string\">default</span><br>          <span class=\"hljs-attr\">via:</span> <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.11</span><span class=\"hljs-number\">.1</span><br>      <span class=\"hljs-attr\">nameservers:</span><br>        <span class=\"hljs-attr\">addresses:</span> [<span class=\"hljs-number\">119.29</span><span class=\"hljs-number\">.29</span><span class=\"hljs-number\">.29</span>,<span class=\"hljs-number\">114.114</span><span class=\"hljs-number\">.114</span><span class=\"hljs-number\">.114</span>,<span class=\"hljs-number\">8.8</span><span class=\"hljs-number\">.8</span><span class=\"hljs-number\">.8</span>]<br></code></pre></td></tr></table></figure>\n\n<p>保存k8s-master01的网卡配置</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># sudo netplan apply</span><br></code></pre></td></tr></table></figure>\n\n<p>重新按新ip连接主机，然后使用以下命名查看ip地址信息</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">ip a s<br></code></pre></td></tr></table></figure>\n\n<p>k8s-worker01节点IP地址为：192.168.11.165/24</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-worker01:~<span class=\"hljs-comment\"># nano /etc/netplan/50-cloud-init.yaml</span><br>root@k8s-worker01:~<span class=\"hljs-comment\"># cat /etc/netplan/50-cloud-init.yaml</span><br></code></pre></td></tr></table></figure>\n\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs yaml\"><span class=\"hljs-attr\">network:</span><br>  <span class=\"hljs-attr\">version:</span> <span class=\"hljs-number\">2</span><br>  <span class=\"hljs-attr\">renderer:</span> <span class=\"hljs-string\">networkd</span><br>  <span class=\"hljs-attr\">ethernets:</span><br>    <span class=\"hljs-attr\">enp6s18:</span><br>      <span class=\"hljs-attr\">dhcp4:</span> <span class=\"hljs-literal\">no</span><br>      <span class=\"hljs-attr\">addresses:</span><br>        <span class=\"hljs-bullet\">-</span> <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.11</span><span class=\"hljs-number\">.165</span><span class=\"hljs-string\">/24</span><br>      <span class=\"hljs-attr\">routes:</span><br>        <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">to:</span> <span class=\"hljs-string\">default</span><br>          <span class=\"hljs-attr\">via:</span> <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.11</span><span class=\"hljs-number\">.1</span><br>      <span class=\"hljs-attr\">nameservers:</span><br>        <span class=\"hljs-attr\">addresses:</span> [<span class=\"hljs-number\">119.29</span><span class=\"hljs-number\">.29</span><span class=\"hljs-number\">.29</span>,<span class=\"hljs-number\">114.114</span><span class=\"hljs-number\">.114</span><span class=\"hljs-number\">.114</span>,<span class=\"hljs-number\">8.8</span><span class=\"hljs-number\">.8</span><span class=\"hljs-number\">.8</span>]<br></code></pre></td></tr></table></figure>\n\n<p>保存k8s-worker01的网卡配置</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-worker01:~<span class=\"hljs-comment\"># sudo netplan apply</span><br></code></pre></td></tr></table></figure>\n\n\n<p>k8s-worker02节点IP地址为：192.168.11.166/24</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-worker02:~<span class=\"hljs-comment\"># nano /etc/netplan/50-cloud-init.yaml</span><br>root@k8s-worker02:~<span class=\"hljs-comment\"># cat /etc/netplan/50-cloud-init.yaml</span><br></code></pre></td></tr></table></figure>\n\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs yaml\"><span class=\"hljs-attr\">network:</span><br>  <span class=\"hljs-attr\">version:</span> <span class=\"hljs-number\">2</span><br>  <span class=\"hljs-attr\">renderer:</span> <span class=\"hljs-string\">networkd</span><br>  <span class=\"hljs-attr\">ethernets:</span><br>    <span class=\"hljs-attr\">enp6s18:</span><br>      <span class=\"hljs-attr\">dhcp4:</span> <span class=\"hljs-literal\">no</span><br>      <span class=\"hljs-attr\">addresses:</span><br>        <span class=\"hljs-bullet\">-</span> <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.11</span><span class=\"hljs-number\">.166</span><span class=\"hljs-string\">/24</span><br>      <span class=\"hljs-attr\">routes:</span><br>        <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">to:</span> <span class=\"hljs-string\">default</span><br>          <span class=\"hljs-attr\">via:</span> <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.11</span><span class=\"hljs-number\">.1</span><br>      <span class=\"hljs-attr\">nameservers:</span><br>        <span class=\"hljs-attr\">addresses:</span> [<span class=\"hljs-number\">119.29</span><span class=\"hljs-number\">.29</span><span class=\"hljs-number\">.29</span>,<span class=\"hljs-number\">114.114</span><span class=\"hljs-number\">.114</span><span class=\"hljs-number\">.114</span>,<span class=\"hljs-number\">8.8</span><span class=\"hljs-number\">.8</span><span class=\"hljs-number\">.8</span>]<br></code></pre></td></tr></table></figure>\n\n<p>保存k8s-worker02的网卡配置</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-worker02:~<span class=\"hljs-comment\"># sudo netplan apply</span><br></code></pre></td></tr></table></figure>\n\n\n\n\n<h3 id=\"1-3-3-主机名与IP地址解析\"><a href=\"#1-3-3-主机名与IP地址解析\" class=\"headerlink\" title=\"1.3.3 主机名与IP地址解析\"></a>1.3.3 主机名与IP地址解析</h3><p>所有集群主机均需要进行配置。</p>\n<p>在没有DNS服务器的环境中需要先能解析到各个节点的IP地址</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># sudo nano /etc/hosts</span><br></code></pre></td></tr></table></figure>\n\n<ul>\n<li>在文件后面追加以下内容</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">192.168.11.161 k8s-master01<br>192.168.11.165 k8s-worker01<br>192.168.11.166 k8s-worker02<br></code></pre></td></tr></table></figure>\n\n\n<p>修改后Ctrl+O,然后Enter键，再Ctrl+X保存文件修改并退出</p>\n<p>查看IP解析配置是否生效命令</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~$ ping -c 4 k8s-master01<br>~$ ping -c 4 k8s-worker01<br>~$ ping -c 4 k8s-worker02<br></code></pre></td></tr></table></figure>\n\n<h3 id=\"1-3-4-时间同步配置\"><a href=\"#1-3-4-时间同步配置\" class=\"headerlink\" title=\"1.3.4 时间同步配置\"></a>1.3.4 时间同步配置</h3><p>查看时间</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># date</span><br> Thu Sep  7 05:39:21 AM UTC 2024<br></code></pre></td></tr></table></figure>\n\n<p>更换时区</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># timedatectl set-timezone Asia/Shanghai</span><br></code></pre></td></tr></table></figure>\n<p>再次查看时间</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># date</span><br> Thu Sep  7 01:39:51 PM CST 2024<br></code></pre></td></tr></table></figure>\n\n<p>安装ntpdate命令</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># apt install ntpdate -y</span><br></code></pre></td></tr></table></figure>\n\n<p>使用ntpdate命令同步时间</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># ntpdate time1.aliyun.com</span><br></code></pre></td></tr></table></figure>\n\n\n<p>通过计划任务实现时间同步</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># apt install cron -y</span><br>~<span class=\"hljs-comment\"># crontab -e</span><br> no crontab <span class=\"hljs-keyword\">for</span> root - using an empty one<br> Select an editor.  To change later, run <span class=\"hljs-string\">&#x27;select-editor&#x27;</span>.<br>  1. /bin/nano        &lt;---- easiest<br>  2. /usr/bin/vim.basic<br>  3. /usr/bin/vim.tiny<br>  4. /bin/ed<br> Choose 1-4 [1]: 2<br> ......<br>0 */1 * * * ntpdate time1.aliyun.com           // 写入配置文件<br>~<span class=\"hljs-comment\"># crontab -l   // 查看crontab配置</span><br> ......<br>0 */1 * * * ntpdate time1.aliyun.com        <br></code></pre></td></tr></table></figure>\n\n\n<h3 id=\"1-3-5-配置内核转发及网桥过滤\"><a href=\"#1-3-5-配置内核转发及网桥过滤\" class=\"headerlink\" title=\"1.3.5 配置内核转发及网桥过滤\"></a>1.3.5 配置内核转发及网桥过滤</h3><p>所有主机均需要操作。</p>\n<p>Way1：手动执行，手动加载内核转发及网桥过滤模块</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># modprobe overlay</span><br>~<span class=\"hljs-comment\"># modprobe br_netfilter</span><br></code></pre></td></tr></table></figure>\n\n\n<p>Way2：创建加载内核模块文件</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># sudo cat &lt;&lt; EOF | tee /etc/modules-load.d/k8s.conf</span><br>overlay<br>br_netfilter<br>EOF<br></code></pre></td></tr></table></figure>\n\n<ul>\n<li>查看已加载的模块</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># lsmod | egrep &quot;overlay&quot;</span><br>overlay               151552  0<br></code></pre></td></tr></table></figure>\n\n\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># lsmod | egrep &quot;br_netfilter&quot;</span><br>br_netfilter    32768   0       <br>bridge           307200  1 br_netfilter<br></code></pre></td></tr></table></figure>\n\n\n<ul>\n<li>添加网桥过滤及内核转发配置文件</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># cat &lt;&lt; EOF| tee /etc/sysctl.d/k8s.conf</span><br>net.bridge.bridge-nf-call-ip6tables = 1<br>net.bridge.bridge-nf-call-iptables = 1<br>net.ipv4.ip_forward = 1<br>EOF<br></code></pre></td></tr></table></figure>\n\n<p>查看配置文件</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># nano /etc/modules-load.d/k8s.conf</span><br>~<span class=\"hljs-comment\"># cat /etc/modules-load.d/k8s.conf</span><br></code></pre></td></tr></table></figure>\n\n<p>加载内核参数,使之生效</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># sysctl --system</span><br></code></pre></td></tr></table></figure>\n\n<p>检查输出的结果中是否包含以下三项：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs plain\">net.bridge.bridge-nf-call-ip6tables &#x3D; 1<br>net.bridge.bridge-nf-call-iptables &#x3D; 1<br>net.ipv4.ip_forward &#x3D; 1<br></code></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"1-3-6-安装ipset及ipvsadm\"><a href=\"#1-3-6-安装ipset及ipvsadm\" class=\"headerlink\" title=\"1.3.6 安装ipset及ipvsadm\"></a>1.3.6 安装ipset及ipvsadm</h3><p>所有主机均需要操作。</p>\n<p>安装ipset及ipvsadm命令</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># apt install ipset ipvsadm -y</span><br></code></pre></td></tr></table></figure>\n\n<p>配置ipvsadm模块加载</p>\n<p>添加系统启动需要加载的模块文件</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># cat &lt;&lt; EOF | tee /etc/modules-load.d/ipvs.conf</span><br>ip_vs<br>ip_vs_rr<br>ip_vs_wrr<br>ip_vs_sh<br>nf_conntrack<br>EOF<br></code></pre></td></tr></table></figure>\n\n<p>创建加载模块脚本文件</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># cat &lt;&lt; EOF | tee ipvs.sh</span><br><span class=\"hljs-meta\">#!/bin/sh</span><br>modprobe -- ip_vs<br>modprobe -- ip_vs_rr<br>modprobe -- ip_vs_wrr<br>modprobe -- ip_vs_sh<br>modprobe -- nf_conntrack<br>EOF<br></code></pre></td></tr></table></figure>\n\n<p>上述命令执行完成后，当前目录下会生成一个ipvs.sh脚本文件，接下来使用bash命令执行它</p>\n<p>执行ipvs.sh脚本文件，以加载模块</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># sh ipvs.sh</span><br></code></pre></td></tr></table></figure>\n\n<p>查看ipvs配置是否已生效</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># lsmod | grep ip_vs</span><br>ip_vs_sh               12288  0<br>ip_vs_wrr              12288  0<br>ip_vs_rr               12288  0<br>ip_vs                 221184  6 ip_vs_rr,ip_vs_sh,ip_vs_wrr<br>nf_conntrack          196608  1 ip_vs<br>nf_defrag_ipv6         24576  2 nf_conntrack,ip_vs<br>libcrc32c              12288  4 nf_conntrack,btrfs,raid456,ip_vs<br></code></pre></td></tr></table></figure>\n\n<h3 id=\"1-3-7-关闭SWAP分区\"><a href=\"#1-3-7-关闭SWAP分区\" class=\"headerlink\" title=\"1.3.7 关闭SWAP分区\"></a>1.3.7 关闭SWAP分区</h3><p>修改完成后需要重启操作系统，</p>\n<p>Way1：临时关闭（不推荐），若不重启，命令为</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># swapoff -a</span><br></code></pre></td></tr></table></figure>\n\n<p>Way2：永久关闭swap分区（推荐，操作需要重启操作系统）</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># nano /etc/fstab    // 进入分区配置文件</span><br> ......<br><br> <span class=\"hljs-comment\">#/swap.img   none    swap   sw      0       0    // 在此行首添加“#”以注释swap分区的配置</span><br></code></pre></td></tr></table></figure>\n\n<p>修改完成后保存文件并退出</p>\n<h1 id=\"二、K8S集群容器运行时-Containerd-准备\"><a href=\"#二、K8S集群容器运行时-Containerd-准备\" class=\"headerlink\" title=\"二、K8S集群容器运行时 Containerd 准备\"></a>二、K8S集群容器运行时 Containerd 准备</h1><ul>\n<li><p>安装docker-ce方法：<a href=\"https://docs.docker.com/engine/install/ubuntu/\">https://docs.docker.com/engine/install/ubuntu/</a></p>\n</li>\n<li><p>本文实际采用containerd作为集群容器镜像的运行平台</p>\n</li>\n</ul>\n<h2 id=\"2-1-Containerd部署文件获取\"><a href=\"#2-1-Containerd部署文件获取\" class=\"headerlink\" title=\"2.1 Containerd部署文件获取\"></a>2.1 Containerd部署文件获取</h2><p>wget下载1.7.27版本containerd</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># wget https://github.com/containerd/containerd/releases/download/v1.7.27/cri-containerd-1.7.27-linux-amd64.tar.gz</span><br></code></pre></td></tr></table></figure>\n\n<p>解压安装</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># sudo apt install debianutils</span><br>~<span class=\"hljs-comment\"># sudo apt install --reinstall libc6</span><br>~<span class=\"hljs-comment\"># sudo apt install --reinstall which</span><br><br><br>~<span class=\"hljs-comment\"># sudo tar xf /home/acanx/cri-containerd-1.7.27-linux-amd64.tar.gz  -C /</span><br><br>~<span class=\"hljs-comment\"># which containerd</span><br><br>/usr/<span class=\"hljs-built_in\">local</span>/bin/containerd<br>~<span class=\"hljs-comment\"># which runc</span><br><br>/usr/<span class=\"hljs-built_in\">local</span>/sbin/runc<br></code></pre></td></tr></table></figure>\n\n<p>验证containerd、runc是否安装成功</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># which containerd</span><br>~<span class=\"hljs-comment\"># which runc</span><br>~<span class=\"hljs-comment\"># whereis containerd</span><br></code></pre></td></tr></table></figure>\n\n<h2 id=\"2-2-Containerd配置文件生成并修改\"><a href=\"#2-2-Containerd配置文件生成并修改\" class=\"headerlink\" title=\"2.2 Containerd配置文件生成并修改\"></a>2.2 Containerd配置文件生成并修改</h2><p>创建containerd配置文件目录/etc/containerd</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># mkdir /etc/containerd</span><br>~<span class=\"hljs-comment\"># sudo chmod -R 777 /etc/containerd/       // 然后可以上传配置文件</span><br></code></pre></td></tr></table></figure>\n\n<p>生成配置文件config.toml及默认配置</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># containerd config default &gt; /etc/containerd/config.toml</span><br></code></pre></td></tr></table></figure>\n\n<p>修改配置文件的第67行</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># nano /etc/containerd/config.toml</span><br></code></pre></td></tr></table></figure>\n\n<figure class=\"highlight txt\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs txt\">sandbox_image = &quot;registry.k8s.io/pause:3.10&quot;  // 由3.9修改为3.10<br></code></pre></td></tr></table></figure>\n\n<ul>\n<li>如果使用阿里云容器镜像仓库，也可以修改为：</li>\n</ul>\n<figure class=\"highlight txt\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs txt\">sandbox_image = &quot;registry.aliyuncs.com/google_containers/pause:3.9&quot;  // 由3.9修改为3.10<br></code></pre></td></tr></table></figure>\n\n<p>修改配置文件的第139行</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># vim /etc/containerd/config.toml</span><br> SystemdCgroup = <span class=\"hljs-literal\">true</span> 由<span class=\"hljs-literal\">false</span>修改为<span class=\"hljs-literal\">true</span><br></code></pre></td></tr></table></figure>\n\n\n<h2 id=\"2-3-Containerd启动及开机自启动\"><a href=\"#2-3-Containerd启动及开机自启动\" class=\"headerlink\" title=\"2.3 Containerd启动及开机自启动\"></a>2.3 Containerd启动及开机自启动</h2><p>设置containerd开机自启并立即启动</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># sudo tee /etc/systemd/system/containerd.service &lt;&lt;EOF</span><br>[Unit]<br>Description=containerd container runtime<br>Documentation=https://containerd.io<br>After=network.target local-fs.target<br> <br>[Service]<br>ExecStartPre=-/sbin/modprobe overlay<br>ExecStart=/usr/<span class=\"hljs-built_in\">local</span>/bin/containerd<br> <br>Type=notify<br>Delegate=yes<br>KillMode=process<br>Restart=always<br>RestartSec=5<br> <br><span class=\"hljs-comment\"># 限制日志大小</span><br>LimitNOFILE=infinity<br> <br>[Install]<br>WantedBy=multi-user.target<br>EOF<br></code></pre></td></tr></table></figure>\n\n\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># ls /etc/systemd/system/containerd.service</span><br>~<span class=\"hljs-comment\"># systemctl enable --now containerd</span><br></code></pre></td></tr></table></figure>\n\n<p>验证containerd版本</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># containerd --version</span><br></code></pre></td></tr></table></figure>\n\n\n\n<h1 id=\"三、K8S集群部署\"><a href=\"#三、K8S集群部署\" class=\"headerlink\" title=\"三、K8S集群部署\"></a>三、K8S集群部署</h1><h2 id=\"3-1-K8S集群软件apt源准备\"><a href=\"#3-1-K8S集群软件apt源准备\" class=\"headerlink\" title=\"3.1 K8S集群软件apt源准备\"></a>3.1 K8S集群软件apt源准备</h2><p>本次使用kubernetes社区软件源仓库或阿里云软件源仓库，建议网络不畅通的选择阿里云软件源仓库</p>\n<p>下载用于 Kubernetes 软件包仓库的公共签名密钥,所有仓库都使用相同的签名密钥，因此你可以忽略URL中的版本：</p>\n<ul>\n<li>K8S社区软件源仓库签名文件下载</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\"><br>~<span class=\"hljs-comment\"># curl -fsSL https://pkgs.k8s.io/core:/stable:/v1.32/deb/Release.key | sudo gpg --dearmor -o /etc/apt/keyrings/kubernetes-apt-keyring.gpg</span><br>~<span class=\"hljs-comment\"># ls /etc/apt/keyrings/kubernetes-apt-keyring.gpg</span><br></code></pre></td></tr></table></figure>\n\n<ul>\n<li>阿里云软件源仓库签名文件下载</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># curl -fsSL https://mirrors.aliyun.com/kubernetes-new/core/stable/v1.32/deb/Release.key | gpg --dearmor -o /etc/apt/keyrings/kubernetes-apt-keyring.gpg</span><br></code></pre></td></tr></table></figure>\n\n<h3 id=\"添加-Kubernetes-apt-仓库\"><a href=\"#添加-Kubernetes-apt-仓库\" class=\"headerlink\" title=\"添加 Kubernetes apt 仓库\"></a>添加 Kubernetes apt 仓库</h3><p>请注意，此仓库仅包含适用于 Kubernetes 1.32.3 的软件包； 对于其他 Kubernetes 次要版本，则需要更改 URL 中的 Kubernetes 次要版本以匹配你所需的次要版本 。</p>\n<p>此操作会覆盖 /etc/apt/sources.list.d/kubernetes.list 中现存的所有配置，如果有的情况下。</p>\n<h4 id=\"K8S社区\"><a href=\"#K8S社区\" class=\"headerlink\" title=\"K8S社区\"></a>K8S社区</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># echo &#x27;deb [signed-by=/etc/apt/keyrings/kubernetes-apt-keyring.gpg] https://pkgs.k8s.io/core:/stable:/v1.32/deb/ /&#x27; | sudo tee /etc/apt/sources.list.d/kubernetes.list</span><br></code></pre></td></tr></table></figure>\n\n<h4 id=\"阿里云\"><a href=\"#阿里云\" class=\"headerlink\" title=\"阿里云\"></a>阿里云</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># echo &quot;deb [signed-by=/etc/apt/keyrings/kubernetes-apt-keyring.gpg] https://mirrors.aliyun.com/kubernetes-new/core/stable/v1.32/deb/ /&quot; | tee /etc/apt/sources.list.d/kubernetes.list</span><br></code></pre></td></tr></table></figure>\n\n\n<p>更新 apt 包索引</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># sudo apt-get update</span><br></code></pre></td></tr></table></figure>\n\n\n\n\n<h2 id=\"3-2-K8S集群软件安装及kubelet配置\"><a href=\"#3-2-K8S集群软件安装及kubelet配置\" class=\"headerlink\" title=\"3.2 K8S集群软件安装及kubelet配置\"></a>3.2 K8S集群软件安装及kubelet配置</h2><p>所有节点均可安装</p>\n<h3 id=\"3-2-1-k8s集群软件安装\"><a href=\"#3-2-1-k8s集群软件安装\" class=\"headerlink\" title=\"3.2.1 k8s集群软件安装\"></a>3.2.1 k8s集群软件安装</h3><p>查看软件列表</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># apt-cache policy kubeadm</span><br><br>kubeadm:<br>  Installed: (none)<br>  Candidate: 1.32.3-1.1<br>  Version table:<br>     1.32.3-1.1 500<br>        500 https://mirrors.aliyun.com/kubernetes-new/core/stable/v1.32/deb  Packages<br>     1.32.2-1.1 500<br>        500 https://mirrors.aliyun.com/kubernetes-new/core/stable/v1.32/deb  Packages<br>     1.32.1-1.1 500<br>        500 https://mirrors.aliyun.com/kubernetes-new/core/stable/v1.32/deb  Packages<br>     1.32.0-1.1 500<br>        500 https://mirrors.aliyun.com/kubernetes-new/core/stable/v1.32/deb  Packages<br></code></pre></td></tr></table></figure>\n\n\n<p>查看软件列表及其依赖关系</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># apt-cache showpkg kubeadm</span><br><br>Package: kubeadm<br>Versions: <br>1.32.3-1.1 (/var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages)<br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br><br>1.32.2-1.1 (/var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages)<br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br><br>1.32.1-1.1 (/var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages)<br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br><br>1.32.0-1.1 (/var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages)<br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br><br><br>Reverse Depends: <br>  kubeadm:ppc64el,kubeadm<br>  kubeadm:s390x,kubeadm<br>  kubeadm:arm64,kubeadm<br>  kubeadm:ppc64el,kubeadm<br>  kubeadm:s390x,kubeadm<br>  kubeadm:arm64,kubeadm<br>  kubeadm:ppc64el,kubeadm<br>  kubeadm:s390x,kubeadm<br>  kubeadm:arm64,kubeadm<br>  kubeadm:ppc64el,kubeadm<br>  kubeadm:s390x,kubeadm<br>  kubeadm:arm64,kubeadm<br>Dependencies: <br>1.32.3-1.1 - cri-tools (2 1.30.0) kubeadm:ppc64el (32 (null)) kubeadm:arm64 (32 (null)) kubeadm:s390x (32 (null)) <br>1.32.2-1.1 - cri-tools (2 1.30.0) kubeadm:ppc64el (32 (null)) kubeadm:arm64 (32 (null)) kubeadm:s390x (32 (null)) <br>1.32.1-1.1 - cri-tools (2 1.30.0) kubeadm:ppc64el (32 (null)) kubeadm:arm64 (32 (null)) kubeadm:s390x (32 (null)) <br>1.32.0-1.1 - cri-tools (2 1.30.0) kubeadm:ppc64el (32 (null)) kubeadm:arm64 (32 (null)) kubeadm:s390x (32 (null)) <br>Provides: <br>1.32.3-1.1 - <br>1.32.2-1.1 - <br>1.32.1-1.1 - <br>1.32.0-1.1 - <br>Reverse Provides: <br></code></pre></td></tr></table></figure>\n\n<p>查看可用软件列表</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># apt-cache madison kubeadm</span><br><br>   kubeadm | 1.32.3-1.1 | https://mirrors.aliyun.com/kubernetes-new/core/stable/v1.32/deb  Packages<br>   kubeadm | 1.32.2-1.1 | https://mirrors.aliyun.com/kubernetes-new/core/stable/v1.32/deb  Packages<br>   kubeadm | 1.32.1-1.1 | https://mirrors.aliyun.com/kubernetes-new/core/stable/v1.32/deb  Packages<br>   kubeadm | 1.32.0-1.1 | https://mirrors.aliyun.com/kubernetes-new/core/stable/v1.32/deb  Packages<br></code></pre></td></tr></table></figure>\n\n<p>Way1：采用默认安装</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># sudo apt-get install kubelet kubeadm kubectl -y</span><br></code></pre></td></tr></table></figure>\n\n\n<p>Way2：安装指定版本(v1.32.3-1.1)</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># sudo apt-get install -y kubelet=1.32.3-1.1 kubeadm=1.32.3-1.1 kubectl=1.32.3-1.1</span><br></code></pre></td></tr></table></figure>\n\n<ul>\n<li>如有报错：</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">E: Could not get lock /var/lib/dpkg/lock-frontend. It is held by process 5005 <br>(unattended-upgr)<br> N: Be aware that removing the lock file is not a solution and may <span class=\"hljs-built_in\">break</span> your <br>system.<br> E: Unable to acquire the dpkg frontend lock (/var/lib/dpkg/lock-frontend), is <br>another process using it?<br></code></pre></td></tr></table></figure>\n<p>可稍等等</p>\n<p>锁定版本，防止后期自动更新</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># sudo apt-mark hold kubelet kubeadm kubectl</span><br></code></pre></td></tr></table></figure>\n\n\n<p>解锁版本，则可以执行更新</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># sudo apt-mark unhold kubelet kubeadm kubectl</span><br></code></pre></td></tr></table></figure>\n\n\n<h3 id=\"3-2-2-配置kubelet\"><a href=\"#3-2-2-配置kubelet\" class=\"headerlink\" title=\"3.2.2 配置kubelet\"></a>3.2.2 配置kubelet</h3><p>为了实现容器运行时使用的cgroupdriver与kubelet使用的cgroup的一致性，建议修改如下文件内容。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># nano /etc/default/kubelet</span><br> KUBELET_EXTRA_ARGS=<span class=\"hljs-string\">&quot;--cgroup-driver=systemd&quot;</span><br></code></pre></td></tr></table></figure>\n\n<ul>\n<li>设置kubelet为开机自启动，由于没有生成配置文件，集群初始化后自动启动</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># systemctl enable kubelet</span><br></code></pre></td></tr></table></figure>\n\n\n<h2 id=\"3-3-K8S集群初始化\"><a href=\"#3-3-K8S集群初始化\" class=\"headerlink\" title=\"3.3 K8S集群初始化\"></a>3.3 K8S集群初始化</h2><h3 id=\"3-3-1-查看版本\"><a href=\"#3-3-1-查看版本\" class=\"headerlink\" title=\"3.3.1 查看版本\"></a>3.3.1 查看版本</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># kubeadm version</span><br><br>kubeadm version: &amp;version.Info&#123;Major:<span class=\"hljs-string\">&quot;1&quot;</span>, Minor:<span class=\"hljs-string\">&quot;32&quot;</span>, GitVersion:<span class=\"hljs-string\">&quot;v1.32.3&quot;</span>, GitCommit:<span class=\"hljs-string\">&quot;32cc146f75aad04beaaa245a7157eb35063a9f99&quot;</span>, GitTreeState:<span class=\"hljs-string\">&quot;clean&quot;</span>, BuildDate:<span class=\"hljs-string\">&quot;2025-03-11T19:57:38Z&quot;</span>, GoVersion:<span class=\"hljs-string\">&quot;go1.23.6&quot;</span>, Compiler:<span class=\"hljs-string\">&quot;gc&quot;</span>, Platform:<span class=\"hljs-string\">&quot;linux/amd64&quot;</span>&#125;<br><br></code></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"3-3-2-生成部署配置文件\"><a href=\"#3-3-2-生成部署配置文件\" class=\"headerlink\" title=\"3.3.2 生成部署配置文件\"></a>3.3.2 生成部署配置文件</h3><p>生成kubeadm部署默认配置文件</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># kubeadm config print init-defaults &gt; /home/acanx/kubeadm-config.yaml</span><br></code></pre></td></tr></table></figure>\n\n<h4 id=\"使用kubernetes社区版容器镜像仓库\"><a href=\"#使用kubernetes社区版容器镜像仓库\" class=\"headerlink\" title=\"使用kubernetes社区版容器镜像仓库\"></a>使用kubernetes社区版容器镜像仓库</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># nano /home/acanx/kubeadm-config.yaml</span><br>root@k8s-master01:~<span class=\"hljs-comment\"># cat kubeadm-config.yaml</span><br></code></pre></td></tr></table></figure>\n\n<p>kubeadm-config.yaml文件中 的配置</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs yaml\"> <span class=\"hljs-attr\">apiVersion:</span> <span class=\"hljs-string\">kubeadm.k8s.io/v1beta3</span><br> <span class=\"hljs-string\">bootstrapTokens:-</span> <span class=\"hljs-string\">groups:-</span> <span class=\"hljs-string\">system:bootstrappers:kubeadm:default-node-token</span><br> <span class=\"hljs-attr\">token:</span> <span class=\"hljs-string\">abcdef.0123456789abcdef</span><br> <span class=\"hljs-attr\">ttl:</span> <span class=\"hljs-string\">24h0m0s</span><br> <span class=\"hljs-string\">usages:-</span> <span class=\"hljs-string\">signing-</span> <span class=\"hljs-string\">authentication</span><br> <span class=\"hljs-attr\">kind:</span> <span class=\"hljs-string\">InitConfiguration</span><br> <span class=\"hljs-attr\">localAPIEndpoint:</span><br> <span class=\"hljs-attr\">advertiseAddress:</span> <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.10</span><span class=\"hljs-number\">.140</span><br> <span class=\"hljs-attr\">bindPort:</span> <span class=\"hljs-number\">6443</span><br> <span class=\"hljs-attr\">nodeRegistration:</span><br> <span class=\"hljs-attr\">criSocket:</span> <span class=\"hljs-string\">unix:///var/run/containerd/containerd.sock</span><br> <span class=\"hljs-attr\">imagePullPolicy:</span> <span class=\"hljs-string\">IfNotPresent</span><br> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">k8s-master01</span><br> <span class=\"hljs-attr\">taints:</span> <span class=\"hljs-literal\">null</span><span class=\"hljs-string\">--</span><br><span class=\"hljs-attr\">apiServer:</span><br> <span class=\"hljs-attr\">timeoutForControlPlane:</span> <span class=\"hljs-string\">4m0s</span><br> <span class=\"hljs-attr\">apiVersion:</span> <span class=\"hljs-string\">kubeadm.k8s.io/v1beta3</span><br> <span class=\"hljs-attr\">certificatesDir:</span> <span class=\"hljs-string\">/etc/kubernetes/pki</span><br> <span class=\"hljs-attr\">clusterName:</span> <span class=\"hljs-string\">kubernetes</span><br> <span class=\"hljs-attr\">controllerManager:</span> &#123;&#125;<br> <span class=\"hljs-attr\">dns:</span> &#123;&#125;<br> <span class=\"hljs-attr\">etcd:</span><br> <span class=\"hljs-attr\">local:</span><br> <span class=\"hljs-attr\">dataDir:</span> <span class=\"hljs-string\">/var/lib/etcd</span><br> <span class=\"hljs-attr\">imageRepository:</span> <span class=\"hljs-string\">registry.k8s.io</span><br> <span class=\"hljs-attr\">kind:</span> <span class=\"hljs-string\">ClusterConfiguration</span><br> <span class=\"hljs-attr\">kubernetesVersion:</span> <span class=\"hljs-number\">1.30</span><span class=\"hljs-number\">.0</span><br> <span class=\"hljs-attr\">networking:</span><br> <span class=\"hljs-attr\">dnsDomain:</span> <span class=\"hljs-string\">cluster.local</span><br> <span class=\"hljs-attr\">serviceSubnet:</span> <span class=\"hljs-number\">10.96</span><span class=\"hljs-number\">.0</span><span class=\"hljs-number\">.0</span><span class=\"hljs-string\">/12</span><br> <span class=\"hljs-attr\">podSubnet:</span> <span class=\"hljs-number\">10.244</span><span class=\"hljs-number\">.0</span><span class=\"hljs-number\">.0</span><span class=\"hljs-string\">/16</span><br><span class=\"hljs-attr\">scheduler:</span> &#123;&#125;<br><span class=\"hljs-string\">--</span><br><span class=\"hljs-attr\">kind:</span> <span class=\"hljs-string\">KubeletConfiguration</span><br><span class=\"hljs-attr\">apiVersion:</span> <span class=\"hljs-string\">kubelet.config.k8s.io/v1beta1</span><br><span class=\"hljs-attr\">cgroupDriver:</span> <span class=\"hljs-string\">systemd</span><br></code></pre></td></tr></table></figure>\n\n\n\n<h4 id=\"使用阿里云容器镜像仓库\"><a href=\"#使用阿里云容器镜像仓库\" class=\"headerlink\" title=\"使用阿里云容器镜像仓库\"></a>使用阿里云容器镜像仓库</h4><p>编辑kubeadm配置文件（使用阿里云容器镜像仓库）</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># nano kubeadm-config.yaml</span><br></code></pre></td></tr></table></figure>\n\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs yaml\"><span class=\"hljs-attr\">apiVersion:</span> <span class=\"hljs-string\">kubeadm.k8s.io/v1beta4</span><br><span class=\"hljs-attr\">bootstrapTokens:</span><br><span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">groups:</span><br>  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">system:bootstrappers:kubeadm:default-node-token</span><br>  <span class=\"hljs-attr\">token:</span> <span class=\"hljs-string\">abcdef.0123456789abcdef</span><br>  <span class=\"hljs-attr\">ttl:</span> <span class=\"hljs-string\">24h0m0s</span><br>  <span class=\"hljs-attr\">usages:</span><br>  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">signing</span><br>  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">authentication</span><br><span class=\"hljs-attr\">kind:</span> <span class=\"hljs-string\">InitConfiguration</span><br><span class=\"hljs-attr\">localAPIEndpoint:</span><br>  <span class=\"hljs-attr\">advertiseAddress:</span> <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.11</span><span class=\"hljs-number\">.161</span>   <span class=\"hljs-comment\"># 设置节点IP地址</span><br>  <span class=\"hljs-attr\">bindPort:</span> <span class=\"hljs-number\">6443</span><br><span class=\"hljs-attr\">nodeRegistration:</span><br>  <span class=\"hljs-attr\">criSocket:</span> <span class=\"hljs-string\">unix:///var/run/containerd/containerd.sock</span><br>  <span class=\"hljs-attr\">imagePullPolicy:</span> <span class=\"hljs-string\">IfNotPresent</span><br>  <span class=\"hljs-attr\">imagePullSerial:</span> <span class=\"hljs-literal\">true</span><br>  <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">k8s-master01</span>      <span class=\"hljs-comment\"># 修改节点名称</span><br>  <span class=\"hljs-attr\">taints:</span> <span class=\"hljs-literal\">null</span><br><span class=\"hljs-attr\">timeouts:</span><br>  <span class=\"hljs-attr\">controlPlaneComponentHealthCheck:</span> <span class=\"hljs-string\">4m0s</span><br>  <span class=\"hljs-attr\">discovery:</span> <span class=\"hljs-string\">5m0s</span><br>  <span class=\"hljs-attr\">etcdAPICall:</span> <span class=\"hljs-string\">2m0s</span><br>  <span class=\"hljs-attr\">kubeletHealthCheck:</span> <span class=\"hljs-string\">4m0s</span><br>  <span class=\"hljs-attr\">kubernetesAPICall:</span> <span class=\"hljs-string\">1m0s</span><br>  <span class=\"hljs-attr\">tlsBootstrap:</span> <span class=\"hljs-string\">5m0s</span><br>  <span class=\"hljs-attr\">upgradeManifests:</span> <span class=\"hljs-string\">5m0s</span><br><span class=\"hljs-meta\">---</span><br><span class=\"hljs-attr\">apiServer:</span> &#123;&#125;<br><span class=\"hljs-attr\">apiVersion:</span> <span class=\"hljs-string\">kubeadm.k8s.io/v1beta4</span><br><span class=\"hljs-attr\">caCertificateValidityPeriod:</span> <span class=\"hljs-string\">87600h0m0s</span><br><span class=\"hljs-attr\">certificateValidityPeriod:</span> <span class=\"hljs-string\">8760h0m0s</span><br><span class=\"hljs-attr\">certificatesDir:</span> <span class=\"hljs-string\">/etc/kubernetes/pki</span><br><span class=\"hljs-attr\">clusterName:</span> <span class=\"hljs-string\">kubernetes</span><br><span class=\"hljs-attr\">controllerManager:</span> &#123;&#125;<br><span class=\"hljs-attr\">dns:</span> &#123;&#125;<br><span class=\"hljs-attr\">encryptionAlgorithm:</span> <span class=\"hljs-string\">RSA-2048</span><br><span class=\"hljs-attr\">etcd:</span><br>  <span class=\"hljs-attr\">local:</span><br>    <span class=\"hljs-attr\">dataDir:</span> <span class=\"hljs-string\">/var/lib/etcd</span><br><span class=\"hljs-attr\">imageRepository:</span> <span class=\"hljs-string\">registry.aliyuncs.com/google_containers</span>   <span class=\"hljs-comment\"># 修改镜像地址</span><br><span class=\"hljs-attr\">kind:</span> <span class=\"hljs-string\">ClusterConfiguration</span><br><span class=\"hljs-attr\">kubernetesVersion:</span> <span class=\"hljs-number\">1.32</span><span class=\"hljs-number\">.0</span><br><span class=\"hljs-attr\">networking:</span><br>  <span class=\"hljs-attr\">dnsDomain:</span> <span class=\"hljs-string\">cluster.local</span><br>  <span class=\"hljs-attr\">serviceSubnet:</span> <span class=\"hljs-number\">10.96</span><span class=\"hljs-number\">.0</span><span class=\"hljs-number\">.0</span><span class=\"hljs-string\">/12</span><br>  <span class=\"hljs-attr\">podSubnet:</span> <span class=\"hljs-number\">10.244</span><span class=\"hljs-number\">.0</span><span class=\"hljs-number\">.0</span><span class=\"hljs-string\">/16</span>    <span class=\"hljs-comment\"># 可按需修改，原则：不与已有的节点网段重合</span><br><span class=\"hljs-attr\">proxy:</span> &#123;&#125;<br><span class=\"hljs-attr\">scheduler:</span> &#123;&#125;<br><span class=\"hljs-meta\">---</span><br><span class=\"hljs-attr\">kind:</span> <span class=\"hljs-string\">KubeletConfiguration</span>                   <span class=\"hljs-comment\"># 最后四行是补加的</span><br><span class=\"hljs-attr\">apiVersion:</span> <span class=\"hljs-string\">kubelet.config.k8s.io/v1beta1</span><br><span class=\"hljs-attr\">cgroupDriver:</span> <span class=\"hljs-string\">systemd</span><br></code></pre></td></tr></table></figure>\n\n<h3 id=\"3-3-3-查看并下载镜像\"><a href=\"#3-3-3-查看并下载镜像\" class=\"headerlink\" title=\"3.3.3 查看并下载镜像\"></a>3.3.3 查看并下载镜像</h3><h4 id=\"查看及使用Kubernetes社区镜像仓库下载镜像\"><a href=\"#查看及使用Kubernetes社区镜像仓库下载镜像\" class=\"headerlink\" title=\"查看及使用Kubernetes社区镜像仓库下载镜像\"></a>查看及使用Kubernetes社区镜像仓库下载镜像</h4><p>查看镜像列表（K8S社区镜像仓库）</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># kubeadm config images list   # 查看kubernetes镜像默认版本</span><br><br>root@k8s-master01:~<span class=\"hljs-comment\"># kubeadm config images list --kubernetes-version=v1.32.3    # 指定kubernetes镜像版本</span><br><br>registry.k8s.io/kube-apiserver:v1.32.3<br>registry.k8s.io/kube-controller-manager:v1.32.3<br>registry.k8s.io/kube-scheduler:v1.32.3<br>registry.k8s.io/kube-proxy:v1.32.3<br>registry.k8s.io/coredns/coredns:v1.11.3<br>registry.k8s.io/pause:3.10<br>registry.k8s.io/etcd:3.5.16-0<br></code></pre></td></tr></table></figure>\n\n\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># kubeadm config images pull           # 默认从K8S社区镜像仓库下载镜像</span><br><br>[config/images] Pulled registry.k8s.io/kube-apiserver:v1.32.3<br>[config/images] Pulled registry.k8s.io/kube-controller-manager:v1.32.3<br>[config/images] Pulled registry.k8s.io/kube-scheduler:v1.32.3<br>[config/images] Pulled registry.k8s.io/kube-proxy:v1.32.3<br>[config/images] Pulled registry.k8s.io/coredns/coredns:v1.11.3<br>[config/images] Pulled registry.k8s.io/pause:3.10<br>[config/images] Pulled registry.k8s.io/etcd:3.5.16-0<br></code></pre></td></tr></table></figure>\n\n\n<h4 id=\"查看及使用阿里云容器镜像仓库下载镜像\"><a href=\"#查看及使用阿里云容器镜像仓库下载镜像\" class=\"headerlink\" title=\"查看及使用阿里云容器镜像仓库下载镜像\"></a>查看及使用阿里云容器镜像仓库下载镜像</h4><p>查看镜像列表（阿里云容器镜像仓库）</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># kubeadm config images list --image-repository registry.aliyuncs.com/google_containers</span><br><br>registry.aliyuncs.com/google_containers/kube-apiserver:v1.32.3<br>registry.aliyuncs.com/google_containers/kube-controller-manager:v1.32.3<br>registry.aliyuncs.com/google_containers/kube-scheduler:v1.32.3<br>registry.aliyuncs.com/google_containers/kube-proxy:v1.32.3<br>registry.aliyuncs.com/google_containers/coredns:v1.11.3<br>registry.aliyuncs.com/google_containers/pause:3.10<br>registry.aliyuncs.com/google_containers/etcd:3.5.16-0<br></code></pre></td></tr></table></figure>\n\n<p>使用阿里云容器镜像仓库下载</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># kubeadm config images pull --image-repository registry.aliyuncs.com/google_containers --cri-socket=unix:///run/containerd/containerd.sock</span><br><br>[config/images] Pulled registry.aliyuncs.com/google_containers/kube-apiserver:v1.32.3<br>[config/images] Pulled registry.aliyuncs.com/google_containers/kube-controller-manager:v1.32.3<br>[config/images] Pulled registry.aliyuncs.com/google_containers/kube-scheduler:v1.32.3<br>[config/images] Pulled registry.aliyuncs.com/google_containers/kube-proxy:v1.32.3<br>[config/images] Pulled registry.aliyuncs.com/google_containers/coredns:v1.11.3<br>[config/images] Pulled registry.aliyuncs.com/google_containers/pause:3.10<br>[config/images] Pulled registry.aliyuncs.com/google_containers/etcd:3.5.16-0<br></code></pre></td></tr></table></figure>\n\n\n<h4 id=\"查看下载的镜像\"><a href=\"#查看下载的镜像\" class=\"headerlink\" title=\"查看下载的镜像\"></a>查看下载的镜像</h4><p>查看本地下载的containerd镜像</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># crictl images</span><br><br>WARN[0000] Config <span class=\"hljs-string\">&quot;/etc/crictl.yaml&quot;</span> does not exist, trying next: <span class=\"hljs-string\">&quot;/usr/bin/crictl.yaml&quot;</span> <br>WARN[0000] Image connect using default endpoints: [unix:///run/containerd/containerd.sock unix:///run/crio/crio.sock unix:///var/run/cri-dockerd.sock]. As the default settings are now deprecated, you should <span class=\"hljs-built_in\">set</span> the endpoint instead. <br>IMAGE                                                             TAG                 IMAGE ID            SIZE<br>registry.aliyuncs.com/google_containers/coredns                   v1.11.3             c69fa2e9cbf5f       18.6MB<br>registry.aliyuncs.com/google_containers/etcd                      3.5.16-0            a9e7e6b294baf       57.7MB<br>registry.aliyuncs.com/google_containers/kube-apiserver            v1.32.0             c2e17b8d0f4a3       28.7MB<br>registry.aliyuncs.com/google_containers/kube-apiserver            v1.32.3             f8bdc4cfa0651       28.7MB<br>registry.aliyuncs.com/google_containers/kube-controller-manager   v1.32.0             8cab3d2a8bd0f       26.3MB<br>registry.aliyuncs.com/google_containers/kube-controller-manager   v1.32.3             085818208a521       26.3MB<br>registry.aliyuncs.com/google_containers/kube-proxy                v1.32.0             040f9f8aac8cd       30.9MB<br>registry.aliyuncs.com/google_containers/kube-proxy                v1.32.3             a1ae78fd2f9d8       30.9MB<br>registry.aliyuncs.com/google_containers/kube-scheduler            v1.32.0             a389e107f4ff1       20.7MB<br>registry.aliyuncs.com/google_containers/kube-scheduler            v1.32.3             b4260bf5078ab       20.7MB<br>registry.aliyuncs.com/google_containers/pause                     3.10                873ed75102791       320kB<br></code></pre></td></tr></table></figure>\n\n\n\n\n<h3 id=\"3-3-4-使用部署配置文件初始化K8S集群\"><a href=\"#3-3-4-使用部署配置文件初始化K8S集群\" class=\"headerlink\" title=\"3.3.4 使用部署配置文件初始化K8S集群\"></a>3.3.4 使用部署配置文件初始化K8S集群</h3><p>使用命令初始化Kubeadm（只在Master节点操作）</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># kubeadm init --config /home/acanx/kubeadm-config.yaml  --upload-certs --v=9  --cri-socket=unix:///run/containerd/containerd.sock</span><br></code></pre></td></tr></table></figure>\n<p>输出内容如下：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">I0322 20:07:35.623621    4886 initconfiguration.go:261] loading configuration from <span class=\"hljs-string\">&quot;/home/acanx/kubeadm-config.yaml&quot;</span><br>[init] Using Kubernetes version: v1.32.0<br>[preflight] Running pre-flight checks<br>I0322 20:07:35.633576    4886 checks.go:561] validating Kubernetes and kubeadm version<br>I0322 20:07:35.633610    4886 checks.go:166] validating <span class=\"hljs-keyword\">if</span> the firewall is enabled and active<br>I0322 20:07:35.651826    4886 checks.go:201] validating availability of port 6443<br>I0322 20:07:35.652309    4886 checks.go:201] validating availability of port 10259<br>I0322 20:07:35.652373    4886 checks.go:201] validating availability of port 10257<br>I0322 20:07:35.652434    4886 checks.go:278] validating the existence of file /etc/kubernetes/manifests/kube-apiserver.yaml<br>I0322 20:07:35.652491    4886 checks.go:278] validating the existence of file /etc/kubernetes/manifests/kube-controller-manager.yaml<br>I0322 20:07:35.652520    4886 checks.go:278] validating the existence of file /etc/kubernetes/manifests/kube-scheduler.yaml<br>I0322 20:07:35.652560    4886 checks.go:278] validating the existence of file /etc/kubernetes/manifests/etcd.yaml<br>I0322 20:07:35.652582    4886 checks.go:428] validating <span class=\"hljs-keyword\">if</span> the connectivity <span class=\"hljs-built_in\">type</span> is via proxy or direct<br>I0322 20:07:35.652631    4886 checks.go:467] validating http connectivity to first IP address <span class=\"hljs-keyword\">in</span> the CIDR<br>I0322 20:07:35.652672    4886 checks.go:467] validating http connectivity to first IP address <span class=\"hljs-keyword\">in</span> the CIDR<br>I0322 20:07:35.652699    4886 checks.go:102] validating the container runtime<br>I0322 20:07:35.653795    4886 checks.go:637] validating whether swap is enabled or not<br>I0322 20:07:35.653855    4886 checks.go:368] validating the presence of executable ip<br>I0322 20:07:35.653947    4886 checks.go:368] validating the presence of executable iptables<br>I0322 20:07:35.654055    4886 checks.go:368] validating the presence of executable mount<br>I0322 20:07:35.654080    4886 checks.go:368] validating the presence of executable nsenter<br>I0322 20:07:35.654117    4886 checks.go:368] validating the presence of executable ethtool<br>I0322 20:07:35.654145    4886 checks.go:368] validating the presence of executable tc<br>I0322 20:07:35.654182    4886 checks.go:368] validating the presence of executable touch<br>I0322 20:07:35.654210    4886 checks.go:514] running all checks<br>I0322 20:07:35.680418    4886 checks.go:399] checking whether the given node name is valid and reachable using net.LookupHost<br>I0322 20:07:35.680635    4886 checks.go:603] validating kubelet version<br>I0322 20:07:35.753081    4886 checks.go:128] validating <span class=\"hljs-keyword\">if</span> the <span class=\"hljs-string\">&quot;kubelet&quot;</span> service is enabled and active<br>I0322 20:07:35.774195    4886 checks.go:201] validating availability of port 10250<br>I0322 20:07:35.774355    4886 checks.go:327] validating the contents of file /proc/sys/net/ipv4/ip_forward<br>I0322 20:07:35.774477    4886 checks.go:201] validating availability of port 2379<br>I0322 20:07:35.774568    4886 checks.go:201] validating availability of port 2380<br>I0322 20:07:35.774631    4886 checks.go:241] validating the existence and emptiness of directory /var/lib/etcd<br>[preflight] Pulling images required <span class=\"hljs-keyword\">for</span> setting up a Kubernetes cluster<br>[preflight] This might take a minute or two, depending on the speed of your internet connection<br>[preflight] You can also perform this action beforehand using <span class=\"hljs-string\">&#x27;kubeadm config images pull&#x27;</span><br>I0322 20:07:35.777659    4886 checks.go:832] using image pull policy: IfNotPresent<br>I0322 20:07:35.779807    4886 checks.go:868] pulling: registry.aliyuncs.com/google_containers/kube-apiserver:v1.32.0<br>I0322 20:08:11.358938    4886 checks.go:868] pulling: registry.aliyuncs.com/google_containers/kube-controller-manager:v1.32.0<br>I0322 20:08:38.140994    4886 checks.go:868] pulling: registry.aliyuncs.com/google_containers/kube-scheduler:v1.32.0<br>I0322 20:09:00.270475    4886 checks.go:868] pulling: registry.aliyuncs.com/google_containers/kube-proxy:v1.32.0<br>I0322 20:09:26.947685    4886 checks.go:863] image exists: registry.aliyuncs.com/google_containers/coredns:v1.11.3<br>I0322 20:09:26.948207    4886 checks.go:863] image exists: registry.aliyuncs.com/google_containers/pause:3.10<br>I0322 20:09:26.948594    4886 checks.go:863] image exists: registry.aliyuncs.com/google_containers/etcd:3.5.16-0<br>[certs] Using certificateDir folder <span class=\"hljs-string\">&quot;/etc/kubernetes/pki&quot;</span><br>I0322 20:09:26.948692    4886 certs.go:112] creating a new certificate authority <span class=\"hljs-keyword\">for</span> ca<br>[certs] Generating <span class=\"hljs-string\">&quot;ca&quot;</span> certificate and key<br>I0322 20:09:27.066597    4886 certs.go:473] validating certificate period <span class=\"hljs-keyword\">for</span> ca certificate<br>[certs] Generating <span class=\"hljs-string\">&quot;apiserver&quot;</span> certificate and key<br>[certs] apiserver serving cert is signed <span class=\"hljs-keyword\">for</span> DNS names [k8s-master01 kubernetes kubernetes.default kubernetes.default.svc kubernetes.default.svc.cluster.local] and IPs [10.96.0.1 192.168.11.161]<br>[certs] Generating <span class=\"hljs-string\">&quot;apiserver-kubelet-client&quot;</span> certificate and key<br>I0322 20:09:27.313725    4886 certs.go:112] creating a new certificate authority <span class=\"hljs-keyword\">for</span> front-proxy-ca<br>[certs] Generating <span class=\"hljs-string\">&quot;front-proxy-ca&quot;</span> certificate and key<br>I0322 20:09:27.439421    4886 certs.go:473] validating certificate period <span class=\"hljs-keyword\">for</span> front-proxy-ca certificate<br>[certs] Generating <span class=\"hljs-string\">&quot;front-proxy-client&quot;</span> certificate and key<br>I0322 20:09:27.532545    4886 certs.go:112] creating a new certificate authority <span class=\"hljs-keyword\">for</span> etcd-ca<br>[certs] Generating <span class=\"hljs-string\">&quot;etcd/ca&quot;</span> certificate and key<br>I0322 20:09:27.631261    4886 certs.go:473] validating certificate period <span class=\"hljs-keyword\">for</span> etcd/ca certificate<br>[certs] Generating <span class=\"hljs-string\">&quot;etcd/server&quot;</span> certificate and key<br>[certs] etcd/server serving cert is signed <span class=\"hljs-keyword\">for</span> DNS names [k8s-master01 localhost] and IPs [192.168.11.161 127.0.0.1 ::1]<br>[certs] Generating <span class=\"hljs-string\">&quot;etcd/peer&quot;</span> certificate and key<br>[certs] etcd/peer serving cert is signed <span class=\"hljs-keyword\">for</span> DNS names [k8s-master01 localhost] and IPs [192.168.11.161 127.0.0.1 ::1]<br>[certs] Generating <span class=\"hljs-string\">&quot;etcd/healthcheck-client&quot;</span> certificate and key<br>[certs] Generating <span class=\"hljs-string\">&quot;apiserver-etcd-client&quot;</span> certificate and key<br>I0322 20:09:28.312889    4886 certs.go:78] creating new public/private key files <span class=\"hljs-keyword\">for</span> signing service account users<br>[certs] Generating <span class=\"hljs-string\">&quot;sa&quot;</span> key and public key<br>[kubeconfig] Using kubeconfig folder <span class=\"hljs-string\">&quot;/etc/kubernetes&quot;</span><br>I0322 20:09:28.495281    4886 kubeconfig.go:111] creating kubeconfig file <span class=\"hljs-keyword\">for</span> admin.conf<br>[kubeconfig] Writing <span class=\"hljs-string\">&quot;admin.conf&quot;</span> kubeconfig file<br>I0322 20:09:28.848054    4886 kubeconfig.go:111] creating kubeconfig file <span class=\"hljs-keyword\">for</span> super-admin.conf<br>[kubeconfig] Writing <span class=\"hljs-string\">&quot;super-admin.conf&quot;</span> kubeconfig file<br>I0322 20:09:29.129094    4886 kubeconfig.go:111] creating kubeconfig file <span class=\"hljs-keyword\">for</span> kubelet.conf<br>[kubeconfig] Writing <span class=\"hljs-string\">&quot;kubelet.conf&quot;</span> kubeconfig file<br>I0322 20:09:29.386206    4886 kubeconfig.go:111] creating kubeconfig file <span class=\"hljs-keyword\">for</span> controller-manager.conf<br>[kubeconfig] Writing <span class=\"hljs-string\">&quot;controller-manager.conf&quot;</span> kubeconfig file<br>I0322 20:09:29.483874    4886 kubeconfig.go:111] creating kubeconfig file <span class=\"hljs-keyword\">for</span> scheduler.conf<br>[kubeconfig] Writing <span class=\"hljs-string\">&quot;scheduler.conf&quot;</span> kubeconfig file<br>[etcd] Creating static Pod manifest <span class=\"hljs-keyword\">for</span> <span class=\"hljs-built_in\">local</span> etcd <span class=\"hljs-keyword\">in</span> <span class=\"hljs-string\">&quot;/etc/kubernetes/manifests&quot;</span><br>I0322 20:09:29.607843    4886 local.go:66] [etcd] wrote Static Pod manifest <span class=\"hljs-keyword\">for</span> a <span class=\"hljs-built_in\">local</span> etcd member to <span class=\"hljs-string\">&quot;/etc/kubernetes/manifests/etcd.yaml&quot;</span><br>[control-plane] Using manifest folder <span class=\"hljs-string\">&quot;/etc/kubernetes/manifests&quot;</span><br>[control-plane] Creating static Pod manifest <span class=\"hljs-keyword\">for</span> <span class=\"hljs-string\">&quot;kube-apiserver&quot;</span><br>I0322 20:09:29.607888    4886 manifests.go:104] [control-plane] getting StaticPodSpecs<br>I0322 20:09:29.608085    4886 certs.go:473] validating certificate period <span class=\"hljs-keyword\">for</span> CA certificate<br>I0322 20:09:29.608178    4886 manifests.go:130] [control-plane] adding volume <span class=\"hljs-string\">&quot;ca-certs&quot;</span> <span class=\"hljs-keyword\">for</span> component <span class=\"hljs-string\">&quot;kube-apiserver&quot;</span><br>I0322 20:09:29.608192    4886 manifests.go:130] [control-plane] adding volume <span class=\"hljs-string\">&quot;etc-ca-certificates&quot;</span> <span class=\"hljs-keyword\">for</span> component <span class=\"hljs-string\">&quot;kube-apiserver&quot;</span><br>I0322 20:09:29.608198    4886 manifests.go:130] [control-plane] adding volume <span class=\"hljs-string\">&quot;k8s-certs&quot;</span> <span class=\"hljs-keyword\">for</span> component <span class=\"hljs-string\">&quot;kube-apiserver&quot;</span><br>I0322 20:09:29.608206    4886 manifests.go:130] [control-plane] adding volume <span class=\"hljs-string\">&quot;usr-local-share-ca-certificates&quot;</span> <span class=\"hljs-keyword\">for</span> component <span class=\"hljs-string\">&quot;kube-apiserver&quot;</span><br>I0322 20:09:29.608214    4886 manifests.go:130] [control-plane] adding volume <span class=\"hljs-string\">&quot;usr-share-ca-certificates&quot;</span> <span class=\"hljs-keyword\">for</span> component <span class=\"hljs-string\">&quot;kube-apiserver&quot;</span><br>I0322 20:09:29.609567    4886 manifests.go:159] [control-plane] wrote static Pod manifest <span class=\"hljs-keyword\">for</span> component <span class=\"hljs-string\">&quot;kube-apiserver&quot;</span> to <span class=\"hljs-string\">&quot;/etc/kubernetes/manifests/kube-apiserver.yaml&quot;</span><br>[control-plane] Creating static Pod manifest <span class=\"hljs-keyword\">for</span> <span class=\"hljs-string\">&quot;kube-controller-manager&quot;</span><br>I0322 20:09:29.609599    4886 manifests.go:104] [control-plane] getting StaticPodSpecs<br>I0322 20:09:29.609807    4886 manifests.go:130] [control-plane] adding volume <span class=\"hljs-string\">&quot;ca-certs&quot;</span> <span class=\"hljs-keyword\">for</span> component <span class=\"hljs-string\">&quot;kube-controller-manager&quot;</span><br>I0322 20:09:29.609819    4886 manifests.go:130] [control-plane] adding volume <span class=\"hljs-string\">&quot;etc-ca-certificates&quot;</span> <span class=\"hljs-keyword\">for</span> component <span class=\"hljs-string\">&quot;kube-controller-manager&quot;</span><br>I0322 20:09:29.609824    4886 manifests.go:130] [control-plane] adding volume <span class=\"hljs-string\">&quot;flexvolume-dir&quot;</span> <span class=\"hljs-keyword\">for</span> component <span class=\"hljs-string\">&quot;kube-controller-manager&quot;</span><br>I0322 20:09:29.609835    4886 manifests.go:130] [control-plane] adding volume <span class=\"hljs-string\">&quot;k8s-certs&quot;</span> <span class=\"hljs-keyword\">for</span> component <span class=\"hljs-string\">&quot;kube-controller-manager&quot;</span><br>I0322 20:09:29.609841    4886 manifests.go:130] [control-plane] adding volume <span class=\"hljs-string\">&quot;kubeconfig&quot;</span> <span class=\"hljs-keyword\">for</span> component <span class=\"hljs-string\">&quot;kube-controller-manager&quot;</span><br>I0322 20:09:29.609846    4886 manifests.go:130] [control-plane] adding volume <span class=\"hljs-string\">&quot;usr-local-share-ca-certificates&quot;</span> <span class=\"hljs-keyword\">for</span> component <span class=\"hljs-string\">&quot;kube-controller-manager&quot;</span><br>I0322 20:09:29.609854    4886 manifests.go:130] [control-plane] adding volume <span class=\"hljs-string\">&quot;usr-share-ca-certificates&quot;</span> <span class=\"hljs-keyword\">for</span> component <span class=\"hljs-string\">&quot;kube-controller-manager&quot;</span><br>I0322 20:09:29.610610    4886 manifests.go:159] [control-plane] wrote static Pod manifest <span class=\"hljs-keyword\">for</span> component <span class=\"hljs-string\">&quot;kube-controller-manager&quot;</span> to <span class=\"hljs-string\">&quot;/etc/kubernetes/manifests/kube-controller-manager.yaml&quot;</span><br>[control-plane] Creating static Pod manifest <span class=\"hljs-keyword\">for</span> <span class=\"hljs-string\">&quot;kube-scheduler&quot;</span><br>I0322 20:09:29.610640    4886 manifests.go:104] [control-plane] getting StaticPodSpecs<br>I0322 20:09:29.610848    4886 manifests.go:130] [control-plane] adding volume <span class=\"hljs-string\">&quot;kubeconfig&quot;</span> <span class=\"hljs-keyword\">for</span> component <span class=\"hljs-string\">&quot;kube-scheduler&quot;</span><br>I0322 20:09:29.611322    4886 manifests.go:159] [control-plane] wrote static Pod manifest <span class=\"hljs-keyword\">for</span> component <span class=\"hljs-string\">&quot;kube-scheduler&quot;</span> to <span class=\"hljs-string\">&quot;/etc/kubernetes/manifests/kube-scheduler.yaml&quot;</span><br>I0322 20:09:29.611339    4886 kubelet.go:70] Stopping the kubelet<br>[kubelet-start] Writing kubelet environment file with flags to file <span class=\"hljs-string\">&quot;/var/lib/kubelet/kubeadm-flags.env&quot;</span><br>[kubelet-start] Writing kubelet configuration to file <span class=\"hljs-string\">&quot;/var/lib/kubelet/config.yaml&quot;</span><br>[kubelet-start] Starting the kubelet<br>I0322 20:09:29.948568    4886 loader.go:402] Config loaded from file:  /etc/kubernetes/admin.conf<br>I0322 20:09:29.949088    4886 envvar.go:172] <span class=\"hljs-string\">&quot;Feature gate default state&quot;</span> feature=<span class=\"hljs-string\">&quot;ClientsAllowCBOR&quot;</span> enabled=<span class=\"hljs-literal\">false</span><br>I0322 20:09:29.949115    4886 envvar.go:172] <span class=\"hljs-string\">&quot;Feature gate default state&quot;</span> feature=<span class=\"hljs-string\">&quot;ClientsPreferCBOR&quot;</span> enabled=<span class=\"hljs-literal\">false</span><br>I0322 20:09:29.949124    4886 envvar.go:172] <span class=\"hljs-string\">&quot;Feature gate default state&quot;</span> feature=<span class=\"hljs-string\">&quot;InformerResourceVersion&quot;</span> enabled=<span class=\"hljs-literal\">false</span><br>I0322 20:09:29.949144    4886 envvar.go:172] <span class=\"hljs-string\">&quot;Feature gate default state&quot;</span> feature=<span class=\"hljs-string\">&quot;WatchListClient&quot;</span> enabled=<span class=\"hljs-literal\">false</span><br>[wait-control-plane] Waiting <span class=\"hljs-keyword\">for</span> the kubelet to boot up the control plane as static Pods from directory <span class=\"hljs-string\">&quot;/etc/kubernetes/manifests&quot;</span><br>[kubelet-check] Waiting <span class=\"hljs-keyword\">for</span> a healthy kubelet at http://127.0.0.1:10248/healthz. This can take up to 4m0s<br>[kubelet-check] The kubelet is healthy after 502.456949ms<br>[api-check] Waiting <span class=\"hljs-keyword\">for</span> a healthy API server. This can take up to 4m0s<br>I0322 20:09:30.452200    4886 wait.go:220] <span class=\"hljs-string\">&quot;Request Body&quot;</span> body=<span class=\"hljs-string\">&quot;&quot;</span><br>I0322 20:09:30.452302    4886 round_trippers.go:473] curl -v -XGET  -H <span class=\"hljs-string\">&quot;Accept: application/json, */*&quot;</span> -H <span class=\"hljs-string\">&quot;User-Agent: kubeadm/v1.32.3 (linux/amd64) kubernetes/32cc146&quot;</span> <span class=\"hljs-string\">&#x27;https://192.168.11.161:6443/healthz?timeout=10s&#x27;</span><br>I0322 20:09:30.452515    4886 round_trippers.go:515] HTTP Trace: Dial to tcp:192.168.11.161:6443 failed: dial tcp 192.168.11.161:6443: connect: connection refused<br>I0322 20:09:30.452547    4886 round_trippers.go:560] GET https://192.168.11.161:6443/healthz?timeout=10s  <span class=\"hljs-keyword\">in</span> 0 milliseconds<br>I0322 20:09:30.452664    4886 round_trippers.go:577] HTTP Statistics: DNSLookup 0 ms Dial 0 ms TLSHandshake 0 ms Duration 0 ms<br>I0322 20:09:30.452746    4886 round_trippers.go:584] Response Headers:<br>I0322 20:09:30.952488    4886 wait.go:220] <span class=\"hljs-string\">&quot;Request Body&quot;</span> body=<span class=\"hljs-string\">&quot;&quot;</span><br>I0322 20:09:30.952695    4886 round_trippers.go:473] curl -v -XGET  -H <span class=\"hljs-string\">&quot;Accept: application/json, */*&quot;</span> -H <span class=\"hljs-string\">&quot;User-Agent: kubeadm/v1.32.3 (linux/amd64) kubernetes/32cc146&quot;</span> <span class=\"hljs-string\">&#x27;https://192.168.11.161:6443/healthz?timeout=10s&#x27;</span><br>I0322 20:09:30.953055    4886 round_trippers.go:515] HTTP Trace: Dial to tcp:192.168.11.161:6443 failed: dial tcp 192.168.11.161:6443: connect: connection refused<br>I0322 20:09:30.953141    4886 round_trippers.go:560] GET https://192.168.11.161:6443/healthz?timeout=10s  <span class=\"hljs-keyword\">in</span> 0 milliseconds<br>I0322 20:09:30.953178    4886 round_trippers.go:577] HTTP Statistics: DNSLookup 0 ms Dial 0 ms TLSHandshake 0 ms Duration 0 ms<br>I0322 20:09:30.953196    4886 round_trippers.go:584] Response Headers:<br>I0322 20:09:31.453072    4886 wait.go:220] <span class=\"hljs-string\">&quot;Request Body&quot;</span> body=<span class=\"hljs-string\">&quot;&quot;</span><br>I0322 20:09:31.453425    4886 round_trippers.go:473] curl -v -XGET  -H <span class=\"hljs-string\">&quot;Accept: application/json, */*&quot;</span> -H <span class=\"hljs-string\">&quot;User-Agent: kubeadm/v1.32.3 (linux/amd64) kubernetes/32cc146&quot;</span> <span class=\"hljs-string\">&#x27;https://192.168.11.161:6443/healthz?timeout=10s&#x27;</span><br>I0322 20:09:31.453892    4886 round_trippers.go:515] HTTP Trace: Dial to tcp:192.168.11.161:6443 failed: dial tcp 192.168.11.161:6443: connect: connection refused<br>I0322 20:09:31.453935    4886 round_trippers.go:560] GET https://192.168.11.161:6443/healthz?timeout=10s  <span class=\"hljs-keyword\">in</span> 0 milliseconds<br>I0322 20:09:31.453947    4886 round_trippers.go:577] HTTP Statistics: DNSLookup 0 ms Dial 0 ms TLSHandshake 0 ms Duration 0 ms<br>I0322 20:09:31.453955    4886 round_trippers.go:584] Response Headers:<br>I0322 20:09:31.952836    4886 wait.go:220] <span class=\"hljs-string\">&quot;Request Body&quot;</span> body=<span class=\"hljs-string\">&quot;&quot;</span><br>I0322 20:09:31.953094    4886 round_trippers.go:473] curl -v -XGET  -H <span class=\"hljs-string\">&quot;Accept: application/json, */*&quot;</span> -H <span class=\"hljs-string\">&quot;User-Agent: kubeadm/v1.32.3 (linux/amd64) kubernetes/32cc146&quot;</span> <span class=\"hljs-string\">&#x27;https://192.168.11.161:6443/healthz?timeout=10s&#x27;</span><br>I0322 20:09:31.953553    4886 round_trippers.go:517] HTTP Trace: Dial to tcp:192.168.11.161:6443 succeed<br>I0322 20:09:33.315605    4886 round_trippers.go:560] GET https://192.168.11.161:6443/healthz?timeout=10s 403 Forbidden <span class=\"hljs-keyword\">in</span> 1362 milliseconds<br>I0322 20:09:33.315644    4886 round_trippers.go:577] HTTP Statistics: DNSLookup 0 ms Dial 0 ms TLSHandshake 1336 ms ServerProcessing 25 ms Duration 1362 ms<br>I0322 20:09:33.315657    4886 round_trippers.go:584] Response Headers:<br>I0322 20:09:33.315670    4886 round_trippers.go:587]     X-Content-Type-Options: nosniff<br>I0322 20:09:33.315701    4886 round_trippers.go:587]     X-Kubernetes-Pf-Flowschema-Uid: <br>I0322 20:09:33.315710    4886 round_trippers.go:587]     X-Kubernetes-Pf-Prioritylevel-Uid: <br>I0322 20:09:33.315717    4886 round_trippers.go:587]     Content-Length: 192<br>I0322 20:09:33.315723    4886 round_trippers.go:587]     Date: Sat, 22 Mar 2025 12:09:33 GMT<br>I0322 20:09:33.315731    4886 round_trippers.go:587]     Audit-Id: 989b38d0-29d4-4450-b564-12e6142c52b7<br>I0322 20:09:33.315737    4886 round_trippers.go:587]     Cache-Control: no-cache, private<br>I0322 20:09:33.315741    4886 round_trippers.go:587]     Content-Type: application/json<br>I0322 20:09:33.316997    4886 wait.go:220] <span class=\"hljs-string\">&quot;Response Body&quot;</span> body=&lt;<br>\t&#123;<span class=\"hljs-string\">&quot;kind&quot;</span>:<span class=\"hljs-string\">&quot;Status&quot;</span>,<span class=\"hljs-string\">&quot;apiVersion&quot;</span>:<span class=\"hljs-string\">&quot;v1&quot;</span>,<span class=\"hljs-string\">&quot;metadata&quot;</span>:&#123;&#125;,<span class=\"hljs-string\">&quot;status&quot;</span>:<span class=\"hljs-string\">&quot;Failure&quot;</span>,<span class=\"hljs-string\">&quot;message&quot;</span>:<span class=\"hljs-string\">&quot;forbidden: User \\&quot;kubernetes-admin\\&quot; cannot get path \\&quot;/healthz\\&quot;&quot;</span>,<span class=\"hljs-string\">&quot;reason&quot;</span>:<span class=\"hljs-string\">&quot;Forbidden&quot;</span>,<span class=\"hljs-string\">&quot;details&quot;</span>:&#123;&#125;,<span class=\"hljs-string\">&quot;code&quot;</span>:403&#125;<br> &gt;<br><br>.......   中间冗长的日志省略<br><br>I0322 20:09:37.294961    4886 round_trippers.go:473] curl -v -XPOST  -H <span class=\"hljs-string\">&quot;User-Agent: kubeadm/v1.32.3 (linux/amd64) kubernetes/32cc146&quot;</span> -H <span class=\"hljs-string\">&quot;Accept: application/vnd.kubernetes.protobuf,application/json&quot;</span> -H <span class=\"hljs-string\">&quot;Content-Type: application/vnd.kubernetes.protobuf&quot;</span> <span class=\"hljs-string\">&#x27;https://192.168.11.161:6443/apis/rbac.authorization.k8s.io/v1/namespaces/kube-system/rolebindings?timeout=10s&#x27;</span><br>I0322 20:09:37.298583    4886 round_trippers.go:560] POST https://192.168.11.161:6443/apis/rbac.authorization.k8s.io/v1/namespaces/kube-system/rolebindings?timeout=10s 201 Created <span class=\"hljs-keyword\">in</span> 3 milliseconds<br>I0322 20:09:37.298609    4886 round_trippers.go:577] HTTP Statistics: GetConnection 0 ms ServerProcessing 3 ms Duration 3 ms<br>I0322 20:09:37.298634    4886 round_trippers.go:584] Response Headers:<br>I0322 20:09:37.298649    4886 round_trippers.go:587]     X-Kubernetes-Pf-Flowschema-Uid: 9a8a526f-0630-4d03-b851-7ace48e8dc05<br>I0322 20:09:37.298661    4886 round_trippers.go:587]     X-Kubernetes-Pf-Prioritylevel-Uid: d044472a-2a80-46df-8bc8-7d94366f6e34<br>I0322 20:09:37.298667    4886 round_trippers.go:587]     Content-Length: 385<br>I0322 20:09:37.298675    4886 round_trippers.go:587]     Date: Sat, 22 Mar 2025 12:09:37 GMT<br>I0322 20:09:37.298680    4886 round_trippers.go:587]     Audit-Id: ece06481-523b-4fe4-9d2c-2d369eceecc1<br>I0322 20:09:37.298690    4886 round_trippers.go:587]     Cache-Control: no-cache, private<br>I0322 20:09:37.298695    4886 round_trippers.go:587]     Content-Type: application/vnd.kubernetes.protobuf<br>I0322 20:09:37.298744    4886 type.go:252] <span class=\"hljs-string\">&quot;Response Body&quot;</span> body=&lt;<br>\t00000000  6b 38 73 00 0a 2b 0a 1c  72 62 61 63 2e 61 75 74  |k8s..+..rbac.aut|<br>\t00000010  68 6f 72 69 7a 61 74 69  6f 6e 2e 6b 38 73 2e 69  |horization.k8s.i|<br>\t00000020  6f 2f 76 31 12 0b 52 6f  6c 65 42 69 6e 64 69 6e  |o/v1..RoleBindin|<br>\t00000030  67 12 c9 02 0a c0 01 0a  0a 6b 75 62 65 2d 70 72  |g........kube-pr|<br>\t00000040  6f 78 79 12 00 1a 0b 6b  75 62 65 2d 73 79 73 74  |oxy....kube-syst|<br>\t00000050  65 6d 22 00 2a 24 63 38  62 62 36 66 63 64 2d 38  |em<span class=\"hljs-string\">&quot;.*<span class=\"hljs-variable\">$c8bb6fcd</span>-8|</span><br><span class=\"hljs-string\">\t00000060  66 35 38 2d 34 35 35 34  2d 39 66 36 30 2d 38 39  |f58-4554-9f60-89|</span><br><span class=\"hljs-string\">\t00000070  39 32 61 39 65 36 64 36  64 39 32 03 33 30 33 38  |92a9e6d6d92.3038|</span><br><span class=\"hljs-string\">\t00000080  00 42 08 08 81 d1 fa be  06 10 00 8a 01 69 0a 07  |.B...........i..|</span><br><span class=\"hljs-string\">\t00000090  6b 75 62 65 61 64 6d 12  06 55 70 64 61 74 65 1a  |kubeadm..Update.|</span><br><span class=\"hljs-string\">\t000000a0  1c 72 62 61 63 2e 61 75  74 68 6f 72 69 7a 61 74  |.rbac.authorizat|</span><br><span class=\"hljs-string\">\t000000b0  69 6f 6e 2e 6b 38 73 2e  69 6f 2f 76 31 22 08 08  |ion.k8s.io/v1&quot;</span>..|<br>\t000000c0  81 d1 fa be 06 10 00 32  08 46 69 65 6c 64 73 56  |.......2.FieldsV|<br>\t000000d0  31 3a 22 0a 20 7b 22 66  3a 72 6f 6c 65 52 65 66  |1:<span class=\"hljs-string\">&quot;. &#123;&quot;</span>f:roleRef|<br>\t000000e0  22 3a 7b 7d 2c 22 66 3a  73 75 62 6a 65 63 74 73  |<span class=\"hljs-string\">&quot;:&#123;&#125;,&quot;</span>f:subjects|<br>\t000000f0  22 3a 7b 7d 7d 42 00 12  55 0a 05 47 72 6f 75 70  |<span class=\"hljs-string\">&quot;:&#123;&#125;&#125;B..U..Group|</span><br><span class=\"hljs-string\">\t00000100  12 19 72 62 61 63 2e 61  75 74 68 6f 72 69 7a 61  |..rbac.authoriza|</span><br><span class=\"hljs-string\">\t00000110  74 69 6f 6e 2e 6b 38 73  2e 69 6f 1a 2f 73 79 73  |tion.k8s.io./sys|</span><br><span class=\"hljs-string\">\t00000120  74 65 6d 3a 62 6f 6f 74  73 74 72 61 70 70 65 72  |tem:bootstrapper|</span><br><span class=\"hljs-string\">\t00000130  73 3a 6b 75 62 65 61 64  6d 3a 64 65 66 61 75 6c  |s:kubeadm:defaul|</span><br><span class=\"hljs-string\">\t00000140  74 2d 6e 6f 64 65 2d 74  6f 6b 65 6e 22 00 1a 2d  |t-node-token&quot;</span>..-|<br>\t00000150  0a 19 72 62 61 63 2e 61  75 74 68 6f 72 69 7a 61  |..rbac.authoriza|<br>\t00000160  74 69 6f 6e 2e 6b 38 73  2e 69 6f 12 04 52 6f 6c  |tion.k8s.io..Rol|<br>\t00000170  65 1a 0a 6b 75 62 65 2d  70 72 6f 78 79 1a 00 22  |e..kube-proxy..<span class=\"hljs-string\">&quot;|</span><br><span class=\"hljs-string\">\t00000180  00                                                |.|</span><br><span class=\"hljs-string\"> &gt;</span><br><span class=\"hljs-string\">[addons] Applied essential addon: kube-proxy</span><br><span class=\"hljs-string\">I0322 20:09:37.299409    4886 loader.go:402] Config loaded from file:  /etc/kubernetes/admin.conf</span><br><span class=\"hljs-string\">I0322 20:09:37.300120    4886 loader.go:402] Config loaded from file:  /etc/kubernetes/admin.conf</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">Your Kubernetes control-plane has initialized successfully!</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">To start using your cluster, you need to run the following as a regular user:</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">  mkdir -p <span class=\"hljs-variable\">$HOME</span>/.kube</span><br><span class=\"hljs-string\">  sudo cp -i /etc/kubernetes/admin.conf <span class=\"hljs-variable\">$HOME</span>/.kube/config</span><br><span class=\"hljs-string\">  sudo chown <span class=\"hljs-subst\">$(id -u)</span>:<span class=\"hljs-subst\">$(id -g)</span> <span class=\"hljs-variable\">$HOME</span>/.kube/config</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">Alternatively, if you are the root user, you can run:</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">  export KUBECONFIG=/etc/kubernetes/admin.conf</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">You should now deploy a pod network to the cluster.</span><br><span class=\"hljs-string\">Run &quot;</span>kubectl apply -f [podnetwork].yaml<span class=\"hljs-string\">&quot; with one of the options listed at:</span><br><span class=\"hljs-string\">  https://kubernetes.io/docs/concepts/cluster-administration/addons/</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">Then you can join any number of worker nodes by running the following on each as root:</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">kubeadm join 192.168.11.161:6443 --token abcdef.0123456789abcdef \\</span><br><span class=\"hljs-string\">\t--discovery-token-ca-cert-hash sha256:c7a1d928a82c30bec6dec880092339e64309b24cc01782d8a9d9c6c0ecfde58f </span><br><span class=\"hljs-string\"></span><br></code></pre></td></tr></table></figure>\n\n\n<h2 id=\"3-4-准备kubectl配置文件\"><a href=\"#3-4-准备kubectl配置文件\" class=\"headerlink\" title=\"3.4 准备kubectl配置文件\"></a>3.4 准备kubectl配置文件</h2><p>以下操作仅在Master节点上进行。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">mkdir -p <span class=\"hljs-variable\">$HOME</span>/.kube<br>sudo cp -i /etc/kubernetes/admin.conf <span class=\"hljs-variable\">$HOME</span>/.kube/config<br>sudo chown $(id -u):$(id -g) <span class=\"hljs-variable\">$HOME</span>/.kube/config<br></code></pre></td></tr></table></figure>\n\n<h2 id=\"3-5-工作节点加入集群\"><a href=\"#3-5-工作节点加入集群\" class=\"headerlink\" title=\"3.5 工作节点加入集群\"></a>3.5 工作节点加入集群</h2><h3 id=\"k8s-worker01节点加入集群\"><a href=\"#k8s-worker01节点加入集群\" class=\"headerlink\" title=\"k8s-worker01节点加入集群\"></a>k8s-worker01节点加入集群</h3><p>以下操作仅在Worker节点操作</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-worker01:~<span class=\"hljs-comment\"># kubeadm join 192.168.11.161:6443 --token abcdef.0123456789abcdef --discovery-token-ca-cert-hash sha256:c7a1d928a82c30bec6dec880092339e64309b24cc01782d8a9d9c6c0ecfde58f </span><br></code></pre></td></tr></table></figure>\n\n<h3 id=\"k8s-worker02节点加入集群\"><a href=\"#k8s-worker02节点加入集群\" class=\"headerlink\" title=\"k8s-worker02节点加入集群\"></a>k8s-worker02节点加入集群</h3><p>以下操作仅在Worker节点操作</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-worker02:~<span class=\"hljs-comment\"># kubeadm join 192.168.11.161:6443 --token abcdef.0123456789abcdef --discovery-token-ca-cert-hash sha256:c7a1d928a82c30bec6dec880092339e64309b24cc01782d8a9d9c6c0ecfde58f</span><br></code></pre></td></tr></table></figure>\n\n\n<h2 id=\"3-6-验证K8S集群节点是否可用\"><a href=\"#3-6-验证K8S集群节点是否可用\" class=\"headerlink\" title=\"3.6 验证K8S集群节点是否可用\"></a>3.6 验证K8S集群节点是否可用</h2><p>在Master节点检查集群节点是否可用 </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># kubectl get nodes</span><br><br>NAME           STATUS     ROLES           AGE     VERSION<br>k8s-master01   NotReady   control-plane   103m    v1.32.3<br>k8s-worker01   NotReady   &lt;none&gt;          4m12s   v1.32.3<br>k8s-worker02   NotReady   &lt;none&gt;          4m12s   v1.32.3<br></code></pre></td></tr></table></figure>\n\n<p>在Master节点检查集群Pod状态（按命名空间筛选） </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># kubectl get pods -n kube-system</span><br><br>NAME                                   READY   STATUS    RESTARTS   AGE<br>coredns-6766b7b6bb-6dtl7               0/1     Pending   0          104m<br>coredns-6766b7b6bb-lrpw7               0/1     Pending   0          104m<br>etcd-k8s-master01                      1/1     Running   0          104m      // 静态pod<br>kube-apiserver-k8s-master01            1/1     Running   0          104m      // 静态pod<br>kube-controller-manager-k8s-master01   1/1     Running   0          104m      // 静态pod    <br>kube-proxy-6g8dn                       1/1     Running   0          104m      <br>kube-proxy-kmzv6                       1/1     Running   0          5m1s<br>kube-proxy-pj2t5                       1/1     Running   0          5m1s<br>kube-scheduler-k8s-master01            1/1     Running   0          104m      // 静态pod <br></code></pre></td></tr></table></figure>\n\n<p>查看命名空间</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># kubectl get cs</span><br><br>Warning: v1 ComponentStatus is deprecated <span class=\"hljs-keyword\">in</span> v1.19+<br>NAME                 STATUS    MESSAGE   ERROR<br>etcd-0               Healthy   ok        <br>scheduler            Healthy   ok        <br>controller-manager   Healthy   ok  <br></code></pre></td></tr></table></figure>\n\n\n<h1 id=\"四、K8S集群网络插件calico部署\"><a href=\"#四、K8S集群网络插件calico部署\" class=\"headerlink\" title=\"四、K8S集群网络插件calico部署\"></a>四、K8S集群网络插件calico部署</h1><p><a href=\"https://projectcalico.docs.tigera.io/about/about-calico\">calico网络插件</a></p>\n<h2 id=\"4-1-第一步：安装tigera-operator\"><a href=\"#4-1-第一步：安装tigera-operator\" class=\"headerlink\" title=\"4.1 第一步：安装tigera-operator\"></a>4.1 第一步：安装tigera-operator</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># kubectl create -f https://raw.githubusercontent.com/projectcalico/calico/v3.29.2/manifests/tigera-operator.yaml</span><br></code></pre></td></tr></table></figure>\n\n<h3 id=\"4-1-1-输出内容：\"><a href=\"#4-1-1-输出内容：\" class=\"headerlink\" title=\"4.1.1 输出内容：\"></a>4.1.1 输出内容：</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># kubectl create -f https://raw.githubusercontent.com/projectcalico/calico/v3.29.2/manifests/tigera-operator.yaml</span><br><br>namespace/tigera-operator created<br>customresourcedefinition.apiextensions.k8s.io/bgpconfigurations.crd.projectcalico.org created<br>customresourcedefinition.apiextensions.k8s.io/bgpfilters.crd.projectcalico.org created<br>customresourcedefinition.apiextensions.k8s.io/bgppeers.crd.projectcalico.org created<br>customresourcedefinition.apiextensions.k8s.io/blockaffinities.crd.projectcalico.org created<br>customresourcedefinition.apiextensions.k8s.io/caliconodestatuses.crd.projectcalico.org created<br>customresourcedefinition.apiextensions.k8s.io/clusterinformations.crd.projectcalico.org created<br>customresourcedefinition.apiextensions.k8s.io/felixconfigurations.crd.projectcalico.org created<br>customresourcedefinition.apiextensions.k8s.io/globalnetworkpolicies.crd.projectcalico.org created<br>customresourcedefinition.apiextensions.k8s.io/globalnetworksets.crd.projectcalico.org created<br>customresourcedefinition.apiextensions.k8s.io/hostendpoints.crd.projectcalico.org created<br>customresourcedefinition.apiextensions.k8s.io/ipamblocks.crd.projectcalico.org created<br>customresourcedefinition.apiextensions.k8s.io/ipamconfigs.crd.projectcalico.org created<br>customresourcedefinition.apiextensions.k8s.io/ipamhandles.crd.projectcalico.org created<br>customresourcedefinition.apiextensions.k8s.io/ippools.crd.projectcalico.org created<br>customresourcedefinition.apiextensions.k8s.io/ipreservations.crd.projectcalico.org created<br>customresourcedefinition.apiextensions.k8s.io/kubecontrollersconfigurations.crd.projectcalico.org created<br>customresourcedefinition.apiextensions.k8s.io/networkpolicies.crd.projectcalico.org created<br>customresourcedefinition.apiextensions.k8s.io/networksets.crd.projectcalico.org created<br>customresourcedefinition.apiextensions.k8s.io/tiers.crd.projectcalico.org created<br>customresourcedefinition.apiextensions.k8s.io/adminnetworkpolicies.policy.networking.k8s.io created<br>customresourcedefinition.apiextensions.k8s.io/apiservers.operator.tigera.io created<br>customresourcedefinition.apiextensions.k8s.io/imagesets.operator.tigera.io created<br>customresourcedefinition.apiextensions.k8s.io/installations.operator.tigera.io created<br>customresourcedefinition.apiextensions.k8s.io/tigerastatuses.operator.tigera.io created<br>serviceaccount/tigera-operator created<br>clusterrole.rbac.authorization.k8s.io/tigera-operator created<br>clusterrolebinding.rbac.authorization.k8s.io/tigera-operator created<br>deployment.apps/tigera-operator created<br></code></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># kubectl get ns</span><br><br>NAME              STATUS   AGE<br>default           Active   116m<br>kube-node-lease   Active   116m<br>kube-public       Active   116m<br>kube-system       Active   116m<br>tigera-operator   Active   106s      // 新增的pod<br></code></pre></td></tr></table></figure>\n\n\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># kubectl get pods -n tigera-operator</span><br><br>NAME                              READY   STATUS             RESTARTS   AGE<br>tigera-operator-ccfc44587-vswlt   0/1     ImagePullBackOff   0          3m44s<br></code></pre></td></tr></table></figure>\n\n\n<h2 id=\"4-2-第二步：安装calico-system\"><a href=\"#4-2-第二步：安装calico-system\" class=\"headerlink\" title=\"4.2 第二步：安装calico-system\"></a>4.2 第二步：安装calico-system</h2><h3 id=\"4-2-1-下载custom-resources-yaml\"><a href=\"#4-2-1-下载custom-resources-yaml\" class=\"headerlink\" title=\"4.2.1 下载custom-resources.yaml\"></a>4.2.1 下载custom-resources.yaml</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># wget https://raw.githubusercontent.com/projectcalico/calico/v3.29.2/manifests/custom-resources.yaml</span><br></code></pre></td></tr></table></figure>\n\n\n<h3 id=\"4-2-2-修改custom-resources-yaml中的网段cidr配置\"><a href=\"#4-2-2-修改custom-resources-yaml中的网段cidr配置\" class=\"headerlink\" title=\"4.2.2 修改custom-resources.yaml中的网段cidr配置\"></a>4.2.2 修改custom-resources.yaml中的网段cidr配置</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># nano custom-resources.yaml</span><br></code></pre></td></tr></table></figure>\n\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs yaml\"><span class=\"hljs-comment\"># This section includes base Calico installation configuration.</span><br><span class=\"hljs-comment\"># For more information, see: https://projectcalico.docs.tigera.io/master/reference/installation/api#operator.tigera.io/v1.Installation</span><br> <span class=\"hljs-attr\">apiVersion:</span> <span class=\"hljs-string\">operator.tigera.io/v1</span><br> <span class=\"hljs-attr\">kind:</span> <span class=\"hljs-string\">Installation</span><br> <span class=\"hljs-attr\">metadata:</span><br>  <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">default</span><br> <span class=\"hljs-attr\">spec:</span><br>  <span class=\"hljs-comment\"># Configures Calico networking.</span><br>  <span class=\"hljs-attr\">calicoNetwork:</span><br>    <span class=\"hljs-comment\"># <span class=\"hljs-doctag\">Note:</span> The ipPools section cannot be modified post-install.</span><br>    <span class=\"hljs-attr\">ipPools:</span><br>    <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">blockSize:</span> <span class=\"hljs-number\">26</span><br>      <span class=\"hljs-attr\">cidr:</span> <span class=\"hljs-number\">10.244</span><span class=\"hljs-number\">.0</span><span class=\"hljs-number\">.0</span><span class=\"hljs-string\">/16</span>                <span class=\"hljs-comment\"># 修改此行内容为初始化时定义的pod network cidr</span><br>      <span class=\"hljs-attr\">encapsulation:</span> <span class=\"hljs-string\">VXLANCrossSubnet</span><br>      <span class=\"hljs-attr\">natOutgoing:</span> <span class=\"hljs-string\">Enabled</span><br>      <span class=\"hljs-attr\">nodeSelector:</span> <span class=\"hljs-string\">all()</span><br>      <br><span class=\"hljs-meta\">---</span><br><span class=\"hljs-comment\"># This section configures the Calico API server.</span><br><span class=\"hljs-comment\"># For more information, see: https://projectcalico.docs.tigera.io/master/reference/installation/api#operator.tigera.io/v1.APIServer</span><br><span class=\"hljs-attr\">apiVersion:</span> <span class=\"hljs-string\">operator.tigera.io/v1</span><br><span class=\"hljs-attr\">kind:</span> <span class=\"hljs-string\">APIServer</span><br><span class=\"hljs-attr\">metadata:</span><br>  <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">default</span><br> <span class=\"hljs-attr\">spec:</span> &#123;&#125;<br></code></pre></td></tr></table></figure>\n\n\n<ul>\n<li>再次检查修改后的配置文件</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># cat custom-resources.yaml</span><br></code></pre></td></tr></table></figure>\n\n\n<h3 id=\"4-2-3-应用部署配置文件，进行部署\"><a href=\"#4-2-3-应用部署配置文件，进行部署\" class=\"headerlink\" title=\"4.2.3 应用部署配置文件，进行部署\"></a>4.2.3 应用部署配置文件，进行部署</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># kubectl create -f custom-resources.yaml</span><br><br>installation.operator.tigera.io/default created<br>apiserver.operator.tigera.io/default created<br></code></pre></td></tr></table></figure>\n\n\n<h3 id=\"4-2-4-检查calico安装结果\"><a href=\"#4-2-4-检查calico安装结果\" class=\"headerlink\" title=\"4.2.4 检查calico安装结果\"></a>4.2.4 检查calico安装结果</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># watch kubectl get pods -n calico-system</span><br></code></pre></td></tr></table></figure>\n\n<p>经过一段时间的下载安装，全部署完成后大致如下输出所示：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># kubectl get pods -n calico-system</span><br><br>NAME                                      READY   STATUS    RESTARTS   AGE<br>calico-kube-controllers-cf49d8944-6zv2z   1/1     Running   0          53m<br>calico-node-2nfvf                         1/1     Running   0          53m<br>calico-node-nxhvj                         1/1     Running   0          53m<br>calico-node-v9lp9                         1/1     Running   0          53m<br>calico-typha-7b6f98bc78-49bf5             1/1     Running   0          53m<br>calico-typha-7b6f98bc78-7vhd6             1/1     Running   0          53m<br>csi-node-driver-6nbvr                     2/2     Running   0          53m<br>csi-node-driver-9cqq5                     2/2     Running   0          53m<br>csi-node-driver-9pm4t                     2/2     Running   0          53m   <br></code></pre></td></tr></table></figure>\n\n\n<p>查看节点状态变化：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># kubectl get nodes</span><br><br>NAME           STATUS   ROLES           AGE     VERSION<br>k8s-master01   Ready    control-plane   3h40m   v1.32.3<br>k8s-worker01   Ready    &lt;none&gt;          121m    v1.32.3<br>k8s-worker02   Ready    &lt;none&gt;          121m    v1.32.3<br></code></pre></td></tr></table></figure>\n\n<p>查看pod状态</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># kubectl get pods -n kube-system</span><br><br>NAME                                   READY   STATUS    RESTARTS   AGE<br>coredns-6766b7b6bb-6dtl7               1/1     Running   0          3h42m<br>coredns-6766b7b6bb-lrpw7               1/1     Running   0          3h42m<br>etcd-k8s-master01                      1/1     Running   0          3h42m<br>kube-apiserver-k8s-master01            1/1     Running   0          3h42m<br>kube-controller-manager-k8s-master01   1/1     Running   0          3h42m<br>kube-proxy-6g8dn                       1/1     Running   0          3h42m<br>kube-proxy-kmzv6                       1/1     Running   0          122m<br>kube-proxy-pj2t5                       1/1     Running   0          122m<br>kube-scheduler-k8s-master01            1/1     Running   0          3h42m<br></code></pre></td></tr></table></figure>\n\n<p>查看pod的IP及网段</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># kubectl get pods -n kube-system -o wide</span><br><br>NAME                                   READY   STATUS    RESTARTS   AGE     IP               NODE           NOMINATED NODE   READINESS GATES<br>coredns-6766b7b6bb-6dtl7               1/1     Running   0          3h43m   10.244.69.198    k8s-worker02   &lt;none&gt;           &lt;none&gt;<br>coredns-6766b7b6bb-lrpw7               1/1     Running   0          3h43m   10.244.69.197    k8s-worker02   &lt;none&gt;           &lt;none&gt;<br>etcd-k8s-master01                      1/1     Running   0          3h44m   192.168.11.161   k8s-master01   &lt;none&gt;           &lt;none&gt;<br>kube-apiserver-k8s-master01            1/1     Running   0          3h44m   192.168.11.161   k8s-master01   &lt;none&gt;           &lt;none&gt;<br>kube-controller-manager-k8s-master01   1/1     Running   0          3h44m   192.168.11.161   k8s-master01   &lt;none&gt;           &lt;none&gt;<br>kube-proxy-6g8dn                       1/1     Running   0          3h43m   192.168.11.161   k8s-master01   &lt;none&gt;           &lt;none&gt;<br>kube-proxy-kmzv6                       1/1     Running   0          124m    192.168.11.165   k8s-worker01   &lt;none&gt;           &lt;none&gt;<br>kube-proxy-pj2t5                       1/1     Running   0          124m    192.168.11.166   k8s-worker02   &lt;none&gt;           &lt;none&gt;<br>kube-scheduler-k8s-master01            1/1     Running   0          3h44m   192.168.11.161   k8s-master01   &lt;none&gt;           &lt;none&gt;<br></code></pre></td></tr></table></figure>\n\n\n\n<h1 id=\"五、部署Nginx应用验证K8S集群可用性\"><a href=\"#五、部署Nginx应用验证K8S集群可用性\" class=\"headerlink\" title=\"五、部署Nginx应用验证K8S集群可用性\"></a>五、部署Nginx应用验证K8S集群可用性</h1><p>本章以Nginx为例，先添加nginx应用配置文件nginx.yaml，再添加相关应用配置</p>\n<h2 id=\"5-1-配置NginxWeb部署配置文件nginx-website-yaml\"><a href=\"#5-1-配置NginxWeb部署配置文件nginx-website-yaml\" class=\"headerlink\" title=\"5.1 配置NginxWeb部署配置文件nginx-website.yaml\"></a>5.1 配置NginxWeb部署配置文件nginx-website.yaml</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># nano /home/acanx/nginx-website.yaml</span><br></code></pre></td></tr></table></figure>\n\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs yaml\"><span class=\"hljs-meta\">---</span><br><span class=\"hljs-attr\">apiVersion:</span> <span class=\"hljs-string\">apps/v1</span><br><span class=\"hljs-attr\">kind:</span> <span class=\"hljs-string\">Deployment</span><br><span class=\"hljs-attr\">metadata:</span><br>  <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">nginxweb</span><br><span class=\"hljs-attr\">spec:</span><br>  <span class=\"hljs-attr\">selector:</span><br>    <span class=\"hljs-attr\">matchLabels:</span><br>      <span class=\"hljs-attr\">app:</span> <span class=\"hljs-string\">nginxwebsite</span><br>  <span class=\"hljs-attr\">replicas:</span> <span class=\"hljs-number\">3</span><br>  <span class=\"hljs-attr\">template:</span><br>    <span class=\"hljs-attr\">metadata:</span><br>      <span class=\"hljs-attr\">labels:</span><br>        <span class=\"hljs-attr\">app:</span> <span class=\"hljs-string\">nginxwebsite</span><br>    <span class=\"hljs-attr\">spec:</span><br>      <span class=\"hljs-attr\">containers:</span><br>      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">nginxwebsite</span><br>        <span class=\"hljs-attr\">image:</span> <span class=\"hljs-string\">nginx:latest</span><br>        <span class=\"hljs-attr\">imagePullPolicy:</span> <span class=\"hljs-string\">IfNotPresent</span><br>        <span class=\"hljs-attr\">ports:</span><br>        <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">containerPort:</span> <span class=\"hljs-number\">80</span><br><span class=\"hljs-meta\">---</span><br><span class=\"hljs-attr\">apiVersion:</span> <span class=\"hljs-string\">v1</span><br><span class=\"hljs-attr\">kind:</span> <span class=\"hljs-string\">Service</span><br><span class=\"hljs-attr\">metadata:</span><br>  <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">nginxweb-service</span><br><span class=\"hljs-attr\">spec:</span><br>  <span class=\"hljs-attr\">externalTrafficPolicy:</span> <span class=\"hljs-string\">Cluster</span><br>  <span class=\"hljs-attr\">selector:</span><br>    <span class=\"hljs-attr\">app:</span> <span class=\"hljs-string\">nginxwebsite</span><br>  <span class=\"hljs-attr\">ports:</span><br>  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">protocol:</span> <span class=\"hljs-string\">TCP</span><br>    <span class=\"hljs-attr\">port:</span> <span class=\"hljs-number\">80</span><br>    <span class=\"hljs-attr\">targetPort:</span> <span class=\"hljs-number\">80</span><br>    <span class=\"hljs-attr\">nodePort:</span> <span class=\"hljs-number\">30080</span><br>  <span class=\"hljs-attr\">type:</span> <span class=\"hljs-string\">NodePort</span><br></code></pre></td></tr></table></figure>\n\n\n<h2 id=\"5-2-执行命令部署nginx服务\"><a href=\"#5-2-执行命令部署nginx服务\" class=\"headerlink\" title=\"5.2 执行命令部署nginx服务\"></a>5.2 执行命令部署nginx服务</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># kubectl apply -f /home/acanx/nginx-website.yaml</span><br></code></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs plain\">deployment.apps&#x2F;nginxweb created<br>service&#x2F;nginxweb-service created<br></code></pre></td></tr></table></figure>\n\n\n<h2 id=\"5-3-检查部署结果\"><a href=\"#5-3-检查部署结果\" class=\"headerlink\" title=\"5.3 检查部署结果\"></a>5.3 检查部署结果</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># kubectl get deployment</span><br><br>NAME       READY   UP-TO-DATE   AVAILABLE   AGE<br>nginxweb   0/3     3            0           2m35s<br></code></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># kubectl get pods</span><br><br>NAME                       READY   STATUS              RESTARTS   AGE<br>nginxweb-7c88f6c77-pck4f   0/1     ContainerCreating   0          3m43s<br>nginxweb-7c88f6c77-rv76n   0/1     ContainerCreating   0          3m43s<br>nginxweb-7c88f6c77-vb8xj   0/1     ContainerCreating   0          3m43s<br></code></pre></td></tr></table></figure>\n\n\n<h3 id=\"5-3-1-测试K8S集群内访问\"><a href=\"#5-3-1-测试K8S集群内访问\" class=\"headerlink\" title=\"5.3.1 测试K8S集群内访问\"></a>5.3.1 测试K8S集群内访问</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># kubectl get service</span><br><br>NAME               TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)        AGE<br>kubernetes         ClusterIP   10.96.0.1       &lt;none&gt;        443/TCP        4h11m<br>nginxweb-service   NodePort    10.106.65.218   &lt;none&gt;        80:30080/TCP   10m<br>root@k8s-master01:~<span class=\"hljs-comment\"># curl http://10.106.65.218               // 验证在K8S集群内布访问</span><br><br>&lt;!DOCTYPE html&gt;<br>&lt;html&gt;<br>&lt;head&gt;<br>&lt;title&gt;Welcome to nginx!&lt;/title&gt;<br>&lt;style&gt;<br>html &#123; color-scheme: light dark; &#125;<br>body &#123; width: 35em; margin: 0 auto;<br>font-family: Tahoma, Verdana, Arial, sans-serif; &#125;<br>&lt;/style&gt;<br>&lt;/head&gt;<br>&lt;body&gt;<br>&lt;h1&gt;Welcome to nginx!&lt;/h1&gt;<br>&lt;p&gt;If you see this page, the nginx web server is successfully installed and<br>working. Further configuration is required.&lt;/p&gt;<br><br>&lt;p&gt;For online documentation and support please refer to<br>&lt;a href=<span class=\"hljs-string\">&quot;http://nginx.org/&quot;</span>&gt;nginx.org&lt;/a&gt;.&lt;br/&gt;<br>Commercial support is available at<br>&lt;a href=<span class=\"hljs-string\">&quot;http://nginx.com/&quot;</span>&gt;nginx.com&lt;/a&gt;.&lt;/p&gt;<br><br>&lt;p&gt;&lt;em&gt;Thank you <span class=\"hljs-keyword\">for</span> using nginx.&lt;/em&gt;&lt;/p&gt;<br>&lt;/body&gt;<br>&lt;/html&gt;<br></code></pre></td></tr></table></figure>\n\n<h3 id=\"5-3-2-测试集群外访问\"><a href=\"#5-3-2-测试集群外访问\" class=\"headerlink\" title=\"5.3.2 测试集群外访问\"></a>5.3.2 测试集群外访问</h3><p>打开集群外的局域网内内主机，正常情况下集群内任意一个节点IP加对应端口号都可以访问，实际分别测试访问 <a href=\"http://192.168.11.161:30080/\">http://192.168.11.161:30080/</a> <a href=\"http://192.168.11.165:30080/\">http://192.168.11.165:30080/</a>  <a href=\"http://192.168.11.166:30080/\">http://192.168.11.166:30080/</a> 页面，以上三个url链接均可以正常打开。</p>\n<p>效果如下图所示：</p>\n<p><img src=\"/Node/imgs/03_02/Nginx-K8SMaster01.png\" alt=\"Master01\"><br><img src=\"/Node/imgs/03_02/Nginx-K8SWorker01.png\" alt=\"Worker01\"><br><img src=\"/Node/imgs/03_02/Nginx-K8SWorker02.png\" alt=\"Worker02\"></p>\n<p>上述页面可以正常显示则说明nginx演示应用部署成功！</p>\n<h1 id=\"六、-部署Kubernetes-Dashboard应用\"><a href=\"#六、-部署Kubernetes-Dashboard应用\" class=\"headerlink\" title=\"六、 部署Kubernetes Dashboard应用\"></a>六、 部署Kubernetes Dashboard应用</h1><ul>\n<li><a href=\"https://kubernetes.io/zh-cn/docs/tasks/access-application-cluster/web-ui-dashboard/\">部署和访问 Kubernetes 仪表板（Dashboard）</a></li>\n</ul>\n<h2 id=\"6-1-安装Helm\"><a href=\"#6-1-安装Helm\" class=\"headerlink\" title=\"6.1 安装Helm\"></a>6.1 安装Helm</h2><h3 id=\"6-1-1-Helm介绍及下载\"><a href=\"#6-1-1-Helm介绍及下载\" class=\"headerlink\" title=\"6.1.1 Helm介绍及下载\"></a>6.1.1 Helm介绍及下载</h3><p>Helm 是查找、分享和使用软件构建 Kubernetes 的最优方式。</p>\n<ul>\n<li>官网 <a href=\"https://helm.sh/\">https://helm.sh/</a></li>\n<li>项目地址 <a href=\"https://github.com/helm/helm\">https://github.com/helm/helm</a></li>\n<li>Helm安装文档 <a href=\"https://helm.sh/zh/docs/intro/install/\">https://helm.sh/zh/docs/intro/install/</a></li>\n</ul>\n<h3 id=\"6-1-2-Helm安装\"><a href=\"#6-1-2-Helm安装\" class=\"headerlink\" title=\"6.1.2 Helm安装\"></a>6.1.2 Helm安装</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># wget https://get.helm.sh/helm-v3.17.2-linux-amd64.tar.gz   # 下载文件</span><br><br>root@k8s-master01:~<span class=\"hljs-comment\"># tar -zxvf /home/acanx/helm-v3.0.0-linux-amd64.tar.gz         # 解压文件</span><br><br>root@k8s-master01:~<span class=\"hljs-comment\"># sudo mv linux-amd64/helm /usr/local/bin/helm                    # 移动到指定目录</span><br>root@k8s-master01:~<span class=\"hljs-comment\"># sudo mv /home/acanx/helm /usr/local/bin/helm                    # 移动到指定目录</span><br><br>root@k8s-master01:~<span class=\"hljs-comment\"># ls -l /usr/local/bin/helm</span><br><br>root@k8s-master01:~<span class=\"hljs-comment\"># chmod 755 /usr/local/bin/helm</span><br><br>root@k8s-master01:~<span class=\"hljs-comment\"># helm </span><br></code></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># helm</span><br><br>The Kubernetes package manager<br><br>Common actions <span class=\"hljs-keyword\">for</span> Helm:<br><br>- helm search:    search <span class=\"hljs-keyword\">for</span> charts<br>- helm pull:      download a chart to your <span class=\"hljs-built_in\">local</span> directory to view<br>- helm install:   upload the chart to Kubernetes<br>- helm list:      list releases of charts<br><br>Environment variables:<br><br>| Name                               | Description                                                                                                |<br>|------------------------------------|------------------------------------------------------------------------------------------------------------|<br>| <span class=\"hljs-variable\">$HELM_CACHE_HOME</span>                   | <span class=\"hljs-built_in\">set</span> an alternative location <span class=\"hljs-keyword\">for</span> storing cached files.                                                      |<br>| <span class=\"hljs-variable\">$HELM_CONFIG_HOME</span>                  | <span class=\"hljs-built_in\">set</span> an alternative location <span class=\"hljs-keyword\">for</span> storing Helm configuration.                                                |<br>| <span class=\"hljs-variable\">$HELM_DATA_HOME</span>                    | <span class=\"hljs-built_in\">set</span> an alternative location <span class=\"hljs-keyword\">for</span> storing Helm data.                                                         |<br>| <span class=\"hljs-variable\">$HELM_DEBUG</span>                        | indicate whether or not Helm is running <span class=\"hljs-keyword\">in</span> Debug mode                                                      |<br>| <span class=\"hljs-variable\">$HELM_DRIVER</span>                       | <span class=\"hljs-built_in\">set</span> the backend storage driver. Values are: configmap, secret, memory, sql.                                |<br>| <span class=\"hljs-variable\">$HELM_DRIVER_SQL_CONNECTION_STRING</span> | <span class=\"hljs-built_in\">set</span> the connection string the SQL storage driver should use.                                               |<br>| <span class=\"hljs-variable\">$HELM_MAX_HISTORY</span>                  | <span class=\"hljs-built_in\">set</span> the maximum number of helm release <span class=\"hljs-built_in\">history</span>.                                                            |<br>| <span class=\"hljs-variable\">$HELM_NAMESPACE</span>                    | <span class=\"hljs-built_in\">set</span> the namespace used <span class=\"hljs-keyword\">for</span> the helm operations.                                                            |<br>| <span class=\"hljs-variable\">$HELM_NO_PLUGINS</span>                   | <span class=\"hljs-built_in\">disable</span> plugins. Set HELM_NO_PLUGINS=1 to <span class=\"hljs-built_in\">disable</span> plugins.                                                 |<br>| <span class=\"hljs-variable\">$HELM_PLUGINS</span>                      | <span class=\"hljs-built_in\">set</span> the path to the plugins directory                                                                      |<br>| <span class=\"hljs-variable\">$HELM_REGISTRY_CONFIG</span>              | <span class=\"hljs-built_in\">set</span> the path to the registry config file.                                                                  |<br>| <span class=\"hljs-variable\">$HELM_REPOSITORY_CACHE</span>             | <span class=\"hljs-built_in\">set</span> the path to the repository cache directory                                                             |<br>| <span class=\"hljs-variable\">$HELM_REPOSITORY_CONFIG</span>            | <span class=\"hljs-built_in\">set</span> the path to the repositories file.                                                                     |<br>| <span class=\"hljs-variable\">$KUBECONFIG</span>                        | <span class=\"hljs-built_in\">set</span> an alternative Kubernetes configuration file (default <span class=\"hljs-string\">&quot;~/.kube/config&quot;</span>)                                |<br>| <span class=\"hljs-variable\">$HELM_KUBEAPISERVER</span>                | <span class=\"hljs-built_in\">set</span> the Kubernetes API Server Endpoint <span class=\"hljs-keyword\">for</span> authentication                                                  |<br>| <span class=\"hljs-variable\">$HELM_KUBECAFILE</span>                   | <span class=\"hljs-built_in\">set</span> the Kubernetes certificate authority file.                                                             |<br>| <span class=\"hljs-variable\">$HELM_KUBEASGROUPS</span>                 | <span class=\"hljs-built_in\">set</span> the Groups to use <span class=\"hljs-keyword\">for</span> impersonation using a comma-separated list.                                      |<br>| <span class=\"hljs-variable\">$HELM_KUBEASUSER</span>                   | <span class=\"hljs-built_in\">set</span> the Username to impersonate <span class=\"hljs-keyword\">for</span> the operation.                                                         |<br>| <span class=\"hljs-variable\">$HELM_KUBECONTEXT</span>                  | <span class=\"hljs-built_in\">set</span> the name of the kubeconfig context.                                                                    |<br>| <span class=\"hljs-variable\">$HELM_KUBETOKEN</span>                    | <span class=\"hljs-built_in\">set</span> the Bearer KubeToken used <span class=\"hljs-keyword\">for</span> authentication.                                                          |<br>| <span class=\"hljs-variable\">$HELM_KUBEINSECURE_SKIP_TLS_VERIFY</span> | indicate <span class=\"hljs-keyword\">if</span> the Kubernetes API server<span class=\"hljs-string\">&#x27;s certificate validation should be skipped (insecure)                |</span><br><span class=\"hljs-string\">| $HELM_KUBETLS_SERVER_NAME          | set the server name used to validate the Kubernetes API server certificate                                 |</span><br><span class=\"hljs-string\">| $HELM_BURST_LIMIT                  | set the default burst limit in the case the server contains many CRDs (default 100, -1 to disable)         |</span><br><span class=\"hljs-string\">| $HELM_QPS                          | set the Queries Per Second in cases where a high number of calls exceed the option for higher burst values |</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">Helm stores cache, configuration, and data based on the following configuration order:</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">- If a HELM_*_HOME environment variable is set, it will be used</span><br><span class=\"hljs-string\">- Otherwise, on systems supporting the XDG base directory specification, the XDG variables will be used</span><br><span class=\"hljs-string\">- When no other location is set a default location will be used based on the operating system</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">By default, the default directories depend on the Operating System. The defaults are listed below:</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">| Operating System | Cache Path                | Configuration Path             | Data Path               |</span><br><span class=\"hljs-string\">|------------------|---------------------------|--------------------------------|-------------------------|</span><br><span class=\"hljs-string\">| Linux            | $HOME/.cache/helm         | $HOME/.config/helm             | $HOME/.local/share/helm |</span><br><span class=\"hljs-string\">| macOS            | $HOME/Library/Caches/helm | $HOME/Library/Preferences/helm | $HOME/Library/helm      |</span><br><span class=\"hljs-string\">| Windows          | %TEMP%\\helm               | %APPDATA%\\helm                 | %APPDATA%\\helm          |</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">Usage:</span><br><span class=\"hljs-string\">  helm [command]</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">Available Commands:</span><br><span class=\"hljs-string\">  completion  generate autocompletion scripts for the specified shell</span><br><span class=\"hljs-string\">  create      create a new chart with the given name</span><br><span class=\"hljs-string\">  dependency  manage a chart&#x27;</span>s dependencies<br>  env         helm client environment information<br>  get         download extended information of a named release<br>  <span class=\"hljs-built_in\">help</span>        Help about any <span class=\"hljs-built_in\">command</span><br>  <span class=\"hljs-built_in\">history</span>     fetch release <span class=\"hljs-built_in\">history</span><br>  install     install a chart<br>  lint        examine a chart <span class=\"hljs-keyword\">for</span> possible issues<br>  list        list releases<br>  package     package a chart directory into a chart archive<br>  plugin      install, list, or uninstall Helm plugins<br>  pull        download a chart from a repository and (optionally) unpack it <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">local</span> directory<br>  push        push a chart to remote<br>  registry    login to or <span class=\"hljs-built_in\">logout</span> from a registry<br>  repo        add, list, remove, update, and index chart repositories<br>  rollback    roll back a release to a previous revision<br>  search      search <span class=\"hljs-keyword\">for</span> a keyword <span class=\"hljs-keyword\">in</span> charts<br>  show        show information of a chart<br>  status      display the status of the named release<br>  template    locally render templates<br>  <span class=\"hljs-built_in\">test</span>        run tests <span class=\"hljs-keyword\">for</span> a release<br>  uninstall   uninstall a release<br>  upgrade     upgrade a release<br>  verify      verify that a chart at the given path has been signed and is valid<br>  version     <span class=\"hljs-built_in\">print</span> the client version information<br><br>Flags:<br>      --burst-limit int                 client-side default throttling <span class=\"hljs-built_in\">limit</span> (default 100)<br>      --debug                           <span class=\"hljs-built_in\">enable</span> verbose output<br>  -h, --<span class=\"hljs-built_in\">help</span>                            <span class=\"hljs-built_in\">help</span> <span class=\"hljs-keyword\">for</span> helm<br>      --kube-apiserver string           the address and the port <span class=\"hljs-keyword\">for</span> the Kubernetes API server<br>      --kube-as-group stringArray       group to impersonate <span class=\"hljs-keyword\">for</span> the operation, this flag can be repeated to specify multiple groups.<br>      --kube-as-user string             username to impersonate <span class=\"hljs-keyword\">for</span> the operation<br>      --kube-ca-file string             the certificate authority file <span class=\"hljs-keyword\">for</span> the Kubernetes API server connection<br>      --kube-context string             name of the kubeconfig context to use<br>      --kube-insecure-skip-tls-verify   <span class=\"hljs-keyword\">if</span> <span class=\"hljs-literal\">true</span>, the Kubernetes API server<span class=\"hljs-string\">&#x27;s certificate will not be checked for validity. This will make your HTTPS connections insecure</span><br><span class=\"hljs-string\">      --kube-tls-server-name string     server name to use for Kubernetes API server certificate validation. If it is not provided, the hostname used to contact the server is used</span><br><span class=\"hljs-string\">      --kube-token string               bearer token used for authentication</span><br><span class=\"hljs-string\">      --kubeconfig string               path to the kubeconfig file</span><br><span class=\"hljs-string\">  -n, --namespace string                namespace scope for this request</span><br><span class=\"hljs-string\">      --qps float32                     queries per second used when communicating with the Kubernetes API, not including bursting</span><br><span class=\"hljs-string\">      --registry-config string          path to the registry config file (default &quot;/root/.config/helm/registry/config.json&quot;)</span><br><span class=\"hljs-string\">      --repository-cache string         path to the directory containing cached repository indexes (default &quot;/root/.cache/helm/repository&quot;)</span><br><span class=\"hljs-string\">      --repository-config string        path to the file containing repository names and URLs (default &quot;/root/.config/helm/repositories.yaml&quot;)</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">Use &quot;helm [command] --help&quot; for more information about a command.</span><br><span class=\"hljs-string\">root@k8s-master01:~# </span><br></code></pre></td></tr></table></figure>\n\n<p>若输出上述内容，则说明安装成功</p>\n<h2 id=\"6-2-安装kubernetes-dashboard\"><a href=\"#6-2-安装kubernetes-dashboard\" class=\"headerlink\" title=\"6.2 安装kubernetes-dashboard\"></a>6.2 安装kubernetes-dashboard</h2><h3 id=\"6-2-1-添加-kubernetes-dashboard-仓库\"><a href=\"#6-2-1-添加-kubernetes-dashboard-仓库\" class=\"headerlink\" title=\"6.2.1 添加 kubernetes-dashboard 仓库\"></a>6.2.1 添加 kubernetes-dashboard 仓库</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">helm repo add kubernetes-dashboard https://kubernetes.github.io/dashboard/<br></code></pre></td></tr></table></figure>\n\n<ul>\n<li>/root/.cache/helm/repository/kubernetes-dashboard-charts.txt</li>\n<li>/root/.cache/helm/repository/kubernetes-dashboard-index.yaml</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~/.cache/helm/repository<span class=\"hljs-comment\"># helm repo list</span><br><br>NAME                \tURL                                    <br>kubernetes-dashboard\thttps://kubernetes.github.io/dashboard/<br>root@k8s-master01:~/.cache/helm/repository<span class=\"hljs-comment\"># </span><br></code></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"6-2-2-使用-kubernetes-dashboard-Chart-部署名为“kubernetes-dashboard”-的-Helm-Release\"><a href=\"#6-2-2-使用-kubernetes-dashboard-Chart-部署名为“kubernetes-dashboard”-的-Helm-Release\" class=\"headerlink\" title=\"6.2.2 使用 kubernetes-dashboard Chart 部署名为“kubernetes-dashboard” 的 Helm Release\"></a>6.2.2 使用 kubernetes-dashboard Chart 部署名为“kubernetes-dashboard” 的 Helm Release</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">helm upgrade --install kubernetes-dashboard kubernetes-dashboard/kubernetes-dashboard --create-namespace --namespace kubernetes-dashboard<br></code></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># helm upgrade --install kubernetes-dashboard kubernetes-dashboard/kubernetes-dashboard --create-namespace --namespace kubernetes-dashboard</span><br><br>Release <span class=\"hljs-string\">&quot;kubernetes-dashboard&quot;</span> does not exist. Installing it now.<br>NAME: kubernetes-dashboard<br>LAST DEPLOYED: Sun Mar 23 17:44:31 2025<br>NAMESPACE: kubernetes-dashboard<br>STATUS: deployed<br>REVISION: 1<br>TEST SUITE: None<br>NOTES:<br>*************************************************************************************************<br>*** PLEASE BE PATIENT: Kubernetes Dashboard may need a few minutes to get up and become ready ***<br>*************************************************************************************************<br><br>Congratulations! You have just installed Kubernetes Dashboard <span class=\"hljs-keyword\">in</span> your cluster.<br><br>To access Dashboard run:<br>  kubectl -n kubernetes-dashboard port-forward svc/kubernetes-dashboard-kong-proxy 8443:443<br><br>NOTE: In <span class=\"hljs-keyword\">case</span> port-forward <span class=\"hljs-built_in\">command</span> does not work, make sure that kong service name is correct.<br>      Check the services <span class=\"hljs-keyword\">in</span> Kubernetes Dashboard namespace using:<br>        kubectl -n kubernetes-dashboard get svc<br><br>Dashboard will be available at:<br>  https://localhost:8443<br>root@k8s-master01:~<span class=\"hljs-comment\"># </span><br><br><br><br><span class=\"hljs-comment\"># 注意：以下命令未做验证，后续可以测试确认</span><br><span class=\"hljs-comment\"># 我的集群使用默认参数安装 kubernetes-dashboard-kong 出现异常 8444 端口占用</span><br><span class=\"hljs-comment\"># 使用下面的命令进行安装，在安装时关闭kong.tls功能</span><br>root@k8s-master01:~<span class=\"hljs-comment\"># helm upgrade --install kubernetes-dashboard kubernetes-dashboard/kubernetes-dashboard --namespace kubernetes-dashboard --set kong.admin.tls.enabled=false   # 原文链接：https://blog.csdn.net/qq_33921750/article/details/136668014</span><br></code></pre></td></tr></table></figure>\n\n<h4 id=\"查看kubernetes-dashboard相关的pod的安装情况\"><a href=\"#查看kubernetes-dashboard相关的pod的安装情况\" class=\"headerlink\" title=\"查看kubernetes-dashboard相关的pod的安装情况\"></a>查看kubernetes-dashboard相关的pod的安装情况</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># watch kubectl get pod -A</span><br><br>NAMESPACE              NAME                                                    READY   STATUS              RESTARTS   AGE<br>calico-apiserver       calico-apiserver-7b7bbf4d75-b77ph                       1/1     Running             0          18h<br>calico-apiserver       calico-apiserver-7b7bbf4d75-gqq5w                       1/1     Running             0          18h<br>calico-system          calico-kube-controllers-cf49d8944-6zv2z                 1/1     Running             0          18h<br>calico-system          calico-node-2nfvf                                       1/1     Running             0          18h<br>calico-system          calico-node-nxhvj                                       1/1     Running             0          18h<br>calico-system          calico-node-v9lp9                                       1/1     Running             0          18h<br>calico-system          calico-typha-7b6f98bc78-49bf5                           1/1     Running             0          18h<br>calico-system          calico-typha-7b6f98bc78-7vhd6                           1/1     Running             0          18h<br>calico-system          csi-node-driver-6nbvr                                   2/2     Running             0          18h<br>calico-system          csi-node-driver-9cqq5                                   2/2     Running             0          18h<br>calico-system          csi-node-driver-9pm4t                                   2/2     Running             0          18h<br>default                nginxweb-7c88f6c77-pck4f                                1/1     Running             0          17h<br>default                nginxweb-7c88f6c77-rv76n                                1/1     Running             0          17h<br>default                nginxweb-7c88f6c77-vb8xj                                1/1     Running             0          17h<br>kube-system            coredns-6766b7b6bb-6dtl7                                1/1     Running             0          21h<br>kube-system            coredns-6766b7b6bb-lrpw7                                1/1     Running             0          21h<br>kube-system            etcd-k8s-master01                                       1/1     Running             0          21h<br>kube-system            kube-apiserver-k8s-master01                             1/1     Running             0          21h<br>kube-system            kube-controller-manager-k8s-master01                    1/1     Running             0          21h<br>kube-system            kube-proxy-6g8dn                                        1/1     Running             0          21h<br>kube-system            kube-proxy-kmzv6                                        1/1     Running             0          19h<br>kube-system            kube-proxy-pj2t5                                        1/1     Running             0          19h<br>kube-system            kube-scheduler-k8s-master01                             1/1     Running             0          21h<br>kubernetes-dashboard   kubernetes-dashboard-api-c787c9d97-5rqvp                0/1     ContainerCreating   0          2m35s<br>kubernetes-dashboard   kubernetes-dashboard-auth-7ff7855689-vmltw              0/1     ContainerCreating   0          2m35s<br>kubernetes-dashboard   kubernetes-dashboard-kong-79867c9c48-txfql              0/1     Init:0/1            0          2m35s<br>kubernetes-dashboard   kubernetes-dashboard-metrics-scraper-84655b9bd8-mq8h7   0/1     ContainerCreating   0          2m35s<br>kubernetes-dashboard   kubernetes-dashboard-web-658946f7f9-crj69               0/1     ContainerCreating   0          2m35s<br>tigera-operator        tigera-operator-ccfc44587-vswlt                         1/1     Running             0          19h<br><br><br><br>root@k8s-master01:~/.cache/helm/repository<span class=\"hljs-comment\"># kubectl get pod -A</span><br><br>NAMESPACE              NAME                                                    READY   STATUS    RESTARTS   AGE<br>calico-apiserver       calico-apiserver-7b7bbf4d75-b77ph                       1/1     Running   0          19h<br>calico-apiserver       calico-apiserver-7b7bbf4d75-gqq5w                       1/1     Running   0          19h<br>calico-system          calico-kube-controllers-cf49d8944-6zv2z                 1/1     Running   0          19h<br>calico-system          calico-node-2nfvf                                       1/1     Running   0          19h<br>calico-system          calico-node-nxhvj                                       1/1     Running   0          19h<br>calico-system          calico-node-v9lp9                                       1/1     Running   0          19h<br>calico-system          calico-typha-7b6f98bc78-49bf5                           1/1     Running   0          19h<br>calico-system          calico-typha-7b6f98bc78-7vhd6                           1/1     Running   0          19h<br>calico-system          csi-node-driver-6nbvr                                   2/2     Running   0          19h<br>calico-system          csi-node-driver-9cqq5                                   2/2     Running   0          19h<br>calico-system          csi-node-driver-9pm4t                                   2/2     Running   0          19h<br>default                nginxweb-7c88f6c77-pck4f                                1/1     Running   0          18h<br>default                nginxweb-7c88f6c77-rv76n                                1/1     Running   0          18h<br>default                nginxweb-7c88f6c77-vb8xj                                1/1     Running   0          18h<br>kube-system            coredns-6766b7b6bb-6dtl7                                1/1     Running   0          22h<br>kube-system            coredns-6766b7b6bb-lrpw7                                1/1     Running   0          22h<br>kube-system            etcd-k8s-master01                                       1/1     Running   0          22h<br>kube-system            kube-apiserver-k8s-master01                             1/1     Running   0          22h<br>kube-system            kube-controller-manager-k8s-master01                    1/1     Running   0          22h<br>kube-system            kube-proxy-6g8dn                                        1/1     Running   0          22h<br>kube-system            kube-proxy-kmzv6                                        1/1     Running   0          20h<br>kube-system            kube-proxy-pj2t5                                        1/1     Running   0          20h<br>kube-system            kube-scheduler-k8s-master01                             1/1     Running   0          22h<br>kubernetes-dashboard   kubernetes-dashboard-api-c787c9d97-5rqvp                1/1     Running   0          41m<br>kubernetes-dashboard   kubernetes-dashboard-auth-7ff7855689-vmltw              1/1     Running   0          41m<br>kubernetes-dashboard   kubernetes-dashboard-kong-79867c9c48-txfql              1/1     Running   0          41m<br>kubernetes-dashboard   kubernetes-dashboard-metrics-scraper-84655b9bd8-mq8h7   1/1     Running   0          41m<br>kubernetes-dashboard   kubernetes-dashboard-web-658946f7f9-crj69               1/1     Running   0          41m<br>tigera-operator        tigera-operator-ccfc44587-vswlt                         1/1     Running   0          20h<br></code></pre></td></tr></table></figure>\n\n\n<h2 id=\"6-3-访问Dashboard前的准备\"><a href=\"#6-3-访问Dashboard前的准备\" class=\"headerlink\" title=\"6.3 访问Dashboard前的准备\"></a>6.3 访问Dashboard前的准备</h2><p>本节参考自官方文档 </p>\n<ul>\n<li><a href=\"https://github.com/kubernetes/dashboard/blob/master/docs/user/access-control/creating-sample-user.md\">创建示例用户</a></li>\n</ul>\n<h3 id=\"6-3-1-创建示例用户-service-account\"><a href=\"#6-3-1-创建示例用户-service-account\" class=\"headerlink\" title=\"6.3.1 创建示例用户 service-account\"></a>6.3.1 创建示例用户 service-account</h3><p>创建dashboard-service-account.yaml文件</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs yaml\"><span class=\"hljs-attr\">apiVersion:</span> <span class=\"hljs-string\">v1</span><br><span class=\"hljs-attr\">kind:</span> <span class=\"hljs-string\">ServiceAccount</span><br><span class=\"hljs-attr\">metadata:</span><br>  <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">admin-user</span><br>  <span class=\"hljs-attr\">namespace:</span> <span class=\"hljs-string\">kubernetes-dashboard</span><br></code></pre></td></tr></table></figure>\n\n<p>创建示例用户service-account命令</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># kubectl create -f dashboard-service-account.yaml</span><br></code></pre></td></tr></table></figure>\n\n\n<h3 id=\"6-3-2-创建-ClusterRoleBinding\"><a href=\"#6-3-2-创建-ClusterRoleBinding\" class=\"headerlink\" title=\"6.3.2 创建 ClusterRoleBinding\"></a>6.3.2 创建 ClusterRoleBinding</h3><p>创建dashboard-cluster-role-binding.yaml文件</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs yaml\"><span class=\"hljs-attr\">apiVersion:</span> <span class=\"hljs-string\">rbac.authorization.k8s.io/v1</span><br><span class=\"hljs-attr\">kind:</span> <span class=\"hljs-string\">ClusterRoleBinding</span><br><span class=\"hljs-attr\">metadata:</span><br>  <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">admin-user</span><br><span class=\"hljs-attr\">roleRef:</span><br>  <span class=\"hljs-attr\">apiGroup:</span> <span class=\"hljs-string\">rbac.authorization.k8s.io</span><br>  <span class=\"hljs-attr\">kind:</span> <span class=\"hljs-string\">ClusterRole</span><br>  <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">cluster-admin</span><br><span class=\"hljs-attr\">subjects:</span><br><span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">kind:</span> <span class=\"hljs-string\">ServiceAccount</span><br>  <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">admin-user</span><br>  <span class=\"hljs-attr\">namespace:</span> <span class=\"hljs-string\">kubernetes-dashboard</span><br></code></pre></td></tr></table></figure>\n\n<p>创建 ClusterRoleBinding</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\"><span class=\"hljs-comment\"># 创建 ClusterRoleBinding</span><br>root@k8s-master01:~<span class=\"hljs-comment\"># kubectl create -f dashboard-cluster-role-binding.yaml</span><br></code></pre></td></tr></table></figure>\n\n\n\n<p>创建dashboard-admin-user.yaml 文件</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs yaml\"><span class=\"hljs-attr\">apiVersion:</span> <span class=\"hljs-string\">v1</span><br><span class=\"hljs-attr\">kind:</span> <span class=\"hljs-string\">ServiceAccount</span><br><span class=\"hljs-attr\">metadata:</span><br>  <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">admin-user</span><br>  <span class=\"hljs-attr\">namespace:</span> <span class=\"hljs-string\">kubernetes-dashboard</span><br><span class=\"hljs-meta\">---</span><br><span class=\"hljs-attr\">apiVersion:</span> <span class=\"hljs-string\">rbac.authorization.k8s.io/v1</span><br><span class=\"hljs-attr\">kind:</span> <span class=\"hljs-string\">ClusterRoleBinding</span><br><span class=\"hljs-attr\">metadata:</span><br>  <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">admin-user</span><br><span class=\"hljs-attr\">roleRef:</span><br>  <span class=\"hljs-attr\">apiGroup:</span> <span class=\"hljs-string\">rbac.authorization.k8s.io</span><br>  <span class=\"hljs-attr\">kind:</span> <span class=\"hljs-string\">ClusterRole</span><br>  <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">cluster-admin</span><br><span class=\"hljs-attr\">subjects:</span><br><span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">kind:</span> <span class=\"hljs-string\">ServiceAccount</span><br>  <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">admin-user</span><br>  <span class=\"hljs-attr\">namespace:</span> <span class=\"hljs-string\">kubernetes-dashboard</span><br></code></pre></td></tr></table></figure>\n\n<p>创建 ServiceAccount、ClusterRoleBinding</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~/.cache/helm/repository<span class=\"hljs-comment\"># kubectl create -f /home/acanx/Dashboard/dashboard-admin-user.yaml</span><br><br>serviceaccount/admin-user created<br>clusterrolebinding.rbac.authorization.k8s.io/admin-user created<br></code></pre></td></tr></table></figure>\n\n<h4 id=\"6-3-3-获取-ServiceAccount-的-Bearer-Token（短期访问的Token令牌）\"><a href=\"#6-3-3-获取-ServiceAccount-的-Bearer-Token（短期访问的Token令牌）\" class=\"headerlink\" title=\"6.3.3 获取 ServiceAccount 的 Bearer Token（短期访问的Token令牌）\"></a>6.3.3 获取 ServiceAccount 的 Bearer Token（短期访问的Token令牌）</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\"><span class=\"hljs-comment\"># 生成toke命令</span><br>root@k8s-master01:~/.cache/helm/repository<span class=\"hljs-comment\"># kubectl -n kubernetes-dashboard create token admin-user</span><br><br>eyJhbGciOiJSUzI1NiIsImtpZCI6IjZPMURRc2RoVjl0YWJnUGU2RDVyLTRKblhybnhBaG1oS3JoVGNBTjh6UkkifQ.eyJhdWQiOlsiaHR0cHM6Ly9rdWJlcm5ldGVzLmRlZmF1bHQuc3ZjLmNsdXN0ZXIubG9jYWwiXSwiZXhwIjoxNzQyNzMxMjUwLCJpYXQiOjE3NDI3Mjc2NTAsImlzcyI6Imh0dHBzOi8va3ViZXJuZXRlcy5kZWZhdWx0LnN2Yy5jbHVzdGVyLmxvY2FsIiwianRpIjoiYWM2NWZiNTItNjViMi00ZmQ5LWI4OTctMzQ4NjI4N2UzYTlmIiwia3ViZXJuZXRlcy5pbyI6eyJuYW1lc3BhY2UiOiJrdWJlcm5ldGVzLWRhc2hib2FyZCIsInNlcnZpY2VhY2NvdW50Ijp7Im5hbWUiOiJhZG1pbi11c2VyIiwidWlkIjoiNTBhNzgwZTYtODgzOC00ODI1LTk5ODktMzdhYTE0ZjM5ZjlkIn19LCJuYmYiOjE3NDI3Mjc2NTAsInN1YiI6InN5c3RlbTpzZXJ2aWNlYWNjb3VudDprdWJlcm5ldGVzLWRhc2hib2FyZDphZG1pbi11c2VyIn0.9j0DPg2sKuVfODjWBxxXN3-r1GmXCGV58LULx81fiCwE5IdCp0LK4to0T35c55yiZjkW2fc7l01k6V7uKFTCGiJ3TDJn_1JJe5lZpWBWXSWoO_q-1nkMgniGPowieHEny3ZU1wm-Kk-nrr2CYZKhXShGDbRxpnjAPf1X0aB6lAzPt59GKVYpPaMYhcEBMMT_ASZrGLYrNR31UpbEXf2UP9Cgyh9m5vpA48FOJKZNt8FRq20egHWlWCw4a4PPb261w81vcWWB1bwTHIw-8CyNZjptrPVX06ch4DT-eX5No5jr8kh2gCiq--bARESxjgDjCebBS8O96NpKRWtQMQbFAQ<br></code></pre></td></tr></table></figure>\n\n<p>获取到的toke是类似上述的字符串</p>\n<h4 id=\"6-3-4-获取-ServiceAccount-的长期-Bearer-Token-（长期Token）\"><a href=\"#6-3-4-获取-ServiceAccount-的长期-Bearer-Token-（长期Token）\" class=\"headerlink\" title=\"6.3.4 获取 ServiceAccount 的长期 Bearer Token （长期Token）\"></a>6.3.4 获取 ServiceAccount 的长期 Bearer Token （长期Token）</h4><ul>\n<li>创建dashboard-secret.yaml文件</li>\n</ul>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs yaml\"><span class=\"hljs-attr\">apiVersion:</span> <span class=\"hljs-string\">v1</span><br><span class=\"hljs-attr\">kind:</span> <span class=\"hljs-string\">Secret</span><br><span class=\"hljs-attr\">metadata:</span><br>  <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">admin-user</span><br>  <span class=\"hljs-attr\">namespace:</span> <span class=\"hljs-string\">kubernetes-dashboard</span><br>  <span class=\"hljs-attr\">annotations:</span><br>    <span class=\"hljs-attr\">kubernetes.io/service-account.name:</span> <span class=\"hljs-string\">&quot;admin-user&quot;</span>   <br><span class=\"hljs-attr\">type:</span> <span class=\"hljs-string\">kubernetes.io/service-account-token</span>  <br></code></pre></td></tr></table></figure>\n\n<ul>\n<li>获取 ServiceAccount 的长期 Bearer Token </li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\"><span class=\"hljs-comment\"># 创建</span><br>root@k8s-master01:~<span class=\"hljs-comment\"># kubectl create -f /home/acanx/Dashboard/dashboard-secret.yaml</span><br><br><span class=\"hljs-comment\"># 获取对应的token令牌</span><br>root@k8s-master01:~<span class=\"hljs-comment\"># kubectl get secret admin-user -n kubernetes-dashboard -o jsonpath=&quot;&#123;.data.token&#125;&quot; | base64 -d</span><br><br>eyJhbGciOiJSUzI1NiIsImtpZCI6IjZPMURRc2RoVjl0YWJnUGU2RDVyLTRKblhybnhBaG1oS3JoVGNBTjh6UkkifQ.eyJpc3MiOiJrdWJlcm5ldGVzL3NlcnZpY2VhY2NvdW50Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9uYW1lc3BhY2UiOiJrdWJlcm5ldGVzLWRhc2hib2FyZCIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VjcmV0Lm5hbWUiOiJhZG1pbi11c2VyIiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9zZXJ2aWNlLWFjY291bnQubmFtZSI6ImFkbWluLXVzZXIiLCJrdWJlcm5ldGVzLmlvL3NlcnZpY2VhY2NvdW50L3NlcnZpY2UtYWNjb3VudC51aWQiOiI1MGE3ODBlNi04ODM4LTQ4MjUtOTk4OS0zN2FhMTRmMzlmOWQiLCJzdWIiOiJzeXN0ZW06c2VydmljZWFjY291bnQ6a3ViZXJuZXRlcy1kYXNoYm9hcmQ6YWRtaW4tdXNlciJ9.UG-iAoiCRrMeUePUi5ryn4tUOhFC94eTv_THHkrT_XZhUwC-IHqy9zkmi20tfQ-jnSnzy9_H9Z_auNw6Y4VtGB6pUs7srk6X9AIr4JDrScEVSMLbLXyCsdwGKbAaQJ8n2KA0J_pXibAiaQ77vCIDs9A4HXjn-T7GhoWEeswAcZF1N1SYbDyMxC-paMKb2I5CxL6pxtgWXuPCFkHxVnzeAT9Pswj-q0_Htr46U0Ieyo3dEBVGoOE4FA56UCYEnIfIv-OHXHytcxdaETrKl22EWleAYYENQy82qrdn8eCMK9ahOQyvCFORUbltJWP0hRkIRoMSGx1gD1DMHWMd6T9IRw<br></code></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"6-4-正式访问Dashboard\"><a href=\"#6-4-正式访问Dashboard\" class=\"headerlink\" title=\"6.4 正式访问Dashboard\"></a>6.4 正式访问Dashboard</h3><p>参考资料 <a href=\"https://blog.csdn.net/qq719779232/article/details/145212142\">Kubernetes 集群中安装和配置 Kubernetes Dashboard</a></p>\n<h3 id=\"6-4-1-方式一：使用-Port-Forwarding进行命令行代理\"><a href=\"#6-4-1-方式一：使用-Port-Forwarding进行命令行代理\" class=\"headerlink\" title=\"6.4.1 方式一：使用 Port Forwarding进行命令行代理\"></a>6.4.1 方式一：使用 Port Forwarding进行命令行代理</h3><p>Port Forwarding 是一种临时性的解决方案，它允许你通过本地机器上的端口直接访问集群内部的服务。这对于开发人员来说非常方便，因为他们不需要对外暴露服务即可进行调试或测试。</p>\n<h4 id=\"6-4-1-1-开启访问\"><a href=\"#6-4-1-1-开启访问\" class=\"headerlink\" title=\"6.4.1.1 开启访问\"></a>6.4.1.1 开启访问</h4><p>通过 Port Forwarding 访问 Dashboard，需要先执行如下命令：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">kubectl -n kubernetes-dashboard port-forward svc/kubernetes-dashboard 8443:443<br></code></pre></td></tr></table></figure>\n\n<p>这将Dashboard在 <a href=\"https://localhost:8443/\">https://localhost:8443</a> 上可用。</p>\n<h4 id=\"6-4-1-2-优点与缺点\"><a href=\"#6-4-1-2-优点与缺点\" class=\"headerlink\" title=\"6.4.1.2 优点与缺点\"></a>6.4.1.2 优点与缺点</h4><ul>\n<li><p>这种方式的优点在于方法简单易用，无需更改任何集群配置，适合小规模测试或个人使用。但仅限于执行命令的本地机器，它是临时的，关闭终端后连接即断开，无法在其他机器上访问，并且每次使用时都需要手动开启端口转发。</p>\n</li>\n<li><p>也就是说，无法直接在集群外部访问，此方案不适合本次（集群外访问）实际访问场景，因此需要调整采用其他方案</p>\n</li>\n</ul>\n<h3 id=\"6-4-2-方式二：修改服务类型为-NodePort\"><a href=\"#6-4-2-方式二：修改服务类型为-NodePort\" class=\"headerlink\" title=\"6.4.2 方式二：修改服务类型为 NodePort\"></a>6.4.2 方式二：修改服务类型为 NodePort</h3><h4 id=\"6-4-2-1-方法概述\"><a href=\"#6-4-2-1-方法概述\" class=\"headerlink\" title=\"6.4.2.1 方法概述\"></a>6.4.2.1 方法概述</h4><ul>\n<li><p>NodePort 允许 Kubernetes 服务在各个集群节点的特定端口上对外暴露。这使得用户能够通过任意节点的 IP 地址和指定 NodePort 进行访问 Dashboard。（范围通常是 30000-32767），从而允许外部流量通过该端口进入集群并访问指定的服务。</p>\n</li>\n<li><p>也就是支持集群外部访问</p>\n</li>\n</ul>\n<h4 id=\"6-4-2-2-开启访问\"><a href=\"#6-4-2-2-开启访问\" class=\"headerlink\" title=\"6.4.2.2 开启访问\"></a>6.4.2.2 开启访问</h4><p>编辑 Dashboard 的服务配置，将其类型更改为 NodePort：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># kubectl patch svc kubernetes-dashboard-kong-proxy -n kubernetes-dashboard --type=&#x27;json&#x27; -p &#x27;[&#123;&quot;op&quot;:&quot;replace&quot;,&quot;path&quot;:&quot;/spec/type&quot;,&quot;value&quot;:&quot;NodePort&quot;&#125;]&#x27;</span><br><span class=\"hljs-comment\"># TODO 若需要指定端口，可以指定一个固定的 nodePort：</span><br>root@k8s-master01:~<span class=\"hljs-comment\"># kubectl patch svc kubernetes-dashboard-kong-proxy -n kubernetes-dashboard --type=&#x27;json&#x27; -p &#x27;[&#123;&quot;op&quot;:&quot;add&quot;,&quot;path&quot;:&quot;/spec/ports/0/nodePort&quot;,&quot;value&quot;:30000&#125;]&#x27;</span><br></code></pre></td></tr></table></figure>\n\n<p>以下是实际操作及结果：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># kubectl patch svc kubernetes-dashboard-kong-proxy -n kubernetes-dashboard --type=&#x27;json&#x27; -p &#x27;[&#123;&quot;op&quot;:&quot;replace&quot;,&quot;path&quot;:&quot;/spec/type&quot;,&quot;value&quot;:&quot;NodePort&quot;&#125;]&#x27;</span><br><br>service/kubernetes-dashboard-kong-proxy patched<br>root@k8s-master01:~<span class=\"hljs-comment\"># kubectl get svc -A</span><br><br>NAMESPACE              NAME                                   TYPE        CLUSTER-IP       EXTERNAL-IP   PORT(S)                  AGE<br>calico-apiserver       calico-api                             ClusterIP   10.109.219.68    &lt;none&gt;        443/TCP                  21h<br>calico-system          calico-kube-controllers-metrics        ClusterIP   None             &lt;none&gt;        9094/TCP                 20h<br>calico-system          calico-typha                           ClusterIP   10.104.149.150   &lt;none&gt;        5473/TCP                 21h<br>default                kubernetes                             ClusterIP   10.96.0.1        &lt;none&gt;        443/TCP                  23h<br>default                nginxweb-service                       NodePort    10.106.65.218    &lt;none&gt;        80:30080/TCP             19h<br>kube-system            kube-dns                               ClusterIP   10.96.0.10       &lt;none&gt;        53/UDP,53/TCP,9153/TCP   23h<br>kubernetes-dashboard   kubernetes-dashboard-api               ClusterIP   10.104.42.174    &lt;none&gt;        8000/TCP                 128m<br>kubernetes-dashboard   kubernetes-dashboard-auth              ClusterIP   10.98.125.185    &lt;none&gt;        8000/TCP                 128m<br>kubernetes-dashboard   kubernetes-dashboard-external          NodePort    10.101.246.117   &lt;none&gt;        443:30011/TCP            7m8s<br>kubernetes-dashboard   kubernetes-dashboard-kong-proxy        NodePort    10.110.23.250    &lt;none&gt;        443:31094/TCP            128m<br>kubernetes-dashboard   kubernetes-dashboard-metrics-scraper   ClusterIP   10.102.211.164   &lt;none&gt;        8000/TCP                 128m<br>kubernetes-dashboard   kubernetes-dashboard-web               ClusterIP   10.107.236.126   &lt;none&gt;        8000/TCP                 128m<br><br><span class=\"hljs-comment\"># 相关的命令1</span><br>root@k8s-master01:~<span class=\"hljs-comment\"># kubectl get svc -A | grep dash</span><br><br>kubernetes-dashboard   kubernetes-dashboard-api               ClusterIP   10.104.42.174    &lt;none&gt;        8000/TCP                 166m<br>kubernetes-dashboard   kubernetes-dashboard-auth              ClusterIP   10.98.125.185    &lt;none&gt;        8000/TCP                 166m<br>kubernetes-dashboard   kubernetes-dashboard-external          NodePort    10.101.246.117   &lt;none&gt;        443:30011/TCP            44m<br>kubernetes-dashboard   kubernetes-dashboard-kong-proxy        NodePort    10.110.23.250    &lt;none&gt;        443:31094/TCP            166m<br>kubernetes-dashboard   kubernetes-dashboard-metrics-scraper   ClusterIP   10.102.211.164   &lt;none&gt;        8000/TCP                 166m<br>kubernetes-dashboard   kubernetes-dashboard-web               ClusterIP   10.107.236.126   &lt;none&gt;        8000/TCP                 166m<br><br><span class=\"hljs-comment\"># 相关的命令2</span><br>root@k8s-master01:~<span class=\"hljs-comment\"># kubectl get svc -A -n kubernetes-dashboard</span><br><br>NAMESPACE              NAME                                   TYPE        CLUSTER-IP       EXTERNAL-IP   PORT(S)                  AGE<br>calico-apiserver       calico-api                             ClusterIP   10.109.219.68    &lt;none&gt;        443/TCP                  21h<br>calico-system          calico-kube-controllers-metrics        ClusterIP   None             &lt;none&gt;        9094/TCP                 21h<br>calico-system          calico-typha                           ClusterIP   10.104.149.150   &lt;none&gt;        5473/TCP                 21h<br>default                kubernetes                             ClusterIP   10.96.0.1        &lt;none&gt;        443/TCP                  24h<br>default                nginxweb-service                       NodePort    10.106.65.218    &lt;none&gt;        80:30080/TCP             20h<br>kube-system            kube-dns                               ClusterIP   10.96.0.10       &lt;none&gt;        53/UDP,53/TCP,9153/TCP   24h<br>kubernetes-dashboard   kubernetes-dashboard-api               ClusterIP   10.104.42.174    &lt;none&gt;        8000/TCP                 165m<br>kubernetes-dashboard   kubernetes-dashboard-auth              ClusterIP   10.98.125.185    &lt;none&gt;        8000/TCP                 165m<br>kubernetes-dashboard   kubernetes-dashboard-external          NodePort    10.101.246.117   &lt;none&gt;        443:30011/TCP            44m<br>kubernetes-dashboard   kubernetes-dashboard-kong-proxy        NodePort    10.110.23.250    &lt;none&gt;        443:31094/TCP            165m<br>kubernetes-dashboard   kubernetes-dashboard-metrics-scraper   ClusterIP   10.102.211.164   &lt;none&gt;        8000/TCP                 165m<br>kubernetes-dashboard   kubernetes-dashboard-web               ClusterIP   10.107.236.126   &lt;none&gt;        8000/TCP                 165m<br><br></code></pre></td></tr></table></figure>\n\n\n\n<p>如果显示您的连接不是私密连接，在当前页面用键盘输入thisisunsafe,不是在地址栏输入，就直接输入，页面即会自动刷新进入网页。不行就多输入几次，但是要确保输入是正确的。具体请查看这篇<a href=\"https://blog.csdn.net/qq719779232/article/details/144852360\">博客</a></p>\n<h4 id=\"6-4-2-4-访问Kubernetes-Dashboard-Web页面\"><a href=\"#6-4-2-4-访问Kubernetes-Dashboard-Web页面\" class=\"headerlink\" title=\"6.4.2.4 访问Kubernetes Dashboard Web页面\"></a>6.4.2.4 访问Kubernetes Dashboard Web页面</h4><p>可以看到随机开放了31094端口访问，浏览器中打开 <a href=\"https://192.168.11.161:31094/\">https://192.168.11.161:31094</a> 测试（忽略不是私密连接的提示后）可以正常打开，输入token后能够正常登录。</p>\n<p><img src=\"/Node/imgs/03_02/Dashboard-Load.png\" alt=\"Kubernetes-Dashboard-HomePage\"></p>\n<p><img src=\"/Node/imgs/03_02/Dashboard.png\" alt=\"Kubernetes-Dashboard-HomePage\"></p>\n<h4 id=\"6-4-2-5-优点与缺点\"><a href=\"#6-4-2-5-优点与缺点\" class=\"headerlink\" title=\"6.4.2.5 优点与缺点\"></a>6.4.2.5 优点与缺点</h4><ul>\n<li><p>这种方法一旦配置完成，只要集群存在就可以持续访问，提供了长期稳定的访问途径；同时可以直接通过任意节点 IP 加上指定端口号来访问服务，易于访问。</p>\n</li>\n<li><p>但是，它也带来了较高的安全风险，如果未正确配置防火墙规则，可能会导致服务被未经授权的人访问；</p>\n</li>\n<li><p>此外，还需要选择一个未被占用的端口，因此有一定的端口限制。</p>\n</li>\n</ul>\n<h4 id=\"6-4-2-6-参考资料\"><a href=\"#6-4-2-6-参考资料\" class=\"headerlink\" title=\"6.4.2.6 参考资料\"></a>6.4.2.6 参考资料</h4><ul>\n<li><a href=\"https://github.com/kubernetes/dashboard/blob/kubernetes-dashboard-7.11.1/README.md\">kubernetes-dashboard-7.11.1/README.md</a></li>\n<li><a href=\"https://github.com/kubernetes/dashboard/tree/master/docs/user/accessing-dashboard\">访问仪表板</a></li>\n<li><a href=\"https://www.bilibili.com/video/BV15UsSeDEZA/\">69.Kubernetes(k8s)手把手教程—部署Dashboard以图形化方式管理Kubernetes</a></li>\n<li><a href=\"https://www.cnblogs.com/renshengdezheli/p/17513879.html\">Kubernetes(k8s) Web-UI界面(一)：部署和访问仪表板(Dashboard)</a></li>\n<li><a href=\"https://www.oiox.cn/index.php/archives/428/\">二进制安装Kubernetes（k8s）v1.32.0</a></li>\n</ul>\n<h3 id=\"6-5-清理和后续步骤\"><a href=\"#6-5-清理和后续步骤\" class=\"headerlink\" title=\"6.5 清理和后续步骤\"></a>6.5 清理和后续步骤</h3><p>删除管理员ServiceAccount和ClusterRoleBinding。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># kubectl -n kubernetes-dashboard delete serviceaccount admin-user</span><br>root@k8s-master01:~<span class=\"hljs-comment\"># kubectl -n kubernetes-dashboard delete clusterrolebinding admin-user</span><br></code></pre></td></tr></table></figure>\n\n<p>了解有关如何在 Kubernetes 中授予/拒绝权限的更多信息，阅读官方<a href=\"https://kubernetes.io/docs/reference/access-authn-authz/authentication/\">身份验证</a>和<a href=\"https://kubernetes.io/docs/reference/access-authn-authz/authorization/\">授权</a>文档。</p>\n<h1 id=\"七、-实际部署过程中遇到的问题\"><a href=\"#七、-实际部署过程中遇到的问题\" class=\"headerlink\" title=\"七、 实际部署过程中遇到的问题\"></a>七、 实际部署过程中遇到的问题</h1><h3 id=\"7-1-1操作系统重启后无法使用原账户登录\"><a href=\"#7-1-1操作系统重启后无法使用原账户登录\" class=\"headerlink\" title=\"7.1.1操作系统重启后无法使用原账户登录\"></a>7.1.1操作系统重启后无法使用原账户登录</h3><h3 id=\"7-1-2-kubeadm初始化失败，抛出错误\"><a href=\"#7-1-2-kubeadm初始化失败，抛出错误\" class=\"headerlink\" title=\"7.1.2 kubeadm初始化失败，抛出错误\"></a>7.1.2 kubeadm初始化失败，抛出错误</h3><h3 id=\"7-1-3-安装如遇到错误，需要修改配置，关闭kubelet\"><a href=\"#7-1-3-安装如遇到错误，需要修改配置，关闭kubelet\" class=\"headerlink\" title=\"7.1.3 安装如遇到错误，需要修改配置，关闭kubelet\"></a>7.1.3 安装如遇到错误，需要修改配置，关闭kubelet</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># sudo rm -rf /etc/kubernetes/manifests/kube-apiserver.yaml</span><br>~<span class=\"hljs-comment\"># sudo rm -rf /etc/kubernetes/manifests/kube-controller-manager.yaml</span><br>~<span class=\"hljs-comment\"># sudo rm -rf /etc/kubernetes/manifests/kube-scheduler.yaml</span><br>~<span class=\"hljs-comment\"># sudo rm -rf /etc/kubernetes/manifests/etcd.yaml</span><br><br>~<span class=\"hljs-comment\"># sudo rm -rf /etc/kubernetes/manifests/kube-apiserver.yaml &amp;&amp; sudo rm -rf /etc/kubernetes/manifests/kube-controller-manager.yaml &amp;&amp; sudo rm -rf /etc/kubernetes/manifests/kube-scheduler.yaml &amp;&amp; sudo rm -rf /etc/kubernetes/manifests/etcd.yaml</span><br><br>sudo netstat -tulnp | grep :10250<br>sudo lsof -i :10250<br><br>sudo <span class=\"hljs-built_in\">kill</span> 2832<br>sudo <span class=\"hljs-built_in\">kill</span> -9 1234<br><br>~<span class=\"hljs-comment\"># systemctl status kubelet</span><br>~<span class=\"hljs-comment\"># systemctl stop kubelet</span><br></code></pre></td></tr></table></figure>\n\n<h4 id=\"7-1-3-2-重新初始化-Kubernetes-集群\"><a href=\"#7-1-3-2-重新初始化-Kubernetes-集群\" class=\"headerlink\" title=\"7.1.3.2 重新初始化 Kubernetes 集群\"></a>7.1.3.2 重新初始化 Kubernetes 集群</h4><ul>\n<li>步骤 1：重置 kubeadm\\2：清理残留文件</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># sudo kubeadm reset -f &amp;&amp; sudo rm -rf /etc/kubernetes /var/lib/etcd /var/lib/kubelet</span><br></code></pre></td></tr></table></figure>\n\n\n<ul>\n<li> <a href=\"https://blog.csdn.net/m0_51510236/article/details/136329885\">https://blog.csdn.net/m0_51510236/article/details/136329885</a></li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># sudo kubeadm init \\</span><br>--apiserver-advertise-address=192.168.11.161 \\<br>--apiserver-cert-extra-sans=k8s-master01 \\<br>--image-repository=registry.aliyuncs.com/google_containers \\<br>--kubernetes-version=v1.32.3 \\<br>--service-cidr=10.96.0.0/12 \\<br>--pod-network-cidr=10.244.0.0/16 \\<br>--cri-socket=unix:///run/containerd/containerd.sock \\<br>--cgroup-driver=systemd \\<br>--upload-certs \\<br>--v=9<br></code></pre></td></tr></table></figure>\n\n\n\n\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">Mar 22 13:26:21 k8s-master01 kubelet[9760]: E0322 13:26:21.545465    9760 pod_workers.go:1301] <span class=\"hljs-string\">&quot;Error syncing pod, skipping&quot;</span> err=<span class=\"hljs-string\">&quot;failed to \\&quot;CreatePodSandbox\\&quot; for \\&quot;kube-controller-manager-k8s-master01_kube-system(19dfb154dd163834eef61b7252703fed)\\&quot; with CreatePodSandboxError: \\&quot;Failed to create sandbox for pod \\\\\\&quot;kube-controller-manager-k8s-master01_kube-system(19dfb154dd163834eef61b7252703fed)\\\\\\&quot;: rpc error: code = Unknown desc = failed to start sandbox \\\\\\&quot;623e76469b34076613d313938932728b1c6e63d0951c4c1a1a7563332c35b2e2\\\\\\&quot;: failed to create containerd task: failed to create shim task: OCI runtime create failed: unable to retrieve OCI runtime error (open /run/containerd/io.containerd.runtime.v2.task/k8s.io/623e76469b34076613d313938932728b1c6e63d0951c4c1a1a7563332c35b2e2/log.json: no such file or directory): exec: \\\\\\&quot;runc\\\\\\&quot;: executable file not found in <span class=\"hljs-variable\">$PATH</span>\\&quot;&quot;</span> pod=<span class=\"hljs-string\">&quot;kube-system/kube-controller-manager-k8s-master01&quot;</span> podUID=<span class=\"hljs-string\">&quot;19dfb154dd163834eef61b7252703fed&quot;</span><br>Mar 22 13:26:23 k8s-master01 kubelet[9760]: E0322 13:26:23.120378    9760 controller.go:145] <span class=\"hljs-string\">&quot;Failed to ensure lease exists, will retry&quot;</span> err=<span class=\"hljs-string\">&quot;Get \\&quot;https://192.168.11.161:6443/apis/coordination.k8s.io/v1/namespaces/kube-node-lease/leases/k8s-master01?timeout=10s\\&quot;: dial tcp 192.168.11.161:6443: connect: connection refused&quot;</span> interval=<span class=\"hljs-string\">&quot;7s&quot;</span><br>Mar 22 13:26:23 k8s-master01 kubelet[9760]: I0322 13:26:23.327532    9760 kubelet_node_status.go:75] <span class=\"hljs-string\">&quot;Attempting to register node&quot;</span> node=<span class=\"hljs-string\">&quot;k8s-master01&quot;</span><br>Mar 22 13:26:23 k8s-master01 kubelet[9760]: E0322 13:26:23.328029    9760 kubelet_node_status.go:107] <span class=\"hljs-string\">&quot;Unable to register node with API server&quot;</span> err=<span class=\"hljs-string\">&quot;Post \\&quot;https://192.168.11.161:6443/api/v1/nodes\\&quot;: dial tcp 192.168.11.161:6443: connect: connection refused&quot;</span> node=<span class=\"hljs-string\">&quot;k8s-master01&quot;</span><br>Mar 22 13:26:25 k8s-master01 kubelet[9760]: W0322 13:26:25.039914    9760 reflector.go:569] k8s.io/client-go/informers/factory.go:160: failed to list *v1.CSIDriver: Get <span class=\"hljs-string\">&quot;https://192.168.11.161:6443/apis/storage.k8s.io/v1/csidrivers?limit=500&amp;resourceVersion=0&quot;</span>: dial tcp 192.168.11.161:6443: connect: connection refused<br>Mar 22 13:26:25 k8s-master01 kubelet[9760]: E0322 13:26:25.040030    9760 reflector.go:166] <span class=\"hljs-string\">&quot;Unhandled Error&quot;</span> err=<span class=\"hljs-string\">&quot;k8s.io/client-go/informers/factory.go:160: Failed to watch *v1.CSIDriver: failed to list *v1.CSIDriver: Get \\&quot;https://192.168.11.161:6443/apis/storage.k8s.io/v1/csidrivers?limit=500&amp;resourceVersion=0\\&quot;: dial tcp 192.168.11.161:6443: connect: connection refused&quot;</span> logger=<span class=\"hljs-string\">&quot;UnhandledError&quot;</span><br>Mar 22 13:26:26 k8s-master01 kubelet[9760]: W0322 13:26:26.039053    9760 reflector.go:569] k8s.io/client-go/informers/factory.go:160: failed to list *v1.Service: Get <span class=\"hljs-string\">&quot;https://192.168.11.161:6443/api/v1/services?fieldSelector=spec.clusterIP%21%3DNone&amp;limit=500&amp;resourceVersion=0&quot;</span>: dial tcp 192.168.11.161:6443: connect: connection refused<br>Mar 22 13:26:26 k8s-master01 kubelet[9760]: E0322 13:26:26.039171    9760 reflector.go:166] <span class=\"hljs-string\">&quot;Unhandled Error&quot;</span> err=<span class=\"hljs-string\">&quot;k8s.io/client-go/informers/factory.go:160: Failed to watch *v1.Service: failed to list *v1.Service: Get \\&quot;https://192.168.11.161:6443/api/v1/services?fieldSelector=spec.clusterIP%21%3DNone&amp;limit=500&amp;resourceVersion=0\\&quot;: dial tcp 192.168.11.161:6443: connect: connection refused&quot;</span> logger=<span class=\"hljs-string\">&quot;UnhandledError&quot;</span><br>Mar 22 13:26:26 k8s-master01 kubelet[9760]: E0322 13:26:26.450839    9760 kubelet.go:3190] <span class=\"hljs-string\">&quot;No need to create a mirror pod, since failed to get node info from the cluster&quot;</span> err=<span class=\"hljs-string\">&quot;node \\&quot;k8s-master01\\&quot; not found&quot;</span> node=<span class=\"hljs-string\">&quot;k8s-master01&quot;</span><br>Mar 22 13:26:26 k8s-master01 kubelet[9760]: E0322 13:26:26.451717    9760 dns.go:153] <span class=\"hljs-string\">&quot;Nameserver limits exceeded&quot;</span> err=<span class=\"hljs-string\">&quot;Nameserver limits were exceeded, some nameservers have been omitted, the applied nameserver line is: 119.29.29.29 114.114.114.114 8.8.8.8&quot;</span><br>Mar 22 13:26:26 k8s-master01 kubelet[9760]: E0322 13:26:26.547499    9760 log.go:32] <span class=\"hljs-string\">&quot;RunPodSandbox from runtime service failed&quot;</span> err=<span class=\"hljs-string\">&quot;rpc error: code = Unknown desc = failed to start sandbox \\&quot;c54802a9d762ba695f68d28021ea9339eb8e9845d41161d6fa1f9bfb4d811c54\\&quot;: failed to create containerd task: failed to create shim task: OCI runtime create failed: unable to retrieve OCI runtime error (open /run/containerd/io.containerd.runtime.v2.task/k8s.io/c54802a9d762ba695f68d28021ea9339eb8e9845d41161d6fa1f9bfb4d811c54/log.json: no such file or directory): exec: \\&quot;runc\\&quot;: executable file not found in <span class=\"hljs-variable\">$PATH</span>&quot;</span><br>Mar 22 13:26:26 k8s-master01 kubelet[9760]: E0322 13:26:26.547575    9760 kuberuntime_sandbox.go:72] <span class=\"hljs-string\">&quot;Failed to create sandbox for pod&quot;</span> err=<span class=\"hljs-string\">&quot;rpc error: code = Unknown desc = failed to start sandbox \\&quot;c54802a9d762ba695f68d28021ea9339eb8e9845d41161d6fa1f9bfb4d811c54\\&quot;: failed to create containerd task: failed to create shim task: OCI runtime create failed: unable to retrieve OCI runtime error (open /run/containerd/io.containerd.runtime.v2.task/k8s.io/c54802a9d762ba695f68d28021ea9339eb8e9845d41161d6fa1f9bfb4d811c54/log.json: no such file or directory): exec: \\&quot;runc\\&quot;: executable file not found in <span class=\"hljs-variable\">$PATH</span>&quot;</span> pod=<span class=\"hljs-string\">&quot;kube-system/kube-apiserver-k8s-master01&quot;</span><br>Mar 22 13:26:26 k8s-master01 kubelet[9760]: E0322 13:26:26.547611    9760 kuberuntime_manager.go:1237] <span class=\"hljs-string\">&quot;CreatePodSandbox for pod failed&quot;</span> err=<span class=\"hljs-string\">&quot;rpc error: code = Unknown desc = failed to start sandbox \\&quot;c54802a9d762ba695f68d28021ea9339eb8e9845d41161d6fa1f9bfb4d811c54\\&quot;: failed to create containerd task: failed to create shim task: OCI runtime create failed: unable to retrieve OCI runtime error (open /run/containerd/io.containerd.runtime.v2.task/k8s.io/c54802a9d762ba695f68d28021ea9339eb8e9845d41161d6fa1f9bfb4d811c54/log.json: no such file or directory): exec: \\&quot;runc\\&quot;: executable file not found in <span class=\"hljs-variable\">$PATH</span>&quot;</span> pod=<span class=\"hljs-string\">&quot;kube-system/kube-apiserver-k8s-master01&quot;</span><br>Mar 22 13:26:26 k8s-master01 kubelet[9760]: E0322 13:26:26.547680    9760 pod_workers.go:1301] <span class=\"hljs-string\">&quot;Error syncing pod, skipping&quot;</span> err=<span class=\"hljs-string\">&quot;failed to \\&quot;CreatePodSandbox\\&quot; for \\&quot;kube-apiserver-k8s-master01_kube-system(843638c9eef6e3d63d22d53c9d990887)\\&quot; with CreatePodSandboxError: \\&quot;Failed to create sandbox for pod \\\\\\&quot;kube-apiserver-k8s-master01_kube-system(843638c9eef6e3d63d22d53c9d990887)\\\\\\&quot;: rpc error: code = Unknown desc = failed to start sandbox \\\\\\&quot;c54802a9d762ba695f68d28021ea9339eb8e9845d41161d6fa1f9bfb4d811c54\\\\\\&quot;: failed to create containerd task: failed to create shim task: OCI runtime create failed: unable to retrieve OCI runtime error (open /run/containerd/io.containerd.runtime.v2.task/k8s.io/c54802a9d762ba695f68d28021ea9339eb8e9845d41161d6fa1f9bfb4d811c54/log.json: no such file or directory): exec: \\\\\\&quot;runc\\\\\\&quot;: executable file not found in <span class=\"hljs-variable\">$PATH</span>\\&quot;&quot;</span> pod=<span class=\"hljs-string\">&quot;kube-system/kube-apiserver-k8s-master01&quot;</span> podUID=<span class=\"hljs-string\">&quot;843638c9eef6e3d63d22d53c9d990887&quot;</span><br>Mar 22 13:26:29 k8s-master01 kubelet[9760]: E0322 13:26:29.498553    9760 eviction_manager.go:292] <span class=\"hljs-string\">&quot;Eviction manager: failed to get summary stats&quot;</span> err=<span class=\"hljs-string\">&quot;failed to get node info: node \\&quot;k8s-master01\\&quot; not found&quot;</span><br>Mar 22 13:26:30 k8s-master01 kubelet[9760]: E0322 13:26:30.122192    9760 controller.go:145] <span class=\"hljs-string\">&quot;Failed to ensure lease exists, will retry&quot;</span> err=<span class=\"hljs-string\">&quot;Get \\&quot;https://192.168.11.161:6443/apis/coordination.k8s.io/v1/namespaces/kube-node-lease/leases/k8s-master01?timeout=10s\\&quot;: dial tcp 192.168.11.161:6443: connect: connection refused&quot;</span> interval=<span class=\"hljs-string\">&quot;7s&quot;</span><br>Mar 22 13:26:30 k8s-master01 kubelet[9760]: I0322 13:26:30.329597    9760 kubelet_node_status.go:75] <span class=\"hljs-string\">&quot;Attempting to register node&quot;</span> node=<span class=\"hljs-string\">&quot;k8s-master01&quot;</span><br>Mar 22 13:26:30 k8s-master01 kubelet[9760]: E0322 13:26:30.330070    9760 kubelet_node_status.go:107] <span class=\"hljs-string\">&quot;Unable to register node with API server&quot;</span> err=<span class=\"hljs-string\">&quot;Post \\&quot;https://192.168.11.161:6443/api/v1/nodes\\&quot;: dial tcp 192.168.11.161:6443: connect: connection refused&quot;</span> node=<span class=\"hljs-string\">&quot;k8s-master01&quot;</span><br>Mar 22 13:26:30 k8s-master01 kubelet[9760]: E0322 13:26:30.450085    9760 kubelet.go:3190] <span class=\"hljs-string\">&quot;No need to create a mirror pod, since failed to get node info from the cluster&quot;</span> err=<span class=\"hljs-string\">&quot;node \\&quot;k8s-master01\\&quot; not found&quot;</span> node=<span class=\"hljs-string\">&quot;k8s-master01&quot;</span><br>Mar 22 13:26:30 k8s-master01 kubelet[9760]: E0322 13:26:30.450964    9760 dns.go:153] <span class=\"hljs-string\">&quot;Nameserver limits exceeded&quot;</span> err=<span class=\"hljs-string\">&quot;Nameserver limits were exceeded, some nameservers have been omitted, the applied nameserver line is: 119.29.29.29 114.114.114.114 8.8.8.8&quot;</span><br>Mar 22 13:26:30 k8s-master01 kubelet[9760]: E0322 13:26:30.548988    9760 log.go:32] <span class=\"hljs-string\">&quot;RunPodSandbox from runtime service failed&quot;</span> err=<span class=\"hljs-string\">&quot;rpc error: code = Unknown desc = failed to start sandbox \\&quot;f8b4188ebe49ae964cfbbb1837c3899194dede9e323889d10636e4002993581b\\&quot;: failed to create containerd task: failed to create shim task: OCI runtime create failed: unable to retrieve OCI runtime error (open /run/containerd/io.containerd.runtime.v2.task/k8s.io/f8b4188ebe49ae964cfbbb1837c3899194dede9e323889d10636e4002993581b/log.json: no such file or directory): exec: \\&quot;runc\\&quot;: executable file not found in <span class=\"hljs-variable\">$PATH</span>&quot;</span><br>Mar 22 13:26:30 k8s-master01 kubelet[9760]: E0322 13:26:30.549096    9760 kuberuntime_sandbox.go:72] <span class=\"hljs-string\">&quot;Failed to create sandbox for pod&quot;</span> err=<span class=\"hljs-string\">&quot;rpc error: code = Unknown desc = failed to start sandbox \\&quot;f8b4188ebe49ae964cfbbb1837c3899194dede9e323889d10636e4002993581b\\&quot;: failed to create containerd task: failed to create shim task: OCI runtime create failed: unable to retrieve OCI runtime error (open /run/containerd/io.containerd.runtime.v2.task/k8s.io/f8b4188ebe49ae964cfbbb1837c3899194dede9e323889d10636e4002993581b/log.json: no such file or directory): exec: \\&quot;runc\\&quot;: executable file not found in <span class=\"hljs-variable\">$PATH</span>&quot;</span> pod=<span class=\"hljs-string\">&quot;kube-system/kube-scheduler-k8s-master01&quot;</span><br>Mar 22 13:26:30 k8s-master01 kubelet[9760]: E0322 13:26:30.549145    9760 kuberuntime_manager.go:1237] <span class=\"hljs-string\">&quot;CreatePodSandbox for pod failed&quot;</span> err=<span class=\"hljs-string\">&quot;rpc error: code = Unknown desc = failed to start sandbox \\&quot;f8b4188ebe49ae964cfbbb1837c3899194dede9e323889d10636e4002993581b\\&quot;: failed to create containerd task: failed to create shim task: OCI runtime create failed: unable to retrieve OCI runtime error (open /run/containerd/io.containerd.runtime.v2.task/k8s.io/f8b4188ebe49ae964cfbbb1837c3899194dede9e323889d10636e4002993581b/log.json: no such file or directory): exec: \\&quot;runc\\&quot;: executable file not found in <span class=\"hljs-variable\">$PATH</span>&quot;</span> pod=<span class=\"hljs-string\">&quot;kube-system/kube-scheduler-k8s-master01&quot;</span><br>Mar 22 13:26:30 k8s-master01 kubelet[9760]: E0322 13:26:30.549256    9760 pod_workers.go:1301] <span class=\"hljs-string\">&quot;Error syncing pod, skipping&quot;</span> err=<span class=\"hljs-string\">&quot;failed to \\&quot;CreatePodSandbox\\&quot; for \\&quot;kube-scheduler-k8s-master01_kube-system(c7ec3024ac27f675ae60ec998a90ce85)\\&quot; with CreatePodSandboxError: \\&quot;Failed to create sandbox for pod \\\\\\&quot;kube-scheduler-k8s-master01_kube-system(c7ec3024ac27f675ae60ec998a90ce85)\\\\\\&quot;: rpc error: code = Unknown desc = failed to start sandbox \\\\\\&quot;f8b4188ebe49ae964cfbbb1837c3899194dede9e323889d10636e4002993581b\\\\\\&quot;: failed to create containerd task: failed to create shim task: OCI runtime create failed: unable to retrieve OCI runtime error (open /run/containerd/io.containerd.runtime.v2.task/k8s.io/f8b4188ebe49ae964cfbbb1837c3899194dede9e323889d10636e4002993581b/log.json: no such file or directory): exec: \\\\\\&quot;runc\\\\\\&quot;: executable file not found in <span class=\"hljs-variable\">$PATH</span>\\&quot;&quot;</span> pod=<span class=\"hljs-string\">&quot;kube-system/kube-scheduler-k8s-master01&quot;</span> podUID=<span class=\"hljs-string\">&quot;c7ec3024ac27f675ae60ec998a90ce85&quot;</span><br>Mar 22 13:26:31 k8s-master01 kubelet[9760]: E0322 13:26:31.073491    9760 event.go:368] <span class=\"hljs-string\">&quot;Unable to write event (may retry after sleeping)&quot;</span> err=<span class=\"hljs-string\">&quot;Post \\&quot;https://192.168.11.161:6443/api/v1/namespaces/default/events\\&quot;: dial tcp 192.168.11.161:6443: connect: connection refused&quot;</span> event=<span class=\"hljs-string\">&quot;&amp;Event&#123;ObjectMeta:&#123;k8s-master01.182f0852158da106  default    0 0001-01-01 00:00:00 +0000 UTC &lt;nil&gt; &lt;nil&gt; map[] map[] [] [] []&#125;,InvolvedObject:ObjectReference&#123;Kind:Node,Namespace:,Name:k8s-master01,UID:k8s-master01,APIVersion:,ResourceVersion:,FieldPath:,&#125;,Reason:NodeHasSufficientPID,Message:Node k8s-master01 status is now: NodeHasSufficientPID,Source:EventSource&#123;Component:kubelet,Host:k8s-master01,&#125;,FirstTimestamp:2025-03-22 13:18:49.45761511 +0800 CST m=+0.101712151,LastTimestamp:2025-03-22 13:18:49.45761511 +0800 CST m=+0.101712151,Count:1,Type:Normal,EventTime:0001-01-01 00:00:00 +0000 UTC,Series:nil,Action:,Related:nil,ReportingController:kubelet,ReportingInstance:k8s-master01,&#125;&quot;</span><br><br></code></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"7-1-4-Kubernets集群中部署calico网络插件时kubectl-get-pods-n-tigera-operator命令一直显示pod为ImagePullBackOff状态\"><a href=\"#7-1-4-Kubernets集群中部署calico网络插件时kubectl-get-pods-n-tigera-operator命令一直显示pod为ImagePullBackOff状态\" class=\"headerlink\" title=\"7.1.4 Kubernets集群中部署calico网络插件时kubectl get pods -n tigera-operator命令一直显示pod为ImagePullBackOff状态\"></a>7.1.4 Kubernets集群中部署calico网络插件时kubectl get pods -n tigera-operator命令一直显示pod为ImagePullBackOff状态</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># kubectl describe pod tigera-operator-ccfc44587-vswlt -n tigera-operator</span><br></code></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># kubectl get pods -n tigera-operator -o wide</span><br></code></pre></td></tr></table></figure>\n\n<p>查到“Failed to pull image “quay.io/tigera/operator:v1.36.5”: failed to pull and unpack image “quay.io/tigera/operator:v1.36.5”: failed to copy: read tcp 192.168.11.166:53828-&gt;23.60.96.137:443: read: connection reset by peer<br>”<br>需要手动拉取镜像或者增加镜像源（参考<a href=\"https://blog.csdn.net/nxg810251/article/details/145170594%E4%B8%AD%E7%9A%84config.toml%E6%96%87%E4%BB%B6%E7%9A%84Line206~Line219%E4%B8%AD%E7%9A%84%E9%85%8D%E7%BD%AE%EF%BC%89\">https://blog.csdn.net/nxg810251/article/details/145170594中的config.toml文件的Line206~Line219中的配置）</a> </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># sudo systemctl daemon-reload &amp;&amp; sudo systemctl restart containerd &amp;&amp; sudo systemctl restart kubelet</span><br></code></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># systemctl daemon-reload &amp;&amp; systemctl restart containerd</span><br></code></pre></td></tr></table></figure>\n\n\n<h4 id=\"7-1-4-3-参考：\"><a href=\"#7-1-4-3-参考：\" class=\"headerlink\" title=\"7.1.4.3 参考：\"></a>7.1.4.3 参考：</h4><ul>\n<li><a href=\"https://blog.csdn.net/weixin_40444270/article/details/132543441\">K8s的Pod出现Init:ImagePullBackOff问题的解决(以calico为例)</a></li>\n<li><a href=\"https://blog.csdn.net/nxg810251/article/details/145170594\">Kubernetes1.32版本搭建【超详细】</a></li>\n<li><a href=\"https://blog.csdn.net/weixin_42434261/article/details/144539712\">Kubernetes1.32版本搭建【极简版】</a></li>\n</ul>\n<h1 id=\"八、-总结\"><a href=\"#八、-总结\" class=\"headerlink\" title=\"八、 总结\"></a>八、 总结</h1><h2 id=\"8-1-可以继续优化的流程\"><a href=\"#8-1-可以继续优化的流程\" class=\"headerlink\" title=\"8.1 可以继续优化的流程\"></a>8.1 可以继续优化的流程</h2><h3 id=\"8-1-1-虚拟机镜像准备\"><a href=\"#8-1-1-虚拟机镜像准备\" class=\"headerlink\" title=\"8.1.1 虚拟机镜像准备\"></a>8.1.1 虚拟机镜像准备</h3><h3 id=\"8-1-2-containerd版本选择\"><a href=\"#8-1-2-containerd版本选择\" class=\"headerlink\" title=\"8.1.2 containerd版本选择\"></a>8.1.2 containerd版本选择</h3><h3 id=\"8-1-3-镜像源加速\"><a href=\"#8-1-3-镜像源加速\" class=\"headerlink\" title=\"8.1.3 镜像源加速\"></a>8.1.3 镜像源加速</h3><h3 id=\"8-1-4-网络配置\"><a href=\"#8-1-4-网络配置\" class=\"headerlink\" title=\"8.1.4 网络配置\"></a>8.1.4 网络配置</h3>","site":{"data":{}},"excerpt":"","more":"<h1 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h1><p><img src=\"https://kubernetes.io/images/docs/components-of-kubernetes.svg\" alt=\"components-of-kubernetes\"></p>\n<p><a href=\"https://kubernetes.io/zh-cn/docs/concepts/overview/components/\">Kubernetes集群</a>部署实战，基于Kubernetes v1.32.3、Ubuntu 24.04.2 LTS、Containerd v1.7.27版本搭建。</p>\n<h2 id=\"1-1-前置准备\"><a href=\"#1-1-前置准备\" class=\"headerlink\" title=\"1.1 前置准备\"></a>1.1 前置准备</h2><h3 id=\"1-1-1-前置依赖软件及物料准备\"><a href=\"#1-1-1-前置依赖软件及物料准备\" class=\"headerlink\" title=\"1.1.1 前置依赖软件及物料准备\"></a>1.1.1 前置依赖软件及物料准备</h3><ul>\n<li>服务器系统：PVE 8.1 </li>\n<li>虚拟机操作系统 Ubuntu 24.04.2 LTS ISO</li>\n<li>Kubernetes v1.32.3 （kubeadm、kubelet、kubectl、kube-apiserver、kube-controller-manager、kube-scheduler、kube-proxy）</li>\n<li>Cri-Containerd v1.7.27    <a href=\"https://github.com/containerd/containerd/releases\">releases</a>       crictl</li>\n<li>CoreDNS v1.11.3</li>\n<li>Pause v3.10</li>\n<li>Etcd v3.5.16-0</li>\n<li>Calico v3.29.2</li>\n<li>Nginx镜像</li>\n<li>Helm v3.17.2</li>\n<li>Kubernetes Dashboard v7.11.1</li>\n</ul>\n<h3 id=\"1-1-2-K8S集群网络IP规划\"><a href=\"#1-1-2-K8S集群网络IP规划\" class=\"headerlink\" title=\"1.1.2 K8S集群网络IP规划\"></a>1.1.2 K8S集群网络IP规划</h3><table>\n<thead>\n<tr>\n<th align=\"center\">节点名称</th>\n<th align=\"center\">规划IP</th>\n<th align=\"center\">当前验证实际使用IP</th>\n<th align=\"center\">备注</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">K8S-Master01</td>\n<td align=\"center\">10.200.10.11</td>\n<td align=\"center\">192.168.11.161</td>\n<td align=\"center\">…</td>\n</tr>\n<tr>\n<td align=\"center\">K8S-Master02</td>\n<td align=\"center\">10.200.10.12</td>\n<td align=\"center\"></td>\n<td align=\"center\">…</td>\n</tr>\n<tr>\n<td align=\"center\">K8S-Master03</td>\n<td align=\"center\">10.200.10.13</td>\n<td align=\"center\"></td>\n<td align=\"center\">…</td>\n</tr>\n<tr>\n<td align=\"center\">k8S-Worker01</td>\n<td align=\"center\">10.200.10.21</td>\n<td align=\"center\">192.168.11.165</td>\n<td align=\"center\">…</td>\n</tr>\n<tr>\n<td align=\"center\">K8S-Worker02</td>\n<td align=\"center\">10.200.10.22</td>\n<td align=\"center\">192.168.11.166</td>\n<td align=\"center\">…</td>\n</tr>\n<tr>\n<td align=\"center\">K8S-Worker03</td>\n<td align=\"center\">10.200.10.23</td>\n<td align=\"center\"></td>\n<td align=\"center\">…</td>\n</tr>\n<tr>\n<td align=\"center\">K8S-Worker04</td>\n<td align=\"center\">10.200.10.24</td>\n<td align=\"center\"></td>\n<td align=\"center\">…</td>\n</tr>\n<tr>\n<td align=\"center\">K8S-Worker05</td>\n<td align=\"center\">10.200.10.25</td>\n<td align=\"center\"></td>\n<td align=\"center\">…</td>\n</tr>\n</tbody></table>\n<h3 id=\"1-1-3-主机硬件配置说明\"><a href=\"#1-1-3-主机硬件配置说明\" class=\"headerlink\" title=\"1.1.3 主机硬件配置说明\"></a>1.1.3 主机硬件配置说明</h3><table>\n<thead>\n<tr>\n<th align=\"center\">节点名称</th>\n<th>角色</th>\n<th align=\"center\">CPU</th>\n<th align=\"center\">内存</th>\n<th align=\"center\">硬盘</th>\n<th align=\"center\">备注</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">K8S-Master01</td>\n<td>master</td>\n<td align=\"center\">4C</td>\n<td align=\"center\">8G</td>\n<td align=\"center\">200GB</td>\n<td align=\"center\">最低4C8G</td>\n</tr>\n<tr>\n<td align=\"center\">k8S-Worker01</td>\n<td>worker</td>\n<td align=\"center\">8C</td>\n<td align=\"center\">16G</td>\n<td align=\"center\">200GB</td>\n<td align=\"center\">最低8C16G</td>\n</tr>\n<tr>\n<td align=\"center\">K8S-Worker02</td>\n<td>worker</td>\n<td align=\"center\">8C</td>\n<td align=\"center\">16G</td>\n<td align=\"center\">200GB</td>\n<td align=\"center\">最低8C16G</td>\n</tr>\n</tbody></table>\n<h2 id=\"1-2-主机系统基础环境准备\"><a href=\"#1-2-主机系统基础环境准备\" class=\"headerlink\" title=\"1.2 主机系统基础环境准备\"></a>1.2 主机系统基础环境准备</h2><h3 id=\"1-2-1-正式安装前，系统需要检查及准备以下操作\"><a href=\"#1-2-1-正式安装前，系统需要检查及准备以下操作\" class=\"headerlink\" title=\"1.2.1 正式安装前，系统需要检查及准备以下操作\"></a>1.2.1 正式安装前，系统需要检查及准备以下操作</h3><ul>\n<li>更新基础软件版本  </li>\n<li>安装 net-tools、iputils-ping 工具，查看IP配置、网络状况</li>\n<li>安装必要的编辑器</li>\n<li>启用SSH连接 OpenSSH  开启SSH服务</li>\n<li>支持cron定时任务</li>\n<li>远程时间同步服务支持 </li>\n<li>初始化系统 systemd 支持程序开机自启动</li>\n<li>网络下载工具：wget、curl</li>\n<li>签名校验工具gpg</li>\n</ul>\n<p>安装必要的软件及工具</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># sudo apt-get update</span><br>~<span class=\"hljs-comment\"># sudo apt install net-tools iputils-ping systemd nano openssh-server cron ntpdate ipset ipvsadm debianutils tar which apt-transport-https ca-certificates curl wget gpg -y</span><br>~<span class=\"hljs-comment\"># sudo apt-get upgrade -y</span><br></code></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"1-2-2-开启SSH远程登录服务\"><a href=\"#1-2-2-开启SSH远程登录服务\" class=\"headerlink\" title=\"1.2.2 开启SSH远程登录服务\"></a>1.2.2 开启SSH远程登录服务</h3><p>确认你的系统使用的是哪种初始化系统：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># ps -p 1 -o comm=</span><br></code></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~$ sudo systemctl <span class=\"hljs-built_in\">enable</span> ssh<br><br>~$ sudo systemctl start ssh<br><br>~$ sudo system status ssh      <span class=\"hljs-comment\"># 查看ssh状态 </span><br></code></pre></td></tr></table></figure>\n\n\n<h2 id=\"1-3-集群主机配置\"><a href=\"#1-3-集群主机配置\" class=\"headerlink\" title=\"1.3 集群主机配置\"></a>1.3 集群主机配置</h2><h3 id=\"1-3-1-主机名配置\"><a href=\"#1-3-1-主机名配置\" class=\"headerlink\" title=\"1.3.1 主机名配置\"></a>1.3.1 主机名配置</h3><p>由于本次使用3台主机完成kubernetes集群部署，其中1台为master节点,名称为k8s-master01;其中2台为worker节点，名称分别为：k8s-worker01及k8s-worker02</p>\n<p>master01节点</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># hostnamectl set-hostname k8s-master01</span><br></code></pre></td></tr></table></figure>\n\n<p>worker01节点</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># hostnamectl set-hostname k8s-worker01</span><br></code></pre></td></tr></table></figure>\n\n\n<p>worker02节点</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># hostnamectl set-hostname k8s-worker02</span><br></code></pre></td></tr></table></figure>\n\n\n<h3 id=\"1-3-2-主机IP地址配置\"><a href=\"#1-3-2-主机IP地址配置\" class=\"headerlink\" title=\"1.3.2 主机IP地址配置\"></a>1.3.2 主机IP地址配置</h3><p>k8s-master01节点IP地址为：192.168.11.161/24</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># nano /etc/netplan/50-cloud-init.yaml</span><br>root@k8s-master01:~<span class=\"hljs-comment\"># cat /etc/netplan/50-cloud-init.yaml</span><br></code></pre></td></tr></table></figure>\n\n<p>50-cloud-init.yaml文件中添加或修改IP地址（注意网卡名称需要与系统中的以太网卡一致）</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs yaml\"><span class=\"hljs-attr\">network:</span><br>  <span class=\"hljs-attr\">version:</span> <span class=\"hljs-number\">2</span><br>  <span class=\"hljs-attr\">renderer:</span> <span class=\"hljs-string\">networkd</span><br>  <span class=\"hljs-attr\">ethernets:</span><br>    <span class=\"hljs-attr\">ens18:</span><br>      <span class=\"hljs-attr\">dhcp4:</span> <span class=\"hljs-literal\">no</span><br>      <span class=\"hljs-attr\">addresses:</span><br>        <span class=\"hljs-bullet\">-</span> <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.11</span><span class=\"hljs-number\">.161</span><span class=\"hljs-string\">/24</span><br>      <span class=\"hljs-attr\">routes:</span><br>        <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">to:</span> <span class=\"hljs-string\">default</span><br>          <span class=\"hljs-attr\">via:</span> <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.11</span><span class=\"hljs-number\">.1</span><br>      <span class=\"hljs-attr\">nameservers:</span><br>        <span class=\"hljs-attr\">addresses:</span> [<span class=\"hljs-number\">119.29</span><span class=\"hljs-number\">.29</span><span class=\"hljs-number\">.29</span>,<span class=\"hljs-number\">114.114</span><span class=\"hljs-number\">.114</span><span class=\"hljs-number\">.114</span>,<span class=\"hljs-number\">8.8</span><span class=\"hljs-number\">.8</span><span class=\"hljs-number\">.8</span>]<br></code></pre></td></tr></table></figure>\n\n<p>保存k8s-master01的网卡配置</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># sudo netplan apply</span><br></code></pre></td></tr></table></figure>\n\n<p>重新按新ip连接主机，然后使用以下命名查看ip地址信息</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">ip a s<br></code></pre></td></tr></table></figure>\n\n<p>k8s-worker01节点IP地址为：192.168.11.165/24</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-worker01:~<span class=\"hljs-comment\"># nano /etc/netplan/50-cloud-init.yaml</span><br>root@k8s-worker01:~<span class=\"hljs-comment\"># cat /etc/netplan/50-cloud-init.yaml</span><br></code></pre></td></tr></table></figure>\n\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs yaml\"><span class=\"hljs-attr\">network:</span><br>  <span class=\"hljs-attr\">version:</span> <span class=\"hljs-number\">2</span><br>  <span class=\"hljs-attr\">renderer:</span> <span class=\"hljs-string\">networkd</span><br>  <span class=\"hljs-attr\">ethernets:</span><br>    <span class=\"hljs-attr\">enp6s18:</span><br>      <span class=\"hljs-attr\">dhcp4:</span> <span class=\"hljs-literal\">no</span><br>      <span class=\"hljs-attr\">addresses:</span><br>        <span class=\"hljs-bullet\">-</span> <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.11</span><span class=\"hljs-number\">.165</span><span class=\"hljs-string\">/24</span><br>      <span class=\"hljs-attr\">routes:</span><br>        <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">to:</span> <span class=\"hljs-string\">default</span><br>          <span class=\"hljs-attr\">via:</span> <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.11</span><span class=\"hljs-number\">.1</span><br>      <span class=\"hljs-attr\">nameservers:</span><br>        <span class=\"hljs-attr\">addresses:</span> [<span class=\"hljs-number\">119.29</span><span class=\"hljs-number\">.29</span><span class=\"hljs-number\">.29</span>,<span class=\"hljs-number\">114.114</span><span class=\"hljs-number\">.114</span><span class=\"hljs-number\">.114</span>,<span class=\"hljs-number\">8.8</span><span class=\"hljs-number\">.8</span><span class=\"hljs-number\">.8</span>]<br></code></pre></td></tr></table></figure>\n\n<p>保存k8s-worker01的网卡配置</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-worker01:~<span class=\"hljs-comment\"># sudo netplan apply</span><br></code></pre></td></tr></table></figure>\n\n\n<p>k8s-worker02节点IP地址为：192.168.11.166/24</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-worker02:~<span class=\"hljs-comment\"># nano /etc/netplan/50-cloud-init.yaml</span><br>root@k8s-worker02:~<span class=\"hljs-comment\"># cat /etc/netplan/50-cloud-init.yaml</span><br></code></pre></td></tr></table></figure>\n\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs yaml\"><span class=\"hljs-attr\">network:</span><br>  <span class=\"hljs-attr\">version:</span> <span class=\"hljs-number\">2</span><br>  <span class=\"hljs-attr\">renderer:</span> <span class=\"hljs-string\">networkd</span><br>  <span class=\"hljs-attr\">ethernets:</span><br>    <span class=\"hljs-attr\">enp6s18:</span><br>      <span class=\"hljs-attr\">dhcp4:</span> <span class=\"hljs-literal\">no</span><br>      <span class=\"hljs-attr\">addresses:</span><br>        <span class=\"hljs-bullet\">-</span> <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.11</span><span class=\"hljs-number\">.166</span><span class=\"hljs-string\">/24</span><br>      <span class=\"hljs-attr\">routes:</span><br>        <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">to:</span> <span class=\"hljs-string\">default</span><br>          <span class=\"hljs-attr\">via:</span> <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.11</span><span class=\"hljs-number\">.1</span><br>      <span class=\"hljs-attr\">nameservers:</span><br>        <span class=\"hljs-attr\">addresses:</span> [<span class=\"hljs-number\">119.29</span><span class=\"hljs-number\">.29</span><span class=\"hljs-number\">.29</span>,<span class=\"hljs-number\">114.114</span><span class=\"hljs-number\">.114</span><span class=\"hljs-number\">.114</span>,<span class=\"hljs-number\">8.8</span><span class=\"hljs-number\">.8</span><span class=\"hljs-number\">.8</span>]<br></code></pre></td></tr></table></figure>\n\n<p>保存k8s-worker02的网卡配置</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-worker02:~<span class=\"hljs-comment\"># sudo netplan apply</span><br></code></pre></td></tr></table></figure>\n\n\n\n\n<h3 id=\"1-3-3-主机名与IP地址解析\"><a href=\"#1-3-3-主机名与IP地址解析\" class=\"headerlink\" title=\"1.3.3 主机名与IP地址解析\"></a>1.3.3 主机名与IP地址解析</h3><p>所有集群主机均需要进行配置。</p>\n<p>在没有DNS服务器的环境中需要先能解析到各个节点的IP地址</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># sudo nano /etc/hosts</span><br></code></pre></td></tr></table></figure>\n\n<ul>\n<li>在文件后面追加以下内容</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">192.168.11.161 k8s-master01<br>192.168.11.165 k8s-worker01<br>192.168.11.166 k8s-worker02<br></code></pre></td></tr></table></figure>\n\n\n<p>修改后Ctrl+O,然后Enter键，再Ctrl+X保存文件修改并退出</p>\n<p>查看IP解析配置是否生效命令</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~$ ping -c 4 k8s-master01<br>~$ ping -c 4 k8s-worker01<br>~$ ping -c 4 k8s-worker02<br></code></pre></td></tr></table></figure>\n\n<h3 id=\"1-3-4-时间同步配置\"><a href=\"#1-3-4-时间同步配置\" class=\"headerlink\" title=\"1.3.4 时间同步配置\"></a>1.3.4 时间同步配置</h3><p>查看时间</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># date</span><br> Thu Sep  7 05:39:21 AM UTC 2024<br></code></pre></td></tr></table></figure>\n\n<p>更换时区</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># timedatectl set-timezone Asia/Shanghai</span><br></code></pre></td></tr></table></figure>\n<p>再次查看时间</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># date</span><br> Thu Sep  7 01:39:51 PM CST 2024<br></code></pre></td></tr></table></figure>\n\n<p>安装ntpdate命令</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># apt install ntpdate -y</span><br></code></pre></td></tr></table></figure>\n\n<p>使用ntpdate命令同步时间</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># ntpdate time1.aliyun.com</span><br></code></pre></td></tr></table></figure>\n\n\n<p>通过计划任务实现时间同步</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># apt install cron -y</span><br>~<span class=\"hljs-comment\"># crontab -e</span><br> no crontab <span class=\"hljs-keyword\">for</span> root - using an empty one<br> Select an editor.  To change later, run <span class=\"hljs-string\">&#x27;select-editor&#x27;</span>.<br>  1. /bin/nano        &lt;---- easiest<br>  2. /usr/bin/vim.basic<br>  3. /usr/bin/vim.tiny<br>  4. /bin/ed<br> Choose 1-4 [1]: 2<br> ......<br>0 */1 * * * ntpdate time1.aliyun.com           // 写入配置文件<br>~<span class=\"hljs-comment\"># crontab -l   // 查看crontab配置</span><br> ......<br>0 */1 * * * ntpdate time1.aliyun.com        <br></code></pre></td></tr></table></figure>\n\n\n<h3 id=\"1-3-5-配置内核转发及网桥过滤\"><a href=\"#1-3-5-配置内核转发及网桥过滤\" class=\"headerlink\" title=\"1.3.5 配置内核转发及网桥过滤\"></a>1.3.5 配置内核转发及网桥过滤</h3><p>所有主机均需要操作。</p>\n<p>Way1：手动执行，手动加载内核转发及网桥过滤模块</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># modprobe overlay</span><br>~<span class=\"hljs-comment\"># modprobe br_netfilter</span><br></code></pre></td></tr></table></figure>\n\n\n<p>Way2：创建加载内核模块文件</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># sudo cat &lt;&lt; EOF | tee /etc/modules-load.d/k8s.conf</span><br>overlay<br>br_netfilter<br>EOF<br></code></pre></td></tr></table></figure>\n\n<ul>\n<li>查看已加载的模块</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># lsmod | egrep &quot;overlay&quot;</span><br>overlay               151552  0<br></code></pre></td></tr></table></figure>\n\n\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># lsmod | egrep &quot;br_netfilter&quot;</span><br>br_netfilter    32768   0       <br>bridge           307200  1 br_netfilter<br></code></pre></td></tr></table></figure>\n\n\n<ul>\n<li>添加网桥过滤及内核转发配置文件</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># cat &lt;&lt; EOF| tee /etc/sysctl.d/k8s.conf</span><br>net.bridge.bridge-nf-call-ip6tables = 1<br>net.bridge.bridge-nf-call-iptables = 1<br>net.ipv4.ip_forward = 1<br>EOF<br></code></pre></td></tr></table></figure>\n\n<p>查看配置文件</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># nano /etc/modules-load.d/k8s.conf</span><br>~<span class=\"hljs-comment\"># cat /etc/modules-load.d/k8s.conf</span><br></code></pre></td></tr></table></figure>\n\n<p>加载内核参数,使之生效</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># sysctl --system</span><br></code></pre></td></tr></table></figure>\n\n<p>检查输出的结果中是否包含以下三项：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs plain\">net.bridge.bridge-nf-call-ip6tables &#x3D; 1<br>net.bridge.bridge-nf-call-iptables &#x3D; 1<br>net.ipv4.ip_forward &#x3D; 1<br></code></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"1-3-6-安装ipset及ipvsadm\"><a href=\"#1-3-6-安装ipset及ipvsadm\" class=\"headerlink\" title=\"1.3.6 安装ipset及ipvsadm\"></a>1.3.6 安装ipset及ipvsadm</h3><p>所有主机均需要操作。</p>\n<p>安装ipset及ipvsadm命令</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># apt install ipset ipvsadm -y</span><br></code></pre></td></tr></table></figure>\n\n<p>配置ipvsadm模块加载</p>\n<p>添加系统启动需要加载的模块文件</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># cat &lt;&lt; EOF | tee /etc/modules-load.d/ipvs.conf</span><br>ip_vs<br>ip_vs_rr<br>ip_vs_wrr<br>ip_vs_sh<br>nf_conntrack<br>EOF<br></code></pre></td></tr></table></figure>\n\n<p>创建加载模块脚本文件</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># cat &lt;&lt; EOF | tee ipvs.sh</span><br><span class=\"hljs-meta\">#!/bin/sh</span><br>modprobe -- ip_vs<br>modprobe -- ip_vs_rr<br>modprobe -- ip_vs_wrr<br>modprobe -- ip_vs_sh<br>modprobe -- nf_conntrack<br>EOF<br></code></pre></td></tr></table></figure>\n\n<p>上述命令执行完成后，当前目录下会生成一个ipvs.sh脚本文件，接下来使用bash命令执行它</p>\n<p>执行ipvs.sh脚本文件，以加载模块</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># sh ipvs.sh</span><br></code></pre></td></tr></table></figure>\n\n<p>查看ipvs配置是否已生效</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># lsmod | grep ip_vs</span><br>ip_vs_sh               12288  0<br>ip_vs_wrr              12288  0<br>ip_vs_rr               12288  0<br>ip_vs                 221184  6 ip_vs_rr,ip_vs_sh,ip_vs_wrr<br>nf_conntrack          196608  1 ip_vs<br>nf_defrag_ipv6         24576  2 nf_conntrack,ip_vs<br>libcrc32c              12288  4 nf_conntrack,btrfs,raid456,ip_vs<br></code></pre></td></tr></table></figure>\n\n<h3 id=\"1-3-7-关闭SWAP分区\"><a href=\"#1-3-7-关闭SWAP分区\" class=\"headerlink\" title=\"1.3.7 关闭SWAP分区\"></a>1.3.7 关闭SWAP分区</h3><p>修改完成后需要重启操作系统，</p>\n<p>Way1：临时关闭（不推荐），若不重启，命令为</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># swapoff -a</span><br></code></pre></td></tr></table></figure>\n\n<p>Way2：永久关闭swap分区（推荐，操作需要重启操作系统）</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># nano /etc/fstab    // 进入分区配置文件</span><br> ......<br><br> <span class=\"hljs-comment\">#/swap.img   none    swap   sw      0       0    // 在此行首添加“#”以注释swap分区的配置</span><br></code></pre></td></tr></table></figure>\n\n<p>修改完成后保存文件并退出</p>\n<h1 id=\"二、K8S集群容器运行时-Containerd-准备\"><a href=\"#二、K8S集群容器运行时-Containerd-准备\" class=\"headerlink\" title=\"二、K8S集群容器运行时 Containerd 准备\"></a>二、K8S集群容器运行时 Containerd 准备</h1><ul>\n<li><p>安装docker-ce方法：<a href=\"https://docs.docker.com/engine/install/ubuntu/\">https://docs.docker.com/engine/install/ubuntu/</a></p>\n</li>\n<li><p>本文实际采用containerd作为集群容器镜像的运行平台</p>\n</li>\n</ul>\n<h2 id=\"2-1-Containerd部署文件获取\"><a href=\"#2-1-Containerd部署文件获取\" class=\"headerlink\" title=\"2.1 Containerd部署文件获取\"></a>2.1 Containerd部署文件获取</h2><p>wget下载1.7.27版本containerd</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># wget https://github.com/containerd/containerd/releases/download/v1.7.27/cri-containerd-1.7.27-linux-amd64.tar.gz</span><br></code></pre></td></tr></table></figure>\n\n<p>解压安装</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># sudo apt install debianutils</span><br>~<span class=\"hljs-comment\"># sudo apt install --reinstall libc6</span><br>~<span class=\"hljs-comment\"># sudo apt install --reinstall which</span><br><br><br>~<span class=\"hljs-comment\"># sudo tar xf /home/acanx/cri-containerd-1.7.27-linux-amd64.tar.gz  -C /</span><br><br>~<span class=\"hljs-comment\"># which containerd</span><br><br>/usr/<span class=\"hljs-built_in\">local</span>/bin/containerd<br>~<span class=\"hljs-comment\"># which runc</span><br><br>/usr/<span class=\"hljs-built_in\">local</span>/sbin/runc<br></code></pre></td></tr></table></figure>\n\n<p>验证containerd、runc是否安装成功</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># which containerd</span><br>~<span class=\"hljs-comment\"># which runc</span><br>~<span class=\"hljs-comment\"># whereis containerd</span><br></code></pre></td></tr></table></figure>\n\n<h2 id=\"2-2-Containerd配置文件生成并修改\"><a href=\"#2-2-Containerd配置文件生成并修改\" class=\"headerlink\" title=\"2.2 Containerd配置文件生成并修改\"></a>2.2 Containerd配置文件生成并修改</h2><p>创建containerd配置文件目录/etc/containerd</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># mkdir /etc/containerd</span><br>~<span class=\"hljs-comment\"># sudo chmod -R 777 /etc/containerd/       // 然后可以上传配置文件</span><br></code></pre></td></tr></table></figure>\n\n<p>生成配置文件config.toml及默认配置</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># containerd config default &gt; /etc/containerd/config.toml</span><br></code></pre></td></tr></table></figure>\n\n<p>修改配置文件的第67行</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># nano /etc/containerd/config.toml</span><br></code></pre></td></tr></table></figure>\n\n<figure class=\"highlight txt\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs txt\">sandbox_image = &quot;registry.k8s.io/pause:3.10&quot;  // 由3.9修改为3.10<br></code></pre></td></tr></table></figure>\n\n<ul>\n<li>如果使用阿里云容器镜像仓库，也可以修改为：</li>\n</ul>\n<figure class=\"highlight txt\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs txt\">sandbox_image = &quot;registry.aliyuncs.com/google_containers/pause:3.9&quot;  // 由3.9修改为3.10<br></code></pre></td></tr></table></figure>\n\n<p>修改配置文件的第139行</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># vim /etc/containerd/config.toml</span><br> SystemdCgroup = <span class=\"hljs-literal\">true</span> 由<span class=\"hljs-literal\">false</span>修改为<span class=\"hljs-literal\">true</span><br></code></pre></td></tr></table></figure>\n\n\n<h2 id=\"2-3-Containerd启动及开机自启动\"><a href=\"#2-3-Containerd启动及开机自启动\" class=\"headerlink\" title=\"2.3 Containerd启动及开机自启动\"></a>2.3 Containerd启动及开机自启动</h2><p>设置containerd开机自启并立即启动</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># sudo tee /etc/systemd/system/containerd.service &lt;&lt;EOF</span><br>[Unit]<br>Description=containerd container runtime<br>Documentation=https://containerd.io<br>After=network.target local-fs.target<br> <br>[Service]<br>ExecStartPre=-/sbin/modprobe overlay<br>ExecStart=/usr/<span class=\"hljs-built_in\">local</span>/bin/containerd<br> <br>Type=notify<br>Delegate=yes<br>KillMode=process<br>Restart=always<br>RestartSec=5<br> <br><span class=\"hljs-comment\"># 限制日志大小</span><br>LimitNOFILE=infinity<br> <br>[Install]<br>WantedBy=multi-user.target<br>EOF<br></code></pre></td></tr></table></figure>\n\n\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># ls /etc/systemd/system/containerd.service</span><br>~<span class=\"hljs-comment\"># systemctl enable --now containerd</span><br></code></pre></td></tr></table></figure>\n\n<p>验证containerd版本</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># containerd --version</span><br></code></pre></td></tr></table></figure>\n\n\n\n<h1 id=\"三、K8S集群部署\"><a href=\"#三、K8S集群部署\" class=\"headerlink\" title=\"三、K8S集群部署\"></a>三、K8S集群部署</h1><h2 id=\"3-1-K8S集群软件apt源准备\"><a href=\"#3-1-K8S集群软件apt源准备\" class=\"headerlink\" title=\"3.1 K8S集群软件apt源准备\"></a>3.1 K8S集群软件apt源准备</h2><p>本次使用kubernetes社区软件源仓库或阿里云软件源仓库，建议网络不畅通的选择阿里云软件源仓库</p>\n<p>下载用于 Kubernetes 软件包仓库的公共签名密钥,所有仓库都使用相同的签名密钥，因此你可以忽略URL中的版本：</p>\n<ul>\n<li>K8S社区软件源仓库签名文件下载</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\"><br>~<span class=\"hljs-comment\"># curl -fsSL https://pkgs.k8s.io/core:/stable:/v1.32/deb/Release.key | sudo gpg --dearmor -o /etc/apt/keyrings/kubernetes-apt-keyring.gpg</span><br>~<span class=\"hljs-comment\"># ls /etc/apt/keyrings/kubernetes-apt-keyring.gpg</span><br></code></pre></td></tr></table></figure>\n\n<ul>\n<li>阿里云软件源仓库签名文件下载</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># curl -fsSL https://mirrors.aliyun.com/kubernetes-new/core/stable/v1.32/deb/Release.key | gpg --dearmor -o /etc/apt/keyrings/kubernetes-apt-keyring.gpg</span><br></code></pre></td></tr></table></figure>\n\n<h3 id=\"添加-Kubernetes-apt-仓库\"><a href=\"#添加-Kubernetes-apt-仓库\" class=\"headerlink\" title=\"添加 Kubernetes apt 仓库\"></a>添加 Kubernetes apt 仓库</h3><p>请注意，此仓库仅包含适用于 Kubernetes 1.32.3 的软件包； 对于其他 Kubernetes 次要版本，则需要更改 URL 中的 Kubernetes 次要版本以匹配你所需的次要版本 。</p>\n<p>此操作会覆盖 /etc/apt/sources.list.d/kubernetes.list 中现存的所有配置，如果有的情况下。</p>\n<h4 id=\"K8S社区\"><a href=\"#K8S社区\" class=\"headerlink\" title=\"K8S社区\"></a>K8S社区</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># echo &#x27;deb [signed-by=/etc/apt/keyrings/kubernetes-apt-keyring.gpg] https://pkgs.k8s.io/core:/stable:/v1.32/deb/ /&#x27; | sudo tee /etc/apt/sources.list.d/kubernetes.list</span><br></code></pre></td></tr></table></figure>\n\n<h4 id=\"阿里云\"><a href=\"#阿里云\" class=\"headerlink\" title=\"阿里云\"></a>阿里云</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># echo &quot;deb [signed-by=/etc/apt/keyrings/kubernetes-apt-keyring.gpg] https://mirrors.aliyun.com/kubernetes-new/core/stable/v1.32/deb/ /&quot; | tee /etc/apt/sources.list.d/kubernetes.list</span><br></code></pre></td></tr></table></figure>\n\n\n<p>更新 apt 包索引</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># sudo apt-get update</span><br></code></pre></td></tr></table></figure>\n\n\n\n\n<h2 id=\"3-2-K8S集群软件安装及kubelet配置\"><a href=\"#3-2-K8S集群软件安装及kubelet配置\" class=\"headerlink\" title=\"3.2 K8S集群软件安装及kubelet配置\"></a>3.2 K8S集群软件安装及kubelet配置</h2><p>所有节点均可安装</p>\n<h3 id=\"3-2-1-k8s集群软件安装\"><a href=\"#3-2-1-k8s集群软件安装\" class=\"headerlink\" title=\"3.2.1 k8s集群软件安装\"></a>3.2.1 k8s集群软件安装</h3><p>查看软件列表</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># apt-cache policy kubeadm</span><br><br>kubeadm:<br>  Installed: (none)<br>  Candidate: 1.32.3-1.1<br>  Version table:<br>     1.32.3-1.1 500<br>        500 https://mirrors.aliyun.com/kubernetes-new/core/stable/v1.32/deb  Packages<br>     1.32.2-1.1 500<br>        500 https://mirrors.aliyun.com/kubernetes-new/core/stable/v1.32/deb  Packages<br>     1.32.1-1.1 500<br>        500 https://mirrors.aliyun.com/kubernetes-new/core/stable/v1.32/deb  Packages<br>     1.32.0-1.1 500<br>        500 https://mirrors.aliyun.com/kubernetes-new/core/stable/v1.32/deb  Packages<br></code></pre></td></tr></table></figure>\n\n\n<p>查看软件列表及其依赖关系</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># apt-cache showpkg kubeadm</span><br><br>Package: kubeadm<br>Versions: <br>1.32.3-1.1 (/var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages)<br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br><br>1.32.2-1.1 (/var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages)<br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br><br>1.32.1-1.1 (/var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages)<br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br><br>1.32.0-1.1 (/var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages)<br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br> Description Language: <br>                 File: /var/lib/apt/lists/mirrors.aliyun.com_kubernetes-new_core_stable_v1.32_deb_Packages<br>                  MD5: <br><br><br>Reverse Depends: <br>  kubeadm:ppc64el,kubeadm<br>  kubeadm:s390x,kubeadm<br>  kubeadm:arm64,kubeadm<br>  kubeadm:ppc64el,kubeadm<br>  kubeadm:s390x,kubeadm<br>  kubeadm:arm64,kubeadm<br>  kubeadm:ppc64el,kubeadm<br>  kubeadm:s390x,kubeadm<br>  kubeadm:arm64,kubeadm<br>  kubeadm:ppc64el,kubeadm<br>  kubeadm:s390x,kubeadm<br>  kubeadm:arm64,kubeadm<br>Dependencies: <br>1.32.3-1.1 - cri-tools (2 1.30.0) kubeadm:ppc64el (32 (null)) kubeadm:arm64 (32 (null)) kubeadm:s390x (32 (null)) <br>1.32.2-1.1 - cri-tools (2 1.30.0) kubeadm:ppc64el (32 (null)) kubeadm:arm64 (32 (null)) kubeadm:s390x (32 (null)) <br>1.32.1-1.1 - cri-tools (2 1.30.0) kubeadm:ppc64el (32 (null)) kubeadm:arm64 (32 (null)) kubeadm:s390x (32 (null)) <br>1.32.0-1.1 - cri-tools (2 1.30.0) kubeadm:ppc64el (32 (null)) kubeadm:arm64 (32 (null)) kubeadm:s390x (32 (null)) <br>Provides: <br>1.32.3-1.1 - <br>1.32.2-1.1 - <br>1.32.1-1.1 - <br>1.32.0-1.1 - <br>Reverse Provides: <br></code></pre></td></tr></table></figure>\n\n<p>查看可用软件列表</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># apt-cache madison kubeadm</span><br><br>   kubeadm | 1.32.3-1.1 | https://mirrors.aliyun.com/kubernetes-new/core/stable/v1.32/deb  Packages<br>   kubeadm | 1.32.2-1.1 | https://mirrors.aliyun.com/kubernetes-new/core/stable/v1.32/deb  Packages<br>   kubeadm | 1.32.1-1.1 | https://mirrors.aliyun.com/kubernetes-new/core/stable/v1.32/deb  Packages<br>   kubeadm | 1.32.0-1.1 | https://mirrors.aliyun.com/kubernetes-new/core/stable/v1.32/deb  Packages<br></code></pre></td></tr></table></figure>\n\n<p>Way1：采用默认安装</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># sudo apt-get install kubelet kubeadm kubectl -y</span><br></code></pre></td></tr></table></figure>\n\n\n<p>Way2：安装指定版本(v1.32.3-1.1)</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># sudo apt-get install -y kubelet=1.32.3-1.1 kubeadm=1.32.3-1.1 kubectl=1.32.3-1.1</span><br></code></pre></td></tr></table></figure>\n\n<ul>\n<li>如有报错：</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">E: Could not get lock /var/lib/dpkg/lock-frontend. It is held by process 5005 <br>(unattended-upgr)<br> N: Be aware that removing the lock file is not a solution and may <span class=\"hljs-built_in\">break</span> your <br>system.<br> E: Unable to acquire the dpkg frontend lock (/var/lib/dpkg/lock-frontend), is <br>another process using it?<br></code></pre></td></tr></table></figure>\n<p>可稍等等</p>\n<p>锁定版本，防止后期自动更新</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># sudo apt-mark hold kubelet kubeadm kubectl</span><br></code></pre></td></tr></table></figure>\n\n\n<p>解锁版本，则可以执行更新</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># sudo apt-mark unhold kubelet kubeadm kubectl</span><br></code></pre></td></tr></table></figure>\n\n\n<h3 id=\"3-2-2-配置kubelet\"><a href=\"#3-2-2-配置kubelet\" class=\"headerlink\" title=\"3.2.2 配置kubelet\"></a>3.2.2 配置kubelet</h3><p>为了实现容器运行时使用的cgroupdriver与kubelet使用的cgroup的一致性，建议修改如下文件内容。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># nano /etc/default/kubelet</span><br> KUBELET_EXTRA_ARGS=<span class=\"hljs-string\">&quot;--cgroup-driver=systemd&quot;</span><br></code></pre></td></tr></table></figure>\n\n<ul>\n<li>设置kubelet为开机自启动，由于没有生成配置文件，集群初始化后自动启动</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># systemctl enable kubelet</span><br></code></pre></td></tr></table></figure>\n\n\n<h2 id=\"3-3-K8S集群初始化\"><a href=\"#3-3-K8S集群初始化\" class=\"headerlink\" title=\"3.3 K8S集群初始化\"></a>3.3 K8S集群初始化</h2><h3 id=\"3-3-1-查看版本\"><a href=\"#3-3-1-查看版本\" class=\"headerlink\" title=\"3.3.1 查看版本\"></a>3.3.1 查看版本</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># kubeadm version</span><br><br>kubeadm version: &amp;version.Info&#123;Major:<span class=\"hljs-string\">&quot;1&quot;</span>, Minor:<span class=\"hljs-string\">&quot;32&quot;</span>, GitVersion:<span class=\"hljs-string\">&quot;v1.32.3&quot;</span>, GitCommit:<span class=\"hljs-string\">&quot;32cc146f75aad04beaaa245a7157eb35063a9f99&quot;</span>, GitTreeState:<span class=\"hljs-string\">&quot;clean&quot;</span>, BuildDate:<span class=\"hljs-string\">&quot;2025-03-11T19:57:38Z&quot;</span>, GoVersion:<span class=\"hljs-string\">&quot;go1.23.6&quot;</span>, Compiler:<span class=\"hljs-string\">&quot;gc&quot;</span>, Platform:<span class=\"hljs-string\">&quot;linux/amd64&quot;</span>&#125;<br><br></code></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"3-3-2-生成部署配置文件\"><a href=\"#3-3-2-生成部署配置文件\" class=\"headerlink\" title=\"3.3.2 生成部署配置文件\"></a>3.3.2 生成部署配置文件</h3><p>生成kubeadm部署默认配置文件</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># kubeadm config print init-defaults &gt; /home/acanx/kubeadm-config.yaml</span><br></code></pre></td></tr></table></figure>\n\n<h4 id=\"使用kubernetes社区版容器镜像仓库\"><a href=\"#使用kubernetes社区版容器镜像仓库\" class=\"headerlink\" title=\"使用kubernetes社区版容器镜像仓库\"></a>使用kubernetes社区版容器镜像仓库</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># nano /home/acanx/kubeadm-config.yaml</span><br>root@k8s-master01:~<span class=\"hljs-comment\"># cat kubeadm-config.yaml</span><br></code></pre></td></tr></table></figure>\n\n<p>kubeadm-config.yaml文件中 的配置</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs yaml\"> <span class=\"hljs-attr\">apiVersion:</span> <span class=\"hljs-string\">kubeadm.k8s.io/v1beta3</span><br> <span class=\"hljs-string\">bootstrapTokens:-</span> <span class=\"hljs-string\">groups:-</span> <span class=\"hljs-string\">system:bootstrappers:kubeadm:default-node-token</span><br> <span class=\"hljs-attr\">token:</span> <span class=\"hljs-string\">abcdef.0123456789abcdef</span><br> <span class=\"hljs-attr\">ttl:</span> <span class=\"hljs-string\">24h0m0s</span><br> <span class=\"hljs-string\">usages:-</span> <span class=\"hljs-string\">signing-</span> <span class=\"hljs-string\">authentication</span><br> <span class=\"hljs-attr\">kind:</span> <span class=\"hljs-string\">InitConfiguration</span><br> <span class=\"hljs-attr\">localAPIEndpoint:</span><br> <span class=\"hljs-attr\">advertiseAddress:</span> <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.10</span><span class=\"hljs-number\">.140</span><br> <span class=\"hljs-attr\">bindPort:</span> <span class=\"hljs-number\">6443</span><br> <span class=\"hljs-attr\">nodeRegistration:</span><br> <span class=\"hljs-attr\">criSocket:</span> <span class=\"hljs-string\">unix:///var/run/containerd/containerd.sock</span><br> <span class=\"hljs-attr\">imagePullPolicy:</span> <span class=\"hljs-string\">IfNotPresent</span><br> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">k8s-master01</span><br> <span class=\"hljs-attr\">taints:</span> <span class=\"hljs-literal\">null</span><span class=\"hljs-string\">--</span><br><span class=\"hljs-attr\">apiServer:</span><br> <span class=\"hljs-attr\">timeoutForControlPlane:</span> <span class=\"hljs-string\">4m0s</span><br> <span class=\"hljs-attr\">apiVersion:</span> <span class=\"hljs-string\">kubeadm.k8s.io/v1beta3</span><br> <span class=\"hljs-attr\">certificatesDir:</span> <span class=\"hljs-string\">/etc/kubernetes/pki</span><br> <span class=\"hljs-attr\">clusterName:</span> <span class=\"hljs-string\">kubernetes</span><br> <span class=\"hljs-attr\">controllerManager:</span> &#123;&#125;<br> <span class=\"hljs-attr\">dns:</span> &#123;&#125;<br> <span class=\"hljs-attr\">etcd:</span><br> <span class=\"hljs-attr\">local:</span><br> <span class=\"hljs-attr\">dataDir:</span> <span class=\"hljs-string\">/var/lib/etcd</span><br> <span class=\"hljs-attr\">imageRepository:</span> <span class=\"hljs-string\">registry.k8s.io</span><br> <span class=\"hljs-attr\">kind:</span> <span class=\"hljs-string\">ClusterConfiguration</span><br> <span class=\"hljs-attr\">kubernetesVersion:</span> <span class=\"hljs-number\">1.30</span><span class=\"hljs-number\">.0</span><br> <span class=\"hljs-attr\">networking:</span><br> <span class=\"hljs-attr\">dnsDomain:</span> <span class=\"hljs-string\">cluster.local</span><br> <span class=\"hljs-attr\">serviceSubnet:</span> <span class=\"hljs-number\">10.96</span><span class=\"hljs-number\">.0</span><span class=\"hljs-number\">.0</span><span class=\"hljs-string\">/12</span><br> <span class=\"hljs-attr\">podSubnet:</span> <span class=\"hljs-number\">10.244</span><span class=\"hljs-number\">.0</span><span class=\"hljs-number\">.0</span><span class=\"hljs-string\">/16</span><br><span class=\"hljs-attr\">scheduler:</span> &#123;&#125;<br><span class=\"hljs-string\">--</span><br><span class=\"hljs-attr\">kind:</span> <span class=\"hljs-string\">KubeletConfiguration</span><br><span class=\"hljs-attr\">apiVersion:</span> <span class=\"hljs-string\">kubelet.config.k8s.io/v1beta1</span><br><span class=\"hljs-attr\">cgroupDriver:</span> <span class=\"hljs-string\">systemd</span><br></code></pre></td></tr></table></figure>\n\n\n\n<h4 id=\"使用阿里云容器镜像仓库\"><a href=\"#使用阿里云容器镜像仓库\" class=\"headerlink\" title=\"使用阿里云容器镜像仓库\"></a>使用阿里云容器镜像仓库</h4><p>编辑kubeadm配置文件（使用阿里云容器镜像仓库）</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># nano kubeadm-config.yaml</span><br></code></pre></td></tr></table></figure>\n\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs yaml\"><span class=\"hljs-attr\">apiVersion:</span> <span class=\"hljs-string\">kubeadm.k8s.io/v1beta4</span><br><span class=\"hljs-attr\">bootstrapTokens:</span><br><span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">groups:</span><br>  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">system:bootstrappers:kubeadm:default-node-token</span><br>  <span class=\"hljs-attr\">token:</span> <span class=\"hljs-string\">abcdef.0123456789abcdef</span><br>  <span class=\"hljs-attr\">ttl:</span> <span class=\"hljs-string\">24h0m0s</span><br>  <span class=\"hljs-attr\">usages:</span><br>  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">signing</span><br>  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">authentication</span><br><span class=\"hljs-attr\">kind:</span> <span class=\"hljs-string\">InitConfiguration</span><br><span class=\"hljs-attr\">localAPIEndpoint:</span><br>  <span class=\"hljs-attr\">advertiseAddress:</span> <span class=\"hljs-number\">192.168</span><span class=\"hljs-number\">.11</span><span class=\"hljs-number\">.161</span>   <span class=\"hljs-comment\"># 设置节点IP地址</span><br>  <span class=\"hljs-attr\">bindPort:</span> <span class=\"hljs-number\">6443</span><br><span class=\"hljs-attr\">nodeRegistration:</span><br>  <span class=\"hljs-attr\">criSocket:</span> <span class=\"hljs-string\">unix:///var/run/containerd/containerd.sock</span><br>  <span class=\"hljs-attr\">imagePullPolicy:</span> <span class=\"hljs-string\">IfNotPresent</span><br>  <span class=\"hljs-attr\">imagePullSerial:</span> <span class=\"hljs-literal\">true</span><br>  <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">k8s-master01</span>      <span class=\"hljs-comment\"># 修改节点名称</span><br>  <span class=\"hljs-attr\">taints:</span> <span class=\"hljs-literal\">null</span><br><span class=\"hljs-attr\">timeouts:</span><br>  <span class=\"hljs-attr\">controlPlaneComponentHealthCheck:</span> <span class=\"hljs-string\">4m0s</span><br>  <span class=\"hljs-attr\">discovery:</span> <span class=\"hljs-string\">5m0s</span><br>  <span class=\"hljs-attr\">etcdAPICall:</span> <span class=\"hljs-string\">2m0s</span><br>  <span class=\"hljs-attr\">kubeletHealthCheck:</span> <span class=\"hljs-string\">4m0s</span><br>  <span class=\"hljs-attr\">kubernetesAPICall:</span> <span class=\"hljs-string\">1m0s</span><br>  <span class=\"hljs-attr\">tlsBootstrap:</span> <span class=\"hljs-string\">5m0s</span><br>  <span class=\"hljs-attr\">upgradeManifests:</span> <span class=\"hljs-string\">5m0s</span><br><span class=\"hljs-meta\">---</span><br><span class=\"hljs-attr\">apiServer:</span> &#123;&#125;<br><span class=\"hljs-attr\">apiVersion:</span> <span class=\"hljs-string\">kubeadm.k8s.io/v1beta4</span><br><span class=\"hljs-attr\">caCertificateValidityPeriod:</span> <span class=\"hljs-string\">87600h0m0s</span><br><span class=\"hljs-attr\">certificateValidityPeriod:</span> <span class=\"hljs-string\">8760h0m0s</span><br><span class=\"hljs-attr\">certificatesDir:</span> <span class=\"hljs-string\">/etc/kubernetes/pki</span><br><span class=\"hljs-attr\">clusterName:</span> <span class=\"hljs-string\">kubernetes</span><br><span class=\"hljs-attr\">controllerManager:</span> &#123;&#125;<br><span class=\"hljs-attr\">dns:</span> &#123;&#125;<br><span class=\"hljs-attr\">encryptionAlgorithm:</span> <span class=\"hljs-string\">RSA-2048</span><br><span class=\"hljs-attr\">etcd:</span><br>  <span class=\"hljs-attr\">local:</span><br>    <span class=\"hljs-attr\">dataDir:</span> <span class=\"hljs-string\">/var/lib/etcd</span><br><span class=\"hljs-attr\">imageRepository:</span> <span class=\"hljs-string\">registry.aliyuncs.com/google_containers</span>   <span class=\"hljs-comment\"># 修改镜像地址</span><br><span class=\"hljs-attr\">kind:</span> <span class=\"hljs-string\">ClusterConfiguration</span><br><span class=\"hljs-attr\">kubernetesVersion:</span> <span class=\"hljs-number\">1.32</span><span class=\"hljs-number\">.0</span><br><span class=\"hljs-attr\">networking:</span><br>  <span class=\"hljs-attr\">dnsDomain:</span> <span class=\"hljs-string\">cluster.local</span><br>  <span class=\"hljs-attr\">serviceSubnet:</span> <span class=\"hljs-number\">10.96</span><span class=\"hljs-number\">.0</span><span class=\"hljs-number\">.0</span><span class=\"hljs-string\">/12</span><br>  <span class=\"hljs-attr\">podSubnet:</span> <span class=\"hljs-number\">10.244</span><span class=\"hljs-number\">.0</span><span class=\"hljs-number\">.0</span><span class=\"hljs-string\">/16</span>    <span class=\"hljs-comment\"># 可按需修改，原则：不与已有的节点网段重合</span><br><span class=\"hljs-attr\">proxy:</span> &#123;&#125;<br><span class=\"hljs-attr\">scheduler:</span> &#123;&#125;<br><span class=\"hljs-meta\">---</span><br><span class=\"hljs-attr\">kind:</span> <span class=\"hljs-string\">KubeletConfiguration</span>                   <span class=\"hljs-comment\"># 最后四行是补加的</span><br><span class=\"hljs-attr\">apiVersion:</span> <span class=\"hljs-string\">kubelet.config.k8s.io/v1beta1</span><br><span class=\"hljs-attr\">cgroupDriver:</span> <span class=\"hljs-string\">systemd</span><br></code></pre></td></tr></table></figure>\n\n<h3 id=\"3-3-3-查看并下载镜像\"><a href=\"#3-3-3-查看并下载镜像\" class=\"headerlink\" title=\"3.3.3 查看并下载镜像\"></a>3.3.3 查看并下载镜像</h3><h4 id=\"查看及使用Kubernetes社区镜像仓库下载镜像\"><a href=\"#查看及使用Kubernetes社区镜像仓库下载镜像\" class=\"headerlink\" title=\"查看及使用Kubernetes社区镜像仓库下载镜像\"></a>查看及使用Kubernetes社区镜像仓库下载镜像</h4><p>查看镜像列表（K8S社区镜像仓库）</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># kubeadm config images list   # 查看kubernetes镜像默认版本</span><br><br>root@k8s-master01:~<span class=\"hljs-comment\"># kubeadm config images list --kubernetes-version=v1.32.3    # 指定kubernetes镜像版本</span><br><br>registry.k8s.io/kube-apiserver:v1.32.3<br>registry.k8s.io/kube-controller-manager:v1.32.3<br>registry.k8s.io/kube-scheduler:v1.32.3<br>registry.k8s.io/kube-proxy:v1.32.3<br>registry.k8s.io/coredns/coredns:v1.11.3<br>registry.k8s.io/pause:3.10<br>registry.k8s.io/etcd:3.5.16-0<br></code></pre></td></tr></table></figure>\n\n\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># kubeadm config images pull           # 默认从K8S社区镜像仓库下载镜像</span><br><br>[config/images] Pulled registry.k8s.io/kube-apiserver:v1.32.3<br>[config/images] Pulled registry.k8s.io/kube-controller-manager:v1.32.3<br>[config/images] Pulled registry.k8s.io/kube-scheduler:v1.32.3<br>[config/images] Pulled registry.k8s.io/kube-proxy:v1.32.3<br>[config/images] Pulled registry.k8s.io/coredns/coredns:v1.11.3<br>[config/images] Pulled registry.k8s.io/pause:3.10<br>[config/images] Pulled registry.k8s.io/etcd:3.5.16-0<br></code></pre></td></tr></table></figure>\n\n\n<h4 id=\"查看及使用阿里云容器镜像仓库下载镜像\"><a href=\"#查看及使用阿里云容器镜像仓库下载镜像\" class=\"headerlink\" title=\"查看及使用阿里云容器镜像仓库下载镜像\"></a>查看及使用阿里云容器镜像仓库下载镜像</h4><p>查看镜像列表（阿里云容器镜像仓库）</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># kubeadm config images list --image-repository registry.aliyuncs.com/google_containers</span><br><br>registry.aliyuncs.com/google_containers/kube-apiserver:v1.32.3<br>registry.aliyuncs.com/google_containers/kube-controller-manager:v1.32.3<br>registry.aliyuncs.com/google_containers/kube-scheduler:v1.32.3<br>registry.aliyuncs.com/google_containers/kube-proxy:v1.32.3<br>registry.aliyuncs.com/google_containers/coredns:v1.11.3<br>registry.aliyuncs.com/google_containers/pause:3.10<br>registry.aliyuncs.com/google_containers/etcd:3.5.16-0<br></code></pre></td></tr></table></figure>\n\n<p>使用阿里云容器镜像仓库下载</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># kubeadm config images pull --image-repository registry.aliyuncs.com/google_containers --cri-socket=unix:///run/containerd/containerd.sock</span><br><br>[config/images] Pulled registry.aliyuncs.com/google_containers/kube-apiserver:v1.32.3<br>[config/images] Pulled registry.aliyuncs.com/google_containers/kube-controller-manager:v1.32.3<br>[config/images] Pulled registry.aliyuncs.com/google_containers/kube-scheduler:v1.32.3<br>[config/images] Pulled registry.aliyuncs.com/google_containers/kube-proxy:v1.32.3<br>[config/images] Pulled registry.aliyuncs.com/google_containers/coredns:v1.11.3<br>[config/images] Pulled registry.aliyuncs.com/google_containers/pause:3.10<br>[config/images] Pulled registry.aliyuncs.com/google_containers/etcd:3.5.16-0<br></code></pre></td></tr></table></figure>\n\n\n<h4 id=\"查看下载的镜像\"><a href=\"#查看下载的镜像\" class=\"headerlink\" title=\"查看下载的镜像\"></a>查看下载的镜像</h4><p>查看本地下载的containerd镜像</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># crictl images</span><br><br>WARN[0000] Config <span class=\"hljs-string\">&quot;/etc/crictl.yaml&quot;</span> does not exist, trying next: <span class=\"hljs-string\">&quot;/usr/bin/crictl.yaml&quot;</span> <br>WARN[0000] Image connect using default endpoints: [unix:///run/containerd/containerd.sock unix:///run/crio/crio.sock unix:///var/run/cri-dockerd.sock]. As the default settings are now deprecated, you should <span class=\"hljs-built_in\">set</span> the endpoint instead. <br>IMAGE                                                             TAG                 IMAGE ID            SIZE<br>registry.aliyuncs.com/google_containers/coredns                   v1.11.3             c69fa2e9cbf5f       18.6MB<br>registry.aliyuncs.com/google_containers/etcd                      3.5.16-0            a9e7e6b294baf       57.7MB<br>registry.aliyuncs.com/google_containers/kube-apiserver            v1.32.0             c2e17b8d0f4a3       28.7MB<br>registry.aliyuncs.com/google_containers/kube-apiserver            v1.32.3             f8bdc4cfa0651       28.7MB<br>registry.aliyuncs.com/google_containers/kube-controller-manager   v1.32.0             8cab3d2a8bd0f       26.3MB<br>registry.aliyuncs.com/google_containers/kube-controller-manager   v1.32.3             085818208a521       26.3MB<br>registry.aliyuncs.com/google_containers/kube-proxy                v1.32.0             040f9f8aac8cd       30.9MB<br>registry.aliyuncs.com/google_containers/kube-proxy                v1.32.3             a1ae78fd2f9d8       30.9MB<br>registry.aliyuncs.com/google_containers/kube-scheduler            v1.32.0             a389e107f4ff1       20.7MB<br>registry.aliyuncs.com/google_containers/kube-scheduler            v1.32.3             b4260bf5078ab       20.7MB<br>registry.aliyuncs.com/google_containers/pause                     3.10                873ed75102791       320kB<br></code></pre></td></tr></table></figure>\n\n\n\n\n<h3 id=\"3-3-4-使用部署配置文件初始化K8S集群\"><a href=\"#3-3-4-使用部署配置文件初始化K8S集群\" class=\"headerlink\" title=\"3.3.4 使用部署配置文件初始化K8S集群\"></a>3.3.4 使用部署配置文件初始化K8S集群</h3><p>使用命令初始化Kubeadm（只在Master节点操作）</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># kubeadm init --config /home/acanx/kubeadm-config.yaml  --upload-certs --v=9  --cri-socket=unix:///run/containerd/containerd.sock</span><br></code></pre></td></tr></table></figure>\n<p>输出内容如下：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">I0322 20:07:35.623621    4886 initconfiguration.go:261] loading configuration from <span class=\"hljs-string\">&quot;/home/acanx/kubeadm-config.yaml&quot;</span><br>[init] Using Kubernetes version: v1.32.0<br>[preflight] Running pre-flight checks<br>I0322 20:07:35.633576    4886 checks.go:561] validating Kubernetes and kubeadm version<br>I0322 20:07:35.633610    4886 checks.go:166] validating <span class=\"hljs-keyword\">if</span> the firewall is enabled and active<br>I0322 20:07:35.651826    4886 checks.go:201] validating availability of port 6443<br>I0322 20:07:35.652309    4886 checks.go:201] validating availability of port 10259<br>I0322 20:07:35.652373    4886 checks.go:201] validating availability of port 10257<br>I0322 20:07:35.652434    4886 checks.go:278] validating the existence of file /etc/kubernetes/manifests/kube-apiserver.yaml<br>I0322 20:07:35.652491    4886 checks.go:278] validating the existence of file /etc/kubernetes/manifests/kube-controller-manager.yaml<br>I0322 20:07:35.652520    4886 checks.go:278] validating the existence of file /etc/kubernetes/manifests/kube-scheduler.yaml<br>I0322 20:07:35.652560    4886 checks.go:278] validating the existence of file /etc/kubernetes/manifests/etcd.yaml<br>I0322 20:07:35.652582    4886 checks.go:428] validating <span class=\"hljs-keyword\">if</span> the connectivity <span class=\"hljs-built_in\">type</span> is via proxy or direct<br>I0322 20:07:35.652631    4886 checks.go:467] validating http connectivity to first IP address <span class=\"hljs-keyword\">in</span> the CIDR<br>I0322 20:07:35.652672    4886 checks.go:467] validating http connectivity to first IP address <span class=\"hljs-keyword\">in</span> the CIDR<br>I0322 20:07:35.652699    4886 checks.go:102] validating the container runtime<br>I0322 20:07:35.653795    4886 checks.go:637] validating whether swap is enabled or not<br>I0322 20:07:35.653855    4886 checks.go:368] validating the presence of executable ip<br>I0322 20:07:35.653947    4886 checks.go:368] validating the presence of executable iptables<br>I0322 20:07:35.654055    4886 checks.go:368] validating the presence of executable mount<br>I0322 20:07:35.654080    4886 checks.go:368] validating the presence of executable nsenter<br>I0322 20:07:35.654117    4886 checks.go:368] validating the presence of executable ethtool<br>I0322 20:07:35.654145    4886 checks.go:368] validating the presence of executable tc<br>I0322 20:07:35.654182    4886 checks.go:368] validating the presence of executable touch<br>I0322 20:07:35.654210    4886 checks.go:514] running all checks<br>I0322 20:07:35.680418    4886 checks.go:399] checking whether the given node name is valid and reachable using net.LookupHost<br>I0322 20:07:35.680635    4886 checks.go:603] validating kubelet version<br>I0322 20:07:35.753081    4886 checks.go:128] validating <span class=\"hljs-keyword\">if</span> the <span class=\"hljs-string\">&quot;kubelet&quot;</span> service is enabled and active<br>I0322 20:07:35.774195    4886 checks.go:201] validating availability of port 10250<br>I0322 20:07:35.774355    4886 checks.go:327] validating the contents of file /proc/sys/net/ipv4/ip_forward<br>I0322 20:07:35.774477    4886 checks.go:201] validating availability of port 2379<br>I0322 20:07:35.774568    4886 checks.go:201] validating availability of port 2380<br>I0322 20:07:35.774631    4886 checks.go:241] validating the existence and emptiness of directory /var/lib/etcd<br>[preflight] Pulling images required <span class=\"hljs-keyword\">for</span> setting up a Kubernetes cluster<br>[preflight] This might take a minute or two, depending on the speed of your internet connection<br>[preflight] You can also perform this action beforehand using <span class=\"hljs-string\">&#x27;kubeadm config images pull&#x27;</span><br>I0322 20:07:35.777659    4886 checks.go:832] using image pull policy: IfNotPresent<br>I0322 20:07:35.779807    4886 checks.go:868] pulling: registry.aliyuncs.com/google_containers/kube-apiserver:v1.32.0<br>I0322 20:08:11.358938    4886 checks.go:868] pulling: registry.aliyuncs.com/google_containers/kube-controller-manager:v1.32.0<br>I0322 20:08:38.140994    4886 checks.go:868] pulling: registry.aliyuncs.com/google_containers/kube-scheduler:v1.32.0<br>I0322 20:09:00.270475    4886 checks.go:868] pulling: registry.aliyuncs.com/google_containers/kube-proxy:v1.32.0<br>I0322 20:09:26.947685    4886 checks.go:863] image exists: registry.aliyuncs.com/google_containers/coredns:v1.11.3<br>I0322 20:09:26.948207    4886 checks.go:863] image exists: registry.aliyuncs.com/google_containers/pause:3.10<br>I0322 20:09:26.948594    4886 checks.go:863] image exists: registry.aliyuncs.com/google_containers/etcd:3.5.16-0<br>[certs] Using certificateDir folder <span class=\"hljs-string\">&quot;/etc/kubernetes/pki&quot;</span><br>I0322 20:09:26.948692    4886 certs.go:112] creating a new certificate authority <span class=\"hljs-keyword\">for</span> ca<br>[certs] Generating <span class=\"hljs-string\">&quot;ca&quot;</span> certificate and key<br>I0322 20:09:27.066597    4886 certs.go:473] validating certificate period <span class=\"hljs-keyword\">for</span> ca certificate<br>[certs] Generating <span class=\"hljs-string\">&quot;apiserver&quot;</span> certificate and key<br>[certs] apiserver serving cert is signed <span class=\"hljs-keyword\">for</span> DNS names [k8s-master01 kubernetes kubernetes.default kubernetes.default.svc kubernetes.default.svc.cluster.local] and IPs [10.96.0.1 192.168.11.161]<br>[certs] Generating <span class=\"hljs-string\">&quot;apiserver-kubelet-client&quot;</span> certificate and key<br>I0322 20:09:27.313725    4886 certs.go:112] creating a new certificate authority <span class=\"hljs-keyword\">for</span> front-proxy-ca<br>[certs] Generating <span class=\"hljs-string\">&quot;front-proxy-ca&quot;</span> certificate and key<br>I0322 20:09:27.439421    4886 certs.go:473] validating certificate period <span class=\"hljs-keyword\">for</span> front-proxy-ca certificate<br>[certs] Generating <span class=\"hljs-string\">&quot;front-proxy-client&quot;</span> certificate and key<br>I0322 20:09:27.532545    4886 certs.go:112] creating a new certificate authority <span class=\"hljs-keyword\">for</span> etcd-ca<br>[certs] Generating <span class=\"hljs-string\">&quot;etcd/ca&quot;</span> certificate and key<br>I0322 20:09:27.631261    4886 certs.go:473] validating certificate period <span class=\"hljs-keyword\">for</span> etcd/ca certificate<br>[certs] Generating <span class=\"hljs-string\">&quot;etcd/server&quot;</span> certificate and key<br>[certs] etcd/server serving cert is signed <span class=\"hljs-keyword\">for</span> DNS names [k8s-master01 localhost] and IPs [192.168.11.161 127.0.0.1 ::1]<br>[certs] Generating <span class=\"hljs-string\">&quot;etcd/peer&quot;</span> certificate and key<br>[certs] etcd/peer serving cert is signed <span class=\"hljs-keyword\">for</span> DNS names [k8s-master01 localhost] and IPs [192.168.11.161 127.0.0.1 ::1]<br>[certs] Generating <span class=\"hljs-string\">&quot;etcd/healthcheck-client&quot;</span> certificate and key<br>[certs] Generating <span class=\"hljs-string\">&quot;apiserver-etcd-client&quot;</span> certificate and key<br>I0322 20:09:28.312889    4886 certs.go:78] creating new public/private key files <span class=\"hljs-keyword\">for</span> signing service account users<br>[certs] Generating <span class=\"hljs-string\">&quot;sa&quot;</span> key and public key<br>[kubeconfig] Using kubeconfig folder <span class=\"hljs-string\">&quot;/etc/kubernetes&quot;</span><br>I0322 20:09:28.495281    4886 kubeconfig.go:111] creating kubeconfig file <span class=\"hljs-keyword\">for</span> admin.conf<br>[kubeconfig] Writing <span class=\"hljs-string\">&quot;admin.conf&quot;</span> kubeconfig file<br>I0322 20:09:28.848054    4886 kubeconfig.go:111] creating kubeconfig file <span class=\"hljs-keyword\">for</span> super-admin.conf<br>[kubeconfig] Writing <span class=\"hljs-string\">&quot;super-admin.conf&quot;</span> kubeconfig file<br>I0322 20:09:29.129094    4886 kubeconfig.go:111] creating kubeconfig file <span class=\"hljs-keyword\">for</span> kubelet.conf<br>[kubeconfig] Writing <span class=\"hljs-string\">&quot;kubelet.conf&quot;</span> kubeconfig file<br>I0322 20:09:29.386206    4886 kubeconfig.go:111] creating kubeconfig file <span class=\"hljs-keyword\">for</span> controller-manager.conf<br>[kubeconfig] Writing <span class=\"hljs-string\">&quot;controller-manager.conf&quot;</span> kubeconfig file<br>I0322 20:09:29.483874    4886 kubeconfig.go:111] creating kubeconfig file <span class=\"hljs-keyword\">for</span> scheduler.conf<br>[kubeconfig] Writing <span class=\"hljs-string\">&quot;scheduler.conf&quot;</span> kubeconfig file<br>[etcd] Creating static Pod manifest <span class=\"hljs-keyword\">for</span> <span class=\"hljs-built_in\">local</span> etcd <span class=\"hljs-keyword\">in</span> <span class=\"hljs-string\">&quot;/etc/kubernetes/manifests&quot;</span><br>I0322 20:09:29.607843    4886 local.go:66] [etcd] wrote Static Pod manifest <span class=\"hljs-keyword\">for</span> a <span class=\"hljs-built_in\">local</span> etcd member to <span class=\"hljs-string\">&quot;/etc/kubernetes/manifests/etcd.yaml&quot;</span><br>[control-plane] Using manifest folder <span class=\"hljs-string\">&quot;/etc/kubernetes/manifests&quot;</span><br>[control-plane] Creating static Pod manifest <span class=\"hljs-keyword\">for</span> <span class=\"hljs-string\">&quot;kube-apiserver&quot;</span><br>I0322 20:09:29.607888    4886 manifests.go:104] [control-plane] getting StaticPodSpecs<br>I0322 20:09:29.608085    4886 certs.go:473] validating certificate period <span class=\"hljs-keyword\">for</span> CA certificate<br>I0322 20:09:29.608178    4886 manifests.go:130] [control-plane] adding volume <span class=\"hljs-string\">&quot;ca-certs&quot;</span> <span class=\"hljs-keyword\">for</span> component <span class=\"hljs-string\">&quot;kube-apiserver&quot;</span><br>I0322 20:09:29.608192    4886 manifests.go:130] [control-plane] adding volume <span class=\"hljs-string\">&quot;etc-ca-certificates&quot;</span> <span class=\"hljs-keyword\">for</span> component <span class=\"hljs-string\">&quot;kube-apiserver&quot;</span><br>I0322 20:09:29.608198    4886 manifests.go:130] [control-plane] adding volume <span class=\"hljs-string\">&quot;k8s-certs&quot;</span> <span class=\"hljs-keyword\">for</span> component <span class=\"hljs-string\">&quot;kube-apiserver&quot;</span><br>I0322 20:09:29.608206    4886 manifests.go:130] [control-plane] adding volume <span class=\"hljs-string\">&quot;usr-local-share-ca-certificates&quot;</span> <span class=\"hljs-keyword\">for</span> component <span class=\"hljs-string\">&quot;kube-apiserver&quot;</span><br>I0322 20:09:29.608214    4886 manifests.go:130] [control-plane] adding volume <span class=\"hljs-string\">&quot;usr-share-ca-certificates&quot;</span> <span class=\"hljs-keyword\">for</span> component <span class=\"hljs-string\">&quot;kube-apiserver&quot;</span><br>I0322 20:09:29.609567    4886 manifests.go:159] [control-plane] wrote static Pod manifest <span class=\"hljs-keyword\">for</span> component <span class=\"hljs-string\">&quot;kube-apiserver&quot;</span> to <span class=\"hljs-string\">&quot;/etc/kubernetes/manifests/kube-apiserver.yaml&quot;</span><br>[control-plane] Creating static Pod manifest <span class=\"hljs-keyword\">for</span> <span class=\"hljs-string\">&quot;kube-controller-manager&quot;</span><br>I0322 20:09:29.609599    4886 manifests.go:104] [control-plane] getting StaticPodSpecs<br>I0322 20:09:29.609807    4886 manifests.go:130] [control-plane] adding volume <span class=\"hljs-string\">&quot;ca-certs&quot;</span> <span class=\"hljs-keyword\">for</span> component <span class=\"hljs-string\">&quot;kube-controller-manager&quot;</span><br>I0322 20:09:29.609819    4886 manifests.go:130] [control-plane] adding volume <span class=\"hljs-string\">&quot;etc-ca-certificates&quot;</span> <span class=\"hljs-keyword\">for</span> component <span class=\"hljs-string\">&quot;kube-controller-manager&quot;</span><br>I0322 20:09:29.609824    4886 manifests.go:130] [control-plane] adding volume <span class=\"hljs-string\">&quot;flexvolume-dir&quot;</span> <span class=\"hljs-keyword\">for</span> component <span class=\"hljs-string\">&quot;kube-controller-manager&quot;</span><br>I0322 20:09:29.609835    4886 manifests.go:130] [control-plane] adding volume <span class=\"hljs-string\">&quot;k8s-certs&quot;</span> <span class=\"hljs-keyword\">for</span> component <span class=\"hljs-string\">&quot;kube-controller-manager&quot;</span><br>I0322 20:09:29.609841    4886 manifests.go:130] [control-plane] adding volume <span class=\"hljs-string\">&quot;kubeconfig&quot;</span> <span class=\"hljs-keyword\">for</span> component <span class=\"hljs-string\">&quot;kube-controller-manager&quot;</span><br>I0322 20:09:29.609846    4886 manifests.go:130] [control-plane] adding volume <span class=\"hljs-string\">&quot;usr-local-share-ca-certificates&quot;</span> <span class=\"hljs-keyword\">for</span> component <span class=\"hljs-string\">&quot;kube-controller-manager&quot;</span><br>I0322 20:09:29.609854    4886 manifests.go:130] [control-plane] adding volume <span class=\"hljs-string\">&quot;usr-share-ca-certificates&quot;</span> <span class=\"hljs-keyword\">for</span> component <span class=\"hljs-string\">&quot;kube-controller-manager&quot;</span><br>I0322 20:09:29.610610    4886 manifests.go:159] [control-plane] wrote static Pod manifest <span class=\"hljs-keyword\">for</span> component <span class=\"hljs-string\">&quot;kube-controller-manager&quot;</span> to <span class=\"hljs-string\">&quot;/etc/kubernetes/manifests/kube-controller-manager.yaml&quot;</span><br>[control-plane] Creating static Pod manifest <span class=\"hljs-keyword\">for</span> <span class=\"hljs-string\">&quot;kube-scheduler&quot;</span><br>I0322 20:09:29.610640    4886 manifests.go:104] [control-plane] getting StaticPodSpecs<br>I0322 20:09:29.610848    4886 manifests.go:130] [control-plane] adding volume <span class=\"hljs-string\">&quot;kubeconfig&quot;</span> <span class=\"hljs-keyword\">for</span> component <span class=\"hljs-string\">&quot;kube-scheduler&quot;</span><br>I0322 20:09:29.611322    4886 manifests.go:159] [control-plane] wrote static Pod manifest <span class=\"hljs-keyword\">for</span> component <span class=\"hljs-string\">&quot;kube-scheduler&quot;</span> to <span class=\"hljs-string\">&quot;/etc/kubernetes/manifests/kube-scheduler.yaml&quot;</span><br>I0322 20:09:29.611339    4886 kubelet.go:70] Stopping the kubelet<br>[kubelet-start] Writing kubelet environment file with flags to file <span class=\"hljs-string\">&quot;/var/lib/kubelet/kubeadm-flags.env&quot;</span><br>[kubelet-start] Writing kubelet configuration to file <span class=\"hljs-string\">&quot;/var/lib/kubelet/config.yaml&quot;</span><br>[kubelet-start] Starting the kubelet<br>I0322 20:09:29.948568    4886 loader.go:402] Config loaded from file:  /etc/kubernetes/admin.conf<br>I0322 20:09:29.949088    4886 envvar.go:172] <span class=\"hljs-string\">&quot;Feature gate default state&quot;</span> feature=<span class=\"hljs-string\">&quot;ClientsAllowCBOR&quot;</span> enabled=<span class=\"hljs-literal\">false</span><br>I0322 20:09:29.949115    4886 envvar.go:172] <span class=\"hljs-string\">&quot;Feature gate default state&quot;</span> feature=<span class=\"hljs-string\">&quot;ClientsPreferCBOR&quot;</span> enabled=<span class=\"hljs-literal\">false</span><br>I0322 20:09:29.949124    4886 envvar.go:172] <span class=\"hljs-string\">&quot;Feature gate default state&quot;</span> feature=<span class=\"hljs-string\">&quot;InformerResourceVersion&quot;</span> enabled=<span class=\"hljs-literal\">false</span><br>I0322 20:09:29.949144    4886 envvar.go:172] <span class=\"hljs-string\">&quot;Feature gate default state&quot;</span> feature=<span class=\"hljs-string\">&quot;WatchListClient&quot;</span> enabled=<span class=\"hljs-literal\">false</span><br>[wait-control-plane] Waiting <span class=\"hljs-keyword\">for</span> the kubelet to boot up the control plane as static Pods from directory <span class=\"hljs-string\">&quot;/etc/kubernetes/manifests&quot;</span><br>[kubelet-check] Waiting <span class=\"hljs-keyword\">for</span> a healthy kubelet at http://127.0.0.1:10248/healthz. This can take up to 4m0s<br>[kubelet-check] The kubelet is healthy after 502.456949ms<br>[api-check] Waiting <span class=\"hljs-keyword\">for</span> a healthy API server. This can take up to 4m0s<br>I0322 20:09:30.452200    4886 wait.go:220] <span class=\"hljs-string\">&quot;Request Body&quot;</span> body=<span class=\"hljs-string\">&quot;&quot;</span><br>I0322 20:09:30.452302    4886 round_trippers.go:473] curl -v -XGET  -H <span class=\"hljs-string\">&quot;Accept: application/json, */*&quot;</span> -H <span class=\"hljs-string\">&quot;User-Agent: kubeadm/v1.32.3 (linux/amd64) kubernetes/32cc146&quot;</span> <span class=\"hljs-string\">&#x27;https://192.168.11.161:6443/healthz?timeout=10s&#x27;</span><br>I0322 20:09:30.452515    4886 round_trippers.go:515] HTTP Trace: Dial to tcp:192.168.11.161:6443 failed: dial tcp 192.168.11.161:6443: connect: connection refused<br>I0322 20:09:30.452547    4886 round_trippers.go:560] GET https://192.168.11.161:6443/healthz?timeout=10s  <span class=\"hljs-keyword\">in</span> 0 milliseconds<br>I0322 20:09:30.452664    4886 round_trippers.go:577] HTTP Statistics: DNSLookup 0 ms Dial 0 ms TLSHandshake 0 ms Duration 0 ms<br>I0322 20:09:30.452746    4886 round_trippers.go:584] Response Headers:<br>I0322 20:09:30.952488    4886 wait.go:220] <span class=\"hljs-string\">&quot;Request Body&quot;</span> body=<span class=\"hljs-string\">&quot;&quot;</span><br>I0322 20:09:30.952695    4886 round_trippers.go:473] curl -v -XGET  -H <span class=\"hljs-string\">&quot;Accept: application/json, */*&quot;</span> -H <span class=\"hljs-string\">&quot;User-Agent: kubeadm/v1.32.3 (linux/amd64) kubernetes/32cc146&quot;</span> <span class=\"hljs-string\">&#x27;https://192.168.11.161:6443/healthz?timeout=10s&#x27;</span><br>I0322 20:09:30.953055    4886 round_trippers.go:515] HTTP Trace: Dial to tcp:192.168.11.161:6443 failed: dial tcp 192.168.11.161:6443: connect: connection refused<br>I0322 20:09:30.953141    4886 round_trippers.go:560] GET https://192.168.11.161:6443/healthz?timeout=10s  <span class=\"hljs-keyword\">in</span> 0 milliseconds<br>I0322 20:09:30.953178    4886 round_trippers.go:577] HTTP Statistics: DNSLookup 0 ms Dial 0 ms TLSHandshake 0 ms Duration 0 ms<br>I0322 20:09:30.953196    4886 round_trippers.go:584] Response Headers:<br>I0322 20:09:31.453072    4886 wait.go:220] <span class=\"hljs-string\">&quot;Request Body&quot;</span> body=<span class=\"hljs-string\">&quot;&quot;</span><br>I0322 20:09:31.453425    4886 round_trippers.go:473] curl -v -XGET  -H <span class=\"hljs-string\">&quot;Accept: application/json, */*&quot;</span> -H <span class=\"hljs-string\">&quot;User-Agent: kubeadm/v1.32.3 (linux/amd64) kubernetes/32cc146&quot;</span> <span class=\"hljs-string\">&#x27;https://192.168.11.161:6443/healthz?timeout=10s&#x27;</span><br>I0322 20:09:31.453892    4886 round_trippers.go:515] HTTP Trace: Dial to tcp:192.168.11.161:6443 failed: dial tcp 192.168.11.161:6443: connect: connection refused<br>I0322 20:09:31.453935    4886 round_trippers.go:560] GET https://192.168.11.161:6443/healthz?timeout=10s  <span class=\"hljs-keyword\">in</span> 0 milliseconds<br>I0322 20:09:31.453947    4886 round_trippers.go:577] HTTP Statistics: DNSLookup 0 ms Dial 0 ms TLSHandshake 0 ms Duration 0 ms<br>I0322 20:09:31.453955    4886 round_trippers.go:584] Response Headers:<br>I0322 20:09:31.952836    4886 wait.go:220] <span class=\"hljs-string\">&quot;Request Body&quot;</span> body=<span class=\"hljs-string\">&quot;&quot;</span><br>I0322 20:09:31.953094    4886 round_trippers.go:473] curl -v -XGET  -H <span class=\"hljs-string\">&quot;Accept: application/json, */*&quot;</span> -H <span class=\"hljs-string\">&quot;User-Agent: kubeadm/v1.32.3 (linux/amd64) kubernetes/32cc146&quot;</span> <span class=\"hljs-string\">&#x27;https://192.168.11.161:6443/healthz?timeout=10s&#x27;</span><br>I0322 20:09:31.953553    4886 round_trippers.go:517] HTTP Trace: Dial to tcp:192.168.11.161:6443 succeed<br>I0322 20:09:33.315605    4886 round_trippers.go:560] GET https://192.168.11.161:6443/healthz?timeout=10s 403 Forbidden <span class=\"hljs-keyword\">in</span> 1362 milliseconds<br>I0322 20:09:33.315644    4886 round_trippers.go:577] HTTP Statistics: DNSLookup 0 ms Dial 0 ms TLSHandshake 1336 ms ServerProcessing 25 ms Duration 1362 ms<br>I0322 20:09:33.315657    4886 round_trippers.go:584] Response Headers:<br>I0322 20:09:33.315670    4886 round_trippers.go:587]     X-Content-Type-Options: nosniff<br>I0322 20:09:33.315701    4886 round_trippers.go:587]     X-Kubernetes-Pf-Flowschema-Uid: <br>I0322 20:09:33.315710    4886 round_trippers.go:587]     X-Kubernetes-Pf-Prioritylevel-Uid: <br>I0322 20:09:33.315717    4886 round_trippers.go:587]     Content-Length: 192<br>I0322 20:09:33.315723    4886 round_trippers.go:587]     Date: Sat, 22 Mar 2025 12:09:33 GMT<br>I0322 20:09:33.315731    4886 round_trippers.go:587]     Audit-Id: 989b38d0-29d4-4450-b564-12e6142c52b7<br>I0322 20:09:33.315737    4886 round_trippers.go:587]     Cache-Control: no-cache, private<br>I0322 20:09:33.315741    4886 round_trippers.go:587]     Content-Type: application/json<br>I0322 20:09:33.316997    4886 wait.go:220] <span class=\"hljs-string\">&quot;Response Body&quot;</span> body=&lt;<br>\t&#123;<span class=\"hljs-string\">&quot;kind&quot;</span>:<span class=\"hljs-string\">&quot;Status&quot;</span>,<span class=\"hljs-string\">&quot;apiVersion&quot;</span>:<span class=\"hljs-string\">&quot;v1&quot;</span>,<span class=\"hljs-string\">&quot;metadata&quot;</span>:&#123;&#125;,<span class=\"hljs-string\">&quot;status&quot;</span>:<span class=\"hljs-string\">&quot;Failure&quot;</span>,<span class=\"hljs-string\">&quot;message&quot;</span>:<span class=\"hljs-string\">&quot;forbidden: User \\&quot;kubernetes-admin\\&quot; cannot get path \\&quot;/healthz\\&quot;&quot;</span>,<span class=\"hljs-string\">&quot;reason&quot;</span>:<span class=\"hljs-string\">&quot;Forbidden&quot;</span>,<span class=\"hljs-string\">&quot;details&quot;</span>:&#123;&#125;,<span class=\"hljs-string\">&quot;code&quot;</span>:403&#125;<br> &gt;<br><br>.......   中间冗长的日志省略<br><br>I0322 20:09:37.294961    4886 round_trippers.go:473] curl -v -XPOST  -H <span class=\"hljs-string\">&quot;User-Agent: kubeadm/v1.32.3 (linux/amd64) kubernetes/32cc146&quot;</span> -H <span class=\"hljs-string\">&quot;Accept: application/vnd.kubernetes.protobuf,application/json&quot;</span> -H <span class=\"hljs-string\">&quot;Content-Type: application/vnd.kubernetes.protobuf&quot;</span> <span class=\"hljs-string\">&#x27;https://192.168.11.161:6443/apis/rbac.authorization.k8s.io/v1/namespaces/kube-system/rolebindings?timeout=10s&#x27;</span><br>I0322 20:09:37.298583    4886 round_trippers.go:560] POST https://192.168.11.161:6443/apis/rbac.authorization.k8s.io/v1/namespaces/kube-system/rolebindings?timeout=10s 201 Created <span class=\"hljs-keyword\">in</span> 3 milliseconds<br>I0322 20:09:37.298609    4886 round_trippers.go:577] HTTP Statistics: GetConnection 0 ms ServerProcessing 3 ms Duration 3 ms<br>I0322 20:09:37.298634    4886 round_trippers.go:584] Response Headers:<br>I0322 20:09:37.298649    4886 round_trippers.go:587]     X-Kubernetes-Pf-Flowschema-Uid: 9a8a526f-0630-4d03-b851-7ace48e8dc05<br>I0322 20:09:37.298661    4886 round_trippers.go:587]     X-Kubernetes-Pf-Prioritylevel-Uid: d044472a-2a80-46df-8bc8-7d94366f6e34<br>I0322 20:09:37.298667    4886 round_trippers.go:587]     Content-Length: 385<br>I0322 20:09:37.298675    4886 round_trippers.go:587]     Date: Sat, 22 Mar 2025 12:09:37 GMT<br>I0322 20:09:37.298680    4886 round_trippers.go:587]     Audit-Id: ece06481-523b-4fe4-9d2c-2d369eceecc1<br>I0322 20:09:37.298690    4886 round_trippers.go:587]     Cache-Control: no-cache, private<br>I0322 20:09:37.298695    4886 round_trippers.go:587]     Content-Type: application/vnd.kubernetes.protobuf<br>I0322 20:09:37.298744    4886 type.go:252] <span class=\"hljs-string\">&quot;Response Body&quot;</span> body=&lt;<br>\t00000000  6b 38 73 00 0a 2b 0a 1c  72 62 61 63 2e 61 75 74  |k8s..+..rbac.aut|<br>\t00000010  68 6f 72 69 7a 61 74 69  6f 6e 2e 6b 38 73 2e 69  |horization.k8s.i|<br>\t00000020  6f 2f 76 31 12 0b 52 6f  6c 65 42 69 6e 64 69 6e  |o/v1..RoleBindin|<br>\t00000030  67 12 c9 02 0a c0 01 0a  0a 6b 75 62 65 2d 70 72  |g........kube-pr|<br>\t00000040  6f 78 79 12 00 1a 0b 6b  75 62 65 2d 73 79 73 74  |oxy....kube-syst|<br>\t00000050  65 6d 22 00 2a 24 63 38  62 62 36 66 63 64 2d 38  |em<span class=\"hljs-string\">&quot;.*<span class=\"hljs-variable\">$c8bb6fcd</span>-8|</span><br><span class=\"hljs-string\">\t00000060  66 35 38 2d 34 35 35 34  2d 39 66 36 30 2d 38 39  |f58-4554-9f60-89|</span><br><span class=\"hljs-string\">\t00000070  39 32 61 39 65 36 64 36  64 39 32 03 33 30 33 38  |92a9e6d6d92.3038|</span><br><span class=\"hljs-string\">\t00000080  00 42 08 08 81 d1 fa be  06 10 00 8a 01 69 0a 07  |.B...........i..|</span><br><span class=\"hljs-string\">\t00000090  6b 75 62 65 61 64 6d 12  06 55 70 64 61 74 65 1a  |kubeadm..Update.|</span><br><span class=\"hljs-string\">\t000000a0  1c 72 62 61 63 2e 61 75  74 68 6f 72 69 7a 61 74  |.rbac.authorizat|</span><br><span class=\"hljs-string\">\t000000b0  69 6f 6e 2e 6b 38 73 2e  69 6f 2f 76 31 22 08 08  |ion.k8s.io/v1&quot;</span>..|<br>\t000000c0  81 d1 fa be 06 10 00 32  08 46 69 65 6c 64 73 56  |.......2.FieldsV|<br>\t000000d0  31 3a 22 0a 20 7b 22 66  3a 72 6f 6c 65 52 65 66  |1:<span class=\"hljs-string\">&quot;. &#123;&quot;</span>f:roleRef|<br>\t000000e0  22 3a 7b 7d 2c 22 66 3a  73 75 62 6a 65 63 74 73  |<span class=\"hljs-string\">&quot;:&#123;&#125;,&quot;</span>f:subjects|<br>\t000000f0  22 3a 7b 7d 7d 42 00 12  55 0a 05 47 72 6f 75 70  |<span class=\"hljs-string\">&quot;:&#123;&#125;&#125;B..U..Group|</span><br><span class=\"hljs-string\">\t00000100  12 19 72 62 61 63 2e 61  75 74 68 6f 72 69 7a 61  |..rbac.authoriza|</span><br><span class=\"hljs-string\">\t00000110  74 69 6f 6e 2e 6b 38 73  2e 69 6f 1a 2f 73 79 73  |tion.k8s.io./sys|</span><br><span class=\"hljs-string\">\t00000120  74 65 6d 3a 62 6f 6f 74  73 74 72 61 70 70 65 72  |tem:bootstrapper|</span><br><span class=\"hljs-string\">\t00000130  73 3a 6b 75 62 65 61 64  6d 3a 64 65 66 61 75 6c  |s:kubeadm:defaul|</span><br><span class=\"hljs-string\">\t00000140  74 2d 6e 6f 64 65 2d 74  6f 6b 65 6e 22 00 1a 2d  |t-node-token&quot;</span>..-|<br>\t00000150  0a 19 72 62 61 63 2e 61  75 74 68 6f 72 69 7a 61  |..rbac.authoriza|<br>\t00000160  74 69 6f 6e 2e 6b 38 73  2e 69 6f 12 04 52 6f 6c  |tion.k8s.io..Rol|<br>\t00000170  65 1a 0a 6b 75 62 65 2d  70 72 6f 78 79 1a 00 22  |e..kube-proxy..<span class=\"hljs-string\">&quot;|</span><br><span class=\"hljs-string\">\t00000180  00                                                |.|</span><br><span class=\"hljs-string\"> &gt;</span><br><span class=\"hljs-string\">[addons] Applied essential addon: kube-proxy</span><br><span class=\"hljs-string\">I0322 20:09:37.299409    4886 loader.go:402] Config loaded from file:  /etc/kubernetes/admin.conf</span><br><span class=\"hljs-string\">I0322 20:09:37.300120    4886 loader.go:402] Config loaded from file:  /etc/kubernetes/admin.conf</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">Your Kubernetes control-plane has initialized successfully!</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">To start using your cluster, you need to run the following as a regular user:</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">  mkdir -p <span class=\"hljs-variable\">$HOME</span>/.kube</span><br><span class=\"hljs-string\">  sudo cp -i /etc/kubernetes/admin.conf <span class=\"hljs-variable\">$HOME</span>/.kube/config</span><br><span class=\"hljs-string\">  sudo chown <span class=\"hljs-subst\">$(id -u)</span>:<span class=\"hljs-subst\">$(id -g)</span> <span class=\"hljs-variable\">$HOME</span>/.kube/config</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">Alternatively, if you are the root user, you can run:</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">  export KUBECONFIG=/etc/kubernetes/admin.conf</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">You should now deploy a pod network to the cluster.</span><br><span class=\"hljs-string\">Run &quot;</span>kubectl apply -f [podnetwork].yaml<span class=\"hljs-string\">&quot; with one of the options listed at:</span><br><span class=\"hljs-string\">  https://kubernetes.io/docs/concepts/cluster-administration/addons/</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">Then you can join any number of worker nodes by running the following on each as root:</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">kubeadm join 192.168.11.161:6443 --token abcdef.0123456789abcdef \\</span><br><span class=\"hljs-string\">\t--discovery-token-ca-cert-hash sha256:c7a1d928a82c30bec6dec880092339e64309b24cc01782d8a9d9c6c0ecfde58f </span><br><span class=\"hljs-string\"></span><br></code></pre></td></tr></table></figure>\n\n\n<h2 id=\"3-4-准备kubectl配置文件\"><a href=\"#3-4-准备kubectl配置文件\" class=\"headerlink\" title=\"3.4 准备kubectl配置文件\"></a>3.4 准备kubectl配置文件</h2><p>以下操作仅在Master节点上进行。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">mkdir -p <span class=\"hljs-variable\">$HOME</span>/.kube<br>sudo cp -i /etc/kubernetes/admin.conf <span class=\"hljs-variable\">$HOME</span>/.kube/config<br>sudo chown $(id -u):$(id -g) <span class=\"hljs-variable\">$HOME</span>/.kube/config<br></code></pre></td></tr></table></figure>\n\n<h2 id=\"3-5-工作节点加入集群\"><a href=\"#3-5-工作节点加入集群\" class=\"headerlink\" title=\"3.5 工作节点加入集群\"></a>3.5 工作节点加入集群</h2><h3 id=\"k8s-worker01节点加入集群\"><a href=\"#k8s-worker01节点加入集群\" class=\"headerlink\" title=\"k8s-worker01节点加入集群\"></a>k8s-worker01节点加入集群</h3><p>以下操作仅在Worker节点操作</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-worker01:~<span class=\"hljs-comment\"># kubeadm join 192.168.11.161:6443 --token abcdef.0123456789abcdef --discovery-token-ca-cert-hash sha256:c7a1d928a82c30bec6dec880092339e64309b24cc01782d8a9d9c6c0ecfde58f </span><br></code></pre></td></tr></table></figure>\n\n<h3 id=\"k8s-worker02节点加入集群\"><a href=\"#k8s-worker02节点加入集群\" class=\"headerlink\" title=\"k8s-worker02节点加入集群\"></a>k8s-worker02节点加入集群</h3><p>以下操作仅在Worker节点操作</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-worker02:~<span class=\"hljs-comment\"># kubeadm join 192.168.11.161:6443 --token abcdef.0123456789abcdef --discovery-token-ca-cert-hash sha256:c7a1d928a82c30bec6dec880092339e64309b24cc01782d8a9d9c6c0ecfde58f</span><br></code></pre></td></tr></table></figure>\n\n\n<h2 id=\"3-6-验证K8S集群节点是否可用\"><a href=\"#3-6-验证K8S集群节点是否可用\" class=\"headerlink\" title=\"3.6 验证K8S集群节点是否可用\"></a>3.6 验证K8S集群节点是否可用</h2><p>在Master节点检查集群节点是否可用 </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># kubectl get nodes</span><br><br>NAME           STATUS     ROLES           AGE     VERSION<br>k8s-master01   NotReady   control-plane   103m    v1.32.3<br>k8s-worker01   NotReady   &lt;none&gt;          4m12s   v1.32.3<br>k8s-worker02   NotReady   &lt;none&gt;          4m12s   v1.32.3<br></code></pre></td></tr></table></figure>\n\n<p>在Master节点检查集群Pod状态（按命名空间筛选） </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># kubectl get pods -n kube-system</span><br><br>NAME                                   READY   STATUS    RESTARTS   AGE<br>coredns-6766b7b6bb-6dtl7               0/1     Pending   0          104m<br>coredns-6766b7b6bb-lrpw7               0/1     Pending   0          104m<br>etcd-k8s-master01                      1/1     Running   0          104m      // 静态pod<br>kube-apiserver-k8s-master01            1/1     Running   0          104m      // 静态pod<br>kube-controller-manager-k8s-master01   1/1     Running   0          104m      // 静态pod    <br>kube-proxy-6g8dn                       1/1     Running   0          104m      <br>kube-proxy-kmzv6                       1/1     Running   0          5m1s<br>kube-proxy-pj2t5                       1/1     Running   0          5m1s<br>kube-scheduler-k8s-master01            1/1     Running   0          104m      // 静态pod <br></code></pre></td></tr></table></figure>\n\n<p>查看命名空间</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># kubectl get cs</span><br><br>Warning: v1 ComponentStatus is deprecated <span class=\"hljs-keyword\">in</span> v1.19+<br>NAME                 STATUS    MESSAGE   ERROR<br>etcd-0               Healthy   ok        <br>scheduler            Healthy   ok        <br>controller-manager   Healthy   ok  <br></code></pre></td></tr></table></figure>\n\n\n<h1 id=\"四、K8S集群网络插件calico部署\"><a href=\"#四、K8S集群网络插件calico部署\" class=\"headerlink\" title=\"四、K8S集群网络插件calico部署\"></a>四、K8S集群网络插件calico部署</h1><p><a href=\"https://projectcalico.docs.tigera.io/about/about-calico\">calico网络插件</a></p>\n<h2 id=\"4-1-第一步：安装tigera-operator\"><a href=\"#4-1-第一步：安装tigera-operator\" class=\"headerlink\" title=\"4.1 第一步：安装tigera-operator\"></a>4.1 第一步：安装tigera-operator</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># kubectl create -f https://raw.githubusercontent.com/projectcalico/calico/v3.29.2/manifests/tigera-operator.yaml</span><br></code></pre></td></tr></table></figure>\n\n<h3 id=\"4-1-1-输出内容：\"><a href=\"#4-1-1-输出内容：\" class=\"headerlink\" title=\"4.1.1 输出内容：\"></a>4.1.1 输出内容：</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># kubectl create -f https://raw.githubusercontent.com/projectcalico/calico/v3.29.2/manifests/tigera-operator.yaml</span><br><br>namespace/tigera-operator created<br>customresourcedefinition.apiextensions.k8s.io/bgpconfigurations.crd.projectcalico.org created<br>customresourcedefinition.apiextensions.k8s.io/bgpfilters.crd.projectcalico.org created<br>customresourcedefinition.apiextensions.k8s.io/bgppeers.crd.projectcalico.org created<br>customresourcedefinition.apiextensions.k8s.io/blockaffinities.crd.projectcalico.org created<br>customresourcedefinition.apiextensions.k8s.io/caliconodestatuses.crd.projectcalico.org created<br>customresourcedefinition.apiextensions.k8s.io/clusterinformations.crd.projectcalico.org created<br>customresourcedefinition.apiextensions.k8s.io/felixconfigurations.crd.projectcalico.org created<br>customresourcedefinition.apiextensions.k8s.io/globalnetworkpolicies.crd.projectcalico.org created<br>customresourcedefinition.apiextensions.k8s.io/globalnetworksets.crd.projectcalico.org created<br>customresourcedefinition.apiextensions.k8s.io/hostendpoints.crd.projectcalico.org created<br>customresourcedefinition.apiextensions.k8s.io/ipamblocks.crd.projectcalico.org created<br>customresourcedefinition.apiextensions.k8s.io/ipamconfigs.crd.projectcalico.org created<br>customresourcedefinition.apiextensions.k8s.io/ipamhandles.crd.projectcalico.org created<br>customresourcedefinition.apiextensions.k8s.io/ippools.crd.projectcalico.org created<br>customresourcedefinition.apiextensions.k8s.io/ipreservations.crd.projectcalico.org created<br>customresourcedefinition.apiextensions.k8s.io/kubecontrollersconfigurations.crd.projectcalico.org created<br>customresourcedefinition.apiextensions.k8s.io/networkpolicies.crd.projectcalico.org created<br>customresourcedefinition.apiextensions.k8s.io/networksets.crd.projectcalico.org created<br>customresourcedefinition.apiextensions.k8s.io/tiers.crd.projectcalico.org created<br>customresourcedefinition.apiextensions.k8s.io/adminnetworkpolicies.policy.networking.k8s.io created<br>customresourcedefinition.apiextensions.k8s.io/apiservers.operator.tigera.io created<br>customresourcedefinition.apiextensions.k8s.io/imagesets.operator.tigera.io created<br>customresourcedefinition.apiextensions.k8s.io/installations.operator.tigera.io created<br>customresourcedefinition.apiextensions.k8s.io/tigerastatuses.operator.tigera.io created<br>serviceaccount/tigera-operator created<br>clusterrole.rbac.authorization.k8s.io/tigera-operator created<br>clusterrolebinding.rbac.authorization.k8s.io/tigera-operator created<br>deployment.apps/tigera-operator created<br></code></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># kubectl get ns</span><br><br>NAME              STATUS   AGE<br>default           Active   116m<br>kube-node-lease   Active   116m<br>kube-public       Active   116m<br>kube-system       Active   116m<br>tigera-operator   Active   106s      // 新增的pod<br></code></pre></td></tr></table></figure>\n\n\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># kubectl get pods -n tigera-operator</span><br><br>NAME                              READY   STATUS             RESTARTS   AGE<br>tigera-operator-ccfc44587-vswlt   0/1     ImagePullBackOff   0          3m44s<br></code></pre></td></tr></table></figure>\n\n\n<h2 id=\"4-2-第二步：安装calico-system\"><a href=\"#4-2-第二步：安装calico-system\" class=\"headerlink\" title=\"4.2 第二步：安装calico-system\"></a>4.2 第二步：安装calico-system</h2><h3 id=\"4-2-1-下载custom-resources-yaml\"><a href=\"#4-2-1-下载custom-resources-yaml\" class=\"headerlink\" title=\"4.2.1 下载custom-resources.yaml\"></a>4.2.1 下载custom-resources.yaml</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># wget https://raw.githubusercontent.com/projectcalico/calico/v3.29.2/manifests/custom-resources.yaml</span><br></code></pre></td></tr></table></figure>\n\n\n<h3 id=\"4-2-2-修改custom-resources-yaml中的网段cidr配置\"><a href=\"#4-2-2-修改custom-resources-yaml中的网段cidr配置\" class=\"headerlink\" title=\"4.2.2 修改custom-resources.yaml中的网段cidr配置\"></a>4.2.2 修改custom-resources.yaml中的网段cidr配置</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># nano custom-resources.yaml</span><br></code></pre></td></tr></table></figure>\n\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs yaml\"><span class=\"hljs-comment\"># This section includes base Calico installation configuration.</span><br><span class=\"hljs-comment\"># For more information, see: https://projectcalico.docs.tigera.io/master/reference/installation/api#operator.tigera.io/v1.Installation</span><br> <span class=\"hljs-attr\">apiVersion:</span> <span class=\"hljs-string\">operator.tigera.io/v1</span><br> <span class=\"hljs-attr\">kind:</span> <span class=\"hljs-string\">Installation</span><br> <span class=\"hljs-attr\">metadata:</span><br>  <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">default</span><br> <span class=\"hljs-attr\">spec:</span><br>  <span class=\"hljs-comment\"># Configures Calico networking.</span><br>  <span class=\"hljs-attr\">calicoNetwork:</span><br>    <span class=\"hljs-comment\"># <span class=\"hljs-doctag\">Note:</span> The ipPools section cannot be modified post-install.</span><br>    <span class=\"hljs-attr\">ipPools:</span><br>    <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">blockSize:</span> <span class=\"hljs-number\">26</span><br>      <span class=\"hljs-attr\">cidr:</span> <span class=\"hljs-number\">10.244</span><span class=\"hljs-number\">.0</span><span class=\"hljs-number\">.0</span><span class=\"hljs-string\">/16</span>                <span class=\"hljs-comment\"># 修改此行内容为初始化时定义的pod network cidr</span><br>      <span class=\"hljs-attr\">encapsulation:</span> <span class=\"hljs-string\">VXLANCrossSubnet</span><br>      <span class=\"hljs-attr\">natOutgoing:</span> <span class=\"hljs-string\">Enabled</span><br>      <span class=\"hljs-attr\">nodeSelector:</span> <span class=\"hljs-string\">all()</span><br>      <br><span class=\"hljs-meta\">---</span><br><span class=\"hljs-comment\"># This section configures the Calico API server.</span><br><span class=\"hljs-comment\"># For more information, see: https://projectcalico.docs.tigera.io/master/reference/installation/api#operator.tigera.io/v1.APIServer</span><br><span class=\"hljs-attr\">apiVersion:</span> <span class=\"hljs-string\">operator.tigera.io/v1</span><br><span class=\"hljs-attr\">kind:</span> <span class=\"hljs-string\">APIServer</span><br><span class=\"hljs-attr\">metadata:</span><br>  <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">default</span><br> <span class=\"hljs-attr\">spec:</span> &#123;&#125;<br></code></pre></td></tr></table></figure>\n\n\n<ul>\n<li>再次检查修改后的配置文件</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># cat custom-resources.yaml</span><br></code></pre></td></tr></table></figure>\n\n\n<h3 id=\"4-2-3-应用部署配置文件，进行部署\"><a href=\"#4-2-3-应用部署配置文件，进行部署\" class=\"headerlink\" title=\"4.2.3 应用部署配置文件，进行部署\"></a>4.2.3 应用部署配置文件，进行部署</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># kubectl create -f custom-resources.yaml</span><br><br>installation.operator.tigera.io/default created<br>apiserver.operator.tigera.io/default created<br></code></pre></td></tr></table></figure>\n\n\n<h3 id=\"4-2-4-检查calico安装结果\"><a href=\"#4-2-4-检查calico安装结果\" class=\"headerlink\" title=\"4.2.4 检查calico安装结果\"></a>4.2.4 检查calico安装结果</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># watch kubectl get pods -n calico-system</span><br></code></pre></td></tr></table></figure>\n\n<p>经过一段时间的下载安装，全部署完成后大致如下输出所示：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># kubectl get pods -n calico-system</span><br><br>NAME                                      READY   STATUS    RESTARTS   AGE<br>calico-kube-controllers-cf49d8944-6zv2z   1/1     Running   0          53m<br>calico-node-2nfvf                         1/1     Running   0          53m<br>calico-node-nxhvj                         1/1     Running   0          53m<br>calico-node-v9lp9                         1/1     Running   0          53m<br>calico-typha-7b6f98bc78-49bf5             1/1     Running   0          53m<br>calico-typha-7b6f98bc78-7vhd6             1/1     Running   0          53m<br>csi-node-driver-6nbvr                     2/2     Running   0          53m<br>csi-node-driver-9cqq5                     2/2     Running   0          53m<br>csi-node-driver-9pm4t                     2/2     Running   0          53m   <br></code></pre></td></tr></table></figure>\n\n\n<p>查看节点状态变化：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># kubectl get nodes</span><br><br>NAME           STATUS   ROLES           AGE     VERSION<br>k8s-master01   Ready    control-plane   3h40m   v1.32.3<br>k8s-worker01   Ready    &lt;none&gt;          121m    v1.32.3<br>k8s-worker02   Ready    &lt;none&gt;          121m    v1.32.3<br></code></pre></td></tr></table></figure>\n\n<p>查看pod状态</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># kubectl get pods -n kube-system</span><br><br>NAME                                   READY   STATUS    RESTARTS   AGE<br>coredns-6766b7b6bb-6dtl7               1/1     Running   0          3h42m<br>coredns-6766b7b6bb-lrpw7               1/1     Running   0          3h42m<br>etcd-k8s-master01                      1/1     Running   0          3h42m<br>kube-apiserver-k8s-master01            1/1     Running   0          3h42m<br>kube-controller-manager-k8s-master01   1/1     Running   0          3h42m<br>kube-proxy-6g8dn                       1/1     Running   0          3h42m<br>kube-proxy-kmzv6                       1/1     Running   0          122m<br>kube-proxy-pj2t5                       1/1     Running   0          122m<br>kube-scheduler-k8s-master01            1/1     Running   0          3h42m<br></code></pre></td></tr></table></figure>\n\n<p>查看pod的IP及网段</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># kubectl get pods -n kube-system -o wide</span><br><br>NAME                                   READY   STATUS    RESTARTS   AGE     IP               NODE           NOMINATED NODE   READINESS GATES<br>coredns-6766b7b6bb-6dtl7               1/1     Running   0          3h43m   10.244.69.198    k8s-worker02   &lt;none&gt;           &lt;none&gt;<br>coredns-6766b7b6bb-lrpw7               1/1     Running   0          3h43m   10.244.69.197    k8s-worker02   &lt;none&gt;           &lt;none&gt;<br>etcd-k8s-master01                      1/1     Running   0          3h44m   192.168.11.161   k8s-master01   &lt;none&gt;           &lt;none&gt;<br>kube-apiserver-k8s-master01            1/1     Running   0          3h44m   192.168.11.161   k8s-master01   &lt;none&gt;           &lt;none&gt;<br>kube-controller-manager-k8s-master01   1/1     Running   0          3h44m   192.168.11.161   k8s-master01   &lt;none&gt;           &lt;none&gt;<br>kube-proxy-6g8dn                       1/1     Running   0          3h43m   192.168.11.161   k8s-master01   &lt;none&gt;           &lt;none&gt;<br>kube-proxy-kmzv6                       1/1     Running   0          124m    192.168.11.165   k8s-worker01   &lt;none&gt;           &lt;none&gt;<br>kube-proxy-pj2t5                       1/1     Running   0          124m    192.168.11.166   k8s-worker02   &lt;none&gt;           &lt;none&gt;<br>kube-scheduler-k8s-master01            1/1     Running   0          3h44m   192.168.11.161   k8s-master01   &lt;none&gt;           &lt;none&gt;<br></code></pre></td></tr></table></figure>\n\n\n\n<h1 id=\"五、部署Nginx应用验证K8S集群可用性\"><a href=\"#五、部署Nginx应用验证K8S集群可用性\" class=\"headerlink\" title=\"五、部署Nginx应用验证K8S集群可用性\"></a>五、部署Nginx应用验证K8S集群可用性</h1><p>本章以Nginx为例，先添加nginx应用配置文件nginx.yaml，再添加相关应用配置</p>\n<h2 id=\"5-1-配置NginxWeb部署配置文件nginx-website-yaml\"><a href=\"#5-1-配置NginxWeb部署配置文件nginx-website-yaml\" class=\"headerlink\" title=\"5.1 配置NginxWeb部署配置文件nginx-website.yaml\"></a>5.1 配置NginxWeb部署配置文件nginx-website.yaml</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># nano /home/acanx/nginx-website.yaml</span><br></code></pre></td></tr></table></figure>\n\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs yaml\"><span class=\"hljs-meta\">---</span><br><span class=\"hljs-attr\">apiVersion:</span> <span class=\"hljs-string\">apps/v1</span><br><span class=\"hljs-attr\">kind:</span> <span class=\"hljs-string\">Deployment</span><br><span class=\"hljs-attr\">metadata:</span><br>  <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">nginxweb</span><br><span class=\"hljs-attr\">spec:</span><br>  <span class=\"hljs-attr\">selector:</span><br>    <span class=\"hljs-attr\">matchLabels:</span><br>      <span class=\"hljs-attr\">app:</span> <span class=\"hljs-string\">nginxwebsite</span><br>  <span class=\"hljs-attr\">replicas:</span> <span class=\"hljs-number\">3</span><br>  <span class=\"hljs-attr\">template:</span><br>    <span class=\"hljs-attr\">metadata:</span><br>      <span class=\"hljs-attr\">labels:</span><br>        <span class=\"hljs-attr\">app:</span> <span class=\"hljs-string\">nginxwebsite</span><br>    <span class=\"hljs-attr\">spec:</span><br>      <span class=\"hljs-attr\">containers:</span><br>      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">nginxwebsite</span><br>        <span class=\"hljs-attr\">image:</span> <span class=\"hljs-string\">nginx:latest</span><br>        <span class=\"hljs-attr\">imagePullPolicy:</span> <span class=\"hljs-string\">IfNotPresent</span><br>        <span class=\"hljs-attr\">ports:</span><br>        <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">containerPort:</span> <span class=\"hljs-number\">80</span><br><span class=\"hljs-meta\">---</span><br><span class=\"hljs-attr\">apiVersion:</span> <span class=\"hljs-string\">v1</span><br><span class=\"hljs-attr\">kind:</span> <span class=\"hljs-string\">Service</span><br><span class=\"hljs-attr\">metadata:</span><br>  <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">nginxweb-service</span><br><span class=\"hljs-attr\">spec:</span><br>  <span class=\"hljs-attr\">externalTrafficPolicy:</span> <span class=\"hljs-string\">Cluster</span><br>  <span class=\"hljs-attr\">selector:</span><br>    <span class=\"hljs-attr\">app:</span> <span class=\"hljs-string\">nginxwebsite</span><br>  <span class=\"hljs-attr\">ports:</span><br>  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">protocol:</span> <span class=\"hljs-string\">TCP</span><br>    <span class=\"hljs-attr\">port:</span> <span class=\"hljs-number\">80</span><br>    <span class=\"hljs-attr\">targetPort:</span> <span class=\"hljs-number\">80</span><br>    <span class=\"hljs-attr\">nodePort:</span> <span class=\"hljs-number\">30080</span><br>  <span class=\"hljs-attr\">type:</span> <span class=\"hljs-string\">NodePort</span><br></code></pre></td></tr></table></figure>\n\n\n<h2 id=\"5-2-执行命令部署nginx服务\"><a href=\"#5-2-执行命令部署nginx服务\" class=\"headerlink\" title=\"5.2 执行命令部署nginx服务\"></a>5.2 执行命令部署nginx服务</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># kubectl apply -f /home/acanx/nginx-website.yaml</span><br></code></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs plain\">deployment.apps&#x2F;nginxweb created<br>service&#x2F;nginxweb-service created<br></code></pre></td></tr></table></figure>\n\n\n<h2 id=\"5-3-检查部署结果\"><a href=\"#5-3-检查部署结果\" class=\"headerlink\" title=\"5.3 检查部署结果\"></a>5.3 检查部署结果</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># kubectl get deployment</span><br><br>NAME       READY   UP-TO-DATE   AVAILABLE   AGE<br>nginxweb   0/3     3            0           2m35s<br></code></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># kubectl get pods</span><br><br>NAME                       READY   STATUS              RESTARTS   AGE<br>nginxweb-7c88f6c77-pck4f   0/1     ContainerCreating   0          3m43s<br>nginxweb-7c88f6c77-rv76n   0/1     ContainerCreating   0          3m43s<br>nginxweb-7c88f6c77-vb8xj   0/1     ContainerCreating   0          3m43s<br></code></pre></td></tr></table></figure>\n\n\n<h3 id=\"5-3-1-测试K8S集群内访问\"><a href=\"#5-3-1-测试K8S集群内访问\" class=\"headerlink\" title=\"5.3.1 测试K8S集群内访问\"></a>5.3.1 测试K8S集群内访问</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># kubectl get service</span><br><br>NAME               TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)        AGE<br>kubernetes         ClusterIP   10.96.0.1       &lt;none&gt;        443/TCP        4h11m<br>nginxweb-service   NodePort    10.106.65.218   &lt;none&gt;        80:30080/TCP   10m<br>root@k8s-master01:~<span class=\"hljs-comment\"># curl http://10.106.65.218               // 验证在K8S集群内布访问</span><br><br>&lt;!DOCTYPE html&gt;<br>&lt;html&gt;<br>&lt;head&gt;<br>&lt;title&gt;Welcome to nginx!&lt;/title&gt;<br>&lt;style&gt;<br>html &#123; color-scheme: light dark; &#125;<br>body &#123; width: 35em; margin: 0 auto;<br>font-family: Tahoma, Verdana, Arial, sans-serif; &#125;<br>&lt;/style&gt;<br>&lt;/head&gt;<br>&lt;body&gt;<br>&lt;h1&gt;Welcome to nginx!&lt;/h1&gt;<br>&lt;p&gt;If you see this page, the nginx web server is successfully installed and<br>working. Further configuration is required.&lt;/p&gt;<br><br>&lt;p&gt;For online documentation and support please refer to<br>&lt;a href=<span class=\"hljs-string\">&quot;http://nginx.org/&quot;</span>&gt;nginx.org&lt;/a&gt;.&lt;br/&gt;<br>Commercial support is available at<br>&lt;a href=<span class=\"hljs-string\">&quot;http://nginx.com/&quot;</span>&gt;nginx.com&lt;/a&gt;.&lt;/p&gt;<br><br>&lt;p&gt;&lt;em&gt;Thank you <span class=\"hljs-keyword\">for</span> using nginx.&lt;/em&gt;&lt;/p&gt;<br>&lt;/body&gt;<br>&lt;/html&gt;<br></code></pre></td></tr></table></figure>\n\n<h3 id=\"5-3-2-测试集群外访问\"><a href=\"#5-3-2-测试集群外访问\" class=\"headerlink\" title=\"5.3.2 测试集群外访问\"></a>5.3.2 测试集群外访问</h3><p>打开集群外的局域网内内主机，正常情况下集群内任意一个节点IP加对应端口号都可以访问，实际分别测试访问 <a href=\"http://192.168.11.161:30080/\">http://192.168.11.161:30080/</a> <a href=\"http://192.168.11.165:30080/\">http://192.168.11.165:30080/</a>  <a href=\"http://192.168.11.166:30080/\">http://192.168.11.166:30080/</a> 页面，以上三个url链接均可以正常打开。</p>\n<p>效果如下图所示：</p>\n<p><img src=\"/Node/imgs/03_02/Nginx-K8SMaster01.png\" alt=\"Master01\"><br><img src=\"/Node/imgs/03_02/Nginx-K8SWorker01.png\" alt=\"Worker01\"><br><img src=\"/Node/imgs/03_02/Nginx-K8SWorker02.png\" alt=\"Worker02\"></p>\n<p>上述页面可以正常显示则说明nginx演示应用部署成功！</p>\n<h1 id=\"六、-部署Kubernetes-Dashboard应用\"><a href=\"#六、-部署Kubernetes-Dashboard应用\" class=\"headerlink\" title=\"六、 部署Kubernetes Dashboard应用\"></a>六、 部署Kubernetes Dashboard应用</h1><ul>\n<li><a href=\"https://kubernetes.io/zh-cn/docs/tasks/access-application-cluster/web-ui-dashboard/\">部署和访问 Kubernetes 仪表板（Dashboard）</a></li>\n</ul>\n<h2 id=\"6-1-安装Helm\"><a href=\"#6-1-安装Helm\" class=\"headerlink\" title=\"6.1 安装Helm\"></a>6.1 安装Helm</h2><h3 id=\"6-1-1-Helm介绍及下载\"><a href=\"#6-1-1-Helm介绍及下载\" class=\"headerlink\" title=\"6.1.1 Helm介绍及下载\"></a>6.1.1 Helm介绍及下载</h3><p>Helm 是查找、分享和使用软件构建 Kubernetes 的最优方式。</p>\n<ul>\n<li>官网 <a href=\"https://helm.sh/\">https://helm.sh/</a></li>\n<li>项目地址 <a href=\"https://github.com/helm/helm\">https://github.com/helm/helm</a></li>\n<li>Helm安装文档 <a href=\"https://helm.sh/zh/docs/intro/install/\">https://helm.sh/zh/docs/intro/install/</a></li>\n</ul>\n<h3 id=\"6-1-2-Helm安装\"><a href=\"#6-1-2-Helm安装\" class=\"headerlink\" title=\"6.1.2 Helm安装\"></a>6.1.2 Helm安装</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># wget https://get.helm.sh/helm-v3.17.2-linux-amd64.tar.gz   # 下载文件</span><br><br>root@k8s-master01:~<span class=\"hljs-comment\"># tar -zxvf /home/acanx/helm-v3.0.0-linux-amd64.tar.gz         # 解压文件</span><br><br>root@k8s-master01:~<span class=\"hljs-comment\"># sudo mv linux-amd64/helm /usr/local/bin/helm                    # 移动到指定目录</span><br>root@k8s-master01:~<span class=\"hljs-comment\"># sudo mv /home/acanx/helm /usr/local/bin/helm                    # 移动到指定目录</span><br><br>root@k8s-master01:~<span class=\"hljs-comment\"># ls -l /usr/local/bin/helm</span><br><br>root@k8s-master01:~<span class=\"hljs-comment\"># chmod 755 /usr/local/bin/helm</span><br><br>root@k8s-master01:~<span class=\"hljs-comment\"># helm </span><br></code></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># helm</span><br><br>The Kubernetes package manager<br><br>Common actions <span class=\"hljs-keyword\">for</span> Helm:<br><br>- helm search:    search <span class=\"hljs-keyword\">for</span> charts<br>- helm pull:      download a chart to your <span class=\"hljs-built_in\">local</span> directory to view<br>- helm install:   upload the chart to Kubernetes<br>- helm list:      list releases of charts<br><br>Environment variables:<br><br>| Name                               | Description                                                                                                |<br>|------------------------------------|------------------------------------------------------------------------------------------------------------|<br>| <span class=\"hljs-variable\">$HELM_CACHE_HOME</span>                   | <span class=\"hljs-built_in\">set</span> an alternative location <span class=\"hljs-keyword\">for</span> storing cached files.                                                      |<br>| <span class=\"hljs-variable\">$HELM_CONFIG_HOME</span>                  | <span class=\"hljs-built_in\">set</span> an alternative location <span class=\"hljs-keyword\">for</span> storing Helm configuration.                                                |<br>| <span class=\"hljs-variable\">$HELM_DATA_HOME</span>                    | <span class=\"hljs-built_in\">set</span> an alternative location <span class=\"hljs-keyword\">for</span> storing Helm data.                                                         |<br>| <span class=\"hljs-variable\">$HELM_DEBUG</span>                        | indicate whether or not Helm is running <span class=\"hljs-keyword\">in</span> Debug mode                                                      |<br>| <span class=\"hljs-variable\">$HELM_DRIVER</span>                       | <span class=\"hljs-built_in\">set</span> the backend storage driver. Values are: configmap, secret, memory, sql.                                |<br>| <span class=\"hljs-variable\">$HELM_DRIVER_SQL_CONNECTION_STRING</span> | <span class=\"hljs-built_in\">set</span> the connection string the SQL storage driver should use.                                               |<br>| <span class=\"hljs-variable\">$HELM_MAX_HISTORY</span>                  | <span class=\"hljs-built_in\">set</span> the maximum number of helm release <span class=\"hljs-built_in\">history</span>.                                                            |<br>| <span class=\"hljs-variable\">$HELM_NAMESPACE</span>                    | <span class=\"hljs-built_in\">set</span> the namespace used <span class=\"hljs-keyword\">for</span> the helm operations.                                                            |<br>| <span class=\"hljs-variable\">$HELM_NO_PLUGINS</span>                   | <span class=\"hljs-built_in\">disable</span> plugins. Set HELM_NO_PLUGINS=1 to <span class=\"hljs-built_in\">disable</span> plugins.                                                 |<br>| <span class=\"hljs-variable\">$HELM_PLUGINS</span>                      | <span class=\"hljs-built_in\">set</span> the path to the plugins directory                                                                      |<br>| <span class=\"hljs-variable\">$HELM_REGISTRY_CONFIG</span>              | <span class=\"hljs-built_in\">set</span> the path to the registry config file.                                                                  |<br>| <span class=\"hljs-variable\">$HELM_REPOSITORY_CACHE</span>             | <span class=\"hljs-built_in\">set</span> the path to the repository cache directory                                                             |<br>| <span class=\"hljs-variable\">$HELM_REPOSITORY_CONFIG</span>            | <span class=\"hljs-built_in\">set</span> the path to the repositories file.                                                                     |<br>| <span class=\"hljs-variable\">$KUBECONFIG</span>                        | <span class=\"hljs-built_in\">set</span> an alternative Kubernetes configuration file (default <span class=\"hljs-string\">&quot;~/.kube/config&quot;</span>)                                |<br>| <span class=\"hljs-variable\">$HELM_KUBEAPISERVER</span>                | <span class=\"hljs-built_in\">set</span> the Kubernetes API Server Endpoint <span class=\"hljs-keyword\">for</span> authentication                                                  |<br>| <span class=\"hljs-variable\">$HELM_KUBECAFILE</span>                   | <span class=\"hljs-built_in\">set</span> the Kubernetes certificate authority file.                                                             |<br>| <span class=\"hljs-variable\">$HELM_KUBEASGROUPS</span>                 | <span class=\"hljs-built_in\">set</span> the Groups to use <span class=\"hljs-keyword\">for</span> impersonation using a comma-separated list.                                      |<br>| <span class=\"hljs-variable\">$HELM_KUBEASUSER</span>                   | <span class=\"hljs-built_in\">set</span> the Username to impersonate <span class=\"hljs-keyword\">for</span> the operation.                                                         |<br>| <span class=\"hljs-variable\">$HELM_KUBECONTEXT</span>                  | <span class=\"hljs-built_in\">set</span> the name of the kubeconfig context.                                                                    |<br>| <span class=\"hljs-variable\">$HELM_KUBETOKEN</span>                    | <span class=\"hljs-built_in\">set</span> the Bearer KubeToken used <span class=\"hljs-keyword\">for</span> authentication.                                                          |<br>| <span class=\"hljs-variable\">$HELM_KUBEINSECURE_SKIP_TLS_VERIFY</span> | indicate <span class=\"hljs-keyword\">if</span> the Kubernetes API server<span class=\"hljs-string\">&#x27;s certificate validation should be skipped (insecure)                |</span><br><span class=\"hljs-string\">| $HELM_KUBETLS_SERVER_NAME          | set the server name used to validate the Kubernetes API server certificate                                 |</span><br><span class=\"hljs-string\">| $HELM_BURST_LIMIT                  | set the default burst limit in the case the server contains many CRDs (default 100, -1 to disable)         |</span><br><span class=\"hljs-string\">| $HELM_QPS                          | set the Queries Per Second in cases where a high number of calls exceed the option for higher burst values |</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">Helm stores cache, configuration, and data based on the following configuration order:</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">- If a HELM_*_HOME environment variable is set, it will be used</span><br><span class=\"hljs-string\">- Otherwise, on systems supporting the XDG base directory specification, the XDG variables will be used</span><br><span class=\"hljs-string\">- When no other location is set a default location will be used based on the operating system</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">By default, the default directories depend on the Operating System. The defaults are listed below:</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">| Operating System | Cache Path                | Configuration Path             | Data Path               |</span><br><span class=\"hljs-string\">|------------------|---------------------------|--------------------------------|-------------------------|</span><br><span class=\"hljs-string\">| Linux            | $HOME/.cache/helm         | $HOME/.config/helm             | $HOME/.local/share/helm |</span><br><span class=\"hljs-string\">| macOS            | $HOME/Library/Caches/helm | $HOME/Library/Preferences/helm | $HOME/Library/helm      |</span><br><span class=\"hljs-string\">| Windows          | %TEMP%\\helm               | %APPDATA%\\helm                 | %APPDATA%\\helm          |</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">Usage:</span><br><span class=\"hljs-string\">  helm [command]</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">Available Commands:</span><br><span class=\"hljs-string\">  completion  generate autocompletion scripts for the specified shell</span><br><span class=\"hljs-string\">  create      create a new chart with the given name</span><br><span class=\"hljs-string\">  dependency  manage a chart&#x27;</span>s dependencies<br>  env         helm client environment information<br>  get         download extended information of a named release<br>  <span class=\"hljs-built_in\">help</span>        Help about any <span class=\"hljs-built_in\">command</span><br>  <span class=\"hljs-built_in\">history</span>     fetch release <span class=\"hljs-built_in\">history</span><br>  install     install a chart<br>  lint        examine a chart <span class=\"hljs-keyword\">for</span> possible issues<br>  list        list releases<br>  package     package a chart directory into a chart archive<br>  plugin      install, list, or uninstall Helm plugins<br>  pull        download a chart from a repository and (optionally) unpack it <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">local</span> directory<br>  push        push a chart to remote<br>  registry    login to or <span class=\"hljs-built_in\">logout</span> from a registry<br>  repo        add, list, remove, update, and index chart repositories<br>  rollback    roll back a release to a previous revision<br>  search      search <span class=\"hljs-keyword\">for</span> a keyword <span class=\"hljs-keyword\">in</span> charts<br>  show        show information of a chart<br>  status      display the status of the named release<br>  template    locally render templates<br>  <span class=\"hljs-built_in\">test</span>        run tests <span class=\"hljs-keyword\">for</span> a release<br>  uninstall   uninstall a release<br>  upgrade     upgrade a release<br>  verify      verify that a chart at the given path has been signed and is valid<br>  version     <span class=\"hljs-built_in\">print</span> the client version information<br><br>Flags:<br>      --burst-limit int                 client-side default throttling <span class=\"hljs-built_in\">limit</span> (default 100)<br>      --debug                           <span class=\"hljs-built_in\">enable</span> verbose output<br>  -h, --<span class=\"hljs-built_in\">help</span>                            <span class=\"hljs-built_in\">help</span> <span class=\"hljs-keyword\">for</span> helm<br>      --kube-apiserver string           the address and the port <span class=\"hljs-keyword\">for</span> the Kubernetes API server<br>      --kube-as-group stringArray       group to impersonate <span class=\"hljs-keyword\">for</span> the operation, this flag can be repeated to specify multiple groups.<br>      --kube-as-user string             username to impersonate <span class=\"hljs-keyword\">for</span> the operation<br>      --kube-ca-file string             the certificate authority file <span class=\"hljs-keyword\">for</span> the Kubernetes API server connection<br>      --kube-context string             name of the kubeconfig context to use<br>      --kube-insecure-skip-tls-verify   <span class=\"hljs-keyword\">if</span> <span class=\"hljs-literal\">true</span>, the Kubernetes API server<span class=\"hljs-string\">&#x27;s certificate will not be checked for validity. This will make your HTTPS connections insecure</span><br><span class=\"hljs-string\">      --kube-tls-server-name string     server name to use for Kubernetes API server certificate validation. If it is not provided, the hostname used to contact the server is used</span><br><span class=\"hljs-string\">      --kube-token string               bearer token used for authentication</span><br><span class=\"hljs-string\">      --kubeconfig string               path to the kubeconfig file</span><br><span class=\"hljs-string\">  -n, --namespace string                namespace scope for this request</span><br><span class=\"hljs-string\">      --qps float32                     queries per second used when communicating with the Kubernetes API, not including bursting</span><br><span class=\"hljs-string\">      --registry-config string          path to the registry config file (default &quot;/root/.config/helm/registry/config.json&quot;)</span><br><span class=\"hljs-string\">      --repository-cache string         path to the directory containing cached repository indexes (default &quot;/root/.cache/helm/repository&quot;)</span><br><span class=\"hljs-string\">      --repository-config string        path to the file containing repository names and URLs (default &quot;/root/.config/helm/repositories.yaml&quot;)</span><br><span class=\"hljs-string\"></span><br><span class=\"hljs-string\">Use &quot;helm [command] --help&quot; for more information about a command.</span><br><span class=\"hljs-string\">root@k8s-master01:~# </span><br></code></pre></td></tr></table></figure>\n\n<p>若输出上述内容，则说明安装成功</p>\n<h2 id=\"6-2-安装kubernetes-dashboard\"><a href=\"#6-2-安装kubernetes-dashboard\" class=\"headerlink\" title=\"6.2 安装kubernetes-dashboard\"></a>6.2 安装kubernetes-dashboard</h2><h3 id=\"6-2-1-添加-kubernetes-dashboard-仓库\"><a href=\"#6-2-1-添加-kubernetes-dashboard-仓库\" class=\"headerlink\" title=\"6.2.1 添加 kubernetes-dashboard 仓库\"></a>6.2.1 添加 kubernetes-dashboard 仓库</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">helm repo add kubernetes-dashboard https://kubernetes.github.io/dashboard/<br></code></pre></td></tr></table></figure>\n\n<ul>\n<li>/root/.cache/helm/repository/kubernetes-dashboard-charts.txt</li>\n<li>/root/.cache/helm/repository/kubernetes-dashboard-index.yaml</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~/.cache/helm/repository<span class=\"hljs-comment\"># helm repo list</span><br><br>NAME                \tURL                                    <br>kubernetes-dashboard\thttps://kubernetes.github.io/dashboard/<br>root@k8s-master01:~/.cache/helm/repository<span class=\"hljs-comment\"># </span><br></code></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"6-2-2-使用-kubernetes-dashboard-Chart-部署名为“kubernetes-dashboard”-的-Helm-Release\"><a href=\"#6-2-2-使用-kubernetes-dashboard-Chart-部署名为“kubernetes-dashboard”-的-Helm-Release\" class=\"headerlink\" title=\"6.2.2 使用 kubernetes-dashboard Chart 部署名为“kubernetes-dashboard” 的 Helm Release\"></a>6.2.2 使用 kubernetes-dashboard Chart 部署名为“kubernetes-dashboard” 的 Helm Release</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">helm upgrade --install kubernetes-dashboard kubernetes-dashboard/kubernetes-dashboard --create-namespace --namespace kubernetes-dashboard<br></code></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># helm upgrade --install kubernetes-dashboard kubernetes-dashboard/kubernetes-dashboard --create-namespace --namespace kubernetes-dashboard</span><br><br>Release <span class=\"hljs-string\">&quot;kubernetes-dashboard&quot;</span> does not exist. Installing it now.<br>NAME: kubernetes-dashboard<br>LAST DEPLOYED: Sun Mar 23 17:44:31 2025<br>NAMESPACE: kubernetes-dashboard<br>STATUS: deployed<br>REVISION: 1<br>TEST SUITE: None<br>NOTES:<br>*************************************************************************************************<br>*** PLEASE BE PATIENT: Kubernetes Dashboard may need a few minutes to get up and become ready ***<br>*************************************************************************************************<br><br>Congratulations! You have just installed Kubernetes Dashboard <span class=\"hljs-keyword\">in</span> your cluster.<br><br>To access Dashboard run:<br>  kubectl -n kubernetes-dashboard port-forward svc/kubernetes-dashboard-kong-proxy 8443:443<br><br>NOTE: In <span class=\"hljs-keyword\">case</span> port-forward <span class=\"hljs-built_in\">command</span> does not work, make sure that kong service name is correct.<br>      Check the services <span class=\"hljs-keyword\">in</span> Kubernetes Dashboard namespace using:<br>        kubectl -n kubernetes-dashboard get svc<br><br>Dashboard will be available at:<br>  https://localhost:8443<br>root@k8s-master01:~<span class=\"hljs-comment\"># </span><br><br><br><br><span class=\"hljs-comment\"># 注意：以下命令未做验证，后续可以测试确认</span><br><span class=\"hljs-comment\"># 我的集群使用默认参数安装 kubernetes-dashboard-kong 出现异常 8444 端口占用</span><br><span class=\"hljs-comment\"># 使用下面的命令进行安装，在安装时关闭kong.tls功能</span><br>root@k8s-master01:~<span class=\"hljs-comment\"># helm upgrade --install kubernetes-dashboard kubernetes-dashboard/kubernetes-dashboard --namespace kubernetes-dashboard --set kong.admin.tls.enabled=false   # 原文链接：https://blog.csdn.net/qq_33921750/article/details/136668014</span><br></code></pre></td></tr></table></figure>\n\n<h4 id=\"查看kubernetes-dashboard相关的pod的安装情况\"><a href=\"#查看kubernetes-dashboard相关的pod的安装情况\" class=\"headerlink\" title=\"查看kubernetes-dashboard相关的pod的安装情况\"></a>查看kubernetes-dashboard相关的pod的安装情况</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># watch kubectl get pod -A</span><br><br>NAMESPACE              NAME                                                    READY   STATUS              RESTARTS   AGE<br>calico-apiserver       calico-apiserver-7b7bbf4d75-b77ph                       1/1     Running             0          18h<br>calico-apiserver       calico-apiserver-7b7bbf4d75-gqq5w                       1/1     Running             0          18h<br>calico-system          calico-kube-controllers-cf49d8944-6zv2z                 1/1     Running             0          18h<br>calico-system          calico-node-2nfvf                                       1/1     Running             0          18h<br>calico-system          calico-node-nxhvj                                       1/1     Running             0          18h<br>calico-system          calico-node-v9lp9                                       1/1     Running             0          18h<br>calico-system          calico-typha-7b6f98bc78-49bf5                           1/1     Running             0          18h<br>calico-system          calico-typha-7b6f98bc78-7vhd6                           1/1     Running             0          18h<br>calico-system          csi-node-driver-6nbvr                                   2/2     Running             0          18h<br>calico-system          csi-node-driver-9cqq5                                   2/2     Running             0          18h<br>calico-system          csi-node-driver-9pm4t                                   2/2     Running             0          18h<br>default                nginxweb-7c88f6c77-pck4f                                1/1     Running             0          17h<br>default                nginxweb-7c88f6c77-rv76n                                1/1     Running             0          17h<br>default                nginxweb-7c88f6c77-vb8xj                                1/1     Running             0          17h<br>kube-system            coredns-6766b7b6bb-6dtl7                                1/1     Running             0          21h<br>kube-system            coredns-6766b7b6bb-lrpw7                                1/1     Running             0          21h<br>kube-system            etcd-k8s-master01                                       1/1     Running             0          21h<br>kube-system            kube-apiserver-k8s-master01                             1/1     Running             0          21h<br>kube-system            kube-controller-manager-k8s-master01                    1/1     Running             0          21h<br>kube-system            kube-proxy-6g8dn                                        1/1     Running             0          21h<br>kube-system            kube-proxy-kmzv6                                        1/1     Running             0          19h<br>kube-system            kube-proxy-pj2t5                                        1/1     Running             0          19h<br>kube-system            kube-scheduler-k8s-master01                             1/1     Running             0          21h<br>kubernetes-dashboard   kubernetes-dashboard-api-c787c9d97-5rqvp                0/1     ContainerCreating   0          2m35s<br>kubernetes-dashboard   kubernetes-dashboard-auth-7ff7855689-vmltw              0/1     ContainerCreating   0          2m35s<br>kubernetes-dashboard   kubernetes-dashboard-kong-79867c9c48-txfql              0/1     Init:0/1            0          2m35s<br>kubernetes-dashboard   kubernetes-dashboard-metrics-scraper-84655b9bd8-mq8h7   0/1     ContainerCreating   0          2m35s<br>kubernetes-dashboard   kubernetes-dashboard-web-658946f7f9-crj69               0/1     ContainerCreating   0          2m35s<br>tigera-operator        tigera-operator-ccfc44587-vswlt                         1/1     Running             0          19h<br><br><br><br>root@k8s-master01:~/.cache/helm/repository<span class=\"hljs-comment\"># kubectl get pod -A</span><br><br>NAMESPACE              NAME                                                    READY   STATUS    RESTARTS   AGE<br>calico-apiserver       calico-apiserver-7b7bbf4d75-b77ph                       1/1     Running   0          19h<br>calico-apiserver       calico-apiserver-7b7bbf4d75-gqq5w                       1/1     Running   0          19h<br>calico-system          calico-kube-controllers-cf49d8944-6zv2z                 1/1     Running   0          19h<br>calico-system          calico-node-2nfvf                                       1/1     Running   0          19h<br>calico-system          calico-node-nxhvj                                       1/1     Running   0          19h<br>calico-system          calico-node-v9lp9                                       1/1     Running   0          19h<br>calico-system          calico-typha-7b6f98bc78-49bf5                           1/1     Running   0          19h<br>calico-system          calico-typha-7b6f98bc78-7vhd6                           1/1     Running   0          19h<br>calico-system          csi-node-driver-6nbvr                                   2/2     Running   0          19h<br>calico-system          csi-node-driver-9cqq5                                   2/2     Running   0          19h<br>calico-system          csi-node-driver-9pm4t                                   2/2     Running   0          19h<br>default                nginxweb-7c88f6c77-pck4f                                1/1     Running   0          18h<br>default                nginxweb-7c88f6c77-rv76n                                1/1     Running   0          18h<br>default                nginxweb-7c88f6c77-vb8xj                                1/1     Running   0          18h<br>kube-system            coredns-6766b7b6bb-6dtl7                                1/1     Running   0          22h<br>kube-system            coredns-6766b7b6bb-lrpw7                                1/1     Running   0          22h<br>kube-system            etcd-k8s-master01                                       1/1     Running   0          22h<br>kube-system            kube-apiserver-k8s-master01                             1/1     Running   0          22h<br>kube-system            kube-controller-manager-k8s-master01                    1/1     Running   0          22h<br>kube-system            kube-proxy-6g8dn                                        1/1     Running   0          22h<br>kube-system            kube-proxy-kmzv6                                        1/1     Running   0          20h<br>kube-system            kube-proxy-pj2t5                                        1/1     Running   0          20h<br>kube-system            kube-scheduler-k8s-master01                             1/1     Running   0          22h<br>kubernetes-dashboard   kubernetes-dashboard-api-c787c9d97-5rqvp                1/1     Running   0          41m<br>kubernetes-dashboard   kubernetes-dashboard-auth-7ff7855689-vmltw              1/1     Running   0          41m<br>kubernetes-dashboard   kubernetes-dashboard-kong-79867c9c48-txfql              1/1     Running   0          41m<br>kubernetes-dashboard   kubernetes-dashboard-metrics-scraper-84655b9bd8-mq8h7   1/1     Running   0          41m<br>kubernetes-dashboard   kubernetes-dashboard-web-658946f7f9-crj69               1/1     Running   0          41m<br>tigera-operator        tigera-operator-ccfc44587-vswlt                         1/1     Running   0          20h<br></code></pre></td></tr></table></figure>\n\n\n<h2 id=\"6-3-访问Dashboard前的准备\"><a href=\"#6-3-访问Dashboard前的准备\" class=\"headerlink\" title=\"6.3 访问Dashboard前的准备\"></a>6.3 访问Dashboard前的准备</h2><p>本节参考自官方文档 </p>\n<ul>\n<li><a href=\"https://github.com/kubernetes/dashboard/blob/master/docs/user/access-control/creating-sample-user.md\">创建示例用户</a></li>\n</ul>\n<h3 id=\"6-3-1-创建示例用户-service-account\"><a href=\"#6-3-1-创建示例用户-service-account\" class=\"headerlink\" title=\"6.3.1 创建示例用户 service-account\"></a>6.3.1 创建示例用户 service-account</h3><p>创建dashboard-service-account.yaml文件</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs yaml\"><span class=\"hljs-attr\">apiVersion:</span> <span class=\"hljs-string\">v1</span><br><span class=\"hljs-attr\">kind:</span> <span class=\"hljs-string\">ServiceAccount</span><br><span class=\"hljs-attr\">metadata:</span><br>  <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">admin-user</span><br>  <span class=\"hljs-attr\">namespace:</span> <span class=\"hljs-string\">kubernetes-dashboard</span><br></code></pre></td></tr></table></figure>\n\n<p>创建示例用户service-account命令</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># kubectl create -f dashboard-service-account.yaml</span><br></code></pre></td></tr></table></figure>\n\n\n<h3 id=\"6-3-2-创建-ClusterRoleBinding\"><a href=\"#6-3-2-创建-ClusterRoleBinding\" class=\"headerlink\" title=\"6.3.2 创建 ClusterRoleBinding\"></a>6.3.2 创建 ClusterRoleBinding</h3><p>创建dashboard-cluster-role-binding.yaml文件</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs yaml\"><span class=\"hljs-attr\">apiVersion:</span> <span class=\"hljs-string\">rbac.authorization.k8s.io/v1</span><br><span class=\"hljs-attr\">kind:</span> <span class=\"hljs-string\">ClusterRoleBinding</span><br><span class=\"hljs-attr\">metadata:</span><br>  <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">admin-user</span><br><span class=\"hljs-attr\">roleRef:</span><br>  <span class=\"hljs-attr\">apiGroup:</span> <span class=\"hljs-string\">rbac.authorization.k8s.io</span><br>  <span class=\"hljs-attr\">kind:</span> <span class=\"hljs-string\">ClusterRole</span><br>  <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">cluster-admin</span><br><span class=\"hljs-attr\">subjects:</span><br><span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">kind:</span> <span class=\"hljs-string\">ServiceAccount</span><br>  <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">admin-user</span><br>  <span class=\"hljs-attr\">namespace:</span> <span class=\"hljs-string\">kubernetes-dashboard</span><br></code></pre></td></tr></table></figure>\n\n<p>创建 ClusterRoleBinding</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\"><span class=\"hljs-comment\"># 创建 ClusterRoleBinding</span><br>root@k8s-master01:~<span class=\"hljs-comment\"># kubectl create -f dashboard-cluster-role-binding.yaml</span><br></code></pre></td></tr></table></figure>\n\n\n\n<p>创建dashboard-admin-user.yaml 文件</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs yaml\"><span class=\"hljs-attr\">apiVersion:</span> <span class=\"hljs-string\">v1</span><br><span class=\"hljs-attr\">kind:</span> <span class=\"hljs-string\">ServiceAccount</span><br><span class=\"hljs-attr\">metadata:</span><br>  <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">admin-user</span><br>  <span class=\"hljs-attr\">namespace:</span> <span class=\"hljs-string\">kubernetes-dashboard</span><br><span class=\"hljs-meta\">---</span><br><span class=\"hljs-attr\">apiVersion:</span> <span class=\"hljs-string\">rbac.authorization.k8s.io/v1</span><br><span class=\"hljs-attr\">kind:</span> <span class=\"hljs-string\">ClusterRoleBinding</span><br><span class=\"hljs-attr\">metadata:</span><br>  <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">admin-user</span><br><span class=\"hljs-attr\">roleRef:</span><br>  <span class=\"hljs-attr\">apiGroup:</span> <span class=\"hljs-string\">rbac.authorization.k8s.io</span><br>  <span class=\"hljs-attr\">kind:</span> <span class=\"hljs-string\">ClusterRole</span><br>  <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">cluster-admin</span><br><span class=\"hljs-attr\">subjects:</span><br><span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">kind:</span> <span class=\"hljs-string\">ServiceAccount</span><br>  <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">admin-user</span><br>  <span class=\"hljs-attr\">namespace:</span> <span class=\"hljs-string\">kubernetes-dashboard</span><br></code></pre></td></tr></table></figure>\n\n<p>创建 ServiceAccount、ClusterRoleBinding</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~/.cache/helm/repository<span class=\"hljs-comment\"># kubectl create -f /home/acanx/Dashboard/dashboard-admin-user.yaml</span><br><br>serviceaccount/admin-user created<br>clusterrolebinding.rbac.authorization.k8s.io/admin-user created<br></code></pre></td></tr></table></figure>\n\n<h4 id=\"6-3-3-获取-ServiceAccount-的-Bearer-Token（短期访问的Token令牌）\"><a href=\"#6-3-3-获取-ServiceAccount-的-Bearer-Token（短期访问的Token令牌）\" class=\"headerlink\" title=\"6.3.3 获取 ServiceAccount 的 Bearer Token（短期访问的Token令牌）\"></a>6.3.3 获取 ServiceAccount 的 Bearer Token（短期访问的Token令牌）</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\"><span class=\"hljs-comment\"># 生成toke命令</span><br>root@k8s-master01:~/.cache/helm/repository<span class=\"hljs-comment\"># kubectl -n kubernetes-dashboard create token admin-user</span><br><br>eyJhbGciOiJSUzI1NiIsImtpZCI6IjZPMURRc2RoVjl0YWJnUGU2RDVyLTRKblhybnhBaG1oS3JoVGNBTjh6UkkifQ.eyJhdWQiOlsiaHR0cHM6Ly9rdWJlcm5ldGVzLmRlZmF1bHQuc3ZjLmNsdXN0ZXIubG9jYWwiXSwiZXhwIjoxNzQyNzMxMjUwLCJpYXQiOjE3NDI3Mjc2NTAsImlzcyI6Imh0dHBzOi8va3ViZXJuZXRlcy5kZWZhdWx0LnN2Yy5jbHVzdGVyLmxvY2FsIiwianRpIjoiYWM2NWZiNTItNjViMi00ZmQ5LWI4OTctMzQ4NjI4N2UzYTlmIiwia3ViZXJuZXRlcy5pbyI6eyJuYW1lc3BhY2UiOiJrdWJlcm5ldGVzLWRhc2hib2FyZCIsInNlcnZpY2VhY2NvdW50Ijp7Im5hbWUiOiJhZG1pbi11c2VyIiwidWlkIjoiNTBhNzgwZTYtODgzOC00ODI1LTk5ODktMzdhYTE0ZjM5ZjlkIn19LCJuYmYiOjE3NDI3Mjc2NTAsInN1YiI6InN5c3RlbTpzZXJ2aWNlYWNjb3VudDprdWJlcm5ldGVzLWRhc2hib2FyZDphZG1pbi11c2VyIn0.9j0DPg2sKuVfODjWBxxXN3-r1GmXCGV58LULx81fiCwE5IdCp0LK4to0T35c55yiZjkW2fc7l01k6V7uKFTCGiJ3TDJn_1JJe5lZpWBWXSWoO_q-1nkMgniGPowieHEny3ZU1wm-Kk-nrr2CYZKhXShGDbRxpnjAPf1X0aB6lAzPt59GKVYpPaMYhcEBMMT_ASZrGLYrNR31UpbEXf2UP9Cgyh9m5vpA48FOJKZNt8FRq20egHWlWCw4a4PPb261w81vcWWB1bwTHIw-8CyNZjptrPVX06ch4DT-eX5No5jr8kh2gCiq--bARESxjgDjCebBS8O96NpKRWtQMQbFAQ<br></code></pre></td></tr></table></figure>\n\n<p>获取到的toke是类似上述的字符串</p>\n<h4 id=\"6-3-4-获取-ServiceAccount-的长期-Bearer-Token-（长期Token）\"><a href=\"#6-3-4-获取-ServiceAccount-的长期-Bearer-Token-（长期Token）\" class=\"headerlink\" title=\"6.3.4 获取 ServiceAccount 的长期 Bearer Token （长期Token）\"></a>6.3.4 获取 ServiceAccount 的长期 Bearer Token （长期Token）</h4><ul>\n<li>创建dashboard-secret.yaml文件</li>\n</ul>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs yaml\"><span class=\"hljs-attr\">apiVersion:</span> <span class=\"hljs-string\">v1</span><br><span class=\"hljs-attr\">kind:</span> <span class=\"hljs-string\">Secret</span><br><span class=\"hljs-attr\">metadata:</span><br>  <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">admin-user</span><br>  <span class=\"hljs-attr\">namespace:</span> <span class=\"hljs-string\">kubernetes-dashboard</span><br>  <span class=\"hljs-attr\">annotations:</span><br>    <span class=\"hljs-attr\">kubernetes.io/service-account.name:</span> <span class=\"hljs-string\">&quot;admin-user&quot;</span>   <br><span class=\"hljs-attr\">type:</span> <span class=\"hljs-string\">kubernetes.io/service-account-token</span>  <br></code></pre></td></tr></table></figure>\n\n<ul>\n<li>获取 ServiceAccount 的长期 Bearer Token </li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\"><span class=\"hljs-comment\"># 创建</span><br>root@k8s-master01:~<span class=\"hljs-comment\"># kubectl create -f /home/acanx/Dashboard/dashboard-secret.yaml</span><br><br><span class=\"hljs-comment\"># 获取对应的token令牌</span><br>root@k8s-master01:~<span class=\"hljs-comment\"># kubectl get secret admin-user -n kubernetes-dashboard -o jsonpath=&quot;&#123;.data.token&#125;&quot; | base64 -d</span><br><br>eyJhbGciOiJSUzI1NiIsImtpZCI6IjZPMURRc2RoVjl0YWJnUGU2RDVyLTRKblhybnhBaG1oS3JoVGNBTjh6UkkifQ.eyJpc3MiOiJrdWJlcm5ldGVzL3NlcnZpY2VhY2NvdW50Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9uYW1lc3BhY2UiOiJrdWJlcm5ldGVzLWRhc2hib2FyZCIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VjcmV0Lm5hbWUiOiJhZG1pbi11c2VyIiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9zZXJ2aWNlLWFjY291bnQubmFtZSI6ImFkbWluLXVzZXIiLCJrdWJlcm5ldGVzLmlvL3NlcnZpY2VhY2NvdW50L3NlcnZpY2UtYWNjb3VudC51aWQiOiI1MGE3ODBlNi04ODM4LTQ4MjUtOTk4OS0zN2FhMTRmMzlmOWQiLCJzdWIiOiJzeXN0ZW06c2VydmljZWFjY291bnQ6a3ViZXJuZXRlcy1kYXNoYm9hcmQ6YWRtaW4tdXNlciJ9.UG-iAoiCRrMeUePUi5ryn4tUOhFC94eTv_THHkrT_XZhUwC-IHqy9zkmi20tfQ-jnSnzy9_H9Z_auNw6Y4VtGB6pUs7srk6X9AIr4JDrScEVSMLbLXyCsdwGKbAaQJ8n2KA0J_pXibAiaQ77vCIDs9A4HXjn-T7GhoWEeswAcZF1N1SYbDyMxC-paMKb2I5CxL6pxtgWXuPCFkHxVnzeAT9Pswj-q0_Htr46U0Ieyo3dEBVGoOE4FA56UCYEnIfIv-OHXHytcxdaETrKl22EWleAYYENQy82qrdn8eCMK9ahOQyvCFORUbltJWP0hRkIRoMSGx1gD1DMHWMd6T9IRw<br></code></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"6-4-正式访问Dashboard\"><a href=\"#6-4-正式访问Dashboard\" class=\"headerlink\" title=\"6.4 正式访问Dashboard\"></a>6.4 正式访问Dashboard</h3><p>参考资料 <a href=\"https://blog.csdn.net/qq719779232/article/details/145212142\">Kubernetes 集群中安装和配置 Kubernetes Dashboard</a></p>\n<h3 id=\"6-4-1-方式一：使用-Port-Forwarding进行命令行代理\"><a href=\"#6-4-1-方式一：使用-Port-Forwarding进行命令行代理\" class=\"headerlink\" title=\"6.4.1 方式一：使用 Port Forwarding进行命令行代理\"></a>6.4.1 方式一：使用 Port Forwarding进行命令行代理</h3><p>Port Forwarding 是一种临时性的解决方案，它允许你通过本地机器上的端口直接访问集群内部的服务。这对于开发人员来说非常方便，因为他们不需要对外暴露服务即可进行调试或测试。</p>\n<h4 id=\"6-4-1-1-开启访问\"><a href=\"#6-4-1-1-开启访问\" class=\"headerlink\" title=\"6.4.1.1 开启访问\"></a>6.4.1.1 开启访问</h4><p>通过 Port Forwarding 访问 Dashboard，需要先执行如下命令：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">kubectl -n kubernetes-dashboard port-forward svc/kubernetes-dashboard 8443:443<br></code></pre></td></tr></table></figure>\n\n<p>这将Dashboard在 <a href=\"https://localhost:8443/\">https://localhost:8443</a> 上可用。</p>\n<h4 id=\"6-4-1-2-优点与缺点\"><a href=\"#6-4-1-2-优点与缺点\" class=\"headerlink\" title=\"6.4.1.2 优点与缺点\"></a>6.4.1.2 优点与缺点</h4><ul>\n<li><p>这种方式的优点在于方法简单易用，无需更改任何集群配置，适合小规模测试或个人使用。但仅限于执行命令的本地机器，它是临时的，关闭终端后连接即断开，无法在其他机器上访问，并且每次使用时都需要手动开启端口转发。</p>\n</li>\n<li><p>也就是说，无法直接在集群外部访问，此方案不适合本次（集群外访问）实际访问场景，因此需要调整采用其他方案</p>\n</li>\n</ul>\n<h3 id=\"6-4-2-方式二：修改服务类型为-NodePort\"><a href=\"#6-4-2-方式二：修改服务类型为-NodePort\" class=\"headerlink\" title=\"6.4.2 方式二：修改服务类型为 NodePort\"></a>6.4.2 方式二：修改服务类型为 NodePort</h3><h4 id=\"6-4-2-1-方法概述\"><a href=\"#6-4-2-1-方法概述\" class=\"headerlink\" title=\"6.4.2.1 方法概述\"></a>6.4.2.1 方法概述</h4><ul>\n<li><p>NodePort 允许 Kubernetes 服务在各个集群节点的特定端口上对外暴露。这使得用户能够通过任意节点的 IP 地址和指定 NodePort 进行访问 Dashboard。（范围通常是 30000-32767），从而允许外部流量通过该端口进入集群并访问指定的服务。</p>\n</li>\n<li><p>也就是支持集群外部访问</p>\n</li>\n</ul>\n<h4 id=\"6-4-2-2-开启访问\"><a href=\"#6-4-2-2-开启访问\" class=\"headerlink\" title=\"6.4.2.2 开启访问\"></a>6.4.2.2 开启访问</h4><p>编辑 Dashboard 的服务配置，将其类型更改为 NodePort：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># kubectl patch svc kubernetes-dashboard-kong-proxy -n kubernetes-dashboard --type=&#x27;json&#x27; -p &#x27;[&#123;&quot;op&quot;:&quot;replace&quot;,&quot;path&quot;:&quot;/spec/type&quot;,&quot;value&quot;:&quot;NodePort&quot;&#125;]&#x27;</span><br><span class=\"hljs-comment\"># TODO 若需要指定端口，可以指定一个固定的 nodePort：</span><br>root@k8s-master01:~<span class=\"hljs-comment\"># kubectl patch svc kubernetes-dashboard-kong-proxy -n kubernetes-dashboard --type=&#x27;json&#x27; -p &#x27;[&#123;&quot;op&quot;:&quot;add&quot;,&quot;path&quot;:&quot;/spec/ports/0/nodePort&quot;,&quot;value&quot;:30000&#125;]&#x27;</span><br></code></pre></td></tr></table></figure>\n\n<p>以下是实际操作及结果：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># kubectl patch svc kubernetes-dashboard-kong-proxy -n kubernetes-dashboard --type=&#x27;json&#x27; -p &#x27;[&#123;&quot;op&quot;:&quot;replace&quot;,&quot;path&quot;:&quot;/spec/type&quot;,&quot;value&quot;:&quot;NodePort&quot;&#125;]&#x27;</span><br><br>service/kubernetes-dashboard-kong-proxy patched<br>root@k8s-master01:~<span class=\"hljs-comment\"># kubectl get svc -A</span><br><br>NAMESPACE              NAME                                   TYPE        CLUSTER-IP       EXTERNAL-IP   PORT(S)                  AGE<br>calico-apiserver       calico-api                             ClusterIP   10.109.219.68    &lt;none&gt;        443/TCP                  21h<br>calico-system          calico-kube-controllers-metrics        ClusterIP   None             &lt;none&gt;        9094/TCP                 20h<br>calico-system          calico-typha                           ClusterIP   10.104.149.150   &lt;none&gt;        5473/TCP                 21h<br>default                kubernetes                             ClusterIP   10.96.0.1        &lt;none&gt;        443/TCP                  23h<br>default                nginxweb-service                       NodePort    10.106.65.218    &lt;none&gt;        80:30080/TCP             19h<br>kube-system            kube-dns                               ClusterIP   10.96.0.10       &lt;none&gt;        53/UDP,53/TCP,9153/TCP   23h<br>kubernetes-dashboard   kubernetes-dashboard-api               ClusterIP   10.104.42.174    &lt;none&gt;        8000/TCP                 128m<br>kubernetes-dashboard   kubernetes-dashboard-auth              ClusterIP   10.98.125.185    &lt;none&gt;        8000/TCP                 128m<br>kubernetes-dashboard   kubernetes-dashboard-external          NodePort    10.101.246.117   &lt;none&gt;        443:30011/TCP            7m8s<br>kubernetes-dashboard   kubernetes-dashboard-kong-proxy        NodePort    10.110.23.250    &lt;none&gt;        443:31094/TCP            128m<br>kubernetes-dashboard   kubernetes-dashboard-metrics-scraper   ClusterIP   10.102.211.164   &lt;none&gt;        8000/TCP                 128m<br>kubernetes-dashboard   kubernetes-dashboard-web               ClusterIP   10.107.236.126   &lt;none&gt;        8000/TCP                 128m<br><br><span class=\"hljs-comment\"># 相关的命令1</span><br>root@k8s-master01:~<span class=\"hljs-comment\"># kubectl get svc -A | grep dash</span><br><br>kubernetes-dashboard   kubernetes-dashboard-api               ClusterIP   10.104.42.174    &lt;none&gt;        8000/TCP                 166m<br>kubernetes-dashboard   kubernetes-dashboard-auth              ClusterIP   10.98.125.185    &lt;none&gt;        8000/TCP                 166m<br>kubernetes-dashboard   kubernetes-dashboard-external          NodePort    10.101.246.117   &lt;none&gt;        443:30011/TCP            44m<br>kubernetes-dashboard   kubernetes-dashboard-kong-proxy        NodePort    10.110.23.250    &lt;none&gt;        443:31094/TCP            166m<br>kubernetes-dashboard   kubernetes-dashboard-metrics-scraper   ClusterIP   10.102.211.164   &lt;none&gt;        8000/TCP                 166m<br>kubernetes-dashboard   kubernetes-dashboard-web               ClusterIP   10.107.236.126   &lt;none&gt;        8000/TCP                 166m<br><br><span class=\"hljs-comment\"># 相关的命令2</span><br>root@k8s-master01:~<span class=\"hljs-comment\"># kubectl get svc -A -n kubernetes-dashboard</span><br><br>NAMESPACE              NAME                                   TYPE        CLUSTER-IP       EXTERNAL-IP   PORT(S)                  AGE<br>calico-apiserver       calico-api                             ClusterIP   10.109.219.68    &lt;none&gt;        443/TCP                  21h<br>calico-system          calico-kube-controllers-metrics        ClusterIP   None             &lt;none&gt;        9094/TCP                 21h<br>calico-system          calico-typha                           ClusterIP   10.104.149.150   &lt;none&gt;        5473/TCP                 21h<br>default                kubernetes                             ClusterIP   10.96.0.1        &lt;none&gt;        443/TCP                  24h<br>default                nginxweb-service                       NodePort    10.106.65.218    &lt;none&gt;        80:30080/TCP             20h<br>kube-system            kube-dns                               ClusterIP   10.96.0.10       &lt;none&gt;        53/UDP,53/TCP,9153/TCP   24h<br>kubernetes-dashboard   kubernetes-dashboard-api               ClusterIP   10.104.42.174    &lt;none&gt;        8000/TCP                 165m<br>kubernetes-dashboard   kubernetes-dashboard-auth              ClusterIP   10.98.125.185    &lt;none&gt;        8000/TCP                 165m<br>kubernetes-dashboard   kubernetes-dashboard-external          NodePort    10.101.246.117   &lt;none&gt;        443:30011/TCP            44m<br>kubernetes-dashboard   kubernetes-dashboard-kong-proxy        NodePort    10.110.23.250    &lt;none&gt;        443:31094/TCP            165m<br>kubernetes-dashboard   kubernetes-dashboard-metrics-scraper   ClusterIP   10.102.211.164   &lt;none&gt;        8000/TCP                 165m<br>kubernetes-dashboard   kubernetes-dashboard-web               ClusterIP   10.107.236.126   &lt;none&gt;        8000/TCP                 165m<br><br></code></pre></td></tr></table></figure>\n\n\n\n<p>如果显示您的连接不是私密连接，在当前页面用键盘输入thisisunsafe,不是在地址栏输入，就直接输入，页面即会自动刷新进入网页。不行就多输入几次，但是要确保输入是正确的。具体请查看这篇<a href=\"https://blog.csdn.net/qq719779232/article/details/144852360\">博客</a></p>\n<h4 id=\"6-4-2-4-访问Kubernetes-Dashboard-Web页面\"><a href=\"#6-4-2-4-访问Kubernetes-Dashboard-Web页面\" class=\"headerlink\" title=\"6.4.2.4 访问Kubernetes Dashboard Web页面\"></a>6.4.2.4 访问Kubernetes Dashboard Web页面</h4><p>可以看到随机开放了31094端口访问，浏览器中打开 <a href=\"https://192.168.11.161:31094/\">https://192.168.11.161:31094</a> 测试（忽略不是私密连接的提示后）可以正常打开，输入token后能够正常登录。</p>\n<p><img src=\"/Node/imgs/03_02/Dashboard-Load.png\" alt=\"Kubernetes-Dashboard-HomePage\"></p>\n<p><img src=\"/Node/imgs/03_02/Dashboard.png\" alt=\"Kubernetes-Dashboard-HomePage\"></p>\n<h4 id=\"6-4-2-5-优点与缺点\"><a href=\"#6-4-2-5-优点与缺点\" class=\"headerlink\" title=\"6.4.2.5 优点与缺点\"></a>6.4.2.5 优点与缺点</h4><ul>\n<li><p>这种方法一旦配置完成，只要集群存在就可以持续访问，提供了长期稳定的访问途径；同时可以直接通过任意节点 IP 加上指定端口号来访问服务，易于访问。</p>\n</li>\n<li><p>但是，它也带来了较高的安全风险，如果未正确配置防火墙规则，可能会导致服务被未经授权的人访问；</p>\n</li>\n<li><p>此外，还需要选择一个未被占用的端口，因此有一定的端口限制。</p>\n</li>\n</ul>\n<h4 id=\"6-4-2-6-参考资料\"><a href=\"#6-4-2-6-参考资料\" class=\"headerlink\" title=\"6.4.2.6 参考资料\"></a>6.4.2.6 参考资料</h4><ul>\n<li><a href=\"https://github.com/kubernetes/dashboard/blob/kubernetes-dashboard-7.11.1/README.md\">kubernetes-dashboard-7.11.1/README.md</a></li>\n<li><a href=\"https://github.com/kubernetes/dashboard/tree/master/docs/user/accessing-dashboard\">访问仪表板</a></li>\n<li><a href=\"https://www.bilibili.com/video/BV15UsSeDEZA/\">69.Kubernetes(k8s)手把手教程—部署Dashboard以图形化方式管理Kubernetes</a></li>\n<li><a href=\"https://www.cnblogs.com/renshengdezheli/p/17513879.html\">Kubernetes(k8s) Web-UI界面(一)：部署和访问仪表板(Dashboard)</a></li>\n<li><a href=\"https://www.oiox.cn/index.php/archives/428/\">二进制安装Kubernetes（k8s）v1.32.0</a></li>\n</ul>\n<h3 id=\"6-5-清理和后续步骤\"><a href=\"#6-5-清理和后续步骤\" class=\"headerlink\" title=\"6.5 清理和后续步骤\"></a>6.5 清理和后续步骤</h3><p>删除管理员ServiceAccount和ClusterRoleBinding。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># kubectl -n kubernetes-dashboard delete serviceaccount admin-user</span><br>root@k8s-master01:~<span class=\"hljs-comment\"># kubectl -n kubernetes-dashboard delete clusterrolebinding admin-user</span><br></code></pre></td></tr></table></figure>\n\n<p>了解有关如何在 Kubernetes 中授予/拒绝权限的更多信息，阅读官方<a href=\"https://kubernetes.io/docs/reference/access-authn-authz/authentication/\">身份验证</a>和<a href=\"https://kubernetes.io/docs/reference/access-authn-authz/authorization/\">授权</a>文档。</p>\n<h1 id=\"七、-实际部署过程中遇到的问题\"><a href=\"#七、-实际部署过程中遇到的问题\" class=\"headerlink\" title=\"七、 实际部署过程中遇到的问题\"></a>七、 实际部署过程中遇到的问题</h1><h3 id=\"7-1-1操作系统重启后无法使用原账户登录\"><a href=\"#7-1-1操作系统重启后无法使用原账户登录\" class=\"headerlink\" title=\"7.1.1操作系统重启后无法使用原账户登录\"></a>7.1.1操作系统重启后无法使用原账户登录</h3><h3 id=\"7-1-2-kubeadm初始化失败，抛出错误\"><a href=\"#7-1-2-kubeadm初始化失败，抛出错误\" class=\"headerlink\" title=\"7.1.2 kubeadm初始化失败，抛出错误\"></a>7.1.2 kubeadm初始化失败，抛出错误</h3><h3 id=\"7-1-3-安装如遇到错误，需要修改配置，关闭kubelet\"><a href=\"#7-1-3-安装如遇到错误，需要修改配置，关闭kubelet\" class=\"headerlink\" title=\"7.1.3 安装如遇到错误，需要修改配置，关闭kubelet\"></a>7.1.3 安装如遇到错误，需要修改配置，关闭kubelet</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># sudo rm -rf /etc/kubernetes/manifests/kube-apiserver.yaml</span><br>~<span class=\"hljs-comment\"># sudo rm -rf /etc/kubernetes/manifests/kube-controller-manager.yaml</span><br>~<span class=\"hljs-comment\"># sudo rm -rf /etc/kubernetes/manifests/kube-scheduler.yaml</span><br>~<span class=\"hljs-comment\"># sudo rm -rf /etc/kubernetes/manifests/etcd.yaml</span><br><br>~<span class=\"hljs-comment\"># sudo rm -rf /etc/kubernetes/manifests/kube-apiserver.yaml &amp;&amp; sudo rm -rf /etc/kubernetes/manifests/kube-controller-manager.yaml &amp;&amp; sudo rm -rf /etc/kubernetes/manifests/kube-scheduler.yaml &amp;&amp; sudo rm -rf /etc/kubernetes/manifests/etcd.yaml</span><br><br>sudo netstat -tulnp | grep :10250<br>sudo lsof -i :10250<br><br>sudo <span class=\"hljs-built_in\">kill</span> 2832<br>sudo <span class=\"hljs-built_in\">kill</span> -9 1234<br><br>~<span class=\"hljs-comment\"># systemctl status kubelet</span><br>~<span class=\"hljs-comment\"># systemctl stop kubelet</span><br></code></pre></td></tr></table></figure>\n\n<h4 id=\"7-1-3-2-重新初始化-Kubernetes-集群\"><a href=\"#7-1-3-2-重新初始化-Kubernetes-集群\" class=\"headerlink\" title=\"7.1.3.2 重新初始化 Kubernetes 集群\"></a>7.1.3.2 重新初始化 Kubernetes 集群</h4><ul>\n<li>步骤 1：重置 kubeadm\\2：清理残留文件</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># sudo kubeadm reset -f &amp;&amp; sudo rm -rf /etc/kubernetes /var/lib/etcd /var/lib/kubelet</span><br></code></pre></td></tr></table></figure>\n\n\n<ul>\n<li> <a href=\"https://blog.csdn.net/m0_51510236/article/details/136329885\">https://blog.csdn.net/m0_51510236/article/details/136329885</a></li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">root@k8s-master01:~<span class=\"hljs-comment\"># sudo kubeadm init \\</span><br>--apiserver-advertise-address=192.168.11.161 \\<br>--apiserver-cert-extra-sans=k8s-master01 \\<br>--image-repository=registry.aliyuncs.com/google_containers \\<br>--kubernetes-version=v1.32.3 \\<br>--service-cidr=10.96.0.0/12 \\<br>--pod-network-cidr=10.244.0.0/16 \\<br>--cri-socket=unix:///run/containerd/containerd.sock \\<br>--cgroup-driver=systemd \\<br>--upload-certs \\<br>--v=9<br></code></pre></td></tr></table></figure>\n\n\n\n\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">Mar 22 13:26:21 k8s-master01 kubelet[9760]: E0322 13:26:21.545465    9760 pod_workers.go:1301] <span class=\"hljs-string\">&quot;Error syncing pod, skipping&quot;</span> err=<span class=\"hljs-string\">&quot;failed to \\&quot;CreatePodSandbox\\&quot; for \\&quot;kube-controller-manager-k8s-master01_kube-system(19dfb154dd163834eef61b7252703fed)\\&quot; with CreatePodSandboxError: \\&quot;Failed to create sandbox for pod \\\\\\&quot;kube-controller-manager-k8s-master01_kube-system(19dfb154dd163834eef61b7252703fed)\\\\\\&quot;: rpc error: code = Unknown desc = failed to start sandbox \\\\\\&quot;623e76469b34076613d313938932728b1c6e63d0951c4c1a1a7563332c35b2e2\\\\\\&quot;: failed to create containerd task: failed to create shim task: OCI runtime create failed: unable to retrieve OCI runtime error (open /run/containerd/io.containerd.runtime.v2.task/k8s.io/623e76469b34076613d313938932728b1c6e63d0951c4c1a1a7563332c35b2e2/log.json: no such file or directory): exec: \\\\\\&quot;runc\\\\\\&quot;: executable file not found in <span class=\"hljs-variable\">$PATH</span>\\&quot;&quot;</span> pod=<span class=\"hljs-string\">&quot;kube-system/kube-controller-manager-k8s-master01&quot;</span> podUID=<span class=\"hljs-string\">&quot;19dfb154dd163834eef61b7252703fed&quot;</span><br>Mar 22 13:26:23 k8s-master01 kubelet[9760]: E0322 13:26:23.120378    9760 controller.go:145] <span class=\"hljs-string\">&quot;Failed to ensure lease exists, will retry&quot;</span> err=<span class=\"hljs-string\">&quot;Get \\&quot;https://192.168.11.161:6443/apis/coordination.k8s.io/v1/namespaces/kube-node-lease/leases/k8s-master01?timeout=10s\\&quot;: dial tcp 192.168.11.161:6443: connect: connection refused&quot;</span> interval=<span class=\"hljs-string\">&quot;7s&quot;</span><br>Mar 22 13:26:23 k8s-master01 kubelet[9760]: I0322 13:26:23.327532    9760 kubelet_node_status.go:75] <span class=\"hljs-string\">&quot;Attempting to register node&quot;</span> node=<span class=\"hljs-string\">&quot;k8s-master01&quot;</span><br>Mar 22 13:26:23 k8s-master01 kubelet[9760]: E0322 13:26:23.328029    9760 kubelet_node_status.go:107] <span class=\"hljs-string\">&quot;Unable to register node with API server&quot;</span> err=<span class=\"hljs-string\">&quot;Post \\&quot;https://192.168.11.161:6443/api/v1/nodes\\&quot;: dial tcp 192.168.11.161:6443: connect: connection refused&quot;</span> node=<span class=\"hljs-string\">&quot;k8s-master01&quot;</span><br>Mar 22 13:26:25 k8s-master01 kubelet[9760]: W0322 13:26:25.039914    9760 reflector.go:569] k8s.io/client-go/informers/factory.go:160: failed to list *v1.CSIDriver: Get <span class=\"hljs-string\">&quot;https://192.168.11.161:6443/apis/storage.k8s.io/v1/csidrivers?limit=500&amp;resourceVersion=0&quot;</span>: dial tcp 192.168.11.161:6443: connect: connection refused<br>Mar 22 13:26:25 k8s-master01 kubelet[9760]: E0322 13:26:25.040030    9760 reflector.go:166] <span class=\"hljs-string\">&quot;Unhandled Error&quot;</span> err=<span class=\"hljs-string\">&quot;k8s.io/client-go/informers/factory.go:160: Failed to watch *v1.CSIDriver: failed to list *v1.CSIDriver: Get \\&quot;https://192.168.11.161:6443/apis/storage.k8s.io/v1/csidrivers?limit=500&amp;resourceVersion=0\\&quot;: dial tcp 192.168.11.161:6443: connect: connection refused&quot;</span> logger=<span class=\"hljs-string\">&quot;UnhandledError&quot;</span><br>Mar 22 13:26:26 k8s-master01 kubelet[9760]: W0322 13:26:26.039053    9760 reflector.go:569] k8s.io/client-go/informers/factory.go:160: failed to list *v1.Service: Get <span class=\"hljs-string\">&quot;https://192.168.11.161:6443/api/v1/services?fieldSelector=spec.clusterIP%21%3DNone&amp;limit=500&amp;resourceVersion=0&quot;</span>: dial tcp 192.168.11.161:6443: connect: connection refused<br>Mar 22 13:26:26 k8s-master01 kubelet[9760]: E0322 13:26:26.039171    9760 reflector.go:166] <span class=\"hljs-string\">&quot;Unhandled Error&quot;</span> err=<span class=\"hljs-string\">&quot;k8s.io/client-go/informers/factory.go:160: Failed to watch *v1.Service: failed to list *v1.Service: Get \\&quot;https://192.168.11.161:6443/api/v1/services?fieldSelector=spec.clusterIP%21%3DNone&amp;limit=500&amp;resourceVersion=0\\&quot;: dial tcp 192.168.11.161:6443: connect: connection refused&quot;</span> logger=<span class=\"hljs-string\">&quot;UnhandledError&quot;</span><br>Mar 22 13:26:26 k8s-master01 kubelet[9760]: E0322 13:26:26.450839    9760 kubelet.go:3190] <span class=\"hljs-string\">&quot;No need to create a mirror pod, since failed to get node info from the cluster&quot;</span> err=<span class=\"hljs-string\">&quot;node \\&quot;k8s-master01\\&quot; not found&quot;</span> node=<span class=\"hljs-string\">&quot;k8s-master01&quot;</span><br>Mar 22 13:26:26 k8s-master01 kubelet[9760]: E0322 13:26:26.451717    9760 dns.go:153] <span class=\"hljs-string\">&quot;Nameserver limits exceeded&quot;</span> err=<span class=\"hljs-string\">&quot;Nameserver limits were exceeded, some nameservers have been omitted, the applied nameserver line is: 119.29.29.29 114.114.114.114 8.8.8.8&quot;</span><br>Mar 22 13:26:26 k8s-master01 kubelet[9760]: E0322 13:26:26.547499    9760 log.go:32] <span class=\"hljs-string\">&quot;RunPodSandbox from runtime service failed&quot;</span> err=<span class=\"hljs-string\">&quot;rpc error: code = Unknown desc = failed to start sandbox \\&quot;c54802a9d762ba695f68d28021ea9339eb8e9845d41161d6fa1f9bfb4d811c54\\&quot;: failed to create containerd task: failed to create shim task: OCI runtime create failed: unable to retrieve OCI runtime error (open /run/containerd/io.containerd.runtime.v2.task/k8s.io/c54802a9d762ba695f68d28021ea9339eb8e9845d41161d6fa1f9bfb4d811c54/log.json: no such file or directory): exec: \\&quot;runc\\&quot;: executable file not found in <span class=\"hljs-variable\">$PATH</span>&quot;</span><br>Mar 22 13:26:26 k8s-master01 kubelet[9760]: E0322 13:26:26.547575    9760 kuberuntime_sandbox.go:72] <span class=\"hljs-string\">&quot;Failed to create sandbox for pod&quot;</span> err=<span class=\"hljs-string\">&quot;rpc error: code = Unknown desc = failed to start sandbox \\&quot;c54802a9d762ba695f68d28021ea9339eb8e9845d41161d6fa1f9bfb4d811c54\\&quot;: failed to create containerd task: failed to create shim task: OCI runtime create failed: unable to retrieve OCI runtime error (open /run/containerd/io.containerd.runtime.v2.task/k8s.io/c54802a9d762ba695f68d28021ea9339eb8e9845d41161d6fa1f9bfb4d811c54/log.json: no such file or directory): exec: \\&quot;runc\\&quot;: executable file not found in <span class=\"hljs-variable\">$PATH</span>&quot;</span> pod=<span class=\"hljs-string\">&quot;kube-system/kube-apiserver-k8s-master01&quot;</span><br>Mar 22 13:26:26 k8s-master01 kubelet[9760]: E0322 13:26:26.547611    9760 kuberuntime_manager.go:1237] <span class=\"hljs-string\">&quot;CreatePodSandbox for pod failed&quot;</span> err=<span class=\"hljs-string\">&quot;rpc error: code = Unknown desc = failed to start sandbox \\&quot;c54802a9d762ba695f68d28021ea9339eb8e9845d41161d6fa1f9bfb4d811c54\\&quot;: failed to create containerd task: failed to create shim task: OCI runtime create failed: unable to retrieve OCI runtime error (open /run/containerd/io.containerd.runtime.v2.task/k8s.io/c54802a9d762ba695f68d28021ea9339eb8e9845d41161d6fa1f9bfb4d811c54/log.json: no such file or directory): exec: \\&quot;runc\\&quot;: executable file not found in <span class=\"hljs-variable\">$PATH</span>&quot;</span> pod=<span class=\"hljs-string\">&quot;kube-system/kube-apiserver-k8s-master01&quot;</span><br>Mar 22 13:26:26 k8s-master01 kubelet[9760]: E0322 13:26:26.547680    9760 pod_workers.go:1301] <span class=\"hljs-string\">&quot;Error syncing pod, skipping&quot;</span> err=<span class=\"hljs-string\">&quot;failed to \\&quot;CreatePodSandbox\\&quot; for \\&quot;kube-apiserver-k8s-master01_kube-system(843638c9eef6e3d63d22d53c9d990887)\\&quot; with CreatePodSandboxError: \\&quot;Failed to create sandbox for pod \\\\\\&quot;kube-apiserver-k8s-master01_kube-system(843638c9eef6e3d63d22d53c9d990887)\\\\\\&quot;: rpc error: code = Unknown desc = failed to start sandbox \\\\\\&quot;c54802a9d762ba695f68d28021ea9339eb8e9845d41161d6fa1f9bfb4d811c54\\\\\\&quot;: failed to create containerd task: failed to create shim task: OCI runtime create failed: unable to retrieve OCI runtime error (open /run/containerd/io.containerd.runtime.v2.task/k8s.io/c54802a9d762ba695f68d28021ea9339eb8e9845d41161d6fa1f9bfb4d811c54/log.json: no such file or directory): exec: \\\\\\&quot;runc\\\\\\&quot;: executable file not found in <span class=\"hljs-variable\">$PATH</span>\\&quot;&quot;</span> pod=<span class=\"hljs-string\">&quot;kube-system/kube-apiserver-k8s-master01&quot;</span> podUID=<span class=\"hljs-string\">&quot;843638c9eef6e3d63d22d53c9d990887&quot;</span><br>Mar 22 13:26:29 k8s-master01 kubelet[9760]: E0322 13:26:29.498553    9760 eviction_manager.go:292] <span class=\"hljs-string\">&quot;Eviction manager: failed to get summary stats&quot;</span> err=<span class=\"hljs-string\">&quot;failed to get node info: node \\&quot;k8s-master01\\&quot; not found&quot;</span><br>Mar 22 13:26:30 k8s-master01 kubelet[9760]: E0322 13:26:30.122192    9760 controller.go:145] <span class=\"hljs-string\">&quot;Failed to ensure lease exists, will retry&quot;</span> err=<span class=\"hljs-string\">&quot;Get \\&quot;https://192.168.11.161:6443/apis/coordination.k8s.io/v1/namespaces/kube-node-lease/leases/k8s-master01?timeout=10s\\&quot;: dial tcp 192.168.11.161:6443: connect: connection refused&quot;</span> interval=<span class=\"hljs-string\">&quot;7s&quot;</span><br>Mar 22 13:26:30 k8s-master01 kubelet[9760]: I0322 13:26:30.329597    9760 kubelet_node_status.go:75] <span class=\"hljs-string\">&quot;Attempting to register node&quot;</span> node=<span class=\"hljs-string\">&quot;k8s-master01&quot;</span><br>Mar 22 13:26:30 k8s-master01 kubelet[9760]: E0322 13:26:30.330070    9760 kubelet_node_status.go:107] <span class=\"hljs-string\">&quot;Unable to register node with API server&quot;</span> err=<span class=\"hljs-string\">&quot;Post \\&quot;https://192.168.11.161:6443/api/v1/nodes\\&quot;: dial tcp 192.168.11.161:6443: connect: connection refused&quot;</span> node=<span class=\"hljs-string\">&quot;k8s-master01&quot;</span><br>Mar 22 13:26:30 k8s-master01 kubelet[9760]: E0322 13:26:30.450085    9760 kubelet.go:3190] <span class=\"hljs-string\">&quot;No need to create a mirror pod, since failed to get node info from the cluster&quot;</span> err=<span class=\"hljs-string\">&quot;node \\&quot;k8s-master01\\&quot; not found&quot;</span> node=<span class=\"hljs-string\">&quot;k8s-master01&quot;</span><br>Mar 22 13:26:30 k8s-master01 kubelet[9760]: E0322 13:26:30.450964    9760 dns.go:153] <span class=\"hljs-string\">&quot;Nameserver limits exceeded&quot;</span> err=<span class=\"hljs-string\">&quot;Nameserver limits were exceeded, some nameservers have been omitted, the applied nameserver line is: 119.29.29.29 114.114.114.114 8.8.8.8&quot;</span><br>Mar 22 13:26:30 k8s-master01 kubelet[9760]: E0322 13:26:30.548988    9760 log.go:32] <span class=\"hljs-string\">&quot;RunPodSandbox from runtime service failed&quot;</span> err=<span class=\"hljs-string\">&quot;rpc error: code = Unknown desc = failed to start sandbox \\&quot;f8b4188ebe49ae964cfbbb1837c3899194dede9e323889d10636e4002993581b\\&quot;: failed to create containerd task: failed to create shim task: OCI runtime create failed: unable to retrieve OCI runtime error (open /run/containerd/io.containerd.runtime.v2.task/k8s.io/f8b4188ebe49ae964cfbbb1837c3899194dede9e323889d10636e4002993581b/log.json: no such file or directory): exec: \\&quot;runc\\&quot;: executable file not found in <span class=\"hljs-variable\">$PATH</span>&quot;</span><br>Mar 22 13:26:30 k8s-master01 kubelet[9760]: E0322 13:26:30.549096    9760 kuberuntime_sandbox.go:72] <span class=\"hljs-string\">&quot;Failed to create sandbox for pod&quot;</span> err=<span class=\"hljs-string\">&quot;rpc error: code = Unknown desc = failed to start sandbox \\&quot;f8b4188ebe49ae964cfbbb1837c3899194dede9e323889d10636e4002993581b\\&quot;: failed to create containerd task: failed to create shim task: OCI runtime create failed: unable to retrieve OCI runtime error (open /run/containerd/io.containerd.runtime.v2.task/k8s.io/f8b4188ebe49ae964cfbbb1837c3899194dede9e323889d10636e4002993581b/log.json: no such file or directory): exec: \\&quot;runc\\&quot;: executable file not found in <span class=\"hljs-variable\">$PATH</span>&quot;</span> pod=<span class=\"hljs-string\">&quot;kube-system/kube-scheduler-k8s-master01&quot;</span><br>Mar 22 13:26:30 k8s-master01 kubelet[9760]: E0322 13:26:30.549145    9760 kuberuntime_manager.go:1237] <span class=\"hljs-string\">&quot;CreatePodSandbox for pod failed&quot;</span> err=<span class=\"hljs-string\">&quot;rpc error: code = Unknown desc = failed to start sandbox \\&quot;f8b4188ebe49ae964cfbbb1837c3899194dede9e323889d10636e4002993581b\\&quot;: failed to create containerd task: failed to create shim task: OCI runtime create failed: unable to retrieve OCI runtime error (open /run/containerd/io.containerd.runtime.v2.task/k8s.io/f8b4188ebe49ae964cfbbb1837c3899194dede9e323889d10636e4002993581b/log.json: no such file or directory): exec: \\&quot;runc\\&quot;: executable file not found in <span class=\"hljs-variable\">$PATH</span>&quot;</span> pod=<span class=\"hljs-string\">&quot;kube-system/kube-scheduler-k8s-master01&quot;</span><br>Mar 22 13:26:30 k8s-master01 kubelet[9760]: E0322 13:26:30.549256    9760 pod_workers.go:1301] <span class=\"hljs-string\">&quot;Error syncing pod, skipping&quot;</span> err=<span class=\"hljs-string\">&quot;failed to \\&quot;CreatePodSandbox\\&quot; for \\&quot;kube-scheduler-k8s-master01_kube-system(c7ec3024ac27f675ae60ec998a90ce85)\\&quot; with CreatePodSandboxError: \\&quot;Failed to create sandbox for pod \\\\\\&quot;kube-scheduler-k8s-master01_kube-system(c7ec3024ac27f675ae60ec998a90ce85)\\\\\\&quot;: rpc error: code = Unknown desc = failed to start sandbox \\\\\\&quot;f8b4188ebe49ae964cfbbb1837c3899194dede9e323889d10636e4002993581b\\\\\\&quot;: failed to create containerd task: failed to create shim task: OCI runtime create failed: unable to retrieve OCI runtime error (open /run/containerd/io.containerd.runtime.v2.task/k8s.io/f8b4188ebe49ae964cfbbb1837c3899194dede9e323889d10636e4002993581b/log.json: no such file or directory): exec: \\\\\\&quot;runc\\\\\\&quot;: executable file not found in <span class=\"hljs-variable\">$PATH</span>\\&quot;&quot;</span> pod=<span class=\"hljs-string\">&quot;kube-system/kube-scheduler-k8s-master01&quot;</span> podUID=<span class=\"hljs-string\">&quot;c7ec3024ac27f675ae60ec998a90ce85&quot;</span><br>Mar 22 13:26:31 k8s-master01 kubelet[9760]: E0322 13:26:31.073491    9760 event.go:368] <span class=\"hljs-string\">&quot;Unable to write event (may retry after sleeping)&quot;</span> err=<span class=\"hljs-string\">&quot;Post \\&quot;https://192.168.11.161:6443/api/v1/namespaces/default/events\\&quot;: dial tcp 192.168.11.161:6443: connect: connection refused&quot;</span> event=<span class=\"hljs-string\">&quot;&amp;Event&#123;ObjectMeta:&#123;k8s-master01.182f0852158da106  default    0 0001-01-01 00:00:00 +0000 UTC &lt;nil&gt; &lt;nil&gt; map[] map[] [] [] []&#125;,InvolvedObject:ObjectReference&#123;Kind:Node,Namespace:,Name:k8s-master01,UID:k8s-master01,APIVersion:,ResourceVersion:,FieldPath:,&#125;,Reason:NodeHasSufficientPID,Message:Node k8s-master01 status is now: NodeHasSufficientPID,Source:EventSource&#123;Component:kubelet,Host:k8s-master01,&#125;,FirstTimestamp:2025-03-22 13:18:49.45761511 +0800 CST m=+0.101712151,LastTimestamp:2025-03-22 13:18:49.45761511 +0800 CST m=+0.101712151,Count:1,Type:Normal,EventTime:0001-01-01 00:00:00 +0000 UTC,Series:nil,Action:,Related:nil,ReportingController:kubelet,ReportingInstance:k8s-master01,&#125;&quot;</span><br><br></code></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"7-1-4-Kubernets集群中部署calico网络插件时kubectl-get-pods-n-tigera-operator命令一直显示pod为ImagePullBackOff状态\"><a href=\"#7-1-4-Kubernets集群中部署calico网络插件时kubectl-get-pods-n-tigera-operator命令一直显示pod为ImagePullBackOff状态\" class=\"headerlink\" title=\"7.1.4 Kubernets集群中部署calico网络插件时kubectl get pods -n tigera-operator命令一直显示pod为ImagePullBackOff状态\"></a>7.1.4 Kubernets集群中部署calico网络插件时kubectl get pods -n tigera-operator命令一直显示pod为ImagePullBackOff状态</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># kubectl describe pod tigera-operator-ccfc44587-vswlt -n tigera-operator</span><br></code></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># kubectl get pods -n tigera-operator -o wide</span><br></code></pre></td></tr></table></figure>\n\n<p>查到“Failed to pull image “quay.io/tigera/operator:v1.36.5”: failed to pull and unpack image “quay.io/tigera/operator:v1.36.5”: failed to copy: read tcp 192.168.11.166:53828-&gt;23.60.96.137:443: read: connection reset by peer<br>”<br>需要手动拉取镜像或者增加镜像源（参考<a href=\"https://blog.csdn.net/nxg810251/article/details/145170594%E4%B8%AD%E7%9A%84config.toml%E6%96%87%E4%BB%B6%E7%9A%84Line206~Line219%E4%B8%AD%E7%9A%84%E9%85%8D%E7%BD%AE%EF%BC%89\">https://blog.csdn.net/nxg810251/article/details/145170594中的config.toml文件的Line206~Line219中的配置）</a> </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># sudo systemctl daemon-reload &amp;&amp; sudo systemctl restart containerd &amp;&amp; sudo systemctl restart kubelet</span><br></code></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">~<span class=\"hljs-comment\"># systemctl daemon-reload &amp;&amp; systemctl restart containerd</span><br></code></pre></td></tr></table></figure>\n\n\n<h4 id=\"7-1-4-3-参考：\"><a href=\"#7-1-4-3-参考：\" class=\"headerlink\" title=\"7.1.4.3 参考：\"></a>7.1.4.3 参考：</h4><ul>\n<li><a href=\"https://blog.csdn.net/weixin_40444270/article/details/132543441\">K8s的Pod出现Init:ImagePullBackOff问题的解决(以calico为例)</a></li>\n<li><a href=\"https://blog.csdn.net/nxg810251/article/details/145170594\">Kubernetes1.32版本搭建【超详细】</a></li>\n<li><a href=\"https://blog.csdn.net/weixin_42434261/article/details/144539712\">Kubernetes1.32版本搭建【极简版】</a></li>\n</ul>\n<h1 id=\"八、-总结\"><a href=\"#八、-总结\" class=\"headerlink\" title=\"八、 总结\"></a>八、 总结</h1><h2 id=\"8-1-可以继续优化的流程\"><a href=\"#8-1-可以继续优化的流程\" class=\"headerlink\" title=\"8.1 可以继续优化的流程\"></a>8.1 可以继续优化的流程</h2><h3 id=\"8-1-1-虚拟机镜像准备\"><a href=\"#8-1-1-虚拟机镜像准备\" class=\"headerlink\" title=\"8.1.1 虚拟机镜像准备\"></a>8.1.1 虚拟机镜像准备</h3><h3 id=\"8-1-2-containerd版本选择\"><a href=\"#8-1-2-containerd版本选择\" class=\"headerlink\" title=\"8.1.2 containerd版本选择\"></a>8.1.2 containerd版本选择</h3><h3 id=\"8-1-3-镜像源加速\"><a href=\"#8-1-3-镜像源加速\" class=\"headerlink\" title=\"8.1.3 镜像源加速\"></a>8.1.3 镜像源加速</h3><h3 id=\"8-1-4-网络配置\"><a href=\"#8-1-4-网络配置\" class=\"headerlink\" title=\"8.1.4 网络配置\"></a>8.1.4 网络配置</h3>"},{"title":"Win10安装JDK10","date":"2018-07-07T12:55:48.000Z","description":"Java基本运算符","_content":"\n\n## java 原码、反码、补码计算 以及取反(~)运算\n\n### 1.原码、反码、补码：\n- (1)在Java中，所有数据的表示方式都是以补码形式来表示\n- (2)正数：原码、反码、补码相同\n- (3)负数：符号位为1，其余各位是对原码取反，然后整个数加1\n- (4)~按位取反（反码加1称为补码。）步骤就是先求出这个数（因为java存的数是补码）的原码，然后对原码取反得到X，这个X就是我们要求的那个数的补码\n\n### 2.取反(~)运算\n     （1）n=37 ，二进制数就是 100101\n         因为在Java中，所有数据的表示方式都是以补码形式来表示，如果没有特别的说明，\n     Java 中的数据类型默认为int，int数据类型的长度为8位，就是32字节，32bit的意思，因此，n=100101的原码=补码（因为是正数，所以原=补=反）运算过程就是：\n     原码：00000000 00000000 00000000 00100101 ＝37\n\n\n     ~n（对n的原码）取反运算得：  11111111 11111111 11111111 11011010很明显，最高位是1，意思是原码为负数，负数的补码是其绝对值的原码取反，末尾再加1，因此，我们可将这个二进制数的补码进行还原：\n     首先，末尾减1得反码：11111111 11111111 11111111 11011001\n     其次，将各位取反得原码：00000000 00000000 00000000 00100110这个就是~n的绝对值形式，|~n|=38   ，\n\n     所以，~n＝－38，这个就是Java虚拟机的运算结果\n\n\n     （2）n=-4，取反 （~-4）\n     -4补码：10000000 00000000 00000000 00000100\n     -4反码：10000000 00000000 00000000 00000011\n     -4原码：11111111 11111111 11111111 11111100\n     对原码取反：00000000 00000000 00000000 00000011  （3）\n     因为是正数，所以补码等于原码等于反码=3，所以~-4=3\n\n\n### Create a new post\n\n``` bash\ndeploy:\n  - type: git\n    repo: # 像这样设置多个 git 仓库，`名称: 地址,分支`，逗号后面没有空格。\n      github: git@github.com:XXXXXX/XXXXXX.git,branch\n      coding: git@git.coding.net:XXXXXXX/XXXXXXX,coding-pages\n    message: Site updated by Hexo at {{ now('YYYY-MM-DD HH:mm:ss') }}.\n  - type: rsync\n    host: YOUR VPS IP # 你的服务器的 IP 地址\n    user: YOUR USERNAME # 你刚刚复制密钥的那个用户\n    root: YOUR DESTINATION # 你想把文件上传到哪里，比如我的是 `~/stackharbor.alynx.xyz/`\n    port: 22 # 这是 ssh 默认的端口，如果你修改了，这里也要改\n    args: --progress # 额外的 rsync 参数，我这里添加了一个进度条参数，你也可以不设置\n    delete: true # 是否删除旧的文件\n    verbose: true # 是否同步时显示详细状态\n    ignore_errors: false # 忽略错误\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/deployment.html)\n\n\n","source":"_posts/Win10安装JDK10.md","raw":"---\ntitle: Win10安装JDK10\ndate: 2018-07-07 20:55:48\ncategories: \"Java\" #文章分类目录 可以省略\ntags: #Java \n     - Java\n     - 运算符\ndescription: Java基本运算符  #你對本頁的描述 可以省略\n---\n\n\n## java 原码、反码、补码计算 以及取反(~)运算\n\n### 1.原码、反码、补码：\n- (1)在Java中，所有数据的表示方式都是以补码形式来表示\n- (2)正数：原码、反码、补码相同\n- (3)负数：符号位为1，其余各位是对原码取反，然后整个数加1\n- (4)~按位取反（反码加1称为补码。）步骤就是先求出这个数（因为java存的数是补码）的原码，然后对原码取反得到X，这个X就是我们要求的那个数的补码\n\n### 2.取反(~)运算\n     （1）n=37 ，二进制数就是 100101\n         因为在Java中，所有数据的表示方式都是以补码形式来表示，如果没有特别的说明，\n     Java 中的数据类型默认为int，int数据类型的长度为8位，就是32字节，32bit的意思，因此，n=100101的原码=补码（因为是正数，所以原=补=反）运算过程就是：\n     原码：00000000 00000000 00000000 00100101 ＝37\n\n\n     ~n（对n的原码）取反运算得：  11111111 11111111 11111111 11011010很明显，最高位是1，意思是原码为负数，负数的补码是其绝对值的原码取反，末尾再加1，因此，我们可将这个二进制数的补码进行还原：\n     首先，末尾减1得反码：11111111 11111111 11111111 11011001\n     其次，将各位取反得原码：00000000 00000000 00000000 00100110这个就是~n的绝对值形式，|~n|=38   ，\n\n     所以，~n＝－38，这个就是Java虚拟机的运算结果\n\n\n     （2）n=-4，取反 （~-4）\n     -4补码：10000000 00000000 00000000 00000100\n     -4反码：10000000 00000000 00000000 00000011\n     -4原码：11111111 11111111 11111111 11111100\n     对原码取反：00000000 00000000 00000000 00000011  （3）\n     因为是正数，所以补码等于原码等于反码=3，所以~-4=3\n\n\n### Create a new post\n\n``` bash\ndeploy:\n  - type: git\n    repo: # 像这样设置多个 git 仓库，`名称: 地址,分支`，逗号后面没有空格。\n      github: git@github.com:XXXXXX/XXXXXX.git,branch\n      coding: git@git.coding.net:XXXXXXX/XXXXXXX,coding-pages\n    message: Site updated by Hexo at {{ now('YYYY-MM-DD HH:mm:ss') }}.\n  - type: rsync\n    host: YOUR VPS IP # 你的服务器的 IP 地址\n    user: YOUR USERNAME # 你刚刚复制密钥的那个用户\n    root: YOUR DESTINATION # 你想把文件上传到哪里，比如我的是 `~/stackharbor.alynx.xyz/`\n    port: 22 # 这是 ssh 默认的端口，如果你修改了，这里也要改\n    args: --progress # 额外的 rsync 参数，我这里添加了一个进度条参数，你也可以不设置\n    delete: true # 是否删除旧的文件\n    verbose: true # 是否同步时显示详细状态\n    ignore_errors: false # 忽略错误\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/deployment.html)\n\n\n","slug":"Win10安装JDK10","published":1,"updated":"2025-03-26T06:43:53.002Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cm8pr0j2e0016gskz00usag16","content":"<h2 id=\"java-原码、反码、补码计算-以及取反-运算\"><a href=\"#java-原码、反码、补码计算-以及取反-运算\" class=\"headerlink\" title=\"java 原码、反码、补码计算 以及取反(~)运算\"></a>java 原码、反码、补码计算 以及取反(~)运算</h2><h3 id=\"1-原码、反码、补码：\"><a href=\"#1-原码、反码、补码：\" class=\"headerlink\" title=\"1.原码、反码、补码：\"></a>1.原码、反码、补码：</h3><ul>\n<li>(1)在Java中，所有数据的表示方式都是以补码形式来表示</li>\n<li>(2)正数：原码、反码、补码相同</li>\n<li>(3)负数：符号位为1，其余各位是对原码取反，然后整个数加1</li>\n<li>(4)~按位取反（反码加1称为补码。）步骤就是先求出这个数（因为java存的数是补码）的原码，然后对原码取反得到X，这个X就是我们要求的那个数的补码</li>\n</ul>\n<h3 id=\"2-取反-运算\"><a href=\"#2-取反-运算\" class=\"headerlink\" title=\"2.取反(~)运算\"></a>2.取反(~)运算</h3><pre><code> （1）n=37 ，二进制数就是 100101\n     因为在Java中，所有数据的表示方式都是以补码形式来表示，如果没有特别的说明，\n Java 中的数据类型默认为int，int数据类型的长度为8位，就是32字节，32bit的意思，因此，n=100101的原码=补码（因为是正数，所以原=补=反）运算过程就是：\n 原码：00000000 00000000 00000000 00100101 ＝37\n\n\n ~n（对n的原码）取反运算得：  11111111 11111111 11111111 11011010很明显，最高位是1，意思是原码为负数，负数的补码是其绝对值的原码取反，末尾再加1，因此，我们可将这个二进制数的补码进行还原：\n 首先，末尾减1得反码：11111111 11111111 11111111 11011001\n 其次，将各位取反得原码：00000000 00000000 00000000 00100110这个就是~n的绝对值形式，|~n|=38   ，\n\n 所以，~n＝－38，这个就是Java虚拟机的运算结果\n\n\n （2）n=-4，取反 （~-4）\n -4补码：10000000 00000000 00000000 00000100\n -4反码：10000000 00000000 00000000 00000011\n -4原码：11111111 11111111 11111111 11111100\n 对原码取反：00000000 00000000 00000000 00000011  （3）\n 因为是正数，所以补码等于原码等于反码=3，所以~-4=3\n</code></pre>\n<h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">deploy:<br>  - <span class=\"hljs-built_in\">type</span>: git<br>    repo: <span class=\"hljs-comment\"># 像这样设置多个 git 仓库，`名称: 地址,分支`，逗号后面没有空格。</span><br>      github: git@github.com:XXXXXX/XXXXXX.git,branch<br>      coding: git@git.coding.net:XXXXXXX/XXXXXXX,coding-pages<br>    message: Site updated by Hexo at &#123;&#123; now(<span class=\"hljs-string\">&#x27;YYYY-MM-DD HH:mm:ss&#x27;</span>) &#125;&#125;.<br>  - <span class=\"hljs-built_in\">type</span>: rsync<br>    host: YOUR VPS IP <span class=\"hljs-comment\"># 你的服务器的 IP 地址</span><br>    user: YOUR USERNAME <span class=\"hljs-comment\"># 你刚刚复制密钥的那个用户</span><br>    root: YOUR DESTINATION <span class=\"hljs-comment\"># 你想把文件上传到哪里，比如我的是 `~/stackharbor.alynx.xyz/`</span><br>    port: 22 <span class=\"hljs-comment\"># 这是 ssh 默认的端口，如果你修改了，这里也要改</span><br>    args: --progress <span class=\"hljs-comment\"># 额外的 rsync 参数，我这里添加了一个进度条参数，你也可以不设置</span><br>    delete: <span class=\"hljs-literal\">true</span> <span class=\"hljs-comment\"># 是否删除旧的文件</span><br>    verbose: <span class=\"hljs-literal\">true</span> <span class=\"hljs-comment\"># 是否同步时显示详细状态</span><br>    ignore_errors: <span class=\"hljs-literal\">false</span> <span class=\"hljs-comment\"># 忽略错误</span><br></code></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">$ hexo server<br></code></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/server.html\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">$ hexo generate<br></code></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">$ hexo deploy<br></code></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/deployment.html\">Deployment</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"java-原码、反码、补码计算-以及取反-运算\"><a href=\"#java-原码、反码、补码计算-以及取反-运算\" class=\"headerlink\" title=\"java 原码、反码、补码计算 以及取反(~)运算\"></a>java 原码、反码、补码计算 以及取反(~)运算</h2><h3 id=\"1-原码、反码、补码：\"><a href=\"#1-原码、反码、补码：\" class=\"headerlink\" title=\"1.原码、反码、补码：\"></a>1.原码、反码、补码：</h3><ul>\n<li>(1)在Java中，所有数据的表示方式都是以补码形式来表示</li>\n<li>(2)正数：原码、反码、补码相同</li>\n<li>(3)负数：符号位为1，其余各位是对原码取反，然后整个数加1</li>\n<li>(4)~按位取反（反码加1称为补码。）步骤就是先求出这个数（因为java存的数是补码）的原码，然后对原码取反得到X，这个X就是我们要求的那个数的补码</li>\n</ul>\n<h3 id=\"2-取反-运算\"><a href=\"#2-取反-运算\" class=\"headerlink\" title=\"2.取反(~)运算\"></a>2.取反(~)运算</h3><pre><code> （1）n=37 ，二进制数就是 100101\n     因为在Java中，所有数据的表示方式都是以补码形式来表示，如果没有特别的说明，\n Java 中的数据类型默认为int，int数据类型的长度为8位，就是32字节，32bit的意思，因此，n=100101的原码=补码（因为是正数，所以原=补=反）运算过程就是：\n 原码：00000000 00000000 00000000 00100101 ＝37\n\n\n ~n（对n的原码）取反运算得：  11111111 11111111 11111111 11011010很明显，最高位是1，意思是原码为负数，负数的补码是其绝对值的原码取反，末尾再加1，因此，我们可将这个二进制数的补码进行还原：\n 首先，末尾减1得反码：11111111 11111111 11111111 11011001\n 其次，将各位取反得原码：00000000 00000000 00000000 00100110这个就是~n的绝对值形式，|~n|=38   ，\n\n 所以，~n＝－38，这个就是Java虚拟机的运算结果\n\n\n （2）n=-4，取反 （~-4）\n -4补码：10000000 00000000 00000000 00000100\n -4反码：10000000 00000000 00000000 00000011\n -4原码：11111111 11111111 11111111 11111100\n 对原码取反：00000000 00000000 00000000 00000011  （3）\n 因为是正数，所以补码等于原码等于反码=3，所以~-4=3\n</code></pre>\n<h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">deploy:<br>  - <span class=\"hljs-built_in\">type</span>: git<br>    repo: <span class=\"hljs-comment\"># 像这样设置多个 git 仓库，`名称: 地址,分支`，逗号后面没有空格。</span><br>      github: git@github.com:XXXXXX/XXXXXX.git,branch<br>      coding: git@git.coding.net:XXXXXXX/XXXXXXX,coding-pages<br>    message: Site updated by Hexo at &#123;&#123; now(<span class=\"hljs-string\">&#x27;YYYY-MM-DD HH:mm:ss&#x27;</span>) &#125;&#125;.<br>  - <span class=\"hljs-built_in\">type</span>: rsync<br>    host: YOUR VPS IP <span class=\"hljs-comment\"># 你的服务器的 IP 地址</span><br>    user: YOUR USERNAME <span class=\"hljs-comment\"># 你刚刚复制密钥的那个用户</span><br>    root: YOUR DESTINATION <span class=\"hljs-comment\"># 你想把文件上传到哪里，比如我的是 `~/stackharbor.alynx.xyz/`</span><br>    port: 22 <span class=\"hljs-comment\"># 这是 ssh 默认的端口，如果你修改了，这里也要改</span><br>    args: --progress <span class=\"hljs-comment\"># 额外的 rsync 参数，我这里添加了一个进度条参数，你也可以不设置</span><br>    delete: <span class=\"hljs-literal\">true</span> <span class=\"hljs-comment\"># 是否删除旧的文件</span><br>    verbose: <span class=\"hljs-literal\">true</span> <span class=\"hljs-comment\"># 是否同步时显示详细状态</span><br>    ignore_errors: <span class=\"hljs-literal\">false</span> <span class=\"hljs-comment\"># 忽略错误</span><br></code></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">$ hexo server<br></code></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/server.html\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">$ hexo generate<br></code></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">$ hexo deploy<br></code></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/deployment.html\">Deployment</a></p>\n"},{"title":"Spring-IoC容器源码导读","date":"2019-11-22T14:10:48.000Z","description":"Spring-IoC容器源码解析","_content":"\n# 1.几个重要类/接口\n## 阅读前的准备\n- 源码下载：\n\t- https://github.com/spring-projects/spring-framework  \n\t- https://github.com/spring-projects/spring-framework.git\n- 源码版本：v5.2.1.RELEASE\n\n## 1.1 BeanFactory 顶级接口（低配版的IoC容器）\n### BeanFactory接口定义说明\n- BeanFactory是低配版的IoC容器，定义了Ioc容器基本的功能\n\n### 完整版源码：\n```java\n/*\n * Copyright 2002-2019 the original author or authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\npackage org.springframework.beans.factory;\n\nimport org.springframework.beans.BeansException;\nimport org.springframework.core.ResolvableType;\nimport org.springframework.lang.Nullable;\n\n/**\n * The root interface for accessing a Spring bean container.\n * This is the basic client view of a bean container;\n * further interfaces such as {@link ListableBeanFactory} and\n * {@link org.springframework.beans.factory.config.ConfigurableBeanFactory}\n * are available for specific purposes.\n *\n * <p>This interface is implemented by objects that hold a number of bean definitions,\n * each uniquely identified by a String name. Depending on the bean definition,\n * the factory will return either an independent instance of a contained object\n * (the Prototype design pattern), or a single shared instance (a superior\n * alternative to the Singleton design pattern, in which the instance is a\n * singleton in the scope of the factory). Which type of instance will be returned\n * depends on the bean factory configuration: the API is the same. Since Spring\n * 2.0, further scopes are available depending on the concrete application\n * context (e.g. \"request\" and \"session\" scopes in a web environment).\n *\n * <p>The point of this approach is that the BeanFactory is a central registry\n * of application components, and centralizes configuration of application\n * components (no more do individual objects need to read properties files,\n * for example). See chapters 4 and 11 of \"Expert One-on-One J2EE Design and\n * Development\" for a discussion of the benefits of this approach.\n *\n * <p>Note that it is generally better to rely on Dependency Injection\n * (\"push\" configuration) to configure application objects through setters\n * or constructors, rather than use any form of \"pull\" configuration like a\n * BeanFactory lookup. Spring's Dependency Injection functionality is\n * implemented using this BeanFactory interface and its subinterfaces.\n *\n * <p>Normally a BeanFactory will load bean definitions stored in a configuration\n * source (such as an XML document), and use the {@code org.springframework.beans}\n * package to configure the beans. However, an implementation could simply return\n * Java objects it creates as necessary directly in Java code. There are no\n * constraints on how the definitions could be stored: LDAP, RDBMS, XML,\n * properties file, etc. Implementations are encouraged to support references\n * amongst beans (Dependency Injection).\n *\n * <p>In contrast to the methods in {@link ListableBeanFactory}, all of the\n * operations in this interface will also check parent factories if this is a\n * {@link HierarchicalBeanFactory}. If a bean is not found in this factory instance,\n * the immediate parent factory will be asked. Beans in this factory instance\n * are supposed to override beans of the same name in any parent factory.\n *\n * <p>Bean factory implementations should support the standard bean lifecycle interfaces\n * as far as possible. The full set of initialization methods and their standard order is:\n * <ol>\n * <li>BeanNameAware's {@code setBeanName}\n * <li>BeanClassLoaderAware's {@code setBeanClassLoader}\n * <li>BeanFactoryAware's {@code setBeanFactory}\n * <li>EnvironmentAware's {@code setEnvironment}\n * <li>EmbeddedValueResolverAware's {@code setEmbeddedValueResolver}\n * <li>ResourceLoaderAware's {@code setResourceLoader}\n * (only applicable when running in an application context)\n * <li>ApplicationEventPublisherAware's {@code setApplicationEventPublisher}\n * (only applicable when running in an application context)\n * <li>MessageSourceAware's {@code setMessageSource}\n * (only applicable when running in an application context)\n * <li>ApplicationContextAware's {@code setApplicationContext}\n * (only applicable when running in an application context)\n * <li>ServletContextAware's {@code setServletContext}\n * (only applicable when running in a web application context)\n * <li>{@code postProcessBeforeInitialization} methods of BeanPostProcessors\n * <li>InitializingBean's {@code afterPropertiesSet}\n * <li>a custom init-method definition\n * <li>{@code postProcessAfterInitialization} methods of BeanPostProcessors\n * </ol>\n *\n * <p>On shutdown of a bean factory, the following lifecycle methods apply:\n * <ol>\n * <li>{@code postProcessBeforeDestruction} methods of DestructionAwareBeanPostProcessors\n * <li>DisposableBean's {@code destroy}\n * <li>a custom destroy-method definition\n * </ol>\n *\n * @author Rod Johnson\n * @author Juergen Hoeller\n * @author Chris Beams\n * @since 13 April 2001\n * @see BeanNameAware#setBeanName\n * @see BeanClassLoaderAware#setBeanClassLoader\n * @see BeanFactoryAware#setBeanFactory\n * @see org.springframework.context.ResourceLoaderAware#setResourceLoader\n * @see org.springframework.context.ApplicationEventPublisherAware#setApplicationEventPublisher\n * @see org.springframework.context.MessageSourceAware#setMessageSource\n * @see org.springframework.context.ApplicationContextAware#setApplicationContext\n * @see org.springframework.web.context.ServletContextAware#setServletContext\n * @see org.springframework.beans.factory.config.BeanPostProcessor#postProcessBeforeInitialization\n * @see InitializingBean#afterPropertiesSet\n * @see org.springframework.beans.factory.support.RootBeanDefinition#getInitMethodName\n * @see org.springframework.beans.factory.config.BeanPostProcessor#postProcessAfterInitialization\n * @see DisposableBean#destroy\n * @see org.springframework.beans.factory.support.RootBeanDefinition#getDestroyMethodName\n */\npublic interface BeanFactory {\n\n\t/**\n\t * Used to dereference a {@link FactoryBean} instance and distinguish it from\n\t * beans <i>created</i> by the FactoryBean. For example, if the bean named\n\t * {@code myJndiObject} is a FactoryBean, getting {@code &myJndiObject}\n\t * will return the factory, not the instance returned by the factory.\n\t */\n\tString FACTORY_BEAN_PREFIX = \"&\";\n\n\n\t/**\n\t * Return an instance, which may be shared or independent, of the specified bean.\n\t * <p>This method allows a Spring BeanFactory to be used as a replacement for the\n\t * Singleton or Prototype design pattern. Callers may retain references to\n\t * returned objects in the case of Singleton beans.\n\t * <p>Translates aliases back to the corresponding canonical bean name.\n\t * Will ask the parent factory if the bean cannot be found in this factory instance.\n\t * @param name the name of the bean to retrieve\n\t * @return an instance of the bean\n\t * @throws NoSuchBeanDefinitionException if there is no bean with the specified name\n\t * @throws BeansException if the bean could not be obtained\n\t */\n\tObject getBean(String name) throws BeansException;\n\n\t/**\n\t * Return an instance, which may be shared or independent, of the specified bean.\n\t * <p>Behaves the same as {@link #getBean(String)}, but provides a measure of type\n\t * safety by throwing a BeanNotOfRequiredTypeException if the bean is not of the\n\t * required type. This means that ClassCastException can't be thrown on casting\n\t * the result correctly, as can happen with {@link #getBean(String)}.\n\t * <p>Translates aliases back to the corresponding canonical bean name.\n\t * Will ask the parent factory if the bean cannot be found in this factory instance.\n\t * @param name the name of the bean to retrieve\n\t * @param requiredType type the bean must match; can be an interface or superclass\n\t * @return an instance of the bean\n\t * @throws NoSuchBeanDefinitionException if there is no such bean definition\n\t * @throws BeanNotOfRequiredTypeException if the bean is not of the required type\n\t * @throws BeansException if the bean could not be created\n\t */\n\t<T> T getBean(String name, Class<T> requiredType) throws BeansException;\n\n\t/**\n\t * Return an instance, which may be shared or independent, of the specified bean.\n\t * <p>Allows for specifying explicit constructor arguments / factory method arguments,\n\t * overriding the specified default arguments (if any) in the bean definition.\n\t * @param name the name of the bean to retrieve\n\t * @param args arguments to use when creating a bean instance using explicit arguments\n\t * (only applied when creating a new instance as opposed to retrieving an existing one)\n\t * @return an instance of the bean\n\t * @throws NoSuchBeanDefinitionException if there is no such bean definition\n\t * @throws BeanDefinitionStoreException if arguments have been given but\n\t * the affected bean isn't a prototype\n\t * @throws BeansException if the bean could not be created\n\t * @since 2.5\n\t */\n\tObject getBean(String name, Object... args) throws BeansException;\n\n\t/**\n\t * Return the bean instance that uniquely matches the given object type, if any.\n\t * <p>This method goes into {@link ListableBeanFactory} by-type lookup territory\n\t * but may also be translated into a conventional by-name lookup based on the name\n\t * of the given type. For more extensive retrieval operations across sets of beans,\n\t * use {@link ListableBeanFactory} and/or {@link BeanFactoryUtils}.\n\t * @param requiredType type the bean must match; can be an interface or superclass\n\t * @return an instance of the single bean matching the required type\n\t * @throws NoSuchBeanDefinitionException if no bean of the given type was found\n\t * @throws NoUniqueBeanDefinitionException if more than one bean of the given type was found\n\t * @throws BeansException if the bean could not be created\n\t * @since 3.0\n\t * @see ListableBeanFactory\n\t */\n\t<T> T getBean(Class<T> requiredType) throws BeansException;\n\n\t/**\n\t * Return an instance, which may be shared or independent, of the specified bean.\n\t * <p>Allows for specifying explicit constructor arguments / factory method arguments,\n\t * overriding the specified default arguments (if any) in the bean definition.\n\t * <p>This method goes into {@link ListableBeanFactory} by-type lookup territory\n\t * but may also be translated into a conventional by-name lookup based on the name\n\t * of the given type. For more extensive retrieval operations across sets of beans,\n\t * use {@link ListableBeanFactory} and/or {@link BeanFactoryUtils}.\n\t * @param requiredType type the bean must match; can be an interface or superclass\n\t * @param args arguments to use when creating a bean instance using explicit arguments\n\t * (only applied when creating a new instance as opposed to retrieving an existing one)\n\t * @return an instance of the bean\n\t * @throws NoSuchBeanDefinitionException if there is no such bean definition\n\t * @throws BeanDefinitionStoreException if arguments have been given but\n\t * the affected bean isn't a prototype\n\t * @throws BeansException if the bean could not be created\n\t * @since 4.1\n\t */\n\t<T> T getBean(Class<T> requiredType, Object... args) throws BeansException;\n\n\t/**\n\t * Return a provider for the specified bean, allowing for lazy on-demand retrieval\n\t * of instances, including availability and uniqueness options.\n\t * @param requiredType type the bean must match; can be an interface or superclass\n\t * @return a corresponding provider handle\n\t * @since 5.1\n\t * @see #getBeanProvider(ResolvableType)\n\t */\n\t<T> ObjectProvider<T> getBeanProvider(Class<T> requiredType);\n\n\t/**\n\t * Return a provider for the specified bean, allowing for lazy on-demand retrieval\n\t * of instances, including availability and uniqueness options.\n\t * @param requiredType type the bean must match; can be a generic type declaration.\n\t * Note that collection types are not supported here, in contrast to reflective\n\t * injection points. For programmatically retrieving a list of beans matching a\n\t * specific type, specify the actual bean type as an argument here and subsequently\n\t * use {@link ObjectProvider#orderedStream()} or its lazy streaming/iteration options.\n\t * @return a corresponding provider handle\n\t * @since 5.1\n\t * @see ObjectProvider#iterator()\n\t * @see ObjectProvider#stream()\n\t * @see ObjectProvider#orderedStream()\n\t */\n\t<T> ObjectProvider<T> getBeanProvider(ResolvableType requiredType);\n\n\t/**\n\t * Does this bean factory contain a bean definition or externally registered singleton\n\t * instance with the given name?\n\t * <p>If the given name is an alias, it will be translated back to the corresponding\n\t * canonical bean name.\n\t * <p>If this factory is hierarchical, will ask any parent factory if the bean cannot\n\t * be found in this factory instance.\n\t * <p>If a bean definition or singleton instance matching the given name is found,\n\t * this method will return {@code true} whether the named bean definition is concrete\n\t * or abstract, lazy or eager, in scope or not. Therefore, note that a {@code true}\n\t * return value from this method does not necessarily indicate that {@link #getBean}\n\t * will be able to obtain an instance for the same name.\n\t * @param name the name of the bean to query\n\t * @return whether a bean with the given name is present\n\t */\n\tboolean containsBean(String name);\n\n\t/**\n\t * Is this bean a shared singleton? That is, will {@link #getBean} always\n\t * return the same instance?\n\t * <p>Note: This method returning {@code false} does not clearly indicate\n\t * independent instances. It indicates non-singleton instances, which may correspond\n\t * to a scoped bean as well. Use the {@link #isPrototype} operation to explicitly\n\t * check for independent instances.\n\t * <p>Translates aliases back to the corresponding canonical bean name.\n\t * Will ask the parent factory if the bean cannot be found in this factory instance.\n\t * @param name the name of the bean to query\n\t * @return whether this bean corresponds to a singleton instance\n\t * @throws NoSuchBeanDefinitionException if there is no bean with the given name\n\t * @see #getBean\n\t * @see #isPrototype\n\t */\n\tboolean isSingleton(String name) throws NoSuchBeanDefinitionException;\n\n\t/**\n\t * Is this bean a prototype? That is, will {@link #getBean} always return\n\t * independent instances?\n\t * <p>Note: This method returning {@code false} does not clearly indicate\n\t * a singleton object. It indicates non-independent instances, which may correspond\n\t * to a scoped bean as well. Use the {@link #isSingleton} operation to explicitly\n\t * check for a shared singleton instance.\n\t * <p>Translates aliases back to the corresponding canonical bean name.\n\t * Will ask the parent factory if the bean cannot be found in this factory instance.\n\t * @param name the name of the bean to query\n\t * @return whether this bean will always deliver independent instances\n\t * @throws NoSuchBeanDefinitionException if there is no bean with the given name\n\t * @since 2.0.3\n\t * @see #getBean\n\t * @see #isSingleton\n\t */\n\tboolean isPrototype(String name) throws NoSuchBeanDefinitionException;\n\n\t/**\n\t * Check whether the bean with the given name matches the specified type.\n\t * More specifically, check whether a {@link #getBean} call for the given name\n\t * would return an object that is assignable to the specified target type.\n\t * <p>Translates aliases back to the corresponding canonical bean name.\n\t * Will ask the parent factory if the bean cannot be found in this factory instance.\n\t * @param name the name of the bean to query\n\t * @param typeToMatch the type to match against (as a {@code ResolvableType})\n\t * @return {@code true} if the bean type matches,\n\t * {@code false} if it doesn't match or cannot be determined yet\n\t * @throws NoSuchBeanDefinitionException if there is no bean with the given name\n\t * @since 4.2\n\t * @see #getBean\n\t * @see #getType\n\t */\n\tboolean isTypeMatch(String name, ResolvableType typeToMatch) throws NoSuchBeanDefinitionException;\n\n\t/**\n\t * Check whether the bean with the given name matches the specified type.\n\t * More specifically, check whether a {@link #getBean} call for the given name\n\t * would return an object that is assignable to the specified target type.\n\t * <p>Translates aliases back to the corresponding canonical bean name.\n\t * Will ask the parent factory if the bean cannot be found in this factory instance.\n\t * @param name the name of the bean to query\n\t * @param typeToMatch the type to match against (as a {@code Class})\n\t * @return {@code true} if the bean type matches,\n\t * {@code false} if it doesn't match or cannot be determined yet\n\t * @throws NoSuchBeanDefinitionException if there is no bean with the given name\n\t * @since 2.0.1\n\t * @see #getBean\n\t * @see #getType\n\t */\n\tboolean isTypeMatch(String name, Class<?> typeToMatch) throws NoSuchBeanDefinitionException;\n\n\t/**\n\t * Determine the type of the bean with the given name. More specifically,\n\t * determine the type of object that {@link #getBean} would return for the given name.\n\t * <p>For a {@link FactoryBean}, return the type of object that the FactoryBean creates,\n\t * as exposed by {@link FactoryBean#getObjectType()}. This may lead to the initialization\n\t * of a previously uninitialized {@code FactoryBean} (see {@link #getType(String, boolean)}).\n\t * <p>Translates aliases back to the corresponding canonical bean name.\n\t * Will ask the parent factory if the bean cannot be found in this factory instance.\n\t * @param name the name of the bean to query\n\t * @return the type of the bean, or {@code null} if not determinable\n\t * @throws NoSuchBeanDefinitionException if there is no bean with the given name\n\t * @since 1.1.2\n\t * @see #getBean\n\t * @see #isTypeMatch\n\t */\n\t@Nullable\n\tClass<?> getType(String name) throws NoSuchBeanDefinitionException;\n\n\t/**\n\t * Determine the type of the bean with the given name. More specifically,\n\t * determine the type of object that {@link #getBean} would return for the given name.\n\t * <p>For a {@link FactoryBean}, return the type of object that the FactoryBean creates,\n\t * as exposed by {@link FactoryBean#getObjectType()}. Depending on the\n\t * {@code allowFactoryBeanInit} flag, this may lead to the initialization of a previously\n\t * uninitialized {@code FactoryBean} if no early type information is available.\n\t * <p>Translates aliases back to the corresponding canonical bean name.\n\t * Will ask the parent factory if the bean cannot be found in this factory instance.\n\t * @param name the name of the bean to query\n\t * @param allowFactoryBeanInit whether a {@code FactoryBean} may get initialized\n\t * just for the purpose of determining its object type\n\t * @return the type of the bean, or {@code null} if not determinable\n\t * @throws NoSuchBeanDefinitionException if there is no bean with the given name\n\t * @since 5.2\n\t * @see #getBean\n\t * @see #isTypeMatch\n\t */\n\t@Nullable\n\tClass<?> getType(String name, boolean allowFactoryBeanInit) throws NoSuchBeanDefinitionException;\n\n\t/**\n\t * Return the aliases for the given bean name, if any.\n\t * All of those aliases point to the same bean when used in a {@link #getBean} call.\n\t * <p>If the given name is an alias, the corresponding original bean name\n\t * and other aliases (if any) will be returned, with the original bean name\n\t * being the first element in the array.\n\t * <p>Will ask the parent factory if the bean cannot be found in this factory instance.\n\t * @param name the bean name to check for aliases\n\t * @return the aliases, or an empty array if none\n\t * @see #getBean\n\t */\n\tString[] getAliases(String name);\n\n}\n```\n\n### BeanFactory方法属性摘要\n```java\npublic interface BeanFactory {\n\n\t/**\n\t */\n\tString FACTORY_BEAN_PREFIX = \"&\";\n\n\n\t/**\n\t */\n\tObject getBean(String name) throws BeansException;\n\n\t/**\n\t */\n\t<T> T getBean(String name, Class<T> requiredType) throws BeansException;\n\n\t/**\n\t */\n\tObject getBean(String name, Object... args) throws BeansException;\n\n\t/**\n\t */\n\t<T> T getBean(Class<T> requiredType) throws BeansException;\n\n\t/**\n\t */\n\t<T> T getBean(Class<T> requiredType, Object... args) throws BeansException;\n\n\t/**\n\t */\n\t<T> ObjectProvider<T> getBeanProvider(Class<T> requiredType);\n\n\t/**\n\t */\n\t<T> ObjectProvider<T> getBeanProvider(ResolvableType requiredType);\n\n\t/**\n\t */\n\tboolean containsBean(String name);\n\n\t/**\n\t */\n\tboolean isSingleton(String name) throws NoSuchBeanDefinitionException;\n\n\t/**\n\t */\n\tboolean isPrototype(String name) throws NoSuchBeanDefinitionException;\n\n\t/**\n\t */\n\tboolean isTypeMatch(String name, ResolvableType typeToMatch) throws NoSuchBeanDefinitionException;\n\n\t/**\n\t */\n\tboolean isTypeMatch(String name, Class<?> typeToMatch) throws NoSuchBeanDefinitionException;\n\n\t/**\n\t */\n\t@Nullable\n\tClass<?> getType(String name) throws NoSuchBeanDefinitionException;\n\n\t/**\n\t */\n\t@Nullable\n\tClass<?> getType(String name, boolean allowFactoryBeanInit) throws NoSuchBeanDefinitionException;\n\n\t/**\n\t */\n\tString[] getAliases(String name);\n\n}\n```\n\n\n### 1.2 HierarchicalBeanFactory接口\n### 完整版源码：\n```java\n/*\n * Copyright 2002-2012 the original author or authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\npackage org.springframework.beans.factory;\n\nimport org.springframework.lang.Nullable;\n\n/**\n * Sub-interface implemented by bean factories that can be part\n * of a hierarchy.\n *\n * <p>The corresponding {@code setParentBeanFactory} method for bean\n * factories that allow setting the parent in a configurable\n * fashion can be found in the ConfigurableBeanFactory interface.\n *\n * @author Rod Johnson\n * @author Juergen Hoeller\n * @since 07.07.2003\n * @see org.springframework.beans.factory.config.ConfigurableBeanFactory#setParentBeanFactory\n */\npublic interface HierarchicalBeanFactory extends BeanFactory {\n\n\t/**\n\t * Return the parent bean factory, or {@code null} if there is none.\n\t */\n\t@Nullable\n\tBeanFactory getParentBeanFactory();\n\n\t/**\n\t * Return whether the local bean factory contains a bean of the given name,\n\t * ignoring beans defined in ancestor contexts.\n\t * <p>This is an alternative to {@code containsBean}, ignoring a bean\n\t * of the given name from an ancestor bean factory.\n\t * @param name the name of the bean to query\n\t * @return whether a bean with the given name is defined in the local factory\n\t * @see BeanFactory#containsBean\n\t */\n\tboolean containsLocalBean(String name);\n\n}\n\n```\n\n### HierarchicalBeanFactory方法属性摘要\n```java\npublic interface HierarchicalBeanFactory extends BeanFactory {\n\n\t/**\n\t */\n\t@Nullable\n\tBeanFactory getParentBeanFactory();\n\n\t/**\n\t */\n\tboolean containsLocalBean(String name);\n\n}\n```\n\n### 1.3 ListableBeanFactory接口\n### 完整版源码：\n```java\n/*\n * Copyright 2002-2019 the original author or authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\npackage org.springframework.beans.factory;\n\nimport java.lang.annotation.Annotation;\nimport java.util.Map;\n\nimport org.springframework.beans.BeansException;\nimport org.springframework.core.ResolvableType;\nimport org.springframework.lang.Nullable;\n\n/**\n * Extension of the {@link BeanFactory} interface to be implemented by bean factories\n * that can enumerate all their bean instances, rather than attempting bean lookup\n * by name one by one as requested by clients. BeanFactory implementations that\n * preload all their bean definitions (such as XML-based factories) may implement\n * this interface.\n *\n * <p>If this is a {@link HierarchicalBeanFactory}, the return values will <i>not</i>\n * take any BeanFactory hierarchy into account, but will relate only to the beans\n * defined in the current factory. Use the {@link BeanFactoryUtils} helper class\n * to consider beans in ancestor factories too.\n *\n * <p>The methods in this interface will just respect bean definitions of this factory.\n * They will ignore any singleton beans that have been registered by other means like\n * {@link org.springframework.beans.factory.config.ConfigurableBeanFactory}'s\n * {@code registerSingleton} method, with the exception of\n * {@code getBeanNamesOfType} and {@code getBeansOfType} which will check\n * such manually registered singletons too. Of course, BeanFactory's {@code getBean}\n * does allow transparent access to such special beans as well. However, in typical\n * scenarios, all beans will be defined by external bean definitions anyway, so most\n * applications don't need to worry about this differentiation.\n *\n * <p><b>NOTE:</b> With the exception of {@code getBeanDefinitionCount}\n * and {@code containsBeanDefinition}, the methods in this interface\n * are not designed for frequent invocation. Implementations may be slow.\n *\n * @author Rod Johnson\n * @author Juergen Hoeller\n * @since 16 April 2001\n * @see HierarchicalBeanFactory\n * @see BeanFactoryUtils\n */\npublic interface ListableBeanFactory extends BeanFactory {\n\n\t/**\n\t * Check if this bean factory contains a bean definition with the given name.\n\t * <p>Does not consider any hierarchy this factory may participate in,\n\t * and ignores any singleton beans that have been registered by\n\t * other means than bean definitions.\n\t * @param beanName the name of the bean to look for\n\t * @return if this bean factory contains a bean definition with the given name\n\t * @see #containsBean\n\t */\n\tboolean containsBeanDefinition(String beanName);\n\n\t/**\n\t * Return the number of beans defined in the factory.\n\t * <p>Does not consider any hierarchy this factory may participate in,\n\t * and ignores any singleton beans that have been registered by\n\t * other means than bean definitions.\n\t * @return the number of beans defined in the factory\n\t */\n\tint getBeanDefinitionCount();\n\n\t/**\n\t * Return the names of all beans defined in this factory.\n\t * <p>Does not consider any hierarchy this factory may participate in,\n\t * and ignores any singleton beans that have been registered by\n\t * other means than bean definitions.\n\t * @return the names of all beans defined in this factory,\n\t * or an empty array if none defined\n\t */\n\tString[] getBeanDefinitionNames();\n\n\t/**\n\t * Return the names of beans matching the given type (including subclasses),\n\t * judging from either bean definitions or the value of {@code getObjectType}\n\t * in the case of FactoryBeans.\n\t * <p><b>NOTE: This method introspects top-level beans only.</b> It does <i>not</i>\n\t * check nested beans which might match the specified type as well.\n\t * <p>Does consider objects created by FactoryBeans, which means that FactoryBeans\n\t * will get initialized. If the object created by the FactoryBean doesn't match,\n\t * the raw FactoryBean itself will be matched against the type.\n\t * <p>Does not consider any hierarchy this factory may participate in.\n\t * Use BeanFactoryUtils' {@code beanNamesForTypeIncludingAncestors}\n\t * to include beans in ancestor factories too.\n\t * <p>Note: Does <i>not</i> ignore singleton beans that have been registered\n\t * by other means than bean definitions.\n\t * <p>This version of {@code getBeanNamesForType} matches all kinds of beans,\n\t * be it singletons, prototypes, or FactoryBeans. In most implementations, the\n\t * result will be the same as for {@code getBeanNamesForType(type, true, true)}.\n\t * <p>Bean names returned by this method should always return bean names <i>in the\n\t * order of definition</i> in the backend configuration, as far as possible.\n\t * @param type the generically typed class or interface to match\n\t * @return the names of beans (or objects created by FactoryBeans) matching\n\t * the given object type (including subclasses), or an empty array if none\n\t * @since 4.2\n\t * @see #isTypeMatch(String, ResolvableType)\n\t * @see FactoryBean#getObjectType\n\t * @see BeanFactoryUtils#beanNamesForTypeIncludingAncestors(ListableBeanFactory, ResolvableType)\n\t */\n\tString[] getBeanNamesForType(ResolvableType type);\n\n\t/**\n\t * Return the names of beans matching the given type (including subclasses),\n\t * judging from either bean definitions or the value of {@code getObjectType}\n\t * in the case of FactoryBeans.\n\t * <p><b>NOTE: This method introspects top-level beans only.</b> It does <i>not</i>\n\t * check nested beans which might match the specified type as well.\n\t * <p>Does consider objects created by FactoryBeans if the \"allowEagerInit\" flag is set,\n\t * which means that FactoryBeans will get initialized. If the object created by the\n\t * FactoryBean doesn't match, the raw FactoryBean itself will be matched against the\n\t * type. If \"allowEagerInit\" is not set, only raw FactoryBeans will be checked\n\t * (which doesn't require initialization of each FactoryBean).\n\t * <p>Does not consider any hierarchy this factory may participate in.\n\t * Use BeanFactoryUtils' {@code beanNamesForTypeIncludingAncestors}\n\t * to include beans in ancestor factories too.\n\t * <p>Note: Does <i>not</i> ignore singleton beans that have been registered\n\t * by other means than bean definitions.\n\t * <p>Bean names returned by this method should always return bean names <i>in the\n\t * order of definition</i> in the backend configuration, as far as possible.\n\t * @param type the generically typed class or interface to match\n\t * @param includeNonSingletons whether to include prototype or scoped beans too\n\t * or just singletons (also applies to FactoryBeans)\n\t * @param allowEagerInit whether to initialize <i>lazy-init singletons</i> and\n\t * <i>objects created by FactoryBeans</i> (or by factory methods with a\n\t * \"factory-bean\" reference) for the type check. Note that FactoryBeans need to be\n\t * eagerly initialized to determine their type: So be aware that passing in \"true\"\n\t * for this flag will initialize FactoryBeans and \"factory-bean\" references.\n\t * @return the names of beans (or objects created by FactoryBeans) matching\n\t * the given object type (including subclasses), or an empty array if none\n\t * @since 5.2\n\t * @see FactoryBean#getObjectType\n\t * @see BeanFactoryUtils#beanNamesForTypeIncludingAncestors(ListableBeanFactory, ResolvableType, boolean, boolean)\n\t */\n\tString[] getBeanNamesForType(ResolvableType type, boolean includeNonSingletons, boolean allowEagerInit);\n\n\t/**\n\t * Return the names of beans matching the given type (including subclasses),\n\t * judging from either bean definitions or the value of {@code getObjectType}\n\t * in the case of FactoryBeans.\n\t * <p><b>NOTE: This method introspects top-level beans only.</b> It does <i>not</i>\n\t * check nested beans which might match the specified type as well.\n\t * <p>Does consider objects created by FactoryBeans, which means that FactoryBeans\n\t * will get initialized. If the object created by the FactoryBean doesn't match,\n\t * the raw FactoryBean itself will be matched against the type.\n\t * <p>Does not consider any hierarchy this factory may participate in.\n\t * Use BeanFactoryUtils' {@code beanNamesForTypeIncludingAncestors}\n\t * to include beans in ancestor factories too.\n\t * <p>Note: Does <i>not</i> ignore singleton beans that have been registered\n\t * by other means than bean definitions.\n\t * <p>This version of {@code getBeanNamesForType} matches all kinds of beans,\n\t * be it singletons, prototypes, or FactoryBeans. In most implementations, the\n\t * result will be the same as for {@code getBeanNamesForType(type, true, true)}.\n\t * <p>Bean names returned by this method should always return bean names <i>in the\n\t * order of definition</i> in the backend configuration, as far as possible.\n\t * @param type the class or interface to match, or {@code null} for all bean names\n\t * @return the names of beans (or objects created by FactoryBeans) matching\n\t * the given object type (including subclasses), or an empty array if none\n\t * @see FactoryBean#getObjectType\n\t * @see BeanFactoryUtils#beanNamesForTypeIncludingAncestors(ListableBeanFactory, Class)\n\t */\n\tString[] getBeanNamesForType(@Nullable Class<?> type);\n\n\t/**\n\t * Return the names of beans matching the given type (including subclasses),\n\t * judging from either bean definitions or the value of {@code getObjectType}\n\t * in the case of FactoryBeans.\n\t * <p><b>NOTE: This method introspects top-level beans only.</b> It does <i>not</i>\n\t * check nested beans which might match the specified type as well.\n\t * <p>Does consider objects created by FactoryBeans if the \"allowEagerInit\" flag is set,\n\t * which means that FactoryBeans will get initialized. If the object created by the\n\t * FactoryBean doesn't match, the raw FactoryBean itself will be matched against the\n\t * type. If \"allowEagerInit\" is not set, only raw FactoryBeans will be checked\n\t * (which doesn't require initialization of each FactoryBean).\n\t * <p>Does not consider any hierarchy this factory may participate in.\n\t * Use BeanFactoryUtils' {@code beanNamesForTypeIncludingAncestors}\n\t * to include beans in ancestor factories too.\n\t * <p>Note: Does <i>not</i> ignore singleton beans that have been registered\n\t * by other means than bean definitions.\n\t * <p>Bean names returned by this method should always return bean names <i>in the\n\t * order of definition</i> in the backend configuration, as far as possible.\n\t * @param type the class or interface to match, or {@code null} for all bean names\n\t * @param includeNonSingletons whether to include prototype or scoped beans too\n\t * or just singletons (also applies to FactoryBeans)\n\t * @param allowEagerInit whether to initialize <i>lazy-init singletons</i> and\n\t * <i>objects created by FactoryBeans</i> (or by factory methods with a\n\t * \"factory-bean\" reference) for the type check. Note that FactoryBeans need to be\n\t * eagerly initialized to determine their type: So be aware that passing in \"true\"\n\t * for this flag will initialize FactoryBeans and \"factory-bean\" references.\n\t * @return the names of beans (or objects created by FactoryBeans) matching\n\t * the given object type (including subclasses), or an empty array if none\n\t * @see FactoryBean#getObjectType\n\t * @see BeanFactoryUtils#beanNamesForTypeIncludingAncestors(ListableBeanFactory, Class, boolean, boolean)\n\t */\n\tString[] getBeanNamesForType(@Nullable Class<?> type, boolean includeNonSingletons, boolean allowEagerInit);\n\n\t/**\n\t * Return the bean instances that match the given object type (including\n\t * subclasses), judging from either bean definitions or the value of\n\t * {@code getObjectType} in the case of FactoryBeans.\n\t * <p><b>NOTE: This method introspects top-level beans only.</b> It does <i>not</i>\n\t * check nested beans which might match the specified type as well.\n\t * <p>Does consider objects created by FactoryBeans, which means that FactoryBeans\n\t * will get initialized. If the object created by the FactoryBean doesn't match,\n\t * the raw FactoryBean itself will be matched against the type.\n\t * <p>Does not consider any hierarchy this factory may participate in.\n\t * Use BeanFactoryUtils' {@code beansOfTypeIncludingAncestors}\n\t * to include beans in ancestor factories too.\n\t * <p>Note: Does <i>not</i> ignore singleton beans that have been registered\n\t * by other means than bean definitions.\n\t * <p>This version of getBeansOfType matches all kinds of beans, be it\n\t * singletons, prototypes, or FactoryBeans. In most implementations, the\n\t * result will be the same as for {@code getBeansOfType(type, true, true)}.\n\t * <p>The Map returned by this method should always return bean names and\n\t * corresponding bean instances <i>in the order of definition</i> in the\n\t * backend configuration, as far as possible.\n\t * @param type the class or interface to match, or {@code null} for all concrete beans\n\t * @return a Map with the matching beans, containing the bean names as\n\t * keys and the corresponding bean instances as values\n\t * @throws BeansException if a bean could not be created\n\t * @since 1.1.2\n\t * @see FactoryBean#getObjectType\n\t * @see BeanFactoryUtils#beansOfTypeIncludingAncestors(ListableBeanFactory, Class)\n\t */\n\t<T> Map<String, T> getBeansOfType(@Nullable Class<T> type) throws BeansException;\n\n\t/**\n\t * Return the bean instances that match the given object type (including\n\t * subclasses), judging from either bean definitions or the value of\n\t * {@code getObjectType} in the case of FactoryBeans.\n\t * <p><b>NOTE: This method introspects top-level beans only.</b> It does <i>not</i>\n\t * check nested beans which might match the specified type as well.\n\t * <p>Does consider objects created by FactoryBeans if the \"allowEagerInit\" flag is set,\n\t * which means that FactoryBeans will get initialized. If the object created by the\n\t * FactoryBean doesn't match, the raw FactoryBean itself will be matched against the\n\t * type. If \"allowEagerInit\" is not set, only raw FactoryBeans will be checked\n\t * (which doesn't require initialization of each FactoryBean).\n\t * <p>Does not consider any hierarchy this factory may participate in.\n\t * Use BeanFactoryUtils' {@code beansOfTypeIncludingAncestors}\n\t * to include beans in ancestor factories too.\n\t * <p>Note: Does <i>not</i> ignore singleton beans that have been registered\n\t * by other means than bean definitions.\n\t * <p>The Map returned by this method should always return bean names and\n\t * corresponding bean instances <i>in the order of definition</i> in the\n\t * backend configuration, as far as possible.\n\t * @param type the class or interface to match, or {@code null} for all concrete beans\n\t * @param includeNonSingletons whether to include prototype or scoped beans too\n\t * or just singletons (also applies to FactoryBeans)\n\t * @param allowEagerInit whether to initialize <i>lazy-init singletons</i> and\n\t * <i>objects created by FactoryBeans</i> (or by factory methods with a\n\t * \"factory-bean\" reference) for the type check. Note that FactoryBeans need to be\n\t * eagerly initialized to determine their type: So be aware that passing in \"true\"\n\t * for this flag will initialize FactoryBeans and \"factory-bean\" references.\n\t * @return a Map with the matching beans, containing the bean names as\n\t * keys and the corresponding bean instances as values\n\t * @throws BeansException if a bean could not be created\n\t * @see FactoryBean#getObjectType\n\t * @see BeanFactoryUtils#beansOfTypeIncludingAncestors(ListableBeanFactory, Class, boolean, boolean)\n\t */\n\t<T> Map<String, T> getBeansOfType(@Nullable Class<T> type, boolean includeNonSingletons, boolean allowEagerInit)\n\t\t\tthrows BeansException;\n\n\t/**\n\t * Find all names of beans which are annotated with the supplied {@link Annotation}\n\t * type, without creating corresponding bean instances yet.\n\t * <p>Note that this method considers objects created by FactoryBeans, which means\n\t * that FactoryBeans will get initialized in order to determine their object type.\n\t * @param annotationType the type of annotation to look for\n\t * (at class, interface or factory method level of the specified bean)\n\t * @return the names of all matching beans\n\t * @since 4.0\n\t * @see #findAnnotationOnBean\n\t */\n\tString[] getBeanNamesForAnnotation(Class<? extends Annotation> annotationType);\n\n\t/**\n\t * Find all beans which are annotated with the supplied {@link Annotation} type,\n\t * returning a Map of bean names with corresponding bean instances.\n\t * <p>Note that this method considers objects created by FactoryBeans, which means\n\t * that FactoryBeans will get initialized in order to determine their object type.\n\t * @param annotationType the type of annotation to look for\n\t * (at class, interface or factory method level of the specified bean)\n\t * @return a Map with the matching beans, containing the bean names as\n\t * keys and the corresponding bean instances as values\n\t * @throws BeansException if a bean could not be created\n\t * @since 3.0\n\t * @see #findAnnotationOnBean\n\t */\n\tMap<String, Object> getBeansWithAnnotation(Class<? extends Annotation> annotationType) throws BeansException;\n\n\t/**\n\t * Find an {@link Annotation} of {@code annotationType} on the specified bean,\n\t * traversing its interfaces and super classes if no annotation can be found on\n\t * the given class itself, as well as checking the bean's factory method (if any).\n\t * @param beanName the name of the bean to look for annotations on\n\t * @param annotationType the type of annotation to look for\n\t * (at class, interface or factory method level of the specified bean)\n\t * @return the annotation of the given type if found, or {@code null} otherwise\n\t * @throws NoSuchBeanDefinitionException if there is no bean with the given name\n\t * @since 3.0\n\t * @see #getBeanNamesForAnnotation\n\t * @see #getBeansWithAnnotation\n\t */\n\t@Nullable\n\t<A extends Annotation> A findAnnotationOnBean(String beanName, Class<A> annotationType)\n\t\t\tthrows NoSuchBeanDefinitionException;\n\n}\n```\n\n### ListableBeanFactory方法属性摘要\n```java\npublic interface ListableBeanFactory extends BeanFactory {\n\n\t/**\n\t */\n\tboolean containsBeanDefinition(String beanName);\n\n\t/**\n\t */\n\tint getBeanDefinitionCount();\n\n\t/**\n\t */\n\tString[] getBeanDefinitionNames();\n\n\t/**\n\t */\n\tString[] getBeanNamesForType(ResolvableType type);\n\n\t/**\n\t */\n\tString[] getBeanNamesForType(ResolvableType type, boolean includeNonSingletons, boolean allowEagerInit);\n\n\t/**\n\t */\n\tString[] getBeanNamesForType(@Nullable Class<?> type);\n\n\t/**\n\t */\n\tString[] getBeanNamesForType(@Nullable Class<?> type, boolean includeNonSingletons, boolean allowEagerInit);\n\n\n\t<T> Map<String, T> getBeansOfType(@Nullable Class<T> type) throws BeansException;\n\n\n\t<T> Map<String, T> getBeansOfType(@Nullable Class<T> type, boolean includeNonSingletons, boolean allowEagerInit)\n\t\t\tthrows BeansException;\n\n\n\tString[] getBeanNamesForAnnotation(Class<? extends Annotation> annotationType);\n\n\n\tMap<String, Object> getBeansWithAnnotation(Class<? extends Annotation> annotationType) throws BeansException;\n\n\n\t@Nullable\n\t<A extends Annotation> A findAnnotationOnBean(String beanName, Class<A> annotationType)\n\t\t\tthrows NoSuchBeanDefinitionException;\n\n}\n```\n\n## 1.4 ApplicationContext接口\n### ApplicationContext接口解析\n- 相比于BeanFactory,ApplicationContext是高配版的Ioc容器，其在BeanFactory的基础上实现了更加复杂的扩展功能\n- ListableBeanFactory, HierarchicalBeanFactory都是BeanFactory的子接口，ApplicationContext继承了这两个接口，ApplicationContext进一步扩展了BeanFactory接口的功能\n- . . .\n\n### 完整版源码：\n```java\n/*\n * Copyright 2002-2014 the original author or authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\npackage org.springframework.context;\n\nimport org.springframework.beans.factory.HierarchicalBeanFactory;\nimport org.springframework.beans.factory.ListableBeanFactory;\nimport org.springframework.beans.factory.config.AutowireCapableBeanFactory;\nimport org.springframework.core.env.EnvironmentCapable;\nimport org.springframework.core.io.support.ResourcePatternResolver;\nimport org.springframework.lang.Nullable;\n\n/**\n * Central interface to provide configuration for an application.\n * This is read-only while the application is running, but may be\n * reloaded if the implementation supports this.\n *\n * <p>An ApplicationContext provides:\n * <ul>\n * <li>Bean factory methods for accessing application components.\n * Inherited from {@link org.springframework.beans.factory.ListableBeanFactory}.\n * <li>The ability to load file resources in a generic fashion.\n * Inherited from the {@link org.springframework.core.io.ResourceLoader} interface.\n * <li>The ability to publish events to registered listeners.\n * Inherited from the {@link ApplicationEventPublisher} interface.\n * <li>The ability to resolve messages, supporting internationalization.\n * Inherited from the {@link MessageSource} interface.\n * <li>Inheritance from a parent context. Definitions in a descendant context\n * will always take priority. This means, for example, that a single parent\n * context can be used by an entire web application, while each servlet has\n * its own child context that is independent of that of any other servlet.\n * </ul>\n *\n * <p>In addition to standard {@link org.springframework.beans.factory.BeanFactory}\n * lifecycle capabilities, ApplicationContext implementations detect and invoke\n * {@link ApplicationContextAware} beans as well as {@link ResourceLoaderAware},\n * {@link ApplicationEventPublisherAware} and {@link MessageSourceAware} beans.\n *\n * @author Rod Johnson\n * @author Juergen Hoeller\n * @see ConfigurableApplicationContext\n * @see org.springframework.beans.factory.BeanFactory\n * @see org.springframework.core.io.ResourceLoader\n */\npublic interface ApplicationContext extends EnvironmentCapable, ListableBeanFactory, HierarchicalBeanFactory,\n\t\tMessageSource, ApplicationEventPublisher, ResourcePatternResolver {\n\n\t/**\n\t * Return the unique id of this application context.\n\t * @return the unique id of the context, or {@code null} if none\n\t */\n\t@Nullable\n\tString getId();\n\n\t/**\n\t * Return a name for the deployed application that this context belongs to.\n\t * @return a name for the deployed application, or the empty String by default\n\t */\n\tString getApplicationName();\n\n\t/**\n\t * Return a friendly name for this context.\n\t * @return a display name for this context (never {@code null})\n\t */\n\tString getDisplayName();\n\n\t/**\n\t * Return the timestamp when this context was first loaded.\n\t * @return the timestamp (ms) when this context was first loaded\n\t */\n\tlong getStartupDate();\n\n\t/**\n\t * Return the parent context, or {@code null} if there is no parent\n\t * and this is the root of the context hierarchy.\n\t * @return the parent context, or {@code null} if there is no parent\n\t */\n\t@Nullable\n\tApplicationContext getParent();\n\n\t/**\n\t * Expose AutowireCapableBeanFactory functionality for this context.\n\t * <p>This is not typically used by application code, except for the purpose of\n\t * initializing bean instances that live outside of the application context,\n\t * applying the Spring bean lifecycle (fully or partly) to them.\n\t * <p>Alternatively, the internal BeanFactory exposed by the\n\t * {@link ConfigurableApplicationContext} interface offers access to the\n\t * {@link AutowireCapableBeanFactory} interface too. The present method mainly\n\t * serves as a convenient, specific facility on the ApplicationContext interface.\n\t * <p><b>NOTE: As of 4.2, this method will consistently throw IllegalStateException\n\t * after the application context has been closed.</b> In current Spring Framework\n\t * versions, only refreshable application contexts behave that way; as of 4.2,\n\t * all application context implementations will be required to comply.\n\t * @return the AutowireCapableBeanFactory for this context\n\t * @throws IllegalStateException if the context does not support the\n\t * {@link AutowireCapableBeanFactory} interface, or does not hold an\n\t * autowire-capable bean factory yet (e.g. if {@code refresh()} has\n\t * never been called), or if the context has been closed already\n\t * @see ConfigurableApplicationContext#refresh()\n\t * @see ConfigurableApplicationContext#getBeanFactory()\n\t */\n\tAutowireCapableBeanFactory getAutowireCapableBeanFactory() throws IllegalStateException;\n\n}\n```\n### ApplicationContext方法属性摘要\n```java\npublic interface ApplicationContext extends EnvironmentCapable, ListableBeanFactory, HierarchicalBeanFactory,\n\t\tMessageSource, ApplicationEventPublisher, ResourcePatternResolver {\n\n\t@Nullable\n\tString getId();\n\n\n\tString getApplicationName();\n\n\n\tString getDisplayName();\n\n\n\tlong getStartupDate();\n\n\n\t@Nullable\n\tApplicationContext getParent();\n\n\tAutowireCapableBeanFactory getAutowireCapableBeanFactory() throws IllegalStateException;\n\n}\n```\n\n## 1.5 BeanDefination接口 \n### BeanDefination接口定义解析\n- BeanDefination用于管理Ioc容器中JavaBean与JavaBean之间的依赖关系，其抽象了Java开发人员对于JavaBean的定义\n- Spring将开发人员定义的JavaBean的数据结构转化为内存中的BeanDefination数据结构进行维护\n\n### 完整版源码：\n```java\n/*\n * Copyright 2002-2019 the original author or authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\npackage org.springframework.beans.factory.config;\n\nimport org.springframework.beans.BeanMetadataElement;\nimport org.springframework.beans.MutablePropertyValues;\nimport org.springframework.core.AttributeAccessor;\nimport org.springframework.core.ResolvableType;\nimport org.springframework.lang.Nullable;\n\n/**\n * A BeanDefinition describes a bean instance, which has property values,\n * constructor argument values, and further information supplied by\n * concrete implementations.\n *\n * <p>This is just a minimal interface: The main intention is to allow a\n * {@link BeanFactoryPostProcessor} to introspect and modify property values\n * and other bean metadata.\n *\n * @author Juergen Hoeller\n * @author Rob Harrop\n * @since 19.03.2004\n * @see ConfigurableListableBeanFactory#getBeanDefinition\n * @see org.springframework.beans.factory.support.RootBeanDefinition\n * @see org.springframework.beans.factory.support.ChildBeanDefinition\n */\npublic interface BeanDefinition extends AttributeAccessor, BeanMetadataElement {\n\n\t/**\n\t * Scope identifier for the standard singleton scope: \"singleton\".\n\t * <p>Note that extended bean factories might support further scopes.\n\t * @see #setScope\n\t */\n\tString SCOPE_SINGLETON = ConfigurableBeanFactory.SCOPE_SINGLETON;\n\n\t/**\n\t * Scope identifier for the standard prototype scope: \"prototype\".\n\t * <p>Note that extended bean factories might support further scopes.\n\t * @see #setScope\n\t */\n\tString SCOPE_PROTOTYPE = ConfigurableBeanFactory.SCOPE_PROTOTYPE;\n\n\n\t/**\n\t * Role hint indicating that a {@code BeanDefinition} is a major part\n\t * of the application. Typically corresponds to a user-defined bean.\n\t */\n\tint ROLE_APPLICATION = 0;\n\n\t/**\n\t * Role hint indicating that a {@code BeanDefinition} is a supporting\n\t * part of some larger configuration, typically an outer\n\t * {@link org.springframework.beans.factory.parsing.ComponentDefinition}.\n\t * {@code SUPPORT} beans are considered important enough to be aware\n\t * of when looking more closely at a particular\n\t * {@link org.springframework.beans.factory.parsing.ComponentDefinition},\n\t * but not when looking at the overall configuration of an application.\n\t */\n\tint ROLE_SUPPORT = 1;\n\n\t/**\n\t * Role hint indicating that a {@code BeanDefinition} is providing an\n\t * entirely background role and has no relevance to the end-user. This hint is\n\t * used when registering beans that are completely part of the internal workings\n\t * of a {@link org.springframework.beans.factory.parsing.ComponentDefinition}.\n\t */\n\tint ROLE_INFRASTRUCTURE = 2;\n\n\n\t// Modifiable attributes\n\n\t/**\n\t * Set the name of the parent definition of this bean definition, if any.\n\t */\n\tvoid setParentName(@Nullable String parentName);\n\n\t/**\n\t * Return the name of the parent definition of this bean definition, if any.\n\t */\n\t@Nullable\n\tString getParentName();\n\n\t/**\n\t * Specify the bean class name of this bean definition.\n\t * <p>The class name can be modified during bean factory post-processing,\n\t * typically replacing the original class name with a parsed variant of it.\n\t * @see #setParentName\n\t * @see #setFactoryBeanName\n\t * @see #setFactoryMethodName\n\t */\n\tvoid setBeanClassName(@Nullable String beanClassName);\n\n\t/**\n\t * Return the current bean class name of this bean definition.\n\t * <p>Note that this does not have to be the actual class name used at runtime, in\n\t * case of a child definition overriding/inheriting the class name from its parent.\n\t * Also, this may just be the class that a factory method is called on, or it may\n\t * even be empty in case of a factory bean reference that a method is called on.\n\t * Hence, do <i>not</i> consider this to be the definitive bean type at runtime but\n\t * rather only use it for parsing purposes at the individual bean definition level.\n\t * @see #getParentName()\n\t * @see #getFactoryBeanName()\n\t * @see #getFactoryMethodName()\n\t */\n\t@Nullable\n\tString getBeanClassName();\n\n\t/**\n\t * Override the target scope of this bean, specifying a new scope name.\n\t * @see #SCOPE_SINGLETON\n\t * @see #SCOPE_PROTOTYPE\n\t */\n\tvoid setScope(@Nullable String scope);\n\n\t/**\n\t * Return the name of the current target scope for this bean,\n\t * or {@code null} if not known yet.\n\t */\n\t@Nullable\n\tString getScope();\n\n\t/**\n\t * Set whether this bean should be lazily initialized.\n\t * <p>If {@code false}, the bean will get instantiated on startup by bean\n\t * factories that perform eager initialization of singletons.\n\t */\n\tvoid setLazyInit(boolean lazyInit);\n\n\t/**\n\t * Return whether this bean should be lazily initialized, i.e. not\n\t * eagerly instantiated on startup. Only applicable to a singleton bean.\n\t */\n\tboolean isLazyInit();\n\n\t/**\n\t * Set the names of the beans that this bean depends on being initialized.\n\t * The bean factory will guarantee that these beans get initialized first.\n\t */\n\tvoid setDependsOn(@Nullable String... dependsOn);\n\n\t/**\n\t * Return the bean names that this bean depends on.\n\t */\n\t@Nullable\n\tString[] getDependsOn();\n\n\t/**\n\t * Set whether this bean is a candidate for getting autowired into some other bean.\n\t * <p>Note that this flag is designed to only affect type-based autowiring.\n\t * It does not affect explicit references by name, which will get resolved even\n\t * if the specified bean is not marked as an autowire candidate. As a consequence,\n\t * autowiring by name will nevertheless inject a bean if the name matches.\n\t */\n\tvoid setAutowireCandidate(boolean autowireCandidate);\n\n\t/**\n\t * Return whether this bean is a candidate for getting autowired into some other bean.\n\t */\n\tboolean isAutowireCandidate();\n\n\t/**\n\t * Set whether this bean is a primary autowire candidate.\n\t * <p>If this value is {@code true} for exactly one bean among multiple\n\t * matching candidates, it will serve as a tie-breaker.\n\t */\n\tvoid setPrimary(boolean primary);\n\n\t/**\n\t * Return whether this bean is a primary autowire candidate.\n\t */\n\tboolean isPrimary();\n\n\t/**\n\t * Specify the factory bean to use, if any.\n\t * This the name of the bean to call the specified factory method on.\n\t * @see #setFactoryMethodName\n\t */\n\tvoid setFactoryBeanName(@Nullable String factoryBeanName);\n\n\t/**\n\t * Return the factory bean name, if any.\n\t */\n\t@Nullable\n\tString getFactoryBeanName();\n\n\t/**\n\t * Specify a factory method, if any. This method will be invoked with\n\t * constructor arguments, or with no arguments if none are specified.\n\t * The method will be invoked on the specified factory bean, if any,\n\t * or otherwise as a static method on the local bean class.\n\t * @see #setFactoryBeanName\n\t * @see #setBeanClassName\n\t */\n\tvoid setFactoryMethodName(@Nullable String factoryMethodName);\n\n\t/**\n\t * Return a factory method, if any.\n\t */\n\t@Nullable\n\tString getFactoryMethodName();\n\n\t/**\n\t * Return the constructor argument values for this bean.\n\t * <p>The returned instance can be modified during bean factory post-processing.\n\t * @return the ConstructorArgumentValues object (never {@code null})\n\t */\n\tConstructorArgumentValues getConstructorArgumentValues();\n\n\t/**\n\t * Return if there are constructor argument values defined for this bean.\n\t * @since 5.0.2\n\t */\n\tdefault boolean hasConstructorArgumentValues() {\n\t\treturn !getConstructorArgumentValues().isEmpty();\n\t}\n\n\t/**\n\t * Return the property values to be applied to a new instance of the bean.\n\t * <p>The returned instance can be modified during bean factory post-processing.\n\t * @return the MutablePropertyValues object (never {@code null})\n\t */\n\tMutablePropertyValues getPropertyValues();\n\n\t/**\n\t * Return if there are property values values defined for this bean.\n\t * @since 5.0.2\n\t */\n\tdefault boolean hasPropertyValues() {\n\t\treturn !getPropertyValues().isEmpty();\n\t}\n\n\t/**\n\t * Set the name of the initializer method.\n\t * @since 5.1\n\t */\n\tvoid setInitMethodName(@Nullable String initMethodName);\n\n\t/**\n\t * Return the name of the initializer method.\n\t * @since 5.1\n\t */\n\t@Nullable\n\tString getInitMethodName();\n\n\t/**\n\t * Set the name of the destroy method.\n\t * @since 5.1\n\t */\n\tvoid setDestroyMethodName(@Nullable String destroyMethodName);\n\n\t/**\n\t * Return the name of the destroy method.\n\t * @since 5.1\n\t */\n\t@Nullable\n\tString getDestroyMethodName();\n\n\t/**\n\t * Set the role hint for this {@code BeanDefinition}. The role hint\n\t * provides the frameworks as well as tools with an indication of\n\t * the role and importance of a particular {@code BeanDefinition}.\n\t * @since 5.1\n\t * @see #ROLE_APPLICATION\n\t * @see #ROLE_SUPPORT\n\t * @see #ROLE_INFRASTRUCTURE\n\t */\n\tvoid setRole(int role);\n\n\t/**\n\t * Get the role hint for this {@code BeanDefinition}. The role hint\n\t * provides the frameworks as well as tools with an indication of\n\t * the role and importance of a particular {@code BeanDefinition}.\n\t * @see #ROLE_APPLICATION\n\t * @see #ROLE_SUPPORT\n\t * @see #ROLE_INFRASTRUCTURE\n\t */\n\tint getRole();\n\n\t/**\n\t * Set a human-readable description of this bean definition.\n\t * @since 5.1\n\t */\n\tvoid setDescription(@Nullable String description);\n\n\t/**\n\t * Return a human-readable description of this bean definition.\n\t */\n\t@Nullable\n\tString getDescription();\n\n\n\t// Read-only attributes\n\n\t/**\n\t * Return a resolvable type for this bean definition,\n\t * based on the bean class or other specific metadata.\n\t * <p>This is typically fully resolved on a runtime-merged bean definition\n\t * but not necessarily on a configuration-time definition instance.\n\t * @return the resolvable type (potentially {@link ResolvableType#NONE})\n\t * @since 5.2\n\t * @see ConfigurableBeanFactory#getMergedBeanDefinition\n\t */\n\tResolvableType getResolvableType();\n\n\t/**\n\t * Return whether this a <b>Singleton</b>, with a single, shared instance\n\t * returned on all calls.\n\t * @see #SCOPE_SINGLETON\n\t */\n\tboolean isSingleton();\n\n\t/**\n\t * Return whether this a <b>Prototype</b>, with an independent instance\n\t * returned for each call.\n\t * @since 3.0\n\t * @see #SCOPE_PROTOTYPE\n\t */\n\tboolean isPrototype();\n\n\t/**\n\t * Return whether this bean is \"abstract\", that is, not meant to be instantiated.\n\t */\n\tboolean isAbstract();\n\n\t/**\n\t * Return a description of the resource that this bean definition\n\t * came from (for the purpose of showing context in case of errors).\n\t */\n\t@Nullable\n\tString getResourceDescription();\n\n\t/**\n\t * Return the originating BeanDefinition, or {@code null} if none.\n\t * Allows for retrieving the decorated bean definition, if any.\n\t * <p>Note that this method returns the immediate originator. Iterate through the\n\t * originator chain to find the original BeanDefinition as defined by the user.\n\t */\n\t@Nullable\n\tBeanDefinition getOriginatingBeanDefinition();\n\n}\n```\n### BeanDefination方法属性摘要\n```java\npublic interface BeanDefinition extends AttributeAccessor, BeanMetadataElement {\n\n\tString SCOPE_SINGLETON = ConfigurableBeanFactory.SCOPE_SINGLETON;\n\n\tString SCOPE_PROTOTYPE = ConfigurableBeanFactory.SCOPE_PROTOTYPE;\n\n\tint ROLE_APPLICATION = 0;\n\n\n\tint ROLE_SUPPORT = 1;\n\n    // infrastructure\n\tint ROLE_INFRASTRUCTURE = 2;\n\n\n\t// Modifiable attributes\n\n\tvoid setParentName(@Nullable String parentName);\n\n\n\t@Nullable\n\tString getParentName();\n\n\n\tvoid setBeanClassName(@Nullable String beanClassName);\n\n\n\t@Nullable\n\tString getBeanClassName();\n\n\n\tvoid setScope(@Nullable String scope);\n\n\n\t@Nullable\n\tString getScope();\n\n\n\tvoid setLazyInit(boolean lazyInit);\n\n\n\tboolean isLazyInit();\n\n\n\tvoid setDependsOn(@Nullable String... dependsOn);\n\n\n\t@Nullable\n\tString[] getDependsOn();\n\n\n\tvoid setAutowireCandidate(boolean autowireCandidate);\n\n\n\tboolean isAutowireCandidate();\n\n\n\tvoid setPrimary(boolean primary);\n\n\n\tboolean isPrimary();\n\n\n\tvoid setFactoryBeanName(@Nullable String factoryBeanName);\n\n\n\t@Nullable\n\tString getFactoryBeanName();\n\n\n\tvoid setFactoryMethodName(@Nullable String factoryMethodName);\n\n\n\t@Nullable\n\tString getFactoryMethodName();\n\n\n\tConstructorArgumentValues getConstructorArgumentValues();\n\n\n\tdefault boolean hasConstructorArgumentValues() {\n\t\treturn !getConstructorArgumentValues().isEmpty();\n\t}\n\n\n\tMutablePropertyValues getPropertyValues();\n\n\n\tdefault boolean hasPropertyValues() {\n\t\treturn !getPropertyValues().isEmpty();\n\t}\n\n\n\tvoid setInitMethodName(@Nullable String initMethodName);\n\n\t@Nullable\n\tString getInitMethodName();\n\n\n\tvoid setDestroyMethodName(@Nullable String destroyMethodName);\n\n\n\t@Nullable\n\tString getDestroyMethodName();\n\n\n\tvoid setRole(int role);\n\n\n\tint getRole();\n\n\n\tvoid setDescription(@Nullable String description);\n\n\t@Nullable\n\tString getDescription();\n\n\n\t// Read-only attributes\n\n\n\tResolvableType getResolvableType();\n\n\n\tboolean isSingleton();\n\n\n\tboolean isPrototype();\n\n\n\tboolean isAbstract();\n\n\n\t@Nullable\n\tString getResourceDescription();\n\n\n\t@Nullable\n\tBeanDefinition getOriginatingBeanDefinition();\n\n}\n\n\n\n// org.springframework.core.AttributeAccessor\npackage org.springframework.core;\npublic interface AttributeAccessor {\n\n\tvoid setAttribute(String name, @Nullable Object value);\n\n\n\t@Nullable\n\tObject getAttribute(String name);\n\n\n\t@Nullable\n\tObject removeAttribute(String name);\n\n\n\tboolean hasAttribute(String name);\n\n\n\tString[] attributeNames();\n\n}\n\n\n\n// org.springframework.beans.BeanMetadataElemen\npackage org.springframework.beans;\npublic interface BeanMetadataElement {\n\n\t@Nullable\n\tdefault Object getSource() {\n\t\treturn null;\n\t}\n\n}\n\n\n```\n\n# 2.从一个Demo程序开始\n\n## 2.1 Demo项目配置\n### maven的pom.xml配置文件\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n    <modelVersion>4.0.0</modelVersion>\n    <!--        <parent>-->\n    <!--            <groupId>com.acanx</groupId>-->\n    <!--            <artifactId>ACANX-JavaEE-Dependencies</artifactId>-->\n    <!--            <version>0.0.1</version>-->\n    <!--        </parent>-->\n\n    <groupId>com.acanx</groupId>\n    <artifactId>JavaWeb-Spring</artifactId>\n    <version>0.0.1-SNAPSHOT</version>\n    <packaging>war</packaging>\n\n    <name>JavaWeb-Spring</name>\n    <description>JavaWeb-Spring project</description>\n\n\n    <properties>\n        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>\n        <project.reporting.outputEncoding>UTF-8</project.reporting.outputEncoding>\n        <java.version>11</java.version>\n        <spring.version>5.2.1.RELEASE</spring.version>\n        <!-- log4j日志文件管理包版本 -->\n        <slf4j.version>2.0.0-alpha1</slf4j.version>\n        <logback.version>1.3.0-alpha5</logback.version>\n        <!-- log4j日志包版本号 -->\n        <log4j2.version>2.8.2</log4j2.version>\n        <log4j.version>1.2.17</log4j.version>\n        <junit.version>4.12</junit.version>\n        <fastjson.version>1.2.62</fastjson.version>\n        <maven-compiler-plugin.version>3.8.1</maven-compiler-plugin.version>\n    </properties>\n\n    <dependencies>\n        <dependency>\n            <groupId>org.springframework</groupId>\n            <artifactId>spring-context</artifactId>\n            <version>${spring.version}</version>\n        </dependency>\n        <dependency>\n            <groupId>ch.qos.logback</groupId>\n            <artifactId>logback-classic</artifactId>\n            <version>${logback.version}</version>\n        </dependency>\n        <!-- 添加fastjson -->\n        <dependency>\n            <groupId>com.alibaba</groupId>\n            <artifactId>fastjson</artifactId>\n            <version>${fastjson.version}</version>\n        </dependency>\n        <!--  单元测试-->\n        <!-- https://mvnrepository.com/artifact/junit/junit -->\n        <dependency>\n            <groupId>junit</groupId>\n            <artifactId>junit</artifactId>\n            <version>${junit.version}</version>\n            <scope>test</scope>\n        </dependency>\n\n    </dependencies>\n\n    <build>\n        <plugins>\n            <plugin>\n                <groupId>org.apache.maven.plugins</groupId>\n                <artifactId>maven-compiler-plugin</artifactId>\n                <version>${maven-compiler-plugin.version}</version>\n                <configuration>\n                    <target>11</target>\n                    <source>11</source>\n                </configuration>\n            </plugin>\n        </plugins>\n    </build>\n</project>\n\n```\n\n## 2.2 Demo程序\n### 2.2.1启动类\n- 代码位置:com.acanx.spring.xml.CspringIocConfigByFileSystemXmlApplicationContext.java\n```java\n\npackage com.acanx.spring.xml;\n\nimport com.acanx.spring.bean.Car;\nimport org.apache.commons.logging.Log;\nimport org.apache.commons.logging.LogFactory;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.context.ApplicationContext;\nimport org.springframework.context.support.FileSystemXmlApplicationContext;\n\n/**\n * ACANX-JavaWeb / com.acanx.spring.xml / SpringIocConfigByXmlFileInClassPath.java\n * 文件由 ACANX 创建于 2019/7/30 - 13:39\n * Description  SpringIocConfigByXmlFileInClassPath:\n * 补充说明： 使用FileSystemXmlApplicationContext加载文件系统下的配置文件\n *\n * @author ACANX\n * @version 0.0.1.0\n * @date 2019/7/30  13:39\n * @since 0.0.1-SNAPSHOT\n */\npublic class CspringIocConfigByFileSystemXmlApplicationContext {\n   private static final Logger logger= LoggerFactory.getLogger(CspringIocConfigByFileSystemXmlApplicationContext.class);\n   public static void main(String[] args)  {\n        logger.info(\"-------------------\");\n        logger.info(System.getProperty(\"org.apache.commons.logging.LogFactory\"));\n        logger.info(System.getProperty(\"org.apache.commons.logging.Log\"));\n        logger.info(\"-------------------\");\n        String location=\"D:\\\\ProgramCode\\\\JavaCode\\\\ACANX-JavaWeb\\\\JavaWeb-Spring\\\\ApplicationContextC.xml\";\n        ApplicationContext applicationContext = new FileSystemXmlApplicationContext(location);\n        Car car = (Car) applicationContext.getBean(\"myCar\");\n        logger.info(car.toString());\n        logger.info(\"Info :{}\",logger.isInfoEnabled());\n        String[] beanNames=applicationContext.getBeanDefinitionNames();\n        for (String beanName:beanNames) {\n             logger.info(beanName+\"::::: \"+applicationContext.getBean(beanName).toString());\n        }\n    }\n}\n\n```\n\n### 2.2.2使用到的Bena对象\n```java\npackage com.acanx.spring.bean;\n\npublic class Car {\n\n    private  String name;\n\n    private  String price;\n\n\t// get set 默认构造方法已省略\n\n}\n```\n\n### 2.2.3 springContext的xml文件ApplicationContextC.xml\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<beans xmlns=\"http://www.springframework.org/schema/beans\"\n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n       xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\">\n    \n    <bean name=\"myCar\" class=\"com.acanx.spring.bean.Car\" >\n        <property name=\"name\" value=\"QQAI\"/>\n        <property name=\"price\" value=\"2222\"/>\n    </bean>\n    \n</beans>\n\n```\n\n### 2.2.4 配置日志 logback.xml（resources文件夹下）\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<configuration scan=\"true\" scanPeriod=\"60 seconds\" debug=\"false\">\n\n    <property name=\"LOG_PATH\" value=\".log\"/>\n    <property name=\"APP_NAME\" value=\"IOCDemo\"/>\n    <!--设置系统日志目录-->\n    <property name=\"APP_DIR\" value=\"app-IOCDemo\"/>\n\n    <property name=\"CONSOLE_LOG_PATTERN\" value=\"[CLP]${CONSOLE_LOG_PATTERN:-%clr(%d{${LOG_DATEFORMAT_PATTERN:-yyyy-MM-dd HH:mm:ss.SSS}}){faint} %clr(${LOG_LEVEL_PATTERN:-%5p}) %clr(${PID:- }){magenta} %clr(---){faint} %clr([%15.15t]){faint} %clr(%-40.40logger{39}){cyan} %clr(%-15.15method){cyan} %clr([%4.4line{4}]){magenta} %clr(:){faint} %m%n${LOG_EXCEPTION_CONVERSION_WORD:-%wEx}}\"/>\n    <property name=\"FILE_LOG_PATTERN\" value=\"${FILE_LOG_PATTERN:-%d{${LOG_DATEFORMAT_PATTERN:-yyyy-MM-dd HH:mm:ss.SSS}} ${LOG_LEVEL_PATTERN:-%5p} ${PID:- } --- [%t] %-40.40logger{39} : %m%n${LOG_EXCEPTION_CONVERSION_WORD:-%wEx}}\"/>\n    <property name=\"CONSOLE_LOGBACK_PATTERN\" value=\"[控制台] %d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level | %-80logger # %-40M [%4line] : %msg%n\"/>\n\n\n    <contextName>logback</contextName>\n    <!--输出到控制台-->\n    <appender name=\"CONSOLE\" class=\"ch.qos.logback.core.ConsoleAppender\">\n        <filter class=\"ch.qos.logback.classic.filter.ThresholdFilter\">\n            <level>TRACE</level>\n        </filter>\n        <layout class=\"ch.qos.logback.classic.PatternLayout\">\n            <Pattern>${CONSOLE_LOGBACK_PATTERN}</Pattern>\n        </layout>\n        <encoder>\n            <!--  文件名 [%file]-->\n            <pattern>${CONSOLE_LOGBACK_PATTERN}</pattern>\n        </encoder>\n    </appender>\n\n    <appender name=\"ERROR_FILE\" class=\"ch.qos.logback.core.rolling.RollingFileAppender\">\n        <filter class=\"ch.qos.logback.classic.filter.ThresholdFilter\">\n            <level>ERROR</level>\n            <onMatch>ACCEPT</onMatch>\n            <onMismatch>DENY</onMismatch>\n        </filter>\n        <File>.log/ACANX-JavaWeb/LOG-ERROR.log</File>\n        <rollingPolicy class=\"ch.qos.logback.core.rolling.TimeBasedRollingPolicy\">\n            <fileNamePattern>.log/server-error-%d{yyyyMMdd}.log.%i\n            </fileNamePattern>\n            <timeBasedFileNamingAndTriggeringPolicy class=\"ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP\">\n                <maxFileSize>5MB</maxFileSize>\n            </timeBasedFileNamingAndTriggeringPolicy>\n            <maxHistory>2</maxHistory>\n        </rollingPolicy>\n        <layout class=\"ch.qos.logback.classic.PatternLayout\">\n            <Pattern>${CONSOLE_LOGBACK_PATTERN}</Pattern>\n        </layout>\n    </appender>\n\n\n    <appender name=\"WARN_FILE\" class=\"ch.qos.logback.core.rolling.RollingFileAppender\">\n        <filter class=\"ch.qos.logback.classic.filter.ThresholdFilter\">\n            <level>WARN</level>\n            <onMatch>ACCEPT</onMatch>\n            <onMismatch>DENY</onMismatch>\n        </filter>\n        <File>.log/ACANX-JavaWeb/LOG-WARN.log</File>\n        <rollingPolicy class=\"ch.qos.logback.core.rolling.TimeBasedRollingPolicy\">\n            <fileNamePattern>.log/ACANX-JavaWeb/server-WARN-%d{yyyyMMdd}.log.%i\n            </fileNamePattern>\n            <timeBasedFileNamingAndTriggeringPolicy class=\"ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP\">\n                <maxFileSize>5MB</maxFileSize>\n            </timeBasedFileNamingAndTriggeringPolicy>\n            <maxHistory>2</maxHistory>\n        </rollingPolicy>\n        <layout class=\"ch.qos.logback.classic.PatternLayout\">\n            <Pattern>${CONSOLE_LOGBACK_PATTERN}</Pattern>\n        </layout>\n    </appender>\n\n    <appender name=\"INFO_FILE\" class=\"ch.qos.logback.core.rolling.RollingFileAppender\">\n        <File>.log/ACANX-JavaWeb/LOG-INFO.log</File>\n        <filter class=\"ch.qos.logback.classic.filter.ThresholdFilter\">\n            <level>INFO</level>\n            <onMatch>ACCEPT</onMatch>\n            <onMismatch>DENY</onMismatch>\n        </filter>\n        <rollingPolicy class=\"ch.qos.logback.core.rolling.TimeBasedRollingPolicy\">\n            <fileNamePattern>.log/ACANX-JavaWeb/server-info-%d{yyyyMMdd}.log.%i</fileNamePattern>\n            <timeBasedFileNamingAndTriggeringPolicy class=\"ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP\">\n                <maxFileSize>5MB</maxFileSize>\n            </timeBasedFileNamingAndTriggeringPolicy>\n            <maxHistory>2</maxHistory>\n        </rollingPolicy>\n        <layout class=\"ch.qos.logback.classic.PatternLayout\">\n            <Pattern>${CONSOLE_LOGBACK_PATTERN}</Pattern>\n        </layout>\n        <encoder class=\"ch.qos.logback.classic.encoder.PatternLayoutEncoder\">\n            <!--格式化输出：%d表示日期，%thread表示线程名，%-5level：级别从左显示5个字符宽度%msg：日志消息，%n是换行符-->\n            <pattern>${CONSOLE_LOGBACK_PATTERN}</pattern>\n        </encoder>\n    </appender>\n\n    <appender name=\"TRACE_FILE\" class=\"ch.qos.logback.core.rolling.RollingFileAppender\">\n        <filter class=\"ch.qos.logback.classic.filter.ThresholdFilter\">\n            <level>TRACE</level>\n            <onMatch>ACCEPT</onMatch>\n            <onMismatch>DENY</onMismatch>\n        </filter>\n        <File>.log/ACANX-JavaWeb/LOG-TRACE.log</File>\n        <rollingPolicy class=\"ch.qos.logback.core.rolling.TimeBasedRollingPolicy\">\n            <fileNamePattern>.log/ACANX-JavaWeb/server-TRACE-%d{yyyyMMdd}.log.%i\n            </fileNamePattern>\n            <timeBasedFileNamingAndTriggeringPolicy class=\"ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP\">\n                <maxFileSize>5MB</maxFileSize>\n            </timeBasedFileNamingAndTriggeringPolicy>\n            <maxHistory>2</maxHistory>\n        </rollingPolicy>\n        <layout class=\"ch.qos.logback.classic.PatternLayout\">\n            <Pattern>${CONSOLE_LOGBACK_PATTERN}</Pattern>\n        </layout>\n    </appender>\n\n    <appender name=\"FULL_LEVEL_FILE\" class=\"ch.qos.logback.core.rolling.RollingFileAppender\">\n        <File>.log/ACANX-JavaWeb/LOG-FULL.log</File>\n        <filter class=\"ch.qos.logback.classic.filter.ThresholdFilter\">\n            <level>TRACE</level>\n        </filter>\n        <encoder>\n            <!--  文件名 [%file] -->\n            <pattern>${CONSOLE_LOGBACK_PATTERN}</pattern>\n        </encoder>\n        <rollingPolicy class=\"ch.qos.logback.core.rolling.TimeBasedRollingPolicy\">\n            <fileNamePattern>.log/ACANX-JavaWeb/LOG-FULL-%d{yyyyMMdd}.log.%i</fileNamePattern>\n            <timeBasedFileNamingAndTriggeringPolicy class=\"ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP\">\n                <maxFileSize>5MB</maxFileSize>\n            </timeBasedFileNamingAndTriggeringPolicy>\n            <maxHistory>2</maxHistory>\n        </rollingPolicy>\n        <layout class=\"ch.qos.logback.classic.PatternLayout\">\n            <Pattern>${CONSOLE_LOGBACK_PATTERN}</Pattern>\n        </layout>\n    </appender>\n\n    <root level=\"TRACE\" additivity=\"true\">\n        <appender-ref ref=\"CONSOLE\"/>\n        <appender-ref ref=\"WARN_FILE\"/>\n        <appender-ref ref=\"ERROR_FILE\"/>\n        <appender-ref ref=\"INFO_FILE\"/>\n        <appender-ref ref=\"TRACE_FILE\"/>\n        <appender-ref ref=\"FULL_LEVEL_FILE\"/>\n    </root>\n\n    <!-- TRACE, DEBUG, INFO, WARN, ERROR, ALL 和 OFF -->\n    <logger name=\"org\" level=\"TRACE\" additivity=\"true\"></logger>\n    <logger name=\"org.springframework.context\" level=\"TRACE\" additivity=\"false\"></logger>\n    <logger name=\"org.apache\" level=\"TRACE\"/>\n    <logger name=\"com.alibaba\" level=\"TRACE\"/>\n    <!-- 如果这里设置了additivity=true 代码打印信息向上传递,将打印信息传递到root ，并且自己的appender-ref 也会打印，这样就是打印了俩次日志-->\n</configuration>\n\n```\n\n# 3.Spring IOC容器的创建\n\n##  3.1 进入FileSystemXmlApplicationContext（AbstractXmlApplicationContext抽象类的具体实现类）\n- 代码位置: org.springframework.context.support.FileSystemXmlApplicationContext.java\n```java\n\tpublic FileSystemXmlApplicationContext(String configLocation) throws BeansException {\n\t\tthis(new String[] {configLocation}, true, null);\n\t}\n\n\n    // 上面的this 来到下面的重载构造方法\n\tpublic FileSystemXmlApplicationContext(\n\t\t\tString[] configLocations, boolean refresh, @Nullable ApplicationContext parent)\n\t\t\tthrows BeansException {\n\n\t\tsuper(parent);  // 初始化父容器AbstractApplicationContext\n\t\tsetConfigLocations(configLocations); // 设置资源文件的位置\n\t\tif (refresh) {\n\t\t\trefresh();// 核心方法，具体定义在超类AbstractApplicationContext（抽象类）中，是一个模板方法\n\t\t}\n\t}\n```\n\n## 3.2 初始化父容器AbstractApplicationContext\n### 3.2.1 AbstractXmlApplicationContext抽象类（FileSystemXmlApplicationContext的父类）\n- 代码位置: org.springframework.context.support.AbstractXmlApplicationContext.java\n```java\n\tpublic AbstractXmlApplicationContext(@Nullable ApplicationContext parent) {\n\t\tsuper(parent);\n\t}\n\n```\n\n### 3.2.2 AbstractRefreshableConfigApplicationContext抽象类（ AbstractXmlApplicationContext的父类）\n- 代码位置:org.springframework.context.support.AbstractRefreshableConfigApplicationContext.java\n```java\n\tpublic AbstractRefreshableConfigApplicationContext(@Nullable ApplicationContext parent) {\n\t\tsuper(parent);\n\t}\n\n```\n\n### 3.2.3 AbstractRefreshableApplicationContext抽象类\n-  代码位置:org.springframework.context.support.AbstractRefreshableApplicationContext.java\n```java\n\tpublic AbstractRefreshableApplicationContext(@Nullable ApplicationContext parent) {\n\t\tsuper(parent);\n\t}\n\n```\n\n### 3.2.4 AbstractApplicationContext抽象类\n- 代码位置:org.springframework.context.support.AbstractApplicationContext.java\n```java\n\tpublic AbstractApplicationContext(@Nullable ApplicationContext parent) {\n\t\tthis();\n\t\tsetParent(parent);\n\t}\n\n    //上面对应的this()方法 \n\tpublic AbstractApplicationContext() {\n\t\tthis.resourcePatternResolver = getResourcePatternResolver();\n\t}\n\n    //上面对应的 getResourcePatternResolver()方法\n\tprotected ResourcePatternResolver getResourcePatternResolver() {\n\t\treturn new PathMatchingResourcePatternResolver(this);\n\t}\n\n    // this()之后的setParent(parent);方法\n\t@Override\n\tpublic void setParent(@Nullable ApplicationContext parent) {\n\t\tthis.parent = parent;\n\t\tif (parent != null) {\n\t\t\tEnvironment parentEnvironment = parent.getEnvironment();\n\t\t\tif (parentEnvironment instanceof ConfigurableEnvironment) {\n\t\t\t\tgetEnvironment().merge((ConfigurableEnvironment) parentEnvironment);\n\t\t\t}\n\t\t}\n\t}\n\n```\n\n## 3.5 PathMatchingResourcePatternResolver类\n- PathMatchingResourcePatternResolver(this)对应的构造方法\n- 代码位置:org.springframework.core.io.support.PathMatchingResourcePatternResolver.java\n```java\n\tpublic PathMatchingResourcePatternResolver(ResourceLoader resourceLoader) {\n\t\tAssert.notNull(resourceLoader, \"ResourceLoader must not be null\");\n\t\tthis.resourceLoader = resourceLoader;\n\t}\n\n```\n\n\n\n# 4.setConfigLocations(String... locations) 方法\n- 设置资源文件的位置\n\n## 4.1 AbstractRefreshableConfigApplicationContext.setConfigLocations(@Nullable String... locations) 方法\n-  代码位置:org.springframework.context.support.AbstractRefreshableConfigApplicationContext.java\n```java\n\tpublic void setConfigLocations(@Nullable String... locations) {\n\t\tif (locations != null) {\n\t\t\tAssert.noNullElements(locations, \"Config locations must not be null\");\n\t\t\tthis.configLocations = new String[locations.length];\n\t\t\tfor (int i = 0; i < locations.length; i++) {\n\t\t\t\tthis.configLocations[i] = resolvePath(locations[i]).trim();\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tthis.configLocations = null;\n\t\t}\n\t}\n\n\n```\n\n\n# 5. refresh()方法\n- AbstractApplicationContext抽象类中定义的refresh()模板方法\n- 定义了需要执行刷新操作的一些步骤，只是一个模板，个性化的逻辑由其子类来具体实现\n## 5.1 refresh()方法定义\n-  代码位置:org.springframework.context.support.AbstractApplicationContext.java\n```java\n@Override\npublic void refresh() throws BeansException, IllegalStateException {\n\tsynchronized (this.startupShutdownMonitor) {\n\t\t// Prepare this context for refreshing.\n\t\tprepareRefresh();\n\n\t\t// Tell the subclass to refresh the internal bean factory.\n\t\t// 创建BeanFactory\n\t\tConfigurableListableBeanFactory beanFactory = obtainFreshBeanFactory();\n\n\t\t// Prepare the bean factory for use in this context.\n\t\tprepareBeanFactory(beanFactory);\n\n\t\ttry {\n\t\t\t// Allows post-processing of the bean factory in context subclasses.\n\t\t\tpostProcessBeanFactory(beanFactory);\n\n\t\t\t// Invoke factory processors registered as beans in the context.\n\t\t\tinvokeBeanFactoryPostProcessors(beanFactory);\n\n\t\t\t// Register bean processors that intercept bean creation.\n\t\t\tregisterBeanPostProcessors(beanFactory);\n\n\t\t\t// Initialize message source for this context.\n\t\t\tinitMessageSource();\n\n\t\t\t// Initialize event multicaster for this context.\n\t\t\tinitApplicationEventMulticaster();\n\n\t\t\t// Initialize other special beans in specific context subclasses.\n\t\t\tonRefresh();\n\n\t\t\t// Check for listener beans and register them.\n\t\t\tregisterListeners();\n\n\t\t\t// Instantiate all remaining (non-lazy-init) singletons.\n\t\t\t// 实例化Bean\n\t\t\tfinishBeanFactoryInitialization(beanFactory);\n\n\t\t\t// Last step: publish corresponding event.\n\t\t\tfinishRefresh();\n\t\t}\n\n\t\tcatch (BeansException ex) {\n\t\t\tif (logger.isWarnEnabled()) {\n\t\t\t\tlogger.warn(\"Exception encountered during context initialization - \" +\n\t\t\t\t\t\t\"cancelling refresh attempt: \" + ex);\n\t\t\t}\n\n\t\t\t// Destroy already created singletons to avoid dangling resources.\n\t\t\tdestroyBeans();\n\n\t\t\t// Reset 'active' flag.\n\t\t\tcancelRefresh(ex);\n\n\t\t\t// Propagate exception to caller.\n\t\t\tthrow ex;\n\t\t}\n\n\t\tfinally {\n\t\t\t// Reset common introspection caches in Spring's core, since we\n\t\t\t// might not ever need metadata for singleton beans anymore...\n\t\t\tresetCommonCaches();\n\t\t}\n\t}\n}\n\n```\n\n\n## 5.2 prepareRefresh()方法\n- 正式Refresh()操作前的准备工作\n- 代码位置:org.springframework.context.support.AbstractApplicationContext.java\n```java\nprotected void prepareRefresh() {\n\t// Switch to active.\n\tthis.startupDate = System.currentTimeMillis();\n\tthis.closed.set(false);\n\tthis.active.set(true);\n\n\tif (logger.isDebugEnabled()) {\n\t\tif (logger.isTraceEnabled()) {\n\t\t\tlogger.trace(\"Refreshing \" + this);\n\t\t}\n\t\telse {\n\t\t\tlogger.debug(\"Refreshing \" + getDisplayName());\n\t\t}\n\t}\n\n\t// Initialize any placeholder property sources in the context environment.\n\tinitPropertySources();\n\n\t// Validate that all properties marked as required are resolvable:\n\t// see ConfigurablePropertyResolver#setRequiredProperties\n\tgetEnvironment().validateRequiredProperties();\n\n\t// Store pre-refresh ApplicationListeners...\n\tif (this.earlyApplicationListeners == null) {\n\t\tthis.earlyApplicationListeners = new LinkedHashSet<>(this.applicationListeners);\n\t}\n\telse {\n\t\t// Reset local application listeners to pre-refresh state.\n\t\tthis.applicationListeners.clear();\n\t\tthis.applicationListeners.addAll(this.earlyApplicationListeners);\n\t}\n\n\t// Allow for the collection of early ApplicationEvents,\n\t// to be published once the multicaster is available...\n\tthis.earlyApplicationEvents = new LinkedHashSet<>();\n}\n\n// 上述定义的initPropertySources()方法，具体由子类实现\nprotected void initPropertySources() {\n\t// For subclasses: do nothing by default.\n}\n\n```\n\n## 5.3 obtainFreshBeanFactory()方法\n- 创建BeanFactory的核心方法\n- 代码位置:org.springframework.context.support.AbstractApplicationContext.java\n```java\n\tprotected ConfigurableListableBeanFactory obtainFreshBeanFactory() {\n\t\trefreshBeanFactory();// 刷新BeanFactory，抽象方法由其子类实现,5.3.1中有说明\n\t\treturn getBeanFactory();// 获取BeanFactory，父类的抽象方法继承并由其子类实现\n\t}\n\n\tprotected abstract void refreshBeanFactory() throws BeansException, IllegalStateException;\n\n\t@Override // 该方法在ConfigurableApplicationContext接口中定义\n\tpublic abstract ConfigurableListableBeanFactory getBeanFactory() throws IllegalStateException;\n```\n\n\n### 5.3.1 refreshBeanFactory()方法的一种实现\n- org.springframework.context.support.AbstractRefreshableApplicationContext中的具体实现如下\n- refreshBeanFactory()方法是AbstractApplicationContext中定义的抽象方法\n- AbstractRefreshableApplicationContext中的refreshBeanFactory()方法是该抽象方法的一个具体实现\n- 主要作用：刷新BeanFactory\n```java\n// AbstractRefreshableApplicationContext中refreshBeanFactory()方法的一种实现\n@Override\nprotected final void refreshBeanFactory() throws BeansException {\n\t// 检查上下文中是否已存在BeanFactory\n\tif (hasBeanFactory()) {\n\t\t// 存在BeanFactory时先销毁已存在的BeanFactory\n\t\tdestroyBeans();//调用AbstractApplicationContext中的实现\n\t\t/**\n\t\t* 以下是AbstractApplicationContext中destroyBeans()方法的实现\n\t\t* protected void destroyBeans() {\n\t\t*    getBeanFactory().destroySingletons();\n\t\t* }\n\t\t*/\n\t\tcloseBeanFactory();// 调用本抽象类中的closeBeanFactory()方法，具体代码在下面列出\n\t}\n\ttry {\n\t\t// 创建新的BeanFactory\n\t\t// 下面这行代码只会创建一个空的BeanFactory，并未有任何Bean\n\t\tDefaultListableBeanFactory beanFactory = createBeanFactory();\n\t\tbeanFactory.setSerializationId(getId());\n\t\tcustomizeBeanFactory(beanFactory);\n\t\tloadBeanDefinitions(beanFactory);// refreshBeanFactory()方法实现的核心\n\t\tsynchronized (this.beanFactoryMonitor) {\n\t\t\tthis.beanFactory = beanFactory;\n\t\t}\n\t}\n\tcatch (IOException ex) {\n\t\tthrow new ApplicationContextException(\"I/O error parsing bean definition source for \" + getDisplayName(), ex);\n\t}\n}\n\n// AbstractRefreshableApplicationContext抽象类中refreshBeanFactory()方法内调用的closeBeanFactory()方法\n@Override\nprotected final void closeBeanFactory() {\n\tsynchronized (this.beanFactoryMonitor) {\n\t\tif (this.beanFactory != null) {\n\t\t\t//销毁已存在的BeanFactory\n\t\t\tthis.beanFactory.setSerializationId(null);\n\t\t\tthis.beanFactory = null;\n\t\t}\n\t}\n}\n\n//AbstractRefreshableApplicationContext抽象类中refreshBeanFactory()方法内调用createBeanFactory()方法\nprotected DefaultListableBeanFactory createBeanFactory() {\n\t// 调用下面 AbstractApplicationContext中的getInternalParentBeanFactory()方法\n\treturn new DefaultListableBeanFactory(getInternalParentBeanFactory());\n}\n```\n\n#### AbstractApplicationContext中的getInternalParentBeanFactory()方法\n```java\n@Nullable\nprotected BeanFactory getInternalParentBeanFactory() {\n\treturn (getParent() instanceof ConfigurableApplicationContext ?\n\t\t\t((ConfigurableApplicationContext) getParent()).getBeanFactory() : getParent());\n}\n```\n\n#### DefaultListableBeanFactory的构造方法\n```java\npublic DefaultListableBeanFactory(@Nullable BeanFactory parentBeanFactory) {\n\tsuper(parentBeanFactory);// 调用AbstractAutowireCapableBeanFactory(抽象类)的构造方法\n}\n```\n\n#### DefaultListableBeanFactory父类AbstractAutowireCapableBeanFactory(抽象类)的构造方法\n```java\npublic AbstractAutowireCapableBeanFactory(@Nullable BeanFactory parentBeanFactory) {\n\tthis();\n\tsetParentBeanFactory(parentBeanFactory);\n}\n```\n\n\n#### AbstractRefreshableApplicationContext中的customizeBeanFactory(beanFactory)方法\n```java\nprotected void customizeBeanFactory(DefaultListableBeanFactory beanFactory) {\n\tif (this.allowBeanDefinitionOverriding != null) {\n\t\tbeanFactory.setAllowBeanDefinitionOverriding(this.allowBeanDefinitionOverriding);\n\t}\n\tif (this.allowCircularReferences != null) {\n\t\tbeanFactory.setAllowCircularReferences(this.allowCircularReferences);\n\t}\n}\n```\n\n#### AbstractRefreshableApplicationContext中的loadBeanDefinitions(beanFactory)方法\n- 是实现refreshBeanFactory()方法的核心\n- org.springframework.context.support.AbstractRefreshableApplicationContext中定义的抽象方法\n```java\nprotected abstract void loadBeanDefinitions(DefaultListableBeanFactory beanFactory)\n\t\tthrows BeansException, IOException;\n```\n- 该抽象方法的一个具体实现在org.springframework.context.support.AbstractXmlApplicationContext中\n\n#### org.springframework.context.support.AbstractXmlApplicationContext中的loadBeanDefinitions(DefaultListableBeanFactory beanFactory)方法\n- org.springframework.context.support.AbstractRefreshableApplicationContext中定义的抽象方法loadBeanDefinitions(DefaultListableBeanFactory beanFactory)的一个实现\n```java\n@Override\nprotected void loadBeanDefinitions(DefaultListableBeanFactory beanFactory) throws BeansException, IOException {\n\t// Create a new XmlBeanDefinitionReader for the given BeanFactory.\n\t// 通过上一步创建的空BeanFactory来创建新的XmlBeanDefinitionReader对象\n\t// XmlBeanDefinitionReader用于解析xml文件中定义的bean\n\tXmlBeanDefinitionReader beanDefinitionReader = new XmlBeanDefinitionReader(beanFactory); //\n\n\t// Configure the bean definition reader with this context's\n\t// resource loading environment.\n\tbeanDefinitionReader.setEnvironment(this.getEnvironment());\n\tbeanDefinitionReader.setResourceLoader(this);\n\tbeanDefinitionReader.setEntityResolver(new ResourceEntityResolver(this));\n\n\t// Allow a subclass to provide custom initialization of the reader,\n\t// then proceed with actually loading the bean definitions.\n\tinitBeanDefinitionReader(beanDefinitionReader);\n\tloadBeanDefinitions(beanDefinitionReader); //这是一个重载方法，入参是上面生成的beanDefinitionReader\n}\n```\n\n####  new XmlBeanDefinitionReader(beanFactory)\n- XmlBeanDefinitionReader(beanFactory)构造方法调用其父类AbstractBeanDefinitionReader的构造方法，具体如下\n```java\nprotected AbstractBeanDefinitionReader(BeanDefinitionRegistry registry) {\n\tAssert.notNull(registry, \"BeanDefinitionRegistry must not be null\");\n\tthis.registry = registry;\n\n\t// Determine ResourceLoader to use.\n\tif (this.registry instanceof ResourceLoader) {\n\t\tthis.resourceLoader = (ResourceLoader) this.registry;\n\t}\n\telse {\n\t\tthis.resourceLoader = new PathMatchingResourcePatternResolver();\n\t}\n\n\t// Inherit Environment if possible\n\tif (this.registry instanceof EnvironmentCapable) {\n\t\tthis.environment = ((EnvironmentCapable) this.registry).getEnvironment();\n\t}\n\telse {\n\t\tthis.environment = new StandardEnvironment();\n\t}\n}\n```\n\n#### AbstractXmlApplicationContext抽象类中的initBeanDefinitionReader(beanDefinitionReader)方法\n```java\nprotected void initBeanDefinitionReader(XmlBeanDefinitionReader reader) {\n\treader.setValidating(this.validating);\n}\n```\n\n#### AbstractXmlApplicationContext抽象类中的loadBeanDefinitions(XmlBeanDefinitionReader reader)方法\n- 主要功能是解析资源文件的位置\n- 调用XmlBeanDefinitionReader对象的loadBeanDefinitions方法解析bean的定义\n```java\nprotected void loadBeanDefinitions(XmlBeanDefinitionReader reader) throws BeansException, IOException {\n\tResource[] configResources = getConfigResources();\n\tif (configResources != null) {\n\t\treader.loadBeanDefinitions(configResources); //具体调用AbstractBeanDefinitionReader中实现的loadBeanDefinitions(Resource... resources)方法\n\t}\n\tString[] configLocations = getConfigLocations();\n\tif (configLocations != null) {\n\t\treader.loadBeanDefinitions(configLocations);//具体调用AbstractBeanDefinitionReader中实现的loadBeanDefinitions(String... locations)\n\t}\n}\n```\n\n##### reader.loadBeanDefinitions(configResources)方法与reader.loadBeanDefinitions(configLocations)方法\n- XmlBeanDefinitionReader对象的loadBeanDefinitions方法用于解析bean的定义\n- reader是XmlBeanDefinitionReader类型的对象，loadBeanDefinitions方法定义在BeanDefinitionReader接口中，\n- loadBeanDefinitions方法具体是在AbstractBeanDefinitionReader抽象类中实现的，具体代码如下：\n```java\n@Override\npublic int loadBeanDefinitions(Resource... resources) throws BeanDefinitionStoreException {\n\tAssert.notNull(resources, \"Resource array must not be null\");\n\tint count = 0;\n\t// 遍历每一个资源并依次调用重载方法loadBeanDefinitions(Resource resource)，定义在XmlBeanDefinitionReader中，具体实现在XmlBeanDefinitionReader中\n\tfor (Resource resource : resources) {\n\t\tcount += loadBeanDefinitions(resource);//\n\t}\n\treturn count;\n}\n\n@Override\npublic int loadBeanDefinitions(String... locations) throws BeanDefinitionStoreException {\n\tAssert.notNull(locations, \"Location array must not be null\");\n\tint count = 0;\n\t//遍历资源数组，调用重载方法loadBeanDefinitions(String location)\n\tfor (String location : locations) {\n\t\tcount += loadBeanDefinitions(location);//\n\t}\n\treturn count;\n}\n\n```\n\n#### count += loadBeanDefinitions(resource)中的loadBeanDefinitions(resource)方法\n- loadBeanDefinitions(resource)方法在BeanDefinitionReader接口中定义，具体实现是在XmlBeanDefinitionReader中\n- XmlBeanDefinitionReader中的实现代码如下：\n```java\n@Override\npublic int loadBeanDefinitions(Resource resource) throws BeanDefinitionStoreException {\n\treturn loadBeanDefinitions(new EncodedResource(resource));\n}\n```\n- 可以看到，上面的方法又调用了loadBeanDefinitions(new EncodedResource(resource))方法，该方法在BeanDefinitionReader接口中定义，具体实现在XmlBeanDefinitionReader中,具体实现，详细代码如下：\n```java\npublic int loadBeanDefinitions(EncodedResource encodedResource) throws BeanDefinitionStoreException {\n\tAssert.notNull(encodedResource, \"EncodedResource must not be null\");\n\tif (logger.isTraceEnabled()) {\n\t\tlogger.trace(\"Loading XML bean definitions from \" + encodedResource);\n\t}\n\n\tSet<EncodedResource> currentResources = this.resourcesCurrentlyBeingLoaded.get();\n\tif (currentResources == null) {\n\t\tcurrentResources = new HashSet<>(4);\n\t\tthis.resourcesCurrentlyBeingLoaded.set(currentResources);\n\t}\n\tif (!currentResources.add(encodedResource)) {\n\t\tthrow new BeanDefinitionStoreException(\"Detected cyclic loading of \" + encodedResource + \" - check your import definitions!\");\n\t}\n\ttry {\n\t\t//以流的形式读取资源文件\n\t\tInputStream inputStream = encodedResource.getResource().getInputStream();\n\t\ttry {\n\t\t\tInputSource inputSource = new InputSource(inputStream);\n\t\t\tif (encodedResource.getEncoding() != null) {\n\t\t\t\tinputSource.setEncoding(encodedResource.getEncoding());\n\t\t\t}\n\t\t\t// 调用doLoadBeanDefinitions解析载入文件中的bean定义\n\t\t\treturn doLoadBeanDefinitions(inputSource, encodedResource.getResource());\n\t\t}\n\t\tfinally {\n\t\t\tinputStream.close();\n\t\t}\n\t}\n\tcatch (IOException ex) {\n\t\tthrow new BeanDefinitionStoreException(\n\t\t\t\t\"IOException parsing XML document from \" + encodedResource.getResource(), ex);\n\t}\n\tfinally {\n\t\tcurrentResources.remove(encodedResource);\n\t\tif (currentResources.isEmpty()) {\n\t\t\tthis.resourcesCurrentlyBeingLoaded.remove();\n\t\t}\n\t}\n}\n```\n\n#### count += loadBeanDefinitions(location)中的loadBeanDefinitions(location)方法\n- loadBeanDefinitions(location)方法的具体实现AbstractBeanDefinitionReader中；\n```java\n@Override\npublic int loadBeanDefinitions(String location) throws BeanDefinitionStoreException {\n\treturn loadBeanDefinitions(location, null);\n}\n\n```\n- 解析资源文件的路径，得到Resource[]资源数组\n- 上面AbstractBeanDefinitionReader中的loadBeanDefinitions(String location)方法又调用了同类里面的一个重载方法loadBeanDefinitions(String location, @Nullable Set<Resource> actualResources) 具体实现如下：\n```java\npublic int loadBeanDefinitions(String location, @Nullable Set<Resource> actualResources) throws BeanDefinitionStoreException {\n\t\tResourceLoader resourceLoader = getResourceLoader();\n\t\tif (resourceLoader == null) {\n\t\t\tthrow new BeanDefinitionStoreException(\n\t\t\t\t\t\"Cannot load bean definitions from location [\" + location + \"]: no ResourceLoader available\");\n\t\t}\n\n\t\tif (resourceLoader instanceof ResourcePatternResolver) {\n\t\t\t// Resource pattern matching available.\n\t\t\ttry {\n\t\t\t\tResource[] resources = ((ResourcePatternResolver) resourceLoader).getResources(location);\n\t\t\t\t//下一行的核心逻辑  调用上面提到的重载方法loadBeanDefinitions(Resource resource)\n\t\t\t\tint count = loadBeanDefinitions(resources);\n\t\t\t\tif (actualResources != null) {\n\t\t\t\t\tCollections.addAll(actualResources, resources);\n\t\t\t\t}\n\t\t\t\tif (logger.isTraceEnabled()) {\n\t\t\t\t\tlogger.trace(\"Loaded \" + count + \" bean definitions from location pattern [\" + location + \"]\");\n\t\t\t\t}\n\t\t\t\treturn count;\n\t\t\t}\n\t\t\tcatch (IOException ex) {\n\t\t\t\tthrow new BeanDefinitionStoreException(\n\t\t\t\t\t\t\"Could not resolve bean definition resource pattern [\" + location + \"]\", ex);\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\t// Can only load single resources by absolute URL.\n\t\t\tResource resource = resourceLoader.getResource(location);\n\t\t\tint count = loadBeanDefinitions(resource);\n\t\t\tif (actualResources != null) {\n\t\t\t\tactualResources.add(resource);\n\t\t\t}\n\t\t\tif (logger.isTraceEnabled()) {\n\t\t\t\tlogger.trace(\"Loaded \" + count + \" bean definitions from location [\" + location + \"]\");\n\t\t\t}\n\t\t\treturn count;\n\t\t}\n\t}\n```\n\n\n#### XmlBeanDefinitionReader类中的doLoadBeanDefinitions(InputSource inputSource, Resource resource)方法\n- 该方法是载入定义bean的核心方法\n- 代码位置：org.springframework.beans.factory.xml.XmlBeanDefinitionReader\n```java\nprotected int doLoadBeanDefinitions(InputSource inputSource, Resource resource)\n\t\tthrows BeanDefinitionStoreException {\n\n\ttry {\n\t\t// 解析XML文档\n\t\tDocument doc = doLoadDocument(inputSource, resource);\n\t\t// 下面一行代码 注册Bean\n\t\tint count = registerBeanDefinitions(doc, resource);\n\t\tif (logger.isDebugEnabled()) {\n\t\t\tlogger.debug(\"Loaded \" + count + \" bean definitions from \" + resource);\n\t\t}\n\t\treturn count;\n\t}\n\tcatch (BeanDefinitionStoreException ex) {\n\t\tthrow ex;\n\t}\n\tcatch (SAXParseException ex) {\n\t\tthrow new XmlBeanDefinitionStoreException(resource.getDescription(),\n\t\t\t\t\"Line \" + ex.getLineNumber() + \" in XML document from \" + resource + \" is invalid\", ex);\n\t}\n\tcatch (SAXException ex) {\n\t\tthrow new XmlBeanDefinitionStoreException(resource.getDescription(),\n\t\t\t\t\"XML document from \" + resource + \" is invalid\", ex);\n\t}\n\tcatch (ParserConfigurationException ex) {\n\t\tthrow new BeanDefinitionStoreException(resource.getDescription(),\n\t\t\t\t\"Parser configuration exception parsing XML from \" + resource, ex);\n\t}\n\tcatch (IOException ex) {\n\t\tthrow new BeanDefinitionStoreException(resource.getDescription(),\n\t\t\t\t\"IOException parsing XML document from \" + resource, ex);\n\t}\n\tcatch (Throwable ex) {\n\t\tthrow new BeanDefinitionStoreException(resource.getDescription(),\n\t\t\t\t\"Unexpected exception parsing XML document from \" + resource, ex);\n\t}\n}\n\n// 注册Bean的方法\npublic int registerBeanDefinitions(Document doc, Resource resource) throws BeanDefinitionStoreException {\n\tBeanDefinitionDocumentReader documentReader = createBeanDefinitionDocumentReader();\n\tint countBefore = getRegistry().getBeanDefinitionCount();\n\t// 注册bean的核心逻辑\n\tdocumentReader.registerBeanDefinitions(doc, createReaderContext(resource));\n\treturn getRegistry().getBeanDefinitionCount() - countBefore;\n}\n```\n\n#### DefaultBeanDefinitionDocumentReader.registerBeanDefinitions(Document doc, XmlReaderContext readerContext)\n- 功能：\n- 代码位置：org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader\n```java\n@Override\npublic void registerBeanDefinitions(Document doc, XmlReaderContext readerContext) {\n\tthis.readerContext = readerContext;\n\t// 核心逻辑\n\tdoRegisterBeanDefinitions(doc.getDocumentElement());\n}\n\n// registerBeanDefinitions方法中调用的doRegisterBeanDefinitions方法\n@SuppressWarnings(\"deprecation\")  // for Environment.acceptsProfiles(String...)\nprotected void doRegisterBeanDefinitions(Element root) {\n\t// Any nested <beans> elements will cause recursion in this method. In\n\t// order to propagate and preserve <beans> default-* attributes correctly,\n\t// keep track of the current (parent) delegate, which may be null. Create\n\t// the new (child) delegate with a reference to the parent for fallback purposes,\n\t// then ultimately reset this.delegate back to its original (parent) reference.\n\t// this behavior emulates a stack of delegates without actually necessitating one.\n\tBeanDefinitionParserDelegate parent = this.delegate;\n\tthis.delegate = createDelegate(getReaderContext(), root, parent);\n\n\tif (this.delegate.isDefaultNamespace(root)) {\n\t\tString profileSpec = root.getAttribute(PROFILE_ATTRIBUTE);\n\t\tif (StringUtils.hasText(profileSpec)) {\n\t\t\tString[] specifiedProfiles = StringUtils.tokenizeToStringArray(\n\t\t\t\t\tprofileSpec, BeanDefinitionParserDelegate.MULTI_VALUE_ATTRIBUTE_DELIMITERS);\n\t\t\t// We cannot use Profiles.of(...) since profile expressions are not supported\n\t\t\t// in XML config. See SPR-12458 for details.\n\t\t\tif (!getReaderContext().getEnvironment().acceptsProfiles(specifiedProfiles)) {\n\t\t\t\tif (logger.isDebugEnabled()) {\n\t\t\t\t\tlogger.debug(\"Skipped XML bean definition file due to specified profiles [\" + profileSpec +\n\t\t\t\t\t\t\t\"] not matching: \" + getReaderContext().getResource());\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\n\tpreProcessXml(root);\n\t// 核心逻辑\n\tparseBeanDefinitions(root, this.delegate);\n\tpostProcessXml(root);\n\n\tthis.delegate = parent;\n}\n\n// 上面方法中调用的parseBeanDefinitions(root, this.delegate)对应的方法实现\nprotected void parseBeanDefinitions(Element root, BeanDefinitionParserDelegate delegate) {\n\tif (delegate.isDefaultNamespace(root)) {\n\t\tNodeList nl = root.getChildNodes();\n\t\tfor (int i = 0; i < nl.getLength(); i++) {\n\t\t\tNode node = nl.item(i);\n\t\t\tif (node instanceof Element) {\n\t\t\t\tElement ele = (Element) node;\n\t\t\t\tif (delegate.isDefaultNamespace(ele)) {\n\t\t\t\t\t// 本方法的核心逻辑\n\t\t\t\t\tparseDefaultElement(ele, delegate);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tdelegate.parseCustomElement(ele);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\telse {\n\t\tdelegate.parseCustomElement(root);\n\t}\n}\n\n\n// 上述方法调用的parseDefaultElement(ele, delegate);的具体实现\n// 根据bean配置的不同，进入不同分支\nprivate void parseDefaultElement(Element ele, BeanDefinitionParserDelegate delegate) {\n\tif (delegate.nodeNameEquals(ele, IMPORT_ELEMENT)) {\n\t\timportBeanDefinitionResource(ele);\n\t}\n\telse if (delegate.nodeNameEquals(ele, ALIAS_ELEMENT)) {\n\t\tprocessAliasRegistration(ele);\n\t}\n\telse if (delegate.nodeNameEquals(ele, BEAN_ELEMENT)) {\n\t\t// 本文示例会进入该方法\n\t\tprocessBeanDefinition(ele, delegate);\n\t}\n\telse if (delegate.nodeNameEquals(ele, NESTED_BEANS_ELEMENT)) {\n\t\t// recurse\n\t\tdoRegisterBeanDefinitions(ele);\n\t}\n}\n\n// 上述方法最后进入processBeanDefinition(ele, delegate)后的处理过程：\nprotected void processBeanDefinition(Element ele, BeanDefinitionParserDelegate delegate) {\n\tBeanDefinitionHolder bdHolder = delegate.parseBeanDefinitionElement(ele);\n\tif (bdHolder != null) {\n\t\tbdHolder = delegate.decorateBeanDefinitionIfRequired(ele, bdHolder);\n\t\ttry {\n\t\t\t// Register the final decorated instance.\n\t\t\t// 注册Bean的关键代码\n\t\t\tBeanDefinitionReaderUtils.registerBeanDefinition(bdHolder, getReaderContext().getRegistry());\n\t\t}\n\t\tcatch (BeanDefinitionStoreException ex) {\n\t\t\tgetReaderContext().error(\"Failed to register bean definition with name '\" +\n\t\t\t\t\tbdHolder.getBeanName() + \"'\", ele, ex);\n\t\t}\n\t\t// Send registration event.\n\t\tgetReaderContext().fireComponentRegistered(new BeanComponentDefinition(bdHolder));\n\t}\n}\n```\n\n#### BeanDefinitionReaderUtils的registerBeanDefinition(bdHolder, getReaderContext().getRegistry())方法\n- 主要作用：\n- 代码位置：org.springframework.beans.factory.support.BeanDefinitionReaderUtils\n```java\npublic static void registerBeanDefinition(\n\t\tBeanDefinitionHolder definitionHolder, BeanDefinitionRegistry registry)\n\t\tthrows BeanDefinitionStoreException {\n\n\t// Register bean definition under primary name.\n\tString beanName = definitionHolder.getBeanName();\n\t// 将Bean的名字和BeanDefinition对象进行注册\n\t// registerBeanDefinition(beanName, definitionHolder.getBeanDefinition());方法定义在BeanDefinitionRegistry接口中：\n\t// 具体实现在中实现\n\tregistry.registerBeanDefinition(beanName, definitionHolder.getBeanDefinition());\n\n\t// Register aliases for bean name, if any.\n\tString[] aliases = definitionHolder.getAliases();\n\tif (aliases != null) {\n\t\tfor (String alias : aliases) {\n\t\t\tregistry.registerAlias(beanName, alias);\n\t\t}\n\t}\n}\n\n```\n\n#### DefaultListableBeanFactory中registerBeanDefinition(String beanName, BeanDefinition beanDefinition)\n- 作用：\n- DefaultListableBeanFactory的字段beanDefinitionMap是一个ConcurrentHashMap<String, BeanDefinition>，用于存储bean的定义信息\n- DefaultListableBeanFactory的字段beanDefinitionNames是一个ArrayList<String>类型数据，用于存储Bean的名称\n- 代码位置：org.springframework.beans.factory.support.DefaultListableBeanFactory\n-\n```java\n@Override\npublic void registerBeanDefinition(String beanName, BeanDefinition beanDefinition)\n\t\tthrows BeanDefinitionStoreException {\n\n\tAssert.hasText(beanName, \"Bean name must not be empty\");\n\tAssert.notNull(beanDefinition, \"BeanDefinition must not be null\");\n\n\tif (beanDefinition instanceof AbstractBeanDefinition) {\n\t\ttry {\n\t\t\t((AbstractBeanDefinition) beanDefinition).validate();\n\t\t}\n\t\tcatch (BeanDefinitionValidationException ex) {\n\t\t\tthrow new BeanDefinitionStoreException(beanDefinition.getResourceDescription(), beanName,\n\t\t\t\t\t\"Validation of bean definition failed\", ex);\n\t\t}\n\t}\n\n\tBeanDefinition existingDefinition = this.beanDefinitionMap.get(beanName);\n\t// 查找是否存在同名的bean\n\tif (existingDefinition != null) {\n\t\t// 有同名的bean存在时\n\t\tif (!isAllowBeanDefinitionOverriding()) {\n\t\t\tthrow new BeanDefinitionOverrideException(beanName, beanDefinition, existingDefinition);\n\t\t}\n\t\telse if (existingDefinition.getRole() < beanDefinition.getRole()) {\n\t\t\t// e.g. was ROLE_APPLICATION, now overriding with ROLE_SUPPORT or ROLE_INFRASTRUCTURE\n\t\t\tif (logger.isInfoEnabled()) {\n\t\t\t\tlogger.info(\"Overriding user-defined bean definition for bean '\" + beanName +\n\t\t\t\t\t\t\"' with a framework-generated bean definition: replacing [\" +\n\t\t\t\t\t\texistingDefinition + \"] with [\" + beanDefinition + \"]\");\n\t\t\t}\n\t\t}\n\t\telse if (!beanDefinition.equals(existingDefinition)) {\n\t\t\tif (logger.isDebugEnabled()) {\n\t\t\t\tlogger.debug(\"Overriding bean definition for bean '\" + beanName +\n\t\t\t\t\t\t\"' with a different definition: replacing [\" + existingDefinition +\n\t\t\t\t\t\t\"] with [\" + beanDefinition + \"]\");\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tif (logger.isTraceEnabled()) {\n\t\t\t\tlogger.trace(\"Overriding bean definition for bean '\" + beanName +\n\t\t\t\t\t\t\"' with an equivalent definition: replacing [\" + existingDefinition +\n\t\t\t\t\t\t\"] with [\" + beanDefinition + \"]\");\n\t\t\t}\n\t\t}\n\t\tthis.beanDefinitionMap.put(beanName, beanDefinition);\n\t}\n\telse {\n\t\t// 没有同名的bean存在时\n\t\tif (hasBeanCreationStarted()) {\n\t\t\t// Cannot modify startup-time collection elements anymore (for stable iteration)\n\t\t\tsynchronized (this.beanDefinitionMap) {\n\t\t\t\t// beanDefinitionMap存储beanName:BeanDefinition一一对应的K:V信息\n\t\t\t\t// beanName作为key， beanDefinition作为value存入DefaultListableBeanFactory对象的beanDefinitionMap字段中\n\t\t\t\t// 完成Bean的注册，将Bean注册到BeanFactory中\n\t\t\t\tthis.beanDefinitionMap.put(beanName, beanDefinition);\n\t\t\t\tList<String> updatedDefinitions = new ArrayList<>(this.beanDefinitionNames.size() + 1);\n\t\t\t\tupdatedDefinitions.addAll(this.beanDefinitionNames);\n\t\t\t\tupdatedDefinitions.add(beanName);\n\t\t\t\t// 将所有的beanName保存到beanDefinitionNames字段中，数据类型为\n\t\t\t\tthis.beanDefinitionNames = updatedDefinitions;\n\t\t\t\tremoveManualSingletonName(beanName);\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\t// Still in startup registration phase\n\t\t\tthis.beanDefinitionMap.put(beanName, beanDefinition);\n\t\t\tthis.beanDefinitionNames.add(beanName);\n\t\t\tremoveManualSingletonName(beanName);\n\t\t}\n\t\tthis.frozenBeanDefinitionNames = null;\n\t}\n\n\tif (existingDefinition != null || containsSingleton(beanName)) {\n\t\tresetBeanDefinition(beanName);\n\t}\n}\n\n\n```\n- 到此上面的 loadBeanDefinitions(XmlBeanDefinitionReader reader)方法基本执行完成\n- 上一级的loadBeanDefinitions(DefaultListableBeanFactory beanFactory)方法也执行到loadBeanDefinitions(XmlBeanDefinitionReader reader)方法后结束\n- 在上述创建BeanFactory的过程中，BeanDefination注册到BeanFactory（DefaultListableBeanFactory）中的类型为ConcurrentHashMap<String, BeanDefinition>，字段名beanDefinitionMap的为对象中\n- 向beanDefinitionMap中注册时beanName为key,beanDefination为value；\n- DefaultListableBeanFactory对象的字段beanDefinitionNames是一个ArrayList<String>类型数据，用于存储所有已经注册的Bean的名称\n- refreshBeanFactory()方法执行完成，接下来进入其下一行的getBeanFactory()方法\n\n### getBeanFactory()方法的一种实现\n- AbstractRefreshableApplicationContext中getBeanFactory()方法的一种实现\n- 获取BeanFactory\n```java\n@Override\npublic final ConfigurableListableBeanFactory getBeanFactory() {\n\tsynchronized (this.beanFactoryMonitor) {\n\t\tif (this.beanFactory == null) {\n\t\t   throw new IllegalStateException(\"BeanFactory not initialized or already closed - call 'refresh' before accessing beans via the ApplicationContext\");\n\t\t}\n\t\treturn this.beanFactory;\n\t}\n}\n```\n- getBeanFactory()方法执行完，标志上一级的方法obtainFreshBeanFactory()执行完成，接下来将进入AbstractApplicationContext抽象类中定义的refresh()模板方法中的第三步定义的prepareBeanFactory(beanFactory)方法\n\n\n\n# 6 prepareBeanFactory(beanFactory)方法\n- 代码位置: org.springframework.context.support.AbstractApplicationContext.java\n```java\nprotected void prepareBeanFactory(ConfigurableListableBeanFactory beanFactory) {\n\t\t// Tell the internal bean factory to use the context's class loader etc.\n\t\tbeanFactory.setBeanClassLoader(getClassLoader());\n\t\tbeanFactory.setBeanExpressionResolver(new StandardBeanExpressionResolver(beanFactory.getBeanClassLoader()));\n\t\tbeanFactory.addPropertyEditorRegistrar(new ResourceEditorRegistrar(this, getEnvironment()));\n\n\t\t// Configure the bean factory with context callbacks.\n\t\tbeanFactory.addBeanPostProcessor(new ApplicationContextAwareProcessor(this));\n\t\tbeanFactory.ignoreDependencyInterface(EnvironmentAware.class);\n\t\tbeanFactory.ignoreDependencyInterface(EmbeddedValueResolverAware.class);\n\t\tbeanFactory.ignoreDependencyInterface(ResourceLoaderAware.class);\n\t\tbeanFactory.ignoreDependencyInterface(ApplicationEventPublisherAware.class);\n\t\tbeanFactory.ignoreDependencyInterface(MessageSourceAware.class);\n\t\tbeanFactory.ignoreDependencyInterface(ApplicationContextAware.class);\n\n\t\t// BeanFactory interface not registered as resolvable type in a plain factory.\n\t\t// MessageSource registered (and found for autowiring) as a bean.\n\t\tbeanFactory.registerResolvableDependency(BeanFactory.class, beanFactory);\n\t\tbeanFactory.registerResolvableDependency(ResourceLoader.class, this);\n\t\tbeanFactory.registerResolvableDependency(ApplicationEventPublisher.class, this);\n\t\tbeanFactory.registerResolvableDependency(ApplicationContext.class, this);\n\n\t\t// Register early post-processor for detecting inner beans as ApplicationListeners.\n\t\tbeanFactory.addBeanPostProcessor(new ApplicationListenerDetector(this));\n\n\t\t// Detect a LoadTimeWeaver and prepare for weaving, if found.\n\t\tif (beanFactory.containsBean(LOAD_TIME_WEAVER_BEAN_NAME)) {\n\t\t\tbeanFactory.addBeanPostProcessor(new LoadTimeWeaverAwareProcessor(beanFactory));\n\t\t\t// Set a temporary ClassLoader for type matching.\n\t\t\tbeanFactory.setTempClassLoader(new ContextTypeMatchClassLoader(beanFactory.getBeanClassLoader()));\n\t\t}\n\n\t\t// Register default environment beans.\n\t\tif (!beanFactory.containsLocalBean(ENVIRONMENT_BEAN_NAME)) {\n\t\t\tbeanFactory.registerSingleton(ENVIRONMENT_BEAN_NAME, getEnvironment());\n\t\t}\n\t\tif (!beanFactory.containsLocalBean(SYSTEM_PROPERTIES_BEAN_NAME)) {\n\t\t\tbeanFactory.registerSingleton(SYSTEM_PROPERTIES_BEAN_NAME, getEnvironment().getSystemProperties());\n\t\t}\n\t\tif (!beanFactory.containsLocalBean(SYSTEM_ENVIRONMENT_BEAN_NAME)) {\n\t\t\tbeanFactory.registerSingleton(SYSTEM_ENVIRONMENT_BEAN_NAME, getEnvironment().getSystemEnvironment());\n\t\t}\n\t}\n\n```\n\n\n# 7\tpostProcessBeanFactory(ConfigurableListableBeanFactory beanFactory)\n- 代码位置:org.springframework.context.support.AbstractApplicationContext.java\n```java\nprotected void postProcessBeanFactory(ConfigurableListableBeanFactory beanFactory) {\n\t// 该方法是一个空方法，具体的实现依据具体的情况在其子类中继承或进行重写\n\t// 观察AbstractApplicationContext到FileSystemXmlApplicationContext(location)的继承路径，其子类中并未实现具体的逻辑;\n}\n\n```\n- postProcessBeanFactory(beanFactory)执行完后进入 invokeBeanFactoryPostProcessors(beanFactory)方法\n\n\n# 8. invokeBeanFactoryPostProcessors(beanFactory)方法\n```java\nprotected void invokeBeanFactoryPostProcessors(ConfigurableListableBeanFactory beanFactory) {\n\tPostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(beanFactory, getBeanFactoryPostProcessors());\n\n\t// Detect a LoadTimeWeaver and prepare for weaving, if found in the meantime\n\t// (e.g. through an @Bean method registered by ConfigurationClassPostProcessor)\n\tif (beanFactory.getTempClassLoader() == null && beanFactory.containsBean(LOAD_TIME_WEAVER_BEAN_NAME)) {\n\t\tbeanFactory.addBeanPostProcessor(new LoadTimeWeaverAwareProcessor(beanFactory));\n\t\tbeanFactory.setTempClassLoader(new ContextTypeMatchClassLoader(beanFactory.getBeanClassLoader()));\n\t}\n}\n\npublic List<BeanFactoryPostProcessor> getBeanFactoryPostProcessors() {\n\treturn this.beanFactoryPostProcessors;\n}\n\n```\n\n- PostProcessorRegistrationDelegate的invokeBeanFactoryPostProcessors(ConfigurableListableBeanFactory beanFactory, List<BeanFactoryPostProcessor> beanFactoryPostProcessors)静态方法\n```java\npublic static void invokeBeanFactoryPostProcessors(\n\t\tConfigurableListableBeanFactory beanFactory, List<BeanFactoryPostProcessor> beanFactoryPostProcessors) {\n\n\t// Invoke BeanDefinitionRegistryPostProcessors first, if any.\n\tSet<String> processedBeans = new HashSet<>();\n\n\tif (beanFactory instanceof BeanDefinitionRegistry) {\n\t\tBeanDefinitionRegistry registry = (BeanDefinitionRegistry) beanFactory;\n\t\tList<BeanFactoryPostProcessor> regularPostProcessors = new ArrayList<>();\n\t\tList<BeanDefinitionRegistryPostProcessor> registryProcessors = new ArrayList<>();\n\n\t\tfor (BeanFactoryPostProcessor postProcessor : beanFactoryPostProcessors) {\n\t\t\tif (postProcessor instanceof BeanDefinitionRegistryPostProcessor) {\n\t\t\t\tBeanDefinitionRegistryPostProcessor registryProcessor =\n\t\t\t\t\t\t(BeanDefinitionRegistryPostProcessor) postProcessor;\n\t\t\t\tregistryProcessor.postProcessBeanDefinitionRegistry(registry);\n\t\t\t\tregistryProcessors.add(registryProcessor);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tregularPostProcessors.add(postProcessor);\n\t\t\t}\n\t\t}\n\n\t\t// Do not initialize FactoryBeans here: We need to leave all regular beans\n\t\t// uninitialized to let the bean factory post-processors apply to them!\n\t\t// Separate between BeanDefinitionRegistryPostProcessors that implement\n\t\t// PriorityOrdered, Ordered, and the rest.\n\t\tList<BeanDefinitionRegistryPostProcessor> currentRegistryProcessors = new ArrayList<>();\n\n\t\t// First, invoke the BeanDefinitionRegistryPostProcessors that implement PriorityOrdered.\n\t\tString[] postProcessorNames =\n\t\t\t\tbeanFactory.getBeanNamesForType(BeanDefinitionRegistryPostProcessor.class, true, false);\n\t\tfor (String ppName : postProcessorNames) {\n\t\t\tif (beanFactory.isTypeMatch(ppName, PriorityOrdered.class)) {\n\t\t\t\tcurrentRegistryProcessors.add(beanFactory.getBean(ppName, BeanDefinitionRegistryPostProcessor.class));\n\t\t\t\tprocessedBeans.add(ppName);\n\t\t\t}\n\t\t}\n\t\tsortPostProcessors(currentRegistryProcessors, beanFactory);\n\t\tregistryProcessors.addAll(currentRegistryProcessors);\n\t\tinvokeBeanDefinitionRegistryPostProcessors(currentRegistryProcessors, registry);\n\t\tcurrentRegistryProcessors.clear();\n\n\t\t// Next, invoke the BeanDefinitionRegistryPostProcessors that implement Ordered.\n\t\tpostProcessorNames = beanFactory.getBeanNamesForType(BeanDefinitionRegistryPostProcessor.class, true, false);\n\t\tfor (String ppName : postProcessorNames) {\n\t\t\tif (!processedBeans.contains(ppName) && beanFactory.isTypeMatch(ppName, Ordered.class)) {\n\t\t\t\tcurrentRegistryProcessors.add(beanFactory.getBean(ppName, BeanDefinitionRegistryPostProcessor.class));\n\t\t\t\tprocessedBeans.add(ppName);\n\t\t\t}\n\t\t}\n\t\tsortPostProcessors(currentRegistryProcessors, beanFactory);\n\t\tregistryProcessors.addAll(currentRegistryProcessors);\n\t\tinvokeBeanDefinitionRegistryPostProcessors(currentRegistryProcessors, registry);\n\t\tcurrentRegistryProcessors.clear();\n\n\t\t// Finally, invoke all other BeanDefinitionRegistryPostProcessors until no further ones appear.\n\t\tboolean reiterate = true;\n\t\twhile (reiterate) {\n\t\t\treiterate = false;\n\t\t\tpostProcessorNames = beanFactory.getBeanNamesForType(BeanDefinitionRegistryPostProcessor.class, true, false);\n\t\t\tfor (String ppName : postProcessorNames) {\n\t\t\t\tif (!processedBeans.contains(ppName)) {\n\t\t\t\t\tcurrentRegistryProcessors.add(beanFactory.getBean(ppName, BeanDefinitionRegistryPostProcessor.class));\n\t\t\t\t\tprocessedBeans.add(ppName);\n\t\t\t\t\treiterate = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tsortPostProcessors(currentRegistryProcessors, beanFactory);\n\t\t\tregistryProcessors.addAll(currentRegistryProcessors);\n\t\t\tinvokeBeanDefinitionRegistryPostProcessors(currentRegistryProcessors, registry);\n\t\t\tcurrentRegistryProcessors.clear();\n\t\t}\n\n\t\t// Now, invoke the postProcessBeanFactory callback of all processors handled so far.\n\t\tinvokeBeanFactoryPostProcessors(registryProcessors, beanFactory);\n\t\tinvokeBeanFactoryPostProcessors(regularPostProcessors, beanFactory);\n\t}\n\n\telse {\n\t\t// Invoke factory processors registered with the context instance.\n\t\tinvokeBeanFactoryPostProcessors(beanFactoryPostProcessors, beanFactory);\n\t}\n\n\t// Do not initialize FactoryBeans here: We need to leave all regular beans\n\t// uninitialized to let the bean factory post-processors apply to them!\n\tString[] postProcessorNames =\n\t\t\tbeanFactory.getBeanNamesForType(BeanFactoryPostProcessor.class, true, false);\n\n\t// Separate between BeanFactoryPostProcessors that implement PriorityOrdered,\n\t// Ordered, and the rest.\n\tList<BeanFactoryPostProcessor> priorityOrderedPostProcessors = new ArrayList<>();\n\tList<String> orderedPostProcessorNames = new ArrayList<>();\n\tList<String> nonOrderedPostProcessorNames = new ArrayList<>();\n\tfor (String ppName : postProcessorNames) {\n\t\tif (processedBeans.contains(ppName)) {\n\t\t\t// skip - already processed in first phase above\n\t\t}\n\t\telse if (beanFactory.isTypeMatch(ppName, PriorityOrdered.class)) {\n\t\t\tpriorityOrderedPostProcessors.add(beanFactory.getBean(ppName, BeanFactoryPostProcessor.class));\n\t\t}\n\t\telse if (beanFactory.isTypeMatch(ppName, Ordered.class)) {\n\t\t\torderedPostProcessorNames.add(ppName);\n\t\t}\n\t\telse {\n\t\t\tnonOrderedPostProcessorNames.add(ppName);\n\t\t}\n\t}\n\n\t// First, invoke the BeanFactoryPostProcessors that implement PriorityOrdered.\n\tsortPostProcessors(priorityOrderedPostProcessors, beanFactory);\n\tinvokeBeanFactoryPostProcessors(priorityOrderedPostProcessors, beanFactory);\n\n\t// Next, invoke the BeanFactoryPostProcessors that implement Ordered.\n\tList<BeanFactoryPostProcessor> orderedPostProcessors = new ArrayList<>(orderedPostProcessorNames.size());\n\tfor (String postProcessorName : orderedPostProcessorNames) {\n\t\torderedPostProcessors.add(beanFactory.getBean(postProcessorName, BeanFactoryPostProcessor.class));\n\t}\n\tsortPostProcessors(orderedPostProcessors, beanFactory);\n\tinvokeBeanFactoryPostProcessors(orderedPostProcessors, beanFactory);\n\n\t// Finally, invoke all other BeanFactoryPostProcessors.\n\tList<BeanFactoryPostProcessor> nonOrderedPostProcessors = new ArrayList<>(nonOrderedPostProcessorNames.size());\n\tfor (String postProcessorName : nonOrderedPostProcessorNames) {\n\t\tnonOrderedPostProcessors.add(beanFactory.getBean(postProcessorName, BeanFactoryPostProcessor.class));\n\t}\n\tinvokeBeanFactoryPostProcessors(nonOrderedPostProcessors, beanFactory);\n\n\t// Clear cached merged bean definitions since the post-processors might have\n\t// modified the original metadata, e.g. replacing placeholders in values...\n\tbeanFactory.clearMetadataCache();\n}\n\n// 上面的方法内部有调用该重载方法\nprivate static void invokeBeanDefinitionRegistryPostProcessors(\n\t\tCollection<? extends BeanDefinitionRegistryPostProcessor> postProcessors, BeanDefinitionRegistry registry) {\n\n\tfor (BeanDefinitionRegistryPostProcessor postProcessor : postProcessors) {\n\t\tpostProcessor.postProcessBeanDefinitionRegistry(registry);\n\t}\n}\n\n// 上面的方法内部有调用该方法\nprivate static void sortPostProcessors(List<?> postProcessors, ConfigurableListableBeanFactory beanFactory) {\n\tComparator<Object> comparatorToUse = null;\n\tif (beanFactory instanceof DefaultListableBeanFactory) {\n\t\tcomparatorToUse = ((DefaultListableBeanFactory) beanFactory).getDependencyComparator();\n\t}\n\tif (comparatorToUse == null) {\n\t\tcomparatorToUse = OrderComparator.INSTANCE;\n\t}\n\tpostProcessors.sort(comparatorToUse);\n}\n```\n\n\n# 9. registerBeanPostProcessors(beanFactory);方法\n```java\nprotected void registerBeanPostProcessors(ConfigurableListableBeanFactory beanFactory) {\n\tPostProcessorRegistrationDelegate.registerBeanPostProcessors(beanFactory, this);\n}\n\n```\n- PostProcessorRegistrationDelegate的registerBeanPostProcessors(ConfigurableListableBeanFactory beanFactory, AbstractApplicationContext applicationContexs)静态方法，具体代码如下：\n```java\npublic static void registerBeanPostProcessors(\n\t\tConfigurableListableBeanFactory beanFactory, AbstractApplicationContext applicationContext) {\n\n\tString[] postProcessorNames = beanFactory.getBeanNamesForType(BeanPostProcessor.class, true, false);\n\n\t// Register BeanPostProcessorChecker that logs an info message when\n\t// a bean is created during BeanPostProcessor instantiation, i.e. when\n\t// a bean is not eligible for getting processed by all BeanPostProcessors.\n\tint beanProcessorTargetCount = beanFactory.getBeanPostProcessorCount() + 1 + postProcessorNames.length;\n\tbeanFactory.addBeanPostProcessor(new BeanPostProcessorChecker(beanFactory, beanProcessorTargetCount));\n\n\t// Separate between BeanPostProcessors that implement PriorityOrdered,\n\t// Ordered, and the rest.\n\tList<BeanPostProcessor> priorityOrderedPostProcessors = new ArrayList<>();\n\tList<BeanPostProcessor> internalPostProcessors = new ArrayList<>();\n\tList<String> orderedPostProcessorNames = new ArrayList<>();\n\tList<String> nonOrderedPostProcessorNames = new ArrayList<>();\n\tfor (String ppName : postProcessorNames) {\n\t\tif (beanFactory.isTypeMatch(ppName, PriorityOrdered.class)) {\n\t\t\tBeanPostProcessor pp = beanFactory.getBean(ppName, BeanPostProcessor.class);\n\t\t\tpriorityOrderedPostProcessors.add(pp);\n\t\t\tif (pp instanceof MergedBeanDefinitionPostProcessor) {\n\t\t\t\tinternalPostProcessors.add(pp);\n\t\t\t}\n\t\t}\n\t\telse if (beanFactory.isTypeMatch(ppName, Ordered.class)) {\n\t\t\torderedPostProcessorNames.add(ppName);\n\t\t}\n\t\telse {\n\t\t\tnonOrderedPostProcessorNames.add(ppName);\n\t\t}\n\t}\n\n\t// First, register the BeanPostProcessors that implement PriorityOrdered.\n\tsortPostProcessors(priorityOrderedPostProcessors, beanFactory);\n\tregisterBeanPostProcessors(beanFactory, priorityOrderedPostProcessors);\n\n\t// Next, register the BeanPostProcessors that implement Ordered.\n\tList<BeanPostProcessor> orderedPostProcessors = new ArrayList<>(orderedPostProcessorNames.size());\n\tfor (String ppName : orderedPostProcessorNames) {\n\t\tBeanPostProcessor pp = beanFactory.getBean(ppName, BeanPostProcessor.class);\n\t\torderedPostProcessors.add(pp);\n\t\tif (pp instanceof MergedBeanDefinitionPostProcessor) {\n\t\t\tinternalPostProcessors.add(pp);\n\t\t}\n\t}\n\tsortPostProcessors(orderedPostProcessors, beanFactory);\n\tregisterBeanPostProcessors(beanFactory, orderedPostProcessors);\n\n\t// Now, register all regular BeanPostProcessors.\n\tList<BeanPostProcessor> nonOrderedPostProcessors = new ArrayList<>(nonOrderedPostProcessorNames.size());\n\tfor (String ppName : nonOrderedPostProcessorNames) {\n\t\tBeanPostProcessor pp = beanFactory.getBean(ppName, BeanPostProcessor.class);\n\t\tnonOrderedPostProcessors.add(pp);\n\t\tif (pp instanceof MergedBeanDefinitionPostProcessor) {\n\t\t\tinternalPostProcessors.add(pp);\n\t\t}\n\t}\n\tregisterBeanPostProcessors(beanFactory, nonOrderedPostProcessors);\n\n\t// Finally, re-register all internal BeanPostProcessors.\n\tsortPostProcessors(internalPostProcessors, beanFactory);\n\tregisterBeanPostProcessors(beanFactory, internalPostProcessors);\n\n\t// Re-register post-processor for detecting inner beans as ApplicationListeners,\n\t// moving it to the end of the processor chain (for picking up proxies etc).\n\tbeanFactory.addBeanPostProcessor(new ApplicationListenerDetector(applicationContext));\n}\n\n\n//上面的方法内部有调用该重载方法\nprivate static void registerBeanPostProcessors(\n\t\tConfigurableListableBeanFactory beanFactory, List<BeanPostProcessor> postProcessors) {\n\n\tfor (BeanPostProcessor postProcessor : postProcessors) {\n\t\tbeanFactory.addBeanPostProcessor(postProcessor);\n\t}\n}\n```\n\n# 10. initMessageSource();方法\n- org.springframework.context.support.AbstractApplicationContext中的initMessageSource()方法\n```java\nprotected void initMessageSource() {\n\tConfigurableListableBeanFactory beanFactory = getBeanFactory();\n\tif (beanFactory.containsLocalBean(MESSAGE_SOURCE_BEAN_NAME)) {\n\t\tthis.messageSource = beanFactory.getBean(MESSAGE_SOURCE_BEAN_NAME, MessageSource.class);\n\t\t// Make MessageSource aware of parent MessageSource.\n\t\tif (this.parent != null && this.messageSource instanceof HierarchicalMessageSource) {\n\t\t\tHierarchicalMessageSource hms = (HierarchicalMessageSource) this.messageSource;\n\t\t\tif (hms.getParentMessageSource() == null) {\n\t\t\t\t// Only set parent context as parent MessageSource if no parent MessageSource\n\t\t\t\t// registered already.\n\t\t\t\thms.setParentMessageSource(getInternalParentMessageSource());\n\t\t\t}\n\t\t}\n\t\tif (logger.isTraceEnabled()) {\n\t\t\tlogger.trace(\"Using MessageSource [\" + this.messageSource + \"]\");\n\t\t}\n\t}\n\telse {\n\t\t// Use empty MessageSource to be able to accept getMessage calls.\n\t\tDelegatingMessageSource dms = new DelegatingMessageSource();\n\t\tdms.setParentMessageSource(getInternalParentMessageSource());\n\t\tthis.messageSource = dms;\n\t\tbeanFactory.registerSingleton(MESSAGE_SOURCE_BEAN_NAME, this.messageSource);\n\t\tif (logger.isTraceEnabled()) {\n\t\t\tlogger.trace(\"No '\" + MESSAGE_SOURCE_BEAN_NAME + \"' bean, using [\" + this.messageSource + \"]\");\n\t\t}\n\t}\n}\n```\n\n# 11. initApplicationEventMulticaster();方法\n- org.springframework.context.support.AbstractApplicationContext中的initApplicationEventMulticaster()方法\n```java\nprotected void initApplicationEventMulticaster() {\n\tConfigurableListableBeanFactory beanFactory = getBeanFactory();\n\tif (beanFactory.containsLocalBean(APPLICATION_EVENT_MULTICASTER_BEAN_NAME)) {\n\t\tthis.applicationEventMulticaster =\n\t\t\t\tbeanFactory.getBean(APPLICATION_EVENT_MULTICASTER_BEAN_NAME, ApplicationEventMulticaster.class);\n\t\tif (logger.isTraceEnabled()) {\n\t\t\tlogger.trace(\"Using ApplicationEventMulticaster [\" + this.applicationEventMulticaster + \"]\");\n\t\t}\n\t}\n\telse {\n\t\tthis.applicationEventMulticaster = new SimpleApplicationEventMulticaster(beanFactory);\n\t\tbeanFactory.registerSingleton(APPLICATION_EVENT_MULTICASTER_BEAN_NAME, this.applicationEventMulticaster);\n\t\tif (logger.isTraceEnabled()) {\n\t\t\tlogger.trace(\"No '\" + APPLICATION_EVENT_MULTICASTER_BEAN_NAME + \"' bean, using \" +\n\t\t\t\t\t\"[\" + this.applicationEventMulticaster.getClass().getSimpleName() + \"]\");\n\t\t}\n\t}\n}\n```\n\n# 12. onRefresh();方法\n- org.springframework.context.support.AbstractApplicationContext中的onRefresh()方法\n```java\nprotected void onRefresh() throws BeansException {\n\t// 该方法是一个空方法，具体的实现依据具体的情况在其子类中继承或进行重写\n\t// For subclasses: do nothing by default.\n}\n\n```\n\n\n# 13. registerListeners();方法\n- org.springframework.context.support.AbstractApplicationContext中的registerListeners()方法\n```java\n\tprotected void registerListeners() {\n\t\t// Register statically specified listeners first.\n\t\tfor (ApplicationListener<?> listener : getApplicationListeners()) {\n\t\t\tgetApplicationEventMulticaster().addApplicationListener(listener);\n\t\t}\n\n\t\t// Do not initialize FactoryBeans here: We need to leave all regular beans\n\t\t// uninitialized to let post-processors apply to them!\n\t\tString[] listenerBeanNames = getBeanNamesForType(ApplicationListener.class, true, false);\n\t\tfor (String listenerBeanName : listenerBeanNames) {\n\t\t\tgetApplicationEventMulticaster().addApplicationListenerBean(listenerBeanName);\n\t\t}\n\n\t\t// Publish early application events now that we finally have a multicaster...\n\t\tSet<ApplicationEvent> earlyEventsToProcess = this.earlyApplicationEvents;\n\t\tthis.earlyApplicationEvents = null;\n\t\tif (earlyEventsToProcess != null) {\n\t\t\tfor (ApplicationEvent earlyEvent : earlyEventsToProcess) {\n\t\t\t\tgetApplicationEventMulticaster().multicastEvent(earlyEvent);\n\t\t\t}\n\t\t}\n\t}\n\n```\n\n# 14. finishBeanFactoryInitialization(beanFactory);方法\n- org.springframework.context.support.AbstractApplicationContext中的finishBeanFactoryInitialization(beanFactory)方法\n- 实例化Bean的核心方法\n```java\nprotected void finishBeanFactoryInitialization(ConfigurableListableBeanFactory beanFactory) {\n\t// Initialize conversion service for this context.\n\tif (beanFactory.containsBean(CONVERSION_SERVICE_BEAN_NAME) &&\n\t\t\tbeanFactory.isTypeMatch(CONVERSION_SERVICE_BEAN_NAME, ConversionService.class)) {\n\t\tbeanFactory.setConversionService(\n\t\t\t\tbeanFactory.getBean(CONVERSION_SERVICE_BEAN_NAME, ConversionService.class));\n\t}\n\n\t// Register a default embedded value resolver if no bean post-processor\n\t// (such as a PropertyPlaceholderConfigurer bean) registered any before:\n\t// at this point, primarily for resolution in annotation attribute values.\n\tif (!beanFactory.hasEmbeddedValueResolver()) {\n\t\tbeanFactory.addEmbeddedValueResolver(strVal -> getEnvironment().resolvePlaceholders(strVal));\n\t}\n\n\t// Initialize LoadTimeWeaverAware beans early to allow for registering their transformers early.\n\tString[] weaverAwareNames = beanFactory.getBeanNamesForType(LoadTimeWeaverAware.class, false, false);\n\tfor (String weaverAwareName : weaverAwareNames) {\n\t\tgetBean(weaverAwareName);\n\t}\n\n\t// Stop using the temporary ClassLoader for type matching.\n\tbeanFactory.setTempClassLoader(null);\n\n\t// Allow for caching all bean definition metadata, not expecting further changes.\n\tbeanFactory.freezeConfiguration();\n\n\t// Instantiate all remaining (non-lazy-init) singletons.\n\t// 实例化bean的核心代码\n\tbeanFactory.preInstantiateSingletons(); \n\t// 上一行的preInstantiateSingletons()方法定义在ConfigurableListableBeanFactory接口中，\n\t// 具体实现是在DefaultListableBeanFactory中preInstantiateSingletons()方法\n}\n\n```\n\n#### DefaultListableBeanFactory中preInstantiateSingletons()方法\n```java\n@Override\npublic void preInstantiateSingletons() throws BeansException {\n\tif (logger.isTraceEnabled()) {\n\t\tlogger.trace(\"Pre-instantiating singletons in \" + this);\n\t}\n\n\t// Iterate over a copy to allow for init methods which in turn register new bean definitions.\n\t// While this may not be part of the regular factory bootstrap, it does otherwise work fine.\n\tList<String> beanNames = new ArrayList<>(this.beanDefinitionNames);\n\n\t// Trigger initialization of all non-lazy singleton beans...\n\t// 遍历beanDefinitionNames这个ArrayList对象中的beanName，\n\tfor (String beanName : beanNames) {\n\t\tRootBeanDefinition bd = getMergedLocalBeanDefinition(beanName);\n\t\tif (!bd.isAbstract() && bd.isSingleton() && !bd.isLazyInit()) {\n\t\t\tif (isFactoryBean(beanName)) {\n\t\t\t\tObject bean = getBean(FACTORY_BEAN_PREFIX + beanName);\n\t\t\t\tif (bean instanceof FactoryBean) {\n\t\t\t\t\tfinal FactoryBean<?> factory = (FactoryBean<?>) bean;\n\t\t\t\t\tboolean isEagerInit;\n\t\t\t\t\tif (System.getSecurityManager() != null && factory instanceof SmartFactoryBean) {\n\t\t\t\t\t\tisEagerInit = AccessController.doPrivileged((PrivilegedAction<Boolean>)\n\t\t\t\t\t\t\t\t\t\t((SmartFactoryBean<?>) factory)::isEagerInit,\n\t\t\t\t\t\t\t\tgetAccessControlContext());\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tisEagerInit = (factory instanceof SmartFactoryBean &&\n\t\t\t\t\t\t\t\t((SmartFactoryBean<?>) factory).isEagerInit());\n\t\t\t\t\t}\n\t\t\t\t\tif (isEagerInit) {\n\t\t\t\t\t\t// 创建bean并递归构建Bean之间的依赖关系\n\t\t\t\t\t\tgetBean(beanName);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// 创建bean并递归构建Bean之间的依赖关系\n\t\t\t\tgetBean(beanName);\n\t\t\t}\n\t\t}\n\t}\n\n\t// Trigger post-initialization callback for all applicable beans...\n\tfor (String beanName : beanNames) {\n\t\tObject singletonInstance = getSingleton(beanName);\n\t\tif (singletonInstance instanceof SmartInitializingSingleton) {\n\t\t\tfinal SmartInitializingSingleton smartSingleton = (SmartInitializingSingleton) singletonInstance;\n\t\t\tif (System.getSecurityManager() != null) {\n\t\t\t\tAccessController.doPrivileged((PrivilegedAction<Object>) () -> {\n\t\t\t\t\tsmartSingleton.afterSingletonsInstantiated();\n\t\t\t\t\treturn null;\n\t\t\t\t}, getAccessControlContext());\n\t\t\t}\n\t\t\telse {\n\t\t\t\tsmartSingleton.afterSingletonsInstantiated();\n\t\t\t}\n\t\t}\n\t}\n}\n\n\n```\n\n### preInstantiateSingletons()方法中调用的getBean方法\n- getBean方法定义在BeanFactory接口中\n- getBean方法org.springframework.beans.factory.support.AbstractBeanFactory中实现\n```java\n@Override\npublic Object getBean(String name) throws BeansException {\n\treturn doGetBean(name, null, null, false);\n}\n\n\n\n//下面是上面方法调用doGetBean(name, null, null, false)方法\n// 这个方法特别长，以下是完整代码：\n@SuppressWarnings(\"unchecked\")\nprotected <T> T doGetBean(final String name, @Nullable final Class<T> requiredType,\n\t\t@Nullable final Object[] args, boolean typeCheckOnly) throws BeansException {\n\n\tfinal String beanName = transformedBeanName(name);\n\tObject bean;\n\n\t// Eagerly check singleton cache for manually registered singletons.\n\tObject sharedInstance = getSingleton(beanName);\n\tif (sharedInstance != null && args == null) {\n\t\tif (logger.isTraceEnabled()) {\n\t\t\tif (isSingletonCurrentlyInCreation(beanName)) {\n\t\t\t\tlogger.trace(\"Returning eagerly cached instance of singleton bean '\" + beanName +\n\t\t\t\t\t\t\"' that is not fully initialized yet - a consequence of a circular reference\");\n\t\t\t}\n\t\t\telse {\n\t\t\t\tlogger.trace(\"Returning cached instance of singleton bean '\" + beanName + \"'\");\n\t\t\t}\n\t\t}\n\t\tbean = getObjectForBeanInstance(sharedInstance, name, beanName, null);\n\t}\n\n\telse {\n\t\t// Fail if we're already creating this bean instance:\n\t\t// We're assumably within a circular reference.\n\t\tif (isPrototypeCurrentlyInCreation(beanName)) {\n\t\t\tthrow new BeanCurrentlyInCreationException(beanName);\n\t\t}\n\n\t\t// Check if bean definition exists in this factory.\n\t\tBeanFactory parentBeanFactory = getParentBeanFactory();\n\t\tif (parentBeanFactory != null && !containsBeanDefinition(beanName)) {\n\t\t\t// Not found -> check parent.\n\t\t\tString nameToLookup = originalBeanName(name);\n\t\t\tif (parentBeanFactory instanceof AbstractBeanFactory) {\n\t\t\t\treturn ((AbstractBeanFactory) parentBeanFactory).doGetBean(\n\t\t\t\t\t\tnameToLookup, requiredType, args, typeCheckOnly);\n\t\t\t}\n\t\t\telse if (args != null) {\n\t\t\t\t// Delegation to parent with explicit args.\n\t\t\t\treturn (T) parentBeanFactory.getBean(nameToLookup, args);\n\t\t\t}\n\t\t\telse if (requiredType != null) {\n\t\t\t\t// No args -> delegate to standard getBean method.\n\t\t\t\treturn parentBeanFactory.getBean(nameToLookup, requiredType);\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn (T) parentBeanFactory.getBean(nameToLookup);\n\t\t\t}\n\t\t}\n\n\t\tif (!typeCheckOnly) {\n\t\t\tmarkBeanAsCreated(beanName);\n\t\t}\n\n\t\ttry {\n\t\t\tfinal RootBeanDefinition mbd = getMergedLocalBeanDefinition(beanName);\n\t\t\tcheckMergedBeanDefinition(mbd, beanName, args);\n\n\t\t\t// Guarantee initialization of beans that the current bean depends on.\n\t\t\t// 获取当前bean的依赖关系\n\t\t\tString[] dependsOn = mbd.getDependsOn();\n\t\t\t// 根据依赖的beanName递归调用getBean()方法，不断探寻其依赖的bean，直到getSingleton方法返回依赖的Bean，即当前正在创建的Bean\n\t\t\t// 直到依赖关系最底层的bean没有依赖对象了，至此整个递归过程结束  \n\t\t\tif (dependsOn != null) {\n\t\t\t\tfor (String dep : dependsOn) {\n\t\t\t\t\tif (isDependent(beanName, dep)) {\n\t\t\t\t\t\tthrow new BeanCreationException(mbd.getResourceDescription(), beanName,\n\t\t\t\t\t\t\t\t\"Circular depends-on relationship between '\" + beanName + \"' and '\" + dep + \"'\");\n\t\t\t\t\t}\n\t\t\t\t\t// \n\t\t\t\t\tregisterDependentBean(dep, beanName);\n\t\t\t\t\ttry {\n\t\t\t\t\t\tgetBean(dep);\n\t\t\t\t\t}\n\t\t\t\t\tcatch (NoSuchBeanDefinitionException ex) {\n\t\t\t\t\t\tthrow new BeanCreationException(mbd.getResourceDescription(), beanName,\n\t\t\t\t\t\t\t\t\"'\" + beanName + \"' depends on missing bean '\" + dep + \"'\", ex);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Create bean instance.\n\t\t\tif (mbd.isSingleton()) {\n\t\t\t\t// getSingleton方法的参数是createBean(beanName, mbd, args)方法的返回值\n\t\t\t\tsharedInstance = getSingleton(beanName, () -> {\n\t\t\t\t\ttry {\n\t\t\t\t\t\t// createBean方法在AbstractBeanFactory抽象类中定义，具体实现是在AbstractAutowireCapableBeanFactory抽象类中\n\t\t\t\t\t\treturn createBean(beanName, mbd, args);\n\t\t\t\t\t}\n\t\t\t\t\tcatch (BeansException ex) {\n\t\t\t\t\t\t// Explicitly remove instance from singleton cache: It might have been put there\n\t\t\t\t\t\t// eagerly by the creation process, to allow for circular reference resolution.\n\t\t\t\t\t\t// Also remove any beans that received a temporary reference to the bean.\n\t\t\t\t\t\tdestroySingleton(beanName);\n\t\t\t\t\t\tthrow ex;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tbean = getObjectForBeanInstance(sharedInstance, name, beanName, mbd);\n\t\t\t}\n\n\t\t\telse if (mbd.isPrototype()) {\n\t\t\t\t// It's a prototype -> create a new instance.\n\t\t\t\tObject prototypeInstance = null;\n\t\t\t\ttry {\n\t\t\t\t\tbeforePrototypeCreation(beanName);\n\t\t\t\t\tprototypeInstance = createBean(beanName, mbd, args);\n\t\t\t\t}\n\t\t\t\tfinally {\n\t\t\t\t\tafterPrototypeCreation(beanName);\n\t\t\t\t}\n\t\t\t\tbean = getObjectForBeanInstance(prototypeInstance, name, beanName, mbd);\n\t\t\t}\n\n\t\t\telse {\n\t\t\t\tString scopeName = mbd.getScope();\n\t\t\t\tfinal Scope scope = this.scopes.get(scopeName);\n\t\t\t\tif (scope == null) {\n\t\t\t\t\tthrow new IllegalStateException(\"No Scope registered for scope name '\" + scopeName + \"'\");\n\t\t\t\t}\n\t\t\t\ttry {\n\t\t\t\t\tObject scopedInstance = scope.get(beanName, () -> {\n\t\t\t\t\t\tbeforePrototypeCreation(beanName);\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\treturn createBean(beanName, mbd, args);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfinally {\n\t\t\t\t\t\t\tafterPrototypeCreation(beanName);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tbean = getObjectForBeanInstance(scopedInstance, name, beanName, mbd);\n\t\t\t\t}\n\t\t\t\tcatch (IllegalStateException ex) {\n\t\t\t\t\tthrow new BeanCreationException(beanName,\n\t\t\t\t\t\t\t\"Scope '\" + scopeName + \"' is not active for the current thread; consider \" +\n\t\t\t\t\t\t\t\"defining a scoped proxy for this bean if you intend to refer to it from a singleton\",\n\t\t\t\t\t\t\tex);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcatch (BeansException ex) {\n\t\t\tcleanupAfterBeanCreationFailure(beanName);\n\t\t\tthrow ex;\n\t\t}\n\t}\n\n\t// Check if required type matches the type of the actual bean instance.\n\tif (requiredType != null && !requiredType.isInstance(bean)) {\n\t\ttry {\n\t\t\tT convertedBean = getTypeConverter().convertIfNecessary(bean, requiredType);\n\t\t\tif (convertedBean == null) {\n\t\t\t\tthrow new BeanNotOfRequiredTypeException(name, requiredType, bean.getClass());\n\t\t\t}\n\t\t\treturn convertedBean;\n\t\t}\n\t\tcatch (TypeMismatchException ex) {\n\t\t\tif (logger.isTraceEnabled()) {\n\t\t\t\tlogger.trace(\"Failed to convert bean '\" + name + \"' to required type '\" +\n\t\t\t\t\t\tClassUtils.getQualifiedName(requiredType) + \"'\", ex);\n\t\t\t}\n\t\t\tthrow new BeanNotOfRequiredTypeException(name, requiredType, bean.getClass());\n\t\t}\n\t}\n\treturn (T) bean;\n}\n\n\n```\n\n#### AbstractAutowireCapableBeanFactory类中的createBean(String beanName, RootBeanDefinition mbd, @Nullable Object[] args)方法\n\n- 代码位置：org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory\n```java\n@Override\nprotected Object createBean(String beanName, RootBeanDefinition mbd, @Nullable Object[] args)\n\t\tthrows BeanCreationException {\n\n\tif (logger.isTraceEnabled()) {\n\t\tlogger.trace(\"Creating instance of bean '\" + beanName + \"'\");\n\t}\n\tRootBeanDefinition mbdToUse = mbd;\n\n\t// Make sure bean class is actually resolved at this point, and\n\t// clone the bean definition in case of a dynamically resolved Class\n\t// which cannot be stored in the shared merged bean definition.\n\tClass<?> resolvedClass = resolveBeanClass(mbd, beanName);\n\tif (resolvedClass != null && !mbd.hasBeanClass() && mbd.getBeanClassName() != null) {\n\t\tmbdToUse = new RootBeanDefinition(mbd);\n\t\tmbdToUse.setBeanClass(resolvedClass);\n\t}\n\n\t// Prepare method overrides.\n\ttry {\n\t\tmbdToUse.prepareMethodOverrides();\n\t}\n\tcatch (BeanDefinitionValidationException ex) {\n\t\tthrow new BeanDefinitionStoreException(mbdToUse.getResourceDescription(),\n\t\t\t\tbeanName, \"Validation of method overrides failed\", ex);\n\t}\n\n\ttry {\n\t\t// Give BeanPostProcessors a chance to return a proxy instead of the target bean instance.\n\t\tObject bean = resolveBeforeInstantiation(beanName, mbdToUse);\n\t\tif (bean != null) {\n\t\t\treturn bean;\n\t\t}\n\t}\n\tcatch (Throwable ex) {\n\t\tthrow new BeanCreationException(mbdToUse.getResourceDescription(), beanName,\n\t\t\t\t\"BeanPostProcessor before instantiation of bean failed\", ex);\n\t}\n\n\ttry {\n\t\t// createBean方法的核心  该方法会返回Bean对象的实例，具体代码在下面贴出\n\t\tObject beanInstance = doCreateBean(beanName, mbdToUse, args);\n\t\tif (logger.isTraceEnabled()) {\n\t\t\tlogger.trace(\"Finished creating instance of bean '\" + beanName + \"'\");\n\t\t}\n\t\treturn beanInstance;\n\t}\n\tcatch (BeanCreationException | ImplicitlyAppearedSingletonException ex) {\n\t\t// A previously detected exception with proper bean creation context already,\n\t\t// or illegal singleton state to be communicated up to DefaultSingletonBeanRegistry.\n\t\tthrow ex;\n\t}\n\tcatch (Throwable ex) {\n\t\tthrow new BeanCreationException(\n\t\t\t\tmbdToUse.getResourceDescription(), beanName, \"Unexpected exception during bean creation\", ex);\n\t}\n}\n\n\n\n// 在AbstractAutowireCapableBeanFactory抽象类的createBean方法中调用的doCreateBean(beanName, mbdToUse, args)方法\nprotected Object doCreateBean(final String beanName, final RootBeanDefinition mbd, final @Nullable Object[] args)\n\t\tthrows BeanCreationException {\n\n\t// Instantiate the bean.\n\tBeanWrapper instanceWrapper = null;\n\tif (mbd.isSingleton()) {\n\t\tinstanceWrapper = this.factoryBeanInstanceCache.remove(beanName);\n\t}\n\tif (instanceWrapper == null) {\n\t\t// 创建Bean实例\n\t\tinstanceWrapper = createBeanInstance(beanName, mbd, args);\n\t}\n\tfinal Object bean = instanceWrapper.getWrappedInstance();\n\tClass<?> beanType = instanceWrapper.getWrappedClass();\n\tif (beanType != NullBean.class) {\n\t\tmbd.resolvedTargetType = beanType;\n\t}\n\n\t// Allow post-processors to modify the merged bean definition.\n\tsynchronized (mbd.postProcessingLock) {\n\t\tif (!mbd.postProcessed) {\n\t\t\ttry {\n\t\t\t\tapplyMergedBeanDefinitionPostProcessors(mbd, beanType, beanName);\n\t\t\t}\n\t\t\tcatch (Throwable ex) {\n\t\t\t\tthrow new BeanCreationException(mbd.getResourceDescription(), beanName,\n\t\t\t\t\t\t\"Post-processing of merged bean definition failed\", ex);\n\t\t\t}\n\t\t\tmbd.postProcessed = true;\n\t\t}\n\t}\n\n\t// Eagerly cache singletons to be able to resolve circular references\n\t// even when triggered by lifecycle interfaces like BeanFactoryAware.\n\tboolean earlySingletonExposure = (mbd.isSingleton() && this.allowCircularReferences &&\n\t\t\tisSingletonCurrentlyInCreation(beanName));\n\tif (earlySingletonExposure) {\n\t\tif (logger.isTraceEnabled()) {\n\t\t\tlogger.trace(\"Eagerly caching bean '\" + beanName +\n\t\t\t\t\t\"' to allow for resolving potential circular references\");\n\t\t}\n\t\taddSingletonFactory(beanName, () -> getEarlyBeanReference(beanName, mbd, bean));\n\t}\n\n\t// Initialize the bean instance.\n\tObject exposedObject = bean;\n\ttry {\n\t\t// 填充bean，实际进行依赖注入的地方\n\t\tpopulateBean(beanName, mbd, instanceWrapper);\n\t\texposedObject = initializeBean(beanName, exposedObject, mbd);\n\t}\n\tcatch (Throwable ex) {\n\t\tif (ex instanceof BeanCreationException && beanName.equals(((BeanCreationException) ex).getBeanName())) {\n\t\t\tthrow (BeanCreationException) ex;\n\t\t}\n\t\telse {\n\t\t\tthrow new BeanCreationException(\n\t\t\t\t\tmbd.getResourceDescription(), beanName, \"Initialization of bean failed\", ex);\n\t\t}\n\t}\n\n\tif (earlySingletonExposure) {\n\t\tObject earlySingletonReference = getSingleton(beanName, false);\n\t\tif (earlySingletonReference != null) {\n\t\t\tif (exposedObject == bean) {\n\t\t\t\texposedObject = earlySingletonReference;\n\t\t\t}\n\t\t\telse if (!this.allowRawInjectionDespiteWrapping && hasDependentBean(beanName)) {\n\t\t\t\tString[] dependentBeans = getDependentBeans(beanName);\n\t\t\t\tSet<String> actualDependentBeans = new LinkedHashSet<>(dependentBeans.length);\n\t\t\t\tfor (String dependentBean : dependentBeans) {\n\t\t\t\t\tif (!removeSingletonIfCreatedForTypeCheckOnly(dependentBean)) {\n\t\t\t\t\t\tactualDependentBeans.add(dependentBean);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (!actualDependentBeans.isEmpty()) {\n\t\t\t\t\tthrow new BeanCurrentlyInCreationException(beanName,\n\t\t\t\t\t\t\t\"Bean with name '\" + beanName + \"' has been injected into other beans [\" +\n\t\t\t\t\t\t\tStringUtils.collectionToCommaDelimitedString(actualDependentBeans) +\n\t\t\t\t\t\t\t\"] in its raw version as part of a circular reference, but has eventually been \" +\n\t\t\t\t\t\t\t\"wrapped. This means that said other beans do not use the final version of the \" +\n\t\t\t\t\t\t\t\"bean. This is often the result of over-eager type matching - consider using \" +\n\t\t\t\t\t\t\t\"'getBeanNamesOfType' with the 'allowEagerInit' flag turned off, for example.\");\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Register bean as disposable.\n\ttry {\n\t\tregisterDisposableBeanIfNecessary(beanName, bean, mbd);\n\t}\n\tcatch (BeanDefinitionValidationException ex) {\n\t\tthrow new BeanCreationException(\n\t\t\t\tmbd.getResourceDescription(), beanName, \"Invalid destruction signature\", ex);\n\t}\n\n\treturn exposedObject;\n}\n\n\n// 在AbstractAutowireCapableBeanFactory抽象类的doCreateBean方法中调用的 createBeanInstance(beanName, mbd, args)方法\nprotected BeanWrapper createBeanInstance(String beanName, RootBeanDefinition mbd, @Nullable Object[] args) {\n\t// Make sure bean class is actually resolved at this point.\n\tClass<?> beanClass = resolveBeanClass(mbd, beanName);\n\n\tif (beanClass != null && !Modifier.isPublic(beanClass.getModifiers()) && !mbd.isNonPublicAccessAllowed()) {\n\t\tthrow new BeanCreationException(mbd.getResourceDescription(), beanName,\n\t\t\t\t\"Bean class isn't public, and non-public access not allowed: \" + beanClass.getName());\n\t}\n\n\tSupplier<?> instanceSupplier = mbd.getInstanceSupplier();\n\tif (instanceSupplier != null) {\n\t\treturn obtainFromSupplier(instanceSupplier, beanName);\n\t}\n\n\tif (mbd.getFactoryMethodName() != null) {\n\t\treturn instantiateUsingFactoryMethod(beanName, mbd, args);\n\t}\n\n\t// Shortcut when re-creating the same bean...\n\tboolean resolved = false;\n\tboolean autowireNecessary = false;\n\tif (args == null) {\n\t\tsynchronized (mbd.constructorArgumentLock) {\n\t\t\tif (mbd.resolvedConstructorOrFactoryMethod != null) {\n\t\t\t\tresolved = true;\n\t\t\t\tautowireNecessary = mbd.constructorArgumentsResolved;\n\t\t\t}\n\t\t}\n\t}\n\tif (resolved) {\n\t\tif (autowireNecessary) {\n\t\t\treturn autowireConstructor(beanName, mbd, null, null);\n\t\t}\n\t\telse {\n\t\t\t// 调用instantiateBean方法\n\t\t\treturn instantiateBean(beanName, mbd);\n\t\t}\n\t}\n\n\t// Candidate constructors for autowiring?\n\tConstructor<?>[] ctors = determineConstructorsFromBeanPostProcessors(beanClass, beanName);\n\tif (ctors != null || mbd.getResolvedAutowireMode() == AUTOWIRE_CONSTRUCTOR ||\n\t\t\tmbd.hasConstructorArgumentValues() || !ObjectUtils.isEmpty(args)) {\n\t\treturn autowireConstructor(beanName, mbd, ctors, args);\n\t}\n\n\t// Preferred constructors for default construction?\n\tctors = mbd.getPreferredConstructors();\n\tif (ctors != null) {\n\t\treturn autowireConstructor(beanName, mbd, ctors, null);\n\t}\n\n\t// No special handling: simply use no-arg constructor.\n\treturn instantiateBean(beanName, mbd);\n}\n\n// 在AbstractAutowireCapableBeanFactory抽象类的createBeanInstance方法中调用的instantiateBean(beanName, mbd)方法\nprotected BeanWrapper instantiateBean(final String beanName, final RootBeanDefinition mbd) {\n\ttry {\n\t\tObject beanInstance;\n\t\tfinal BeanFactory parent = this;\n\t\tif (System.getSecurityManager() != null) {\n\t\t\t// 核心逻辑\n\t\t\tbeanInstance = AccessController.doPrivileged((PrivilegedAction<Object>) () ->\n\t\t\t\t\tgetInstantiationStrategy().instantiate(mbd, beanName, parent),\n\t\t\t\t\tgetAccessControlContext());\n\t\t}\n\t\telse {\n\t\t\t// 核心逻辑\n\t\t\tbeanInstance = getInstantiationStrategy().instantiate(mbd, beanName, parent);\n\t\t}\n\t\tBeanWrapper bw = new BeanWrapperImpl(beanInstance);\n\t\tinitBeanWrapper(bw);\n\t\treturn bw;\n\t}\n\tcatch (Throwable ex) {\n\t\tthrow new BeanCreationException(\n\t\t\t\tmbd.getResourceDescription(), beanName, \"Instantiation of bean failed\", ex);\n\t}\n}\n\n// 上面的getInstantiationStrategy()方法代码\nprotected InstantiationStrategy getInstantiationStrategy() {\n\treturn this.instantiationStrategy;\n}\n\n```\n\n### getInstantiationStrategy()方法的返回接口对象的策略对象的一个实现SimpleInstantiationStrategy\n- org.springframework.beans.factory.support.SimpleInstantiationStrategy\n- SimpleInstantiationStrategy.instantiate(RootBeanDefinition bd, @Nullable String beanName, BeanFactory owner)方法的具体实现：\n```java\n@Override\npublic Object instantiate(RootBeanDefinition bd, @Nullable String beanName, BeanFactory owner) {\n\t// Don't override the class with CGLIB if no overrides.\n\tif (!bd.hasMethodOverrides()) {\n\t\tConstructor<?> constructorToUse;\n\t\tsynchronized (bd.constructorArgumentLock) {\n\t\t\tconstructorToUse = (Constructor<?>) bd.resolvedConstructorOrFactoryMethod;\n\t\t\tif (constructorToUse == null) {\n\t\t\t\tfinal Class<?> clazz = bd.getBeanClass();\n\t\t\t\tif (clazz.isInterface()) {\n\t\t\t\t\tthrow new BeanInstantiationException(clazz, \"Specified class is an interface\");\n\t\t\t\t}\n\t\t\t\ttry {\n\t\t\t\t\tif (System.getSecurityManager() != null) {\n\t\t\t\t\t\tconstructorToUse = AccessController.doPrivileged(\n\t\t\t\t\t\t\t\t(PrivilegedExceptionAction<Constructor<?>>) clazz::getDeclaredConstructor);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tconstructorToUse = clazz.getDeclaredConstructor();\n\t\t\t\t\t}\n\t\t\t\t\tbd.resolvedConstructorOrFactoryMethod = constructorToUse;\n\t\t\t\t}\n\t\t\t\tcatch (Throwable ex) {\n\t\t\t\t\tthrow new BeanInstantiationException(clazz, \"No default constructor found\", ex);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t// 调用静态方法BeanUtils.instantiateClass(constructorToUse);\n\t\treturn BeanUtils.instantiateClass(constructorToUse);\n\t}\n\telse {\n\t\t// Must generate CGLIB subclass.\n\t\treturn instantiateWithMethodInjection(bd, beanName, owner);\n\t}\n}\n```\n#### 静态方法BeanUtils.instantiateClass(constructorToUse)的实现细节\n- 代码位置：org.springframework.beans.BeanUtils\n```java\npublic static <T> T instantiateClass(Constructor<T> ctor, Object... args) throws BeanInstantiationException {\n\tAssert.notNull(ctor, \"Constructor must not be null\");\n\ttry {\n\t\tReflectionUtils.makeAccessible(ctor);\n\t\t// 判断是否是Kotlin类型\n\t\tif (KotlinDetector.isKotlinReflectPresent() && KotlinDetector.isKotlinType(ctor.getDeclaringClass())) {\n\t\t\t// 是Kotlin类型\n\t\t\treturn KotlinDelegate.instantiateClass(ctor, args);\n\t\t}\n\t\telse {\n\t\t\t// 不是Kotlin类型\n\t\t\tClass<?>[] parameterTypes = ctor.getParameterTypes();\n\t\t\tAssert.isTrue(args.length <= parameterTypes.length, \"Can't specify more arguments than constructor parameters\");\n\t\t\tObject[] argsWithDefaultValues = new Object[args.length];\n\t\t\tfor (int i = 0 ; i < args.length; i++) {\n\t\t\t\tif (args[i] == null) {\n\t\t\t\t\tClass<?> parameterType = parameterTypes[i];\n\t\t\t\t\targsWithDefaultValues[i] = (parameterType.isPrimitive() ? DEFAULT_TYPE_VALUES.get(parameterType) : null);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\targsWithDefaultValues[i] = args[i];\n\t\t\t\t}\n\t\t\t}\n\t\t\t// 调用Constructor的newInstance方法，使用反射创建实例\n\t\t\t// 到此之后bean实例创建完成\n\t\t\treturn ctor.newInstance(argsWithDefaultValues);\n\t\t}\n\t}\n\tcatch (InstantiationException ex) {\n\t\tthrow new BeanInstantiationException(ctor, \"Is it an abstract class?\", ex);\n\t}\n\tcatch (IllegalAccessException ex) {\n\t\tthrow new BeanInstantiationException(ctor, \"Is the constructor accessible?\", ex);\n\t}\n\tcatch (IllegalArgumentException ex) {\n\t\tthrow new BeanInstantiationException(ctor, \"Illegal arguments for constructor\", ex);\n\t}\n\tcatch (InvocationTargetException ex) {\n\t\tthrow new BeanInstantiationException(ctor, \"Constructor threw exception\", ex.getTargetException());\n\t}\n}\n\n```\n\n#### AbstractAutowireCapableBeanFactory抽象类的中doCreateBean方法中调用的populateBean(beanName, mbd, instanceWrapper)方法\n- 在AbstractAutowireCapableBeanFactory抽象类中的方法populateBean方法\n- 该方法用于填充bean 具体发生依赖注入的地方\n```java\n@SuppressWarnings(\"deprecation\")  // for postProcessPropertyValues\nprotected void populateBean(String beanName, RootBeanDefinition mbd, @Nullable BeanWrapper bw) {\n\tif (bw == null) {\n\t\tif (mbd.hasPropertyValues()) {\n\t\t\tthrow new BeanCreationException(\n\t\t\t\t\tmbd.getResourceDescription(), beanName, \"Cannot apply property values to null instance\");\n\t\t}\n\t\telse {\n\t\t\t// Skip property population phase for null instance.\n\t\t\treturn;\n\t\t}\n\t}\n\n\t// Give any InstantiationAwareBeanPostProcessors the opportunity to modify the\n\t// state of the bean before properties are set. This can be used, for example,\n\t// to support styles of field injection.\n\tboolean continueWithPropertyPopulation = true;\n\n\tif (!mbd.isSynthetic() && hasInstantiationAwareBeanPostProcessors()) {\n\t\tfor (BeanPostProcessor bp : getBeanPostProcessors()) {\n\t\t\tif (bp instanceof InstantiationAwareBeanPostProcessor) {\n\t\t\t\tInstantiationAwareBeanPostProcessor ibp = (InstantiationAwareBeanPostProcessor) bp;\n\t\t\t\tif (!ibp.postProcessAfterInstantiation(bw.getWrappedInstance(), beanName)) {\n\t\t\t\t\tcontinueWithPropertyPopulation = false;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tif (!continueWithPropertyPopulation) {\n\t\treturn;\n\t}\n    // 获取bean的所有属性 用于后面配置Property元素 即依赖关系\n\tPropertyValues pvs = (mbd.hasPropertyValues() ? mbd.getPropertyValues() : null);\n\n\tint resolvedAutowireMode = mbd.getResolvedAutowireMode();\n\tif (resolvedAutowireMode == AUTOWIRE_BY_NAME || resolvedAutowireMode == AUTOWIRE_BY_TYPE) {\n\t\tMutablePropertyValues newPvs = new MutablePropertyValues(pvs);\n\t\t// Add property values based on autowire by name if applicable.\n\t\tif (resolvedAutowireMode == AUTOWIRE_BY_NAME) {\n\t\t\tautowireByName(beanName, mbd, bw, newPvs);\n\t\t}\n\t\t// Add property values based on autowire by type if applicable.\n\t\tif (resolvedAutowireMode == AUTOWIRE_BY_TYPE) {\n\t\t\tautowireByType(beanName, mbd, bw, newPvs);\n\t\t}\n\t\tpvs = newPvs;\n\t}\n\n\tboolean hasInstAwareBpps = hasInstantiationAwareBeanPostProcessors();\n\tboolean needsDepCheck = (mbd.getDependencyCheck() != AbstractBeanDefinition.DEPENDENCY_CHECK_NONE);\n\n\tPropertyDescriptor[] filteredPds = null;\n\tif (hasInstAwareBpps) {\n\t\tif (pvs == null) {\n\t\t\tpvs = mbd.getPropertyValues();\n\t\t}\n\t\tfor (BeanPostProcessor bp : getBeanPostProcessors()) {\n\t\t\tif (bp instanceof InstantiationAwareBeanPostProcessor) {\n\t\t\t\tInstantiationAwareBeanPostProcessor ibp = (InstantiationAwareBeanPostProcessor) bp;\n\t\t\t\tPropertyValues pvsToUse = ibp.postProcessProperties(pvs, bw.getWrappedInstance(), beanName);\n\t\t\t\tif (pvsToUse == null) {\n\t\t\t\t\tif (filteredPds == null) {\n\t\t\t\t\t\tfilteredPds = filterPropertyDescriptorsForDependencyCheck(bw, mbd.allowCaching);\n\t\t\t\t\t}\n\t\t\t\t\tpvsToUse = ibp.postProcessPropertyValues(pvs, filteredPds, bw.getWrappedInstance(), beanName);\n\t\t\t\t\tif (pvsToUse == null) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tpvs = pvsToUse;\n\t\t\t}\n\t\t}\n\t}\n\tif (needsDepCheck) {\n\t\tif (filteredPds == null) {\n\t\t\tfilteredPds = filterPropertyDescriptorsForDependencyCheck(bw, mbd.allowCaching);\n\t\t}\n\t\tcheckDependencies(beanName, mbd, filteredPds, pvs);\n\t}\n\n\tif (pvs != null) {\n\t\t// 核心逻辑 applyPropertyValues方法的具体代码在下面\n\t\tapplyPropertyValues(beanName, mbd, bw, pvs);\n\t}\n}\n\n// 上面方法中调用的applyPropertyValues方法具体代码\nprotected void applyPropertyValues(String beanName, BeanDefinition mbd, BeanWrapper bw, PropertyValues pvs) {\n\tif (pvs.isEmpty()) {\n\t\treturn;\n\t}\n\n\tif (System.getSecurityManager() != null && bw instanceof BeanWrapperImpl) {\n\t\t((BeanWrapperImpl) bw).setSecurityContext(getAccessControlContext());\n\t}\n\n\tMutablePropertyValues mpvs = null;\n\tList<PropertyValue> original;\n\n\tif (pvs instanceof MutablePropertyValues) {\n\t\tmpvs = (MutablePropertyValues) pvs;\n\t\tif (mpvs.isConverted()) {\n\t\t\t// Shortcut: use the pre-converted values as-is.\n\t\t\ttry {\n\t\t\t\tbw.setPropertyValues(mpvs);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tcatch (BeansException ex) {\n\t\t\t\tthrow new BeanCreationException(\n\t\t\t\t\t\tmbd.getResourceDescription(), beanName, \"Error setting property values\", ex);\n\t\t\t}\n\t\t}\n\t\toriginal = mpvs.getPropertyValueList();\n\t}\n\telse {\n\t\toriginal = Arrays.asList(pvs.getPropertyValues());\n\t}\n\n\tTypeConverter converter = getCustomTypeConverter();\n\tif (converter == null) {\n\t\tconverter = bw;\n\t}\n\tBeanDefinitionValueResolver valueResolver = new BeanDefinitionValueResolver(this, beanName, mbd, converter);\n\n\t// Create a deep copy, resolving any references for values.\n\tList<PropertyValue> deepCopy = new ArrayList<>(original.size());\n\tboolean resolveNecessary = false;\n\tfor (PropertyValue pv : original) {\n\t\tif (pv.isConverted()) {\n\t\t\tdeepCopy.add(pv);\n\t\t}\n\t\telse {\n\t\t\tString propertyName = pv.getName();\n\t\t\tObject originalValue = pv.getValue();\n\t\t\tif (originalValue == AutowiredPropertyMarker.INSTANCE) {\n\t\t\t\tMethod writeMethod = bw.getPropertyDescriptor(propertyName).getWriteMethod();\n\t\t\t\tif (writeMethod == null) {\n\t\t\t\t\tthrow new IllegalArgumentException(\"Autowire marker for property without write method: \" + pv);\n\t\t\t\t}\n\t\t\t\toriginalValue = new DependencyDescriptor(new MethodParameter(writeMethod, 0), true);\n\t\t\t}\n\t\t\t// 获取property对应的值   resolveValueIfNecessary方法的代码在下面给出\n\t\t\tObject resolvedValue = valueResolver.resolveValueIfNecessary(pv, originalValue);\n\t\t\tObject convertedValue = resolvedValue;\n\t\t\tboolean convertible = bw.isWritableProperty(propertyName) &&\n\t\t\t\t\t!PropertyAccessorUtils.isNestedOrIndexedProperty(propertyName);\n\t\t\tif (convertible) {\n\t\t\t\tconvertedValue = convertForProperty(resolvedValue, propertyName, bw, converter);\n\t\t\t}\n\t\t\t// Possibly store converted value in merged bean definition,\n\t\t\t// in order to avoid re-conversion for every created bean instance.\n\t\t\tif (resolvedValue == originalValue) {\n\t\t\t\tif (convertible) {\n\t\t\t\t\tpv.setConvertedValue(convertedValue);\n\t\t\t\t}\n\t\t\t\tdeepCopy.add(pv);\n\t\t\t}\n\t\t\telse if (convertible && originalValue instanceof TypedStringValue &&\n\t\t\t\t\t!((TypedStringValue) originalValue).isDynamic() &&\n\t\t\t\t\t!(convertedValue instanceof Collection || ObjectUtils.isArray(convertedValue))) {\n\t\t\t\tpv.setConvertedValue(convertedValue);\n\t\t\t\tdeepCopy.add(pv);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tresolveNecessary = true;\n\t\t\t\tdeepCopy.add(new PropertyValue(pv, convertedValue));\n\t\t\t}\n\t\t}\n\t}\n\tif (mpvs != null && !resolveNecessary) {\n\t\tmpvs.setConverted();\n\t}\n\n\t// Set our (possibly massaged) deep copy.\n\ttry {\n\t\t// 获取到依赖的对象值后 将依赖值注入\n\t\tbw.setPropertyValues(new MutablePropertyValues(deepCopy));\n\t}\n\tcatch (BeansException ex) {\n\t\tthrow new BeanCreationException(\n\t\t\t\tmbd.getResourceDescription(), beanName, \"Error setting property values\", ex);\n\t}\n}\n\n\n```\n####################################################################################################################################################33\n\n#### valueResolver.resolveValueIfNecessary(pv, originalValue);对应的方法\n- 代码位置：org.springframework.beans.factory.support.BeanDefinitionValueResolver\n```java\n@Nullable\npublic Object resolveValueIfNecessary(Object argName, @Nullable Object value) {\n\t// We must check each value to see whether it requires a runtime reference\n\t// to another bean to be resolved.\n\tif (value instanceof RuntimeBeanReference) {\n\t\tRuntimeBeanReference ref = (RuntimeBeanReference) value;\n\t\t// 核心逻辑 解决Bean依赖关系 具体代码在下方贴出\n\t\treturn resolveReference(argName, ref);\n\t}\n\telse if (value instanceof RuntimeBeanNameReference) {\n\t\tString refName = ((RuntimeBeanNameReference) value).getBeanName();\n\t\trefName = String.valueOf(doEvaluate(refName));\n\t\tif (!this.beanFactory.containsBean(refName)) {\n\t\t\tthrow new BeanDefinitionStoreException(\n\t\t\t\t\t\"Invalid bean name '\" + refName + \"' in bean reference for \" + argName);\n\t\t}\n\t\treturn refName;\n\t}\n\telse if (value instanceof BeanDefinitionHolder) {\n\t\t// Resolve BeanDefinitionHolder: contains BeanDefinition with name and aliases.\n\t\tBeanDefinitionHolder bdHolder = (BeanDefinitionHolder) value;\n\t\treturn resolveInnerBean(argName, bdHolder.getBeanName(), bdHolder.getBeanDefinition());\n\t}\n\telse if (value instanceof BeanDefinition) {\n\t\t// Resolve plain BeanDefinition, without contained name: use dummy name.\n\t\tBeanDefinition bd = (BeanDefinition) value;\n\t\tString innerBeanName = \"(inner bean)\" + BeanFactoryUtils.GENERATED_BEAN_NAME_SEPARATOR +\n\t\t\t\tObjectUtils.getIdentityHexString(bd);\n\t\treturn resolveInnerBean(argName, innerBeanName, bd);\n\t}\n\telse if (value instanceof DependencyDescriptor) {\n\t\tSet<String> autowiredBeanNames = new LinkedHashSet<>(4);\n\t\tObject result = this.beanFactory.resolveDependency(\n\t\t\t\t(DependencyDescriptor) value, this.beanName, autowiredBeanNames, this.typeConverter);\n\t\tfor (String autowiredBeanName : autowiredBeanNames) {\n\t\t\tif (this.beanFactory.containsBean(autowiredBeanName)) {\n\t\t\t\tthis.beanFactory.registerDependentBean(autowiredBeanName, this.beanName);\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\telse if (value instanceof ManagedArray) {\n\t\t// May need to resolve contained runtime references.\n\t\tManagedArray array = (ManagedArray) value;\n\t\tClass<?> elementType = array.resolvedElementType;\n\t\tif (elementType == null) {\n\t\t\tString elementTypeName = array.getElementTypeName();\n\t\t\tif (StringUtils.hasText(elementTypeName)) {\n\t\t\t\ttry {\n\t\t\t\t\telementType = ClassUtils.forName(elementTypeName, this.beanFactory.getBeanClassLoader());\n\t\t\t\t\tarray.resolvedElementType = elementType;\n\t\t\t\t}\n\t\t\t\tcatch (Throwable ex) {\n\t\t\t\t\t// Improve the message by showing the context.\n\t\t\t\t\tthrow new BeanCreationException(\n\t\t\t\t\t\t\tthis.beanDefinition.getResourceDescription(), this.beanName,\n\t\t\t\t\t\t\t\"Error resolving array type for \" + argName, ex);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\telementType = Object.class;\n\t\t\t}\n\t\t}\n\t\treturn resolveManagedArray(argName, (List<?>) value, elementType);\n\t}\n\telse if (value instanceof ManagedList) {\n\t\t// May need to resolve contained runtime references.\n\t\treturn resolveManagedList(argName, (List<?>) value);\n\t}\n\telse if (value instanceof ManagedSet) {\n\t\t// May need to resolve contained runtime references.\n\t\treturn resolveManagedSet(argName, (Set<?>) value);\n\t}\n\telse if (value instanceof ManagedMap) {\n\t\t// May need to resolve contained runtime references.\n\t\treturn resolveManagedMap(argName, (Map<?, ?>) value);\n\t}\n\telse if (value instanceof ManagedProperties) {\n\t\tProperties original = (Properties) value;\n\t\tProperties copy = new Properties();\n\t\toriginal.forEach((propKey, propValue) -> {\n\t\t\tif (propKey instanceof TypedStringValue) {\n\t\t\t\tpropKey = evaluate((TypedStringValue) propKey);\n\t\t\t}\n\t\t\tif (propValue instanceof TypedStringValue) {\n\t\t\t\tpropValue = evaluate((TypedStringValue) propValue);\n\t\t\t}\n\t\t\tif (propKey == null || propValue == null) {\n\t\t\t\tthrow new BeanCreationException(\n\t\t\t\t\t\tthis.beanDefinition.getResourceDescription(), this.beanName,\n\t\t\t\t\t\t\"Error converting Properties key/value pair for \" + argName + \": resolved to null\");\n\t\t\t}\n\t\t\tcopy.put(propKey, propValue);\n\t\t});\n\t\treturn copy;\n\t}\n\telse if (value instanceof TypedStringValue) {\n\t\t// Convert value to target type here.\n\t\tTypedStringValue typedStringValue = (TypedStringValue) value;\n\t\tObject valueObject = evaluate(typedStringValue);\n\t\ttry {\n\t\t\tClass<?> resolvedTargetType = resolveTargetType(typedStringValue);\n\t\t\tif (resolvedTargetType != null) {\n\t\t\t\treturn this.typeConverter.convertIfNecessary(valueObject, resolvedTargetType);\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn valueObject;\n\t\t\t}\n\t\t}\n\t\tcatch (Throwable ex) {\n\t\t\t// Improve the message by showing the context.\n\t\t\tthrow new BeanCreationException(\n\t\t\t\t\tthis.beanDefinition.getResourceDescription(), this.beanName,\n\t\t\t\t\t\"Error converting typed String value for \" + argName, ex);\n\t\t}\n\t}\n\telse if (value instanceof NullBean) {\n\t\treturn null;\n\t}\n\telse {\n\t\treturn evaluate(value);\n\t}\n}\n\n\n// 上面resolveValueIfNecessary方法中调用的resolveReference方法\n// 最后获取到依赖的bean\n@Nullable\nprivate Object resolveReference(Object argName, RuntimeBeanReference ref) {\n\ttry {\n\t\tObject bean;\n\t\tClass<?> beanType = ref.getBeanType();\n\t\tif (ref.isToParent()) {\n\t\t\tBeanFactory parent = this.beanFactory.getParentBeanFactory();\n\t\t\tif (parent == null) {\n\t\t\t\tthrow new BeanCreationException(\n\t\t\t\t\t\tthis.beanDefinition.getResourceDescription(), this.beanName,\n\t\t\t\t\t\t\"Cannot resolve reference to bean \" + ref +\n\t\t\t\t\t\t\t\t\" in parent factory: no parent factory available\");\n\t\t\t}\n\t\t\tif (beanType != null) {\n\t\t\t\t// 发生递归调用\n\t\t\t\tbean = parent.getBean(beanType);\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// 发生递归调用 根据依赖的名称从BeanFactory中递归得到依赖 最后获取到依赖的bean\n\t\t\t\tbean = parent.getBean(String.valueOf(doEvaluate(ref.getBeanName())));\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tString resolvedName;\n\t\t\tif (beanType != null) {\n\t\t\t\tNamedBeanHolder<?> namedBean = this.beanFactory.resolveNamedBean(beanType);\n\t\t\t\tbean = namedBean.getBeanInstance();\n\t\t\t\tresolvedName = namedBean.getBeanName();\n\t\t\t}\n\t\t\telse {\n\t\t\t\tresolvedName = String.valueOf(doEvaluate(ref.getBeanName()));\n\t\t\t\tbean = this.beanFactory.getBean(resolvedName);\n\t\t\t}\n\t\t\tthis.beanFactory.registerDependentBean(resolvedName, this.beanName);\n\t\t}\n\t\tif (bean instanceof NullBean) {\n\t\t\tbean = null;\n\t\t}\n\t\treturn bean;\n\t}\n\tcatch (BeansException ex) {\n\t\tthrow new BeanCreationException(\n\t\t\t\tthis.beanDefinition.getResourceDescription(), this.beanName,\n\t\t\t\t\"Cannot resolve reference to bean '\" + ref.getBeanName() + \"' while setting \" + argName, ex);\n\t}\n}\n```\n\n#### AbstractPropertyAccessor的setPropertyValues(PropertyValues pvs)方法\n- 代码位置：org.springframework.beans.AbstractPropertyAccessor\n- 循环属性列表 \n```java\n@Override\npublic void setPropertyValues(PropertyValues pvs) throws BeansException {\n\tsetPropertyValues(pvs, false, false);\n}\n\n//  循环属性列表 \n@Override\npublic void setPropertyValues(PropertyValues pvs, boolean ignoreUnknown, boolean ignoreInvalid)\n\t\tthrows BeansException {\n\n\tList<PropertyAccessException> propertyAccessExceptions = null;\n\tList<PropertyValue> propertyValues = (pvs instanceof MutablePropertyValues ?\n\t\t\t((MutablePropertyValues) pvs).getPropertyValueList() : Arrays.asList(pvs.getPropertyValues()));\n    // 循环属性列表 \n\tfor (PropertyValue pv : propertyValues) {\n\t\ttry {\n\t\t\t// This method may throw any BeansException, which won't be caught\n\t\t\t// here, if there is a critical failure such as no matching field.\n\t\t\t// We can attempt to deal only with less serious exceptions.\n\t\t\t// 该方法通过AbstractNestablePropertyAccessor的setPropertyValue(PropertyValue pv)方法实现\n\t\t\tsetPropertyValue(pv);\n\t\t}\n\t\tcatch (NotWritablePropertyException ex) {\n\t\t\tif (!ignoreUnknown) {\n\t\t\t\tthrow ex;\n\t\t\t}\n\t\t\t// Otherwise, just ignore it and continue...\n\t\t}\n\t\tcatch (NullValueInNestedPathException ex) {\n\t\t\tif (!ignoreInvalid) {\n\t\t\t\tthrow ex;\n\t\t\t}\n\t\t\t// Otherwise, just ignore it and continue...\n\t\t}\n\t\tcatch (PropertyAccessException ex) {\n\t\t\tif (propertyAccessExceptions == null) {\n\t\t\t\tpropertyAccessExceptions = new ArrayList<>();\n\t\t\t}\n\t\t\tpropertyAccessExceptions.add(ex);\n\t\t}\n\t}\n\n\t// If we encountered individual exceptions, throw the composite exception.\n\tif (propertyAccessExceptions != null) {\n\t\tPropertyAccessException[] paeArray = propertyAccessExceptions.toArray(new PropertyAccessException[0]);\n\t\tthrow new PropertyBatchUpdateException(paeArray);\n\t}\n}\n```\n\n#### AbstractNestablePropertyAccessor的 setPropertyValue(PropertyValue pv)方法\n- 代码位置：org.springframework.beans.AbstractNestablePropertyAccessor\n```java\n@Override\n\tpublic void setPropertyValue(PropertyValue pv) throws BeansException {\n\t\tPropertyTokenHolder tokens = (PropertyTokenHolder) pv.resolvedTokens;\n\t\tif (tokens == null) {\n\t\t\tString propertyName = pv.getName();\n\t\t\tAbstractNestablePropertyAccessor nestedPa;\n\t\t\ttry {\n\t\t\t\tnestedPa = getPropertyAccessorForPropertyPath(propertyName);\n\t\t\t}\n\t\t\tcatch (NotReadablePropertyException ex) {\n\t\t\t\tthrow new NotWritablePropertyException(getRootClass(), this.nestedPath + propertyName,\n\t\t\t\t\t\t\"Nested property in path '\" + propertyName + \"' does not exist\", ex);\n\t\t\t}\n\t\t\ttokens = getPropertyNameTokens(getFinalPath(nestedPa, propertyName));\n\t\t\tif (nestedPa == this) {\n\t\t\t\tpv.getOriginalPropertyValue().resolvedTokens = tokens;\n\t\t\t}\n\t\t\tnestedPa.setPropertyValue(tokens, pv);\n\t\t}\n\t\telse {\n\t\t\tsetPropertyValue(tokens, pv);\n\t\t}\n\t}\n```\n########################################################################################################################################\n- 上面setPropertyValue(PropertyValue pv)方法的重载方法setPropertyValue(PropertyTokenHolder tokens, PropertyValue pv)\n```java\nprotected void setPropertyValue(PropertyTokenHolder tokens, PropertyValue pv) throws BeansException {\n\tif (tokens.keys != null) {\n\t\tprocessKeyedProperty(tokens, pv);\n\t}\n\telse {\n\t\tprocessLocalProperty(tokens, pv);\n\t}\n}\n```\n- processLocalProperty(PropertyTokenHolder tokens, PropertyValue pv)方法\n```java\nprivate void processLocalProperty(PropertyTokenHolder tokens, PropertyValue pv) {\n\tPropertyHandler ph = getLocalPropertyHandler(tokens.actualName);\n\tif (ph == null || !ph.isWritable()) {\n\t\tif (pv.isOptional()) {\n\t\t\tif (logger.isDebugEnabled()) {\n\t\t\t\tlogger.debug(\"Ignoring optional value for property '\" + tokens.actualName +\n\t\t\t\t\t\t\"' - property not found on bean class [\" + getRootClass().getName() + \"]\");\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\telse {\n\t\t\tthrow createNotWritablePropertyException(tokens.canonicalName);\n\t\t}\n\t}\n\n\tObject oldValue = null;\n\ttry {\n\t\tObject originalValue = pv.getValue();//\n\t\tObject valueToApply = originalValue;//\n\t\tif (!Boolean.FALSE.equals(pv.conversionNecessary)) {\n\t\t\tif (pv.isConverted()) {\n\t\t\t\tvalueToApply = pv.getConvertedValue();\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (isExtractOldValueForEditor() && ph.isReadable()) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\toldValue = ph.getValue();\n\t\t\t\t\t}\n\t\t\t\t\tcatch (Exception ex) {\n\t\t\t\t\t\tif (ex instanceof PrivilegedActionException) {\n\t\t\t\t\t\t\tex = ((PrivilegedActionException) ex).getException();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (logger.isDebugEnabled()) {\n\t\t\t\t\t\t\tlogger.debug(\"Could not read previous value of property '\" +\n\t\t\t\t\t\t\t\t\tthis.nestedPath + tokens.canonicalName + \"'\", ex);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tvalueToApply = convertForProperty(\n\t\t\t\t\t\ttokens.canonicalName, oldValue, originalValue, ph.toTypeDescriptor());\n\t\t\t}\n\t\t\tpv.getOriginalPropertyValue().conversionNecessary = (valueToApply != originalValue);\n\t\t}\n\t\tph.setValue(valueToApply);// 具体代码在下方列出\n\t}\n\tcatch (TypeMismatchException ex) {\n\t\tthrow ex;\n\t}\n\tcatch (InvocationTargetException ex) {\n\t\tPropertyChangeEvent propertyChangeEvent = new PropertyChangeEvent(\n\t\t\t\tgetRootInstance(), this.nestedPath + tokens.canonicalName, oldValue, pv.getValue());\n\t\tif (ex.getTargetException() instanceof ClassCastException) {\n\t\t\tthrow new TypeMismatchException(propertyChangeEvent, ph.getPropertyType(), ex.getTargetException());\n\t\t}\n\t\telse {\n\t\t\tThrowable cause = ex.getTargetException();\n\t\t\tif (cause instanceof UndeclaredThrowableException) {\n\t\t\t\t// May happen e.g. with Groovy-generated methods\n\t\t\t\tcause = cause.getCause();\n\t\t\t}\n\t\t\tthrow new MethodInvocationException(propertyChangeEvent, cause);\n\t\t}\n\t}\n\tcatch (Exception ex) {\n\t\tPropertyChangeEvent pce = new PropertyChangeEvent(\n\t\t\t\tgetRootInstance(), this.nestedPath + tokens.canonicalName, oldValue, pv.getValue());\n\t\tthrow new MethodInvocationException(pce, ex);\n\t}\n}\n```\n\n####\n- 上述ph.setValue方法在org.springframework.beans.AbstractNestablePropertyAccessor抽象类中定义\n- public abstract void setValue(@Nullable Object value) throws Exception; \n- 一个具体实现在org.springframework.beans.BeanWrapperImp的内部类BeanPropertyHandler中，完整代码如下：\n```java\nprivate final PropertyDescriptor pd;  //BeanPropertyHandler中的字段\n\n@Override\npublic void setValue(final @Nullable Object value) throws Exception {\n\tfinal Method writeMethod = (this.pd instanceof GenericTypeAwarePropertyDescriptor ?\n\t\t\t((GenericTypeAwarePropertyDescriptor) this.pd).getWriteMethodForActualAccess() :\n\t\t\tthis.pd.getWriteMethod());// 找到属性的set方法\n\tif (System.getSecurityManager() != null) {\n\t\tAccessController.doPrivileged((PrivilegedAction<Object>) () -> {\n\t\t\tReflectionUtils.makeAccessible(writeMethod);\n\t\t\treturn null;\n\t\t});\n\t\ttry {\n\t\t\tAccessController.doPrivileged((PrivilegedExceptionAction<Object>) () ->\n\t\t\t\t\twriteMethod.invoke(getWrappedInstance(), value), acc);\n\t\t\t\t\t// 调用Method的invoke方法，完成属性注入\n\t\t}\n\t\tcatch (PrivilegedActionException ex) {\n\t\t\tthrow ex.getException();\n\t\t}\n\t}\n\telse {\n\t\tReflectionUtils.makeAccessible(writeMethod);\n\t\twriteMethod.invoke(getWrappedInstance(), value);//调用Method的invoke方法，完成属性注入\n\t}\n}\n```\n- 至此Ioc容器的启动过程基本结束\n\n# 15. finishRefresh();方法\n- org.springframework.context.support.AbstractApplicationContext中的finishRefresh()方法\n\n```java\nprotected void finishRefresh() {\n\t// Clear context-level resource caches (such as ASM metadata from scanning).\n\tclearResourceCaches();\n\n\t// Initialize lifecycle processor for this context.\n\tinitLifecycleProcessor();\n\n\t// Propagate refresh to lifecycle processor first.\n\tgetLifecycleProcessor().onRefresh();\n\n\t// Publish the final event.\n\tpublishEvent(new ContextRefreshedEvent(this));\n\n\t// Participate in LiveBeansView MBean, if active.\n\tLiveBeansView.registerApplicationContext(this);\n}\n```\n\n\n# 16refresh()过程抛出异常时\n- 之中有两个处理方法destroyBeans()和cancelRefresh(ex)\n\n## 16.1 destroyBeans();方法\n- org.springframework.context.support.AbstractApplicationContext中的destroyBeans()方法\n\n```java\nprotected void destroyBeans() {\n\tgetBeanFactory().destroySingletons();\n}\n```\n\n## 16.2 cancelRefresh(ex);方法\n- org.springframework.context.support.AbstractApplicationContext中的cancelRefresh(ex)方法\n```java\nprotected void cancelRefresh(BeansException ex) {\n\tthis.active.set(false);\n}\n```\n## 16.3抛出异常BeansException\n\n\n# 17 resetCommonCaches();方法\n- org.springframework.context.support.AbstractApplicationContext中的resetCommonCaches()方法\n- try-catch-finally代码块中finally包裹的方法\n```java\nprotected void resetCommonCaches() {\n\tReflectionUtils.clearCache();\n\tAnnotationUtils.clearCache();\n\tResolvableType.clearCache();\n\tCachedIntrospectionResults.clearClassLoader(getClassLoader());\n}\n```\n- 执行到此Ioc容器启动完成，可以正式投入使用\n\n\n# 总结\n- Ioc的底层原理实现：Spring Ioc启动分为两步：\n\t- 1.创建BeanFactory\n\t- 2.实例化Bean\n- Spring的Bean在内存中的状态就是BeanDefination\n- 在Bean的创建和依赖注入的过程中，需要根据BeanDefination的信息来递归的完成依赖注入，从代码可以看到，这些递归都是以getBean()为入口的，一个递归是在上下文体系中查找需要的bean和bean的依赖关系；另一个递归是在依赖注入时，通过递归调用容器的getBean方法得到当前依赖的Bean，同时也触发对依赖bean的创建和注入。在对bean的属性进行依赖注入时，解析过程也是一个递归过程，这样根据依赖关系，一层一层的完成Bean的创建和注入，直到当前bean相关的整个依赖链的注入完成。由于整个IoC容器启动过程较为复杂，使用下面的一张图来描述让读者更清楚厘清IoC容器的启动过程。\n\n![Ioc容器启动过程](/Blog/static/image/20191125/BeanFactoryInitFlowChart.png)\n\n\n### 模板\n\n- 代码位置:org.springframework.context.support.AbstractApplicationContext.java\n```java\nprotected void postProcessBeanFactory(ConfigurableListableBeanFactory beanFactory) {\n\t\n}\n```\n- 代码位置:org.springframework.context.support.AbstractApplicationContext.java\n```java\n\n```\n\n- 代码位置:.java\n```java\n\n```\n\n- 代码位置:.java\n```java\n\n```\n\n\n# 参考资料\n- Spring源码深度解析（第二版） 郝佳\n- Spring5企业级开发实战 周冠亚 黄文毅 [配套源码](https://github.com/online-demo/spring5projectdemo)\n- Gitee同步版本：[https://gitee.com/ACANX/spring5projectdemo](https://gitee.com/ACANX/spring5projectdemo)\n\n\n\n\n","source":"_posts/Spring-IoC容器源码导读.md","raw":"---\ntitle: Spring-IoC容器源码导读\ndate: 2019-11-22 22:10:48\ncategories: \"Spring\" #文章分類目錄 可以省略\ntags: #Java \n     - Spring\n     - IOC\n     - BeanFactory\n     - ApplicationContext\ndescription:  Spring-IoC容器源码解析  #你对本页的描述 可以省略\n---\n\n# 1.几个重要类/接口\n## 阅读前的准备\n- 源码下载：\n\t- https://github.com/spring-projects/spring-framework  \n\t- https://github.com/spring-projects/spring-framework.git\n- 源码版本：v5.2.1.RELEASE\n\n## 1.1 BeanFactory 顶级接口（低配版的IoC容器）\n### BeanFactory接口定义说明\n- BeanFactory是低配版的IoC容器，定义了Ioc容器基本的功能\n\n### 完整版源码：\n```java\n/*\n * Copyright 2002-2019 the original author or authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\npackage org.springframework.beans.factory;\n\nimport org.springframework.beans.BeansException;\nimport org.springframework.core.ResolvableType;\nimport org.springframework.lang.Nullable;\n\n/**\n * The root interface for accessing a Spring bean container.\n * This is the basic client view of a bean container;\n * further interfaces such as {@link ListableBeanFactory} and\n * {@link org.springframework.beans.factory.config.ConfigurableBeanFactory}\n * are available for specific purposes.\n *\n * <p>This interface is implemented by objects that hold a number of bean definitions,\n * each uniquely identified by a String name. Depending on the bean definition,\n * the factory will return either an independent instance of a contained object\n * (the Prototype design pattern), or a single shared instance (a superior\n * alternative to the Singleton design pattern, in which the instance is a\n * singleton in the scope of the factory). Which type of instance will be returned\n * depends on the bean factory configuration: the API is the same. Since Spring\n * 2.0, further scopes are available depending on the concrete application\n * context (e.g. \"request\" and \"session\" scopes in a web environment).\n *\n * <p>The point of this approach is that the BeanFactory is a central registry\n * of application components, and centralizes configuration of application\n * components (no more do individual objects need to read properties files,\n * for example). See chapters 4 and 11 of \"Expert One-on-One J2EE Design and\n * Development\" for a discussion of the benefits of this approach.\n *\n * <p>Note that it is generally better to rely on Dependency Injection\n * (\"push\" configuration) to configure application objects through setters\n * or constructors, rather than use any form of \"pull\" configuration like a\n * BeanFactory lookup. Spring's Dependency Injection functionality is\n * implemented using this BeanFactory interface and its subinterfaces.\n *\n * <p>Normally a BeanFactory will load bean definitions stored in a configuration\n * source (such as an XML document), and use the {@code org.springframework.beans}\n * package to configure the beans. However, an implementation could simply return\n * Java objects it creates as necessary directly in Java code. There are no\n * constraints on how the definitions could be stored: LDAP, RDBMS, XML,\n * properties file, etc. Implementations are encouraged to support references\n * amongst beans (Dependency Injection).\n *\n * <p>In contrast to the methods in {@link ListableBeanFactory}, all of the\n * operations in this interface will also check parent factories if this is a\n * {@link HierarchicalBeanFactory}. If a bean is not found in this factory instance,\n * the immediate parent factory will be asked. Beans in this factory instance\n * are supposed to override beans of the same name in any parent factory.\n *\n * <p>Bean factory implementations should support the standard bean lifecycle interfaces\n * as far as possible. The full set of initialization methods and their standard order is:\n * <ol>\n * <li>BeanNameAware's {@code setBeanName}\n * <li>BeanClassLoaderAware's {@code setBeanClassLoader}\n * <li>BeanFactoryAware's {@code setBeanFactory}\n * <li>EnvironmentAware's {@code setEnvironment}\n * <li>EmbeddedValueResolverAware's {@code setEmbeddedValueResolver}\n * <li>ResourceLoaderAware's {@code setResourceLoader}\n * (only applicable when running in an application context)\n * <li>ApplicationEventPublisherAware's {@code setApplicationEventPublisher}\n * (only applicable when running in an application context)\n * <li>MessageSourceAware's {@code setMessageSource}\n * (only applicable when running in an application context)\n * <li>ApplicationContextAware's {@code setApplicationContext}\n * (only applicable when running in an application context)\n * <li>ServletContextAware's {@code setServletContext}\n * (only applicable when running in a web application context)\n * <li>{@code postProcessBeforeInitialization} methods of BeanPostProcessors\n * <li>InitializingBean's {@code afterPropertiesSet}\n * <li>a custom init-method definition\n * <li>{@code postProcessAfterInitialization} methods of BeanPostProcessors\n * </ol>\n *\n * <p>On shutdown of a bean factory, the following lifecycle methods apply:\n * <ol>\n * <li>{@code postProcessBeforeDestruction} methods of DestructionAwareBeanPostProcessors\n * <li>DisposableBean's {@code destroy}\n * <li>a custom destroy-method definition\n * </ol>\n *\n * @author Rod Johnson\n * @author Juergen Hoeller\n * @author Chris Beams\n * @since 13 April 2001\n * @see BeanNameAware#setBeanName\n * @see BeanClassLoaderAware#setBeanClassLoader\n * @see BeanFactoryAware#setBeanFactory\n * @see org.springframework.context.ResourceLoaderAware#setResourceLoader\n * @see org.springframework.context.ApplicationEventPublisherAware#setApplicationEventPublisher\n * @see org.springframework.context.MessageSourceAware#setMessageSource\n * @see org.springframework.context.ApplicationContextAware#setApplicationContext\n * @see org.springframework.web.context.ServletContextAware#setServletContext\n * @see org.springframework.beans.factory.config.BeanPostProcessor#postProcessBeforeInitialization\n * @see InitializingBean#afterPropertiesSet\n * @see org.springframework.beans.factory.support.RootBeanDefinition#getInitMethodName\n * @see org.springframework.beans.factory.config.BeanPostProcessor#postProcessAfterInitialization\n * @see DisposableBean#destroy\n * @see org.springframework.beans.factory.support.RootBeanDefinition#getDestroyMethodName\n */\npublic interface BeanFactory {\n\n\t/**\n\t * Used to dereference a {@link FactoryBean} instance and distinguish it from\n\t * beans <i>created</i> by the FactoryBean. For example, if the bean named\n\t * {@code myJndiObject} is a FactoryBean, getting {@code &myJndiObject}\n\t * will return the factory, not the instance returned by the factory.\n\t */\n\tString FACTORY_BEAN_PREFIX = \"&\";\n\n\n\t/**\n\t * Return an instance, which may be shared or independent, of the specified bean.\n\t * <p>This method allows a Spring BeanFactory to be used as a replacement for the\n\t * Singleton or Prototype design pattern. Callers may retain references to\n\t * returned objects in the case of Singleton beans.\n\t * <p>Translates aliases back to the corresponding canonical bean name.\n\t * Will ask the parent factory if the bean cannot be found in this factory instance.\n\t * @param name the name of the bean to retrieve\n\t * @return an instance of the bean\n\t * @throws NoSuchBeanDefinitionException if there is no bean with the specified name\n\t * @throws BeansException if the bean could not be obtained\n\t */\n\tObject getBean(String name) throws BeansException;\n\n\t/**\n\t * Return an instance, which may be shared or independent, of the specified bean.\n\t * <p>Behaves the same as {@link #getBean(String)}, but provides a measure of type\n\t * safety by throwing a BeanNotOfRequiredTypeException if the bean is not of the\n\t * required type. This means that ClassCastException can't be thrown on casting\n\t * the result correctly, as can happen with {@link #getBean(String)}.\n\t * <p>Translates aliases back to the corresponding canonical bean name.\n\t * Will ask the parent factory if the bean cannot be found in this factory instance.\n\t * @param name the name of the bean to retrieve\n\t * @param requiredType type the bean must match; can be an interface or superclass\n\t * @return an instance of the bean\n\t * @throws NoSuchBeanDefinitionException if there is no such bean definition\n\t * @throws BeanNotOfRequiredTypeException if the bean is not of the required type\n\t * @throws BeansException if the bean could not be created\n\t */\n\t<T> T getBean(String name, Class<T> requiredType) throws BeansException;\n\n\t/**\n\t * Return an instance, which may be shared or independent, of the specified bean.\n\t * <p>Allows for specifying explicit constructor arguments / factory method arguments,\n\t * overriding the specified default arguments (if any) in the bean definition.\n\t * @param name the name of the bean to retrieve\n\t * @param args arguments to use when creating a bean instance using explicit arguments\n\t * (only applied when creating a new instance as opposed to retrieving an existing one)\n\t * @return an instance of the bean\n\t * @throws NoSuchBeanDefinitionException if there is no such bean definition\n\t * @throws BeanDefinitionStoreException if arguments have been given but\n\t * the affected bean isn't a prototype\n\t * @throws BeansException if the bean could not be created\n\t * @since 2.5\n\t */\n\tObject getBean(String name, Object... args) throws BeansException;\n\n\t/**\n\t * Return the bean instance that uniquely matches the given object type, if any.\n\t * <p>This method goes into {@link ListableBeanFactory} by-type lookup territory\n\t * but may also be translated into a conventional by-name lookup based on the name\n\t * of the given type. For more extensive retrieval operations across sets of beans,\n\t * use {@link ListableBeanFactory} and/or {@link BeanFactoryUtils}.\n\t * @param requiredType type the bean must match; can be an interface or superclass\n\t * @return an instance of the single bean matching the required type\n\t * @throws NoSuchBeanDefinitionException if no bean of the given type was found\n\t * @throws NoUniqueBeanDefinitionException if more than one bean of the given type was found\n\t * @throws BeansException if the bean could not be created\n\t * @since 3.0\n\t * @see ListableBeanFactory\n\t */\n\t<T> T getBean(Class<T> requiredType) throws BeansException;\n\n\t/**\n\t * Return an instance, which may be shared or independent, of the specified bean.\n\t * <p>Allows for specifying explicit constructor arguments / factory method arguments,\n\t * overriding the specified default arguments (if any) in the bean definition.\n\t * <p>This method goes into {@link ListableBeanFactory} by-type lookup territory\n\t * but may also be translated into a conventional by-name lookup based on the name\n\t * of the given type. For more extensive retrieval operations across sets of beans,\n\t * use {@link ListableBeanFactory} and/or {@link BeanFactoryUtils}.\n\t * @param requiredType type the bean must match; can be an interface or superclass\n\t * @param args arguments to use when creating a bean instance using explicit arguments\n\t * (only applied when creating a new instance as opposed to retrieving an existing one)\n\t * @return an instance of the bean\n\t * @throws NoSuchBeanDefinitionException if there is no such bean definition\n\t * @throws BeanDefinitionStoreException if arguments have been given but\n\t * the affected bean isn't a prototype\n\t * @throws BeansException if the bean could not be created\n\t * @since 4.1\n\t */\n\t<T> T getBean(Class<T> requiredType, Object... args) throws BeansException;\n\n\t/**\n\t * Return a provider for the specified bean, allowing for lazy on-demand retrieval\n\t * of instances, including availability and uniqueness options.\n\t * @param requiredType type the bean must match; can be an interface or superclass\n\t * @return a corresponding provider handle\n\t * @since 5.1\n\t * @see #getBeanProvider(ResolvableType)\n\t */\n\t<T> ObjectProvider<T> getBeanProvider(Class<T> requiredType);\n\n\t/**\n\t * Return a provider for the specified bean, allowing for lazy on-demand retrieval\n\t * of instances, including availability and uniqueness options.\n\t * @param requiredType type the bean must match; can be a generic type declaration.\n\t * Note that collection types are not supported here, in contrast to reflective\n\t * injection points. For programmatically retrieving a list of beans matching a\n\t * specific type, specify the actual bean type as an argument here and subsequently\n\t * use {@link ObjectProvider#orderedStream()} or its lazy streaming/iteration options.\n\t * @return a corresponding provider handle\n\t * @since 5.1\n\t * @see ObjectProvider#iterator()\n\t * @see ObjectProvider#stream()\n\t * @see ObjectProvider#orderedStream()\n\t */\n\t<T> ObjectProvider<T> getBeanProvider(ResolvableType requiredType);\n\n\t/**\n\t * Does this bean factory contain a bean definition or externally registered singleton\n\t * instance with the given name?\n\t * <p>If the given name is an alias, it will be translated back to the corresponding\n\t * canonical bean name.\n\t * <p>If this factory is hierarchical, will ask any parent factory if the bean cannot\n\t * be found in this factory instance.\n\t * <p>If a bean definition or singleton instance matching the given name is found,\n\t * this method will return {@code true} whether the named bean definition is concrete\n\t * or abstract, lazy or eager, in scope or not. Therefore, note that a {@code true}\n\t * return value from this method does not necessarily indicate that {@link #getBean}\n\t * will be able to obtain an instance for the same name.\n\t * @param name the name of the bean to query\n\t * @return whether a bean with the given name is present\n\t */\n\tboolean containsBean(String name);\n\n\t/**\n\t * Is this bean a shared singleton? That is, will {@link #getBean} always\n\t * return the same instance?\n\t * <p>Note: This method returning {@code false} does not clearly indicate\n\t * independent instances. It indicates non-singleton instances, which may correspond\n\t * to a scoped bean as well. Use the {@link #isPrototype} operation to explicitly\n\t * check for independent instances.\n\t * <p>Translates aliases back to the corresponding canonical bean name.\n\t * Will ask the parent factory if the bean cannot be found in this factory instance.\n\t * @param name the name of the bean to query\n\t * @return whether this bean corresponds to a singleton instance\n\t * @throws NoSuchBeanDefinitionException if there is no bean with the given name\n\t * @see #getBean\n\t * @see #isPrototype\n\t */\n\tboolean isSingleton(String name) throws NoSuchBeanDefinitionException;\n\n\t/**\n\t * Is this bean a prototype? That is, will {@link #getBean} always return\n\t * independent instances?\n\t * <p>Note: This method returning {@code false} does not clearly indicate\n\t * a singleton object. It indicates non-independent instances, which may correspond\n\t * to a scoped bean as well. Use the {@link #isSingleton} operation to explicitly\n\t * check for a shared singleton instance.\n\t * <p>Translates aliases back to the corresponding canonical bean name.\n\t * Will ask the parent factory if the bean cannot be found in this factory instance.\n\t * @param name the name of the bean to query\n\t * @return whether this bean will always deliver independent instances\n\t * @throws NoSuchBeanDefinitionException if there is no bean with the given name\n\t * @since 2.0.3\n\t * @see #getBean\n\t * @see #isSingleton\n\t */\n\tboolean isPrototype(String name) throws NoSuchBeanDefinitionException;\n\n\t/**\n\t * Check whether the bean with the given name matches the specified type.\n\t * More specifically, check whether a {@link #getBean} call for the given name\n\t * would return an object that is assignable to the specified target type.\n\t * <p>Translates aliases back to the corresponding canonical bean name.\n\t * Will ask the parent factory if the bean cannot be found in this factory instance.\n\t * @param name the name of the bean to query\n\t * @param typeToMatch the type to match against (as a {@code ResolvableType})\n\t * @return {@code true} if the bean type matches,\n\t * {@code false} if it doesn't match or cannot be determined yet\n\t * @throws NoSuchBeanDefinitionException if there is no bean with the given name\n\t * @since 4.2\n\t * @see #getBean\n\t * @see #getType\n\t */\n\tboolean isTypeMatch(String name, ResolvableType typeToMatch) throws NoSuchBeanDefinitionException;\n\n\t/**\n\t * Check whether the bean with the given name matches the specified type.\n\t * More specifically, check whether a {@link #getBean} call for the given name\n\t * would return an object that is assignable to the specified target type.\n\t * <p>Translates aliases back to the corresponding canonical bean name.\n\t * Will ask the parent factory if the bean cannot be found in this factory instance.\n\t * @param name the name of the bean to query\n\t * @param typeToMatch the type to match against (as a {@code Class})\n\t * @return {@code true} if the bean type matches,\n\t * {@code false} if it doesn't match or cannot be determined yet\n\t * @throws NoSuchBeanDefinitionException if there is no bean with the given name\n\t * @since 2.0.1\n\t * @see #getBean\n\t * @see #getType\n\t */\n\tboolean isTypeMatch(String name, Class<?> typeToMatch) throws NoSuchBeanDefinitionException;\n\n\t/**\n\t * Determine the type of the bean with the given name. More specifically,\n\t * determine the type of object that {@link #getBean} would return for the given name.\n\t * <p>For a {@link FactoryBean}, return the type of object that the FactoryBean creates,\n\t * as exposed by {@link FactoryBean#getObjectType()}. This may lead to the initialization\n\t * of a previously uninitialized {@code FactoryBean} (see {@link #getType(String, boolean)}).\n\t * <p>Translates aliases back to the corresponding canonical bean name.\n\t * Will ask the parent factory if the bean cannot be found in this factory instance.\n\t * @param name the name of the bean to query\n\t * @return the type of the bean, or {@code null} if not determinable\n\t * @throws NoSuchBeanDefinitionException if there is no bean with the given name\n\t * @since 1.1.2\n\t * @see #getBean\n\t * @see #isTypeMatch\n\t */\n\t@Nullable\n\tClass<?> getType(String name) throws NoSuchBeanDefinitionException;\n\n\t/**\n\t * Determine the type of the bean with the given name. More specifically,\n\t * determine the type of object that {@link #getBean} would return for the given name.\n\t * <p>For a {@link FactoryBean}, return the type of object that the FactoryBean creates,\n\t * as exposed by {@link FactoryBean#getObjectType()}. Depending on the\n\t * {@code allowFactoryBeanInit} flag, this may lead to the initialization of a previously\n\t * uninitialized {@code FactoryBean} if no early type information is available.\n\t * <p>Translates aliases back to the corresponding canonical bean name.\n\t * Will ask the parent factory if the bean cannot be found in this factory instance.\n\t * @param name the name of the bean to query\n\t * @param allowFactoryBeanInit whether a {@code FactoryBean} may get initialized\n\t * just for the purpose of determining its object type\n\t * @return the type of the bean, or {@code null} if not determinable\n\t * @throws NoSuchBeanDefinitionException if there is no bean with the given name\n\t * @since 5.2\n\t * @see #getBean\n\t * @see #isTypeMatch\n\t */\n\t@Nullable\n\tClass<?> getType(String name, boolean allowFactoryBeanInit) throws NoSuchBeanDefinitionException;\n\n\t/**\n\t * Return the aliases for the given bean name, if any.\n\t * All of those aliases point to the same bean when used in a {@link #getBean} call.\n\t * <p>If the given name is an alias, the corresponding original bean name\n\t * and other aliases (if any) will be returned, with the original bean name\n\t * being the first element in the array.\n\t * <p>Will ask the parent factory if the bean cannot be found in this factory instance.\n\t * @param name the bean name to check for aliases\n\t * @return the aliases, or an empty array if none\n\t * @see #getBean\n\t */\n\tString[] getAliases(String name);\n\n}\n```\n\n### BeanFactory方法属性摘要\n```java\npublic interface BeanFactory {\n\n\t/**\n\t */\n\tString FACTORY_BEAN_PREFIX = \"&\";\n\n\n\t/**\n\t */\n\tObject getBean(String name) throws BeansException;\n\n\t/**\n\t */\n\t<T> T getBean(String name, Class<T> requiredType) throws BeansException;\n\n\t/**\n\t */\n\tObject getBean(String name, Object... args) throws BeansException;\n\n\t/**\n\t */\n\t<T> T getBean(Class<T> requiredType) throws BeansException;\n\n\t/**\n\t */\n\t<T> T getBean(Class<T> requiredType, Object... args) throws BeansException;\n\n\t/**\n\t */\n\t<T> ObjectProvider<T> getBeanProvider(Class<T> requiredType);\n\n\t/**\n\t */\n\t<T> ObjectProvider<T> getBeanProvider(ResolvableType requiredType);\n\n\t/**\n\t */\n\tboolean containsBean(String name);\n\n\t/**\n\t */\n\tboolean isSingleton(String name) throws NoSuchBeanDefinitionException;\n\n\t/**\n\t */\n\tboolean isPrototype(String name) throws NoSuchBeanDefinitionException;\n\n\t/**\n\t */\n\tboolean isTypeMatch(String name, ResolvableType typeToMatch) throws NoSuchBeanDefinitionException;\n\n\t/**\n\t */\n\tboolean isTypeMatch(String name, Class<?> typeToMatch) throws NoSuchBeanDefinitionException;\n\n\t/**\n\t */\n\t@Nullable\n\tClass<?> getType(String name) throws NoSuchBeanDefinitionException;\n\n\t/**\n\t */\n\t@Nullable\n\tClass<?> getType(String name, boolean allowFactoryBeanInit) throws NoSuchBeanDefinitionException;\n\n\t/**\n\t */\n\tString[] getAliases(String name);\n\n}\n```\n\n\n### 1.2 HierarchicalBeanFactory接口\n### 完整版源码：\n```java\n/*\n * Copyright 2002-2012 the original author or authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\npackage org.springframework.beans.factory;\n\nimport org.springframework.lang.Nullable;\n\n/**\n * Sub-interface implemented by bean factories that can be part\n * of a hierarchy.\n *\n * <p>The corresponding {@code setParentBeanFactory} method for bean\n * factories that allow setting the parent in a configurable\n * fashion can be found in the ConfigurableBeanFactory interface.\n *\n * @author Rod Johnson\n * @author Juergen Hoeller\n * @since 07.07.2003\n * @see org.springframework.beans.factory.config.ConfigurableBeanFactory#setParentBeanFactory\n */\npublic interface HierarchicalBeanFactory extends BeanFactory {\n\n\t/**\n\t * Return the parent bean factory, or {@code null} if there is none.\n\t */\n\t@Nullable\n\tBeanFactory getParentBeanFactory();\n\n\t/**\n\t * Return whether the local bean factory contains a bean of the given name,\n\t * ignoring beans defined in ancestor contexts.\n\t * <p>This is an alternative to {@code containsBean}, ignoring a bean\n\t * of the given name from an ancestor bean factory.\n\t * @param name the name of the bean to query\n\t * @return whether a bean with the given name is defined in the local factory\n\t * @see BeanFactory#containsBean\n\t */\n\tboolean containsLocalBean(String name);\n\n}\n\n```\n\n### HierarchicalBeanFactory方法属性摘要\n```java\npublic interface HierarchicalBeanFactory extends BeanFactory {\n\n\t/**\n\t */\n\t@Nullable\n\tBeanFactory getParentBeanFactory();\n\n\t/**\n\t */\n\tboolean containsLocalBean(String name);\n\n}\n```\n\n### 1.3 ListableBeanFactory接口\n### 完整版源码：\n```java\n/*\n * Copyright 2002-2019 the original author or authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\npackage org.springframework.beans.factory;\n\nimport java.lang.annotation.Annotation;\nimport java.util.Map;\n\nimport org.springframework.beans.BeansException;\nimport org.springframework.core.ResolvableType;\nimport org.springframework.lang.Nullable;\n\n/**\n * Extension of the {@link BeanFactory} interface to be implemented by bean factories\n * that can enumerate all their bean instances, rather than attempting bean lookup\n * by name one by one as requested by clients. BeanFactory implementations that\n * preload all their bean definitions (such as XML-based factories) may implement\n * this interface.\n *\n * <p>If this is a {@link HierarchicalBeanFactory}, the return values will <i>not</i>\n * take any BeanFactory hierarchy into account, but will relate only to the beans\n * defined in the current factory. Use the {@link BeanFactoryUtils} helper class\n * to consider beans in ancestor factories too.\n *\n * <p>The methods in this interface will just respect bean definitions of this factory.\n * They will ignore any singleton beans that have been registered by other means like\n * {@link org.springframework.beans.factory.config.ConfigurableBeanFactory}'s\n * {@code registerSingleton} method, with the exception of\n * {@code getBeanNamesOfType} and {@code getBeansOfType} which will check\n * such manually registered singletons too. Of course, BeanFactory's {@code getBean}\n * does allow transparent access to such special beans as well. However, in typical\n * scenarios, all beans will be defined by external bean definitions anyway, so most\n * applications don't need to worry about this differentiation.\n *\n * <p><b>NOTE:</b> With the exception of {@code getBeanDefinitionCount}\n * and {@code containsBeanDefinition}, the methods in this interface\n * are not designed for frequent invocation. Implementations may be slow.\n *\n * @author Rod Johnson\n * @author Juergen Hoeller\n * @since 16 April 2001\n * @see HierarchicalBeanFactory\n * @see BeanFactoryUtils\n */\npublic interface ListableBeanFactory extends BeanFactory {\n\n\t/**\n\t * Check if this bean factory contains a bean definition with the given name.\n\t * <p>Does not consider any hierarchy this factory may participate in,\n\t * and ignores any singleton beans that have been registered by\n\t * other means than bean definitions.\n\t * @param beanName the name of the bean to look for\n\t * @return if this bean factory contains a bean definition with the given name\n\t * @see #containsBean\n\t */\n\tboolean containsBeanDefinition(String beanName);\n\n\t/**\n\t * Return the number of beans defined in the factory.\n\t * <p>Does not consider any hierarchy this factory may participate in,\n\t * and ignores any singleton beans that have been registered by\n\t * other means than bean definitions.\n\t * @return the number of beans defined in the factory\n\t */\n\tint getBeanDefinitionCount();\n\n\t/**\n\t * Return the names of all beans defined in this factory.\n\t * <p>Does not consider any hierarchy this factory may participate in,\n\t * and ignores any singleton beans that have been registered by\n\t * other means than bean definitions.\n\t * @return the names of all beans defined in this factory,\n\t * or an empty array if none defined\n\t */\n\tString[] getBeanDefinitionNames();\n\n\t/**\n\t * Return the names of beans matching the given type (including subclasses),\n\t * judging from either bean definitions or the value of {@code getObjectType}\n\t * in the case of FactoryBeans.\n\t * <p><b>NOTE: This method introspects top-level beans only.</b> It does <i>not</i>\n\t * check nested beans which might match the specified type as well.\n\t * <p>Does consider objects created by FactoryBeans, which means that FactoryBeans\n\t * will get initialized. If the object created by the FactoryBean doesn't match,\n\t * the raw FactoryBean itself will be matched against the type.\n\t * <p>Does not consider any hierarchy this factory may participate in.\n\t * Use BeanFactoryUtils' {@code beanNamesForTypeIncludingAncestors}\n\t * to include beans in ancestor factories too.\n\t * <p>Note: Does <i>not</i> ignore singleton beans that have been registered\n\t * by other means than bean definitions.\n\t * <p>This version of {@code getBeanNamesForType} matches all kinds of beans,\n\t * be it singletons, prototypes, or FactoryBeans. In most implementations, the\n\t * result will be the same as for {@code getBeanNamesForType(type, true, true)}.\n\t * <p>Bean names returned by this method should always return bean names <i>in the\n\t * order of definition</i> in the backend configuration, as far as possible.\n\t * @param type the generically typed class or interface to match\n\t * @return the names of beans (or objects created by FactoryBeans) matching\n\t * the given object type (including subclasses), or an empty array if none\n\t * @since 4.2\n\t * @see #isTypeMatch(String, ResolvableType)\n\t * @see FactoryBean#getObjectType\n\t * @see BeanFactoryUtils#beanNamesForTypeIncludingAncestors(ListableBeanFactory, ResolvableType)\n\t */\n\tString[] getBeanNamesForType(ResolvableType type);\n\n\t/**\n\t * Return the names of beans matching the given type (including subclasses),\n\t * judging from either bean definitions or the value of {@code getObjectType}\n\t * in the case of FactoryBeans.\n\t * <p><b>NOTE: This method introspects top-level beans only.</b> It does <i>not</i>\n\t * check nested beans which might match the specified type as well.\n\t * <p>Does consider objects created by FactoryBeans if the \"allowEagerInit\" flag is set,\n\t * which means that FactoryBeans will get initialized. If the object created by the\n\t * FactoryBean doesn't match, the raw FactoryBean itself will be matched against the\n\t * type. If \"allowEagerInit\" is not set, only raw FactoryBeans will be checked\n\t * (which doesn't require initialization of each FactoryBean).\n\t * <p>Does not consider any hierarchy this factory may participate in.\n\t * Use BeanFactoryUtils' {@code beanNamesForTypeIncludingAncestors}\n\t * to include beans in ancestor factories too.\n\t * <p>Note: Does <i>not</i> ignore singleton beans that have been registered\n\t * by other means than bean definitions.\n\t * <p>Bean names returned by this method should always return bean names <i>in the\n\t * order of definition</i> in the backend configuration, as far as possible.\n\t * @param type the generically typed class or interface to match\n\t * @param includeNonSingletons whether to include prototype or scoped beans too\n\t * or just singletons (also applies to FactoryBeans)\n\t * @param allowEagerInit whether to initialize <i>lazy-init singletons</i> and\n\t * <i>objects created by FactoryBeans</i> (or by factory methods with a\n\t * \"factory-bean\" reference) for the type check. Note that FactoryBeans need to be\n\t * eagerly initialized to determine their type: So be aware that passing in \"true\"\n\t * for this flag will initialize FactoryBeans and \"factory-bean\" references.\n\t * @return the names of beans (or objects created by FactoryBeans) matching\n\t * the given object type (including subclasses), or an empty array if none\n\t * @since 5.2\n\t * @see FactoryBean#getObjectType\n\t * @see BeanFactoryUtils#beanNamesForTypeIncludingAncestors(ListableBeanFactory, ResolvableType, boolean, boolean)\n\t */\n\tString[] getBeanNamesForType(ResolvableType type, boolean includeNonSingletons, boolean allowEagerInit);\n\n\t/**\n\t * Return the names of beans matching the given type (including subclasses),\n\t * judging from either bean definitions or the value of {@code getObjectType}\n\t * in the case of FactoryBeans.\n\t * <p><b>NOTE: This method introspects top-level beans only.</b> It does <i>not</i>\n\t * check nested beans which might match the specified type as well.\n\t * <p>Does consider objects created by FactoryBeans, which means that FactoryBeans\n\t * will get initialized. If the object created by the FactoryBean doesn't match,\n\t * the raw FactoryBean itself will be matched against the type.\n\t * <p>Does not consider any hierarchy this factory may participate in.\n\t * Use BeanFactoryUtils' {@code beanNamesForTypeIncludingAncestors}\n\t * to include beans in ancestor factories too.\n\t * <p>Note: Does <i>not</i> ignore singleton beans that have been registered\n\t * by other means than bean definitions.\n\t * <p>This version of {@code getBeanNamesForType} matches all kinds of beans,\n\t * be it singletons, prototypes, or FactoryBeans. In most implementations, the\n\t * result will be the same as for {@code getBeanNamesForType(type, true, true)}.\n\t * <p>Bean names returned by this method should always return bean names <i>in the\n\t * order of definition</i> in the backend configuration, as far as possible.\n\t * @param type the class or interface to match, or {@code null} for all bean names\n\t * @return the names of beans (or objects created by FactoryBeans) matching\n\t * the given object type (including subclasses), or an empty array if none\n\t * @see FactoryBean#getObjectType\n\t * @see BeanFactoryUtils#beanNamesForTypeIncludingAncestors(ListableBeanFactory, Class)\n\t */\n\tString[] getBeanNamesForType(@Nullable Class<?> type);\n\n\t/**\n\t * Return the names of beans matching the given type (including subclasses),\n\t * judging from either bean definitions or the value of {@code getObjectType}\n\t * in the case of FactoryBeans.\n\t * <p><b>NOTE: This method introspects top-level beans only.</b> It does <i>not</i>\n\t * check nested beans which might match the specified type as well.\n\t * <p>Does consider objects created by FactoryBeans if the \"allowEagerInit\" flag is set,\n\t * which means that FactoryBeans will get initialized. If the object created by the\n\t * FactoryBean doesn't match, the raw FactoryBean itself will be matched against the\n\t * type. If \"allowEagerInit\" is not set, only raw FactoryBeans will be checked\n\t * (which doesn't require initialization of each FactoryBean).\n\t * <p>Does not consider any hierarchy this factory may participate in.\n\t * Use BeanFactoryUtils' {@code beanNamesForTypeIncludingAncestors}\n\t * to include beans in ancestor factories too.\n\t * <p>Note: Does <i>not</i> ignore singleton beans that have been registered\n\t * by other means than bean definitions.\n\t * <p>Bean names returned by this method should always return bean names <i>in the\n\t * order of definition</i> in the backend configuration, as far as possible.\n\t * @param type the class or interface to match, or {@code null} for all bean names\n\t * @param includeNonSingletons whether to include prototype or scoped beans too\n\t * or just singletons (also applies to FactoryBeans)\n\t * @param allowEagerInit whether to initialize <i>lazy-init singletons</i> and\n\t * <i>objects created by FactoryBeans</i> (or by factory methods with a\n\t * \"factory-bean\" reference) for the type check. Note that FactoryBeans need to be\n\t * eagerly initialized to determine their type: So be aware that passing in \"true\"\n\t * for this flag will initialize FactoryBeans and \"factory-bean\" references.\n\t * @return the names of beans (or objects created by FactoryBeans) matching\n\t * the given object type (including subclasses), or an empty array if none\n\t * @see FactoryBean#getObjectType\n\t * @see BeanFactoryUtils#beanNamesForTypeIncludingAncestors(ListableBeanFactory, Class, boolean, boolean)\n\t */\n\tString[] getBeanNamesForType(@Nullable Class<?> type, boolean includeNonSingletons, boolean allowEagerInit);\n\n\t/**\n\t * Return the bean instances that match the given object type (including\n\t * subclasses), judging from either bean definitions or the value of\n\t * {@code getObjectType} in the case of FactoryBeans.\n\t * <p><b>NOTE: This method introspects top-level beans only.</b> It does <i>not</i>\n\t * check nested beans which might match the specified type as well.\n\t * <p>Does consider objects created by FactoryBeans, which means that FactoryBeans\n\t * will get initialized. If the object created by the FactoryBean doesn't match,\n\t * the raw FactoryBean itself will be matched against the type.\n\t * <p>Does not consider any hierarchy this factory may participate in.\n\t * Use BeanFactoryUtils' {@code beansOfTypeIncludingAncestors}\n\t * to include beans in ancestor factories too.\n\t * <p>Note: Does <i>not</i> ignore singleton beans that have been registered\n\t * by other means than bean definitions.\n\t * <p>This version of getBeansOfType matches all kinds of beans, be it\n\t * singletons, prototypes, or FactoryBeans. In most implementations, the\n\t * result will be the same as for {@code getBeansOfType(type, true, true)}.\n\t * <p>The Map returned by this method should always return bean names and\n\t * corresponding bean instances <i>in the order of definition</i> in the\n\t * backend configuration, as far as possible.\n\t * @param type the class or interface to match, or {@code null} for all concrete beans\n\t * @return a Map with the matching beans, containing the bean names as\n\t * keys and the corresponding bean instances as values\n\t * @throws BeansException if a bean could not be created\n\t * @since 1.1.2\n\t * @see FactoryBean#getObjectType\n\t * @see BeanFactoryUtils#beansOfTypeIncludingAncestors(ListableBeanFactory, Class)\n\t */\n\t<T> Map<String, T> getBeansOfType(@Nullable Class<T> type) throws BeansException;\n\n\t/**\n\t * Return the bean instances that match the given object type (including\n\t * subclasses), judging from either bean definitions or the value of\n\t * {@code getObjectType} in the case of FactoryBeans.\n\t * <p><b>NOTE: This method introspects top-level beans only.</b> It does <i>not</i>\n\t * check nested beans which might match the specified type as well.\n\t * <p>Does consider objects created by FactoryBeans if the \"allowEagerInit\" flag is set,\n\t * which means that FactoryBeans will get initialized. If the object created by the\n\t * FactoryBean doesn't match, the raw FactoryBean itself will be matched against the\n\t * type. If \"allowEagerInit\" is not set, only raw FactoryBeans will be checked\n\t * (which doesn't require initialization of each FactoryBean).\n\t * <p>Does not consider any hierarchy this factory may participate in.\n\t * Use BeanFactoryUtils' {@code beansOfTypeIncludingAncestors}\n\t * to include beans in ancestor factories too.\n\t * <p>Note: Does <i>not</i> ignore singleton beans that have been registered\n\t * by other means than bean definitions.\n\t * <p>The Map returned by this method should always return bean names and\n\t * corresponding bean instances <i>in the order of definition</i> in the\n\t * backend configuration, as far as possible.\n\t * @param type the class or interface to match, or {@code null} for all concrete beans\n\t * @param includeNonSingletons whether to include prototype or scoped beans too\n\t * or just singletons (also applies to FactoryBeans)\n\t * @param allowEagerInit whether to initialize <i>lazy-init singletons</i> and\n\t * <i>objects created by FactoryBeans</i> (or by factory methods with a\n\t * \"factory-bean\" reference) for the type check. Note that FactoryBeans need to be\n\t * eagerly initialized to determine their type: So be aware that passing in \"true\"\n\t * for this flag will initialize FactoryBeans and \"factory-bean\" references.\n\t * @return a Map with the matching beans, containing the bean names as\n\t * keys and the corresponding bean instances as values\n\t * @throws BeansException if a bean could not be created\n\t * @see FactoryBean#getObjectType\n\t * @see BeanFactoryUtils#beansOfTypeIncludingAncestors(ListableBeanFactory, Class, boolean, boolean)\n\t */\n\t<T> Map<String, T> getBeansOfType(@Nullable Class<T> type, boolean includeNonSingletons, boolean allowEagerInit)\n\t\t\tthrows BeansException;\n\n\t/**\n\t * Find all names of beans which are annotated with the supplied {@link Annotation}\n\t * type, without creating corresponding bean instances yet.\n\t * <p>Note that this method considers objects created by FactoryBeans, which means\n\t * that FactoryBeans will get initialized in order to determine their object type.\n\t * @param annotationType the type of annotation to look for\n\t * (at class, interface or factory method level of the specified bean)\n\t * @return the names of all matching beans\n\t * @since 4.0\n\t * @see #findAnnotationOnBean\n\t */\n\tString[] getBeanNamesForAnnotation(Class<? extends Annotation> annotationType);\n\n\t/**\n\t * Find all beans which are annotated with the supplied {@link Annotation} type,\n\t * returning a Map of bean names with corresponding bean instances.\n\t * <p>Note that this method considers objects created by FactoryBeans, which means\n\t * that FactoryBeans will get initialized in order to determine their object type.\n\t * @param annotationType the type of annotation to look for\n\t * (at class, interface or factory method level of the specified bean)\n\t * @return a Map with the matching beans, containing the bean names as\n\t * keys and the corresponding bean instances as values\n\t * @throws BeansException if a bean could not be created\n\t * @since 3.0\n\t * @see #findAnnotationOnBean\n\t */\n\tMap<String, Object> getBeansWithAnnotation(Class<? extends Annotation> annotationType) throws BeansException;\n\n\t/**\n\t * Find an {@link Annotation} of {@code annotationType} on the specified bean,\n\t * traversing its interfaces and super classes if no annotation can be found on\n\t * the given class itself, as well as checking the bean's factory method (if any).\n\t * @param beanName the name of the bean to look for annotations on\n\t * @param annotationType the type of annotation to look for\n\t * (at class, interface or factory method level of the specified bean)\n\t * @return the annotation of the given type if found, or {@code null} otherwise\n\t * @throws NoSuchBeanDefinitionException if there is no bean with the given name\n\t * @since 3.0\n\t * @see #getBeanNamesForAnnotation\n\t * @see #getBeansWithAnnotation\n\t */\n\t@Nullable\n\t<A extends Annotation> A findAnnotationOnBean(String beanName, Class<A> annotationType)\n\t\t\tthrows NoSuchBeanDefinitionException;\n\n}\n```\n\n### ListableBeanFactory方法属性摘要\n```java\npublic interface ListableBeanFactory extends BeanFactory {\n\n\t/**\n\t */\n\tboolean containsBeanDefinition(String beanName);\n\n\t/**\n\t */\n\tint getBeanDefinitionCount();\n\n\t/**\n\t */\n\tString[] getBeanDefinitionNames();\n\n\t/**\n\t */\n\tString[] getBeanNamesForType(ResolvableType type);\n\n\t/**\n\t */\n\tString[] getBeanNamesForType(ResolvableType type, boolean includeNonSingletons, boolean allowEagerInit);\n\n\t/**\n\t */\n\tString[] getBeanNamesForType(@Nullable Class<?> type);\n\n\t/**\n\t */\n\tString[] getBeanNamesForType(@Nullable Class<?> type, boolean includeNonSingletons, boolean allowEagerInit);\n\n\n\t<T> Map<String, T> getBeansOfType(@Nullable Class<T> type) throws BeansException;\n\n\n\t<T> Map<String, T> getBeansOfType(@Nullable Class<T> type, boolean includeNonSingletons, boolean allowEagerInit)\n\t\t\tthrows BeansException;\n\n\n\tString[] getBeanNamesForAnnotation(Class<? extends Annotation> annotationType);\n\n\n\tMap<String, Object> getBeansWithAnnotation(Class<? extends Annotation> annotationType) throws BeansException;\n\n\n\t@Nullable\n\t<A extends Annotation> A findAnnotationOnBean(String beanName, Class<A> annotationType)\n\t\t\tthrows NoSuchBeanDefinitionException;\n\n}\n```\n\n## 1.4 ApplicationContext接口\n### ApplicationContext接口解析\n- 相比于BeanFactory,ApplicationContext是高配版的Ioc容器，其在BeanFactory的基础上实现了更加复杂的扩展功能\n- ListableBeanFactory, HierarchicalBeanFactory都是BeanFactory的子接口，ApplicationContext继承了这两个接口，ApplicationContext进一步扩展了BeanFactory接口的功能\n- . . .\n\n### 完整版源码：\n```java\n/*\n * Copyright 2002-2014 the original author or authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\npackage org.springframework.context;\n\nimport org.springframework.beans.factory.HierarchicalBeanFactory;\nimport org.springframework.beans.factory.ListableBeanFactory;\nimport org.springframework.beans.factory.config.AutowireCapableBeanFactory;\nimport org.springframework.core.env.EnvironmentCapable;\nimport org.springframework.core.io.support.ResourcePatternResolver;\nimport org.springframework.lang.Nullable;\n\n/**\n * Central interface to provide configuration for an application.\n * This is read-only while the application is running, but may be\n * reloaded if the implementation supports this.\n *\n * <p>An ApplicationContext provides:\n * <ul>\n * <li>Bean factory methods for accessing application components.\n * Inherited from {@link org.springframework.beans.factory.ListableBeanFactory}.\n * <li>The ability to load file resources in a generic fashion.\n * Inherited from the {@link org.springframework.core.io.ResourceLoader} interface.\n * <li>The ability to publish events to registered listeners.\n * Inherited from the {@link ApplicationEventPublisher} interface.\n * <li>The ability to resolve messages, supporting internationalization.\n * Inherited from the {@link MessageSource} interface.\n * <li>Inheritance from a parent context. Definitions in a descendant context\n * will always take priority. This means, for example, that a single parent\n * context can be used by an entire web application, while each servlet has\n * its own child context that is independent of that of any other servlet.\n * </ul>\n *\n * <p>In addition to standard {@link org.springframework.beans.factory.BeanFactory}\n * lifecycle capabilities, ApplicationContext implementations detect and invoke\n * {@link ApplicationContextAware} beans as well as {@link ResourceLoaderAware},\n * {@link ApplicationEventPublisherAware} and {@link MessageSourceAware} beans.\n *\n * @author Rod Johnson\n * @author Juergen Hoeller\n * @see ConfigurableApplicationContext\n * @see org.springframework.beans.factory.BeanFactory\n * @see org.springframework.core.io.ResourceLoader\n */\npublic interface ApplicationContext extends EnvironmentCapable, ListableBeanFactory, HierarchicalBeanFactory,\n\t\tMessageSource, ApplicationEventPublisher, ResourcePatternResolver {\n\n\t/**\n\t * Return the unique id of this application context.\n\t * @return the unique id of the context, or {@code null} if none\n\t */\n\t@Nullable\n\tString getId();\n\n\t/**\n\t * Return a name for the deployed application that this context belongs to.\n\t * @return a name for the deployed application, or the empty String by default\n\t */\n\tString getApplicationName();\n\n\t/**\n\t * Return a friendly name for this context.\n\t * @return a display name for this context (never {@code null})\n\t */\n\tString getDisplayName();\n\n\t/**\n\t * Return the timestamp when this context was first loaded.\n\t * @return the timestamp (ms) when this context was first loaded\n\t */\n\tlong getStartupDate();\n\n\t/**\n\t * Return the parent context, or {@code null} if there is no parent\n\t * and this is the root of the context hierarchy.\n\t * @return the parent context, or {@code null} if there is no parent\n\t */\n\t@Nullable\n\tApplicationContext getParent();\n\n\t/**\n\t * Expose AutowireCapableBeanFactory functionality for this context.\n\t * <p>This is not typically used by application code, except for the purpose of\n\t * initializing bean instances that live outside of the application context,\n\t * applying the Spring bean lifecycle (fully or partly) to them.\n\t * <p>Alternatively, the internal BeanFactory exposed by the\n\t * {@link ConfigurableApplicationContext} interface offers access to the\n\t * {@link AutowireCapableBeanFactory} interface too. The present method mainly\n\t * serves as a convenient, specific facility on the ApplicationContext interface.\n\t * <p><b>NOTE: As of 4.2, this method will consistently throw IllegalStateException\n\t * after the application context has been closed.</b> In current Spring Framework\n\t * versions, only refreshable application contexts behave that way; as of 4.2,\n\t * all application context implementations will be required to comply.\n\t * @return the AutowireCapableBeanFactory for this context\n\t * @throws IllegalStateException if the context does not support the\n\t * {@link AutowireCapableBeanFactory} interface, or does not hold an\n\t * autowire-capable bean factory yet (e.g. if {@code refresh()} has\n\t * never been called), or if the context has been closed already\n\t * @see ConfigurableApplicationContext#refresh()\n\t * @see ConfigurableApplicationContext#getBeanFactory()\n\t */\n\tAutowireCapableBeanFactory getAutowireCapableBeanFactory() throws IllegalStateException;\n\n}\n```\n### ApplicationContext方法属性摘要\n```java\npublic interface ApplicationContext extends EnvironmentCapable, ListableBeanFactory, HierarchicalBeanFactory,\n\t\tMessageSource, ApplicationEventPublisher, ResourcePatternResolver {\n\n\t@Nullable\n\tString getId();\n\n\n\tString getApplicationName();\n\n\n\tString getDisplayName();\n\n\n\tlong getStartupDate();\n\n\n\t@Nullable\n\tApplicationContext getParent();\n\n\tAutowireCapableBeanFactory getAutowireCapableBeanFactory() throws IllegalStateException;\n\n}\n```\n\n## 1.5 BeanDefination接口 \n### BeanDefination接口定义解析\n- BeanDefination用于管理Ioc容器中JavaBean与JavaBean之间的依赖关系，其抽象了Java开发人员对于JavaBean的定义\n- Spring将开发人员定义的JavaBean的数据结构转化为内存中的BeanDefination数据结构进行维护\n\n### 完整版源码：\n```java\n/*\n * Copyright 2002-2019 the original author or authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\npackage org.springframework.beans.factory.config;\n\nimport org.springframework.beans.BeanMetadataElement;\nimport org.springframework.beans.MutablePropertyValues;\nimport org.springframework.core.AttributeAccessor;\nimport org.springframework.core.ResolvableType;\nimport org.springframework.lang.Nullable;\n\n/**\n * A BeanDefinition describes a bean instance, which has property values,\n * constructor argument values, and further information supplied by\n * concrete implementations.\n *\n * <p>This is just a minimal interface: The main intention is to allow a\n * {@link BeanFactoryPostProcessor} to introspect and modify property values\n * and other bean metadata.\n *\n * @author Juergen Hoeller\n * @author Rob Harrop\n * @since 19.03.2004\n * @see ConfigurableListableBeanFactory#getBeanDefinition\n * @see org.springframework.beans.factory.support.RootBeanDefinition\n * @see org.springframework.beans.factory.support.ChildBeanDefinition\n */\npublic interface BeanDefinition extends AttributeAccessor, BeanMetadataElement {\n\n\t/**\n\t * Scope identifier for the standard singleton scope: \"singleton\".\n\t * <p>Note that extended bean factories might support further scopes.\n\t * @see #setScope\n\t */\n\tString SCOPE_SINGLETON = ConfigurableBeanFactory.SCOPE_SINGLETON;\n\n\t/**\n\t * Scope identifier for the standard prototype scope: \"prototype\".\n\t * <p>Note that extended bean factories might support further scopes.\n\t * @see #setScope\n\t */\n\tString SCOPE_PROTOTYPE = ConfigurableBeanFactory.SCOPE_PROTOTYPE;\n\n\n\t/**\n\t * Role hint indicating that a {@code BeanDefinition} is a major part\n\t * of the application. Typically corresponds to a user-defined bean.\n\t */\n\tint ROLE_APPLICATION = 0;\n\n\t/**\n\t * Role hint indicating that a {@code BeanDefinition} is a supporting\n\t * part of some larger configuration, typically an outer\n\t * {@link org.springframework.beans.factory.parsing.ComponentDefinition}.\n\t * {@code SUPPORT} beans are considered important enough to be aware\n\t * of when looking more closely at a particular\n\t * {@link org.springframework.beans.factory.parsing.ComponentDefinition},\n\t * but not when looking at the overall configuration of an application.\n\t */\n\tint ROLE_SUPPORT = 1;\n\n\t/**\n\t * Role hint indicating that a {@code BeanDefinition} is providing an\n\t * entirely background role and has no relevance to the end-user. This hint is\n\t * used when registering beans that are completely part of the internal workings\n\t * of a {@link org.springframework.beans.factory.parsing.ComponentDefinition}.\n\t */\n\tint ROLE_INFRASTRUCTURE = 2;\n\n\n\t// Modifiable attributes\n\n\t/**\n\t * Set the name of the parent definition of this bean definition, if any.\n\t */\n\tvoid setParentName(@Nullable String parentName);\n\n\t/**\n\t * Return the name of the parent definition of this bean definition, if any.\n\t */\n\t@Nullable\n\tString getParentName();\n\n\t/**\n\t * Specify the bean class name of this bean definition.\n\t * <p>The class name can be modified during bean factory post-processing,\n\t * typically replacing the original class name with a parsed variant of it.\n\t * @see #setParentName\n\t * @see #setFactoryBeanName\n\t * @see #setFactoryMethodName\n\t */\n\tvoid setBeanClassName(@Nullable String beanClassName);\n\n\t/**\n\t * Return the current bean class name of this bean definition.\n\t * <p>Note that this does not have to be the actual class name used at runtime, in\n\t * case of a child definition overriding/inheriting the class name from its parent.\n\t * Also, this may just be the class that a factory method is called on, or it may\n\t * even be empty in case of a factory bean reference that a method is called on.\n\t * Hence, do <i>not</i> consider this to be the definitive bean type at runtime but\n\t * rather only use it for parsing purposes at the individual bean definition level.\n\t * @see #getParentName()\n\t * @see #getFactoryBeanName()\n\t * @see #getFactoryMethodName()\n\t */\n\t@Nullable\n\tString getBeanClassName();\n\n\t/**\n\t * Override the target scope of this bean, specifying a new scope name.\n\t * @see #SCOPE_SINGLETON\n\t * @see #SCOPE_PROTOTYPE\n\t */\n\tvoid setScope(@Nullable String scope);\n\n\t/**\n\t * Return the name of the current target scope for this bean,\n\t * or {@code null} if not known yet.\n\t */\n\t@Nullable\n\tString getScope();\n\n\t/**\n\t * Set whether this bean should be lazily initialized.\n\t * <p>If {@code false}, the bean will get instantiated on startup by bean\n\t * factories that perform eager initialization of singletons.\n\t */\n\tvoid setLazyInit(boolean lazyInit);\n\n\t/**\n\t * Return whether this bean should be lazily initialized, i.e. not\n\t * eagerly instantiated on startup. Only applicable to a singleton bean.\n\t */\n\tboolean isLazyInit();\n\n\t/**\n\t * Set the names of the beans that this bean depends on being initialized.\n\t * The bean factory will guarantee that these beans get initialized first.\n\t */\n\tvoid setDependsOn(@Nullable String... dependsOn);\n\n\t/**\n\t * Return the bean names that this bean depends on.\n\t */\n\t@Nullable\n\tString[] getDependsOn();\n\n\t/**\n\t * Set whether this bean is a candidate for getting autowired into some other bean.\n\t * <p>Note that this flag is designed to only affect type-based autowiring.\n\t * It does not affect explicit references by name, which will get resolved even\n\t * if the specified bean is not marked as an autowire candidate. As a consequence,\n\t * autowiring by name will nevertheless inject a bean if the name matches.\n\t */\n\tvoid setAutowireCandidate(boolean autowireCandidate);\n\n\t/**\n\t * Return whether this bean is a candidate for getting autowired into some other bean.\n\t */\n\tboolean isAutowireCandidate();\n\n\t/**\n\t * Set whether this bean is a primary autowire candidate.\n\t * <p>If this value is {@code true} for exactly one bean among multiple\n\t * matching candidates, it will serve as a tie-breaker.\n\t */\n\tvoid setPrimary(boolean primary);\n\n\t/**\n\t * Return whether this bean is a primary autowire candidate.\n\t */\n\tboolean isPrimary();\n\n\t/**\n\t * Specify the factory bean to use, if any.\n\t * This the name of the bean to call the specified factory method on.\n\t * @see #setFactoryMethodName\n\t */\n\tvoid setFactoryBeanName(@Nullable String factoryBeanName);\n\n\t/**\n\t * Return the factory bean name, if any.\n\t */\n\t@Nullable\n\tString getFactoryBeanName();\n\n\t/**\n\t * Specify a factory method, if any. This method will be invoked with\n\t * constructor arguments, or with no arguments if none are specified.\n\t * The method will be invoked on the specified factory bean, if any,\n\t * or otherwise as a static method on the local bean class.\n\t * @see #setFactoryBeanName\n\t * @see #setBeanClassName\n\t */\n\tvoid setFactoryMethodName(@Nullable String factoryMethodName);\n\n\t/**\n\t * Return a factory method, if any.\n\t */\n\t@Nullable\n\tString getFactoryMethodName();\n\n\t/**\n\t * Return the constructor argument values for this bean.\n\t * <p>The returned instance can be modified during bean factory post-processing.\n\t * @return the ConstructorArgumentValues object (never {@code null})\n\t */\n\tConstructorArgumentValues getConstructorArgumentValues();\n\n\t/**\n\t * Return if there are constructor argument values defined for this bean.\n\t * @since 5.0.2\n\t */\n\tdefault boolean hasConstructorArgumentValues() {\n\t\treturn !getConstructorArgumentValues().isEmpty();\n\t}\n\n\t/**\n\t * Return the property values to be applied to a new instance of the bean.\n\t * <p>The returned instance can be modified during bean factory post-processing.\n\t * @return the MutablePropertyValues object (never {@code null})\n\t */\n\tMutablePropertyValues getPropertyValues();\n\n\t/**\n\t * Return if there are property values values defined for this bean.\n\t * @since 5.0.2\n\t */\n\tdefault boolean hasPropertyValues() {\n\t\treturn !getPropertyValues().isEmpty();\n\t}\n\n\t/**\n\t * Set the name of the initializer method.\n\t * @since 5.1\n\t */\n\tvoid setInitMethodName(@Nullable String initMethodName);\n\n\t/**\n\t * Return the name of the initializer method.\n\t * @since 5.1\n\t */\n\t@Nullable\n\tString getInitMethodName();\n\n\t/**\n\t * Set the name of the destroy method.\n\t * @since 5.1\n\t */\n\tvoid setDestroyMethodName(@Nullable String destroyMethodName);\n\n\t/**\n\t * Return the name of the destroy method.\n\t * @since 5.1\n\t */\n\t@Nullable\n\tString getDestroyMethodName();\n\n\t/**\n\t * Set the role hint for this {@code BeanDefinition}. The role hint\n\t * provides the frameworks as well as tools with an indication of\n\t * the role and importance of a particular {@code BeanDefinition}.\n\t * @since 5.1\n\t * @see #ROLE_APPLICATION\n\t * @see #ROLE_SUPPORT\n\t * @see #ROLE_INFRASTRUCTURE\n\t */\n\tvoid setRole(int role);\n\n\t/**\n\t * Get the role hint for this {@code BeanDefinition}. The role hint\n\t * provides the frameworks as well as tools with an indication of\n\t * the role and importance of a particular {@code BeanDefinition}.\n\t * @see #ROLE_APPLICATION\n\t * @see #ROLE_SUPPORT\n\t * @see #ROLE_INFRASTRUCTURE\n\t */\n\tint getRole();\n\n\t/**\n\t * Set a human-readable description of this bean definition.\n\t * @since 5.1\n\t */\n\tvoid setDescription(@Nullable String description);\n\n\t/**\n\t * Return a human-readable description of this bean definition.\n\t */\n\t@Nullable\n\tString getDescription();\n\n\n\t// Read-only attributes\n\n\t/**\n\t * Return a resolvable type for this bean definition,\n\t * based on the bean class or other specific metadata.\n\t * <p>This is typically fully resolved on a runtime-merged bean definition\n\t * but not necessarily on a configuration-time definition instance.\n\t * @return the resolvable type (potentially {@link ResolvableType#NONE})\n\t * @since 5.2\n\t * @see ConfigurableBeanFactory#getMergedBeanDefinition\n\t */\n\tResolvableType getResolvableType();\n\n\t/**\n\t * Return whether this a <b>Singleton</b>, with a single, shared instance\n\t * returned on all calls.\n\t * @see #SCOPE_SINGLETON\n\t */\n\tboolean isSingleton();\n\n\t/**\n\t * Return whether this a <b>Prototype</b>, with an independent instance\n\t * returned for each call.\n\t * @since 3.0\n\t * @see #SCOPE_PROTOTYPE\n\t */\n\tboolean isPrototype();\n\n\t/**\n\t * Return whether this bean is \"abstract\", that is, not meant to be instantiated.\n\t */\n\tboolean isAbstract();\n\n\t/**\n\t * Return a description of the resource that this bean definition\n\t * came from (for the purpose of showing context in case of errors).\n\t */\n\t@Nullable\n\tString getResourceDescription();\n\n\t/**\n\t * Return the originating BeanDefinition, or {@code null} if none.\n\t * Allows for retrieving the decorated bean definition, if any.\n\t * <p>Note that this method returns the immediate originator. Iterate through the\n\t * originator chain to find the original BeanDefinition as defined by the user.\n\t */\n\t@Nullable\n\tBeanDefinition getOriginatingBeanDefinition();\n\n}\n```\n### BeanDefination方法属性摘要\n```java\npublic interface BeanDefinition extends AttributeAccessor, BeanMetadataElement {\n\n\tString SCOPE_SINGLETON = ConfigurableBeanFactory.SCOPE_SINGLETON;\n\n\tString SCOPE_PROTOTYPE = ConfigurableBeanFactory.SCOPE_PROTOTYPE;\n\n\tint ROLE_APPLICATION = 0;\n\n\n\tint ROLE_SUPPORT = 1;\n\n    // infrastructure\n\tint ROLE_INFRASTRUCTURE = 2;\n\n\n\t// Modifiable attributes\n\n\tvoid setParentName(@Nullable String parentName);\n\n\n\t@Nullable\n\tString getParentName();\n\n\n\tvoid setBeanClassName(@Nullable String beanClassName);\n\n\n\t@Nullable\n\tString getBeanClassName();\n\n\n\tvoid setScope(@Nullable String scope);\n\n\n\t@Nullable\n\tString getScope();\n\n\n\tvoid setLazyInit(boolean lazyInit);\n\n\n\tboolean isLazyInit();\n\n\n\tvoid setDependsOn(@Nullable String... dependsOn);\n\n\n\t@Nullable\n\tString[] getDependsOn();\n\n\n\tvoid setAutowireCandidate(boolean autowireCandidate);\n\n\n\tboolean isAutowireCandidate();\n\n\n\tvoid setPrimary(boolean primary);\n\n\n\tboolean isPrimary();\n\n\n\tvoid setFactoryBeanName(@Nullable String factoryBeanName);\n\n\n\t@Nullable\n\tString getFactoryBeanName();\n\n\n\tvoid setFactoryMethodName(@Nullable String factoryMethodName);\n\n\n\t@Nullable\n\tString getFactoryMethodName();\n\n\n\tConstructorArgumentValues getConstructorArgumentValues();\n\n\n\tdefault boolean hasConstructorArgumentValues() {\n\t\treturn !getConstructorArgumentValues().isEmpty();\n\t}\n\n\n\tMutablePropertyValues getPropertyValues();\n\n\n\tdefault boolean hasPropertyValues() {\n\t\treturn !getPropertyValues().isEmpty();\n\t}\n\n\n\tvoid setInitMethodName(@Nullable String initMethodName);\n\n\t@Nullable\n\tString getInitMethodName();\n\n\n\tvoid setDestroyMethodName(@Nullable String destroyMethodName);\n\n\n\t@Nullable\n\tString getDestroyMethodName();\n\n\n\tvoid setRole(int role);\n\n\n\tint getRole();\n\n\n\tvoid setDescription(@Nullable String description);\n\n\t@Nullable\n\tString getDescription();\n\n\n\t// Read-only attributes\n\n\n\tResolvableType getResolvableType();\n\n\n\tboolean isSingleton();\n\n\n\tboolean isPrototype();\n\n\n\tboolean isAbstract();\n\n\n\t@Nullable\n\tString getResourceDescription();\n\n\n\t@Nullable\n\tBeanDefinition getOriginatingBeanDefinition();\n\n}\n\n\n\n// org.springframework.core.AttributeAccessor\npackage org.springframework.core;\npublic interface AttributeAccessor {\n\n\tvoid setAttribute(String name, @Nullable Object value);\n\n\n\t@Nullable\n\tObject getAttribute(String name);\n\n\n\t@Nullable\n\tObject removeAttribute(String name);\n\n\n\tboolean hasAttribute(String name);\n\n\n\tString[] attributeNames();\n\n}\n\n\n\n// org.springframework.beans.BeanMetadataElemen\npackage org.springframework.beans;\npublic interface BeanMetadataElement {\n\n\t@Nullable\n\tdefault Object getSource() {\n\t\treturn null;\n\t}\n\n}\n\n\n```\n\n# 2.从一个Demo程序开始\n\n## 2.1 Demo项目配置\n### maven的pom.xml配置文件\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n    <modelVersion>4.0.0</modelVersion>\n    <!--        <parent>-->\n    <!--            <groupId>com.acanx</groupId>-->\n    <!--            <artifactId>ACANX-JavaEE-Dependencies</artifactId>-->\n    <!--            <version>0.0.1</version>-->\n    <!--        </parent>-->\n\n    <groupId>com.acanx</groupId>\n    <artifactId>JavaWeb-Spring</artifactId>\n    <version>0.0.1-SNAPSHOT</version>\n    <packaging>war</packaging>\n\n    <name>JavaWeb-Spring</name>\n    <description>JavaWeb-Spring project</description>\n\n\n    <properties>\n        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>\n        <project.reporting.outputEncoding>UTF-8</project.reporting.outputEncoding>\n        <java.version>11</java.version>\n        <spring.version>5.2.1.RELEASE</spring.version>\n        <!-- log4j日志文件管理包版本 -->\n        <slf4j.version>2.0.0-alpha1</slf4j.version>\n        <logback.version>1.3.0-alpha5</logback.version>\n        <!-- log4j日志包版本号 -->\n        <log4j2.version>2.8.2</log4j2.version>\n        <log4j.version>1.2.17</log4j.version>\n        <junit.version>4.12</junit.version>\n        <fastjson.version>1.2.62</fastjson.version>\n        <maven-compiler-plugin.version>3.8.1</maven-compiler-plugin.version>\n    </properties>\n\n    <dependencies>\n        <dependency>\n            <groupId>org.springframework</groupId>\n            <artifactId>spring-context</artifactId>\n            <version>${spring.version}</version>\n        </dependency>\n        <dependency>\n            <groupId>ch.qos.logback</groupId>\n            <artifactId>logback-classic</artifactId>\n            <version>${logback.version}</version>\n        </dependency>\n        <!-- 添加fastjson -->\n        <dependency>\n            <groupId>com.alibaba</groupId>\n            <artifactId>fastjson</artifactId>\n            <version>${fastjson.version}</version>\n        </dependency>\n        <!--  单元测试-->\n        <!-- https://mvnrepository.com/artifact/junit/junit -->\n        <dependency>\n            <groupId>junit</groupId>\n            <artifactId>junit</artifactId>\n            <version>${junit.version}</version>\n            <scope>test</scope>\n        </dependency>\n\n    </dependencies>\n\n    <build>\n        <plugins>\n            <plugin>\n                <groupId>org.apache.maven.plugins</groupId>\n                <artifactId>maven-compiler-plugin</artifactId>\n                <version>${maven-compiler-plugin.version}</version>\n                <configuration>\n                    <target>11</target>\n                    <source>11</source>\n                </configuration>\n            </plugin>\n        </plugins>\n    </build>\n</project>\n\n```\n\n## 2.2 Demo程序\n### 2.2.1启动类\n- 代码位置:com.acanx.spring.xml.CspringIocConfigByFileSystemXmlApplicationContext.java\n```java\n\npackage com.acanx.spring.xml;\n\nimport com.acanx.spring.bean.Car;\nimport org.apache.commons.logging.Log;\nimport org.apache.commons.logging.LogFactory;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.context.ApplicationContext;\nimport org.springframework.context.support.FileSystemXmlApplicationContext;\n\n/**\n * ACANX-JavaWeb / com.acanx.spring.xml / SpringIocConfigByXmlFileInClassPath.java\n * 文件由 ACANX 创建于 2019/7/30 - 13:39\n * Description  SpringIocConfigByXmlFileInClassPath:\n * 补充说明： 使用FileSystemXmlApplicationContext加载文件系统下的配置文件\n *\n * @author ACANX\n * @version 0.0.1.0\n * @date 2019/7/30  13:39\n * @since 0.0.1-SNAPSHOT\n */\npublic class CspringIocConfigByFileSystemXmlApplicationContext {\n   private static final Logger logger= LoggerFactory.getLogger(CspringIocConfigByFileSystemXmlApplicationContext.class);\n   public static void main(String[] args)  {\n        logger.info(\"-------------------\");\n        logger.info(System.getProperty(\"org.apache.commons.logging.LogFactory\"));\n        logger.info(System.getProperty(\"org.apache.commons.logging.Log\"));\n        logger.info(\"-------------------\");\n        String location=\"D:\\\\ProgramCode\\\\JavaCode\\\\ACANX-JavaWeb\\\\JavaWeb-Spring\\\\ApplicationContextC.xml\";\n        ApplicationContext applicationContext = new FileSystemXmlApplicationContext(location);\n        Car car = (Car) applicationContext.getBean(\"myCar\");\n        logger.info(car.toString());\n        logger.info(\"Info :{}\",logger.isInfoEnabled());\n        String[] beanNames=applicationContext.getBeanDefinitionNames();\n        for (String beanName:beanNames) {\n             logger.info(beanName+\"::::: \"+applicationContext.getBean(beanName).toString());\n        }\n    }\n}\n\n```\n\n### 2.2.2使用到的Bena对象\n```java\npackage com.acanx.spring.bean;\n\npublic class Car {\n\n    private  String name;\n\n    private  String price;\n\n\t// get set 默认构造方法已省略\n\n}\n```\n\n### 2.2.3 springContext的xml文件ApplicationContextC.xml\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<beans xmlns=\"http://www.springframework.org/schema/beans\"\n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n       xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\">\n    \n    <bean name=\"myCar\" class=\"com.acanx.spring.bean.Car\" >\n        <property name=\"name\" value=\"QQAI\"/>\n        <property name=\"price\" value=\"2222\"/>\n    </bean>\n    \n</beans>\n\n```\n\n### 2.2.4 配置日志 logback.xml（resources文件夹下）\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<configuration scan=\"true\" scanPeriod=\"60 seconds\" debug=\"false\">\n\n    <property name=\"LOG_PATH\" value=\".log\"/>\n    <property name=\"APP_NAME\" value=\"IOCDemo\"/>\n    <!--设置系统日志目录-->\n    <property name=\"APP_DIR\" value=\"app-IOCDemo\"/>\n\n    <property name=\"CONSOLE_LOG_PATTERN\" value=\"[CLP]${CONSOLE_LOG_PATTERN:-%clr(%d{${LOG_DATEFORMAT_PATTERN:-yyyy-MM-dd HH:mm:ss.SSS}}){faint} %clr(${LOG_LEVEL_PATTERN:-%5p}) %clr(${PID:- }){magenta} %clr(---){faint} %clr([%15.15t]){faint} %clr(%-40.40logger{39}){cyan} %clr(%-15.15method){cyan} %clr([%4.4line{4}]){magenta} %clr(:){faint} %m%n${LOG_EXCEPTION_CONVERSION_WORD:-%wEx}}\"/>\n    <property name=\"FILE_LOG_PATTERN\" value=\"${FILE_LOG_PATTERN:-%d{${LOG_DATEFORMAT_PATTERN:-yyyy-MM-dd HH:mm:ss.SSS}} ${LOG_LEVEL_PATTERN:-%5p} ${PID:- } --- [%t] %-40.40logger{39} : %m%n${LOG_EXCEPTION_CONVERSION_WORD:-%wEx}}\"/>\n    <property name=\"CONSOLE_LOGBACK_PATTERN\" value=\"[控制台] %d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level | %-80logger # %-40M [%4line] : %msg%n\"/>\n\n\n    <contextName>logback</contextName>\n    <!--输出到控制台-->\n    <appender name=\"CONSOLE\" class=\"ch.qos.logback.core.ConsoleAppender\">\n        <filter class=\"ch.qos.logback.classic.filter.ThresholdFilter\">\n            <level>TRACE</level>\n        </filter>\n        <layout class=\"ch.qos.logback.classic.PatternLayout\">\n            <Pattern>${CONSOLE_LOGBACK_PATTERN}</Pattern>\n        </layout>\n        <encoder>\n            <!--  文件名 [%file]-->\n            <pattern>${CONSOLE_LOGBACK_PATTERN}</pattern>\n        </encoder>\n    </appender>\n\n    <appender name=\"ERROR_FILE\" class=\"ch.qos.logback.core.rolling.RollingFileAppender\">\n        <filter class=\"ch.qos.logback.classic.filter.ThresholdFilter\">\n            <level>ERROR</level>\n            <onMatch>ACCEPT</onMatch>\n            <onMismatch>DENY</onMismatch>\n        </filter>\n        <File>.log/ACANX-JavaWeb/LOG-ERROR.log</File>\n        <rollingPolicy class=\"ch.qos.logback.core.rolling.TimeBasedRollingPolicy\">\n            <fileNamePattern>.log/server-error-%d{yyyyMMdd}.log.%i\n            </fileNamePattern>\n            <timeBasedFileNamingAndTriggeringPolicy class=\"ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP\">\n                <maxFileSize>5MB</maxFileSize>\n            </timeBasedFileNamingAndTriggeringPolicy>\n            <maxHistory>2</maxHistory>\n        </rollingPolicy>\n        <layout class=\"ch.qos.logback.classic.PatternLayout\">\n            <Pattern>${CONSOLE_LOGBACK_PATTERN}</Pattern>\n        </layout>\n    </appender>\n\n\n    <appender name=\"WARN_FILE\" class=\"ch.qos.logback.core.rolling.RollingFileAppender\">\n        <filter class=\"ch.qos.logback.classic.filter.ThresholdFilter\">\n            <level>WARN</level>\n            <onMatch>ACCEPT</onMatch>\n            <onMismatch>DENY</onMismatch>\n        </filter>\n        <File>.log/ACANX-JavaWeb/LOG-WARN.log</File>\n        <rollingPolicy class=\"ch.qos.logback.core.rolling.TimeBasedRollingPolicy\">\n            <fileNamePattern>.log/ACANX-JavaWeb/server-WARN-%d{yyyyMMdd}.log.%i\n            </fileNamePattern>\n            <timeBasedFileNamingAndTriggeringPolicy class=\"ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP\">\n                <maxFileSize>5MB</maxFileSize>\n            </timeBasedFileNamingAndTriggeringPolicy>\n            <maxHistory>2</maxHistory>\n        </rollingPolicy>\n        <layout class=\"ch.qos.logback.classic.PatternLayout\">\n            <Pattern>${CONSOLE_LOGBACK_PATTERN}</Pattern>\n        </layout>\n    </appender>\n\n    <appender name=\"INFO_FILE\" class=\"ch.qos.logback.core.rolling.RollingFileAppender\">\n        <File>.log/ACANX-JavaWeb/LOG-INFO.log</File>\n        <filter class=\"ch.qos.logback.classic.filter.ThresholdFilter\">\n            <level>INFO</level>\n            <onMatch>ACCEPT</onMatch>\n            <onMismatch>DENY</onMismatch>\n        </filter>\n        <rollingPolicy class=\"ch.qos.logback.core.rolling.TimeBasedRollingPolicy\">\n            <fileNamePattern>.log/ACANX-JavaWeb/server-info-%d{yyyyMMdd}.log.%i</fileNamePattern>\n            <timeBasedFileNamingAndTriggeringPolicy class=\"ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP\">\n                <maxFileSize>5MB</maxFileSize>\n            </timeBasedFileNamingAndTriggeringPolicy>\n            <maxHistory>2</maxHistory>\n        </rollingPolicy>\n        <layout class=\"ch.qos.logback.classic.PatternLayout\">\n            <Pattern>${CONSOLE_LOGBACK_PATTERN}</Pattern>\n        </layout>\n        <encoder class=\"ch.qos.logback.classic.encoder.PatternLayoutEncoder\">\n            <!--格式化输出：%d表示日期，%thread表示线程名，%-5level：级别从左显示5个字符宽度%msg：日志消息，%n是换行符-->\n            <pattern>${CONSOLE_LOGBACK_PATTERN}</pattern>\n        </encoder>\n    </appender>\n\n    <appender name=\"TRACE_FILE\" class=\"ch.qos.logback.core.rolling.RollingFileAppender\">\n        <filter class=\"ch.qos.logback.classic.filter.ThresholdFilter\">\n            <level>TRACE</level>\n            <onMatch>ACCEPT</onMatch>\n            <onMismatch>DENY</onMismatch>\n        </filter>\n        <File>.log/ACANX-JavaWeb/LOG-TRACE.log</File>\n        <rollingPolicy class=\"ch.qos.logback.core.rolling.TimeBasedRollingPolicy\">\n            <fileNamePattern>.log/ACANX-JavaWeb/server-TRACE-%d{yyyyMMdd}.log.%i\n            </fileNamePattern>\n            <timeBasedFileNamingAndTriggeringPolicy class=\"ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP\">\n                <maxFileSize>5MB</maxFileSize>\n            </timeBasedFileNamingAndTriggeringPolicy>\n            <maxHistory>2</maxHistory>\n        </rollingPolicy>\n        <layout class=\"ch.qos.logback.classic.PatternLayout\">\n            <Pattern>${CONSOLE_LOGBACK_PATTERN}</Pattern>\n        </layout>\n    </appender>\n\n    <appender name=\"FULL_LEVEL_FILE\" class=\"ch.qos.logback.core.rolling.RollingFileAppender\">\n        <File>.log/ACANX-JavaWeb/LOG-FULL.log</File>\n        <filter class=\"ch.qos.logback.classic.filter.ThresholdFilter\">\n            <level>TRACE</level>\n        </filter>\n        <encoder>\n            <!--  文件名 [%file] -->\n            <pattern>${CONSOLE_LOGBACK_PATTERN}</pattern>\n        </encoder>\n        <rollingPolicy class=\"ch.qos.logback.core.rolling.TimeBasedRollingPolicy\">\n            <fileNamePattern>.log/ACANX-JavaWeb/LOG-FULL-%d{yyyyMMdd}.log.%i</fileNamePattern>\n            <timeBasedFileNamingAndTriggeringPolicy class=\"ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP\">\n                <maxFileSize>5MB</maxFileSize>\n            </timeBasedFileNamingAndTriggeringPolicy>\n            <maxHistory>2</maxHistory>\n        </rollingPolicy>\n        <layout class=\"ch.qos.logback.classic.PatternLayout\">\n            <Pattern>${CONSOLE_LOGBACK_PATTERN}</Pattern>\n        </layout>\n    </appender>\n\n    <root level=\"TRACE\" additivity=\"true\">\n        <appender-ref ref=\"CONSOLE\"/>\n        <appender-ref ref=\"WARN_FILE\"/>\n        <appender-ref ref=\"ERROR_FILE\"/>\n        <appender-ref ref=\"INFO_FILE\"/>\n        <appender-ref ref=\"TRACE_FILE\"/>\n        <appender-ref ref=\"FULL_LEVEL_FILE\"/>\n    </root>\n\n    <!-- TRACE, DEBUG, INFO, WARN, ERROR, ALL 和 OFF -->\n    <logger name=\"org\" level=\"TRACE\" additivity=\"true\"></logger>\n    <logger name=\"org.springframework.context\" level=\"TRACE\" additivity=\"false\"></logger>\n    <logger name=\"org.apache\" level=\"TRACE\"/>\n    <logger name=\"com.alibaba\" level=\"TRACE\"/>\n    <!-- 如果这里设置了additivity=true 代码打印信息向上传递,将打印信息传递到root ，并且自己的appender-ref 也会打印，这样就是打印了俩次日志-->\n</configuration>\n\n```\n\n# 3.Spring IOC容器的创建\n\n##  3.1 进入FileSystemXmlApplicationContext（AbstractXmlApplicationContext抽象类的具体实现类）\n- 代码位置: org.springframework.context.support.FileSystemXmlApplicationContext.java\n```java\n\tpublic FileSystemXmlApplicationContext(String configLocation) throws BeansException {\n\t\tthis(new String[] {configLocation}, true, null);\n\t}\n\n\n    // 上面的this 来到下面的重载构造方法\n\tpublic FileSystemXmlApplicationContext(\n\t\t\tString[] configLocations, boolean refresh, @Nullable ApplicationContext parent)\n\t\t\tthrows BeansException {\n\n\t\tsuper(parent);  // 初始化父容器AbstractApplicationContext\n\t\tsetConfigLocations(configLocations); // 设置资源文件的位置\n\t\tif (refresh) {\n\t\t\trefresh();// 核心方法，具体定义在超类AbstractApplicationContext（抽象类）中，是一个模板方法\n\t\t}\n\t}\n```\n\n## 3.2 初始化父容器AbstractApplicationContext\n### 3.2.1 AbstractXmlApplicationContext抽象类（FileSystemXmlApplicationContext的父类）\n- 代码位置: org.springframework.context.support.AbstractXmlApplicationContext.java\n```java\n\tpublic AbstractXmlApplicationContext(@Nullable ApplicationContext parent) {\n\t\tsuper(parent);\n\t}\n\n```\n\n### 3.2.2 AbstractRefreshableConfigApplicationContext抽象类（ AbstractXmlApplicationContext的父类）\n- 代码位置:org.springframework.context.support.AbstractRefreshableConfigApplicationContext.java\n```java\n\tpublic AbstractRefreshableConfigApplicationContext(@Nullable ApplicationContext parent) {\n\t\tsuper(parent);\n\t}\n\n```\n\n### 3.2.3 AbstractRefreshableApplicationContext抽象类\n-  代码位置:org.springframework.context.support.AbstractRefreshableApplicationContext.java\n```java\n\tpublic AbstractRefreshableApplicationContext(@Nullable ApplicationContext parent) {\n\t\tsuper(parent);\n\t}\n\n```\n\n### 3.2.4 AbstractApplicationContext抽象类\n- 代码位置:org.springframework.context.support.AbstractApplicationContext.java\n```java\n\tpublic AbstractApplicationContext(@Nullable ApplicationContext parent) {\n\t\tthis();\n\t\tsetParent(parent);\n\t}\n\n    //上面对应的this()方法 \n\tpublic AbstractApplicationContext() {\n\t\tthis.resourcePatternResolver = getResourcePatternResolver();\n\t}\n\n    //上面对应的 getResourcePatternResolver()方法\n\tprotected ResourcePatternResolver getResourcePatternResolver() {\n\t\treturn new PathMatchingResourcePatternResolver(this);\n\t}\n\n    // this()之后的setParent(parent);方法\n\t@Override\n\tpublic void setParent(@Nullable ApplicationContext parent) {\n\t\tthis.parent = parent;\n\t\tif (parent != null) {\n\t\t\tEnvironment parentEnvironment = parent.getEnvironment();\n\t\t\tif (parentEnvironment instanceof ConfigurableEnvironment) {\n\t\t\t\tgetEnvironment().merge((ConfigurableEnvironment) parentEnvironment);\n\t\t\t}\n\t\t}\n\t}\n\n```\n\n## 3.5 PathMatchingResourcePatternResolver类\n- PathMatchingResourcePatternResolver(this)对应的构造方法\n- 代码位置:org.springframework.core.io.support.PathMatchingResourcePatternResolver.java\n```java\n\tpublic PathMatchingResourcePatternResolver(ResourceLoader resourceLoader) {\n\t\tAssert.notNull(resourceLoader, \"ResourceLoader must not be null\");\n\t\tthis.resourceLoader = resourceLoader;\n\t}\n\n```\n\n\n\n# 4.setConfigLocations(String... locations) 方法\n- 设置资源文件的位置\n\n## 4.1 AbstractRefreshableConfigApplicationContext.setConfigLocations(@Nullable String... locations) 方法\n-  代码位置:org.springframework.context.support.AbstractRefreshableConfigApplicationContext.java\n```java\n\tpublic void setConfigLocations(@Nullable String... locations) {\n\t\tif (locations != null) {\n\t\t\tAssert.noNullElements(locations, \"Config locations must not be null\");\n\t\t\tthis.configLocations = new String[locations.length];\n\t\t\tfor (int i = 0; i < locations.length; i++) {\n\t\t\t\tthis.configLocations[i] = resolvePath(locations[i]).trim();\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tthis.configLocations = null;\n\t\t}\n\t}\n\n\n```\n\n\n# 5. refresh()方法\n- AbstractApplicationContext抽象类中定义的refresh()模板方法\n- 定义了需要执行刷新操作的一些步骤，只是一个模板，个性化的逻辑由其子类来具体实现\n## 5.1 refresh()方法定义\n-  代码位置:org.springframework.context.support.AbstractApplicationContext.java\n```java\n@Override\npublic void refresh() throws BeansException, IllegalStateException {\n\tsynchronized (this.startupShutdownMonitor) {\n\t\t// Prepare this context for refreshing.\n\t\tprepareRefresh();\n\n\t\t// Tell the subclass to refresh the internal bean factory.\n\t\t// 创建BeanFactory\n\t\tConfigurableListableBeanFactory beanFactory = obtainFreshBeanFactory();\n\n\t\t// Prepare the bean factory for use in this context.\n\t\tprepareBeanFactory(beanFactory);\n\n\t\ttry {\n\t\t\t// Allows post-processing of the bean factory in context subclasses.\n\t\t\tpostProcessBeanFactory(beanFactory);\n\n\t\t\t// Invoke factory processors registered as beans in the context.\n\t\t\tinvokeBeanFactoryPostProcessors(beanFactory);\n\n\t\t\t// Register bean processors that intercept bean creation.\n\t\t\tregisterBeanPostProcessors(beanFactory);\n\n\t\t\t// Initialize message source for this context.\n\t\t\tinitMessageSource();\n\n\t\t\t// Initialize event multicaster for this context.\n\t\t\tinitApplicationEventMulticaster();\n\n\t\t\t// Initialize other special beans in specific context subclasses.\n\t\t\tonRefresh();\n\n\t\t\t// Check for listener beans and register them.\n\t\t\tregisterListeners();\n\n\t\t\t// Instantiate all remaining (non-lazy-init) singletons.\n\t\t\t// 实例化Bean\n\t\t\tfinishBeanFactoryInitialization(beanFactory);\n\n\t\t\t// Last step: publish corresponding event.\n\t\t\tfinishRefresh();\n\t\t}\n\n\t\tcatch (BeansException ex) {\n\t\t\tif (logger.isWarnEnabled()) {\n\t\t\t\tlogger.warn(\"Exception encountered during context initialization - \" +\n\t\t\t\t\t\t\"cancelling refresh attempt: \" + ex);\n\t\t\t}\n\n\t\t\t// Destroy already created singletons to avoid dangling resources.\n\t\t\tdestroyBeans();\n\n\t\t\t// Reset 'active' flag.\n\t\t\tcancelRefresh(ex);\n\n\t\t\t// Propagate exception to caller.\n\t\t\tthrow ex;\n\t\t}\n\n\t\tfinally {\n\t\t\t// Reset common introspection caches in Spring's core, since we\n\t\t\t// might not ever need metadata for singleton beans anymore...\n\t\t\tresetCommonCaches();\n\t\t}\n\t}\n}\n\n```\n\n\n## 5.2 prepareRefresh()方法\n- 正式Refresh()操作前的准备工作\n- 代码位置:org.springframework.context.support.AbstractApplicationContext.java\n```java\nprotected void prepareRefresh() {\n\t// Switch to active.\n\tthis.startupDate = System.currentTimeMillis();\n\tthis.closed.set(false);\n\tthis.active.set(true);\n\n\tif (logger.isDebugEnabled()) {\n\t\tif (logger.isTraceEnabled()) {\n\t\t\tlogger.trace(\"Refreshing \" + this);\n\t\t}\n\t\telse {\n\t\t\tlogger.debug(\"Refreshing \" + getDisplayName());\n\t\t}\n\t}\n\n\t// Initialize any placeholder property sources in the context environment.\n\tinitPropertySources();\n\n\t// Validate that all properties marked as required are resolvable:\n\t// see ConfigurablePropertyResolver#setRequiredProperties\n\tgetEnvironment().validateRequiredProperties();\n\n\t// Store pre-refresh ApplicationListeners...\n\tif (this.earlyApplicationListeners == null) {\n\t\tthis.earlyApplicationListeners = new LinkedHashSet<>(this.applicationListeners);\n\t}\n\telse {\n\t\t// Reset local application listeners to pre-refresh state.\n\t\tthis.applicationListeners.clear();\n\t\tthis.applicationListeners.addAll(this.earlyApplicationListeners);\n\t}\n\n\t// Allow for the collection of early ApplicationEvents,\n\t// to be published once the multicaster is available...\n\tthis.earlyApplicationEvents = new LinkedHashSet<>();\n}\n\n// 上述定义的initPropertySources()方法，具体由子类实现\nprotected void initPropertySources() {\n\t// For subclasses: do nothing by default.\n}\n\n```\n\n## 5.3 obtainFreshBeanFactory()方法\n- 创建BeanFactory的核心方法\n- 代码位置:org.springframework.context.support.AbstractApplicationContext.java\n```java\n\tprotected ConfigurableListableBeanFactory obtainFreshBeanFactory() {\n\t\trefreshBeanFactory();// 刷新BeanFactory，抽象方法由其子类实现,5.3.1中有说明\n\t\treturn getBeanFactory();// 获取BeanFactory，父类的抽象方法继承并由其子类实现\n\t}\n\n\tprotected abstract void refreshBeanFactory() throws BeansException, IllegalStateException;\n\n\t@Override // 该方法在ConfigurableApplicationContext接口中定义\n\tpublic abstract ConfigurableListableBeanFactory getBeanFactory() throws IllegalStateException;\n```\n\n\n### 5.3.1 refreshBeanFactory()方法的一种实现\n- org.springframework.context.support.AbstractRefreshableApplicationContext中的具体实现如下\n- refreshBeanFactory()方法是AbstractApplicationContext中定义的抽象方法\n- AbstractRefreshableApplicationContext中的refreshBeanFactory()方法是该抽象方法的一个具体实现\n- 主要作用：刷新BeanFactory\n```java\n// AbstractRefreshableApplicationContext中refreshBeanFactory()方法的一种实现\n@Override\nprotected final void refreshBeanFactory() throws BeansException {\n\t// 检查上下文中是否已存在BeanFactory\n\tif (hasBeanFactory()) {\n\t\t// 存在BeanFactory时先销毁已存在的BeanFactory\n\t\tdestroyBeans();//调用AbstractApplicationContext中的实现\n\t\t/**\n\t\t* 以下是AbstractApplicationContext中destroyBeans()方法的实现\n\t\t* protected void destroyBeans() {\n\t\t*    getBeanFactory().destroySingletons();\n\t\t* }\n\t\t*/\n\t\tcloseBeanFactory();// 调用本抽象类中的closeBeanFactory()方法，具体代码在下面列出\n\t}\n\ttry {\n\t\t// 创建新的BeanFactory\n\t\t// 下面这行代码只会创建一个空的BeanFactory，并未有任何Bean\n\t\tDefaultListableBeanFactory beanFactory = createBeanFactory();\n\t\tbeanFactory.setSerializationId(getId());\n\t\tcustomizeBeanFactory(beanFactory);\n\t\tloadBeanDefinitions(beanFactory);// refreshBeanFactory()方法实现的核心\n\t\tsynchronized (this.beanFactoryMonitor) {\n\t\t\tthis.beanFactory = beanFactory;\n\t\t}\n\t}\n\tcatch (IOException ex) {\n\t\tthrow new ApplicationContextException(\"I/O error parsing bean definition source for \" + getDisplayName(), ex);\n\t}\n}\n\n// AbstractRefreshableApplicationContext抽象类中refreshBeanFactory()方法内调用的closeBeanFactory()方法\n@Override\nprotected final void closeBeanFactory() {\n\tsynchronized (this.beanFactoryMonitor) {\n\t\tif (this.beanFactory != null) {\n\t\t\t//销毁已存在的BeanFactory\n\t\t\tthis.beanFactory.setSerializationId(null);\n\t\t\tthis.beanFactory = null;\n\t\t}\n\t}\n}\n\n//AbstractRefreshableApplicationContext抽象类中refreshBeanFactory()方法内调用createBeanFactory()方法\nprotected DefaultListableBeanFactory createBeanFactory() {\n\t// 调用下面 AbstractApplicationContext中的getInternalParentBeanFactory()方法\n\treturn new DefaultListableBeanFactory(getInternalParentBeanFactory());\n}\n```\n\n#### AbstractApplicationContext中的getInternalParentBeanFactory()方法\n```java\n@Nullable\nprotected BeanFactory getInternalParentBeanFactory() {\n\treturn (getParent() instanceof ConfigurableApplicationContext ?\n\t\t\t((ConfigurableApplicationContext) getParent()).getBeanFactory() : getParent());\n}\n```\n\n#### DefaultListableBeanFactory的构造方法\n```java\npublic DefaultListableBeanFactory(@Nullable BeanFactory parentBeanFactory) {\n\tsuper(parentBeanFactory);// 调用AbstractAutowireCapableBeanFactory(抽象类)的构造方法\n}\n```\n\n#### DefaultListableBeanFactory父类AbstractAutowireCapableBeanFactory(抽象类)的构造方法\n```java\npublic AbstractAutowireCapableBeanFactory(@Nullable BeanFactory parentBeanFactory) {\n\tthis();\n\tsetParentBeanFactory(parentBeanFactory);\n}\n```\n\n\n#### AbstractRefreshableApplicationContext中的customizeBeanFactory(beanFactory)方法\n```java\nprotected void customizeBeanFactory(DefaultListableBeanFactory beanFactory) {\n\tif (this.allowBeanDefinitionOverriding != null) {\n\t\tbeanFactory.setAllowBeanDefinitionOverriding(this.allowBeanDefinitionOverriding);\n\t}\n\tif (this.allowCircularReferences != null) {\n\t\tbeanFactory.setAllowCircularReferences(this.allowCircularReferences);\n\t}\n}\n```\n\n#### AbstractRefreshableApplicationContext中的loadBeanDefinitions(beanFactory)方法\n- 是实现refreshBeanFactory()方法的核心\n- org.springframework.context.support.AbstractRefreshableApplicationContext中定义的抽象方法\n```java\nprotected abstract void loadBeanDefinitions(DefaultListableBeanFactory beanFactory)\n\t\tthrows BeansException, IOException;\n```\n- 该抽象方法的一个具体实现在org.springframework.context.support.AbstractXmlApplicationContext中\n\n#### org.springframework.context.support.AbstractXmlApplicationContext中的loadBeanDefinitions(DefaultListableBeanFactory beanFactory)方法\n- org.springframework.context.support.AbstractRefreshableApplicationContext中定义的抽象方法loadBeanDefinitions(DefaultListableBeanFactory beanFactory)的一个实现\n```java\n@Override\nprotected void loadBeanDefinitions(DefaultListableBeanFactory beanFactory) throws BeansException, IOException {\n\t// Create a new XmlBeanDefinitionReader for the given BeanFactory.\n\t// 通过上一步创建的空BeanFactory来创建新的XmlBeanDefinitionReader对象\n\t// XmlBeanDefinitionReader用于解析xml文件中定义的bean\n\tXmlBeanDefinitionReader beanDefinitionReader = new XmlBeanDefinitionReader(beanFactory); //\n\n\t// Configure the bean definition reader with this context's\n\t// resource loading environment.\n\tbeanDefinitionReader.setEnvironment(this.getEnvironment());\n\tbeanDefinitionReader.setResourceLoader(this);\n\tbeanDefinitionReader.setEntityResolver(new ResourceEntityResolver(this));\n\n\t// Allow a subclass to provide custom initialization of the reader,\n\t// then proceed with actually loading the bean definitions.\n\tinitBeanDefinitionReader(beanDefinitionReader);\n\tloadBeanDefinitions(beanDefinitionReader); //这是一个重载方法，入参是上面生成的beanDefinitionReader\n}\n```\n\n####  new XmlBeanDefinitionReader(beanFactory)\n- XmlBeanDefinitionReader(beanFactory)构造方法调用其父类AbstractBeanDefinitionReader的构造方法，具体如下\n```java\nprotected AbstractBeanDefinitionReader(BeanDefinitionRegistry registry) {\n\tAssert.notNull(registry, \"BeanDefinitionRegistry must not be null\");\n\tthis.registry = registry;\n\n\t// Determine ResourceLoader to use.\n\tif (this.registry instanceof ResourceLoader) {\n\t\tthis.resourceLoader = (ResourceLoader) this.registry;\n\t}\n\telse {\n\t\tthis.resourceLoader = new PathMatchingResourcePatternResolver();\n\t}\n\n\t// Inherit Environment if possible\n\tif (this.registry instanceof EnvironmentCapable) {\n\t\tthis.environment = ((EnvironmentCapable) this.registry).getEnvironment();\n\t}\n\telse {\n\t\tthis.environment = new StandardEnvironment();\n\t}\n}\n```\n\n#### AbstractXmlApplicationContext抽象类中的initBeanDefinitionReader(beanDefinitionReader)方法\n```java\nprotected void initBeanDefinitionReader(XmlBeanDefinitionReader reader) {\n\treader.setValidating(this.validating);\n}\n```\n\n#### AbstractXmlApplicationContext抽象类中的loadBeanDefinitions(XmlBeanDefinitionReader reader)方法\n- 主要功能是解析资源文件的位置\n- 调用XmlBeanDefinitionReader对象的loadBeanDefinitions方法解析bean的定义\n```java\nprotected void loadBeanDefinitions(XmlBeanDefinitionReader reader) throws BeansException, IOException {\n\tResource[] configResources = getConfigResources();\n\tif (configResources != null) {\n\t\treader.loadBeanDefinitions(configResources); //具体调用AbstractBeanDefinitionReader中实现的loadBeanDefinitions(Resource... resources)方法\n\t}\n\tString[] configLocations = getConfigLocations();\n\tif (configLocations != null) {\n\t\treader.loadBeanDefinitions(configLocations);//具体调用AbstractBeanDefinitionReader中实现的loadBeanDefinitions(String... locations)\n\t}\n}\n```\n\n##### reader.loadBeanDefinitions(configResources)方法与reader.loadBeanDefinitions(configLocations)方法\n- XmlBeanDefinitionReader对象的loadBeanDefinitions方法用于解析bean的定义\n- reader是XmlBeanDefinitionReader类型的对象，loadBeanDefinitions方法定义在BeanDefinitionReader接口中，\n- loadBeanDefinitions方法具体是在AbstractBeanDefinitionReader抽象类中实现的，具体代码如下：\n```java\n@Override\npublic int loadBeanDefinitions(Resource... resources) throws BeanDefinitionStoreException {\n\tAssert.notNull(resources, \"Resource array must not be null\");\n\tint count = 0;\n\t// 遍历每一个资源并依次调用重载方法loadBeanDefinitions(Resource resource)，定义在XmlBeanDefinitionReader中，具体实现在XmlBeanDefinitionReader中\n\tfor (Resource resource : resources) {\n\t\tcount += loadBeanDefinitions(resource);//\n\t}\n\treturn count;\n}\n\n@Override\npublic int loadBeanDefinitions(String... locations) throws BeanDefinitionStoreException {\n\tAssert.notNull(locations, \"Location array must not be null\");\n\tint count = 0;\n\t//遍历资源数组，调用重载方法loadBeanDefinitions(String location)\n\tfor (String location : locations) {\n\t\tcount += loadBeanDefinitions(location);//\n\t}\n\treturn count;\n}\n\n```\n\n#### count += loadBeanDefinitions(resource)中的loadBeanDefinitions(resource)方法\n- loadBeanDefinitions(resource)方法在BeanDefinitionReader接口中定义，具体实现是在XmlBeanDefinitionReader中\n- XmlBeanDefinitionReader中的实现代码如下：\n```java\n@Override\npublic int loadBeanDefinitions(Resource resource) throws BeanDefinitionStoreException {\n\treturn loadBeanDefinitions(new EncodedResource(resource));\n}\n```\n- 可以看到，上面的方法又调用了loadBeanDefinitions(new EncodedResource(resource))方法，该方法在BeanDefinitionReader接口中定义，具体实现在XmlBeanDefinitionReader中,具体实现，详细代码如下：\n```java\npublic int loadBeanDefinitions(EncodedResource encodedResource) throws BeanDefinitionStoreException {\n\tAssert.notNull(encodedResource, \"EncodedResource must not be null\");\n\tif (logger.isTraceEnabled()) {\n\t\tlogger.trace(\"Loading XML bean definitions from \" + encodedResource);\n\t}\n\n\tSet<EncodedResource> currentResources = this.resourcesCurrentlyBeingLoaded.get();\n\tif (currentResources == null) {\n\t\tcurrentResources = new HashSet<>(4);\n\t\tthis.resourcesCurrentlyBeingLoaded.set(currentResources);\n\t}\n\tif (!currentResources.add(encodedResource)) {\n\t\tthrow new BeanDefinitionStoreException(\"Detected cyclic loading of \" + encodedResource + \" - check your import definitions!\");\n\t}\n\ttry {\n\t\t//以流的形式读取资源文件\n\t\tInputStream inputStream = encodedResource.getResource().getInputStream();\n\t\ttry {\n\t\t\tInputSource inputSource = new InputSource(inputStream);\n\t\t\tif (encodedResource.getEncoding() != null) {\n\t\t\t\tinputSource.setEncoding(encodedResource.getEncoding());\n\t\t\t}\n\t\t\t// 调用doLoadBeanDefinitions解析载入文件中的bean定义\n\t\t\treturn doLoadBeanDefinitions(inputSource, encodedResource.getResource());\n\t\t}\n\t\tfinally {\n\t\t\tinputStream.close();\n\t\t}\n\t}\n\tcatch (IOException ex) {\n\t\tthrow new BeanDefinitionStoreException(\n\t\t\t\t\"IOException parsing XML document from \" + encodedResource.getResource(), ex);\n\t}\n\tfinally {\n\t\tcurrentResources.remove(encodedResource);\n\t\tif (currentResources.isEmpty()) {\n\t\t\tthis.resourcesCurrentlyBeingLoaded.remove();\n\t\t}\n\t}\n}\n```\n\n#### count += loadBeanDefinitions(location)中的loadBeanDefinitions(location)方法\n- loadBeanDefinitions(location)方法的具体实现AbstractBeanDefinitionReader中；\n```java\n@Override\npublic int loadBeanDefinitions(String location) throws BeanDefinitionStoreException {\n\treturn loadBeanDefinitions(location, null);\n}\n\n```\n- 解析资源文件的路径，得到Resource[]资源数组\n- 上面AbstractBeanDefinitionReader中的loadBeanDefinitions(String location)方法又调用了同类里面的一个重载方法loadBeanDefinitions(String location, @Nullable Set<Resource> actualResources) 具体实现如下：\n```java\npublic int loadBeanDefinitions(String location, @Nullable Set<Resource> actualResources) throws BeanDefinitionStoreException {\n\t\tResourceLoader resourceLoader = getResourceLoader();\n\t\tif (resourceLoader == null) {\n\t\t\tthrow new BeanDefinitionStoreException(\n\t\t\t\t\t\"Cannot load bean definitions from location [\" + location + \"]: no ResourceLoader available\");\n\t\t}\n\n\t\tif (resourceLoader instanceof ResourcePatternResolver) {\n\t\t\t// Resource pattern matching available.\n\t\t\ttry {\n\t\t\t\tResource[] resources = ((ResourcePatternResolver) resourceLoader).getResources(location);\n\t\t\t\t//下一行的核心逻辑  调用上面提到的重载方法loadBeanDefinitions(Resource resource)\n\t\t\t\tint count = loadBeanDefinitions(resources);\n\t\t\t\tif (actualResources != null) {\n\t\t\t\t\tCollections.addAll(actualResources, resources);\n\t\t\t\t}\n\t\t\t\tif (logger.isTraceEnabled()) {\n\t\t\t\t\tlogger.trace(\"Loaded \" + count + \" bean definitions from location pattern [\" + location + \"]\");\n\t\t\t\t}\n\t\t\t\treturn count;\n\t\t\t}\n\t\t\tcatch (IOException ex) {\n\t\t\t\tthrow new BeanDefinitionStoreException(\n\t\t\t\t\t\t\"Could not resolve bean definition resource pattern [\" + location + \"]\", ex);\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\t// Can only load single resources by absolute URL.\n\t\t\tResource resource = resourceLoader.getResource(location);\n\t\t\tint count = loadBeanDefinitions(resource);\n\t\t\tif (actualResources != null) {\n\t\t\t\tactualResources.add(resource);\n\t\t\t}\n\t\t\tif (logger.isTraceEnabled()) {\n\t\t\t\tlogger.trace(\"Loaded \" + count + \" bean definitions from location [\" + location + \"]\");\n\t\t\t}\n\t\t\treturn count;\n\t\t}\n\t}\n```\n\n\n#### XmlBeanDefinitionReader类中的doLoadBeanDefinitions(InputSource inputSource, Resource resource)方法\n- 该方法是载入定义bean的核心方法\n- 代码位置：org.springframework.beans.factory.xml.XmlBeanDefinitionReader\n```java\nprotected int doLoadBeanDefinitions(InputSource inputSource, Resource resource)\n\t\tthrows BeanDefinitionStoreException {\n\n\ttry {\n\t\t// 解析XML文档\n\t\tDocument doc = doLoadDocument(inputSource, resource);\n\t\t// 下面一行代码 注册Bean\n\t\tint count = registerBeanDefinitions(doc, resource);\n\t\tif (logger.isDebugEnabled()) {\n\t\t\tlogger.debug(\"Loaded \" + count + \" bean definitions from \" + resource);\n\t\t}\n\t\treturn count;\n\t}\n\tcatch (BeanDefinitionStoreException ex) {\n\t\tthrow ex;\n\t}\n\tcatch (SAXParseException ex) {\n\t\tthrow new XmlBeanDefinitionStoreException(resource.getDescription(),\n\t\t\t\t\"Line \" + ex.getLineNumber() + \" in XML document from \" + resource + \" is invalid\", ex);\n\t}\n\tcatch (SAXException ex) {\n\t\tthrow new XmlBeanDefinitionStoreException(resource.getDescription(),\n\t\t\t\t\"XML document from \" + resource + \" is invalid\", ex);\n\t}\n\tcatch (ParserConfigurationException ex) {\n\t\tthrow new BeanDefinitionStoreException(resource.getDescription(),\n\t\t\t\t\"Parser configuration exception parsing XML from \" + resource, ex);\n\t}\n\tcatch (IOException ex) {\n\t\tthrow new BeanDefinitionStoreException(resource.getDescription(),\n\t\t\t\t\"IOException parsing XML document from \" + resource, ex);\n\t}\n\tcatch (Throwable ex) {\n\t\tthrow new BeanDefinitionStoreException(resource.getDescription(),\n\t\t\t\t\"Unexpected exception parsing XML document from \" + resource, ex);\n\t}\n}\n\n// 注册Bean的方法\npublic int registerBeanDefinitions(Document doc, Resource resource) throws BeanDefinitionStoreException {\n\tBeanDefinitionDocumentReader documentReader = createBeanDefinitionDocumentReader();\n\tint countBefore = getRegistry().getBeanDefinitionCount();\n\t// 注册bean的核心逻辑\n\tdocumentReader.registerBeanDefinitions(doc, createReaderContext(resource));\n\treturn getRegistry().getBeanDefinitionCount() - countBefore;\n}\n```\n\n#### DefaultBeanDefinitionDocumentReader.registerBeanDefinitions(Document doc, XmlReaderContext readerContext)\n- 功能：\n- 代码位置：org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader\n```java\n@Override\npublic void registerBeanDefinitions(Document doc, XmlReaderContext readerContext) {\n\tthis.readerContext = readerContext;\n\t// 核心逻辑\n\tdoRegisterBeanDefinitions(doc.getDocumentElement());\n}\n\n// registerBeanDefinitions方法中调用的doRegisterBeanDefinitions方法\n@SuppressWarnings(\"deprecation\")  // for Environment.acceptsProfiles(String...)\nprotected void doRegisterBeanDefinitions(Element root) {\n\t// Any nested <beans> elements will cause recursion in this method. In\n\t// order to propagate and preserve <beans> default-* attributes correctly,\n\t// keep track of the current (parent) delegate, which may be null. Create\n\t// the new (child) delegate with a reference to the parent for fallback purposes,\n\t// then ultimately reset this.delegate back to its original (parent) reference.\n\t// this behavior emulates a stack of delegates without actually necessitating one.\n\tBeanDefinitionParserDelegate parent = this.delegate;\n\tthis.delegate = createDelegate(getReaderContext(), root, parent);\n\n\tif (this.delegate.isDefaultNamespace(root)) {\n\t\tString profileSpec = root.getAttribute(PROFILE_ATTRIBUTE);\n\t\tif (StringUtils.hasText(profileSpec)) {\n\t\t\tString[] specifiedProfiles = StringUtils.tokenizeToStringArray(\n\t\t\t\t\tprofileSpec, BeanDefinitionParserDelegate.MULTI_VALUE_ATTRIBUTE_DELIMITERS);\n\t\t\t// We cannot use Profiles.of(...) since profile expressions are not supported\n\t\t\t// in XML config. See SPR-12458 for details.\n\t\t\tif (!getReaderContext().getEnvironment().acceptsProfiles(specifiedProfiles)) {\n\t\t\t\tif (logger.isDebugEnabled()) {\n\t\t\t\t\tlogger.debug(\"Skipped XML bean definition file due to specified profiles [\" + profileSpec +\n\t\t\t\t\t\t\t\"] not matching: \" + getReaderContext().getResource());\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\n\tpreProcessXml(root);\n\t// 核心逻辑\n\tparseBeanDefinitions(root, this.delegate);\n\tpostProcessXml(root);\n\n\tthis.delegate = parent;\n}\n\n// 上面方法中调用的parseBeanDefinitions(root, this.delegate)对应的方法实现\nprotected void parseBeanDefinitions(Element root, BeanDefinitionParserDelegate delegate) {\n\tif (delegate.isDefaultNamespace(root)) {\n\t\tNodeList nl = root.getChildNodes();\n\t\tfor (int i = 0; i < nl.getLength(); i++) {\n\t\t\tNode node = nl.item(i);\n\t\t\tif (node instanceof Element) {\n\t\t\t\tElement ele = (Element) node;\n\t\t\t\tif (delegate.isDefaultNamespace(ele)) {\n\t\t\t\t\t// 本方法的核心逻辑\n\t\t\t\t\tparseDefaultElement(ele, delegate);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tdelegate.parseCustomElement(ele);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\telse {\n\t\tdelegate.parseCustomElement(root);\n\t}\n}\n\n\n// 上述方法调用的parseDefaultElement(ele, delegate);的具体实现\n// 根据bean配置的不同，进入不同分支\nprivate void parseDefaultElement(Element ele, BeanDefinitionParserDelegate delegate) {\n\tif (delegate.nodeNameEquals(ele, IMPORT_ELEMENT)) {\n\t\timportBeanDefinitionResource(ele);\n\t}\n\telse if (delegate.nodeNameEquals(ele, ALIAS_ELEMENT)) {\n\t\tprocessAliasRegistration(ele);\n\t}\n\telse if (delegate.nodeNameEquals(ele, BEAN_ELEMENT)) {\n\t\t// 本文示例会进入该方法\n\t\tprocessBeanDefinition(ele, delegate);\n\t}\n\telse if (delegate.nodeNameEquals(ele, NESTED_BEANS_ELEMENT)) {\n\t\t// recurse\n\t\tdoRegisterBeanDefinitions(ele);\n\t}\n}\n\n// 上述方法最后进入processBeanDefinition(ele, delegate)后的处理过程：\nprotected void processBeanDefinition(Element ele, BeanDefinitionParserDelegate delegate) {\n\tBeanDefinitionHolder bdHolder = delegate.parseBeanDefinitionElement(ele);\n\tif (bdHolder != null) {\n\t\tbdHolder = delegate.decorateBeanDefinitionIfRequired(ele, bdHolder);\n\t\ttry {\n\t\t\t// Register the final decorated instance.\n\t\t\t// 注册Bean的关键代码\n\t\t\tBeanDefinitionReaderUtils.registerBeanDefinition(bdHolder, getReaderContext().getRegistry());\n\t\t}\n\t\tcatch (BeanDefinitionStoreException ex) {\n\t\t\tgetReaderContext().error(\"Failed to register bean definition with name '\" +\n\t\t\t\t\tbdHolder.getBeanName() + \"'\", ele, ex);\n\t\t}\n\t\t// Send registration event.\n\t\tgetReaderContext().fireComponentRegistered(new BeanComponentDefinition(bdHolder));\n\t}\n}\n```\n\n#### BeanDefinitionReaderUtils的registerBeanDefinition(bdHolder, getReaderContext().getRegistry())方法\n- 主要作用：\n- 代码位置：org.springframework.beans.factory.support.BeanDefinitionReaderUtils\n```java\npublic static void registerBeanDefinition(\n\t\tBeanDefinitionHolder definitionHolder, BeanDefinitionRegistry registry)\n\t\tthrows BeanDefinitionStoreException {\n\n\t// Register bean definition under primary name.\n\tString beanName = definitionHolder.getBeanName();\n\t// 将Bean的名字和BeanDefinition对象进行注册\n\t// registerBeanDefinition(beanName, definitionHolder.getBeanDefinition());方法定义在BeanDefinitionRegistry接口中：\n\t// 具体实现在中实现\n\tregistry.registerBeanDefinition(beanName, definitionHolder.getBeanDefinition());\n\n\t// Register aliases for bean name, if any.\n\tString[] aliases = definitionHolder.getAliases();\n\tif (aliases != null) {\n\t\tfor (String alias : aliases) {\n\t\t\tregistry.registerAlias(beanName, alias);\n\t\t}\n\t}\n}\n\n```\n\n#### DefaultListableBeanFactory中registerBeanDefinition(String beanName, BeanDefinition beanDefinition)\n- 作用：\n- DefaultListableBeanFactory的字段beanDefinitionMap是一个ConcurrentHashMap<String, BeanDefinition>，用于存储bean的定义信息\n- DefaultListableBeanFactory的字段beanDefinitionNames是一个ArrayList<String>类型数据，用于存储Bean的名称\n- 代码位置：org.springframework.beans.factory.support.DefaultListableBeanFactory\n-\n```java\n@Override\npublic void registerBeanDefinition(String beanName, BeanDefinition beanDefinition)\n\t\tthrows BeanDefinitionStoreException {\n\n\tAssert.hasText(beanName, \"Bean name must not be empty\");\n\tAssert.notNull(beanDefinition, \"BeanDefinition must not be null\");\n\n\tif (beanDefinition instanceof AbstractBeanDefinition) {\n\t\ttry {\n\t\t\t((AbstractBeanDefinition) beanDefinition).validate();\n\t\t}\n\t\tcatch (BeanDefinitionValidationException ex) {\n\t\t\tthrow new BeanDefinitionStoreException(beanDefinition.getResourceDescription(), beanName,\n\t\t\t\t\t\"Validation of bean definition failed\", ex);\n\t\t}\n\t}\n\n\tBeanDefinition existingDefinition = this.beanDefinitionMap.get(beanName);\n\t// 查找是否存在同名的bean\n\tif (existingDefinition != null) {\n\t\t// 有同名的bean存在时\n\t\tif (!isAllowBeanDefinitionOverriding()) {\n\t\t\tthrow new BeanDefinitionOverrideException(beanName, beanDefinition, existingDefinition);\n\t\t}\n\t\telse if (existingDefinition.getRole() < beanDefinition.getRole()) {\n\t\t\t// e.g. was ROLE_APPLICATION, now overriding with ROLE_SUPPORT or ROLE_INFRASTRUCTURE\n\t\t\tif (logger.isInfoEnabled()) {\n\t\t\t\tlogger.info(\"Overriding user-defined bean definition for bean '\" + beanName +\n\t\t\t\t\t\t\"' with a framework-generated bean definition: replacing [\" +\n\t\t\t\t\t\texistingDefinition + \"] with [\" + beanDefinition + \"]\");\n\t\t\t}\n\t\t}\n\t\telse if (!beanDefinition.equals(existingDefinition)) {\n\t\t\tif (logger.isDebugEnabled()) {\n\t\t\t\tlogger.debug(\"Overriding bean definition for bean '\" + beanName +\n\t\t\t\t\t\t\"' with a different definition: replacing [\" + existingDefinition +\n\t\t\t\t\t\t\"] with [\" + beanDefinition + \"]\");\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tif (logger.isTraceEnabled()) {\n\t\t\t\tlogger.trace(\"Overriding bean definition for bean '\" + beanName +\n\t\t\t\t\t\t\"' with an equivalent definition: replacing [\" + existingDefinition +\n\t\t\t\t\t\t\"] with [\" + beanDefinition + \"]\");\n\t\t\t}\n\t\t}\n\t\tthis.beanDefinitionMap.put(beanName, beanDefinition);\n\t}\n\telse {\n\t\t// 没有同名的bean存在时\n\t\tif (hasBeanCreationStarted()) {\n\t\t\t// Cannot modify startup-time collection elements anymore (for stable iteration)\n\t\t\tsynchronized (this.beanDefinitionMap) {\n\t\t\t\t// beanDefinitionMap存储beanName:BeanDefinition一一对应的K:V信息\n\t\t\t\t// beanName作为key， beanDefinition作为value存入DefaultListableBeanFactory对象的beanDefinitionMap字段中\n\t\t\t\t// 完成Bean的注册，将Bean注册到BeanFactory中\n\t\t\t\tthis.beanDefinitionMap.put(beanName, beanDefinition);\n\t\t\t\tList<String> updatedDefinitions = new ArrayList<>(this.beanDefinitionNames.size() + 1);\n\t\t\t\tupdatedDefinitions.addAll(this.beanDefinitionNames);\n\t\t\t\tupdatedDefinitions.add(beanName);\n\t\t\t\t// 将所有的beanName保存到beanDefinitionNames字段中，数据类型为\n\t\t\t\tthis.beanDefinitionNames = updatedDefinitions;\n\t\t\t\tremoveManualSingletonName(beanName);\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\t// Still in startup registration phase\n\t\t\tthis.beanDefinitionMap.put(beanName, beanDefinition);\n\t\t\tthis.beanDefinitionNames.add(beanName);\n\t\t\tremoveManualSingletonName(beanName);\n\t\t}\n\t\tthis.frozenBeanDefinitionNames = null;\n\t}\n\n\tif (existingDefinition != null || containsSingleton(beanName)) {\n\t\tresetBeanDefinition(beanName);\n\t}\n}\n\n\n```\n- 到此上面的 loadBeanDefinitions(XmlBeanDefinitionReader reader)方法基本执行完成\n- 上一级的loadBeanDefinitions(DefaultListableBeanFactory beanFactory)方法也执行到loadBeanDefinitions(XmlBeanDefinitionReader reader)方法后结束\n- 在上述创建BeanFactory的过程中，BeanDefination注册到BeanFactory（DefaultListableBeanFactory）中的类型为ConcurrentHashMap<String, BeanDefinition>，字段名beanDefinitionMap的为对象中\n- 向beanDefinitionMap中注册时beanName为key,beanDefination为value；\n- DefaultListableBeanFactory对象的字段beanDefinitionNames是一个ArrayList<String>类型数据，用于存储所有已经注册的Bean的名称\n- refreshBeanFactory()方法执行完成，接下来进入其下一行的getBeanFactory()方法\n\n### getBeanFactory()方法的一种实现\n- AbstractRefreshableApplicationContext中getBeanFactory()方法的一种实现\n- 获取BeanFactory\n```java\n@Override\npublic final ConfigurableListableBeanFactory getBeanFactory() {\n\tsynchronized (this.beanFactoryMonitor) {\n\t\tif (this.beanFactory == null) {\n\t\t   throw new IllegalStateException(\"BeanFactory not initialized or already closed - call 'refresh' before accessing beans via the ApplicationContext\");\n\t\t}\n\t\treturn this.beanFactory;\n\t}\n}\n```\n- getBeanFactory()方法执行完，标志上一级的方法obtainFreshBeanFactory()执行完成，接下来将进入AbstractApplicationContext抽象类中定义的refresh()模板方法中的第三步定义的prepareBeanFactory(beanFactory)方法\n\n\n\n# 6 prepareBeanFactory(beanFactory)方法\n- 代码位置: org.springframework.context.support.AbstractApplicationContext.java\n```java\nprotected void prepareBeanFactory(ConfigurableListableBeanFactory beanFactory) {\n\t\t// Tell the internal bean factory to use the context's class loader etc.\n\t\tbeanFactory.setBeanClassLoader(getClassLoader());\n\t\tbeanFactory.setBeanExpressionResolver(new StandardBeanExpressionResolver(beanFactory.getBeanClassLoader()));\n\t\tbeanFactory.addPropertyEditorRegistrar(new ResourceEditorRegistrar(this, getEnvironment()));\n\n\t\t// Configure the bean factory with context callbacks.\n\t\tbeanFactory.addBeanPostProcessor(new ApplicationContextAwareProcessor(this));\n\t\tbeanFactory.ignoreDependencyInterface(EnvironmentAware.class);\n\t\tbeanFactory.ignoreDependencyInterface(EmbeddedValueResolverAware.class);\n\t\tbeanFactory.ignoreDependencyInterface(ResourceLoaderAware.class);\n\t\tbeanFactory.ignoreDependencyInterface(ApplicationEventPublisherAware.class);\n\t\tbeanFactory.ignoreDependencyInterface(MessageSourceAware.class);\n\t\tbeanFactory.ignoreDependencyInterface(ApplicationContextAware.class);\n\n\t\t// BeanFactory interface not registered as resolvable type in a plain factory.\n\t\t// MessageSource registered (and found for autowiring) as a bean.\n\t\tbeanFactory.registerResolvableDependency(BeanFactory.class, beanFactory);\n\t\tbeanFactory.registerResolvableDependency(ResourceLoader.class, this);\n\t\tbeanFactory.registerResolvableDependency(ApplicationEventPublisher.class, this);\n\t\tbeanFactory.registerResolvableDependency(ApplicationContext.class, this);\n\n\t\t// Register early post-processor for detecting inner beans as ApplicationListeners.\n\t\tbeanFactory.addBeanPostProcessor(new ApplicationListenerDetector(this));\n\n\t\t// Detect a LoadTimeWeaver and prepare for weaving, if found.\n\t\tif (beanFactory.containsBean(LOAD_TIME_WEAVER_BEAN_NAME)) {\n\t\t\tbeanFactory.addBeanPostProcessor(new LoadTimeWeaverAwareProcessor(beanFactory));\n\t\t\t// Set a temporary ClassLoader for type matching.\n\t\t\tbeanFactory.setTempClassLoader(new ContextTypeMatchClassLoader(beanFactory.getBeanClassLoader()));\n\t\t}\n\n\t\t// Register default environment beans.\n\t\tif (!beanFactory.containsLocalBean(ENVIRONMENT_BEAN_NAME)) {\n\t\t\tbeanFactory.registerSingleton(ENVIRONMENT_BEAN_NAME, getEnvironment());\n\t\t}\n\t\tif (!beanFactory.containsLocalBean(SYSTEM_PROPERTIES_BEAN_NAME)) {\n\t\t\tbeanFactory.registerSingleton(SYSTEM_PROPERTIES_BEAN_NAME, getEnvironment().getSystemProperties());\n\t\t}\n\t\tif (!beanFactory.containsLocalBean(SYSTEM_ENVIRONMENT_BEAN_NAME)) {\n\t\t\tbeanFactory.registerSingleton(SYSTEM_ENVIRONMENT_BEAN_NAME, getEnvironment().getSystemEnvironment());\n\t\t}\n\t}\n\n```\n\n\n# 7\tpostProcessBeanFactory(ConfigurableListableBeanFactory beanFactory)\n- 代码位置:org.springframework.context.support.AbstractApplicationContext.java\n```java\nprotected void postProcessBeanFactory(ConfigurableListableBeanFactory beanFactory) {\n\t// 该方法是一个空方法，具体的实现依据具体的情况在其子类中继承或进行重写\n\t// 观察AbstractApplicationContext到FileSystemXmlApplicationContext(location)的继承路径，其子类中并未实现具体的逻辑;\n}\n\n```\n- postProcessBeanFactory(beanFactory)执行完后进入 invokeBeanFactoryPostProcessors(beanFactory)方法\n\n\n# 8. invokeBeanFactoryPostProcessors(beanFactory)方法\n```java\nprotected void invokeBeanFactoryPostProcessors(ConfigurableListableBeanFactory beanFactory) {\n\tPostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(beanFactory, getBeanFactoryPostProcessors());\n\n\t// Detect a LoadTimeWeaver and prepare for weaving, if found in the meantime\n\t// (e.g. through an @Bean method registered by ConfigurationClassPostProcessor)\n\tif (beanFactory.getTempClassLoader() == null && beanFactory.containsBean(LOAD_TIME_WEAVER_BEAN_NAME)) {\n\t\tbeanFactory.addBeanPostProcessor(new LoadTimeWeaverAwareProcessor(beanFactory));\n\t\tbeanFactory.setTempClassLoader(new ContextTypeMatchClassLoader(beanFactory.getBeanClassLoader()));\n\t}\n}\n\npublic List<BeanFactoryPostProcessor> getBeanFactoryPostProcessors() {\n\treturn this.beanFactoryPostProcessors;\n}\n\n```\n\n- PostProcessorRegistrationDelegate的invokeBeanFactoryPostProcessors(ConfigurableListableBeanFactory beanFactory, List<BeanFactoryPostProcessor> beanFactoryPostProcessors)静态方法\n```java\npublic static void invokeBeanFactoryPostProcessors(\n\t\tConfigurableListableBeanFactory beanFactory, List<BeanFactoryPostProcessor> beanFactoryPostProcessors) {\n\n\t// Invoke BeanDefinitionRegistryPostProcessors first, if any.\n\tSet<String> processedBeans = new HashSet<>();\n\n\tif (beanFactory instanceof BeanDefinitionRegistry) {\n\t\tBeanDefinitionRegistry registry = (BeanDefinitionRegistry) beanFactory;\n\t\tList<BeanFactoryPostProcessor> regularPostProcessors = new ArrayList<>();\n\t\tList<BeanDefinitionRegistryPostProcessor> registryProcessors = new ArrayList<>();\n\n\t\tfor (BeanFactoryPostProcessor postProcessor : beanFactoryPostProcessors) {\n\t\t\tif (postProcessor instanceof BeanDefinitionRegistryPostProcessor) {\n\t\t\t\tBeanDefinitionRegistryPostProcessor registryProcessor =\n\t\t\t\t\t\t(BeanDefinitionRegistryPostProcessor) postProcessor;\n\t\t\t\tregistryProcessor.postProcessBeanDefinitionRegistry(registry);\n\t\t\t\tregistryProcessors.add(registryProcessor);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tregularPostProcessors.add(postProcessor);\n\t\t\t}\n\t\t}\n\n\t\t// Do not initialize FactoryBeans here: We need to leave all regular beans\n\t\t// uninitialized to let the bean factory post-processors apply to them!\n\t\t// Separate between BeanDefinitionRegistryPostProcessors that implement\n\t\t// PriorityOrdered, Ordered, and the rest.\n\t\tList<BeanDefinitionRegistryPostProcessor> currentRegistryProcessors = new ArrayList<>();\n\n\t\t// First, invoke the BeanDefinitionRegistryPostProcessors that implement PriorityOrdered.\n\t\tString[] postProcessorNames =\n\t\t\t\tbeanFactory.getBeanNamesForType(BeanDefinitionRegistryPostProcessor.class, true, false);\n\t\tfor (String ppName : postProcessorNames) {\n\t\t\tif (beanFactory.isTypeMatch(ppName, PriorityOrdered.class)) {\n\t\t\t\tcurrentRegistryProcessors.add(beanFactory.getBean(ppName, BeanDefinitionRegistryPostProcessor.class));\n\t\t\t\tprocessedBeans.add(ppName);\n\t\t\t}\n\t\t}\n\t\tsortPostProcessors(currentRegistryProcessors, beanFactory);\n\t\tregistryProcessors.addAll(currentRegistryProcessors);\n\t\tinvokeBeanDefinitionRegistryPostProcessors(currentRegistryProcessors, registry);\n\t\tcurrentRegistryProcessors.clear();\n\n\t\t// Next, invoke the BeanDefinitionRegistryPostProcessors that implement Ordered.\n\t\tpostProcessorNames = beanFactory.getBeanNamesForType(BeanDefinitionRegistryPostProcessor.class, true, false);\n\t\tfor (String ppName : postProcessorNames) {\n\t\t\tif (!processedBeans.contains(ppName) && beanFactory.isTypeMatch(ppName, Ordered.class)) {\n\t\t\t\tcurrentRegistryProcessors.add(beanFactory.getBean(ppName, BeanDefinitionRegistryPostProcessor.class));\n\t\t\t\tprocessedBeans.add(ppName);\n\t\t\t}\n\t\t}\n\t\tsortPostProcessors(currentRegistryProcessors, beanFactory);\n\t\tregistryProcessors.addAll(currentRegistryProcessors);\n\t\tinvokeBeanDefinitionRegistryPostProcessors(currentRegistryProcessors, registry);\n\t\tcurrentRegistryProcessors.clear();\n\n\t\t// Finally, invoke all other BeanDefinitionRegistryPostProcessors until no further ones appear.\n\t\tboolean reiterate = true;\n\t\twhile (reiterate) {\n\t\t\treiterate = false;\n\t\t\tpostProcessorNames = beanFactory.getBeanNamesForType(BeanDefinitionRegistryPostProcessor.class, true, false);\n\t\t\tfor (String ppName : postProcessorNames) {\n\t\t\t\tif (!processedBeans.contains(ppName)) {\n\t\t\t\t\tcurrentRegistryProcessors.add(beanFactory.getBean(ppName, BeanDefinitionRegistryPostProcessor.class));\n\t\t\t\t\tprocessedBeans.add(ppName);\n\t\t\t\t\treiterate = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tsortPostProcessors(currentRegistryProcessors, beanFactory);\n\t\t\tregistryProcessors.addAll(currentRegistryProcessors);\n\t\t\tinvokeBeanDefinitionRegistryPostProcessors(currentRegistryProcessors, registry);\n\t\t\tcurrentRegistryProcessors.clear();\n\t\t}\n\n\t\t// Now, invoke the postProcessBeanFactory callback of all processors handled so far.\n\t\tinvokeBeanFactoryPostProcessors(registryProcessors, beanFactory);\n\t\tinvokeBeanFactoryPostProcessors(regularPostProcessors, beanFactory);\n\t}\n\n\telse {\n\t\t// Invoke factory processors registered with the context instance.\n\t\tinvokeBeanFactoryPostProcessors(beanFactoryPostProcessors, beanFactory);\n\t}\n\n\t// Do not initialize FactoryBeans here: We need to leave all regular beans\n\t// uninitialized to let the bean factory post-processors apply to them!\n\tString[] postProcessorNames =\n\t\t\tbeanFactory.getBeanNamesForType(BeanFactoryPostProcessor.class, true, false);\n\n\t// Separate between BeanFactoryPostProcessors that implement PriorityOrdered,\n\t// Ordered, and the rest.\n\tList<BeanFactoryPostProcessor> priorityOrderedPostProcessors = new ArrayList<>();\n\tList<String> orderedPostProcessorNames = new ArrayList<>();\n\tList<String> nonOrderedPostProcessorNames = new ArrayList<>();\n\tfor (String ppName : postProcessorNames) {\n\t\tif (processedBeans.contains(ppName)) {\n\t\t\t// skip - already processed in first phase above\n\t\t}\n\t\telse if (beanFactory.isTypeMatch(ppName, PriorityOrdered.class)) {\n\t\t\tpriorityOrderedPostProcessors.add(beanFactory.getBean(ppName, BeanFactoryPostProcessor.class));\n\t\t}\n\t\telse if (beanFactory.isTypeMatch(ppName, Ordered.class)) {\n\t\t\torderedPostProcessorNames.add(ppName);\n\t\t}\n\t\telse {\n\t\t\tnonOrderedPostProcessorNames.add(ppName);\n\t\t}\n\t}\n\n\t// First, invoke the BeanFactoryPostProcessors that implement PriorityOrdered.\n\tsortPostProcessors(priorityOrderedPostProcessors, beanFactory);\n\tinvokeBeanFactoryPostProcessors(priorityOrderedPostProcessors, beanFactory);\n\n\t// Next, invoke the BeanFactoryPostProcessors that implement Ordered.\n\tList<BeanFactoryPostProcessor> orderedPostProcessors = new ArrayList<>(orderedPostProcessorNames.size());\n\tfor (String postProcessorName : orderedPostProcessorNames) {\n\t\torderedPostProcessors.add(beanFactory.getBean(postProcessorName, BeanFactoryPostProcessor.class));\n\t}\n\tsortPostProcessors(orderedPostProcessors, beanFactory);\n\tinvokeBeanFactoryPostProcessors(orderedPostProcessors, beanFactory);\n\n\t// Finally, invoke all other BeanFactoryPostProcessors.\n\tList<BeanFactoryPostProcessor> nonOrderedPostProcessors = new ArrayList<>(nonOrderedPostProcessorNames.size());\n\tfor (String postProcessorName : nonOrderedPostProcessorNames) {\n\t\tnonOrderedPostProcessors.add(beanFactory.getBean(postProcessorName, BeanFactoryPostProcessor.class));\n\t}\n\tinvokeBeanFactoryPostProcessors(nonOrderedPostProcessors, beanFactory);\n\n\t// Clear cached merged bean definitions since the post-processors might have\n\t// modified the original metadata, e.g. replacing placeholders in values...\n\tbeanFactory.clearMetadataCache();\n}\n\n// 上面的方法内部有调用该重载方法\nprivate static void invokeBeanDefinitionRegistryPostProcessors(\n\t\tCollection<? extends BeanDefinitionRegistryPostProcessor> postProcessors, BeanDefinitionRegistry registry) {\n\n\tfor (BeanDefinitionRegistryPostProcessor postProcessor : postProcessors) {\n\t\tpostProcessor.postProcessBeanDefinitionRegistry(registry);\n\t}\n}\n\n// 上面的方法内部有调用该方法\nprivate static void sortPostProcessors(List<?> postProcessors, ConfigurableListableBeanFactory beanFactory) {\n\tComparator<Object> comparatorToUse = null;\n\tif (beanFactory instanceof DefaultListableBeanFactory) {\n\t\tcomparatorToUse = ((DefaultListableBeanFactory) beanFactory).getDependencyComparator();\n\t}\n\tif (comparatorToUse == null) {\n\t\tcomparatorToUse = OrderComparator.INSTANCE;\n\t}\n\tpostProcessors.sort(comparatorToUse);\n}\n```\n\n\n# 9. registerBeanPostProcessors(beanFactory);方法\n```java\nprotected void registerBeanPostProcessors(ConfigurableListableBeanFactory beanFactory) {\n\tPostProcessorRegistrationDelegate.registerBeanPostProcessors(beanFactory, this);\n}\n\n```\n- PostProcessorRegistrationDelegate的registerBeanPostProcessors(ConfigurableListableBeanFactory beanFactory, AbstractApplicationContext applicationContexs)静态方法，具体代码如下：\n```java\npublic static void registerBeanPostProcessors(\n\t\tConfigurableListableBeanFactory beanFactory, AbstractApplicationContext applicationContext) {\n\n\tString[] postProcessorNames = beanFactory.getBeanNamesForType(BeanPostProcessor.class, true, false);\n\n\t// Register BeanPostProcessorChecker that logs an info message when\n\t// a bean is created during BeanPostProcessor instantiation, i.e. when\n\t// a bean is not eligible for getting processed by all BeanPostProcessors.\n\tint beanProcessorTargetCount = beanFactory.getBeanPostProcessorCount() + 1 + postProcessorNames.length;\n\tbeanFactory.addBeanPostProcessor(new BeanPostProcessorChecker(beanFactory, beanProcessorTargetCount));\n\n\t// Separate between BeanPostProcessors that implement PriorityOrdered,\n\t// Ordered, and the rest.\n\tList<BeanPostProcessor> priorityOrderedPostProcessors = new ArrayList<>();\n\tList<BeanPostProcessor> internalPostProcessors = new ArrayList<>();\n\tList<String> orderedPostProcessorNames = new ArrayList<>();\n\tList<String> nonOrderedPostProcessorNames = new ArrayList<>();\n\tfor (String ppName : postProcessorNames) {\n\t\tif (beanFactory.isTypeMatch(ppName, PriorityOrdered.class)) {\n\t\t\tBeanPostProcessor pp = beanFactory.getBean(ppName, BeanPostProcessor.class);\n\t\t\tpriorityOrderedPostProcessors.add(pp);\n\t\t\tif (pp instanceof MergedBeanDefinitionPostProcessor) {\n\t\t\t\tinternalPostProcessors.add(pp);\n\t\t\t}\n\t\t}\n\t\telse if (beanFactory.isTypeMatch(ppName, Ordered.class)) {\n\t\t\torderedPostProcessorNames.add(ppName);\n\t\t}\n\t\telse {\n\t\t\tnonOrderedPostProcessorNames.add(ppName);\n\t\t}\n\t}\n\n\t// First, register the BeanPostProcessors that implement PriorityOrdered.\n\tsortPostProcessors(priorityOrderedPostProcessors, beanFactory);\n\tregisterBeanPostProcessors(beanFactory, priorityOrderedPostProcessors);\n\n\t// Next, register the BeanPostProcessors that implement Ordered.\n\tList<BeanPostProcessor> orderedPostProcessors = new ArrayList<>(orderedPostProcessorNames.size());\n\tfor (String ppName : orderedPostProcessorNames) {\n\t\tBeanPostProcessor pp = beanFactory.getBean(ppName, BeanPostProcessor.class);\n\t\torderedPostProcessors.add(pp);\n\t\tif (pp instanceof MergedBeanDefinitionPostProcessor) {\n\t\t\tinternalPostProcessors.add(pp);\n\t\t}\n\t}\n\tsortPostProcessors(orderedPostProcessors, beanFactory);\n\tregisterBeanPostProcessors(beanFactory, orderedPostProcessors);\n\n\t// Now, register all regular BeanPostProcessors.\n\tList<BeanPostProcessor> nonOrderedPostProcessors = new ArrayList<>(nonOrderedPostProcessorNames.size());\n\tfor (String ppName : nonOrderedPostProcessorNames) {\n\t\tBeanPostProcessor pp = beanFactory.getBean(ppName, BeanPostProcessor.class);\n\t\tnonOrderedPostProcessors.add(pp);\n\t\tif (pp instanceof MergedBeanDefinitionPostProcessor) {\n\t\t\tinternalPostProcessors.add(pp);\n\t\t}\n\t}\n\tregisterBeanPostProcessors(beanFactory, nonOrderedPostProcessors);\n\n\t// Finally, re-register all internal BeanPostProcessors.\n\tsortPostProcessors(internalPostProcessors, beanFactory);\n\tregisterBeanPostProcessors(beanFactory, internalPostProcessors);\n\n\t// Re-register post-processor for detecting inner beans as ApplicationListeners,\n\t// moving it to the end of the processor chain (for picking up proxies etc).\n\tbeanFactory.addBeanPostProcessor(new ApplicationListenerDetector(applicationContext));\n}\n\n\n//上面的方法内部有调用该重载方法\nprivate static void registerBeanPostProcessors(\n\t\tConfigurableListableBeanFactory beanFactory, List<BeanPostProcessor> postProcessors) {\n\n\tfor (BeanPostProcessor postProcessor : postProcessors) {\n\t\tbeanFactory.addBeanPostProcessor(postProcessor);\n\t}\n}\n```\n\n# 10. initMessageSource();方法\n- org.springframework.context.support.AbstractApplicationContext中的initMessageSource()方法\n```java\nprotected void initMessageSource() {\n\tConfigurableListableBeanFactory beanFactory = getBeanFactory();\n\tif (beanFactory.containsLocalBean(MESSAGE_SOURCE_BEAN_NAME)) {\n\t\tthis.messageSource = beanFactory.getBean(MESSAGE_SOURCE_BEAN_NAME, MessageSource.class);\n\t\t// Make MessageSource aware of parent MessageSource.\n\t\tif (this.parent != null && this.messageSource instanceof HierarchicalMessageSource) {\n\t\t\tHierarchicalMessageSource hms = (HierarchicalMessageSource) this.messageSource;\n\t\t\tif (hms.getParentMessageSource() == null) {\n\t\t\t\t// Only set parent context as parent MessageSource if no parent MessageSource\n\t\t\t\t// registered already.\n\t\t\t\thms.setParentMessageSource(getInternalParentMessageSource());\n\t\t\t}\n\t\t}\n\t\tif (logger.isTraceEnabled()) {\n\t\t\tlogger.trace(\"Using MessageSource [\" + this.messageSource + \"]\");\n\t\t}\n\t}\n\telse {\n\t\t// Use empty MessageSource to be able to accept getMessage calls.\n\t\tDelegatingMessageSource dms = new DelegatingMessageSource();\n\t\tdms.setParentMessageSource(getInternalParentMessageSource());\n\t\tthis.messageSource = dms;\n\t\tbeanFactory.registerSingleton(MESSAGE_SOURCE_BEAN_NAME, this.messageSource);\n\t\tif (logger.isTraceEnabled()) {\n\t\t\tlogger.trace(\"No '\" + MESSAGE_SOURCE_BEAN_NAME + \"' bean, using [\" + this.messageSource + \"]\");\n\t\t}\n\t}\n}\n```\n\n# 11. initApplicationEventMulticaster();方法\n- org.springframework.context.support.AbstractApplicationContext中的initApplicationEventMulticaster()方法\n```java\nprotected void initApplicationEventMulticaster() {\n\tConfigurableListableBeanFactory beanFactory = getBeanFactory();\n\tif (beanFactory.containsLocalBean(APPLICATION_EVENT_MULTICASTER_BEAN_NAME)) {\n\t\tthis.applicationEventMulticaster =\n\t\t\t\tbeanFactory.getBean(APPLICATION_EVENT_MULTICASTER_BEAN_NAME, ApplicationEventMulticaster.class);\n\t\tif (logger.isTraceEnabled()) {\n\t\t\tlogger.trace(\"Using ApplicationEventMulticaster [\" + this.applicationEventMulticaster + \"]\");\n\t\t}\n\t}\n\telse {\n\t\tthis.applicationEventMulticaster = new SimpleApplicationEventMulticaster(beanFactory);\n\t\tbeanFactory.registerSingleton(APPLICATION_EVENT_MULTICASTER_BEAN_NAME, this.applicationEventMulticaster);\n\t\tif (logger.isTraceEnabled()) {\n\t\t\tlogger.trace(\"No '\" + APPLICATION_EVENT_MULTICASTER_BEAN_NAME + \"' bean, using \" +\n\t\t\t\t\t\"[\" + this.applicationEventMulticaster.getClass().getSimpleName() + \"]\");\n\t\t}\n\t}\n}\n```\n\n# 12. onRefresh();方法\n- org.springframework.context.support.AbstractApplicationContext中的onRefresh()方法\n```java\nprotected void onRefresh() throws BeansException {\n\t// 该方法是一个空方法，具体的实现依据具体的情况在其子类中继承或进行重写\n\t// For subclasses: do nothing by default.\n}\n\n```\n\n\n# 13. registerListeners();方法\n- org.springframework.context.support.AbstractApplicationContext中的registerListeners()方法\n```java\n\tprotected void registerListeners() {\n\t\t// Register statically specified listeners first.\n\t\tfor (ApplicationListener<?> listener : getApplicationListeners()) {\n\t\t\tgetApplicationEventMulticaster().addApplicationListener(listener);\n\t\t}\n\n\t\t// Do not initialize FactoryBeans here: We need to leave all regular beans\n\t\t// uninitialized to let post-processors apply to them!\n\t\tString[] listenerBeanNames = getBeanNamesForType(ApplicationListener.class, true, false);\n\t\tfor (String listenerBeanName : listenerBeanNames) {\n\t\t\tgetApplicationEventMulticaster().addApplicationListenerBean(listenerBeanName);\n\t\t}\n\n\t\t// Publish early application events now that we finally have a multicaster...\n\t\tSet<ApplicationEvent> earlyEventsToProcess = this.earlyApplicationEvents;\n\t\tthis.earlyApplicationEvents = null;\n\t\tif (earlyEventsToProcess != null) {\n\t\t\tfor (ApplicationEvent earlyEvent : earlyEventsToProcess) {\n\t\t\t\tgetApplicationEventMulticaster().multicastEvent(earlyEvent);\n\t\t\t}\n\t\t}\n\t}\n\n```\n\n# 14. finishBeanFactoryInitialization(beanFactory);方法\n- org.springframework.context.support.AbstractApplicationContext中的finishBeanFactoryInitialization(beanFactory)方法\n- 实例化Bean的核心方法\n```java\nprotected void finishBeanFactoryInitialization(ConfigurableListableBeanFactory beanFactory) {\n\t// Initialize conversion service for this context.\n\tif (beanFactory.containsBean(CONVERSION_SERVICE_BEAN_NAME) &&\n\t\t\tbeanFactory.isTypeMatch(CONVERSION_SERVICE_BEAN_NAME, ConversionService.class)) {\n\t\tbeanFactory.setConversionService(\n\t\t\t\tbeanFactory.getBean(CONVERSION_SERVICE_BEAN_NAME, ConversionService.class));\n\t}\n\n\t// Register a default embedded value resolver if no bean post-processor\n\t// (such as a PropertyPlaceholderConfigurer bean) registered any before:\n\t// at this point, primarily for resolution in annotation attribute values.\n\tif (!beanFactory.hasEmbeddedValueResolver()) {\n\t\tbeanFactory.addEmbeddedValueResolver(strVal -> getEnvironment().resolvePlaceholders(strVal));\n\t}\n\n\t// Initialize LoadTimeWeaverAware beans early to allow for registering their transformers early.\n\tString[] weaverAwareNames = beanFactory.getBeanNamesForType(LoadTimeWeaverAware.class, false, false);\n\tfor (String weaverAwareName : weaverAwareNames) {\n\t\tgetBean(weaverAwareName);\n\t}\n\n\t// Stop using the temporary ClassLoader for type matching.\n\tbeanFactory.setTempClassLoader(null);\n\n\t// Allow for caching all bean definition metadata, not expecting further changes.\n\tbeanFactory.freezeConfiguration();\n\n\t// Instantiate all remaining (non-lazy-init) singletons.\n\t// 实例化bean的核心代码\n\tbeanFactory.preInstantiateSingletons(); \n\t// 上一行的preInstantiateSingletons()方法定义在ConfigurableListableBeanFactory接口中，\n\t// 具体实现是在DefaultListableBeanFactory中preInstantiateSingletons()方法\n}\n\n```\n\n#### DefaultListableBeanFactory中preInstantiateSingletons()方法\n```java\n@Override\npublic void preInstantiateSingletons() throws BeansException {\n\tif (logger.isTraceEnabled()) {\n\t\tlogger.trace(\"Pre-instantiating singletons in \" + this);\n\t}\n\n\t// Iterate over a copy to allow for init methods which in turn register new bean definitions.\n\t// While this may not be part of the regular factory bootstrap, it does otherwise work fine.\n\tList<String> beanNames = new ArrayList<>(this.beanDefinitionNames);\n\n\t// Trigger initialization of all non-lazy singleton beans...\n\t// 遍历beanDefinitionNames这个ArrayList对象中的beanName，\n\tfor (String beanName : beanNames) {\n\t\tRootBeanDefinition bd = getMergedLocalBeanDefinition(beanName);\n\t\tif (!bd.isAbstract() && bd.isSingleton() && !bd.isLazyInit()) {\n\t\t\tif (isFactoryBean(beanName)) {\n\t\t\t\tObject bean = getBean(FACTORY_BEAN_PREFIX + beanName);\n\t\t\t\tif (bean instanceof FactoryBean) {\n\t\t\t\t\tfinal FactoryBean<?> factory = (FactoryBean<?>) bean;\n\t\t\t\t\tboolean isEagerInit;\n\t\t\t\t\tif (System.getSecurityManager() != null && factory instanceof SmartFactoryBean) {\n\t\t\t\t\t\tisEagerInit = AccessController.doPrivileged((PrivilegedAction<Boolean>)\n\t\t\t\t\t\t\t\t\t\t((SmartFactoryBean<?>) factory)::isEagerInit,\n\t\t\t\t\t\t\t\tgetAccessControlContext());\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tisEagerInit = (factory instanceof SmartFactoryBean &&\n\t\t\t\t\t\t\t\t((SmartFactoryBean<?>) factory).isEagerInit());\n\t\t\t\t\t}\n\t\t\t\t\tif (isEagerInit) {\n\t\t\t\t\t\t// 创建bean并递归构建Bean之间的依赖关系\n\t\t\t\t\t\tgetBean(beanName);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// 创建bean并递归构建Bean之间的依赖关系\n\t\t\t\tgetBean(beanName);\n\t\t\t}\n\t\t}\n\t}\n\n\t// Trigger post-initialization callback for all applicable beans...\n\tfor (String beanName : beanNames) {\n\t\tObject singletonInstance = getSingleton(beanName);\n\t\tif (singletonInstance instanceof SmartInitializingSingleton) {\n\t\t\tfinal SmartInitializingSingleton smartSingleton = (SmartInitializingSingleton) singletonInstance;\n\t\t\tif (System.getSecurityManager() != null) {\n\t\t\t\tAccessController.doPrivileged((PrivilegedAction<Object>) () -> {\n\t\t\t\t\tsmartSingleton.afterSingletonsInstantiated();\n\t\t\t\t\treturn null;\n\t\t\t\t}, getAccessControlContext());\n\t\t\t}\n\t\t\telse {\n\t\t\t\tsmartSingleton.afterSingletonsInstantiated();\n\t\t\t}\n\t\t}\n\t}\n}\n\n\n```\n\n### preInstantiateSingletons()方法中调用的getBean方法\n- getBean方法定义在BeanFactory接口中\n- getBean方法org.springframework.beans.factory.support.AbstractBeanFactory中实现\n```java\n@Override\npublic Object getBean(String name) throws BeansException {\n\treturn doGetBean(name, null, null, false);\n}\n\n\n\n//下面是上面方法调用doGetBean(name, null, null, false)方法\n// 这个方法特别长，以下是完整代码：\n@SuppressWarnings(\"unchecked\")\nprotected <T> T doGetBean(final String name, @Nullable final Class<T> requiredType,\n\t\t@Nullable final Object[] args, boolean typeCheckOnly) throws BeansException {\n\n\tfinal String beanName = transformedBeanName(name);\n\tObject bean;\n\n\t// Eagerly check singleton cache for manually registered singletons.\n\tObject sharedInstance = getSingleton(beanName);\n\tif (sharedInstance != null && args == null) {\n\t\tif (logger.isTraceEnabled()) {\n\t\t\tif (isSingletonCurrentlyInCreation(beanName)) {\n\t\t\t\tlogger.trace(\"Returning eagerly cached instance of singleton bean '\" + beanName +\n\t\t\t\t\t\t\"' that is not fully initialized yet - a consequence of a circular reference\");\n\t\t\t}\n\t\t\telse {\n\t\t\t\tlogger.trace(\"Returning cached instance of singleton bean '\" + beanName + \"'\");\n\t\t\t}\n\t\t}\n\t\tbean = getObjectForBeanInstance(sharedInstance, name, beanName, null);\n\t}\n\n\telse {\n\t\t// Fail if we're already creating this bean instance:\n\t\t// We're assumably within a circular reference.\n\t\tif (isPrototypeCurrentlyInCreation(beanName)) {\n\t\t\tthrow new BeanCurrentlyInCreationException(beanName);\n\t\t}\n\n\t\t// Check if bean definition exists in this factory.\n\t\tBeanFactory parentBeanFactory = getParentBeanFactory();\n\t\tif (parentBeanFactory != null && !containsBeanDefinition(beanName)) {\n\t\t\t// Not found -> check parent.\n\t\t\tString nameToLookup = originalBeanName(name);\n\t\t\tif (parentBeanFactory instanceof AbstractBeanFactory) {\n\t\t\t\treturn ((AbstractBeanFactory) parentBeanFactory).doGetBean(\n\t\t\t\t\t\tnameToLookup, requiredType, args, typeCheckOnly);\n\t\t\t}\n\t\t\telse if (args != null) {\n\t\t\t\t// Delegation to parent with explicit args.\n\t\t\t\treturn (T) parentBeanFactory.getBean(nameToLookup, args);\n\t\t\t}\n\t\t\telse if (requiredType != null) {\n\t\t\t\t// No args -> delegate to standard getBean method.\n\t\t\t\treturn parentBeanFactory.getBean(nameToLookup, requiredType);\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn (T) parentBeanFactory.getBean(nameToLookup);\n\t\t\t}\n\t\t}\n\n\t\tif (!typeCheckOnly) {\n\t\t\tmarkBeanAsCreated(beanName);\n\t\t}\n\n\t\ttry {\n\t\t\tfinal RootBeanDefinition mbd = getMergedLocalBeanDefinition(beanName);\n\t\t\tcheckMergedBeanDefinition(mbd, beanName, args);\n\n\t\t\t// Guarantee initialization of beans that the current bean depends on.\n\t\t\t// 获取当前bean的依赖关系\n\t\t\tString[] dependsOn = mbd.getDependsOn();\n\t\t\t// 根据依赖的beanName递归调用getBean()方法，不断探寻其依赖的bean，直到getSingleton方法返回依赖的Bean，即当前正在创建的Bean\n\t\t\t// 直到依赖关系最底层的bean没有依赖对象了，至此整个递归过程结束  \n\t\t\tif (dependsOn != null) {\n\t\t\t\tfor (String dep : dependsOn) {\n\t\t\t\t\tif (isDependent(beanName, dep)) {\n\t\t\t\t\t\tthrow new BeanCreationException(mbd.getResourceDescription(), beanName,\n\t\t\t\t\t\t\t\t\"Circular depends-on relationship between '\" + beanName + \"' and '\" + dep + \"'\");\n\t\t\t\t\t}\n\t\t\t\t\t// \n\t\t\t\t\tregisterDependentBean(dep, beanName);\n\t\t\t\t\ttry {\n\t\t\t\t\t\tgetBean(dep);\n\t\t\t\t\t}\n\t\t\t\t\tcatch (NoSuchBeanDefinitionException ex) {\n\t\t\t\t\t\tthrow new BeanCreationException(mbd.getResourceDescription(), beanName,\n\t\t\t\t\t\t\t\t\"'\" + beanName + \"' depends on missing bean '\" + dep + \"'\", ex);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Create bean instance.\n\t\t\tif (mbd.isSingleton()) {\n\t\t\t\t// getSingleton方法的参数是createBean(beanName, mbd, args)方法的返回值\n\t\t\t\tsharedInstance = getSingleton(beanName, () -> {\n\t\t\t\t\ttry {\n\t\t\t\t\t\t// createBean方法在AbstractBeanFactory抽象类中定义，具体实现是在AbstractAutowireCapableBeanFactory抽象类中\n\t\t\t\t\t\treturn createBean(beanName, mbd, args);\n\t\t\t\t\t}\n\t\t\t\t\tcatch (BeansException ex) {\n\t\t\t\t\t\t// Explicitly remove instance from singleton cache: It might have been put there\n\t\t\t\t\t\t// eagerly by the creation process, to allow for circular reference resolution.\n\t\t\t\t\t\t// Also remove any beans that received a temporary reference to the bean.\n\t\t\t\t\t\tdestroySingleton(beanName);\n\t\t\t\t\t\tthrow ex;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tbean = getObjectForBeanInstance(sharedInstance, name, beanName, mbd);\n\t\t\t}\n\n\t\t\telse if (mbd.isPrototype()) {\n\t\t\t\t// It's a prototype -> create a new instance.\n\t\t\t\tObject prototypeInstance = null;\n\t\t\t\ttry {\n\t\t\t\t\tbeforePrototypeCreation(beanName);\n\t\t\t\t\tprototypeInstance = createBean(beanName, mbd, args);\n\t\t\t\t}\n\t\t\t\tfinally {\n\t\t\t\t\tafterPrototypeCreation(beanName);\n\t\t\t\t}\n\t\t\t\tbean = getObjectForBeanInstance(prototypeInstance, name, beanName, mbd);\n\t\t\t}\n\n\t\t\telse {\n\t\t\t\tString scopeName = mbd.getScope();\n\t\t\t\tfinal Scope scope = this.scopes.get(scopeName);\n\t\t\t\tif (scope == null) {\n\t\t\t\t\tthrow new IllegalStateException(\"No Scope registered for scope name '\" + scopeName + \"'\");\n\t\t\t\t}\n\t\t\t\ttry {\n\t\t\t\t\tObject scopedInstance = scope.get(beanName, () -> {\n\t\t\t\t\t\tbeforePrototypeCreation(beanName);\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\treturn createBean(beanName, mbd, args);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfinally {\n\t\t\t\t\t\t\tafterPrototypeCreation(beanName);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tbean = getObjectForBeanInstance(scopedInstance, name, beanName, mbd);\n\t\t\t\t}\n\t\t\t\tcatch (IllegalStateException ex) {\n\t\t\t\t\tthrow new BeanCreationException(beanName,\n\t\t\t\t\t\t\t\"Scope '\" + scopeName + \"' is not active for the current thread; consider \" +\n\t\t\t\t\t\t\t\"defining a scoped proxy for this bean if you intend to refer to it from a singleton\",\n\t\t\t\t\t\t\tex);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcatch (BeansException ex) {\n\t\t\tcleanupAfterBeanCreationFailure(beanName);\n\t\t\tthrow ex;\n\t\t}\n\t}\n\n\t// Check if required type matches the type of the actual bean instance.\n\tif (requiredType != null && !requiredType.isInstance(bean)) {\n\t\ttry {\n\t\t\tT convertedBean = getTypeConverter().convertIfNecessary(bean, requiredType);\n\t\t\tif (convertedBean == null) {\n\t\t\t\tthrow new BeanNotOfRequiredTypeException(name, requiredType, bean.getClass());\n\t\t\t}\n\t\t\treturn convertedBean;\n\t\t}\n\t\tcatch (TypeMismatchException ex) {\n\t\t\tif (logger.isTraceEnabled()) {\n\t\t\t\tlogger.trace(\"Failed to convert bean '\" + name + \"' to required type '\" +\n\t\t\t\t\t\tClassUtils.getQualifiedName(requiredType) + \"'\", ex);\n\t\t\t}\n\t\t\tthrow new BeanNotOfRequiredTypeException(name, requiredType, bean.getClass());\n\t\t}\n\t}\n\treturn (T) bean;\n}\n\n\n```\n\n#### AbstractAutowireCapableBeanFactory类中的createBean(String beanName, RootBeanDefinition mbd, @Nullable Object[] args)方法\n\n- 代码位置：org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory\n```java\n@Override\nprotected Object createBean(String beanName, RootBeanDefinition mbd, @Nullable Object[] args)\n\t\tthrows BeanCreationException {\n\n\tif (logger.isTraceEnabled()) {\n\t\tlogger.trace(\"Creating instance of bean '\" + beanName + \"'\");\n\t}\n\tRootBeanDefinition mbdToUse = mbd;\n\n\t// Make sure bean class is actually resolved at this point, and\n\t// clone the bean definition in case of a dynamically resolved Class\n\t// which cannot be stored in the shared merged bean definition.\n\tClass<?> resolvedClass = resolveBeanClass(mbd, beanName);\n\tif (resolvedClass != null && !mbd.hasBeanClass() && mbd.getBeanClassName() != null) {\n\t\tmbdToUse = new RootBeanDefinition(mbd);\n\t\tmbdToUse.setBeanClass(resolvedClass);\n\t}\n\n\t// Prepare method overrides.\n\ttry {\n\t\tmbdToUse.prepareMethodOverrides();\n\t}\n\tcatch (BeanDefinitionValidationException ex) {\n\t\tthrow new BeanDefinitionStoreException(mbdToUse.getResourceDescription(),\n\t\t\t\tbeanName, \"Validation of method overrides failed\", ex);\n\t}\n\n\ttry {\n\t\t// Give BeanPostProcessors a chance to return a proxy instead of the target bean instance.\n\t\tObject bean = resolveBeforeInstantiation(beanName, mbdToUse);\n\t\tif (bean != null) {\n\t\t\treturn bean;\n\t\t}\n\t}\n\tcatch (Throwable ex) {\n\t\tthrow new BeanCreationException(mbdToUse.getResourceDescription(), beanName,\n\t\t\t\t\"BeanPostProcessor before instantiation of bean failed\", ex);\n\t}\n\n\ttry {\n\t\t// createBean方法的核心  该方法会返回Bean对象的实例，具体代码在下面贴出\n\t\tObject beanInstance = doCreateBean(beanName, mbdToUse, args);\n\t\tif (logger.isTraceEnabled()) {\n\t\t\tlogger.trace(\"Finished creating instance of bean '\" + beanName + \"'\");\n\t\t}\n\t\treturn beanInstance;\n\t}\n\tcatch (BeanCreationException | ImplicitlyAppearedSingletonException ex) {\n\t\t// A previously detected exception with proper bean creation context already,\n\t\t// or illegal singleton state to be communicated up to DefaultSingletonBeanRegistry.\n\t\tthrow ex;\n\t}\n\tcatch (Throwable ex) {\n\t\tthrow new BeanCreationException(\n\t\t\t\tmbdToUse.getResourceDescription(), beanName, \"Unexpected exception during bean creation\", ex);\n\t}\n}\n\n\n\n// 在AbstractAutowireCapableBeanFactory抽象类的createBean方法中调用的doCreateBean(beanName, mbdToUse, args)方法\nprotected Object doCreateBean(final String beanName, final RootBeanDefinition mbd, final @Nullable Object[] args)\n\t\tthrows BeanCreationException {\n\n\t// Instantiate the bean.\n\tBeanWrapper instanceWrapper = null;\n\tif (mbd.isSingleton()) {\n\t\tinstanceWrapper = this.factoryBeanInstanceCache.remove(beanName);\n\t}\n\tif (instanceWrapper == null) {\n\t\t// 创建Bean实例\n\t\tinstanceWrapper = createBeanInstance(beanName, mbd, args);\n\t}\n\tfinal Object bean = instanceWrapper.getWrappedInstance();\n\tClass<?> beanType = instanceWrapper.getWrappedClass();\n\tif (beanType != NullBean.class) {\n\t\tmbd.resolvedTargetType = beanType;\n\t}\n\n\t// Allow post-processors to modify the merged bean definition.\n\tsynchronized (mbd.postProcessingLock) {\n\t\tif (!mbd.postProcessed) {\n\t\t\ttry {\n\t\t\t\tapplyMergedBeanDefinitionPostProcessors(mbd, beanType, beanName);\n\t\t\t}\n\t\t\tcatch (Throwable ex) {\n\t\t\t\tthrow new BeanCreationException(mbd.getResourceDescription(), beanName,\n\t\t\t\t\t\t\"Post-processing of merged bean definition failed\", ex);\n\t\t\t}\n\t\t\tmbd.postProcessed = true;\n\t\t}\n\t}\n\n\t// Eagerly cache singletons to be able to resolve circular references\n\t// even when triggered by lifecycle interfaces like BeanFactoryAware.\n\tboolean earlySingletonExposure = (mbd.isSingleton() && this.allowCircularReferences &&\n\t\t\tisSingletonCurrentlyInCreation(beanName));\n\tif (earlySingletonExposure) {\n\t\tif (logger.isTraceEnabled()) {\n\t\t\tlogger.trace(\"Eagerly caching bean '\" + beanName +\n\t\t\t\t\t\"' to allow for resolving potential circular references\");\n\t\t}\n\t\taddSingletonFactory(beanName, () -> getEarlyBeanReference(beanName, mbd, bean));\n\t}\n\n\t// Initialize the bean instance.\n\tObject exposedObject = bean;\n\ttry {\n\t\t// 填充bean，实际进行依赖注入的地方\n\t\tpopulateBean(beanName, mbd, instanceWrapper);\n\t\texposedObject = initializeBean(beanName, exposedObject, mbd);\n\t}\n\tcatch (Throwable ex) {\n\t\tif (ex instanceof BeanCreationException && beanName.equals(((BeanCreationException) ex).getBeanName())) {\n\t\t\tthrow (BeanCreationException) ex;\n\t\t}\n\t\telse {\n\t\t\tthrow new BeanCreationException(\n\t\t\t\t\tmbd.getResourceDescription(), beanName, \"Initialization of bean failed\", ex);\n\t\t}\n\t}\n\n\tif (earlySingletonExposure) {\n\t\tObject earlySingletonReference = getSingleton(beanName, false);\n\t\tif (earlySingletonReference != null) {\n\t\t\tif (exposedObject == bean) {\n\t\t\t\texposedObject = earlySingletonReference;\n\t\t\t}\n\t\t\telse if (!this.allowRawInjectionDespiteWrapping && hasDependentBean(beanName)) {\n\t\t\t\tString[] dependentBeans = getDependentBeans(beanName);\n\t\t\t\tSet<String> actualDependentBeans = new LinkedHashSet<>(dependentBeans.length);\n\t\t\t\tfor (String dependentBean : dependentBeans) {\n\t\t\t\t\tif (!removeSingletonIfCreatedForTypeCheckOnly(dependentBean)) {\n\t\t\t\t\t\tactualDependentBeans.add(dependentBean);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (!actualDependentBeans.isEmpty()) {\n\t\t\t\t\tthrow new BeanCurrentlyInCreationException(beanName,\n\t\t\t\t\t\t\t\"Bean with name '\" + beanName + \"' has been injected into other beans [\" +\n\t\t\t\t\t\t\tStringUtils.collectionToCommaDelimitedString(actualDependentBeans) +\n\t\t\t\t\t\t\t\"] in its raw version as part of a circular reference, but has eventually been \" +\n\t\t\t\t\t\t\t\"wrapped. This means that said other beans do not use the final version of the \" +\n\t\t\t\t\t\t\t\"bean. This is often the result of over-eager type matching - consider using \" +\n\t\t\t\t\t\t\t\"'getBeanNamesOfType' with the 'allowEagerInit' flag turned off, for example.\");\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Register bean as disposable.\n\ttry {\n\t\tregisterDisposableBeanIfNecessary(beanName, bean, mbd);\n\t}\n\tcatch (BeanDefinitionValidationException ex) {\n\t\tthrow new BeanCreationException(\n\t\t\t\tmbd.getResourceDescription(), beanName, \"Invalid destruction signature\", ex);\n\t}\n\n\treturn exposedObject;\n}\n\n\n// 在AbstractAutowireCapableBeanFactory抽象类的doCreateBean方法中调用的 createBeanInstance(beanName, mbd, args)方法\nprotected BeanWrapper createBeanInstance(String beanName, RootBeanDefinition mbd, @Nullable Object[] args) {\n\t// Make sure bean class is actually resolved at this point.\n\tClass<?> beanClass = resolveBeanClass(mbd, beanName);\n\n\tif (beanClass != null && !Modifier.isPublic(beanClass.getModifiers()) && !mbd.isNonPublicAccessAllowed()) {\n\t\tthrow new BeanCreationException(mbd.getResourceDescription(), beanName,\n\t\t\t\t\"Bean class isn't public, and non-public access not allowed: \" + beanClass.getName());\n\t}\n\n\tSupplier<?> instanceSupplier = mbd.getInstanceSupplier();\n\tif (instanceSupplier != null) {\n\t\treturn obtainFromSupplier(instanceSupplier, beanName);\n\t}\n\n\tif (mbd.getFactoryMethodName() != null) {\n\t\treturn instantiateUsingFactoryMethod(beanName, mbd, args);\n\t}\n\n\t// Shortcut when re-creating the same bean...\n\tboolean resolved = false;\n\tboolean autowireNecessary = false;\n\tif (args == null) {\n\t\tsynchronized (mbd.constructorArgumentLock) {\n\t\t\tif (mbd.resolvedConstructorOrFactoryMethod != null) {\n\t\t\t\tresolved = true;\n\t\t\t\tautowireNecessary = mbd.constructorArgumentsResolved;\n\t\t\t}\n\t\t}\n\t}\n\tif (resolved) {\n\t\tif (autowireNecessary) {\n\t\t\treturn autowireConstructor(beanName, mbd, null, null);\n\t\t}\n\t\telse {\n\t\t\t// 调用instantiateBean方法\n\t\t\treturn instantiateBean(beanName, mbd);\n\t\t}\n\t}\n\n\t// Candidate constructors for autowiring?\n\tConstructor<?>[] ctors = determineConstructorsFromBeanPostProcessors(beanClass, beanName);\n\tif (ctors != null || mbd.getResolvedAutowireMode() == AUTOWIRE_CONSTRUCTOR ||\n\t\t\tmbd.hasConstructorArgumentValues() || !ObjectUtils.isEmpty(args)) {\n\t\treturn autowireConstructor(beanName, mbd, ctors, args);\n\t}\n\n\t// Preferred constructors for default construction?\n\tctors = mbd.getPreferredConstructors();\n\tif (ctors != null) {\n\t\treturn autowireConstructor(beanName, mbd, ctors, null);\n\t}\n\n\t// No special handling: simply use no-arg constructor.\n\treturn instantiateBean(beanName, mbd);\n}\n\n// 在AbstractAutowireCapableBeanFactory抽象类的createBeanInstance方法中调用的instantiateBean(beanName, mbd)方法\nprotected BeanWrapper instantiateBean(final String beanName, final RootBeanDefinition mbd) {\n\ttry {\n\t\tObject beanInstance;\n\t\tfinal BeanFactory parent = this;\n\t\tif (System.getSecurityManager() != null) {\n\t\t\t// 核心逻辑\n\t\t\tbeanInstance = AccessController.doPrivileged((PrivilegedAction<Object>) () ->\n\t\t\t\t\tgetInstantiationStrategy().instantiate(mbd, beanName, parent),\n\t\t\t\t\tgetAccessControlContext());\n\t\t}\n\t\telse {\n\t\t\t// 核心逻辑\n\t\t\tbeanInstance = getInstantiationStrategy().instantiate(mbd, beanName, parent);\n\t\t}\n\t\tBeanWrapper bw = new BeanWrapperImpl(beanInstance);\n\t\tinitBeanWrapper(bw);\n\t\treturn bw;\n\t}\n\tcatch (Throwable ex) {\n\t\tthrow new BeanCreationException(\n\t\t\t\tmbd.getResourceDescription(), beanName, \"Instantiation of bean failed\", ex);\n\t}\n}\n\n// 上面的getInstantiationStrategy()方法代码\nprotected InstantiationStrategy getInstantiationStrategy() {\n\treturn this.instantiationStrategy;\n}\n\n```\n\n### getInstantiationStrategy()方法的返回接口对象的策略对象的一个实现SimpleInstantiationStrategy\n- org.springframework.beans.factory.support.SimpleInstantiationStrategy\n- SimpleInstantiationStrategy.instantiate(RootBeanDefinition bd, @Nullable String beanName, BeanFactory owner)方法的具体实现：\n```java\n@Override\npublic Object instantiate(RootBeanDefinition bd, @Nullable String beanName, BeanFactory owner) {\n\t// Don't override the class with CGLIB if no overrides.\n\tif (!bd.hasMethodOverrides()) {\n\t\tConstructor<?> constructorToUse;\n\t\tsynchronized (bd.constructorArgumentLock) {\n\t\t\tconstructorToUse = (Constructor<?>) bd.resolvedConstructorOrFactoryMethod;\n\t\t\tif (constructorToUse == null) {\n\t\t\t\tfinal Class<?> clazz = bd.getBeanClass();\n\t\t\t\tif (clazz.isInterface()) {\n\t\t\t\t\tthrow new BeanInstantiationException(clazz, \"Specified class is an interface\");\n\t\t\t\t}\n\t\t\t\ttry {\n\t\t\t\t\tif (System.getSecurityManager() != null) {\n\t\t\t\t\t\tconstructorToUse = AccessController.doPrivileged(\n\t\t\t\t\t\t\t\t(PrivilegedExceptionAction<Constructor<?>>) clazz::getDeclaredConstructor);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tconstructorToUse = clazz.getDeclaredConstructor();\n\t\t\t\t\t}\n\t\t\t\t\tbd.resolvedConstructorOrFactoryMethod = constructorToUse;\n\t\t\t\t}\n\t\t\t\tcatch (Throwable ex) {\n\t\t\t\t\tthrow new BeanInstantiationException(clazz, \"No default constructor found\", ex);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t// 调用静态方法BeanUtils.instantiateClass(constructorToUse);\n\t\treturn BeanUtils.instantiateClass(constructorToUse);\n\t}\n\telse {\n\t\t// Must generate CGLIB subclass.\n\t\treturn instantiateWithMethodInjection(bd, beanName, owner);\n\t}\n}\n```\n#### 静态方法BeanUtils.instantiateClass(constructorToUse)的实现细节\n- 代码位置：org.springframework.beans.BeanUtils\n```java\npublic static <T> T instantiateClass(Constructor<T> ctor, Object... args) throws BeanInstantiationException {\n\tAssert.notNull(ctor, \"Constructor must not be null\");\n\ttry {\n\t\tReflectionUtils.makeAccessible(ctor);\n\t\t// 判断是否是Kotlin类型\n\t\tif (KotlinDetector.isKotlinReflectPresent() && KotlinDetector.isKotlinType(ctor.getDeclaringClass())) {\n\t\t\t// 是Kotlin类型\n\t\t\treturn KotlinDelegate.instantiateClass(ctor, args);\n\t\t}\n\t\telse {\n\t\t\t// 不是Kotlin类型\n\t\t\tClass<?>[] parameterTypes = ctor.getParameterTypes();\n\t\t\tAssert.isTrue(args.length <= parameterTypes.length, \"Can't specify more arguments than constructor parameters\");\n\t\t\tObject[] argsWithDefaultValues = new Object[args.length];\n\t\t\tfor (int i = 0 ; i < args.length; i++) {\n\t\t\t\tif (args[i] == null) {\n\t\t\t\t\tClass<?> parameterType = parameterTypes[i];\n\t\t\t\t\targsWithDefaultValues[i] = (parameterType.isPrimitive() ? DEFAULT_TYPE_VALUES.get(parameterType) : null);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\targsWithDefaultValues[i] = args[i];\n\t\t\t\t}\n\t\t\t}\n\t\t\t// 调用Constructor的newInstance方法，使用反射创建实例\n\t\t\t// 到此之后bean实例创建完成\n\t\t\treturn ctor.newInstance(argsWithDefaultValues);\n\t\t}\n\t}\n\tcatch (InstantiationException ex) {\n\t\tthrow new BeanInstantiationException(ctor, \"Is it an abstract class?\", ex);\n\t}\n\tcatch (IllegalAccessException ex) {\n\t\tthrow new BeanInstantiationException(ctor, \"Is the constructor accessible?\", ex);\n\t}\n\tcatch (IllegalArgumentException ex) {\n\t\tthrow new BeanInstantiationException(ctor, \"Illegal arguments for constructor\", ex);\n\t}\n\tcatch (InvocationTargetException ex) {\n\t\tthrow new BeanInstantiationException(ctor, \"Constructor threw exception\", ex.getTargetException());\n\t}\n}\n\n```\n\n#### AbstractAutowireCapableBeanFactory抽象类的中doCreateBean方法中调用的populateBean(beanName, mbd, instanceWrapper)方法\n- 在AbstractAutowireCapableBeanFactory抽象类中的方法populateBean方法\n- 该方法用于填充bean 具体发生依赖注入的地方\n```java\n@SuppressWarnings(\"deprecation\")  // for postProcessPropertyValues\nprotected void populateBean(String beanName, RootBeanDefinition mbd, @Nullable BeanWrapper bw) {\n\tif (bw == null) {\n\t\tif (mbd.hasPropertyValues()) {\n\t\t\tthrow new BeanCreationException(\n\t\t\t\t\tmbd.getResourceDescription(), beanName, \"Cannot apply property values to null instance\");\n\t\t}\n\t\telse {\n\t\t\t// Skip property population phase for null instance.\n\t\t\treturn;\n\t\t}\n\t}\n\n\t// Give any InstantiationAwareBeanPostProcessors the opportunity to modify the\n\t// state of the bean before properties are set. This can be used, for example,\n\t// to support styles of field injection.\n\tboolean continueWithPropertyPopulation = true;\n\n\tif (!mbd.isSynthetic() && hasInstantiationAwareBeanPostProcessors()) {\n\t\tfor (BeanPostProcessor bp : getBeanPostProcessors()) {\n\t\t\tif (bp instanceof InstantiationAwareBeanPostProcessor) {\n\t\t\t\tInstantiationAwareBeanPostProcessor ibp = (InstantiationAwareBeanPostProcessor) bp;\n\t\t\t\tif (!ibp.postProcessAfterInstantiation(bw.getWrappedInstance(), beanName)) {\n\t\t\t\t\tcontinueWithPropertyPopulation = false;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tif (!continueWithPropertyPopulation) {\n\t\treturn;\n\t}\n    // 获取bean的所有属性 用于后面配置Property元素 即依赖关系\n\tPropertyValues pvs = (mbd.hasPropertyValues() ? mbd.getPropertyValues() : null);\n\n\tint resolvedAutowireMode = mbd.getResolvedAutowireMode();\n\tif (resolvedAutowireMode == AUTOWIRE_BY_NAME || resolvedAutowireMode == AUTOWIRE_BY_TYPE) {\n\t\tMutablePropertyValues newPvs = new MutablePropertyValues(pvs);\n\t\t// Add property values based on autowire by name if applicable.\n\t\tif (resolvedAutowireMode == AUTOWIRE_BY_NAME) {\n\t\t\tautowireByName(beanName, mbd, bw, newPvs);\n\t\t}\n\t\t// Add property values based on autowire by type if applicable.\n\t\tif (resolvedAutowireMode == AUTOWIRE_BY_TYPE) {\n\t\t\tautowireByType(beanName, mbd, bw, newPvs);\n\t\t}\n\t\tpvs = newPvs;\n\t}\n\n\tboolean hasInstAwareBpps = hasInstantiationAwareBeanPostProcessors();\n\tboolean needsDepCheck = (mbd.getDependencyCheck() != AbstractBeanDefinition.DEPENDENCY_CHECK_NONE);\n\n\tPropertyDescriptor[] filteredPds = null;\n\tif (hasInstAwareBpps) {\n\t\tif (pvs == null) {\n\t\t\tpvs = mbd.getPropertyValues();\n\t\t}\n\t\tfor (BeanPostProcessor bp : getBeanPostProcessors()) {\n\t\t\tif (bp instanceof InstantiationAwareBeanPostProcessor) {\n\t\t\t\tInstantiationAwareBeanPostProcessor ibp = (InstantiationAwareBeanPostProcessor) bp;\n\t\t\t\tPropertyValues pvsToUse = ibp.postProcessProperties(pvs, bw.getWrappedInstance(), beanName);\n\t\t\t\tif (pvsToUse == null) {\n\t\t\t\t\tif (filteredPds == null) {\n\t\t\t\t\t\tfilteredPds = filterPropertyDescriptorsForDependencyCheck(bw, mbd.allowCaching);\n\t\t\t\t\t}\n\t\t\t\t\tpvsToUse = ibp.postProcessPropertyValues(pvs, filteredPds, bw.getWrappedInstance(), beanName);\n\t\t\t\t\tif (pvsToUse == null) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tpvs = pvsToUse;\n\t\t\t}\n\t\t}\n\t}\n\tif (needsDepCheck) {\n\t\tif (filteredPds == null) {\n\t\t\tfilteredPds = filterPropertyDescriptorsForDependencyCheck(bw, mbd.allowCaching);\n\t\t}\n\t\tcheckDependencies(beanName, mbd, filteredPds, pvs);\n\t}\n\n\tif (pvs != null) {\n\t\t// 核心逻辑 applyPropertyValues方法的具体代码在下面\n\t\tapplyPropertyValues(beanName, mbd, bw, pvs);\n\t}\n}\n\n// 上面方法中调用的applyPropertyValues方法具体代码\nprotected void applyPropertyValues(String beanName, BeanDefinition mbd, BeanWrapper bw, PropertyValues pvs) {\n\tif (pvs.isEmpty()) {\n\t\treturn;\n\t}\n\n\tif (System.getSecurityManager() != null && bw instanceof BeanWrapperImpl) {\n\t\t((BeanWrapperImpl) bw).setSecurityContext(getAccessControlContext());\n\t}\n\n\tMutablePropertyValues mpvs = null;\n\tList<PropertyValue> original;\n\n\tif (pvs instanceof MutablePropertyValues) {\n\t\tmpvs = (MutablePropertyValues) pvs;\n\t\tif (mpvs.isConverted()) {\n\t\t\t// Shortcut: use the pre-converted values as-is.\n\t\t\ttry {\n\t\t\t\tbw.setPropertyValues(mpvs);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tcatch (BeansException ex) {\n\t\t\t\tthrow new BeanCreationException(\n\t\t\t\t\t\tmbd.getResourceDescription(), beanName, \"Error setting property values\", ex);\n\t\t\t}\n\t\t}\n\t\toriginal = mpvs.getPropertyValueList();\n\t}\n\telse {\n\t\toriginal = Arrays.asList(pvs.getPropertyValues());\n\t}\n\n\tTypeConverter converter = getCustomTypeConverter();\n\tif (converter == null) {\n\t\tconverter = bw;\n\t}\n\tBeanDefinitionValueResolver valueResolver = new BeanDefinitionValueResolver(this, beanName, mbd, converter);\n\n\t// Create a deep copy, resolving any references for values.\n\tList<PropertyValue> deepCopy = new ArrayList<>(original.size());\n\tboolean resolveNecessary = false;\n\tfor (PropertyValue pv : original) {\n\t\tif (pv.isConverted()) {\n\t\t\tdeepCopy.add(pv);\n\t\t}\n\t\telse {\n\t\t\tString propertyName = pv.getName();\n\t\t\tObject originalValue = pv.getValue();\n\t\t\tif (originalValue == AutowiredPropertyMarker.INSTANCE) {\n\t\t\t\tMethod writeMethod = bw.getPropertyDescriptor(propertyName).getWriteMethod();\n\t\t\t\tif (writeMethod == null) {\n\t\t\t\t\tthrow new IllegalArgumentException(\"Autowire marker for property without write method: \" + pv);\n\t\t\t\t}\n\t\t\t\toriginalValue = new DependencyDescriptor(new MethodParameter(writeMethod, 0), true);\n\t\t\t}\n\t\t\t// 获取property对应的值   resolveValueIfNecessary方法的代码在下面给出\n\t\t\tObject resolvedValue = valueResolver.resolveValueIfNecessary(pv, originalValue);\n\t\t\tObject convertedValue = resolvedValue;\n\t\t\tboolean convertible = bw.isWritableProperty(propertyName) &&\n\t\t\t\t\t!PropertyAccessorUtils.isNestedOrIndexedProperty(propertyName);\n\t\t\tif (convertible) {\n\t\t\t\tconvertedValue = convertForProperty(resolvedValue, propertyName, bw, converter);\n\t\t\t}\n\t\t\t// Possibly store converted value in merged bean definition,\n\t\t\t// in order to avoid re-conversion for every created bean instance.\n\t\t\tif (resolvedValue == originalValue) {\n\t\t\t\tif (convertible) {\n\t\t\t\t\tpv.setConvertedValue(convertedValue);\n\t\t\t\t}\n\t\t\t\tdeepCopy.add(pv);\n\t\t\t}\n\t\t\telse if (convertible && originalValue instanceof TypedStringValue &&\n\t\t\t\t\t!((TypedStringValue) originalValue).isDynamic() &&\n\t\t\t\t\t!(convertedValue instanceof Collection || ObjectUtils.isArray(convertedValue))) {\n\t\t\t\tpv.setConvertedValue(convertedValue);\n\t\t\t\tdeepCopy.add(pv);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tresolveNecessary = true;\n\t\t\t\tdeepCopy.add(new PropertyValue(pv, convertedValue));\n\t\t\t}\n\t\t}\n\t}\n\tif (mpvs != null && !resolveNecessary) {\n\t\tmpvs.setConverted();\n\t}\n\n\t// Set our (possibly massaged) deep copy.\n\ttry {\n\t\t// 获取到依赖的对象值后 将依赖值注入\n\t\tbw.setPropertyValues(new MutablePropertyValues(deepCopy));\n\t}\n\tcatch (BeansException ex) {\n\t\tthrow new BeanCreationException(\n\t\t\t\tmbd.getResourceDescription(), beanName, \"Error setting property values\", ex);\n\t}\n}\n\n\n```\n####################################################################################################################################################33\n\n#### valueResolver.resolveValueIfNecessary(pv, originalValue);对应的方法\n- 代码位置：org.springframework.beans.factory.support.BeanDefinitionValueResolver\n```java\n@Nullable\npublic Object resolveValueIfNecessary(Object argName, @Nullable Object value) {\n\t// We must check each value to see whether it requires a runtime reference\n\t// to another bean to be resolved.\n\tif (value instanceof RuntimeBeanReference) {\n\t\tRuntimeBeanReference ref = (RuntimeBeanReference) value;\n\t\t// 核心逻辑 解决Bean依赖关系 具体代码在下方贴出\n\t\treturn resolveReference(argName, ref);\n\t}\n\telse if (value instanceof RuntimeBeanNameReference) {\n\t\tString refName = ((RuntimeBeanNameReference) value).getBeanName();\n\t\trefName = String.valueOf(doEvaluate(refName));\n\t\tif (!this.beanFactory.containsBean(refName)) {\n\t\t\tthrow new BeanDefinitionStoreException(\n\t\t\t\t\t\"Invalid bean name '\" + refName + \"' in bean reference for \" + argName);\n\t\t}\n\t\treturn refName;\n\t}\n\telse if (value instanceof BeanDefinitionHolder) {\n\t\t// Resolve BeanDefinitionHolder: contains BeanDefinition with name and aliases.\n\t\tBeanDefinitionHolder bdHolder = (BeanDefinitionHolder) value;\n\t\treturn resolveInnerBean(argName, bdHolder.getBeanName(), bdHolder.getBeanDefinition());\n\t}\n\telse if (value instanceof BeanDefinition) {\n\t\t// Resolve plain BeanDefinition, without contained name: use dummy name.\n\t\tBeanDefinition bd = (BeanDefinition) value;\n\t\tString innerBeanName = \"(inner bean)\" + BeanFactoryUtils.GENERATED_BEAN_NAME_SEPARATOR +\n\t\t\t\tObjectUtils.getIdentityHexString(bd);\n\t\treturn resolveInnerBean(argName, innerBeanName, bd);\n\t}\n\telse if (value instanceof DependencyDescriptor) {\n\t\tSet<String> autowiredBeanNames = new LinkedHashSet<>(4);\n\t\tObject result = this.beanFactory.resolveDependency(\n\t\t\t\t(DependencyDescriptor) value, this.beanName, autowiredBeanNames, this.typeConverter);\n\t\tfor (String autowiredBeanName : autowiredBeanNames) {\n\t\t\tif (this.beanFactory.containsBean(autowiredBeanName)) {\n\t\t\t\tthis.beanFactory.registerDependentBean(autowiredBeanName, this.beanName);\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\telse if (value instanceof ManagedArray) {\n\t\t// May need to resolve contained runtime references.\n\t\tManagedArray array = (ManagedArray) value;\n\t\tClass<?> elementType = array.resolvedElementType;\n\t\tif (elementType == null) {\n\t\t\tString elementTypeName = array.getElementTypeName();\n\t\t\tif (StringUtils.hasText(elementTypeName)) {\n\t\t\t\ttry {\n\t\t\t\t\telementType = ClassUtils.forName(elementTypeName, this.beanFactory.getBeanClassLoader());\n\t\t\t\t\tarray.resolvedElementType = elementType;\n\t\t\t\t}\n\t\t\t\tcatch (Throwable ex) {\n\t\t\t\t\t// Improve the message by showing the context.\n\t\t\t\t\tthrow new BeanCreationException(\n\t\t\t\t\t\t\tthis.beanDefinition.getResourceDescription(), this.beanName,\n\t\t\t\t\t\t\t\"Error resolving array type for \" + argName, ex);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\telementType = Object.class;\n\t\t\t}\n\t\t}\n\t\treturn resolveManagedArray(argName, (List<?>) value, elementType);\n\t}\n\telse if (value instanceof ManagedList) {\n\t\t// May need to resolve contained runtime references.\n\t\treturn resolveManagedList(argName, (List<?>) value);\n\t}\n\telse if (value instanceof ManagedSet) {\n\t\t// May need to resolve contained runtime references.\n\t\treturn resolveManagedSet(argName, (Set<?>) value);\n\t}\n\telse if (value instanceof ManagedMap) {\n\t\t// May need to resolve contained runtime references.\n\t\treturn resolveManagedMap(argName, (Map<?, ?>) value);\n\t}\n\telse if (value instanceof ManagedProperties) {\n\t\tProperties original = (Properties) value;\n\t\tProperties copy = new Properties();\n\t\toriginal.forEach((propKey, propValue) -> {\n\t\t\tif (propKey instanceof TypedStringValue) {\n\t\t\t\tpropKey = evaluate((TypedStringValue) propKey);\n\t\t\t}\n\t\t\tif (propValue instanceof TypedStringValue) {\n\t\t\t\tpropValue = evaluate((TypedStringValue) propValue);\n\t\t\t}\n\t\t\tif (propKey == null || propValue == null) {\n\t\t\t\tthrow new BeanCreationException(\n\t\t\t\t\t\tthis.beanDefinition.getResourceDescription(), this.beanName,\n\t\t\t\t\t\t\"Error converting Properties key/value pair for \" + argName + \": resolved to null\");\n\t\t\t}\n\t\t\tcopy.put(propKey, propValue);\n\t\t});\n\t\treturn copy;\n\t}\n\telse if (value instanceof TypedStringValue) {\n\t\t// Convert value to target type here.\n\t\tTypedStringValue typedStringValue = (TypedStringValue) value;\n\t\tObject valueObject = evaluate(typedStringValue);\n\t\ttry {\n\t\t\tClass<?> resolvedTargetType = resolveTargetType(typedStringValue);\n\t\t\tif (resolvedTargetType != null) {\n\t\t\t\treturn this.typeConverter.convertIfNecessary(valueObject, resolvedTargetType);\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn valueObject;\n\t\t\t}\n\t\t}\n\t\tcatch (Throwable ex) {\n\t\t\t// Improve the message by showing the context.\n\t\t\tthrow new BeanCreationException(\n\t\t\t\t\tthis.beanDefinition.getResourceDescription(), this.beanName,\n\t\t\t\t\t\"Error converting typed String value for \" + argName, ex);\n\t\t}\n\t}\n\telse if (value instanceof NullBean) {\n\t\treturn null;\n\t}\n\telse {\n\t\treturn evaluate(value);\n\t}\n}\n\n\n// 上面resolveValueIfNecessary方法中调用的resolveReference方法\n// 最后获取到依赖的bean\n@Nullable\nprivate Object resolveReference(Object argName, RuntimeBeanReference ref) {\n\ttry {\n\t\tObject bean;\n\t\tClass<?> beanType = ref.getBeanType();\n\t\tif (ref.isToParent()) {\n\t\t\tBeanFactory parent = this.beanFactory.getParentBeanFactory();\n\t\t\tif (parent == null) {\n\t\t\t\tthrow new BeanCreationException(\n\t\t\t\t\t\tthis.beanDefinition.getResourceDescription(), this.beanName,\n\t\t\t\t\t\t\"Cannot resolve reference to bean \" + ref +\n\t\t\t\t\t\t\t\t\" in parent factory: no parent factory available\");\n\t\t\t}\n\t\t\tif (beanType != null) {\n\t\t\t\t// 发生递归调用\n\t\t\t\tbean = parent.getBean(beanType);\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// 发生递归调用 根据依赖的名称从BeanFactory中递归得到依赖 最后获取到依赖的bean\n\t\t\t\tbean = parent.getBean(String.valueOf(doEvaluate(ref.getBeanName())));\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tString resolvedName;\n\t\t\tif (beanType != null) {\n\t\t\t\tNamedBeanHolder<?> namedBean = this.beanFactory.resolveNamedBean(beanType);\n\t\t\t\tbean = namedBean.getBeanInstance();\n\t\t\t\tresolvedName = namedBean.getBeanName();\n\t\t\t}\n\t\t\telse {\n\t\t\t\tresolvedName = String.valueOf(doEvaluate(ref.getBeanName()));\n\t\t\t\tbean = this.beanFactory.getBean(resolvedName);\n\t\t\t}\n\t\t\tthis.beanFactory.registerDependentBean(resolvedName, this.beanName);\n\t\t}\n\t\tif (bean instanceof NullBean) {\n\t\t\tbean = null;\n\t\t}\n\t\treturn bean;\n\t}\n\tcatch (BeansException ex) {\n\t\tthrow new BeanCreationException(\n\t\t\t\tthis.beanDefinition.getResourceDescription(), this.beanName,\n\t\t\t\t\"Cannot resolve reference to bean '\" + ref.getBeanName() + \"' while setting \" + argName, ex);\n\t}\n}\n```\n\n#### AbstractPropertyAccessor的setPropertyValues(PropertyValues pvs)方法\n- 代码位置：org.springframework.beans.AbstractPropertyAccessor\n- 循环属性列表 \n```java\n@Override\npublic void setPropertyValues(PropertyValues pvs) throws BeansException {\n\tsetPropertyValues(pvs, false, false);\n}\n\n//  循环属性列表 \n@Override\npublic void setPropertyValues(PropertyValues pvs, boolean ignoreUnknown, boolean ignoreInvalid)\n\t\tthrows BeansException {\n\n\tList<PropertyAccessException> propertyAccessExceptions = null;\n\tList<PropertyValue> propertyValues = (pvs instanceof MutablePropertyValues ?\n\t\t\t((MutablePropertyValues) pvs).getPropertyValueList() : Arrays.asList(pvs.getPropertyValues()));\n    // 循环属性列表 \n\tfor (PropertyValue pv : propertyValues) {\n\t\ttry {\n\t\t\t// This method may throw any BeansException, which won't be caught\n\t\t\t// here, if there is a critical failure such as no matching field.\n\t\t\t// We can attempt to deal only with less serious exceptions.\n\t\t\t// 该方法通过AbstractNestablePropertyAccessor的setPropertyValue(PropertyValue pv)方法实现\n\t\t\tsetPropertyValue(pv);\n\t\t}\n\t\tcatch (NotWritablePropertyException ex) {\n\t\t\tif (!ignoreUnknown) {\n\t\t\t\tthrow ex;\n\t\t\t}\n\t\t\t// Otherwise, just ignore it and continue...\n\t\t}\n\t\tcatch (NullValueInNestedPathException ex) {\n\t\t\tif (!ignoreInvalid) {\n\t\t\t\tthrow ex;\n\t\t\t}\n\t\t\t// Otherwise, just ignore it and continue...\n\t\t}\n\t\tcatch (PropertyAccessException ex) {\n\t\t\tif (propertyAccessExceptions == null) {\n\t\t\t\tpropertyAccessExceptions = new ArrayList<>();\n\t\t\t}\n\t\t\tpropertyAccessExceptions.add(ex);\n\t\t}\n\t}\n\n\t// If we encountered individual exceptions, throw the composite exception.\n\tif (propertyAccessExceptions != null) {\n\t\tPropertyAccessException[] paeArray = propertyAccessExceptions.toArray(new PropertyAccessException[0]);\n\t\tthrow new PropertyBatchUpdateException(paeArray);\n\t}\n}\n```\n\n#### AbstractNestablePropertyAccessor的 setPropertyValue(PropertyValue pv)方法\n- 代码位置：org.springframework.beans.AbstractNestablePropertyAccessor\n```java\n@Override\n\tpublic void setPropertyValue(PropertyValue pv) throws BeansException {\n\t\tPropertyTokenHolder tokens = (PropertyTokenHolder) pv.resolvedTokens;\n\t\tif (tokens == null) {\n\t\t\tString propertyName = pv.getName();\n\t\t\tAbstractNestablePropertyAccessor nestedPa;\n\t\t\ttry {\n\t\t\t\tnestedPa = getPropertyAccessorForPropertyPath(propertyName);\n\t\t\t}\n\t\t\tcatch (NotReadablePropertyException ex) {\n\t\t\t\tthrow new NotWritablePropertyException(getRootClass(), this.nestedPath + propertyName,\n\t\t\t\t\t\t\"Nested property in path '\" + propertyName + \"' does not exist\", ex);\n\t\t\t}\n\t\t\ttokens = getPropertyNameTokens(getFinalPath(nestedPa, propertyName));\n\t\t\tif (nestedPa == this) {\n\t\t\t\tpv.getOriginalPropertyValue().resolvedTokens = tokens;\n\t\t\t}\n\t\t\tnestedPa.setPropertyValue(tokens, pv);\n\t\t}\n\t\telse {\n\t\t\tsetPropertyValue(tokens, pv);\n\t\t}\n\t}\n```\n########################################################################################################################################\n- 上面setPropertyValue(PropertyValue pv)方法的重载方法setPropertyValue(PropertyTokenHolder tokens, PropertyValue pv)\n```java\nprotected void setPropertyValue(PropertyTokenHolder tokens, PropertyValue pv) throws BeansException {\n\tif (tokens.keys != null) {\n\t\tprocessKeyedProperty(tokens, pv);\n\t}\n\telse {\n\t\tprocessLocalProperty(tokens, pv);\n\t}\n}\n```\n- processLocalProperty(PropertyTokenHolder tokens, PropertyValue pv)方法\n```java\nprivate void processLocalProperty(PropertyTokenHolder tokens, PropertyValue pv) {\n\tPropertyHandler ph = getLocalPropertyHandler(tokens.actualName);\n\tif (ph == null || !ph.isWritable()) {\n\t\tif (pv.isOptional()) {\n\t\t\tif (logger.isDebugEnabled()) {\n\t\t\t\tlogger.debug(\"Ignoring optional value for property '\" + tokens.actualName +\n\t\t\t\t\t\t\"' - property not found on bean class [\" + getRootClass().getName() + \"]\");\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\telse {\n\t\t\tthrow createNotWritablePropertyException(tokens.canonicalName);\n\t\t}\n\t}\n\n\tObject oldValue = null;\n\ttry {\n\t\tObject originalValue = pv.getValue();//\n\t\tObject valueToApply = originalValue;//\n\t\tif (!Boolean.FALSE.equals(pv.conversionNecessary)) {\n\t\t\tif (pv.isConverted()) {\n\t\t\t\tvalueToApply = pv.getConvertedValue();\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (isExtractOldValueForEditor() && ph.isReadable()) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\toldValue = ph.getValue();\n\t\t\t\t\t}\n\t\t\t\t\tcatch (Exception ex) {\n\t\t\t\t\t\tif (ex instanceof PrivilegedActionException) {\n\t\t\t\t\t\t\tex = ((PrivilegedActionException) ex).getException();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (logger.isDebugEnabled()) {\n\t\t\t\t\t\t\tlogger.debug(\"Could not read previous value of property '\" +\n\t\t\t\t\t\t\t\t\tthis.nestedPath + tokens.canonicalName + \"'\", ex);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tvalueToApply = convertForProperty(\n\t\t\t\t\t\ttokens.canonicalName, oldValue, originalValue, ph.toTypeDescriptor());\n\t\t\t}\n\t\t\tpv.getOriginalPropertyValue().conversionNecessary = (valueToApply != originalValue);\n\t\t}\n\t\tph.setValue(valueToApply);// 具体代码在下方列出\n\t}\n\tcatch (TypeMismatchException ex) {\n\t\tthrow ex;\n\t}\n\tcatch (InvocationTargetException ex) {\n\t\tPropertyChangeEvent propertyChangeEvent = new PropertyChangeEvent(\n\t\t\t\tgetRootInstance(), this.nestedPath + tokens.canonicalName, oldValue, pv.getValue());\n\t\tif (ex.getTargetException() instanceof ClassCastException) {\n\t\t\tthrow new TypeMismatchException(propertyChangeEvent, ph.getPropertyType(), ex.getTargetException());\n\t\t}\n\t\telse {\n\t\t\tThrowable cause = ex.getTargetException();\n\t\t\tif (cause instanceof UndeclaredThrowableException) {\n\t\t\t\t// May happen e.g. with Groovy-generated methods\n\t\t\t\tcause = cause.getCause();\n\t\t\t}\n\t\t\tthrow new MethodInvocationException(propertyChangeEvent, cause);\n\t\t}\n\t}\n\tcatch (Exception ex) {\n\t\tPropertyChangeEvent pce = new PropertyChangeEvent(\n\t\t\t\tgetRootInstance(), this.nestedPath + tokens.canonicalName, oldValue, pv.getValue());\n\t\tthrow new MethodInvocationException(pce, ex);\n\t}\n}\n```\n\n####\n- 上述ph.setValue方法在org.springframework.beans.AbstractNestablePropertyAccessor抽象类中定义\n- public abstract void setValue(@Nullable Object value) throws Exception; \n- 一个具体实现在org.springframework.beans.BeanWrapperImp的内部类BeanPropertyHandler中，完整代码如下：\n```java\nprivate final PropertyDescriptor pd;  //BeanPropertyHandler中的字段\n\n@Override\npublic void setValue(final @Nullable Object value) throws Exception {\n\tfinal Method writeMethod = (this.pd instanceof GenericTypeAwarePropertyDescriptor ?\n\t\t\t((GenericTypeAwarePropertyDescriptor) this.pd).getWriteMethodForActualAccess() :\n\t\t\tthis.pd.getWriteMethod());// 找到属性的set方法\n\tif (System.getSecurityManager() != null) {\n\t\tAccessController.doPrivileged((PrivilegedAction<Object>) () -> {\n\t\t\tReflectionUtils.makeAccessible(writeMethod);\n\t\t\treturn null;\n\t\t});\n\t\ttry {\n\t\t\tAccessController.doPrivileged((PrivilegedExceptionAction<Object>) () ->\n\t\t\t\t\twriteMethod.invoke(getWrappedInstance(), value), acc);\n\t\t\t\t\t// 调用Method的invoke方法，完成属性注入\n\t\t}\n\t\tcatch (PrivilegedActionException ex) {\n\t\t\tthrow ex.getException();\n\t\t}\n\t}\n\telse {\n\t\tReflectionUtils.makeAccessible(writeMethod);\n\t\twriteMethod.invoke(getWrappedInstance(), value);//调用Method的invoke方法，完成属性注入\n\t}\n}\n```\n- 至此Ioc容器的启动过程基本结束\n\n# 15. finishRefresh();方法\n- org.springframework.context.support.AbstractApplicationContext中的finishRefresh()方法\n\n```java\nprotected void finishRefresh() {\n\t// Clear context-level resource caches (such as ASM metadata from scanning).\n\tclearResourceCaches();\n\n\t// Initialize lifecycle processor for this context.\n\tinitLifecycleProcessor();\n\n\t// Propagate refresh to lifecycle processor first.\n\tgetLifecycleProcessor().onRefresh();\n\n\t// Publish the final event.\n\tpublishEvent(new ContextRefreshedEvent(this));\n\n\t// Participate in LiveBeansView MBean, if active.\n\tLiveBeansView.registerApplicationContext(this);\n}\n```\n\n\n# 16refresh()过程抛出异常时\n- 之中有两个处理方法destroyBeans()和cancelRefresh(ex)\n\n## 16.1 destroyBeans();方法\n- org.springframework.context.support.AbstractApplicationContext中的destroyBeans()方法\n\n```java\nprotected void destroyBeans() {\n\tgetBeanFactory().destroySingletons();\n}\n```\n\n## 16.2 cancelRefresh(ex);方法\n- org.springframework.context.support.AbstractApplicationContext中的cancelRefresh(ex)方法\n```java\nprotected void cancelRefresh(BeansException ex) {\n\tthis.active.set(false);\n}\n```\n## 16.3抛出异常BeansException\n\n\n# 17 resetCommonCaches();方法\n- org.springframework.context.support.AbstractApplicationContext中的resetCommonCaches()方法\n- try-catch-finally代码块中finally包裹的方法\n```java\nprotected void resetCommonCaches() {\n\tReflectionUtils.clearCache();\n\tAnnotationUtils.clearCache();\n\tResolvableType.clearCache();\n\tCachedIntrospectionResults.clearClassLoader(getClassLoader());\n}\n```\n- 执行到此Ioc容器启动完成，可以正式投入使用\n\n\n# 总结\n- Ioc的底层原理实现：Spring Ioc启动分为两步：\n\t- 1.创建BeanFactory\n\t- 2.实例化Bean\n- Spring的Bean在内存中的状态就是BeanDefination\n- 在Bean的创建和依赖注入的过程中，需要根据BeanDefination的信息来递归的完成依赖注入，从代码可以看到，这些递归都是以getBean()为入口的，一个递归是在上下文体系中查找需要的bean和bean的依赖关系；另一个递归是在依赖注入时，通过递归调用容器的getBean方法得到当前依赖的Bean，同时也触发对依赖bean的创建和注入。在对bean的属性进行依赖注入时，解析过程也是一个递归过程，这样根据依赖关系，一层一层的完成Bean的创建和注入，直到当前bean相关的整个依赖链的注入完成。由于整个IoC容器启动过程较为复杂，使用下面的一张图来描述让读者更清楚厘清IoC容器的启动过程。\n\n![Ioc容器启动过程](/Blog/static/image/20191125/BeanFactoryInitFlowChart.png)\n\n\n### 模板\n\n- 代码位置:org.springframework.context.support.AbstractApplicationContext.java\n```java\nprotected void postProcessBeanFactory(ConfigurableListableBeanFactory beanFactory) {\n\t\n}\n```\n- 代码位置:org.springframework.context.support.AbstractApplicationContext.java\n```java\n\n```\n\n- 代码位置:.java\n```java\n\n```\n\n- 代码位置:.java\n```java\n\n```\n\n\n# 参考资料\n- Spring源码深度解析（第二版） 郝佳\n- Spring5企业级开发实战 周冠亚 黄文毅 [配套源码](https://github.com/online-demo/spring5projectdemo)\n- Gitee同步版本：[https://gitee.com/ACANX/spring5projectdemo](https://gitee.com/ACANX/spring5projectdemo)\n\n\n\n\n","slug":"Spring-IoC容器源码导读","published":1,"updated":"2025-03-26T06:43:53.002Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cm8pr0j2f0019gskz1tka5iw3","content":"<h1 id=\"1-几个重要类-接口\"><a href=\"#1-几个重要类-接口\" class=\"headerlink\" title=\"1.几个重要类/接口\"></a>1.几个重要类/接口</h1><h2 id=\"阅读前的准备\"><a href=\"#阅读前的准备\" class=\"headerlink\" title=\"阅读前的准备\"></a>阅读前的准备</h2><ul>\n<li>源码下载：<ul>\n<li><a href=\"https://github.com/spring-projects/spring-framework\">https://github.com/spring-projects/spring-framework</a>  </li>\n<li><a href=\"https://github.com/spring-projects/spring-framework.git\">https://github.com/spring-projects/spring-framework.git</a></li>\n</ul>\n</li>\n<li>源码版本：v5.2.1.RELEASE</li>\n</ul>\n<h2 id=\"1-1-BeanFactory-顶级接口（低配版的IoC容器）\"><a href=\"#1-1-BeanFactory-顶级接口（低配版的IoC容器）\" class=\"headerlink\" title=\"1.1 BeanFactory 顶级接口（低配版的IoC容器）\"></a>1.1 BeanFactory 顶级接口（低配版的IoC容器）</h2><h3 id=\"BeanFactory接口定义说明\"><a href=\"#BeanFactory接口定义说明\" class=\"headerlink\" title=\"BeanFactory接口定义说明\"></a>BeanFactory接口定义说明</h3><ul>\n<li>BeanFactory是低配版的IoC容器，定义了Ioc容器基本的功能</li>\n</ul>\n<h3 id=\"完整版源码：\"><a href=\"#完整版源码：\" class=\"headerlink\" title=\"完整版源码：\"></a>完整版源码：</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br><span class=\"line\">252</span><br><span class=\"line\">253</span><br><span class=\"line\">254</span><br><span class=\"line\">255</span><br><span class=\"line\">256</span><br><span class=\"line\">257</span><br><span class=\"line\">258</span><br><span class=\"line\">259</span><br><span class=\"line\">260</span><br><span class=\"line\">261</span><br><span class=\"line\">262</span><br><span class=\"line\">263</span><br><span class=\"line\">264</span><br><span class=\"line\">265</span><br><span class=\"line\">266</span><br><span class=\"line\">267</span><br><span class=\"line\">268</span><br><span class=\"line\">269</span><br><span class=\"line\">270</span><br><span class=\"line\">271</span><br><span class=\"line\">272</span><br><span class=\"line\">273</span><br><span class=\"line\">274</span><br><span class=\"line\">275</span><br><span class=\"line\">276</span><br><span class=\"line\">277</span><br><span class=\"line\">278</span><br><span class=\"line\">279</span><br><span class=\"line\">280</span><br><span class=\"line\">281</span><br><span class=\"line\">282</span><br><span class=\"line\">283</span><br><span class=\"line\">284</span><br><span class=\"line\">285</span><br><span class=\"line\">286</span><br><span class=\"line\">287</span><br><span class=\"line\">288</span><br><span class=\"line\">289</span><br><span class=\"line\">290</span><br><span class=\"line\">291</span><br><span class=\"line\">292</span><br><span class=\"line\">293</span><br><span class=\"line\">294</span><br><span class=\"line\">295</span><br><span class=\"line\">296</span><br><span class=\"line\">297</span><br><span class=\"line\">298</span><br><span class=\"line\">299</span><br><span class=\"line\">300</span><br><span class=\"line\">301</span><br><span class=\"line\">302</span><br><span class=\"line\">303</span><br><span class=\"line\">304</span><br><span class=\"line\">305</span><br><span class=\"line\">306</span><br><span class=\"line\">307</span><br><span class=\"line\">308</span><br><span class=\"line\">309</span><br><span class=\"line\">310</span><br><span class=\"line\">311</span><br><span class=\"line\">312</span><br><span class=\"line\">313</span><br><span class=\"line\">314</span><br><span class=\"line\">315</span><br><span class=\"line\">316</span><br><span class=\"line\">317</span><br><span class=\"line\">318</span><br><span class=\"line\">319</span><br><span class=\"line\">320</span><br><span class=\"line\">321</span><br><span class=\"line\">322</span><br><span class=\"line\">323</span><br><span class=\"line\">324</span><br><span class=\"line\">325</span><br><span class=\"line\">326</span><br><span class=\"line\">327</span><br><span class=\"line\">328</span><br><span class=\"line\">329</span><br><span class=\"line\">330</span><br><span class=\"line\">331</span><br><span class=\"line\">332</span><br><span class=\"line\">333</span><br><span class=\"line\">334</span><br><span class=\"line\">335</span><br><span class=\"line\">336</span><br><span class=\"line\">337</span><br><span class=\"line\">338</span><br><span class=\"line\">339</span><br><span class=\"line\">340</span><br><span class=\"line\">341</span><br><span class=\"line\">342</span><br><span class=\"line\">343</span><br><span class=\"line\">344</span><br><span class=\"line\">345</span><br><span class=\"line\">346</span><br><span class=\"line\">347</span><br><span class=\"line\">348</span><br><span class=\"line\">349</span><br><span class=\"line\">350</span><br><span class=\"line\">351</span><br><span class=\"line\">352</span><br><span class=\"line\">353</span><br><span class=\"line\">354</span><br><span class=\"line\">355</span><br><span class=\"line\">356</span><br><span class=\"line\">357</span><br><span class=\"line\">358</span><br><span class=\"line\">359</span><br><span class=\"line\">360</span><br><span class=\"line\">361</span><br><span class=\"line\">362</span><br><span class=\"line\">363</span><br><span class=\"line\">364</span><br><span class=\"line\">365</span><br><span class=\"line\">366</span><br><span class=\"line\">367</span><br><span class=\"line\">368</span><br><span class=\"line\">369</span><br><span class=\"line\">370</span><br><span class=\"line\">371</span><br><span class=\"line\">372</span><br><span class=\"line\">373</span><br><span class=\"line\">374</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\"> * Copyright 2002-2019 the original author or authors.</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span><br><span class=\"hljs-comment\"> * you may not use this file except in compliance with the License.</span><br><span class=\"hljs-comment\"> * You may obtain a copy of the License at</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> *      https://www.apache.org/licenses/LICENSE-2.0</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> * Unless required by applicable law or agreed to in writing, software</span><br><span class=\"hljs-comment\"> * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span><br><span class=\"hljs-comment\"> * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span><br><span class=\"hljs-comment\"> * See the License for the specific language governing permissions and</span><br><span class=\"hljs-comment\"> * limitations under the License.</span><br><span class=\"hljs-comment\"> */</span><br><br><span class=\"hljs-keyword\">package</span> org.springframework.beans.factory;<br><br><span class=\"hljs-keyword\">import</span> org.springframework.beans.BeansException;<br><span class=\"hljs-keyword\">import</span> org.springframework.core.ResolvableType;<br><span class=\"hljs-keyword\">import</span> org.springframework.lang.Nullable;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * The root interface for accessing a Spring bean container.</span><br><span class=\"hljs-comment\"> * This is the basic client view of a bean container;</span><br><span class=\"hljs-comment\"> * further interfaces such as &#123;<span class=\"hljs-doctag\">@link</span> ListableBeanFactory&#125; and</span><br><span class=\"hljs-comment\"> * &#123;<span class=\"hljs-doctag\">@link</span> org.springframework.beans.factory.config.ConfigurableBeanFactory&#125;</span><br><span class=\"hljs-comment\"> * are available for specific purposes.</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> * &lt;p&gt;This interface is implemented by objects that hold a number of bean definitions,</span><br><span class=\"hljs-comment\"> * each uniquely identified by a String name. Depending on the bean definition,</span><br><span class=\"hljs-comment\"> * the factory will return either an independent instance of a contained object</span><br><span class=\"hljs-comment\"> * (the Prototype design pattern), or a single shared instance (a superior</span><br><span class=\"hljs-comment\"> * alternative to the Singleton design pattern, in which the instance is a</span><br><span class=\"hljs-comment\"> * singleton in the scope of the factory). Which type of instance will be returned</span><br><span class=\"hljs-comment\"> * depends on the bean factory configuration: the API is the same. Since Spring</span><br><span class=\"hljs-comment\"> * 2.0, further scopes are available depending on the concrete application</span><br><span class=\"hljs-comment\"> * context (e.g. &quot;request&quot; and &quot;session&quot; scopes in a web environment).</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> * &lt;p&gt;The point of this approach is that the BeanFactory is a central registry</span><br><span class=\"hljs-comment\"> * of application components, and centralizes configuration of application</span><br><span class=\"hljs-comment\"> * components (no more do individual objects need to read properties files,</span><br><span class=\"hljs-comment\"> * for example). See chapters 4 and 11 of &quot;Expert One-on-One J2EE Design and</span><br><span class=\"hljs-comment\"> * Development&quot; for a discussion of the benefits of this approach.</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> * &lt;p&gt;Note that it is generally better to rely on Dependency Injection</span><br><span class=\"hljs-comment\"> * (&quot;push&quot; configuration) to configure application objects through setters</span><br><span class=\"hljs-comment\"> * or constructors, rather than use any form of &quot;pull&quot; configuration like a</span><br><span class=\"hljs-comment\"> * BeanFactory lookup. Spring&#x27;s Dependency Injection functionality is</span><br><span class=\"hljs-comment\"> * implemented using this BeanFactory interface and its subinterfaces.</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> * &lt;p&gt;Normally a BeanFactory will load bean definitions stored in a configuration</span><br><span class=\"hljs-comment\"> * source (such as an XML document), and use the &#123;<span class=\"hljs-doctag\">@code</span> org.springframework.beans&#125;</span><br><span class=\"hljs-comment\"> * package to configure the beans. However, an implementation could simply return</span><br><span class=\"hljs-comment\"> * Java objects it creates as necessary directly in Java code. There are no</span><br><span class=\"hljs-comment\"> * constraints on how the definitions could be stored: LDAP, RDBMS, XML,</span><br><span class=\"hljs-comment\"> * properties file, etc. Implementations are encouraged to support references</span><br><span class=\"hljs-comment\"> * amongst beans (Dependency Injection).</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> * &lt;p&gt;In contrast to the methods in &#123;<span class=\"hljs-doctag\">@link</span> ListableBeanFactory&#125;, all of the</span><br><span class=\"hljs-comment\"> * operations in this interface will also check parent factories if this is a</span><br><span class=\"hljs-comment\"> * &#123;<span class=\"hljs-doctag\">@link</span> HierarchicalBeanFactory&#125;. If a bean is not found in this factory instance,</span><br><span class=\"hljs-comment\"> * the immediate parent factory will be asked. Beans in this factory instance</span><br><span class=\"hljs-comment\"> * are supposed to override beans of the same name in any parent factory.</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> * &lt;p&gt;Bean factory implementations should support the standard bean lifecycle interfaces</span><br><span class=\"hljs-comment\"> * as far as possible. The full set of initialization methods and their standard order is:</span><br><span class=\"hljs-comment\"> * &lt;ol&gt;</span><br><span class=\"hljs-comment\"> * &lt;li&gt;BeanNameAware&#x27;s &#123;<span class=\"hljs-doctag\">@code</span> setBeanName&#125;</span><br><span class=\"hljs-comment\"> * &lt;li&gt;BeanClassLoaderAware&#x27;s &#123;<span class=\"hljs-doctag\">@code</span> setBeanClassLoader&#125;</span><br><span class=\"hljs-comment\"> * &lt;li&gt;BeanFactoryAware&#x27;s &#123;<span class=\"hljs-doctag\">@code</span> setBeanFactory&#125;</span><br><span class=\"hljs-comment\"> * &lt;li&gt;EnvironmentAware&#x27;s &#123;<span class=\"hljs-doctag\">@code</span> setEnvironment&#125;</span><br><span class=\"hljs-comment\"> * &lt;li&gt;EmbeddedValueResolverAware&#x27;s &#123;<span class=\"hljs-doctag\">@code</span> setEmbeddedValueResolver&#125;</span><br><span class=\"hljs-comment\"> * &lt;li&gt;ResourceLoaderAware&#x27;s &#123;<span class=\"hljs-doctag\">@code</span> setResourceLoader&#125;</span><br><span class=\"hljs-comment\"> * (only applicable when running in an application context)</span><br><span class=\"hljs-comment\"> * &lt;li&gt;ApplicationEventPublisherAware&#x27;s &#123;<span class=\"hljs-doctag\">@code</span> setApplicationEventPublisher&#125;</span><br><span class=\"hljs-comment\"> * (only applicable when running in an application context)</span><br><span class=\"hljs-comment\"> * &lt;li&gt;MessageSourceAware&#x27;s &#123;<span class=\"hljs-doctag\">@code</span> setMessageSource&#125;</span><br><span class=\"hljs-comment\"> * (only applicable when running in an application context)</span><br><span class=\"hljs-comment\"> * &lt;li&gt;ApplicationContextAware&#x27;s &#123;<span class=\"hljs-doctag\">@code</span> setApplicationContext&#125;</span><br><span class=\"hljs-comment\"> * (only applicable when running in an application context)</span><br><span class=\"hljs-comment\"> * &lt;li&gt;ServletContextAware&#x27;s &#123;<span class=\"hljs-doctag\">@code</span> setServletContext&#125;</span><br><span class=\"hljs-comment\"> * (only applicable when running in a web application context)</span><br><span class=\"hljs-comment\"> * &lt;li&gt;&#123;<span class=\"hljs-doctag\">@code</span> postProcessBeforeInitialization&#125; methods of BeanPostProcessors</span><br><span class=\"hljs-comment\"> * &lt;li&gt;InitializingBean&#x27;s &#123;<span class=\"hljs-doctag\">@code</span> afterPropertiesSet&#125;</span><br><span class=\"hljs-comment\"> * &lt;li&gt;a custom init-method definition</span><br><span class=\"hljs-comment\"> * &lt;li&gt;&#123;<span class=\"hljs-doctag\">@code</span> postProcessAfterInitialization&#125; methods of BeanPostProcessors</span><br><span class=\"hljs-comment\"> * &lt;/ol&gt;</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> * &lt;p&gt;On shutdown of a bean factory, the following lifecycle methods apply:</span><br><span class=\"hljs-comment\"> * &lt;ol&gt;</span><br><span class=\"hljs-comment\"> * &lt;li&gt;&#123;<span class=\"hljs-doctag\">@code</span> postProcessBeforeDestruction&#125; methods of DestructionAwareBeanPostProcessors</span><br><span class=\"hljs-comment\"> * &lt;li&gt;DisposableBean&#x27;s &#123;<span class=\"hljs-doctag\">@code</span> destroy&#125;</span><br><span class=\"hljs-comment\"> * &lt;li&gt;a custom destroy-method definition</span><br><span class=\"hljs-comment\"> * &lt;/ol&gt;</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> Rod Johnson</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> Juergen Hoeller</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> Chris Beams</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@since</span> 13 April 2001</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@see</span> BeanNameAware#setBeanName</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@see</span> BeanClassLoaderAware#setBeanClassLoader</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@see</span> BeanFactoryAware#setBeanFactory</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@see</span> org.springframework.context.ResourceLoaderAware#setResourceLoader</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@see</span> org.springframework.context.ApplicationEventPublisherAware#setApplicationEventPublisher</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@see</span> org.springframework.context.MessageSourceAware#setMessageSource</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@see</span> org.springframework.context.ApplicationContextAware#setApplicationContext</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@see</span> org.springframework.web.context.ServletContextAware#setServletContext</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@see</span> org.springframework.beans.factory.config.BeanPostProcessor#postProcessBeforeInitialization</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@see</span> InitializingBean#afterPropertiesSet</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@see</span> org.springframework.beans.factory.support.RootBeanDefinition#getInitMethodName</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@see</span> org.springframework.beans.factory.config.BeanPostProcessor#postProcessAfterInitialization</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@see</span> DisposableBean#destroy</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@see</span> org.springframework.beans.factory.support.RootBeanDefinition#getDestroyMethodName</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">interface</span> <span class=\"hljs-title\">BeanFactory</span> </span>&#123;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Used to dereference a &#123;<span class=\"hljs-doctag\">@link</span> FactoryBean&#125; instance and distinguish it from</span><br><span class=\"hljs-comment\">\t * beans &lt;i&gt;created&lt;/i&gt; by the FactoryBean. For example, if the bean named</span><br><span class=\"hljs-comment\">\t * &#123;<span class=\"hljs-doctag\">@code</span> myJndiObject&#125; is a FactoryBean, getting &#123;<span class=\"hljs-doctag\">@code</span> &amp;myJndiObject&#125;</span><br><span class=\"hljs-comment\">\t * will return the factory, not the instance returned by the factory.</span><br><span class=\"hljs-comment\">\t */</span><br>\tString FACTORY_BEAN_PREFIX = <span class=\"hljs-string\">&quot;&amp;&quot;</span>;<br><br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return an instance, which may be shared or independent, of the specified bean.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;This method allows a Spring BeanFactory to be used as a replacement for the</span><br><span class=\"hljs-comment\">\t * Singleton or Prototype design pattern. Callers may retain references to</span><br><span class=\"hljs-comment\">\t * returned objects in the case of Singleton beans.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Translates aliases back to the corresponding canonical bean name.</span><br><span class=\"hljs-comment\">\t * Will ask the parent factory if the bean cannot be found in this factory instance.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@param</span> name the name of the bean to retrieve</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@return</span> an instance of the bean</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@throws</span> NoSuchBeanDefinitionException if there is no bean with the specified name</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@throws</span> BeansException if the bean could not be obtained</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\">Object <span class=\"hljs-title\">getBean</span><span class=\"hljs-params\">(String name)</span> <span class=\"hljs-keyword\">throws</span> BeansException</span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return an instance, which may be shared or independent, of the specified bean.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Behaves the same as &#123;<span class=\"hljs-doctag\">@link</span> #getBean(String)&#125;, but provides a measure of type</span><br><span class=\"hljs-comment\">\t * safety by throwing a BeanNotOfRequiredTypeException if the bean is not of the</span><br><span class=\"hljs-comment\">\t * required type. This means that ClassCastException can&#x27;t be thrown on casting</span><br><span class=\"hljs-comment\">\t * the result correctly, as can happen with &#123;<span class=\"hljs-doctag\">@link</span> #getBean(String)&#125;.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Translates aliases back to the corresponding canonical bean name.</span><br><span class=\"hljs-comment\">\t * Will ask the parent factory if the bean cannot be found in this factory instance.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@param</span> name the name of the bean to retrieve</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@param</span> requiredType type the bean must match; can be an interface or superclass</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@return</span> an instance of the bean</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@throws</span> NoSuchBeanDefinitionException if there is no such bean definition</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@throws</span> BeanNotOfRequiredTypeException if the bean is not of the required type</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@throws</span> BeansException if the bean could not be created</span><br><span class=\"hljs-comment\">\t */</span><br>\t&lt;T&gt; <span class=\"hljs-function\">T <span class=\"hljs-title\">getBean</span><span class=\"hljs-params\">(String name, Class&lt;T&gt; requiredType)</span> <span class=\"hljs-keyword\">throws</span> BeansException</span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return an instance, which may be shared or independent, of the specified bean.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Allows for specifying explicit constructor arguments / factory method arguments,</span><br><span class=\"hljs-comment\">\t * overriding the specified default arguments (if any) in the bean definition.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@param</span> name the name of the bean to retrieve</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@param</span> args arguments to use when creating a bean instance using explicit arguments</span><br><span class=\"hljs-comment\">\t * (only applied when creating a new instance as opposed to retrieving an existing one)</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@return</span> an instance of the bean</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@throws</span> NoSuchBeanDefinitionException if there is no such bean definition</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@throws</span> BeanDefinitionStoreException if arguments have been given but</span><br><span class=\"hljs-comment\">\t * the affected bean isn&#x27;t a prototype</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@throws</span> BeansException if the bean could not be created</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@since</span> 2.5</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\">Object <span class=\"hljs-title\">getBean</span><span class=\"hljs-params\">(String name, Object... args)</span> <span class=\"hljs-keyword\">throws</span> BeansException</span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return the bean instance that uniquely matches the given object type, if any.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;This method goes into &#123;<span class=\"hljs-doctag\">@link</span> ListableBeanFactory&#125; by-type lookup territory</span><br><span class=\"hljs-comment\">\t * but may also be translated into a conventional by-name lookup based on the name</span><br><span class=\"hljs-comment\">\t * of the given type. For more extensive retrieval operations across sets of beans,</span><br><span class=\"hljs-comment\">\t * use &#123;<span class=\"hljs-doctag\">@link</span> ListableBeanFactory&#125; and/or &#123;<span class=\"hljs-doctag\">@link</span> BeanFactoryUtils&#125;.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@param</span> requiredType type the bean must match; can be an interface or superclass</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@return</span> an instance of the single bean matching the required type</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@throws</span> NoSuchBeanDefinitionException if no bean of the given type was found</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@throws</span> NoUniqueBeanDefinitionException if more than one bean of the given type was found</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@throws</span> BeansException if the bean could not be created</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@since</span> 3.0</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> ListableBeanFactory</span><br><span class=\"hljs-comment\">\t */</span><br>\t&lt;T&gt; <span class=\"hljs-function\">T <span class=\"hljs-title\">getBean</span><span class=\"hljs-params\">(Class&lt;T&gt; requiredType)</span> <span class=\"hljs-keyword\">throws</span> BeansException</span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return an instance, which may be shared or independent, of the specified bean.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Allows for specifying explicit constructor arguments / factory method arguments,</span><br><span class=\"hljs-comment\">\t * overriding the specified default arguments (if any) in the bean definition.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;This method goes into &#123;<span class=\"hljs-doctag\">@link</span> ListableBeanFactory&#125; by-type lookup territory</span><br><span class=\"hljs-comment\">\t * but may also be translated into a conventional by-name lookup based on the name</span><br><span class=\"hljs-comment\">\t * of the given type. For more extensive retrieval operations across sets of beans,</span><br><span class=\"hljs-comment\">\t * use &#123;<span class=\"hljs-doctag\">@link</span> ListableBeanFactory&#125; and/or &#123;<span class=\"hljs-doctag\">@link</span> BeanFactoryUtils&#125;.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@param</span> requiredType type the bean must match; can be an interface or superclass</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@param</span> args arguments to use when creating a bean instance using explicit arguments</span><br><span class=\"hljs-comment\">\t * (only applied when creating a new instance as opposed to retrieving an existing one)</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@return</span> an instance of the bean</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@throws</span> NoSuchBeanDefinitionException if there is no such bean definition</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@throws</span> BeanDefinitionStoreException if arguments have been given but</span><br><span class=\"hljs-comment\">\t * the affected bean isn&#x27;t a prototype</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@throws</span> BeansException if the bean could not be created</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@since</span> 4.1</span><br><span class=\"hljs-comment\">\t */</span><br>\t&lt;T&gt; <span class=\"hljs-function\">T <span class=\"hljs-title\">getBean</span><span class=\"hljs-params\">(Class&lt;T&gt; requiredType, Object... args)</span> <span class=\"hljs-keyword\">throws</span> BeansException</span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return a provider for the specified bean, allowing for lazy on-demand retrieval</span><br><span class=\"hljs-comment\">\t * of instances, including availability and uniqueness options.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@param</span> requiredType type the bean must match; can be an interface or superclass</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@return</span> a corresponding provider handle</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@since</span> 5.1</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> #getBeanProvider(ResolvableType)</span><br><span class=\"hljs-comment\">\t */</span><br>\t&lt;T&gt; <span class=\"hljs-function\">ObjectProvider&lt;T&gt; <span class=\"hljs-title\">getBeanProvider</span><span class=\"hljs-params\">(Class&lt;T&gt; requiredType)</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return a provider for the specified bean, allowing for lazy on-demand retrieval</span><br><span class=\"hljs-comment\">\t * of instances, including availability and uniqueness options.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@param</span> requiredType type the bean must match; can be a generic type declaration.</span><br><span class=\"hljs-comment\">\t * Note that collection types are not supported here, in contrast to reflective</span><br><span class=\"hljs-comment\">\t * injection points. For programmatically retrieving a list of beans matching a</span><br><span class=\"hljs-comment\">\t * specific type, specify the actual bean type as an argument here and subsequently</span><br><span class=\"hljs-comment\">\t * use &#123;<span class=\"hljs-doctag\">@link</span> ObjectProvider#orderedStream()&#125; or its lazy streaming/iteration options.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@return</span> a corresponding provider handle</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@since</span> 5.1</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> ObjectProvider#iterator()</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> ObjectProvider#stream()</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> ObjectProvider#orderedStream()</span><br><span class=\"hljs-comment\">\t */</span><br>\t&lt;T&gt; <span class=\"hljs-function\">ObjectProvider&lt;T&gt; <span class=\"hljs-title\">getBeanProvider</span><span class=\"hljs-params\">(ResolvableType requiredType)</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Does this bean factory contain a bean definition or externally registered singleton</span><br><span class=\"hljs-comment\">\t * instance with the given name?</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;If the given name is an alias, it will be translated back to the corresponding</span><br><span class=\"hljs-comment\">\t * canonical bean name.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;If this factory is hierarchical, will ask any parent factory if the bean cannot</span><br><span class=\"hljs-comment\">\t * be found in this factory instance.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;If a bean definition or singleton instance matching the given name is found,</span><br><span class=\"hljs-comment\">\t * this method will return &#123;<span class=\"hljs-doctag\">@code</span> true&#125; whether the named bean definition is concrete</span><br><span class=\"hljs-comment\">\t * or abstract, lazy or eager, in scope or not. Therefore, note that a &#123;<span class=\"hljs-doctag\">@code</span> true&#125;</span><br><span class=\"hljs-comment\">\t * return value from this method does not necessarily indicate that &#123;<span class=\"hljs-doctag\">@link</span> #getBean&#125;</span><br><span class=\"hljs-comment\">\t * will be able to obtain an instance for the same name.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@param</span> name the name of the bean to query</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@return</span> whether a bean with the given name is present</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">boolean</span> <span class=\"hljs-title\">containsBean</span><span class=\"hljs-params\">(String name)</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Is this bean a shared singleton? That is, will &#123;<span class=\"hljs-doctag\">@link</span> #getBean&#125; always</span><br><span class=\"hljs-comment\">\t * return the same instance?</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Note: This method returning &#123;<span class=\"hljs-doctag\">@code</span> false&#125; does not clearly indicate</span><br><span class=\"hljs-comment\">\t * independent instances. It indicates non-singleton instances, which may correspond</span><br><span class=\"hljs-comment\">\t * to a scoped bean as well. Use the &#123;<span class=\"hljs-doctag\">@link</span> #isPrototype&#125; operation to explicitly</span><br><span class=\"hljs-comment\">\t * check for independent instances.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Translates aliases back to the corresponding canonical bean name.</span><br><span class=\"hljs-comment\">\t * Will ask the parent factory if the bean cannot be found in this factory instance.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@param</span> name the name of the bean to query</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@return</span> whether this bean corresponds to a singleton instance</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@throws</span> NoSuchBeanDefinitionException if there is no bean with the given name</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> #getBean</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> #isPrototype</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">boolean</span> <span class=\"hljs-title\">isSingleton</span><span class=\"hljs-params\">(String name)</span> <span class=\"hljs-keyword\">throws</span> NoSuchBeanDefinitionException</span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Is this bean a prototype? That is, will &#123;<span class=\"hljs-doctag\">@link</span> #getBean&#125; always return</span><br><span class=\"hljs-comment\">\t * independent instances?</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Note: This method returning &#123;<span class=\"hljs-doctag\">@code</span> false&#125; does not clearly indicate</span><br><span class=\"hljs-comment\">\t * a singleton object. It indicates non-independent instances, which may correspond</span><br><span class=\"hljs-comment\">\t * to a scoped bean as well. Use the &#123;<span class=\"hljs-doctag\">@link</span> #isSingleton&#125; operation to explicitly</span><br><span class=\"hljs-comment\">\t * check for a shared singleton instance.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Translates aliases back to the corresponding canonical bean name.</span><br><span class=\"hljs-comment\">\t * Will ask the parent factory if the bean cannot be found in this factory instance.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@param</span> name the name of the bean to query</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@return</span> whether this bean will always deliver independent instances</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@throws</span> NoSuchBeanDefinitionException if there is no bean with the given name</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@since</span> 2.0.3</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> #getBean</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> #isSingleton</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">boolean</span> <span class=\"hljs-title\">isPrototype</span><span class=\"hljs-params\">(String name)</span> <span class=\"hljs-keyword\">throws</span> NoSuchBeanDefinitionException</span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Check whether the bean with the given name matches the specified type.</span><br><span class=\"hljs-comment\">\t * More specifically, check whether a &#123;<span class=\"hljs-doctag\">@link</span> #getBean&#125; call for the given name</span><br><span class=\"hljs-comment\">\t * would return an object that is assignable to the specified target type.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Translates aliases back to the corresponding canonical bean name.</span><br><span class=\"hljs-comment\">\t * Will ask the parent factory if the bean cannot be found in this factory instance.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@param</span> name the name of the bean to query</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@param</span> typeToMatch the type to match against (as a &#123;<span class=\"hljs-doctag\">@code</span> ResolvableType&#125;)</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@return</span> &#123;<span class=\"hljs-doctag\">@code</span> true&#125; if the bean type matches,</span><br><span class=\"hljs-comment\">\t * &#123;<span class=\"hljs-doctag\">@code</span> false&#125; if it doesn&#x27;t match or cannot be determined yet</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@throws</span> NoSuchBeanDefinitionException if there is no bean with the given name</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@since</span> 4.2</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> #getBean</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> #getType</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">boolean</span> <span class=\"hljs-title\">isTypeMatch</span><span class=\"hljs-params\">(String name, ResolvableType typeToMatch)</span> <span class=\"hljs-keyword\">throws</span> NoSuchBeanDefinitionException</span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Check whether the bean with the given name matches the specified type.</span><br><span class=\"hljs-comment\">\t * More specifically, check whether a &#123;<span class=\"hljs-doctag\">@link</span> #getBean&#125; call for the given name</span><br><span class=\"hljs-comment\">\t * would return an object that is assignable to the specified target type.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Translates aliases back to the corresponding canonical bean name.</span><br><span class=\"hljs-comment\">\t * Will ask the parent factory if the bean cannot be found in this factory instance.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@param</span> name the name of the bean to query</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@param</span> typeToMatch the type to match against (as a &#123;<span class=\"hljs-doctag\">@code</span> Class&#125;)</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@return</span> &#123;<span class=\"hljs-doctag\">@code</span> true&#125; if the bean type matches,</span><br><span class=\"hljs-comment\">\t * &#123;<span class=\"hljs-doctag\">@code</span> false&#125; if it doesn&#x27;t match or cannot be determined yet</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@throws</span> NoSuchBeanDefinitionException if there is no bean with the given name</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@since</span> 2.0.1</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> #getBean</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> #getType</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">boolean</span> <span class=\"hljs-title\">isTypeMatch</span><span class=\"hljs-params\">(String name, Class&lt;?&gt; typeToMatch)</span> <span class=\"hljs-keyword\">throws</span> NoSuchBeanDefinitionException</span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Determine the type of the bean with the given name. More specifically,</span><br><span class=\"hljs-comment\">\t * determine the type of object that &#123;<span class=\"hljs-doctag\">@link</span> #getBean&#125; would return for the given name.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;For a &#123;<span class=\"hljs-doctag\">@link</span> FactoryBean&#125;, return the type of object that the FactoryBean creates,</span><br><span class=\"hljs-comment\">\t * as exposed by &#123;<span class=\"hljs-doctag\">@link</span> FactoryBean#getObjectType()&#125;. This may lead to the initialization</span><br><span class=\"hljs-comment\">\t * of a previously uninitialized &#123;<span class=\"hljs-doctag\">@code</span> FactoryBean&#125; (see &#123;<span class=\"hljs-doctag\">@link</span> #getType(String, boolean)&#125;).</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Translates aliases back to the corresponding canonical bean name.</span><br><span class=\"hljs-comment\">\t * Will ask the parent factory if the bean cannot be found in this factory instance.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@param</span> name the name of the bean to query</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@return</span> the type of the bean, or &#123;<span class=\"hljs-doctag\">@code</span> null&#125; if not determinable</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@throws</span> NoSuchBeanDefinitionException if there is no bean with the given name</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@since</span> 1.1.2</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> #getBean</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> #isTypeMatch</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-meta\">@Nullable</span><br>\tClass&lt;?&gt; getType(String name) <span class=\"hljs-keyword\">throws</span> NoSuchBeanDefinitionException;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Determine the type of the bean with the given name. More specifically,</span><br><span class=\"hljs-comment\">\t * determine the type of object that &#123;<span class=\"hljs-doctag\">@link</span> #getBean&#125; would return for the given name.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;For a &#123;<span class=\"hljs-doctag\">@link</span> FactoryBean&#125;, return the type of object that the FactoryBean creates,</span><br><span class=\"hljs-comment\">\t * as exposed by &#123;<span class=\"hljs-doctag\">@link</span> FactoryBean#getObjectType()&#125;. Depending on the</span><br><span class=\"hljs-comment\">\t * &#123;<span class=\"hljs-doctag\">@code</span> allowFactoryBeanInit&#125; flag, this may lead to the initialization of a previously</span><br><span class=\"hljs-comment\">\t * uninitialized &#123;<span class=\"hljs-doctag\">@code</span> FactoryBean&#125; if no early type information is available.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Translates aliases back to the corresponding canonical bean name.</span><br><span class=\"hljs-comment\">\t * Will ask the parent factory if the bean cannot be found in this factory instance.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@param</span> name the name of the bean to query</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@param</span> allowFactoryBeanInit whether a &#123;<span class=\"hljs-doctag\">@code</span> FactoryBean&#125; may get initialized</span><br><span class=\"hljs-comment\">\t * just for the purpose of determining its object type</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@return</span> the type of the bean, or &#123;<span class=\"hljs-doctag\">@code</span> null&#125; if not determinable</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@throws</span> NoSuchBeanDefinitionException if there is no bean with the given name</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@since</span> 5.2</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> #getBean</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> #isTypeMatch</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-meta\">@Nullable</span><br>\tClass&lt;?&gt; getType(String name, <span class=\"hljs-keyword\">boolean</span> allowFactoryBeanInit) <span class=\"hljs-keyword\">throws</span> NoSuchBeanDefinitionException;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return the aliases for the given bean name, if any.</span><br><span class=\"hljs-comment\">\t * All of those aliases point to the same bean when used in a &#123;<span class=\"hljs-doctag\">@link</span> #getBean&#125; call.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;If the given name is an alias, the corresponding original bean name</span><br><span class=\"hljs-comment\">\t * and other aliases (if any) will be returned, with the original bean name</span><br><span class=\"hljs-comment\">\t * being the first element in the array.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Will ask the parent factory if the bean cannot be found in this factory instance.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@param</span> name the bean name to check for aliases</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@return</span> the aliases, or an empty array if none</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> #getBean</span><br><span class=\"hljs-comment\">\t */</span><br>\tString[] getAliases(String name);<br><br>&#125;<br></code></pre></td></tr></table></figure>\n\n<h3 id=\"BeanFactory方法属性摘要\"><a href=\"#BeanFactory方法属性摘要\" class=\"headerlink\" title=\"BeanFactory方法属性摘要\"></a>BeanFactory方法属性摘要</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">interface</span> <span class=\"hljs-title\">BeanFactory</span> </span>&#123;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t */</span><br>\tString FACTORY_BEAN_PREFIX = <span class=\"hljs-string\">&quot;&amp;&quot;</span>;<br><br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\">Object <span class=\"hljs-title\">getBean</span><span class=\"hljs-params\">(String name)</span> <span class=\"hljs-keyword\">throws</span> BeansException</span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t */</span><br>\t&lt;T&gt; <span class=\"hljs-function\">T <span class=\"hljs-title\">getBean</span><span class=\"hljs-params\">(String name, Class&lt;T&gt; requiredType)</span> <span class=\"hljs-keyword\">throws</span> BeansException</span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\">Object <span class=\"hljs-title\">getBean</span><span class=\"hljs-params\">(String name, Object... args)</span> <span class=\"hljs-keyword\">throws</span> BeansException</span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t */</span><br>\t&lt;T&gt; <span class=\"hljs-function\">T <span class=\"hljs-title\">getBean</span><span class=\"hljs-params\">(Class&lt;T&gt; requiredType)</span> <span class=\"hljs-keyword\">throws</span> BeansException</span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t */</span><br>\t&lt;T&gt; <span class=\"hljs-function\">T <span class=\"hljs-title\">getBean</span><span class=\"hljs-params\">(Class&lt;T&gt; requiredType, Object... args)</span> <span class=\"hljs-keyword\">throws</span> BeansException</span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t */</span><br>\t&lt;T&gt; <span class=\"hljs-function\">ObjectProvider&lt;T&gt; <span class=\"hljs-title\">getBeanProvider</span><span class=\"hljs-params\">(Class&lt;T&gt; requiredType)</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t */</span><br>\t&lt;T&gt; <span class=\"hljs-function\">ObjectProvider&lt;T&gt; <span class=\"hljs-title\">getBeanProvider</span><span class=\"hljs-params\">(ResolvableType requiredType)</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">boolean</span> <span class=\"hljs-title\">containsBean</span><span class=\"hljs-params\">(String name)</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">boolean</span> <span class=\"hljs-title\">isSingleton</span><span class=\"hljs-params\">(String name)</span> <span class=\"hljs-keyword\">throws</span> NoSuchBeanDefinitionException</span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">boolean</span> <span class=\"hljs-title\">isPrototype</span><span class=\"hljs-params\">(String name)</span> <span class=\"hljs-keyword\">throws</span> NoSuchBeanDefinitionException</span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">boolean</span> <span class=\"hljs-title\">isTypeMatch</span><span class=\"hljs-params\">(String name, ResolvableType typeToMatch)</span> <span class=\"hljs-keyword\">throws</span> NoSuchBeanDefinitionException</span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">boolean</span> <span class=\"hljs-title\">isTypeMatch</span><span class=\"hljs-params\">(String name, Class&lt;?&gt; typeToMatch)</span> <span class=\"hljs-keyword\">throws</span> NoSuchBeanDefinitionException</span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-meta\">@Nullable</span><br>\tClass&lt;?&gt; getType(String name) <span class=\"hljs-keyword\">throws</span> NoSuchBeanDefinitionException;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-meta\">@Nullable</span><br>\tClass&lt;?&gt; getType(String name, <span class=\"hljs-keyword\">boolean</span> allowFactoryBeanInit) <span class=\"hljs-keyword\">throws</span> NoSuchBeanDefinitionException;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t */</span><br>\tString[] getAliases(String name);<br><br>&#125;<br></code></pre></td></tr></table></figure>\n\n\n<h3 id=\"1-2-HierarchicalBeanFactory接口\"><a href=\"#1-2-HierarchicalBeanFactory接口\" class=\"headerlink\" title=\"1.2 HierarchicalBeanFactory接口\"></a>1.2 HierarchicalBeanFactory接口</h3><h3 id=\"完整版源码：-1\"><a href=\"#完整版源码：-1\" class=\"headerlink\" title=\"完整版源码：\"></a>完整版源码：</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\"> * Copyright 2002-2012 the original author or authors.</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span><br><span class=\"hljs-comment\"> * you may not use this file except in compliance with the License.</span><br><span class=\"hljs-comment\"> * You may obtain a copy of the License at</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> *      https://www.apache.org/licenses/LICENSE-2.0</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> * Unless required by applicable law or agreed to in writing, software</span><br><span class=\"hljs-comment\"> * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span><br><span class=\"hljs-comment\"> * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span><br><span class=\"hljs-comment\"> * See the License for the specific language governing permissions and</span><br><span class=\"hljs-comment\"> * limitations under the License.</span><br><span class=\"hljs-comment\"> */</span><br><br><span class=\"hljs-keyword\">package</span> org.springframework.beans.factory;<br><br><span class=\"hljs-keyword\">import</span> org.springframework.lang.Nullable;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * Sub-interface implemented by bean factories that can be part</span><br><span class=\"hljs-comment\"> * of a hierarchy.</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> * &lt;p&gt;The corresponding &#123;<span class=\"hljs-doctag\">@code</span> setParentBeanFactory&#125; method for bean</span><br><span class=\"hljs-comment\"> * factories that allow setting the parent in a configurable</span><br><span class=\"hljs-comment\"> * fashion can be found in the ConfigurableBeanFactory interface.</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> Rod Johnson</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> Juergen Hoeller</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@since</span> 07.07.2003</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@see</span> org.springframework.beans.factory.config.ConfigurableBeanFactory#setParentBeanFactory</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">interface</span> <span class=\"hljs-title\">HierarchicalBeanFactory</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">BeanFactory</span> </span>&#123;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return the parent bean factory, or &#123;<span class=\"hljs-doctag\">@code</span> null&#125; if there is none.</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-meta\">@Nullable</span><br>\t<span class=\"hljs-function\">BeanFactory <span class=\"hljs-title\">getParentBeanFactory</span><span class=\"hljs-params\">()</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return whether the local bean factory contains a bean of the given name,</span><br><span class=\"hljs-comment\">\t * ignoring beans defined in ancestor contexts.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;This is an alternative to &#123;<span class=\"hljs-doctag\">@code</span> containsBean&#125;, ignoring a bean</span><br><span class=\"hljs-comment\">\t * of the given name from an ancestor bean factory.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@param</span> name the name of the bean to query</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@return</span> whether a bean with the given name is defined in the local factory</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> BeanFactory#containsBean</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">boolean</span> <span class=\"hljs-title\">containsLocalBean</span><span class=\"hljs-params\">(String name)</span></span>;<br><br>&#125;<br><br></code></pre></td></tr></table></figure>\n\n<h3 id=\"HierarchicalBeanFactory方法属性摘要\"><a href=\"#HierarchicalBeanFactory方法属性摘要\" class=\"headerlink\" title=\"HierarchicalBeanFactory方法属性摘要\"></a>HierarchicalBeanFactory方法属性摘要</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">interface</span> <span class=\"hljs-title\">HierarchicalBeanFactory</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">BeanFactory</span> </span>&#123;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-meta\">@Nullable</span><br>\t<span class=\"hljs-function\">BeanFactory <span class=\"hljs-title\">getParentBeanFactory</span><span class=\"hljs-params\">()</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">boolean</span> <span class=\"hljs-title\">containsLocalBean</span><span class=\"hljs-params\">(String name)</span></span>;<br><br>&#125;<br></code></pre></td></tr></table></figure>\n\n<h3 id=\"1-3-ListableBeanFactory接口\"><a href=\"#1-3-ListableBeanFactory接口\" class=\"headerlink\" title=\"1.3 ListableBeanFactory接口\"></a>1.3 ListableBeanFactory接口</h3><h3 id=\"完整版源码：-2\"><a href=\"#完整版源码：-2\" class=\"headerlink\" title=\"完整版源码：\"></a>完整版源码：</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br><span class=\"line\">252</span><br><span class=\"line\">253</span><br><span class=\"line\">254</span><br><span class=\"line\">255</span><br><span class=\"line\">256</span><br><span class=\"line\">257</span><br><span class=\"line\">258</span><br><span class=\"line\">259</span><br><span class=\"line\">260</span><br><span class=\"line\">261</span><br><span class=\"line\">262</span><br><span class=\"line\">263</span><br><span class=\"line\">264</span><br><span class=\"line\">265</span><br><span class=\"line\">266</span><br><span class=\"line\">267</span><br><span class=\"line\">268</span><br><span class=\"line\">269</span><br><span class=\"line\">270</span><br><span class=\"line\">271</span><br><span class=\"line\">272</span><br><span class=\"line\">273</span><br><span class=\"line\">274</span><br><span class=\"line\">275</span><br><span class=\"line\">276</span><br><span class=\"line\">277</span><br><span class=\"line\">278</span><br><span class=\"line\">279</span><br><span class=\"line\">280</span><br><span class=\"line\">281</span><br><span class=\"line\">282</span><br><span class=\"line\">283</span><br><span class=\"line\">284</span><br><span class=\"line\">285</span><br><span class=\"line\">286</span><br><span class=\"line\">287</span><br><span class=\"line\">288</span><br><span class=\"line\">289</span><br><span class=\"line\">290</span><br><span class=\"line\">291</span><br><span class=\"line\">292</span><br><span class=\"line\">293</span><br><span class=\"line\">294</span><br><span class=\"line\">295</span><br><span class=\"line\">296</span><br><span class=\"line\">297</span><br><span class=\"line\">298</span><br><span class=\"line\">299</span><br><span class=\"line\">300</span><br><span class=\"line\">301</span><br><span class=\"line\">302</span><br><span class=\"line\">303</span><br><span class=\"line\">304</span><br><span class=\"line\">305</span><br><span class=\"line\">306</span><br><span class=\"line\">307</span><br><span class=\"line\">308</span><br><span class=\"line\">309</span><br><span class=\"line\">310</span><br><span class=\"line\">311</span><br><span class=\"line\">312</span><br><span class=\"line\">313</span><br><span class=\"line\">314</span><br><span class=\"line\">315</span><br><span class=\"line\">316</span><br><span class=\"line\">317</span><br><span class=\"line\">318</span><br><span class=\"line\">319</span><br><span class=\"line\">320</span><br><span class=\"line\">321</span><br><span class=\"line\">322</span><br><span class=\"line\">323</span><br><span class=\"line\">324</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\"> * Copyright 2002-2019 the original author or authors.</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span><br><span class=\"hljs-comment\"> * you may not use this file except in compliance with the License.</span><br><span class=\"hljs-comment\"> * You may obtain a copy of the License at</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> *      https://www.apache.org/licenses/LICENSE-2.0</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> * Unless required by applicable law or agreed to in writing, software</span><br><span class=\"hljs-comment\"> * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span><br><span class=\"hljs-comment\"> * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span><br><span class=\"hljs-comment\"> * See the License for the specific language governing permissions and</span><br><span class=\"hljs-comment\"> * limitations under the License.</span><br><span class=\"hljs-comment\"> */</span><br><br><span class=\"hljs-keyword\">package</span> org.springframework.beans.factory;<br><br><span class=\"hljs-keyword\">import</span> java.lang.annotation.Annotation;<br><span class=\"hljs-keyword\">import</span> java.util.Map;<br><br><span class=\"hljs-keyword\">import</span> org.springframework.beans.BeansException;<br><span class=\"hljs-keyword\">import</span> org.springframework.core.ResolvableType;<br><span class=\"hljs-keyword\">import</span> org.springframework.lang.Nullable;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * Extension of the &#123;<span class=\"hljs-doctag\">@link</span> BeanFactory&#125; interface to be implemented by bean factories</span><br><span class=\"hljs-comment\"> * that can enumerate all their bean instances, rather than attempting bean lookup</span><br><span class=\"hljs-comment\"> * by name one by one as requested by clients. BeanFactory implementations that</span><br><span class=\"hljs-comment\"> * preload all their bean definitions (such as XML-based factories) may implement</span><br><span class=\"hljs-comment\"> * this interface.</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> * &lt;p&gt;If this is a &#123;<span class=\"hljs-doctag\">@link</span> HierarchicalBeanFactory&#125;, the return values will &lt;i&gt;not&lt;/i&gt;</span><br><span class=\"hljs-comment\"> * take any BeanFactory hierarchy into account, but will relate only to the beans</span><br><span class=\"hljs-comment\"> * defined in the current factory. Use the &#123;<span class=\"hljs-doctag\">@link</span> BeanFactoryUtils&#125; helper class</span><br><span class=\"hljs-comment\"> * to consider beans in ancestor factories too.</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> * &lt;p&gt;The methods in this interface will just respect bean definitions of this factory.</span><br><span class=\"hljs-comment\"> * They will ignore any singleton beans that have been registered by other means like</span><br><span class=\"hljs-comment\"> * &#123;<span class=\"hljs-doctag\">@link</span> org.springframework.beans.factory.config.ConfigurableBeanFactory&#125;&#x27;s</span><br><span class=\"hljs-comment\"> * &#123;<span class=\"hljs-doctag\">@code</span> registerSingleton&#125; method, with the exception of</span><br><span class=\"hljs-comment\"> * &#123;<span class=\"hljs-doctag\">@code</span> getBeanNamesOfType&#125; and &#123;<span class=\"hljs-doctag\">@code</span> getBeansOfType&#125; which will check</span><br><span class=\"hljs-comment\"> * such manually registered singletons too. Of course, BeanFactory&#x27;s &#123;<span class=\"hljs-doctag\">@code</span> getBean&#125;</span><br><span class=\"hljs-comment\"> * does allow transparent access to such special beans as well. However, in typical</span><br><span class=\"hljs-comment\"> * scenarios, all beans will be defined by external bean definitions anyway, so most</span><br><span class=\"hljs-comment\"> * applications don&#x27;t need to worry about this differentiation.</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> * &lt;p&gt;&lt;b&gt;<span class=\"hljs-doctag\">NOTE:</span>&lt;/b&gt; With the exception of &#123;<span class=\"hljs-doctag\">@code</span> getBeanDefinitionCount&#125;</span><br><span class=\"hljs-comment\"> * and &#123;<span class=\"hljs-doctag\">@code</span> containsBeanDefinition&#125;, the methods in this interface</span><br><span class=\"hljs-comment\"> * are not designed for frequent invocation. Implementations may be slow.</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> Rod Johnson</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> Juergen Hoeller</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@since</span> 16 April 2001</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@see</span> HierarchicalBeanFactory</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@see</span> BeanFactoryUtils</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">interface</span> <span class=\"hljs-title\">ListableBeanFactory</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">BeanFactory</span> </span>&#123;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Check if this bean factory contains a bean definition with the given name.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Does not consider any hierarchy this factory may participate in,</span><br><span class=\"hljs-comment\">\t * and ignores any singleton beans that have been registered by</span><br><span class=\"hljs-comment\">\t * other means than bean definitions.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@param</span> beanName the name of the bean to look for</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@return</span> if this bean factory contains a bean definition with the given name</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> #containsBean</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">boolean</span> <span class=\"hljs-title\">containsBeanDefinition</span><span class=\"hljs-params\">(String beanName)</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return the number of beans defined in the factory.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Does not consider any hierarchy this factory may participate in,</span><br><span class=\"hljs-comment\">\t * and ignores any singleton beans that have been registered by</span><br><span class=\"hljs-comment\">\t * other means than bean definitions.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@return</span> the number of beans defined in the factory</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">getBeanDefinitionCount</span><span class=\"hljs-params\">()</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return the names of all beans defined in this factory.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Does not consider any hierarchy this factory may participate in,</span><br><span class=\"hljs-comment\">\t * and ignores any singleton beans that have been registered by</span><br><span class=\"hljs-comment\">\t * other means than bean definitions.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@return</span> the names of all beans defined in this factory,</span><br><span class=\"hljs-comment\">\t * or an empty array if none defined</span><br><span class=\"hljs-comment\">\t */</span><br>\tString[] getBeanDefinitionNames();<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return the names of beans matching the given type (including subclasses),</span><br><span class=\"hljs-comment\">\t * judging from either bean definitions or the value of &#123;<span class=\"hljs-doctag\">@code</span> getObjectType&#125;</span><br><span class=\"hljs-comment\">\t * in the case of FactoryBeans.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;&lt;b&gt;<span class=\"hljs-doctag\">NOTE:</span> This method introspects top-level beans only.&lt;/b&gt; It does &lt;i&gt;not&lt;/i&gt;</span><br><span class=\"hljs-comment\">\t * check nested beans which might match the specified type as well.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Does consider objects created by FactoryBeans, which means that FactoryBeans</span><br><span class=\"hljs-comment\">\t * will get initialized. If the object created by the FactoryBean doesn&#x27;t match,</span><br><span class=\"hljs-comment\">\t * the raw FactoryBean itself will be matched against the type.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Does not consider any hierarchy this factory may participate in.</span><br><span class=\"hljs-comment\">\t * Use BeanFactoryUtils&#x27; &#123;<span class=\"hljs-doctag\">@code</span> beanNamesForTypeIncludingAncestors&#125;</span><br><span class=\"hljs-comment\">\t * to include beans in ancestor factories too.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Note: Does &lt;i&gt;not&lt;/i&gt; ignore singleton beans that have been registered</span><br><span class=\"hljs-comment\">\t * by other means than bean definitions.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;This version of &#123;<span class=\"hljs-doctag\">@code</span> getBeanNamesForType&#125; matches all kinds of beans,</span><br><span class=\"hljs-comment\">\t * be it singletons, prototypes, or FactoryBeans. In most implementations, the</span><br><span class=\"hljs-comment\">\t * result will be the same as for &#123;<span class=\"hljs-doctag\">@code</span> getBeanNamesForType(type, true, true)&#125;.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Bean names returned by this method should always return bean names &lt;i&gt;in the</span><br><span class=\"hljs-comment\">\t * order of definition&lt;/i&gt; in the backend configuration, as far as possible.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@param</span> type the generically typed class or interface to match</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@return</span> the names of beans (or objects created by FactoryBeans) matching</span><br><span class=\"hljs-comment\">\t * the given object type (including subclasses), or an empty array if none</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@since</span> 4.2</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> #isTypeMatch(String, ResolvableType)</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> FactoryBean#getObjectType</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> BeanFactoryUtils#beanNamesForTypeIncludingAncestors(ListableBeanFactory, ResolvableType)</span><br><span class=\"hljs-comment\">\t */</span><br>\tString[] getBeanNamesForType(ResolvableType type);<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return the names of beans matching the given type (including subclasses),</span><br><span class=\"hljs-comment\">\t * judging from either bean definitions or the value of &#123;<span class=\"hljs-doctag\">@code</span> getObjectType&#125;</span><br><span class=\"hljs-comment\">\t * in the case of FactoryBeans.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;&lt;b&gt;<span class=\"hljs-doctag\">NOTE:</span> This method introspects top-level beans only.&lt;/b&gt; It does &lt;i&gt;not&lt;/i&gt;</span><br><span class=\"hljs-comment\">\t * check nested beans which might match the specified type as well.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Does consider objects created by FactoryBeans if the &quot;allowEagerInit&quot; flag is set,</span><br><span class=\"hljs-comment\">\t * which means that FactoryBeans will get initialized. If the object created by the</span><br><span class=\"hljs-comment\">\t * FactoryBean doesn&#x27;t match, the raw FactoryBean itself will be matched against the</span><br><span class=\"hljs-comment\">\t * type. If &quot;allowEagerInit&quot; is not set, only raw FactoryBeans will be checked</span><br><span class=\"hljs-comment\">\t * (which doesn&#x27;t require initialization of each FactoryBean).</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Does not consider any hierarchy this factory may participate in.</span><br><span class=\"hljs-comment\">\t * Use BeanFactoryUtils&#x27; &#123;<span class=\"hljs-doctag\">@code</span> beanNamesForTypeIncludingAncestors&#125;</span><br><span class=\"hljs-comment\">\t * to include beans in ancestor factories too.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Note: Does &lt;i&gt;not&lt;/i&gt; ignore singleton beans that have been registered</span><br><span class=\"hljs-comment\">\t * by other means than bean definitions.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Bean names returned by this method should always return bean names &lt;i&gt;in the</span><br><span class=\"hljs-comment\">\t * order of definition&lt;/i&gt; in the backend configuration, as far as possible.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@param</span> type the generically typed class or interface to match</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@param</span> includeNonSingletons whether to include prototype or scoped beans too</span><br><span class=\"hljs-comment\">\t * or just singletons (also applies to FactoryBeans)</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@param</span> allowEagerInit whether to initialize &lt;i&gt;lazy-init singletons&lt;/i&gt; and</span><br><span class=\"hljs-comment\">\t * &lt;i&gt;objects created by FactoryBeans&lt;/i&gt; (or by factory methods with a</span><br><span class=\"hljs-comment\">\t * &quot;factory-bean&quot; reference) for the type check. Note that FactoryBeans need to be</span><br><span class=\"hljs-comment\">\t * eagerly initialized to determine their type: So be aware that passing in &quot;true&quot;</span><br><span class=\"hljs-comment\">\t * for this flag will initialize FactoryBeans and &quot;factory-bean&quot; references.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@return</span> the names of beans (or objects created by FactoryBeans) matching</span><br><span class=\"hljs-comment\">\t * the given object type (including subclasses), or an empty array if none</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@since</span> 5.2</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> FactoryBean#getObjectType</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> BeanFactoryUtils#beanNamesForTypeIncludingAncestors(ListableBeanFactory, ResolvableType, boolean, boolean)</span><br><span class=\"hljs-comment\">\t */</span><br>\tString[] getBeanNamesForType(ResolvableType type, <span class=\"hljs-keyword\">boolean</span> includeNonSingletons, <span class=\"hljs-keyword\">boolean</span> allowEagerInit);<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return the names of beans matching the given type (including subclasses),</span><br><span class=\"hljs-comment\">\t * judging from either bean definitions or the value of &#123;<span class=\"hljs-doctag\">@code</span> getObjectType&#125;</span><br><span class=\"hljs-comment\">\t * in the case of FactoryBeans.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;&lt;b&gt;<span class=\"hljs-doctag\">NOTE:</span> This method introspects top-level beans only.&lt;/b&gt; It does &lt;i&gt;not&lt;/i&gt;</span><br><span class=\"hljs-comment\">\t * check nested beans which might match the specified type as well.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Does consider objects created by FactoryBeans, which means that FactoryBeans</span><br><span class=\"hljs-comment\">\t * will get initialized. If the object created by the FactoryBean doesn&#x27;t match,</span><br><span class=\"hljs-comment\">\t * the raw FactoryBean itself will be matched against the type.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Does not consider any hierarchy this factory may participate in.</span><br><span class=\"hljs-comment\">\t * Use BeanFactoryUtils&#x27; &#123;<span class=\"hljs-doctag\">@code</span> beanNamesForTypeIncludingAncestors&#125;</span><br><span class=\"hljs-comment\">\t * to include beans in ancestor factories too.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Note: Does &lt;i&gt;not&lt;/i&gt; ignore singleton beans that have been registered</span><br><span class=\"hljs-comment\">\t * by other means than bean definitions.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;This version of &#123;<span class=\"hljs-doctag\">@code</span> getBeanNamesForType&#125; matches all kinds of beans,</span><br><span class=\"hljs-comment\">\t * be it singletons, prototypes, or FactoryBeans. In most implementations, the</span><br><span class=\"hljs-comment\">\t * result will be the same as for &#123;<span class=\"hljs-doctag\">@code</span> getBeanNamesForType(type, true, true)&#125;.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Bean names returned by this method should always return bean names &lt;i&gt;in the</span><br><span class=\"hljs-comment\">\t * order of definition&lt;/i&gt; in the backend configuration, as far as possible.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@param</span> type the class or interface to match, or &#123;<span class=\"hljs-doctag\">@code</span> null&#125; for all bean names</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@return</span> the names of beans (or objects created by FactoryBeans) matching</span><br><span class=\"hljs-comment\">\t * the given object type (including subclasses), or an empty array if none</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> FactoryBean#getObjectType</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> BeanFactoryUtils#beanNamesForTypeIncludingAncestors(ListableBeanFactory, Class)</span><br><span class=\"hljs-comment\">\t */</span><br>\tString[] getBeanNamesForType(<span class=\"hljs-meta\">@Nullable</span> Class&lt;?&gt; type);<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return the names of beans matching the given type (including subclasses),</span><br><span class=\"hljs-comment\">\t * judging from either bean definitions or the value of &#123;<span class=\"hljs-doctag\">@code</span> getObjectType&#125;</span><br><span class=\"hljs-comment\">\t * in the case of FactoryBeans.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;&lt;b&gt;<span class=\"hljs-doctag\">NOTE:</span> This method introspects top-level beans only.&lt;/b&gt; It does &lt;i&gt;not&lt;/i&gt;</span><br><span class=\"hljs-comment\">\t * check nested beans which might match the specified type as well.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Does consider objects created by FactoryBeans if the &quot;allowEagerInit&quot; flag is set,</span><br><span class=\"hljs-comment\">\t * which means that FactoryBeans will get initialized. If the object created by the</span><br><span class=\"hljs-comment\">\t * FactoryBean doesn&#x27;t match, the raw FactoryBean itself will be matched against the</span><br><span class=\"hljs-comment\">\t * type. If &quot;allowEagerInit&quot; is not set, only raw FactoryBeans will be checked</span><br><span class=\"hljs-comment\">\t * (which doesn&#x27;t require initialization of each FactoryBean).</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Does not consider any hierarchy this factory may participate in.</span><br><span class=\"hljs-comment\">\t * Use BeanFactoryUtils&#x27; &#123;<span class=\"hljs-doctag\">@code</span> beanNamesForTypeIncludingAncestors&#125;</span><br><span class=\"hljs-comment\">\t * to include beans in ancestor factories too.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Note: Does &lt;i&gt;not&lt;/i&gt; ignore singleton beans that have been registered</span><br><span class=\"hljs-comment\">\t * by other means than bean definitions.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Bean names returned by this method should always return bean names &lt;i&gt;in the</span><br><span class=\"hljs-comment\">\t * order of definition&lt;/i&gt; in the backend configuration, as far as possible.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@param</span> type the class or interface to match, or &#123;<span class=\"hljs-doctag\">@code</span> null&#125; for all bean names</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@param</span> includeNonSingletons whether to include prototype or scoped beans too</span><br><span class=\"hljs-comment\">\t * or just singletons (also applies to FactoryBeans)</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@param</span> allowEagerInit whether to initialize &lt;i&gt;lazy-init singletons&lt;/i&gt; and</span><br><span class=\"hljs-comment\">\t * &lt;i&gt;objects created by FactoryBeans&lt;/i&gt; (or by factory methods with a</span><br><span class=\"hljs-comment\">\t * &quot;factory-bean&quot; reference) for the type check. Note that FactoryBeans need to be</span><br><span class=\"hljs-comment\">\t * eagerly initialized to determine their type: So be aware that passing in &quot;true&quot;</span><br><span class=\"hljs-comment\">\t * for this flag will initialize FactoryBeans and &quot;factory-bean&quot; references.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@return</span> the names of beans (or objects created by FactoryBeans) matching</span><br><span class=\"hljs-comment\">\t * the given object type (including subclasses), or an empty array if none</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> FactoryBean#getObjectType</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> BeanFactoryUtils#beanNamesForTypeIncludingAncestors(ListableBeanFactory, Class, boolean, boolean)</span><br><span class=\"hljs-comment\">\t */</span><br>\tString[] getBeanNamesForType(<span class=\"hljs-meta\">@Nullable</span> Class&lt;?&gt; type, <span class=\"hljs-keyword\">boolean</span> includeNonSingletons, <span class=\"hljs-keyword\">boolean</span> allowEagerInit);<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return the bean instances that match the given object type (including</span><br><span class=\"hljs-comment\">\t * subclasses), judging from either bean definitions or the value of</span><br><span class=\"hljs-comment\">\t * &#123;<span class=\"hljs-doctag\">@code</span> getObjectType&#125; in the case of FactoryBeans.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;&lt;b&gt;<span class=\"hljs-doctag\">NOTE:</span> This method introspects top-level beans only.&lt;/b&gt; It does &lt;i&gt;not&lt;/i&gt;</span><br><span class=\"hljs-comment\">\t * check nested beans which might match the specified type as well.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Does consider objects created by FactoryBeans, which means that FactoryBeans</span><br><span class=\"hljs-comment\">\t * will get initialized. If the object created by the FactoryBean doesn&#x27;t match,</span><br><span class=\"hljs-comment\">\t * the raw FactoryBean itself will be matched against the type.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Does not consider any hierarchy this factory may participate in.</span><br><span class=\"hljs-comment\">\t * Use BeanFactoryUtils&#x27; &#123;<span class=\"hljs-doctag\">@code</span> beansOfTypeIncludingAncestors&#125;</span><br><span class=\"hljs-comment\">\t * to include beans in ancestor factories too.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Note: Does &lt;i&gt;not&lt;/i&gt; ignore singleton beans that have been registered</span><br><span class=\"hljs-comment\">\t * by other means than bean definitions.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;This version of getBeansOfType matches all kinds of beans, be it</span><br><span class=\"hljs-comment\">\t * singletons, prototypes, or FactoryBeans. In most implementations, the</span><br><span class=\"hljs-comment\">\t * result will be the same as for &#123;<span class=\"hljs-doctag\">@code</span> getBeansOfType(type, true, true)&#125;.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;The Map returned by this method should always return bean names and</span><br><span class=\"hljs-comment\">\t * corresponding bean instances &lt;i&gt;in the order of definition&lt;/i&gt; in the</span><br><span class=\"hljs-comment\">\t * backend configuration, as far as possible.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@param</span> type the class or interface to match, or &#123;<span class=\"hljs-doctag\">@code</span> null&#125; for all concrete beans</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@return</span> a Map with the matching beans, containing the bean names as</span><br><span class=\"hljs-comment\">\t * keys and the corresponding bean instances as values</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@throws</span> BeansException if a bean could not be created</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@since</span> 1.1.2</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> FactoryBean#getObjectType</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> BeanFactoryUtils#beansOfTypeIncludingAncestors(ListableBeanFactory, Class)</span><br><span class=\"hljs-comment\">\t */</span><br>\t&lt;T&gt; <span class=\"hljs-function\">Map&lt;String, T&gt; <span class=\"hljs-title\">getBeansOfType</span><span class=\"hljs-params\">(<span class=\"hljs-meta\">@Nullable</span> Class&lt;T&gt; type)</span> <span class=\"hljs-keyword\">throws</span> BeansException</span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return the bean instances that match the given object type (including</span><br><span class=\"hljs-comment\">\t * subclasses), judging from either bean definitions or the value of</span><br><span class=\"hljs-comment\">\t * &#123;<span class=\"hljs-doctag\">@code</span> getObjectType&#125; in the case of FactoryBeans.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;&lt;b&gt;<span class=\"hljs-doctag\">NOTE:</span> This method introspects top-level beans only.&lt;/b&gt; It does &lt;i&gt;not&lt;/i&gt;</span><br><span class=\"hljs-comment\">\t * check nested beans which might match the specified type as well.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Does consider objects created by FactoryBeans if the &quot;allowEagerInit&quot; flag is set,</span><br><span class=\"hljs-comment\">\t * which means that FactoryBeans will get initialized. If the object created by the</span><br><span class=\"hljs-comment\">\t * FactoryBean doesn&#x27;t match, the raw FactoryBean itself will be matched against the</span><br><span class=\"hljs-comment\">\t * type. If &quot;allowEagerInit&quot; is not set, only raw FactoryBeans will be checked</span><br><span class=\"hljs-comment\">\t * (which doesn&#x27;t require initialization of each FactoryBean).</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Does not consider any hierarchy this factory may participate in.</span><br><span class=\"hljs-comment\">\t * Use BeanFactoryUtils&#x27; &#123;<span class=\"hljs-doctag\">@code</span> beansOfTypeIncludingAncestors&#125;</span><br><span class=\"hljs-comment\">\t * to include beans in ancestor factories too.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Note: Does &lt;i&gt;not&lt;/i&gt; ignore singleton beans that have been registered</span><br><span class=\"hljs-comment\">\t * by other means than bean definitions.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;The Map returned by this method should always return bean names and</span><br><span class=\"hljs-comment\">\t * corresponding bean instances &lt;i&gt;in the order of definition&lt;/i&gt; in the</span><br><span class=\"hljs-comment\">\t * backend configuration, as far as possible.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@param</span> type the class or interface to match, or &#123;<span class=\"hljs-doctag\">@code</span> null&#125; for all concrete beans</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@param</span> includeNonSingletons whether to include prototype or scoped beans too</span><br><span class=\"hljs-comment\">\t * or just singletons (also applies to FactoryBeans)</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@param</span> allowEagerInit whether to initialize &lt;i&gt;lazy-init singletons&lt;/i&gt; and</span><br><span class=\"hljs-comment\">\t * &lt;i&gt;objects created by FactoryBeans&lt;/i&gt; (or by factory methods with a</span><br><span class=\"hljs-comment\">\t * &quot;factory-bean&quot; reference) for the type check. Note that FactoryBeans need to be</span><br><span class=\"hljs-comment\">\t * eagerly initialized to determine their type: So be aware that passing in &quot;true&quot;</span><br><span class=\"hljs-comment\">\t * for this flag will initialize FactoryBeans and &quot;factory-bean&quot; references.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@return</span> a Map with the matching beans, containing the bean names as</span><br><span class=\"hljs-comment\">\t * keys and the corresponding bean instances as values</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@throws</span> BeansException if a bean could not be created</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> FactoryBean#getObjectType</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> BeanFactoryUtils#beansOfTypeIncludingAncestors(ListableBeanFactory, Class, boolean, boolean)</span><br><span class=\"hljs-comment\">\t */</span><br>\t&lt;T&gt; <span class=\"hljs-function\">Map&lt;String, T&gt; <span class=\"hljs-title\">getBeansOfType</span><span class=\"hljs-params\">(<span class=\"hljs-meta\">@Nullable</span> Class&lt;T&gt; type, <span class=\"hljs-keyword\">boolean</span> includeNonSingletons, <span class=\"hljs-keyword\">boolean</span> allowEagerInit)</span></span><br><span class=\"hljs-function\">\t\t\t<span class=\"hljs-keyword\">throws</span> BeansException</span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Find all names of beans which are annotated with the supplied &#123;<span class=\"hljs-doctag\">@link</span> Annotation&#125;</span><br><span class=\"hljs-comment\">\t * type, without creating corresponding bean instances yet.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Note that this method considers objects created by FactoryBeans, which means</span><br><span class=\"hljs-comment\">\t * that FactoryBeans will get initialized in order to determine their object type.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@param</span> annotationType the type of annotation to look for</span><br><span class=\"hljs-comment\">\t * (at class, interface or factory method level of the specified bean)</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@return</span> the names of all matching beans</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@since</span> 4.0</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> #findAnnotationOnBean</span><br><span class=\"hljs-comment\">\t */</span><br>\tString[] getBeanNamesForAnnotation(Class&lt;? extends Annotation&gt; annotationType);<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Find all beans which are annotated with the supplied &#123;<span class=\"hljs-doctag\">@link</span> Annotation&#125; type,</span><br><span class=\"hljs-comment\">\t * returning a Map of bean names with corresponding bean instances.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Note that this method considers objects created by FactoryBeans, which means</span><br><span class=\"hljs-comment\">\t * that FactoryBeans will get initialized in order to determine their object type.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@param</span> annotationType the type of annotation to look for</span><br><span class=\"hljs-comment\">\t * (at class, interface or factory method level of the specified bean)</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@return</span> a Map with the matching beans, containing the bean names as</span><br><span class=\"hljs-comment\">\t * keys and the corresponding bean instances as values</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@throws</span> BeansException if a bean could not be created</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@since</span> 3.0</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> #findAnnotationOnBean</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\">Map&lt;String, Object&gt; <span class=\"hljs-title\">getBeansWithAnnotation</span><span class=\"hljs-params\">(Class&lt;? extends Annotation&gt; annotationType)</span> <span class=\"hljs-keyword\">throws</span> BeansException</span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Find an &#123;<span class=\"hljs-doctag\">@link</span> Annotation&#125; of &#123;<span class=\"hljs-doctag\">@code</span> annotationType&#125; on the specified bean,</span><br><span class=\"hljs-comment\">\t * traversing its interfaces and super classes if no annotation can be found on</span><br><span class=\"hljs-comment\">\t * the given class itself, as well as checking the bean&#x27;s factory method (if any).</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@param</span> beanName the name of the bean to look for annotations on</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@param</span> annotationType the type of annotation to look for</span><br><span class=\"hljs-comment\">\t * (at class, interface or factory method level of the specified bean)</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@return</span> the annotation of the given type if found, or &#123;<span class=\"hljs-doctag\">@code</span> null&#125; otherwise</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@throws</span> NoSuchBeanDefinitionException if there is no bean with the given name</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@since</span> 3.0</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> #getBeanNamesForAnnotation</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> #getBeansWithAnnotation</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-meta\">@Nullable</span><br>\t&lt;A extends Annotation&gt; <span class=\"hljs-function\">A <span class=\"hljs-title\">findAnnotationOnBean</span><span class=\"hljs-params\">(String beanName, Class&lt;A&gt; annotationType)</span></span><br><span class=\"hljs-function\">\t\t\t<span class=\"hljs-keyword\">throws</span> NoSuchBeanDefinitionException</span>;<br><br>&#125;<br></code></pre></td></tr></table></figure>\n\n<h3 id=\"ListableBeanFactory方法属性摘要\"><a href=\"#ListableBeanFactory方法属性摘要\" class=\"headerlink\" title=\"ListableBeanFactory方法属性摘要\"></a>ListableBeanFactory方法属性摘要</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">interface</span> <span class=\"hljs-title\">ListableBeanFactory</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">BeanFactory</span> </span>&#123;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">boolean</span> <span class=\"hljs-title\">containsBeanDefinition</span><span class=\"hljs-params\">(String beanName)</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">getBeanDefinitionCount</span><span class=\"hljs-params\">()</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t */</span><br>\tString[] getBeanDefinitionNames();<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t */</span><br>\tString[] getBeanNamesForType(ResolvableType type);<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t */</span><br>\tString[] getBeanNamesForType(ResolvableType type, <span class=\"hljs-keyword\">boolean</span> includeNonSingletons, <span class=\"hljs-keyword\">boolean</span> allowEagerInit);<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t */</span><br>\tString[] getBeanNamesForType(<span class=\"hljs-meta\">@Nullable</span> Class&lt;?&gt; type);<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t */</span><br>\tString[] getBeanNamesForType(<span class=\"hljs-meta\">@Nullable</span> Class&lt;?&gt; type, <span class=\"hljs-keyword\">boolean</span> includeNonSingletons, <span class=\"hljs-keyword\">boolean</span> allowEagerInit);<br><br><br>\t&lt;T&gt; <span class=\"hljs-function\">Map&lt;String, T&gt; <span class=\"hljs-title\">getBeansOfType</span><span class=\"hljs-params\">(<span class=\"hljs-meta\">@Nullable</span> Class&lt;T&gt; type)</span> <span class=\"hljs-keyword\">throws</span> BeansException</span>;<br><br><br>\t&lt;T&gt; <span class=\"hljs-function\">Map&lt;String, T&gt; <span class=\"hljs-title\">getBeansOfType</span><span class=\"hljs-params\">(<span class=\"hljs-meta\">@Nullable</span> Class&lt;T&gt; type, <span class=\"hljs-keyword\">boolean</span> includeNonSingletons, <span class=\"hljs-keyword\">boolean</span> allowEagerInit)</span></span><br><span class=\"hljs-function\">\t\t\t<span class=\"hljs-keyword\">throws</span> BeansException</span>;<br><br><br>\tString[] getBeanNamesForAnnotation(Class&lt;? extends Annotation&gt; annotationType);<br><br><br>\t<span class=\"hljs-function\">Map&lt;String, Object&gt; <span class=\"hljs-title\">getBeansWithAnnotation</span><span class=\"hljs-params\">(Class&lt;? extends Annotation&gt; annotationType)</span> <span class=\"hljs-keyword\">throws</span> BeansException</span>;<br><br><br>\t<span class=\"hljs-meta\">@Nullable</span><br>\t&lt;A extends Annotation&gt; <span class=\"hljs-function\">A <span class=\"hljs-title\">findAnnotationOnBean</span><span class=\"hljs-params\">(String beanName, Class&lt;A&gt; annotationType)</span></span><br><span class=\"hljs-function\">\t\t\t<span class=\"hljs-keyword\">throws</span> NoSuchBeanDefinitionException</span>;<br><br>&#125;<br></code></pre></td></tr></table></figure>\n\n<h2 id=\"1-4-ApplicationContext接口\"><a href=\"#1-4-ApplicationContext接口\" class=\"headerlink\" title=\"1.4 ApplicationContext接口\"></a>1.4 ApplicationContext接口</h2><h3 id=\"ApplicationContext接口解析\"><a href=\"#ApplicationContext接口解析\" class=\"headerlink\" title=\"ApplicationContext接口解析\"></a>ApplicationContext接口解析</h3><ul>\n<li>相比于BeanFactory,ApplicationContext是高配版的Ioc容器，其在BeanFactory的基础上实现了更加复杂的扩展功能</li>\n<li>ListableBeanFactory, HierarchicalBeanFactory都是BeanFactory的子接口，ApplicationContext继承了这两个接口，ApplicationContext进一步扩展了BeanFactory接口的功能</li>\n<li>. . .</li>\n</ul>\n<h3 id=\"完整版源码：-3\"><a href=\"#完整版源码：-3\" class=\"headerlink\" title=\"完整版源码：\"></a>完整版源码：</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\"> * Copyright 2002-2014 the original author or authors.</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span><br><span class=\"hljs-comment\"> * you may not use this file except in compliance with the License.</span><br><span class=\"hljs-comment\"> * You may obtain a copy of the License at</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> *      https://www.apache.org/licenses/LICENSE-2.0</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> * Unless required by applicable law or agreed to in writing, software</span><br><span class=\"hljs-comment\"> * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span><br><span class=\"hljs-comment\"> * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span><br><span class=\"hljs-comment\"> * See the License for the specific language governing permissions and</span><br><span class=\"hljs-comment\"> * limitations under the License.</span><br><span class=\"hljs-comment\"> */</span><br><br><span class=\"hljs-keyword\">package</span> org.springframework.context;<br><br><span class=\"hljs-keyword\">import</span> org.springframework.beans.factory.HierarchicalBeanFactory;<br><span class=\"hljs-keyword\">import</span> org.springframework.beans.factory.ListableBeanFactory;<br><span class=\"hljs-keyword\">import</span> org.springframework.beans.factory.config.AutowireCapableBeanFactory;<br><span class=\"hljs-keyword\">import</span> org.springframework.core.env.EnvironmentCapable;<br><span class=\"hljs-keyword\">import</span> org.springframework.core.io.support.ResourcePatternResolver;<br><span class=\"hljs-keyword\">import</span> org.springframework.lang.Nullable;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * Central interface to provide configuration for an application.</span><br><span class=\"hljs-comment\"> * This is read-only while the application is running, but may be</span><br><span class=\"hljs-comment\"> * reloaded if the implementation supports this.</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> * &lt;p&gt;An ApplicationContext provides:</span><br><span class=\"hljs-comment\"> * &lt;ul&gt;</span><br><span class=\"hljs-comment\"> * &lt;li&gt;Bean factory methods for accessing application components.</span><br><span class=\"hljs-comment\"> * Inherited from &#123;<span class=\"hljs-doctag\">@link</span> org.springframework.beans.factory.ListableBeanFactory&#125;.</span><br><span class=\"hljs-comment\"> * &lt;li&gt;The ability to load file resources in a generic fashion.</span><br><span class=\"hljs-comment\"> * Inherited from the &#123;<span class=\"hljs-doctag\">@link</span> org.springframework.core.io.ResourceLoader&#125; interface.</span><br><span class=\"hljs-comment\"> * &lt;li&gt;The ability to publish events to registered listeners.</span><br><span class=\"hljs-comment\"> * Inherited from the &#123;<span class=\"hljs-doctag\">@link</span> ApplicationEventPublisher&#125; interface.</span><br><span class=\"hljs-comment\"> * &lt;li&gt;The ability to resolve messages, supporting internationalization.</span><br><span class=\"hljs-comment\"> * Inherited from the &#123;<span class=\"hljs-doctag\">@link</span> MessageSource&#125; interface.</span><br><span class=\"hljs-comment\"> * &lt;li&gt;Inheritance from a parent context. Definitions in a descendant context</span><br><span class=\"hljs-comment\"> * will always take priority. This means, for example, that a single parent</span><br><span class=\"hljs-comment\"> * context can be used by an entire web application, while each servlet has</span><br><span class=\"hljs-comment\"> * its own child context that is independent of that of any other servlet.</span><br><span class=\"hljs-comment\"> * &lt;/ul&gt;</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> * &lt;p&gt;In addition to standard &#123;<span class=\"hljs-doctag\">@link</span> org.springframework.beans.factory.BeanFactory&#125;</span><br><span class=\"hljs-comment\"> * lifecycle capabilities, ApplicationContext implementations detect and invoke</span><br><span class=\"hljs-comment\"> * &#123;<span class=\"hljs-doctag\">@link</span> ApplicationContextAware&#125; beans as well as &#123;<span class=\"hljs-doctag\">@link</span> ResourceLoaderAware&#125;,</span><br><span class=\"hljs-comment\"> * &#123;<span class=\"hljs-doctag\">@link</span> ApplicationEventPublisherAware&#125; and &#123;<span class=\"hljs-doctag\">@link</span> MessageSourceAware&#125; beans.</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> Rod Johnson</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> Juergen Hoeller</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@see</span> ConfigurableApplicationContext</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@see</span> org.springframework.beans.factory.BeanFactory</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@see</span> org.springframework.core.io.ResourceLoader</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">interface</span> <span class=\"hljs-title\">ApplicationContext</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">EnvironmentCapable</span>, <span class=\"hljs-title\">ListableBeanFactory</span>, <span class=\"hljs-title\">HierarchicalBeanFactory</span>,</span><br><span class=\"hljs-class\">\t\t<span class=\"hljs-title\">MessageSource</span>, <span class=\"hljs-title\">ApplicationEventPublisher</span>, <span class=\"hljs-title\">ResourcePatternResolver</span> </span>&#123;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return the unique id of this application context.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@return</span> the unique id of the context, or &#123;<span class=\"hljs-doctag\">@code</span> null&#125; if none</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-meta\">@Nullable</span><br>\t<span class=\"hljs-function\">String <span class=\"hljs-title\">getId</span><span class=\"hljs-params\">()</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return a name for the deployed application that this context belongs to.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@return</span> a name for the deployed application, or the empty String by default</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\">String <span class=\"hljs-title\">getApplicationName</span><span class=\"hljs-params\">()</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return a friendly name for this context.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@return</span> a display name for this context (never &#123;<span class=\"hljs-doctag\">@code</span> null&#125;)</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\">String <span class=\"hljs-title\">getDisplayName</span><span class=\"hljs-params\">()</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return the timestamp when this context was first loaded.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@return</span> the timestamp (ms) when this context was first loaded</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">long</span> <span class=\"hljs-title\">getStartupDate</span><span class=\"hljs-params\">()</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return the parent context, or &#123;<span class=\"hljs-doctag\">@code</span> null&#125; if there is no parent</span><br><span class=\"hljs-comment\">\t * and this is the root of the context hierarchy.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@return</span> the parent context, or &#123;<span class=\"hljs-doctag\">@code</span> null&#125; if there is no parent</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-meta\">@Nullable</span><br>\t<span class=\"hljs-function\">ApplicationContext <span class=\"hljs-title\">getParent</span><span class=\"hljs-params\">()</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Expose AutowireCapableBeanFactory functionality for this context.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;This is not typically used by application code, except for the purpose of</span><br><span class=\"hljs-comment\">\t * initializing bean instances that live outside of the application context,</span><br><span class=\"hljs-comment\">\t * applying the Spring bean lifecycle (fully or partly) to them.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Alternatively, the internal BeanFactory exposed by the</span><br><span class=\"hljs-comment\">\t * &#123;<span class=\"hljs-doctag\">@link</span> ConfigurableApplicationContext&#125; interface offers access to the</span><br><span class=\"hljs-comment\">\t * &#123;<span class=\"hljs-doctag\">@link</span> AutowireCapableBeanFactory&#125; interface too. The present method mainly</span><br><span class=\"hljs-comment\">\t * serves as a convenient, specific facility on the ApplicationContext interface.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;&lt;b&gt;<span class=\"hljs-doctag\">NOTE:</span> As of 4.2, this method will consistently throw IllegalStateException</span><br><span class=\"hljs-comment\">\t * after the application context has been closed.&lt;/b&gt; In current Spring Framework</span><br><span class=\"hljs-comment\">\t * versions, only refreshable application contexts behave that way; as of 4.2,</span><br><span class=\"hljs-comment\">\t * all application context implementations will be required to comply.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@return</span> the AutowireCapableBeanFactory for this context</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@throws</span> IllegalStateException if the context does not support the</span><br><span class=\"hljs-comment\">\t * &#123;<span class=\"hljs-doctag\">@link</span> AutowireCapableBeanFactory&#125; interface, or does not hold an</span><br><span class=\"hljs-comment\">\t * autowire-capable bean factory yet (e.g. if &#123;<span class=\"hljs-doctag\">@code</span> refresh()&#125; has</span><br><span class=\"hljs-comment\">\t * never been called), or if the context has been closed already</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> ConfigurableApplicationContext#refresh()</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> ConfigurableApplicationContext#getBeanFactory()</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\">AutowireCapableBeanFactory <span class=\"hljs-title\">getAutowireCapableBeanFactory</span><span class=\"hljs-params\">()</span> <span class=\"hljs-keyword\">throws</span> IllegalStateException</span>;<br><br>&#125;<br></code></pre></td></tr></table></figure>\n<h3 id=\"ApplicationContext方法属性摘要\"><a href=\"#ApplicationContext方法属性摘要\" class=\"headerlink\" title=\"ApplicationContext方法属性摘要\"></a>ApplicationContext方法属性摘要</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">interface</span> <span class=\"hljs-title\">ApplicationContext</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">EnvironmentCapable</span>, <span class=\"hljs-title\">ListableBeanFactory</span>, <span class=\"hljs-title\">HierarchicalBeanFactory</span>,</span><br><span class=\"hljs-class\">\t\t<span class=\"hljs-title\">MessageSource</span>, <span class=\"hljs-title\">ApplicationEventPublisher</span>, <span class=\"hljs-title\">ResourcePatternResolver</span> </span>&#123;<br><br>\t<span class=\"hljs-meta\">@Nullable</span><br>\t<span class=\"hljs-function\">String <span class=\"hljs-title\">getId</span><span class=\"hljs-params\">()</span></span>;<br><br><br>\t<span class=\"hljs-function\">String <span class=\"hljs-title\">getApplicationName</span><span class=\"hljs-params\">()</span></span>;<br><br><br>\t<span class=\"hljs-function\">String <span class=\"hljs-title\">getDisplayName</span><span class=\"hljs-params\">()</span></span>;<br><br><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">long</span> <span class=\"hljs-title\">getStartupDate</span><span class=\"hljs-params\">()</span></span>;<br><br><br>\t<span class=\"hljs-meta\">@Nullable</span><br>\t<span class=\"hljs-function\">ApplicationContext <span class=\"hljs-title\">getParent</span><span class=\"hljs-params\">()</span></span>;<br><br>\t<span class=\"hljs-function\">AutowireCapableBeanFactory <span class=\"hljs-title\">getAutowireCapableBeanFactory</span><span class=\"hljs-params\">()</span> <span class=\"hljs-keyword\">throws</span> IllegalStateException</span>;<br><br>&#125;<br></code></pre></td></tr></table></figure>\n\n<h2 id=\"1-5-BeanDefination接口\"><a href=\"#1-5-BeanDefination接口\" class=\"headerlink\" title=\"1.5 BeanDefination接口\"></a>1.5 BeanDefination接口</h2><h3 id=\"BeanDefination接口定义解析\"><a href=\"#BeanDefination接口定义解析\" class=\"headerlink\" title=\"BeanDefination接口定义解析\"></a>BeanDefination接口定义解析</h3><ul>\n<li>BeanDefination用于管理Ioc容器中JavaBean与JavaBean之间的依赖关系，其抽象了Java开发人员对于JavaBean的定义</li>\n<li>Spring将开发人员定义的JavaBean的数据结构转化为内存中的BeanDefination数据结构进行维护</li>\n</ul>\n<h3 id=\"完整版源码：-4\"><a href=\"#完整版源码：-4\" class=\"headerlink\" title=\"完整版源码：\"></a>完整版源码：</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br><span class=\"line\">252</span><br><span class=\"line\">253</span><br><span class=\"line\">254</span><br><span class=\"line\">255</span><br><span class=\"line\">256</span><br><span class=\"line\">257</span><br><span class=\"line\">258</span><br><span class=\"line\">259</span><br><span class=\"line\">260</span><br><span class=\"line\">261</span><br><span class=\"line\">262</span><br><span class=\"line\">263</span><br><span class=\"line\">264</span><br><span class=\"line\">265</span><br><span class=\"line\">266</span><br><span class=\"line\">267</span><br><span class=\"line\">268</span><br><span class=\"line\">269</span><br><span class=\"line\">270</span><br><span class=\"line\">271</span><br><span class=\"line\">272</span><br><span class=\"line\">273</span><br><span class=\"line\">274</span><br><span class=\"line\">275</span><br><span class=\"line\">276</span><br><span class=\"line\">277</span><br><span class=\"line\">278</span><br><span class=\"line\">279</span><br><span class=\"line\">280</span><br><span class=\"line\">281</span><br><span class=\"line\">282</span><br><span class=\"line\">283</span><br><span class=\"line\">284</span><br><span class=\"line\">285</span><br><span class=\"line\">286</span><br><span class=\"line\">287</span><br><span class=\"line\">288</span><br><span class=\"line\">289</span><br><span class=\"line\">290</span><br><span class=\"line\">291</span><br><span class=\"line\">292</span><br><span class=\"line\">293</span><br><span class=\"line\">294</span><br><span class=\"line\">295</span><br><span class=\"line\">296</span><br><span class=\"line\">297</span><br><span class=\"line\">298</span><br><span class=\"line\">299</span><br><span class=\"line\">300</span><br><span class=\"line\">301</span><br><span class=\"line\">302</span><br><span class=\"line\">303</span><br><span class=\"line\">304</span><br><span class=\"line\">305</span><br><span class=\"line\">306</span><br><span class=\"line\">307</span><br><span class=\"line\">308</span><br><span class=\"line\">309</span><br><span class=\"line\">310</span><br><span class=\"line\">311</span><br><span class=\"line\">312</span><br><span class=\"line\">313</span><br><span class=\"line\">314</span><br><span class=\"line\">315</span><br><span class=\"line\">316</span><br><span class=\"line\">317</span><br><span class=\"line\">318</span><br><span class=\"line\">319</span><br><span class=\"line\">320</span><br><span class=\"line\">321</span><br><span class=\"line\">322</span><br><span class=\"line\">323</span><br><span class=\"line\">324</span><br><span class=\"line\">325</span><br><span class=\"line\">326</span><br><span class=\"line\">327</span><br><span class=\"line\">328</span><br><span class=\"line\">329</span><br><span class=\"line\">330</span><br><span class=\"line\">331</span><br><span class=\"line\">332</span><br><span class=\"line\">333</span><br><span class=\"line\">334</span><br><span class=\"line\">335</span><br><span class=\"line\">336</span><br><span class=\"line\">337</span><br><span class=\"line\">338</span><br><span class=\"line\">339</span><br><span class=\"line\">340</span><br><span class=\"line\">341</span><br><span class=\"line\">342</span><br><span class=\"line\">343</span><br><span class=\"line\">344</span><br><span class=\"line\">345</span><br><span class=\"line\">346</span><br><span class=\"line\">347</span><br><span class=\"line\">348</span><br><span class=\"line\">349</span><br><span class=\"line\">350</span><br><span class=\"line\">351</span><br><span class=\"line\">352</span><br><span class=\"line\">353</span><br><span class=\"line\">354</span><br><span class=\"line\">355</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\"> * Copyright 2002-2019 the original author or authors.</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span><br><span class=\"hljs-comment\"> * you may not use this file except in compliance with the License.</span><br><span class=\"hljs-comment\"> * You may obtain a copy of the License at</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> *      https://www.apache.org/licenses/LICENSE-2.0</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> * Unless required by applicable law or agreed to in writing, software</span><br><span class=\"hljs-comment\"> * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span><br><span class=\"hljs-comment\"> * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span><br><span class=\"hljs-comment\"> * See the License for the specific language governing permissions and</span><br><span class=\"hljs-comment\"> * limitations under the License.</span><br><span class=\"hljs-comment\"> */</span><br><br><span class=\"hljs-keyword\">package</span> org.springframework.beans.factory.config;<br><br><span class=\"hljs-keyword\">import</span> org.springframework.beans.BeanMetadataElement;<br><span class=\"hljs-keyword\">import</span> org.springframework.beans.MutablePropertyValues;<br><span class=\"hljs-keyword\">import</span> org.springframework.core.AttributeAccessor;<br><span class=\"hljs-keyword\">import</span> org.springframework.core.ResolvableType;<br><span class=\"hljs-keyword\">import</span> org.springframework.lang.Nullable;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * A BeanDefinition describes a bean instance, which has property values,</span><br><span class=\"hljs-comment\"> * constructor argument values, and further information supplied by</span><br><span class=\"hljs-comment\"> * concrete implementations.</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> * &lt;p&gt;This is just a minimal interface: The main intention is to allow a</span><br><span class=\"hljs-comment\"> * &#123;<span class=\"hljs-doctag\">@link</span> BeanFactoryPostProcessor&#125; to introspect and modify property values</span><br><span class=\"hljs-comment\"> * and other bean metadata.</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> Juergen Hoeller</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> Rob Harrop</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@since</span> 19.03.2004</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@see</span> ConfigurableListableBeanFactory#getBeanDefinition</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@see</span> org.springframework.beans.factory.support.RootBeanDefinition</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@see</span> org.springframework.beans.factory.support.ChildBeanDefinition</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">interface</span> <span class=\"hljs-title\">BeanDefinition</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">AttributeAccessor</span>, <span class=\"hljs-title\">BeanMetadataElement</span> </span>&#123;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Scope identifier for the standard singleton scope: &quot;singleton&quot;.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Note that extended bean factories might support further scopes.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> #setScope</span><br><span class=\"hljs-comment\">\t */</span><br>\tString SCOPE_SINGLETON = ConfigurableBeanFactory.SCOPE_SINGLETON;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Scope identifier for the standard prototype scope: &quot;prototype&quot;.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Note that extended bean factories might support further scopes.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> #setScope</span><br><span class=\"hljs-comment\">\t */</span><br>\tString SCOPE_PROTOTYPE = ConfigurableBeanFactory.SCOPE_PROTOTYPE;<br><br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Role hint indicating that a &#123;<span class=\"hljs-doctag\">@code</span> BeanDefinition&#125; is a major part</span><br><span class=\"hljs-comment\">\t * of the application. Typically corresponds to a user-defined bean.</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-keyword\">int</span> ROLE_APPLICATION = <span class=\"hljs-number\">0</span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Role hint indicating that a &#123;<span class=\"hljs-doctag\">@code</span> BeanDefinition&#125; is a supporting</span><br><span class=\"hljs-comment\">\t * part of some larger configuration, typically an outer</span><br><span class=\"hljs-comment\">\t * &#123;<span class=\"hljs-doctag\">@link</span> org.springframework.beans.factory.parsing.ComponentDefinition&#125;.</span><br><span class=\"hljs-comment\">\t * &#123;<span class=\"hljs-doctag\">@code</span> SUPPORT&#125; beans are considered important enough to be aware</span><br><span class=\"hljs-comment\">\t * of when looking more closely at a particular</span><br><span class=\"hljs-comment\">\t * &#123;<span class=\"hljs-doctag\">@link</span> org.springframework.beans.factory.parsing.ComponentDefinition&#125;,</span><br><span class=\"hljs-comment\">\t * but not when looking at the overall configuration of an application.</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-keyword\">int</span> ROLE_SUPPORT = <span class=\"hljs-number\">1</span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Role hint indicating that a &#123;<span class=\"hljs-doctag\">@code</span> BeanDefinition&#125; is providing an</span><br><span class=\"hljs-comment\">\t * entirely background role and has no relevance to the end-user. This hint is</span><br><span class=\"hljs-comment\">\t * used when registering beans that are completely part of the internal workings</span><br><span class=\"hljs-comment\">\t * of a &#123;<span class=\"hljs-doctag\">@link</span> org.springframework.beans.factory.parsing.ComponentDefinition&#125;.</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-keyword\">int</span> ROLE_INFRASTRUCTURE = <span class=\"hljs-number\">2</span>;<br><br><br>\t<span class=\"hljs-comment\">// Modifiable attributes</span><br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Set the name of the parent definition of this bean definition, if any.</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setParentName</span><span class=\"hljs-params\">(<span class=\"hljs-meta\">@Nullable</span> String parentName)</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return the name of the parent definition of this bean definition, if any.</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-meta\">@Nullable</span><br>\t<span class=\"hljs-function\">String <span class=\"hljs-title\">getParentName</span><span class=\"hljs-params\">()</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Specify the bean class name of this bean definition.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;The class name can be modified during bean factory post-processing,</span><br><span class=\"hljs-comment\">\t * typically replacing the original class name with a parsed variant of it.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> #setParentName</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> #setFactoryBeanName</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> #setFactoryMethodName</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setBeanClassName</span><span class=\"hljs-params\">(<span class=\"hljs-meta\">@Nullable</span> String beanClassName)</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return the current bean class name of this bean definition.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Note that this does not have to be the actual class name used at runtime, in</span><br><span class=\"hljs-comment\">\t * case of a child definition overriding/inheriting the class name from its parent.</span><br><span class=\"hljs-comment\">\t * Also, this may just be the class that a factory method is called on, or it may</span><br><span class=\"hljs-comment\">\t * even be empty in case of a factory bean reference that a method is called on.</span><br><span class=\"hljs-comment\">\t * Hence, do &lt;i&gt;not&lt;/i&gt; consider this to be the definitive bean type at runtime but</span><br><span class=\"hljs-comment\">\t * rather only use it for parsing purposes at the individual bean definition level.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> #getParentName()</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> #getFactoryBeanName()</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> #getFactoryMethodName()</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-meta\">@Nullable</span><br>\t<span class=\"hljs-function\">String <span class=\"hljs-title\">getBeanClassName</span><span class=\"hljs-params\">()</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Override the target scope of this bean, specifying a new scope name.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> #SCOPE_SINGLETON</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> #SCOPE_PROTOTYPE</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setScope</span><span class=\"hljs-params\">(<span class=\"hljs-meta\">@Nullable</span> String scope)</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return the name of the current target scope for this bean,</span><br><span class=\"hljs-comment\">\t * or &#123;<span class=\"hljs-doctag\">@code</span> null&#125; if not known yet.</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-meta\">@Nullable</span><br>\t<span class=\"hljs-function\">String <span class=\"hljs-title\">getScope</span><span class=\"hljs-params\">()</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Set whether this bean should be lazily initialized.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;If &#123;<span class=\"hljs-doctag\">@code</span> false&#125;, the bean will get instantiated on startup by bean</span><br><span class=\"hljs-comment\">\t * factories that perform eager initialization of singletons.</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setLazyInit</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">boolean</span> lazyInit)</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return whether this bean should be lazily initialized, i.e. not</span><br><span class=\"hljs-comment\">\t * eagerly instantiated on startup. Only applicable to a singleton bean.</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">boolean</span> <span class=\"hljs-title\">isLazyInit</span><span class=\"hljs-params\">()</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Set the names of the beans that this bean depends on being initialized.</span><br><span class=\"hljs-comment\">\t * The bean factory will guarantee that these beans get initialized first.</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setDependsOn</span><span class=\"hljs-params\">(<span class=\"hljs-meta\">@Nullable</span> String... dependsOn)</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return the bean names that this bean depends on.</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-meta\">@Nullable</span><br>\tString[] getDependsOn();<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Set whether this bean is a candidate for getting autowired into some other bean.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Note that this flag is designed to only affect type-based autowiring.</span><br><span class=\"hljs-comment\">\t * It does not affect explicit references by name, which will get resolved even</span><br><span class=\"hljs-comment\">\t * if the specified bean is not marked as an autowire candidate. As a consequence,</span><br><span class=\"hljs-comment\">\t * autowiring by name will nevertheless inject a bean if the name matches.</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setAutowireCandidate</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">boolean</span> autowireCandidate)</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return whether this bean is a candidate for getting autowired into some other bean.</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">boolean</span> <span class=\"hljs-title\">isAutowireCandidate</span><span class=\"hljs-params\">()</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Set whether this bean is a primary autowire candidate.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;If this value is &#123;<span class=\"hljs-doctag\">@code</span> true&#125; for exactly one bean among multiple</span><br><span class=\"hljs-comment\">\t * matching candidates, it will serve as a tie-breaker.</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setPrimary</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">boolean</span> primary)</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return whether this bean is a primary autowire candidate.</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">boolean</span> <span class=\"hljs-title\">isPrimary</span><span class=\"hljs-params\">()</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Specify the factory bean to use, if any.</span><br><span class=\"hljs-comment\">\t * This the name of the bean to call the specified factory method on.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> #setFactoryMethodName</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setFactoryBeanName</span><span class=\"hljs-params\">(<span class=\"hljs-meta\">@Nullable</span> String factoryBeanName)</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return the factory bean name, if any.</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-meta\">@Nullable</span><br>\t<span class=\"hljs-function\">String <span class=\"hljs-title\">getFactoryBeanName</span><span class=\"hljs-params\">()</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Specify a factory method, if any. This method will be invoked with</span><br><span class=\"hljs-comment\">\t * constructor arguments, or with no arguments if none are specified.</span><br><span class=\"hljs-comment\">\t * The method will be invoked on the specified factory bean, if any,</span><br><span class=\"hljs-comment\">\t * or otherwise as a static method on the local bean class.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> #setFactoryBeanName</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> #setBeanClassName</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setFactoryMethodName</span><span class=\"hljs-params\">(<span class=\"hljs-meta\">@Nullable</span> String factoryMethodName)</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return a factory method, if any.</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-meta\">@Nullable</span><br>\t<span class=\"hljs-function\">String <span class=\"hljs-title\">getFactoryMethodName</span><span class=\"hljs-params\">()</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return the constructor argument values for this bean.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;The returned instance can be modified during bean factory post-processing.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@return</span> the ConstructorArgumentValues object (never &#123;<span class=\"hljs-doctag\">@code</span> null&#125;)</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\">ConstructorArgumentValues <span class=\"hljs-title\">getConstructorArgumentValues</span><span class=\"hljs-params\">()</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return if there are constructor argument values defined for this bean.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@since</span> 5.0.2</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">default</span> <span class=\"hljs-keyword\">boolean</span> <span class=\"hljs-title\">hasConstructorArgumentValues</span><span class=\"hljs-params\">()</span> </span>&#123;<br>\t\t<span class=\"hljs-keyword\">return</span> !getConstructorArgumentValues().isEmpty();<br>\t&#125;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return the property values to be applied to a new instance of the bean.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;The returned instance can be modified during bean factory post-processing.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@return</span> the MutablePropertyValues object (never &#123;<span class=\"hljs-doctag\">@code</span> null&#125;)</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\">MutablePropertyValues <span class=\"hljs-title\">getPropertyValues</span><span class=\"hljs-params\">()</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return if there are property values values defined for this bean.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@since</span> 5.0.2</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">default</span> <span class=\"hljs-keyword\">boolean</span> <span class=\"hljs-title\">hasPropertyValues</span><span class=\"hljs-params\">()</span> </span>&#123;<br>\t\t<span class=\"hljs-keyword\">return</span> !getPropertyValues().isEmpty();<br>\t&#125;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Set the name of the initializer method.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@since</span> 5.1</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setInitMethodName</span><span class=\"hljs-params\">(<span class=\"hljs-meta\">@Nullable</span> String initMethodName)</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return the name of the initializer method.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@since</span> 5.1</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-meta\">@Nullable</span><br>\t<span class=\"hljs-function\">String <span class=\"hljs-title\">getInitMethodName</span><span class=\"hljs-params\">()</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Set the name of the destroy method.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@since</span> 5.1</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setDestroyMethodName</span><span class=\"hljs-params\">(<span class=\"hljs-meta\">@Nullable</span> String destroyMethodName)</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return the name of the destroy method.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@since</span> 5.1</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-meta\">@Nullable</span><br>\t<span class=\"hljs-function\">String <span class=\"hljs-title\">getDestroyMethodName</span><span class=\"hljs-params\">()</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Set the role hint for this &#123;<span class=\"hljs-doctag\">@code</span> BeanDefinition&#125;. The role hint</span><br><span class=\"hljs-comment\">\t * provides the frameworks as well as tools with an indication of</span><br><span class=\"hljs-comment\">\t * the role and importance of a particular &#123;<span class=\"hljs-doctag\">@code</span> BeanDefinition&#125;.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@since</span> 5.1</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> #ROLE_APPLICATION</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> #ROLE_SUPPORT</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> #ROLE_INFRASTRUCTURE</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setRole</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">int</span> role)</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Get the role hint for this &#123;<span class=\"hljs-doctag\">@code</span> BeanDefinition&#125;. The role hint</span><br><span class=\"hljs-comment\">\t * provides the frameworks as well as tools with an indication of</span><br><span class=\"hljs-comment\">\t * the role and importance of a particular &#123;<span class=\"hljs-doctag\">@code</span> BeanDefinition&#125;.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> #ROLE_APPLICATION</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> #ROLE_SUPPORT</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> #ROLE_INFRASTRUCTURE</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">getRole</span><span class=\"hljs-params\">()</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Set a human-readable description of this bean definition.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@since</span> 5.1</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setDescription</span><span class=\"hljs-params\">(<span class=\"hljs-meta\">@Nullable</span> String description)</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return a human-readable description of this bean definition.</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-meta\">@Nullable</span><br>\t<span class=\"hljs-function\">String <span class=\"hljs-title\">getDescription</span><span class=\"hljs-params\">()</span></span>;<br><br><br>\t<span class=\"hljs-comment\">// Read-only attributes</span><br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return a resolvable type for this bean definition,</span><br><span class=\"hljs-comment\">\t * based on the bean class or other specific metadata.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;This is typically fully resolved on a runtime-merged bean definition</span><br><span class=\"hljs-comment\">\t * but not necessarily on a configuration-time definition instance.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@return</span> the resolvable type (potentially &#123;<span class=\"hljs-doctag\">@link</span> ResolvableType#NONE&#125;)</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@since</span> 5.2</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> ConfigurableBeanFactory#getMergedBeanDefinition</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\">ResolvableType <span class=\"hljs-title\">getResolvableType</span><span class=\"hljs-params\">()</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return whether this a &lt;b&gt;Singleton&lt;/b&gt;, with a single, shared instance</span><br><span class=\"hljs-comment\">\t * returned on all calls.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> #SCOPE_SINGLETON</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">boolean</span> <span class=\"hljs-title\">isSingleton</span><span class=\"hljs-params\">()</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return whether this a &lt;b&gt;Prototype&lt;/b&gt;, with an independent instance</span><br><span class=\"hljs-comment\">\t * returned for each call.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@since</span> 3.0</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> #SCOPE_PROTOTYPE</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">boolean</span> <span class=\"hljs-title\">isPrototype</span><span class=\"hljs-params\">()</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return whether this bean is &quot;abstract&quot;, that is, not meant to be instantiated.</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">boolean</span> <span class=\"hljs-title\">isAbstract</span><span class=\"hljs-params\">()</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return a description of the resource that this bean definition</span><br><span class=\"hljs-comment\">\t * came from (for the purpose of showing context in case of errors).</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-meta\">@Nullable</span><br>\t<span class=\"hljs-function\">String <span class=\"hljs-title\">getResourceDescription</span><span class=\"hljs-params\">()</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return the originating BeanDefinition, or &#123;<span class=\"hljs-doctag\">@code</span> null&#125; if none.</span><br><span class=\"hljs-comment\">\t * Allows for retrieving the decorated bean definition, if any.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Note that this method returns the immediate originator. Iterate through the</span><br><span class=\"hljs-comment\">\t * originator chain to find the original BeanDefinition as defined by the user.</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-meta\">@Nullable</span><br>\t<span class=\"hljs-function\">BeanDefinition <span class=\"hljs-title\">getOriginatingBeanDefinition</span><span class=\"hljs-params\">()</span></span>;<br><br>&#125;<br></code></pre></td></tr></table></figure>\n<h3 id=\"BeanDefination方法属性摘要\"><a href=\"#BeanDefination方法属性摘要\" class=\"headerlink\" title=\"BeanDefination方法属性摘要\"></a>BeanDefination方法属性摘要</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">interface</span> <span class=\"hljs-title\">BeanDefinition</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">AttributeAccessor</span>, <span class=\"hljs-title\">BeanMetadataElement</span> </span>&#123;<br><br>\tString SCOPE_SINGLETON = ConfigurableBeanFactory.SCOPE_SINGLETON;<br><br>\tString SCOPE_PROTOTYPE = ConfigurableBeanFactory.SCOPE_PROTOTYPE;<br><br>\t<span class=\"hljs-keyword\">int</span> ROLE_APPLICATION = <span class=\"hljs-number\">0</span>;<br><br><br>\t<span class=\"hljs-keyword\">int</span> ROLE_SUPPORT = <span class=\"hljs-number\">1</span>;<br><br>    <span class=\"hljs-comment\">// infrastructure</span><br>\t<span class=\"hljs-keyword\">int</span> ROLE_INFRASTRUCTURE = <span class=\"hljs-number\">2</span>;<br><br><br>\t<span class=\"hljs-comment\">// Modifiable attributes</span><br><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setParentName</span><span class=\"hljs-params\">(<span class=\"hljs-meta\">@Nullable</span> String parentName)</span></span>;<br><br><br>\t<span class=\"hljs-meta\">@Nullable</span><br>\t<span class=\"hljs-function\">String <span class=\"hljs-title\">getParentName</span><span class=\"hljs-params\">()</span></span>;<br><br><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setBeanClassName</span><span class=\"hljs-params\">(<span class=\"hljs-meta\">@Nullable</span> String beanClassName)</span></span>;<br><br><br>\t<span class=\"hljs-meta\">@Nullable</span><br>\t<span class=\"hljs-function\">String <span class=\"hljs-title\">getBeanClassName</span><span class=\"hljs-params\">()</span></span>;<br><br><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setScope</span><span class=\"hljs-params\">(<span class=\"hljs-meta\">@Nullable</span> String scope)</span></span>;<br><br><br>\t<span class=\"hljs-meta\">@Nullable</span><br>\t<span class=\"hljs-function\">String <span class=\"hljs-title\">getScope</span><span class=\"hljs-params\">()</span></span>;<br><br><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setLazyInit</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">boolean</span> lazyInit)</span></span>;<br><br><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">boolean</span> <span class=\"hljs-title\">isLazyInit</span><span class=\"hljs-params\">()</span></span>;<br><br><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setDependsOn</span><span class=\"hljs-params\">(<span class=\"hljs-meta\">@Nullable</span> String... dependsOn)</span></span>;<br><br><br>\t<span class=\"hljs-meta\">@Nullable</span><br>\tString[] getDependsOn();<br><br><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setAutowireCandidate</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">boolean</span> autowireCandidate)</span></span>;<br><br><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">boolean</span> <span class=\"hljs-title\">isAutowireCandidate</span><span class=\"hljs-params\">()</span></span>;<br><br><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setPrimary</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">boolean</span> primary)</span></span>;<br><br><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">boolean</span> <span class=\"hljs-title\">isPrimary</span><span class=\"hljs-params\">()</span></span>;<br><br><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setFactoryBeanName</span><span class=\"hljs-params\">(<span class=\"hljs-meta\">@Nullable</span> String factoryBeanName)</span></span>;<br><br><br>\t<span class=\"hljs-meta\">@Nullable</span><br>\t<span class=\"hljs-function\">String <span class=\"hljs-title\">getFactoryBeanName</span><span class=\"hljs-params\">()</span></span>;<br><br><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setFactoryMethodName</span><span class=\"hljs-params\">(<span class=\"hljs-meta\">@Nullable</span> String factoryMethodName)</span></span>;<br><br><br>\t<span class=\"hljs-meta\">@Nullable</span><br>\t<span class=\"hljs-function\">String <span class=\"hljs-title\">getFactoryMethodName</span><span class=\"hljs-params\">()</span></span>;<br><br><br>\t<span class=\"hljs-function\">ConstructorArgumentValues <span class=\"hljs-title\">getConstructorArgumentValues</span><span class=\"hljs-params\">()</span></span>;<br><br><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">default</span> <span class=\"hljs-keyword\">boolean</span> <span class=\"hljs-title\">hasConstructorArgumentValues</span><span class=\"hljs-params\">()</span> </span>&#123;<br>\t\t<span class=\"hljs-keyword\">return</span> !getConstructorArgumentValues().isEmpty();<br>\t&#125;<br><br><br>\t<span class=\"hljs-function\">MutablePropertyValues <span class=\"hljs-title\">getPropertyValues</span><span class=\"hljs-params\">()</span></span>;<br><br><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">default</span> <span class=\"hljs-keyword\">boolean</span> <span class=\"hljs-title\">hasPropertyValues</span><span class=\"hljs-params\">()</span> </span>&#123;<br>\t\t<span class=\"hljs-keyword\">return</span> !getPropertyValues().isEmpty();<br>\t&#125;<br><br><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setInitMethodName</span><span class=\"hljs-params\">(<span class=\"hljs-meta\">@Nullable</span> String initMethodName)</span></span>;<br><br>\t<span class=\"hljs-meta\">@Nullable</span><br>\t<span class=\"hljs-function\">String <span class=\"hljs-title\">getInitMethodName</span><span class=\"hljs-params\">()</span></span>;<br><br><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setDestroyMethodName</span><span class=\"hljs-params\">(<span class=\"hljs-meta\">@Nullable</span> String destroyMethodName)</span></span>;<br><br><br>\t<span class=\"hljs-meta\">@Nullable</span><br>\t<span class=\"hljs-function\">String <span class=\"hljs-title\">getDestroyMethodName</span><span class=\"hljs-params\">()</span></span>;<br><br><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setRole</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">int</span> role)</span></span>;<br><br><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">getRole</span><span class=\"hljs-params\">()</span></span>;<br><br><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setDescription</span><span class=\"hljs-params\">(<span class=\"hljs-meta\">@Nullable</span> String description)</span></span>;<br><br>\t<span class=\"hljs-meta\">@Nullable</span><br>\t<span class=\"hljs-function\">String <span class=\"hljs-title\">getDescription</span><span class=\"hljs-params\">()</span></span>;<br><br><br>\t<span class=\"hljs-comment\">// Read-only attributes</span><br><br><br>\t<span class=\"hljs-function\">ResolvableType <span class=\"hljs-title\">getResolvableType</span><span class=\"hljs-params\">()</span></span>;<br><br><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">boolean</span> <span class=\"hljs-title\">isSingleton</span><span class=\"hljs-params\">()</span></span>;<br><br><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">boolean</span> <span class=\"hljs-title\">isPrototype</span><span class=\"hljs-params\">()</span></span>;<br><br><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">boolean</span> <span class=\"hljs-title\">isAbstract</span><span class=\"hljs-params\">()</span></span>;<br><br><br>\t<span class=\"hljs-meta\">@Nullable</span><br>\t<span class=\"hljs-function\">String <span class=\"hljs-title\">getResourceDescription</span><span class=\"hljs-params\">()</span></span>;<br><br><br>\t<span class=\"hljs-meta\">@Nullable</span><br>\t<span class=\"hljs-function\">BeanDefinition <span class=\"hljs-title\">getOriginatingBeanDefinition</span><span class=\"hljs-params\">()</span></span>;<br><br>&#125;<br><br><br><br><span class=\"hljs-comment\">// org.springframework.core.AttributeAccessor</span><br><span class=\"hljs-keyword\">package</span> org.springframework.core;<br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">interface</span> <span class=\"hljs-title\">AttributeAccessor</span> </span>&#123;<br><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setAttribute</span><span class=\"hljs-params\">(String name, <span class=\"hljs-meta\">@Nullable</span> Object value)</span></span>;<br><br><br>\t<span class=\"hljs-meta\">@Nullable</span><br>\t<span class=\"hljs-function\">Object <span class=\"hljs-title\">getAttribute</span><span class=\"hljs-params\">(String name)</span></span>;<br><br><br>\t<span class=\"hljs-meta\">@Nullable</span><br>\t<span class=\"hljs-function\">Object <span class=\"hljs-title\">removeAttribute</span><span class=\"hljs-params\">(String name)</span></span>;<br><br><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">boolean</span> <span class=\"hljs-title\">hasAttribute</span><span class=\"hljs-params\">(String name)</span></span>;<br><br><br>\tString[] attributeNames();<br><br>&#125;<br><br><br><br><span class=\"hljs-comment\">// org.springframework.beans.BeanMetadataElemen</span><br><span class=\"hljs-keyword\">package</span> org.springframework.beans;<br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">interface</span> <span class=\"hljs-title\">BeanMetadataElement</span> </span>&#123;<br><br>\t<span class=\"hljs-meta\">@Nullable</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">default</span> Object <span class=\"hljs-title\">getSource</span><span class=\"hljs-params\">()</span> </span>&#123;<br>\t\t<span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">null</span>;<br>\t&#125;<br><br>&#125;<br><br><br></code></pre></td></tr></table></figure>\n\n<h1 id=\"2-从一个Demo程序开始\"><a href=\"#2-从一个Demo程序开始\" class=\"headerlink\" title=\"2.从一个Demo程序开始\"></a>2.从一个Demo程序开始</h1><h2 id=\"2-1-Demo项目配置\"><a href=\"#2-1-Demo项目配置\" class=\"headerlink\" title=\"2.1 Demo项目配置\"></a>2.1 Demo项目配置</h2><h3 id=\"maven的pom-xml配置文件\"><a href=\"#maven的pom-xml配置文件\" class=\"headerlink\" title=\"maven的pom.xml配置文件\"></a>maven的pom.xml配置文件</h3><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs xml\"><span class=\"hljs-meta\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">project</span> <span class=\"hljs-attr\">xmlns</span>=<span class=\"hljs-string\">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class=\"hljs-attr\">xmlns:xsi</span>=<span class=\"hljs-string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class=\"hljs-tag\">         <span class=\"hljs-attr\">xsi:schemaLocation</span>=<span class=\"hljs-string\">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">modelVersion</span>&gt;</span>4.0.0<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">modelVersion</span>&gt;</span><br>    <span class=\"hljs-comment\">&lt;!--        &lt;parent&gt;--&gt;</span><br>    <span class=\"hljs-comment\">&lt;!--            &lt;groupId&gt;com.acanx&lt;/groupId&gt;--&gt;</span><br>    <span class=\"hljs-comment\">&lt;!--            &lt;artifactId&gt;ACANX-JavaEE-Dependencies&lt;/artifactId&gt;--&gt;</span><br>    <span class=\"hljs-comment\">&lt;!--            &lt;version&gt;0.0.1&lt;/version&gt;--&gt;</span><br>    <span class=\"hljs-comment\">&lt;!--        &lt;/parent&gt;--&gt;</span><br><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">groupId</span>&gt;</span>com.acanx<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">groupId</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">artifactId</span>&gt;</span>JavaWeb-Spring<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">artifactId</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">version</span>&gt;</span>0.0.1-SNAPSHOT<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">version</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">packaging</span>&gt;</span>war<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">packaging</span>&gt;</span><br><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">name</span>&gt;</span>JavaWeb-Spring<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">name</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">description</span>&gt;</span>JavaWeb-Spring project<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">description</span>&gt;</span><br><br><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">properties</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">project.build.sourceEncoding</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">project.reporting.outputEncoding</span>&gt;</span>UTF-8<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">project.reporting.outputEncoding</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">java.version</span>&gt;</span>11<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">java.version</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">spring.version</span>&gt;</span>5.2.1.RELEASE<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">spring.version</span>&gt;</span><br>        <span class=\"hljs-comment\">&lt;!-- log4j日志文件管理包版本 --&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">slf4j.version</span>&gt;</span>2.0.0-alpha1<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">slf4j.version</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">logback.version</span>&gt;</span>1.3.0-alpha5<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">logback.version</span>&gt;</span><br>        <span class=\"hljs-comment\">&lt;!-- log4j日志包版本号 --&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">log4j2.version</span>&gt;</span>2.8.2<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">log4j2.version</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">log4j.version</span>&gt;</span>1.2.17<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">log4j.version</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">junit.version</span>&gt;</span>4.12<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">junit.version</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">fastjson.version</span>&gt;</span>1.2.62<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">fastjson.version</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">maven-compiler-plugin.version</span>&gt;</span>3.8.1<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">maven-compiler-plugin.version</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">properties</span>&gt;</span><br><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">dependencies</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">dependency</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">groupId</span>&gt;</span>org.springframework<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">groupId</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">artifactId</span>&gt;</span>spring-context<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">artifactId</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">version</span>&gt;</span>$&#123;spring.version&#125;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">version</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">dependency</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">dependency</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">groupId</span>&gt;</span>ch.qos.logback<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">groupId</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">artifactId</span>&gt;</span>logback-classic<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">artifactId</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">version</span>&gt;</span>$&#123;logback.version&#125;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">version</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">dependency</span>&gt;</span><br>        <span class=\"hljs-comment\">&lt;!-- 添加fastjson --&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">dependency</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">groupId</span>&gt;</span>com.alibaba<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">groupId</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">artifactId</span>&gt;</span>fastjson<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">artifactId</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">version</span>&gt;</span>$&#123;fastjson.version&#125;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">version</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">dependency</span>&gt;</span><br>        <span class=\"hljs-comment\">&lt;!--  单元测试--&gt;</span><br>        <span class=\"hljs-comment\">&lt;!-- https://mvnrepository.com/artifact/junit/junit --&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">dependency</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">groupId</span>&gt;</span>junit<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">groupId</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">artifactId</span>&gt;</span>junit<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">artifactId</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">version</span>&gt;</span>$&#123;junit.version&#125;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">version</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">scope</span>&gt;</span>test<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">scope</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">dependency</span>&gt;</span><br><br>    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">dependencies</span>&gt;</span><br><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">build</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">plugins</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">plugin</span>&gt;</span><br>                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">groupId</span>&gt;</span>org.apache.maven.plugins<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">groupId</span>&gt;</span><br>                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">artifactId</span>&gt;</span>maven-compiler-plugin<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">artifactId</span>&gt;</span><br>                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">version</span>&gt;</span>$&#123;maven-compiler-plugin.version&#125;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">version</span>&gt;</span><br>                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">configuration</span>&gt;</span><br>                    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">target</span>&gt;</span>11<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">target</span>&gt;</span><br>                    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">source</span>&gt;</span>11<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">source</span>&gt;</span><br>                <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">configuration</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">plugin</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">plugins</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">build</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">project</span>&gt;</span><br><br></code></pre></td></tr></table></figure>\n\n<h2 id=\"2-2-Demo程序\"><a href=\"#2-2-Demo程序\" class=\"headerlink\" title=\"2.2 Demo程序\"></a>2.2 Demo程序</h2><h3 id=\"2-2-1启动类\"><a href=\"#2-2-1启动类\" class=\"headerlink\" title=\"2.2.1启动类\"></a>2.2.1启动类</h3><ul>\n<li>代码位置:com.acanx.spring.xml.CspringIocConfigByFileSystemXmlApplicationContext.java<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><br><span class=\"hljs-keyword\">package</span> com.acanx.spring.xml;<br><br><span class=\"hljs-keyword\">import</span> com.acanx.spring.bean.Car;<br><span class=\"hljs-keyword\">import</span> org.apache.commons.logging.Log;<br><span class=\"hljs-keyword\">import</span> org.apache.commons.logging.LogFactory;<br><span class=\"hljs-keyword\">import</span> org.slf4j.Logger;<br><span class=\"hljs-keyword\">import</span> org.slf4j.LoggerFactory;<br><span class=\"hljs-keyword\">import</span> org.springframework.context.ApplicationContext;<br><span class=\"hljs-keyword\">import</span> org.springframework.context.support.FileSystemXmlApplicationContext;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * ACANX-JavaWeb / com.acanx.spring.xml / SpringIocConfigByXmlFileInClassPath.java</span><br><span class=\"hljs-comment\"> * 文件由 ACANX 创建于 2019/7/30 - 13:39</span><br><span class=\"hljs-comment\"> * Description  SpringIocConfigByXmlFileInClassPath:</span><br><span class=\"hljs-comment\"> * 补充说明： 使用FileSystemXmlApplicationContext加载文件系统下的配置文件</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> ACANX</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@version</span> 0.0.1.0</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@date</span> 2019/7/30  13:39</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@since</span> 0.0.1-SNAPSHOT</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">CspringIocConfigByFileSystemXmlApplicationContext</span> </span>&#123;<br>   <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">final</span> Logger logger= LoggerFactory.getLogger(CspringIocConfigByFileSystemXmlApplicationContext.class);<br>   <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">main</span><span class=\"hljs-params\">(String[] args)</span>  </span>&#123;<br>        logger.info(<span class=\"hljs-string\">&quot;-------------------&quot;</span>);<br>        logger.info(System.getProperty(<span class=\"hljs-string\">&quot;org.apache.commons.logging.LogFactory&quot;</span>));<br>        logger.info(System.getProperty(<span class=\"hljs-string\">&quot;org.apache.commons.logging.Log&quot;</span>));<br>        logger.info(<span class=\"hljs-string\">&quot;-------------------&quot;</span>);<br>        String location=<span class=\"hljs-string\">&quot;D:\\\\ProgramCode\\\\JavaCode\\\\ACANX-JavaWeb\\\\JavaWeb-Spring\\\\ApplicationContextC.xml&quot;</span>;<br>        ApplicationContext applicationContext = <span class=\"hljs-keyword\">new</span> FileSystemXmlApplicationContext(location);<br>        Car car = (Car) applicationContext.getBean(<span class=\"hljs-string\">&quot;myCar&quot;</span>);<br>        logger.info(car.toString());<br>        logger.info(<span class=\"hljs-string\">&quot;Info :&#123;&#125;&quot;</span>,logger.isInfoEnabled());<br>        String[] beanNames=applicationContext.getBeanDefinitionNames();<br>        <span class=\"hljs-keyword\">for</span> (String beanName:beanNames) &#123;<br>             logger.info(beanName+<span class=\"hljs-string\">&quot;::::: &quot;</span>+applicationContext.getBean(beanName).toString());<br>        &#125;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure></li>\n</ul>\n<h3 id=\"2-2-2使用到的Bena对象\"><a href=\"#2-2-2使用到的Bena对象\" class=\"headerlink\" title=\"2.2.2使用到的Bena对象\"></a>2.2.2使用到的Bena对象</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">package</span> com.acanx.spring.bean;<br><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">Car</span> </span>&#123;<br><br>    <span class=\"hljs-keyword\">private</span>  String name;<br><br>    <span class=\"hljs-keyword\">private</span>  String price;<br><br>\t<span class=\"hljs-comment\">// get set 默认构造方法已省略</span><br><br>&#125;<br></code></pre></td></tr></table></figure>\n\n<h3 id=\"2-2-3-springContext的xml文件ApplicationContextC-xml\"><a href=\"#2-2-3-springContext的xml文件ApplicationContextC-xml\" class=\"headerlink\" title=\"2.2.3 springContext的xml文件ApplicationContextC.xml\"></a>2.2.3 springContext的xml文件ApplicationContextC.xml</h3><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs xml\"><span class=\"hljs-meta\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">beans</span> <span class=\"hljs-attr\">xmlns</span>=<span class=\"hljs-string\">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class=\"hljs-tag\">       <span class=\"hljs-attr\">xmlns:xsi</span>=<span class=\"hljs-string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class=\"hljs-tag\">       <span class=\"hljs-attr\">xsi:schemaLocation</span>=<span class=\"hljs-string\">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span><br>    <br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">bean</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;myCar&quot;</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;com.acanx.spring.bean.Car&quot;</span> &gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">property</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;name&quot;</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">&quot;QQAI&quot;</span>/&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">property</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;price&quot;</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">&quot;2222&quot;</span>/&gt;</span><br>    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">bean</span>&gt;</span><br>    <br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">beans</span>&gt;</span><br><br></code></pre></td></tr></table></figure>\n\n<h3 id=\"2-2-4-配置日志-logback-xml（resources文件夹下）\"><a href=\"#2-2-4-配置日志-logback-xml（resources文件夹下）\" class=\"headerlink\" title=\"2.2.4 配置日志 logback.xml（resources文件夹下）\"></a>2.2.4 配置日志 logback.xml（resources文件夹下）</h3><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs xml\"><span class=\"hljs-meta\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">configuration</span> <span class=\"hljs-attr\">scan</span>=<span class=\"hljs-string\">&quot;true&quot;</span> <span class=\"hljs-attr\">scanPeriod</span>=<span class=\"hljs-string\">&quot;60 seconds&quot;</span> <span class=\"hljs-attr\">debug</span>=<span class=\"hljs-string\">&quot;false&quot;</span>&gt;</span><br><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">property</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;LOG_PATH&quot;</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">&quot;.log&quot;</span>/&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">property</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;APP_NAME&quot;</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">&quot;IOCDemo&quot;</span>/&gt;</span><br>    <span class=\"hljs-comment\">&lt;!--设置系统日志目录--&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">property</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;APP_DIR&quot;</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">&quot;app-IOCDemo&quot;</span>/&gt;</span><br><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">property</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;CONSOLE_LOG_PATTERN&quot;</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">&quot;[CLP]$&#123;CONSOLE_LOG_PATTERN:-%clr(%d&#123;$&#123;LOG_DATEFORMAT_PATTERN:-yyyy-MM-dd HH:mm:ss.SSS&#125;&#125;)&#123;faint&#125; %clr($&#123;LOG_LEVEL_PATTERN:-%5p&#125;) %clr($&#123;PID:- &#125;)&#123;magenta&#125; %clr(---)&#123;faint&#125; %clr([%15.15t])&#123;faint&#125; %clr(%-40.40logger&#123;39&#125;)&#123;cyan&#125; %clr(%-15.15method)&#123;cyan&#125; %clr([%4.4line&#123;4&#125;])&#123;magenta&#125; %clr(:)&#123;faint&#125; %m%n$&#123;LOG_EXCEPTION_CONVERSION_WORD:-%wEx&#125;&#125;&quot;</span>/&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">property</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;FILE_LOG_PATTERN&quot;</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">&quot;$&#123;FILE_LOG_PATTERN:-%d&#123;$&#123;LOG_DATEFORMAT_PATTERN:-yyyy-MM-dd HH:mm:ss.SSS&#125;&#125; $&#123;LOG_LEVEL_PATTERN:-%5p&#125; $&#123;PID:- &#125; --- [%t] %-40.40logger&#123;39&#125; : %m%n$&#123;LOG_EXCEPTION_CONVERSION_WORD:-%wEx&#125;&#125;&quot;</span>/&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">property</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;CONSOLE_LOGBACK_PATTERN&quot;</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">&quot;[控制台] %d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; [%thread] %-5level | %-80logger # %-40M [%4line] : %msg%n&quot;</span>/&gt;</span><br><br><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">contextName</span>&gt;</span>logback<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">contextName</span>&gt;</span><br>    <span class=\"hljs-comment\">&lt;!--输出到控制台--&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">appender</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;CONSOLE&quot;</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;ch.qos.logback.core.ConsoleAppender&quot;</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">filter</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;ch.qos.logback.classic.filter.ThresholdFilter&quot;</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">level</span>&gt;</span>TRACE<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">level</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">filter</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">layout</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;ch.qos.logback.classic.PatternLayout&quot;</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Pattern</span>&gt;</span>$&#123;CONSOLE_LOGBACK_PATTERN&#125;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Pattern</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">layout</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">encoder</span>&gt;</span><br>            <span class=\"hljs-comment\">&lt;!--  文件名 [%file]--&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">pattern</span>&gt;</span>$&#123;CONSOLE_LOGBACK_PATTERN&#125;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">pattern</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">encoder</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">appender</span>&gt;</span><br><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">appender</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;ERROR_FILE&quot;</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">filter</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;ch.qos.logback.classic.filter.ThresholdFilter&quot;</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">level</span>&gt;</span>ERROR<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">level</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">onMatch</span>&gt;</span>ACCEPT<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">onMatch</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">onMismatch</span>&gt;</span>DENY<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">onMismatch</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">filter</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">File</span>&gt;</span>.log/ACANX-JavaWeb/LOG-ERROR.log<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">File</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">rollingPolicy</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">fileNamePattern</span>&gt;</span>.log/server-error-%d&#123;yyyyMMdd&#125;.log.%i<br>            <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">fileNamePattern</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">timeBasedFileNamingAndTriggeringPolicy</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP&quot;</span>&gt;</span><br>                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">maxFileSize</span>&gt;</span>5MB<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">maxFileSize</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">timeBasedFileNamingAndTriggeringPolicy</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">maxHistory</span>&gt;</span>2<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">maxHistory</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">rollingPolicy</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">layout</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;ch.qos.logback.classic.PatternLayout&quot;</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Pattern</span>&gt;</span>$&#123;CONSOLE_LOGBACK_PATTERN&#125;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Pattern</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">layout</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">appender</span>&gt;</span><br><br><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">appender</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;WARN_FILE&quot;</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">filter</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;ch.qos.logback.classic.filter.ThresholdFilter&quot;</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">level</span>&gt;</span>WARN<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">level</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">onMatch</span>&gt;</span>ACCEPT<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">onMatch</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">onMismatch</span>&gt;</span>DENY<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">onMismatch</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">filter</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">File</span>&gt;</span>.log/ACANX-JavaWeb/LOG-WARN.log<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">File</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">rollingPolicy</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">fileNamePattern</span>&gt;</span>.log/ACANX-JavaWeb/server-WARN-%d&#123;yyyyMMdd&#125;.log.%i<br>            <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">fileNamePattern</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">timeBasedFileNamingAndTriggeringPolicy</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP&quot;</span>&gt;</span><br>                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">maxFileSize</span>&gt;</span>5MB<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">maxFileSize</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">timeBasedFileNamingAndTriggeringPolicy</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">maxHistory</span>&gt;</span>2<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">maxHistory</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">rollingPolicy</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">layout</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;ch.qos.logback.classic.PatternLayout&quot;</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Pattern</span>&gt;</span>$&#123;CONSOLE_LOGBACK_PATTERN&#125;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Pattern</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">layout</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">appender</span>&gt;</span><br><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">appender</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;INFO_FILE&quot;</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">File</span>&gt;</span>.log/ACANX-JavaWeb/LOG-INFO.log<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">File</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">filter</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;ch.qos.logback.classic.filter.ThresholdFilter&quot;</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">level</span>&gt;</span>INFO<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">level</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">onMatch</span>&gt;</span>ACCEPT<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">onMatch</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">onMismatch</span>&gt;</span>DENY<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">onMismatch</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">filter</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">rollingPolicy</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">fileNamePattern</span>&gt;</span>.log/ACANX-JavaWeb/server-info-%d&#123;yyyyMMdd&#125;.log.%i<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">fileNamePattern</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">timeBasedFileNamingAndTriggeringPolicy</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP&quot;</span>&gt;</span><br>                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">maxFileSize</span>&gt;</span>5MB<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">maxFileSize</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">timeBasedFileNamingAndTriggeringPolicy</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">maxHistory</span>&gt;</span>2<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">maxHistory</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">rollingPolicy</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">layout</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;ch.qos.logback.classic.PatternLayout&quot;</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Pattern</span>&gt;</span>$&#123;CONSOLE_LOGBACK_PATTERN&#125;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Pattern</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">layout</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">encoder</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;ch.qos.logback.classic.encoder.PatternLayoutEncoder&quot;</span>&gt;</span><br>            <span class=\"hljs-comment\">&lt;!--格式化输出：%d表示日期，%thread表示线程名，%-5level：级别从左显示5个字符宽度%msg：日志消息，%n是换行符--&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">pattern</span>&gt;</span>$&#123;CONSOLE_LOGBACK_PATTERN&#125;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">pattern</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">encoder</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">appender</span>&gt;</span><br><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">appender</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;TRACE_FILE&quot;</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">filter</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;ch.qos.logback.classic.filter.ThresholdFilter&quot;</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">level</span>&gt;</span>TRACE<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">level</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">onMatch</span>&gt;</span>ACCEPT<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">onMatch</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">onMismatch</span>&gt;</span>DENY<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">onMismatch</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">filter</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">File</span>&gt;</span>.log/ACANX-JavaWeb/LOG-TRACE.log<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">File</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">rollingPolicy</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">fileNamePattern</span>&gt;</span>.log/ACANX-JavaWeb/server-TRACE-%d&#123;yyyyMMdd&#125;.log.%i<br>            <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">fileNamePattern</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">timeBasedFileNamingAndTriggeringPolicy</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP&quot;</span>&gt;</span><br>                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">maxFileSize</span>&gt;</span>5MB<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">maxFileSize</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">timeBasedFileNamingAndTriggeringPolicy</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">maxHistory</span>&gt;</span>2<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">maxHistory</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">rollingPolicy</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">layout</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;ch.qos.logback.classic.PatternLayout&quot;</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Pattern</span>&gt;</span>$&#123;CONSOLE_LOGBACK_PATTERN&#125;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Pattern</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">layout</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">appender</span>&gt;</span><br><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">appender</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;FULL_LEVEL_FILE&quot;</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">File</span>&gt;</span>.log/ACANX-JavaWeb/LOG-FULL.log<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">File</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">filter</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;ch.qos.logback.classic.filter.ThresholdFilter&quot;</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">level</span>&gt;</span>TRACE<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">level</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">filter</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">encoder</span>&gt;</span><br>            <span class=\"hljs-comment\">&lt;!--  文件名 [%file] --&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">pattern</span>&gt;</span>$&#123;CONSOLE_LOGBACK_PATTERN&#125;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">pattern</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">encoder</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">rollingPolicy</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">fileNamePattern</span>&gt;</span>.log/ACANX-JavaWeb/LOG-FULL-%d&#123;yyyyMMdd&#125;.log.%i<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">fileNamePattern</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">timeBasedFileNamingAndTriggeringPolicy</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP&quot;</span>&gt;</span><br>                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">maxFileSize</span>&gt;</span>5MB<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">maxFileSize</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">timeBasedFileNamingAndTriggeringPolicy</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">maxHistory</span>&gt;</span>2<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">maxHistory</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">rollingPolicy</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">layout</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;ch.qos.logback.classic.PatternLayout&quot;</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Pattern</span>&gt;</span>$&#123;CONSOLE_LOGBACK_PATTERN&#125;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Pattern</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">layout</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">appender</span>&gt;</span><br><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">root</span> <span class=\"hljs-attr\">level</span>=<span class=\"hljs-string\">&quot;TRACE&quot;</span> <span class=\"hljs-attr\">additivity</span>=<span class=\"hljs-string\">&quot;true&quot;</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">appender-ref</span> <span class=\"hljs-attr\">ref</span>=<span class=\"hljs-string\">&quot;CONSOLE&quot;</span>/&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">appender-ref</span> <span class=\"hljs-attr\">ref</span>=<span class=\"hljs-string\">&quot;WARN_FILE&quot;</span>/&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">appender-ref</span> <span class=\"hljs-attr\">ref</span>=<span class=\"hljs-string\">&quot;ERROR_FILE&quot;</span>/&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">appender-ref</span> <span class=\"hljs-attr\">ref</span>=<span class=\"hljs-string\">&quot;INFO_FILE&quot;</span>/&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">appender-ref</span> <span class=\"hljs-attr\">ref</span>=<span class=\"hljs-string\">&quot;TRACE_FILE&quot;</span>/&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">appender-ref</span> <span class=\"hljs-attr\">ref</span>=<span class=\"hljs-string\">&quot;FULL_LEVEL_FILE&quot;</span>/&gt;</span><br>    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">root</span>&gt;</span><br><br>    <span class=\"hljs-comment\">&lt;!-- TRACE, DEBUG, INFO, WARN, ERROR, ALL 和 OFF --&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">logger</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;org&quot;</span> <span class=\"hljs-attr\">level</span>=<span class=\"hljs-string\">&quot;TRACE&quot;</span> <span class=\"hljs-attr\">additivity</span>=<span class=\"hljs-string\">&quot;true&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">logger</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">logger</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;org.springframework.context&quot;</span> <span class=\"hljs-attr\">level</span>=<span class=\"hljs-string\">&quot;TRACE&quot;</span> <span class=\"hljs-attr\">additivity</span>=<span class=\"hljs-string\">&quot;false&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">logger</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">logger</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;org.apache&quot;</span> <span class=\"hljs-attr\">level</span>=<span class=\"hljs-string\">&quot;TRACE&quot;</span>/&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">logger</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;com.alibaba&quot;</span> <span class=\"hljs-attr\">level</span>=<span class=\"hljs-string\">&quot;TRACE&quot;</span>/&gt;</span><br>    <span class=\"hljs-comment\">&lt;!-- 如果这里设置了additivity=true 代码打印信息向上传递,将打印信息传递到root ，并且自己的appender-ref 也会打印，这样就是打印了俩次日志--&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">configuration</span>&gt;</span><br><br></code></pre></td></tr></table></figure>\n\n<h1 id=\"3-Spring-IOC容器的创建\"><a href=\"#3-Spring-IOC容器的创建\" class=\"headerlink\" title=\"3.Spring IOC容器的创建\"></a>3.Spring IOC容器的创建</h1><h2 id=\"3-1-进入FileSystemXmlApplicationContext（AbstractXmlApplicationContext抽象类的具体实现类）\"><a href=\"#3-1-进入FileSystemXmlApplicationContext（AbstractXmlApplicationContext抽象类的具体实现类）\" class=\"headerlink\" title=\"3.1 进入FileSystemXmlApplicationContext（AbstractXmlApplicationContext抽象类的具体实现类）\"></a>3.1 进入FileSystemXmlApplicationContext（AbstractXmlApplicationContext抽象类的具体实现类）</h2><ul>\n<li>代码位置: org.springframework.context.support.FileSystemXmlApplicationContext.java<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-title\">FileSystemXmlApplicationContext</span><span class=\"hljs-params\">(String configLocation)</span> <span class=\"hljs-keyword\">throws</span> BeansException </span>&#123;<br>\t<span class=\"hljs-keyword\">this</span>(<span class=\"hljs-keyword\">new</span> String[] &#123;configLocation&#125;, <span class=\"hljs-keyword\">true</span>, <span class=\"hljs-keyword\">null</span>);<br>&#125;<br><br><br>   <span class=\"hljs-comment\">// 上面的this 来到下面的重载构造方法</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-title\">FileSystemXmlApplicationContext</span><span class=\"hljs-params\">(</span></span><br><span class=\"hljs-function\"><span class=\"hljs-params\">\t\tString[] configLocations, <span class=\"hljs-keyword\">boolean</span> refresh, <span class=\"hljs-meta\">@Nullable</span> ApplicationContext parent)</span></span><br><span class=\"hljs-function\">\t\t<span class=\"hljs-keyword\">throws</span> BeansException </span>&#123;<br><br>\t<span class=\"hljs-keyword\">super</span>(parent);  <span class=\"hljs-comment\">// 初始化父容器AbstractApplicationContext</span><br>\tsetConfigLocations(configLocations); <span class=\"hljs-comment\">// 设置资源文件的位置</span><br>\t<span class=\"hljs-keyword\">if</span> (refresh) &#123;<br>\t\trefresh();<span class=\"hljs-comment\">// 核心方法，具体定义在超类AbstractApplicationContext（抽象类）中，是一个模板方法</span><br>\t&#125;<br>&#125;<br></code></pre></td></tr></table></figure></li>\n</ul>\n<h2 id=\"3-2-初始化父容器AbstractApplicationContext\"><a href=\"#3-2-初始化父容器AbstractApplicationContext\" class=\"headerlink\" title=\"3.2 初始化父容器AbstractApplicationContext\"></a>3.2 初始化父容器AbstractApplicationContext</h2><h3 id=\"3-2-1-AbstractXmlApplicationContext抽象类（FileSystemXmlApplicationContext的父类）\"><a href=\"#3-2-1-AbstractXmlApplicationContext抽象类（FileSystemXmlApplicationContext的父类）\" class=\"headerlink\" title=\"3.2.1 AbstractXmlApplicationContext抽象类（FileSystemXmlApplicationContext的父类）\"></a>3.2.1 AbstractXmlApplicationContext抽象类（FileSystemXmlApplicationContext的父类）</h3><ul>\n<li>代码位置: org.springframework.context.support.AbstractXmlApplicationContext.java<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-title\">AbstractXmlApplicationContext</span><span class=\"hljs-params\">(<span class=\"hljs-meta\">@Nullable</span> ApplicationContext parent)</span> </span>&#123;<br>\t<span class=\"hljs-keyword\">super</span>(parent);<br>&#125;<br><br></code></pre></td></tr></table></figure></li>\n</ul>\n<h3 id=\"3-2-2-AbstractRefreshableConfigApplicationContext抽象类（-AbstractXmlApplicationContext的父类）\"><a href=\"#3-2-2-AbstractRefreshableConfigApplicationContext抽象类（-AbstractXmlApplicationContext的父类）\" class=\"headerlink\" title=\"3.2.2 AbstractRefreshableConfigApplicationContext抽象类（ AbstractXmlApplicationContext的父类）\"></a>3.2.2 AbstractRefreshableConfigApplicationContext抽象类（ AbstractXmlApplicationContext的父类）</h3><ul>\n<li>代码位置:org.springframework.context.support.AbstractRefreshableConfigApplicationContext.java<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-title\">AbstractRefreshableConfigApplicationContext</span><span class=\"hljs-params\">(<span class=\"hljs-meta\">@Nullable</span> ApplicationContext parent)</span> </span>&#123;<br>\t<span class=\"hljs-keyword\">super</span>(parent);<br>&#125;<br><br></code></pre></td></tr></table></figure></li>\n</ul>\n<h3 id=\"3-2-3-AbstractRefreshableApplicationContext抽象类\"><a href=\"#3-2-3-AbstractRefreshableApplicationContext抽象类\" class=\"headerlink\" title=\"3.2.3 AbstractRefreshableApplicationContext抽象类\"></a>3.2.3 AbstractRefreshableApplicationContext抽象类</h3><ul>\n<li> 代码位置:org.springframework.context.support.AbstractRefreshableApplicationContext.java<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-title\">AbstractRefreshableApplicationContext</span><span class=\"hljs-params\">(<span class=\"hljs-meta\">@Nullable</span> ApplicationContext parent)</span> </span>&#123;<br>\t<span class=\"hljs-keyword\">super</span>(parent);<br>&#125;<br><br></code></pre></td></tr></table></figure></li>\n</ul>\n<h3 id=\"3-2-4-AbstractApplicationContext抽象类\"><a href=\"#3-2-4-AbstractApplicationContext抽象类\" class=\"headerlink\" title=\"3.2.4 AbstractApplicationContext抽象类\"></a>3.2.4 AbstractApplicationContext抽象类</h3><ul>\n<li>代码位置:org.springframework.context.support.AbstractApplicationContext.java<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-title\">AbstractApplicationContext</span><span class=\"hljs-params\">(<span class=\"hljs-meta\">@Nullable</span> ApplicationContext parent)</span> </span>&#123;<br>\t<span class=\"hljs-keyword\">this</span>();<br>\tsetParent(parent);<br>&#125;<br><br>   <span class=\"hljs-comment\">//上面对应的this()方法 </span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-title\">AbstractApplicationContext</span><span class=\"hljs-params\">()</span> </span>&#123;<br>\t<span class=\"hljs-keyword\">this</span>.resourcePatternResolver = getResourcePatternResolver();<br>&#125;<br><br>   <span class=\"hljs-comment\">//上面对应的 getResourcePatternResolver()方法</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">protected</span> ResourcePatternResolver <span class=\"hljs-title\">getResourcePatternResolver</span><span class=\"hljs-params\">()</span> </span>&#123;<br>\t<span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> PathMatchingResourcePatternResolver(<span class=\"hljs-keyword\">this</span>);<br>&#125;<br><br>   <span class=\"hljs-comment\">// this()之后的setParent(parent);方法</span><br><span class=\"hljs-meta\">@Override</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setParent</span><span class=\"hljs-params\">(<span class=\"hljs-meta\">@Nullable</span> ApplicationContext parent)</span> </span>&#123;<br>\t<span class=\"hljs-keyword\">this</span>.parent = parent;<br>\t<span class=\"hljs-keyword\">if</span> (parent != <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\tEnvironment parentEnvironment = parent.getEnvironment();<br>\t\t<span class=\"hljs-keyword\">if</span> (parentEnvironment <span class=\"hljs-keyword\">instanceof</span> ConfigurableEnvironment) &#123;<br>\t\t\tgetEnvironment().merge((ConfigurableEnvironment) parentEnvironment);<br>\t\t&#125;<br>\t&#125;<br>&#125;<br><br></code></pre></td></tr></table></figure></li>\n</ul>\n<h2 id=\"3-5-PathMatchingResourcePatternResolver类\"><a href=\"#3-5-PathMatchingResourcePatternResolver类\" class=\"headerlink\" title=\"3.5 PathMatchingResourcePatternResolver类\"></a>3.5 PathMatchingResourcePatternResolver类</h2><ul>\n<li>PathMatchingResourcePatternResolver(this)对应的构造方法</li>\n<li>代码位置:org.springframework.core.io.support.PathMatchingResourcePatternResolver.java<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-title\">PathMatchingResourcePatternResolver</span><span class=\"hljs-params\">(ResourceLoader resourceLoader)</span> </span>&#123;<br>\tAssert.notNull(resourceLoader, <span class=\"hljs-string\">&quot;ResourceLoader must not be null&quot;</span>);<br>\t<span class=\"hljs-keyword\">this</span>.resourceLoader = resourceLoader;<br>&#125;<br><br></code></pre></td></tr></table></figure></li>\n</ul>\n<h1 id=\"4-setConfigLocations-String…-locations-方法\"><a href=\"#4-setConfigLocations-String…-locations-方法\" class=\"headerlink\" title=\"4.setConfigLocations(String… locations) 方法\"></a>4.setConfigLocations(String… locations) 方法</h1><ul>\n<li>设置资源文件的位置</li>\n</ul>\n<h2 id=\"4-1-AbstractRefreshableConfigApplicationContext-setConfigLocations-Nullable-String…-locations-方法\"><a href=\"#4-1-AbstractRefreshableConfigApplicationContext-setConfigLocations-Nullable-String…-locations-方法\" class=\"headerlink\" title=\"4.1 AbstractRefreshableConfigApplicationContext.setConfigLocations(@Nullable String… locations) 方法\"></a>4.1 AbstractRefreshableConfigApplicationContext.setConfigLocations(@Nullable String… locations) 方法</h2><ul>\n<li> 代码位置:org.springframework.context.support.AbstractRefreshableConfigApplicationContext.java<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setConfigLocations</span><span class=\"hljs-params\">(<span class=\"hljs-meta\">@Nullable</span> String... locations)</span> </span>&#123;<br>\t<span class=\"hljs-keyword\">if</span> (locations != <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\tAssert.noNullElements(locations, <span class=\"hljs-string\">&quot;Config locations must not be null&quot;</span>);<br>\t\t<span class=\"hljs-keyword\">this</span>.configLocations = <span class=\"hljs-keyword\">new</span> String[locations.length];<br>\t\t<span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">int</span> i = <span class=\"hljs-number\">0</span>; i &lt; locations.length; i++) &#123;<br>\t\t\t<span class=\"hljs-keyword\">this</span>.configLocations[i] = resolvePath(locations[i]).trim();<br>\t\t&#125;<br>\t&#125;<br>\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t<span class=\"hljs-keyword\">this</span>.configLocations = <span class=\"hljs-keyword\">null</span>;<br>\t&#125;<br>&#125;<br><br><br></code></pre></td></tr></table></figure></li>\n</ul>\n<h1 id=\"5-refresh-方法\"><a href=\"#5-refresh-方法\" class=\"headerlink\" title=\"5. refresh()方法\"></a>5. refresh()方法</h1><ul>\n<li>AbstractApplicationContext抽象类中定义的refresh()模板方法</li>\n<li>定义了需要执行刷新操作的一些步骤，只是一个模板，个性化的逻辑由其子类来具体实现<h2 id=\"5-1-refresh-方法定义\"><a href=\"#5-1-refresh-方法定义\" class=\"headerlink\" title=\"5.1 refresh()方法定义\"></a>5.1 refresh()方法定义</h2></li>\n<li> 代码位置:org.springframework.context.support.AbstractApplicationContext.java<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-meta\">@Override</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">refresh</span><span class=\"hljs-params\">()</span> <span class=\"hljs-keyword\">throws</span> BeansException, IllegalStateException </span>&#123;<br>\t<span class=\"hljs-keyword\">synchronized</span> (<span class=\"hljs-keyword\">this</span>.startupShutdownMonitor) &#123;<br>\t\t<span class=\"hljs-comment\">// Prepare this context for refreshing.</span><br>\t\tprepareRefresh();<br><br>\t\t<span class=\"hljs-comment\">// Tell the subclass to refresh the internal bean factory.</span><br>\t\t<span class=\"hljs-comment\">// 创建BeanFactory</span><br>\t\tConfigurableListableBeanFactory beanFactory = obtainFreshBeanFactory();<br><br>\t\t<span class=\"hljs-comment\">// Prepare the bean factory for use in this context.</span><br>\t\tprepareBeanFactory(beanFactory);<br><br>\t\t<span class=\"hljs-keyword\">try</span> &#123;<br>\t\t\t<span class=\"hljs-comment\">// Allows post-processing of the bean factory in context subclasses.</span><br>\t\t\tpostProcessBeanFactory(beanFactory);<br><br>\t\t\t<span class=\"hljs-comment\">// Invoke factory processors registered as beans in the context.</span><br>\t\t\tinvokeBeanFactoryPostProcessors(beanFactory);<br><br>\t\t\t<span class=\"hljs-comment\">// Register bean processors that intercept bean creation.</span><br>\t\t\tregisterBeanPostProcessors(beanFactory);<br><br>\t\t\t<span class=\"hljs-comment\">// Initialize message source for this context.</span><br>\t\t\tinitMessageSource();<br><br>\t\t\t<span class=\"hljs-comment\">// Initialize event multicaster for this context.</span><br>\t\t\tinitApplicationEventMulticaster();<br><br>\t\t\t<span class=\"hljs-comment\">// Initialize other special beans in specific context subclasses.</span><br>\t\t\tonRefresh();<br><br>\t\t\t<span class=\"hljs-comment\">// Check for listener beans and register them.</span><br>\t\t\tregisterListeners();<br><br>\t\t\t<span class=\"hljs-comment\">// Instantiate all remaining (non-lazy-init) singletons.</span><br>\t\t\t<span class=\"hljs-comment\">// 实例化Bean</span><br>\t\t\tfinishBeanFactoryInitialization(beanFactory);<br><br>\t\t\t<span class=\"hljs-comment\">// Last step: publish corresponding event.</span><br>\t\t\tfinishRefresh();<br>\t\t&#125;<br><br>\t\t<span class=\"hljs-keyword\">catch</span> (BeansException ex) &#123;<br>\t\t\t<span class=\"hljs-keyword\">if</span> (logger.isWarnEnabled()) &#123;<br>\t\t\t\tlogger.warn(<span class=\"hljs-string\">&quot;Exception encountered during context initialization - &quot;</span> +<br>\t\t\t\t\t\t<span class=\"hljs-string\">&quot;cancelling refresh attempt: &quot;</span> + ex);<br>\t\t\t&#125;<br><br>\t\t\t<span class=\"hljs-comment\">// Destroy already created singletons to avoid dangling resources.</span><br>\t\t\tdestroyBeans();<br><br>\t\t\t<span class=\"hljs-comment\">// Reset &#x27;active&#x27; flag.</span><br>\t\t\tcancelRefresh(ex);<br><br>\t\t\t<span class=\"hljs-comment\">// Propagate exception to caller.</span><br>\t\t\t<span class=\"hljs-keyword\">throw</span> ex;<br>\t\t&#125;<br><br>\t\t<span class=\"hljs-keyword\">finally</span> &#123;<br>\t\t\t<span class=\"hljs-comment\">// Reset common introspection caches in Spring&#x27;s core, since we</span><br>\t\t\t<span class=\"hljs-comment\">// might not ever need metadata for singleton beans anymore...</span><br>\t\t\tresetCommonCaches();<br>\t\t&#125;<br>\t&#125;<br>&#125;<br><br></code></pre></td></tr></table></figure></li>\n</ul>\n<h2 id=\"5-2-prepareRefresh-方法\"><a href=\"#5-2-prepareRefresh-方法\" class=\"headerlink\" title=\"5.2 prepareRefresh()方法\"></a>5.2 prepareRefresh()方法</h2><ul>\n<li>正式Refresh()操作前的准备工作</li>\n<li>代码位置:org.springframework.context.support.AbstractApplicationContext.java<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">protected</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">prepareRefresh</span><span class=\"hljs-params\">()</span> </span>&#123;<br>\t<span class=\"hljs-comment\">// Switch to active.</span><br>\t<span class=\"hljs-keyword\">this</span>.startupDate = System.currentTimeMillis();<br>\t<span class=\"hljs-keyword\">this</span>.closed.set(<span class=\"hljs-keyword\">false</span>);<br>\t<span class=\"hljs-keyword\">this</span>.active.set(<span class=\"hljs-keyword\">true</span>);<br><br>\t<span class=\"hljs-keyword\">if</span> (logger.isDebugEnabled()) &#123;<br>\t\t<span class=\"hljs-keyword\">if</span> (logger.isTraceEnabled()) &#123;<br>\t\t\tlogger.trace(<span class=\"hljs-string\">&quot;Refreshing &quot;</span> + <span class=\"hljs-keyword\">this</span>);<br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t\tlogger.debug(<span class=\"hljs-string\">&quot;Refreshing &quot;</span> + getDisplayName());<br>\t\t&#125;<br>\t&#125;<br><br>\t<span class=\"hljs-comment\">// Initialize any placeholder property sources in the context environment.</span><br>\tinitPropertySources();<br><br>\t<span class=\"hljs-comment\">// Validate that all properties marked as required are resolvable:</span><br>\t<span class=\"hljs-comment\">// see ConfigurablePropertyResolver#setRequiredProperties</span><br>\tgetEnvironment().validateRequiredProperties();<br><br>\t<span class=\"hljs-comment\">// Store pre-refresh ApplicationListeners...</span><br>\t<span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">this</span>.earlyApplicationListeners == <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t<span class=\"hljs-keyword\">this</span>.earlyApplicationListeners = <span class=\"hljs-keyword\">new</span> LinkedHashSet&lt;&gt;(<span class=\"hljs-keyword\">this</span>.applicationListeners);<br>\t&#125;<br>\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t<span class=\"hljs-comment\">// Reset local application listeners to pre-refresh state.</span><br>\t\t<span class=\"hljs-keyword\">this</span>.applicationListeners.clear();<br>\t\t<span class=\"hljs-keyword\">this</span>.applicationListeners.addAll(<span class=\"hljs-keyword\">this</span>.earlyApplicationListeners);<br>\t&#125;<br><br>\t<span class=\"hljs-comment\">// Allow for the collection of early ApplicationEvents,</span><br>\t<span class=\"hljs-comment\">// to be published once the multicaster is available...</span><br>\t<span class=\"hljs-keyword\">this</span>.earlyApplicationEvents = <span class=\"hljs-keyword\">new</span> LinkedHashSet&lt;&gt;();<br>&#125;<br><br><span class=\"hljs-comment\">// 上述定义的initPropertySources()方法，具体由子类实现</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">protected</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">initPropertySources</span><span class=\"hljs-params\">()</span> </span>&#123;<br>\t<span class=\"hljs-comment\">// For subclasses: do nothing by default.</span><br>&#125;<br><br></code></pre></td></tr></table></figure></li>\n</ul>\n<h2 id=\"5-3-obtainFreshBeanFactory-方法\"><a href=\"#5-3-obtainFreshBeanFactory-方法\" class=\"headerlink\" title=\"5.3 obtainFreshBeanFactory()方法\"></a>5.3 obtainFreshBeanFactory()方法</h2><ul>\n<li>创建BeanFactory的核心方法</li>\n<li>代码位置:org.springframework.context.support.AbstractApplicationContext.java<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">protected</span> ConfigurableListableBeanFactory <span class=\"hljs-title\">obtainFreshBeanFactory</span><span class=\"hljs-params\">()</span> </span>&#123;<br>\trefreshBeanFactory();<span class=\"hljs-comment\">// 刷新BeanFactory，抽象方法由其子类实现,5.3.1中有说明</span><br>\t<span class=\"hljs-keyword\">return</span> getBeanFactory();<span class=\"hljs-comment\">// 获取BeanFactory，父类的抽象方法继承并由其子类实现</span><br>&#125;<br><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">protected</span> <span class=\"hljs-keyword\">abstract</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">refreshBeanFactory</span><span class=\"hljs-params\">()</span> <span class=\"hljs-keyword\">throws</span> BeansException, IllegalStateException</span>;<br><br><span class=\"hljs-meta\">@Override</span> <span class=\"hljs-comment\">// 该方法在ConfigurableApplicationContext接口中定义</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">abstract</span> ConfigurableListableBeanFactory <span class=\"hljs-title\">getBeanFactory</span><span class=\"hljs-params\">()</span> <span class=\"hljs-keyword\">throws</span> IllegalStateException</span>;<br></code></pre></td></tr></table></figure></li>\n</ul>\n<h3 id=\"5-3-1-refreshBeanFactory-方法的一种实现\"><a href=\"#5-3-1-refreshBeanFactory-方法的一种实现\" class=\"headerlink\" title=\"5.3.1 refreshBeanFactory()方法的一种实现\"></a>5.3.1 refreshBeanFactory()方法的一种实现</h3><ul>\n<li>org.springframework.context.support.AbstractRefreshableApplicationContext中的具体实现如下</li>\n<li>refreshBeanFactory()方法是AbstractApplicationContext中定义的抽象方法</li>\n<li>AbstractRefreshableApplicationContext中的refreshBeanFactory()方法是该抽象方法的一个具体实现</li>\n<li>主要作用：刷新BeanFactory<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">// AbstractRefreshableApplicationContext中refreshBeanFactory()方法的一种实现</span><br><span class=\"hljs-meta\">@Override</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">protected</span> <span class=\"hljs-keyword\">final</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">refreshBeanFactory</span><span class=\"hljs-params\">()</span> <span class=\"hljs-keyword\">throws</span> BeansException </span>&#123;<br>\t<span class=\"hljs-comment\">// 检查上下文中是否已存在BeanFactory</span><br>\t<span class=\"hljs-keyword\">if</span> (hasBeanFactory()) &#123;<br>\t\t<span class=\"hljs-comment\">// 存在BeanFactory时先销毁已存在的BeanFactory</span><br>\t\tdestroyBeans();<span class=\"hljs-comment\">//调用AbstractApplicationContext中的实现</span><br>\t\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t\t* 以下是AbstractApplicationContext中destroyBeans()方法的实现</span><br><span class=\"hljs-comment\">\t\t* protected void destroyBeans() &#123;</span><br><span class=\"hljs-comment\">\t\t*    getBeanFactory().destroySingletons();</span><br><span class=\"hljs-comment\">\t\t* &#125;</span><br><span class=\"hljs-comment\">\t\t*/</span><br>\t\tcloseBeanFactory();<span class=\"hljs-comment\">// 调用本抽象类中的closeBeanFactory()方法，具体代码在下面列出</span><br>\t&#125;<br>\t<span class=\"hljs-keyword\">try</span> &#123;<br>\t\t<span class=\"hljs-comment\">// 创建新的BeanFactory</span><br>\t\t<span class=\"hljs-comment\">// 下面这行代码只会创建一个空的BeanFactory，并未有任何Bean</span><br>\t\tDefaultListableBeanFactory beanFactory = createBeanFactory();<br>\t\tbeanFactory.setSerializationId(getId());<br>\t\tcustomizeBeanFactory(beanFactory);<br>\t\tloadBeanDefinitions(beanFactory);<span class=\"hljs-comment\">// refreshBeanFactory()方法实现的核心</span><br>\t\t<span class=\"hljs-keyword\">synchronized</span> (<span class=\"hljs-keyword\">this</span>.beanFactoryMonitor) &#123;<br>\t\t\t<span class=\"hljs-keyword\">this</span>.beanFactory = beanFactory;<br>\t\t&#125;<br>\t&#125;<br>\t<span class=\"hljs-keyword\">catch</span> (IOException ex) &#123;<br>\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> ApplicationContextException(<span class=\"hljs-string\">&quot;I/O error parsing bean definition source for &quot;</span> + getDisplayName(), ex);<br>\t&#125;<br>&#125;<br><br><span class=\"hljs-comment\">// AbstractRefreshableApplicationContext抽象类中refreshBeanFactory()方法内调用的closeBeanFactory()方法</span><br><span class=\"hljs-meta\">@Override</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">protected</span> <span class=\"hljs-keyword\">final</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">closeBeanFactory</span><span class=\"hljs-params\">()</span> </span>&#123;<br>\t<span class=\"hljs-keyword\">synchronized</span> (<span class=\"hljs-keyword\">this</span>.beanFactoryMonitor) &#123;<br>\t\t<span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">this</span>.beanFactory != <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t\t<span class=\"hljs-comment\">//销毁已存在的BeanFactory</span><br>\t\t\t<span class=\"hljs-keyword\">this</span>.beanFactory.setSerializationId(<span class=\"hljs-keyword\">null</span>);<br>\t\t\t<span class=\"hljs-keyword\">this</span>.beanFactory = <span class=\"hljs-keyword\">null</span>;<br>\t\t&#125;<br>\t&#125;<br>&#125;<br><br><span class=\"hljs-comment\">//AbstractRefreshableApplicationContext抽象类中refreshBeanFactory()方法内调用createBeanFactory()方法</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">protected</span> DefaultListableBeanFactory <span class=\"hljs-title\">createBeanFactory</span><span class=\"hljs-params\">()</span> </span>&#123;<br>\t<span class=\"hljs-comment\">// 调用下面 AbstractApplicationContext中的getInternalParentBeanFactory()方法</span><br>\t<span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> DefaultListableBeanFactory(getInternalParentBeanFactory());<br>&#125;<br></code></pre></td></tr></table></figure></li>\n</ul>\n<h4 id=\"AbstractApplicationContext中的getInternalParentBeanFactory-方法\"><a href=\"#AbstractApplicationContext中的getInternalParentBeanFactory-方法\" class=\"headerlink\" title=\"AbstractApplicationContext中的getInternalParentBeanFactory()方法\"></a>AbstractApplicationContext中的getInternalParentBeanFactory()方法</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-meta\">@Nullable</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">protected</span> BeanFactory <span class=\"hljs-title\">getInternalParentBeanFactory</span><span class=\"hljs-params\">()</span> </span>&#123;<br>\t<span class=\"hljs-keyword\">return</span> (getParent() <span class=\"hljs-keyword\">instanceof</span> ConfigurableApplicationContext ?<br>\t\t\t((ConfigurableApplicationContext) getParent()).getBeanFactory() : getParent());<br>&#125;<br></code></pre></td></tr></table></figure>\n\n<h4 id=\"DefaultListableBeanFactory的构造方法\"><a href=\"#DefaultListableBeanFactory的构造方法\" class=\"headerlink\" title=\"DefaultListableBeanFactory的构造方法\"></a>DefaultListableBeanFactory的构造方法</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-title\">DefaultListableBeanFactory</span><span class=\"hljs-params\">(<span class=\"hljs-meta\">@Nullable</span> BeanFactory parentBeanFactory)</span> </span>&#123;<br>\t<span class=\"hljs-keyword\">super</span>(parentBeanFactory);<span class=\"hljs-comment\">// 调用AbstractAutowireCapableBeanFactory(抽象类)的构造方法</span><br>&#125;<br></code></pre></td></tr></table></figure>\n\n<h4 id=\"DefaultListableBeanFactory父类AbstractAutowireCapableBeanFactory-抽象类-的构造方法\"><a href=\"#DefaultListableBeanFactory父类AbstractAutowireCapableBeanFactory-抽象类-的构造方法\" class=\"headerlink\" title=\"DefaultListableBeanFactory父类AbstractAutowireCapableBeanFactory(抽象类)的构造方法\"></a>DefaultListableBeanFactory父类AbstractAutowireCapableBeanFactory(抽象类)的构造方法</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-title\">AbstractAutowireCapableBeanFactory</span><span class=\"hljs-params\">(<span class=\"hljs-meta\">@Nullable</span> BeanFactory parentBeanFactory)</span> </span>&#123;<br>\t<span class=\"hljs-keyword\">this</span>();<br>\tsetParentBeanFactory(parentBeanFactory);<br>&#125;<br></code></pre></td></tr></table></figure>\n\n\n<h4 id=\"AbstractRefreshableApplicationContext中的customizeBeanFactory-beanFactory-方法\"><a href=\"#AbstractRefreshableApplicationContext中的customizeBeanFactory-beanFactory-方法\" class=\"headerlink\" title=\"AbstractRefreshableApplicationContext中的customizeBeanFactory(beanFactory)方法\"></a>AbstractRefreshableApplicationContext中的customizeBeanFactory(beanFactory)方法</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">protected</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">customizeBeanFactory</span><span class=\"hljs-params\">(DefaultListableBeanFactory beanFactory)</span> </span>&#123;<br>\t<span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">this</span>.allowBeanDefinitionOverriding != <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\tbeanFactory.setAllowBeanDefinitionOverriding(<span class=\"hljs-keyword\">this</span>.allowBeanDefinitionOverriding);<br>\t&#125;<br>\t<span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">this</span>.allowCircularReferences != <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\tbeanFactory.setAllowCircularReferences(<span class=\"hljs-keyword\">this</span>.allowCircularReferences);<br>\t&#125;<br>&#125;<br></code></pre></td></tr></table></figure>\n\n<h4 id=\"AbstractRefreshableApplicationContext中的loadBeanDefinitions-beanFactory-方法\"><a href=\"#AbstractRefreshableApplicationContext中的loadBeanDefinitions-beanFactory-方法\" class=\"headerlink\" title=\"AbstractRefreshableApplicationContext中的loadBeanDefinitions(beanFactory)方法\"></a>AbstractRefreshableApplicationContext中的loadBeanDefinitions(beanFactory)方法</h4><ul>\n<li>是实现refreshBeanFactory()方法的核心</li>\n<li>org.springframework.context.support.AbstractRefreshableApplicationContext中定义的抽象方法<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">protected</span> <span class=\"hljs-keyword\">abstract</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">loadBeanDefinitions</span><span class=\"hljs-params\">(DefaultListableBeanFactory beanFactory)</span></span><br><span class=\"hljs-function\">\t\t<span class=\"hljs-keyword\">throws</span> BeansException, IOException</span>;<br></code></pre></td></tr></table></figure></li>\n<li>该抽象方法的一个具体实现在org.springframework.context.support.AbstractXmlApplicationContext中</li>\n</ul>\n<h4 id=\"org-springframework-context-support-AbstractXmlApplicationContext中的loadBeanDefinitions-DefaultListableBeanFactory-beanFactory-方法\"><a href=\"#org-springframework-context-support-AbstractXmlApplicationContext中的loadBeanDefinitions-DefaultListableBeanFactory-beanFactory-方法\" class=\"headerlink\" title=\"org.springframework.context.support.AbstractXmlApplicationContext中的loadBeanDefinitions(DefaultListableBeanFactory beanFactory)方法\"></a>org.springframework.context.support.AbstractXmlApplicationContext中的loadBeanDefinitions(DefaultListableBeanFactory beanFactory)方法</h4><ul>\n<li>org.springframework.context.support.AbstractRefreshableApplicationContext中定义的抽象方法loadBeanDefinitions(DefaultListableBeanFactory beanFactory)的一个实现<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-meta\">@Override</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">protected</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">loadBeanDefinitions</span><span class=\"hljs-params\">(DefaultListableBeanFactory beanFactory)</span> <span class=\"hljs-keyword\">throws</span> BeansException, IOException </span>&#123;<br>\t<span class=\"hljs-comment\">// Create a new XmlBeanDefinitionReader for the given BeanFactory.</span><br>\t<span class=\"hljs-comment\">// 通过上一步创建的空BeanFactory来创建新的XmlBeanDefinitionReader对象</span><br>\t<span class=\"hljs-comment\">// XmlBeanDefinitionReader用于解析xml文件中定义的bean</span><br>\tXmlBeanDefinitionReader beanDefinitionReader = <span class=\"hljs-keyword\">new</span> XmlBeanDefinitionReader(beanFactory); <span class=\"hljs-comment\">//</span><br><br>\t<span class=\"hljs-comment\">// Configure the bean definition reader with this context&#x27;s</span><br>\t<span class=\"hljs-comment\">// resource loading environment.</span><br>\tbeanDefinitionReader.setEnvironment(<span class=\"hljs-keyword\">this</span>.getEnvironment());<br>\tbeanDefinitionReader.setResourceLoader(<span class=\"hljs-keyword\">this</span>);<br>\tbeanDefinitionReader.setEntityResolver(<span class=\"hljs-keyword\">new</span> ResourceEntityResolver(<span class=\"hljs-keyword\">this</span>));<br><br>\t<span class=\"hljs-comment\">// Allow a subclass to provide custom initialization of the reader,</span><br>\t<span class=\"hljs-comment\">// then proceed with actually loading the bean definitions.</span><br>\tinitBeanDefinitionReader(beanDefinitionReader);<br>\tloadBeanDefinitions(beanDefinitionReader); <span class=\"hljs-comment\">//这是一个重载方法，入参是上面生成的beanDefinitionReader</span><br>&#125;<br></code></pre></td></tr></table></figure></li>\n</ul>\n<h4 id=\"new-XmlBeanDefinitionReader-beanFactory\"><a href=\"#new-XmlBeanDefinitionReader-beanFactory\" class=\"headerlink\" title=\"new XmlBeanDefinitionReader(beanFactory)\"></a>new XmlBeanDefinitionReader(beanFactory)</h4><ul>\n<li>XmlBeanDefinitionReader(beanFactory)构造方法调用其父类AbstractBeanDefinitionReader的构造方法，具体如下<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">protected</span> <span class=\"hljs-title\">AbstractBeanDefinitionReader</span><span class=\"hljs-params\">(BeanDefinitionRegistry registry)</span> </span>&#123;<br>\tAssert.notNull(registry, <span class=\"hljs-string\">&quot;BeanDefinitionRegistry must not be null&quot;</span>);<br>\t<span class=\"hljs-keyword\">this</span>.registry = registry;<br><br>\t<span class=\"hljs-comment\">// Determine ResourceLoader to use.</span><br>\t<span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">this</span>.registry <span class=\"hljs-keyword\">instanceof</span> ResourceLoader) &#123;<br>\t\t<span class=\"hljs-keyword\">this</span>.resourceLoader = (ResourceLoader) <span class=\"hljs-keyword\">this</span>.registry;<br>\t&#125;<br>\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t<span class=\"hljs-keyword\">this</span>.resourceLoader = <span class=\"hljs-keyword\">new</span> PathMatchingResourcePatternResolver();<br>\t&#125;<br><br>\t<span class=\"hljs-comment\">// Inherit Environment if possible</span><br>\t<span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">this</span>.registry <span class=\"hljs-keyword\">instanceof</span> EnvironmentCapable) &#123;<br>\t\t<span class=\"hljs-keyword\">this</span>.environment = ((EnvironmentCapable) <span class=\"hljs-keyword\">this</span>.registry).getEnvironment();<br>\t&#125;<br>\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t<span class=\"hljs-keyword\">this</span>.environment = <span class=\"hljs-keyword\">new</span> StandardEnvironment();<br>\t&#125;<br>&#125;<br></code></pre></td></tr></table></figure></li>\n</ul>\n<h4 id=\"AbstractXmlApplicationContext抽象类中的initBeanDefinitionReader-beanDefinitionReader-方法\"><a href=\"#AbstractXmlApplicationContext抽象类中的initBeanDefinitionReader-beanDefinitionReader-方法\" class=\"headerlink\" title=\"AbstractXmlApplicationContext抽象类中的initBeanDefinitionReader(beanDefinitionReader)方法\"></a>AbstractXmlApplicationContext抽象类中的initBeanDefinitionReader(beanDefinitionReader)方法</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">protected</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">initBeanDefinitionReader</span><span class=\"hljs-params\">(XmlBeanDefinitionReader reader)</span> </span>&#123;<br>\treader.setValidating(<span class=\"hljs-keyword\">this</span>.validating);<br>&#125;<br></code></pre></td></tr></table></figure>\n\n<h4 id=\"AbstractXmlApplicationContext抽象类中的loadBeanDefinitions-XmlBeanDefinitionReader-reader-方法\"><a href=\"#AbstractXmlApplicationContext抽象类中的loadBeanDefinitions-XmlBeanDefinitionReader-reader-方法\" class=\"headerlink\" title=\"AbstractXmlApplicationContext抽象类中的loadBeanDefinitions(XmlBeanDefinitionReader reader)方法\"></a>AbstractXmlApplicationContext抽象类中的loadBeanDefinitions(XmlBeanDefinitionReader reader)方法</h4><ul>\n<li>主要功能是解析资源文件的位置</li>\n<li>调用XmlBeanDefinitionReader对象的loadBeanDefinitions方法解析bean的定义<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">protected</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">loadBeanDefinitions</span><span class=\"hljs-params\">(XmlBeanDefinitionReader reader)</span> <span class=\"hljs-keyword\">throws</span> BeansException, IOException </span>&#123;<br>\tResource[] configResources = getConfigResources();<br>\t<span class=\"hljs-keyword\">if</span> (configResources != <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\treader.loadBeanDefinitions(configResources); <span class=\"hljs-comment\">//具体调用AbstractBeanDefinitionReader中实现的loadBeanDefinitions(Resource... resources)方法</span><br>\t&#125;<br>\tString[] configLocations = getConfigLocations();<br>\t<span class=\"hljs-keyword\">if</span> (configLocations != <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\treader.loadBeanDefinitions(configLocations);<span class=\"hljs-comment\">//具体调用AbstractBeanDefinitionReader中实现的loadBeanDefinitions(String... locations)</span><br>\t&#125;<br>&#125;<br></code></pre></td></tr></table></figure></li>\n</ul>\n<h5 id=\"reader-loadBeanDefinitions-configResources-方法与reader-loadBeanDefinitions-configLocations-方法\"><a href=\"#reader-loadBeanDefinitions-configResources-方法与reader-loadBeanDefinitions-configLocations-方法\" class=\"headerlink\" title=\"reader.loadBeanDefinitions(configResources)方法与reader.loadBeanDefinitions(configLocations)方法\"></a>reader.loadBeanDefinitions(configResources)方法与reader.loadBeanDefinitions(configLocations)方法</h5><ul>\n<li>XmlBeanDefinitionReader对象的loadBeanDefinitions方法用于解析bean的定义</li>\n<li>reader是XmlBeanDefinitionReader类型的对象，loadBeanDefinitions方法定义在BeanDefinitionReader接口中，</li>\n<li>loadBeanDefinitions方法具体是在AbstractBeanDefinitionReader抽象类中实现的，具体代码如下：<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-meta\">@Override</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">loadBeanDefinitions</span><span class=\"hljs-params\">(Resource... resources)</span> <span class=\"hljs-keyword\">throws</span> BeanDefinitionStoreException </span>&#123;<br>\tAssert.notNull(resources, <span class=\"hljs-string\">&quot;Resource array must not be null&quot;</span>);<br>\t<span class=\"hljs-keyword\">int</span> count = <span class=\"hljs-number\">0</span>;<br>\t<span class=\"hljs-comment\">// 遍历每一个资源并依次调用重载方法loadBeanDefinitions(Resource resource)，定义在XmlBeanDefinitionReader中，具体实现在XmlBeanDefinitionReader中</span><br>\t<span class=\"hljs-keyword\">for</span> (Resource resource : resources) &#123;<br>\t\tcount += loadBeanDefinitions(resource);<span class=\"hljs-comment\">//</span><br>\t&#125;<br>\t<span class=\"hljs-keyword\">return</span> count;<br>&#125;<br><br><span class=\"hljs-meta\">@Override</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">loadBeanDefinitions</span><span class=\"hljs-params\">(String... locations)</span> <span class=\"hljs-keyword\">throws</span> BeanDefinitionStoreException </span>&#123;<br>\tAssert.notNull(locations, <span class=\"hljs-string\">&quot;Location array must not be null&quot;</span>);<br>\t<span class=\"hljs-keyword\">int</span> count = <span class=\"hljs-number\">0</span>;<br>\t<span class=\"hljs-comment\">//遍历资源数组，调用重载方法loadBeanDefinitions(String location)</span><br>\t<span class=\"hljs-keyword\">for</span> (String location : locations) &#123;<br>\t\tcount += loadBeanDefinitions(location);<span class=\"hljs-comment\">//</span><br>\t&#125;<br>\t<span class=\"hljs-keyword\">return</span> count;<br>&#125;<br><br></code></pre></td></tr></table></figure></li>\n</ul>\n<h4 id=\"count-loadBeanDefinitions-resource-中的loadBeanDefinitions-resource-方法\"><a href=\"#count-loadBeanDefinitions-resource-中的loadBeanDefinitions-resource-方法\" class=\"headerlink\" title=\"count += loadBeanDefinitions(resource)中的loadBeanDefinitions(resource)方法\"></a>count += loadBeanDefinitions(resource)中的loadBeanDefinitions(resource)方法</h4><ul>\n<li>loadBeanDefinitions(resource)方法在BeanDefinitionReader接口中定义，具体实现是在XmlBeanDefinitionReader中</li>\n<li>XmlBeanDefinitionReader中的实现代码如下：<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-meta\">@Override</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">loadBeanDefinitions</span><span class=\"hljs-params\">(Resource resource)</span> <span class=\"hljs-keyword\">throws</span> BeanDefinitionStoreException </span>&#123;<br>\t<span class=\"hljs-keyword\">return</span> loadBeanDefinitions(<span class=\"hljs-keyword\">new</span> EncodedResource(resource));<br>&#125;<br></code></pre></td></tr></table></figure></li>\n<li>可以看到，上面的方法又调用了loadBeanDefinitions(new EncodedResource(resource))方法，该方法在BeanDefinitionReader接口中定义，具体实现在XmlBeanDefinitionReader中,具体实现，详细代码如下：<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">loadBeanDefinitions</span><span class=\"hljs-params\">(EncodedResource encodedResource)</span> <span class=\"hljs-keyword\">throws</span> BeanDefinitionStoreException </span>&#123;<br>\tAssert.notNull(encodedResource, <span class=\"hljs-string\">&quot;EncodedResource must not be null&quot;</span>);<br>\t<span class=\"hljs-keyword\">if</span> (logger.isTraceEnabled()) &#123;<br>\t\tlogger.trace(<span class=\"hljs-string\">&quot;Loading XML bean definitions from &quot;</span> + encodedResource);<br>\t&#125;<br><br>\tSet&lt;EncodedResource&gt; currentResources = <span class=\"hljs-keyword\">this</span>.resourcesCurrentlyBeingLoaded.get();<br>\t<span class=\"hljs-keyword\">if</span> (currentResources == <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\tcurrentResources = <span class=\"hljs-keyword\">new</span> HashSet&lt;&gt;(<span class=\"hljs-number\">4</span>);<br>\t\t<span class=\"hljs-keyword\">this</span>.resourcesCurrentlyBeingLoaded.set(currentResources);<br>\t&#125;<br>\t<span class=\"hljs-keyword\">if</span> (!currentResources.add(encodedResource)) &#123;<br>\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> BeanDefinitionStoreException(<span class=\"hljs-string\">&quot;Detected cyclic loading of &quot;</span> + encodedResource + <span class=\"hljs-string\">&quot; - check your import definitions!&quot;</span>);<br>\t&#125;<br>\t<span class=\"hljs-keyword\">try</span> &#123;<br>\t\t<span class=\"hljs-comment\">//以流的形式读取资源文件</span><br>\t\tInputStream inputStream = encodedResource.getResource().getInputStream();<br>\t\t<span class=\"hljs-keyword\">try</span> &#123;<br>\t\t\tInputSource inputSource = <span class=\"hljs-keyword\">new</span> InputSource(inputStream);<br>\t\t\t<span class=\"hljs-keyword\">if</span> (encodedResource.getEncoding() != <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t\t\tinputSource.setEncoding(encodedResource.getEncoding());<br>\t\t\t&#125;<br>\t\t\t<span class=\"hljs-comment\">// 调用doLoadBeanDefinitions解析载入文件中的bean定义</span><br>\t\t\t<span class=\"hljs-keyword\">return</span> doLoadBeanDefinitions(inputSource, encodedResource.getResource());<br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">finally</span> &#123;<br>\t\t\tinputStream.close();<br>\t\t&#125;<br>\t&#125;<br>\t<span class=\"hljs-keyword\">catch</span> (IOException ex) &#123;<br>\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> BeanDefinitionStoreException(<br>\t\t\t\t<span class=\"hljs-string\">&quot;IOException parsing XML document from &quot;</span> + encodedResource.getResource(), ex);<br>\t&#125;<br>\t<span class=\"hljs-keyword\">finally</span> &#123;<br>\t\tcurrentResources.remove(encodedResource);<br>\t\t<span class=\"hljs-keyword\">if</span> (currentResources.isEmpty()) &#123;<br>\t\t\t<span class=\"hljs-keyword\">this</span>.resourcesCurrentlyBeingLoaded.remove();<br>\t\t&#125;<br>\t&#125;<br>&#125;<br></code></pre></td></tr></table></figure></li>\n</ul>\n<h4 id=\"count-loadBeanDefinitions-location-中的loadBeanDefinitions-location-方法\"><a href=\"#count-loadBeanDefinitions-location-中的loadBeanDefinitions-location-方法\" class=\"headerlink\" title=\"count += loadBeanDefinitions(location)中的loadBeanDefinitions(location)方法\"></a>count += loadBeanDefinitions(location)中的loadBeanDefinitions(location)方法</h4><ul>\n<li>loadBeanDefinitions(location)方法的具体实现AbstractBeanDefinitionReader中；<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-meta\">@Override</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">loadBeanDefinitions</span><span class=\"hljs-params\">(String location)</span> <span class=\"hljs-keyword\">throws</span> BeanDefinitionStoreException </span>&#123;<br>\t<span class=\"hljs-keyword\">return</span> loadBeanDefinitions(location, <span class=\"hljs-keyword\">null</span>);<br>&#125;<br><br></code></pre></td></tr></table></figure></li>\n<li>解析资源文件的路径，得到Resource[]资源数组</li>\n<li>上面AbstractBeanDefinitionReader中的loadBeanDefinitions(String location)方法又调用了同类里面的一个重载方法loadBeanDefinitions(String location, @Nullable Set<Resource> actualResources) 具体实现如下：<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">loadBeanDefinitions</span><span class=\"hljs-params\">(String location, <span class=\"hljs-meta\">@Nullable</span> Set&lt;Resource&gt; actualResources)</span> <span class=\"hljs-keyword\">throws</span> BeanDefinitionStoreException </span>&#123;<br>\t\tResourceLoader resourceLoader = getResourceLoader();<br>\t\t<span class=\"hljs-keyword\">if</span> (resourceLoader == <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> BeanDefinitionStoreException(<br>\t\t\t\t\t<span class=\"hljs-string\">&quot;Cannot load bean definitions from location [&quot;</span> + location + <span class=\"hljs-string\">&quot;]: no ResourceLoader available&quot;</span>);<br>\t\t&#125;<br><br>\t\t<span class=\"hljs-keyword\">if</span> (resourceLoader <span class=\"hljs-keyword\">instanceof</span> ResourcePatternResolver) &#123;<br>\t\t\t<span class=\"hljs-comment\">// Resource pattern matching available.</span><br>\t\t\t<span class=\"hljs-keyword\">try</span> &#123;<br>\t\t\t\tResource[] resources = ((ResourcePatternResolver) resourceLoader).getResources(location);<br>\t\t\t\t<span class=\"hljs-comment\">//下一行的核心逻辑  调用上面提到的重载方法loadBeanDefinitions(Resource resource)</span><br>\t\t\t\t<span class=\"hljs-keyword\">int</span> count = loadBeanDefinitions(resources);<br>\t\t\t\t<span class=\"hljs-keyword\">if</span> (actualResources != <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t\t\t\tCollections.addAll(actualResources, resources);<br>\t\t\t\t&#125;<br>\t\t\t\t<span class=\"hljs-keyword\">if</span> (logger.isTraceEnabled()) &#123;<br>\t\t\t\t\tlogger.trace(<span class=\"hljs-string\">&quot;Loaded &quot;</span> + count + <span class=\"hljs-string\">&quot; bean definitions from location pattern [&quot;</span> + location + <span class=\"hljs-string\">&quot;]&quot;</span>);<br>\t\t\t\t&#125;<br>\t\t\t\t<span class=\"hljs-keyword\">return</span> count;<br>\t\t\t&#125;<br>\t\t\t<span class=\"hljs-keyword\">catch</span> (IOException ex) &#123;<br>\t\t\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> BeanDefinitionStoreException(<br>\t\t\t\t\t\t<span class=\"hljs-string\">&quot;Could not resolve bean definition resource pattern [&quot;</span> + location + <span class=\"hljs-string\">&quot;]&quot;</span>, ex);<br>\t\t\t&#125;<br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t\t<span class=\"hljs-comment\">// Can only load single resources by absolute URL.</span><br>\t\t\tResource resource = resourceLoader.getResource(location);<br>\t\t\t<span class=\"hljs-keyword\">int</span> count = loadBeanDefinitions(resource);<br>\t\t\t<span class=\"hljs-keyword\">if</span> (actualResources != <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t\t\tactualResources.add(resource);<br>\t\t\t&#125;<br>\t\t\t<span class=\"hljs-keyword\">if</span> (logger.isTraceEnabled()) &#123;<br>\t\t\t\tlogger.trace(<span class=\"hljs-string\">&quot;Loaded &quot;</span> + count + <span class=\"hljs-string\">&quot; bean definitions from location [&quot;</span> + location + <span class=\"hljs-string\">&quot;]&quot;</span>);<br>\t\t\t&#125;<br>\t\t\t<span class=\"hljs-keyword\">return</span> count;<br>\t\t&#125;<br>\t&#125;<br></code></pre></td></tr></table></figure></li>\n</ul>\n<h4 id=\"XmlBeanDefinitionReader类中的doLoadBeanDefinitions-InputSource-inputSource-Resource-resource-方法\"><a href=\"#XmlBeanDefinitionReader类中的doLoadBeanDefinitions-InputSource-inputSource-Resource-resource-方法\" class=\"headerlink\" title=\"XmlBeanDefinitionReader类中的doLoadBeanDefinitions(InputSource inputSource, Resource resource)方法\"></a>XmlBeanDefinitionReader类中的doLoadBeanDefinitions(InputSource inputSource, Resource resource)方法</h4><ul>\n<li>该方法是载入定义bean的核心方法</li>\n<li>代码位置：org.springframework.beans.factory.xml.XmlBeanDefinitionReader<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">protected</span> <span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">doLoadBeanDefinitions</span><span class=\"hljs-params\">(InputSource inputSource, Resource resource)</span></span><br><span class=\"hljs-function\">\t\t<span class=\"hljs-keyword\">throws</span> BeanDefinitionStoreException </span>&#123;<br><br>\t<span class=\"hljs-keyword\">try</span> &#123;<br>\t\t<span class=\"hljs-comment\">// 解析XML文档</span><br>\t\tDocument doc = doLoadDocument(inputSource, resource);<br>\t\t<span class=\"hljs-comment\">// 下面一行代码 注册Bean</span><br>\t\t<span class=\"hljs-keyword\">int</span> count = registerBeanDefinitions(doc, resource);<br>\t\t<span class=\"hljs-keyword\">if</span> (logger.isDebugEnabled()) &#123;<br>\t\t\tlogger.debug(<span class=\"hljs-string\">&quot;Loaded &quot;</span> + count + <span class=\"hljs-string\">&quot; bean definitions from &quot;</span> + resource);<br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">return</span> count;<br>\t&#125;<br>\t<span class=\"hljs-keyword\">catch</span> (BeanDefinitionStoreException ex) &#123;<br>\t\t<span class=\"hljs-keyword\">throw</span> ex;<br>\t&#125;<br>\t<span class=\"hljs-keyword\">catch</span> (SAXParseException ex) &#123;<br>\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> XmlBeanDefinitionStoreException(resource.getDescription(),<br>\t\t\t\t<span class=\"hljs-string\">&quot;Line &quot;</span> + ex.getLineNumber() + <span class=\"hljs-string\">&quot; in XML document from &quot;</span> + resource + <span class=\"hljs-string\">&quot; is invalid&quot;</span>, ex);<br>\t&#125;<br>\t<span class=\"hljs-keyword\">catch</span> (SAXException ex) &#123;<br>\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> XmlBeanDefinitionStoreException(resource.getDescription(),<br>\t\t\t\t<span class=\"hljs-string\">&quot;XML document from &quot;</span> + resource + <span class=\"hljs-string\">&quot; is invalid&quot;</span>, ex);<br>\t&#125;<br>\t<span class=\"hljs-keyword\">catch</span> (ParserConfigurationException ex) &#123;<br>\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> BeanDefinitionStoreException(resource.getDescription(),<br>\t\t\t\t<span class=\"hljs-string\">&quot;Parser configuration exception parsing XML from &quot;</span> + resource, ex);<br>\t&#125;<br>\t<span class=\"hljs-keyword\">catch</span> (IOException ex) &#123;<br>\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> BeanDefinitionStoreException(resource.getDescription(),<br>\t\t\t\t<span class=\"hljs-string\">&quot;IOException parsing XML document from &quot;</span> + resource, ex);<br>\t&#125;<br>\t<span class=\"hljs-keyword\">catch</span> (Throwable ex) &#123;<br>\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> BeanDefinitionStoreException(resource.getDescription(),<br>\t\t\t\t<span class=\"hljs-string\">&quot;Unexpected exception parsing XML document from &quot;</span> + resource, ex);<br>\t&#125;<br>&#125;<br><br><span class=\"hljs-comment\">// 注册Bean的方法</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">registerBeanDefinitions</span><span class=\"hljs-params\">(Document doc, Resource resource)</span> <span class=\"hljs-keyword\">throws</span> BeanDefinitionStoreException </span>&#123;<br>\tBeanDefinitionDocumentReader documentReader = createBeanDefinitionDocumentReader();<br>\t<span class=\"hljs-keyword\">int</span> countBefore = getRegistry().getBeanDefinitionCount();<br>\t<span class=\"hljs-comment\">// 注册bean的核心逻辑</span><br>\tdocumentReader.registerBeanDefinitions(doc, createReaderContext(resource));<br>\t<span class=\"hljs-keyword\">return</span> getRegistry().getBeanDefinitionCount() - countBefore;<br>&#125;<br></code></pre></td></tr></table></figure></li>\n</ul>\n<h4 id=\"DefaultBeanDefinitionDocumentReader-registerBeanDefinitions-Document-doc-XmlReaderContext-readerContext\"><a href=\"#DefaultBeanDefinitionDocumentReader-registerBeanDefinitions-Document-doc-XmlReaderContext-readerContext\" class=\"headerlink\" title=\"DefaultBeanDefinitionDocumentReader.registerBeanDefinitions(Document doc, XmlReaderContext readerContext)\"></a>DefaultBeanDefinitionDocumentReader.registerBeanDefinitions(Document doc, XmlReaderContext readerContext)</h4><ul>\n<li>功能：</li>\n<li>代码位置：org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-meta\">@Override</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">registerBeanDefinitions</span><span class=\"hljs-params\">(Document doc, XmlReaderContext readerContext)</span> </span>&#123;<br>\t<span class=\"hljs-keyword\">this</span>.readerContext = readerContext;<br>\t<span class=\"hljs-comment\">// 核心逻辑</span><br>\tdoRegisterBeanDefinitions(doc.getDocumentElement());<br>&#125;<br><br><span class=\"hljs-comment\">// registerBeanDefinitions方法中调用的doRegisterBeanDefinitions方法</span><br><span class=\"hljs-meta\">@SuppressWarnings(&quot;deprecation&quot;)</span>  <span class=\"hljs-comment\">// for Environment.acceptsProfiles(String...)</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">protected</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">doRegisterBeanDefinitions</span><span class=\"hljs-params\">(Element root)</span> </span>&#123;<br>\t<span class=\"hljs-comment\">// Any nested &lt;beans&gt; elements will cause recursion in this method. In</span><br>\t<span class=\"hljs-comment\">// order to propagate and preserve &lt;beans&gt; default-* attributes correctly,</span><br>\t<span class=\"hljs-comment\">// keep track of the current (parent) delegate, which may be null. Create</span><br>\t<span class=\"hljs-comment\">// the new (child) delegate with a reference to the parent for fallback purposes,</span><br>\t<span class=\"hljs-comment\">// then ultimately reset this.delegate back to its original (parent) reference.</span><br>\t<span class=\"hljs-comment\">// this behavior emulates a stack of delegates without actually necessitating one.</span><br>\tBeanDefinitionParserDelegate parent = <span class=\"hljs-keyword\">this</span>.delegate;<br>\t<span class=\"hljs-keyword\">this</span>.delegate = createDelegate(getReaderContext(), root, parent);<br><br>\t<span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">this</span>.delegate.isDefaultNamespace(root)) &#123;<br>\t\tString profileSpec = root.getAttribute(PROFILE_ATTRIBUTE);<br>\t\t<span class=\"hljs-keyword\">if</span> (StringUtils.hasText(profileSpec)) &#123;<br>\t\t\tString[] specifiedProfiles = StringUtils.tokenizeToStringArray(<br>\t\t\t\t\tprofileSpec, BeanDefinitionParserDelegate.MULTI_VALUE_ATTRIBUTE_DELIMITERS);<br>\t\t\t<span class=\"hljs-comment\">// We cannot use Profiles.of(...) since profile expressions are not supported</span><br>\t\t\t<span class=\"hljs-comment\">// in XML config. See SPR-12458 for details.</span><br>\t\t\t<span class=\"hljs-keyword\">if</span> (!getReaderContext().getEnvironment().acceptsProfiles(specifiedProfiles)) &#123;<br>\t\t\t\t<span class=\"hljs-keyword\">if</span> (logger.isDebugEnabled()) &#123;<br>\t\t\t\t\tlogger.debug(<span class=\"hljs-string\">&quot;Skipped XML bean definition file due to specified profiles [&quot;</span> + profileSpec +<br>\t\t\t\t\t\t\t<span class=\"hljs-string\">&quot;] not matching: &quot;</span> + getReaderContext().getResource());<br>\t\t\t\t&#125;<br>\t\t\t\t<span class=\"hljs-keyword\">return</span>;<br>\t\t\t&#125;<br>\t\t&#125;<br>\t&#125;<br><br>\tpreProcessXml(root);<br>\t<span class=\"hljs-comment\">// 核心逻辑</span><br>\tparseBeanDefinitions(root, <span class=\"hljs-keyword\">this</span>.delegate);<br>\tpostProcessXml(root);<br><br>\t<span class=\"hljs-keyword\">this</span>.delegate = parent;<br>&#125;<br><br><span class=\"hljs-comment\">// 上面方法中调用的parseBeanDefinitions(root, this.delegate)对应的方法实现</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">protected</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">parseBeanDefinitions</span><span class=\"hljs-params\">(Element root, BeanDefinitionParserDelegate delegate)</span> </span>&#123;<br>\t<span class=\"hljs-keyword\">if</span> (delegate.isDefaultNamespace(root)) &#123;<br>\t\tNodeList nl = root.getChildNodes();<br>\t\t<span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">int</span> i = <span class=\"hljs-number\">0</span>; i &lt; nl.getLength(); i++) &#123;<br>\t\t\tNode node = nl.item(i);<br>\t\t\t<span class=\"hljs-keyword\">if</span> (node <span class=\"hljs-keyword\">instanceof</span> Element) &#123;<br>\t\t\t\tElement ele = (Element) node;<br>\t\t\t\t<span class=\"hljs-keyword\">if</span> (delegate.isDefaultNamespace(ele)) &#123;<br>\t\t\t\t\t<span class=\"hljs-comment\">// 本方法的核心逻辑</span><br>\t\t\t\t\tparseDefaultElement(ele, delegate);<br>\t\t\t\t&#125;<br>\t\t\t\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t\t\t\tdelegate.parseCustomElement(ele);<br>\t\t\t\t&#125;<br>\t\t\t&#125;<br>\t\t&#125;<br>\t&#125;<br>\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\tdelegate.parseCustomElement(root);<br>\t&#125;<br>&#125;<br><br><br><span class=\"hljs-comment\">// 上述方法调用的parseDefaultElement(ele, delegate);的具体实现</span><br><span class=\"hljs-comment\">// 根据bean配置的不同，进入不同分支</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">parseDefaultElement</span><span class=\"hljs-params\">(Element ele, BeanDefinitionParserDelegate delegate)</span> </span>&#123;<br>\t<span class=\"hljs-keyword\">if</span> (delegate.nodeNameEquals(ele, IMPORT_ELEMENT)) &#123;<br>\t\timportBeanDefinitionResource(ele);<br>\t&#125;<br>\t<span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (delegate.nodeNameEquals(ele, ALIAS_ELEMENT)) &#123;<br>\t\tprocessAliasRegistration(ele);<br>\t&#125;<br>\t<span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (delegate.nodeNameEquals(ele, BEAN_ELEMENT)) &#123;<br>\t\t<span class=\"hljs-comment\">// 本文示例会进入该方法</span><br>\t\tprocessBeanDefinition(ele, delegate);<br>\t&#125;<br>\t<span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (delegate.nodeNameEquals(ele, NESTED_BEANS_ELEMENT)) &#123;<br>\t\t<span class=\"hljs-comment\">// recurse</span><br>\t\tdoRegisterBeanDefinitions(ele);<br>\t&#125;<br>&#125;<br><br><span class=\"hljs-comment\">// 上述方法最后进入processBeanDefinition(ele, delegate)后的处理过程：</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">protected</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">processBeanDefinition</span><span class=\"hljs-params\">(Element ele, BeanDefinitionParserDelegate delegate)</span> </span>&#123;<br>\tBeanDefinitionHolder bdHolder = delegate.parseBeanDefinitionElement(ele);<br>\t<span class=\"hljs-keyword\">if</span> (bdHolder != <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\tbdHolder = delegate.decorateBeanDefinitionIfRequired(ele, bdHolder);<br>\t\t<span class=\"hljs-keyword\">try</span> &#123;<br>\t\t\t<span class=\"hljs-comment\">// Register the final decorated instance.</span><br>\t\t\t<span class=\"hljs-comment\">// 注册Bean的关键代码</span><br>\t\t\tBeanDefinitionReaderUtils.registerBeanDefinition(bdHolder, getReaderContext().getRegistry());<br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">catch</span> (BeanDefinitionStoreException ex) &#123;<br>\t\t\tgetReaderContext().error(<span class=\"hljs-string\">&quot;Failed to register bean definition with name &#x27;&quot;</span> +<br>\t\t\t\t\tbdHolder.getBeanName() + <span class=\"hljs-string\">&quot;&#x27;&quot;</span>, ele, ex);<br>\t\t&#125;<br>\t\t<span class=\"hljs-comment\">// Send registration event.</span><br>\t\tgetReaderContext().fireComponentRegistered(<span class=\"hljs-keyword\">new</span> BeanComponentDefinition(bdHolder));<br>\t&#125;<br>&#125;<br></code></pre></td></tr></table></figure></li>\n</ul>\n<h4 id=\"BeanDefinitionReaderUtils的registerBeanDefinition-bdHolder-getReaderContext-getRegistry-方法\"><a href=\"#BeanDefinitionReaderUtils的registerBeanDefinition-bdHolder-getReaderContext-getRegistry-方法\" class=\"headerlink\" title=\"BeanDefinitionReaderUtils的registerBeanDefinition(bdHolder, getReaderContext().getRegistry())方法\"></a>BeanDefinitionReaderUtils的registerBeanDefinition(bdHolder, getReaderContext().getRegistry())方法</h4><ul>\n<li>主要作用：</li>\n<li>代码位置：org.springframework.beans.factory.support.BeanDefinitionReaderUtils<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">registerBeanDefinition</span><span class=\"hljs-params\">(</span></span><br><span class=\"hljs-function\"><span class=\"hljs-params\">\t\tBeanDefinitionHolder definitionHolder, BeanDefinitionRegistry registry)</span></span><br><span class=\"hljs-function\">\t\t<span class=\"hljs-keyword\">throws</span> BeanDefinitionStoreException </span>&#123;<br><br>\t<span class=\"hljs-comment\">// Register bean definition under primary name.</span><br>\tString beanName = definitionHolder.getBeanName();<br>\t<span class=\"hljs-comment\">// 将Bean的名字和BeanDefinition对象进行注册</span><br>\t<span class=\"hljs-comment\">// registerBeanDefinition(beanName, definitionHolder.getBeanDefinition());方法定义在BeanDefinitionRegistry接口中：</span><br>\t<span class=\"hljs-comment\">// 具体实现在中实现</span><br>\tregistry.registerBeanDefinition(beanName, definitionHolder.getBeanDefinition());<br><br>\t<span class=\"hljs-comment\">// Register aliases for bean name, if any.</span><br>\tString[] aliases = definitionHolder.getAliases();<br>\t<span class=\"hljs-keyword\">if</span> (aliases != <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t<span class=\"hljs-keyword\">for</span> (String alias : aliases) &#123;<br>\t\t\tregistry.registerAlias(beanName, alias);<br>\t\t&#125;<br>\t&#125;<br>&#125;<br><br></code></pre></td></tr></table></figure></li>\n</ul>\n<h4 id=\"DefaultListableBeanFactory中registerBeanDefinition-String-beanName-BeanDefinition-beanDefinition\"><a href=\"#DefaultListableBeanFactory中registerBeanDefinition-String-beanName-BeanDefinition-beanDefinition\" class=\"headerlink\" title=\"DefaultListableBeanFactory中registerBeanDefinition(String beanName, BeanDefinition beanDefinition)\"></a>DefaultListableBeanFactory中registerBeanDefinition(String beanName, BeanDefinition beanDefinition)</h4><ul>\n<li>作用：</li>\n<li>DefaultListableBeanFactory的字段beanDefinitionMap是一个ConcurrentHashMap&lt;String, BeanDefinition&gt;，用于存储bean的定义信息</li>\n<li>DefaultListableBeanFactory的字段beanDefinitionNames是一个ArrayList<String>类型数据，用于存储Bean的名称</li>\n<li>代码位置：org.springframework.beans.factory.support.DefaultListableBeanFactory</li>\n<li><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-meta\">@Override</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">registerBeanDefinition</span><span class=\"hljs-params\">(String beanName, BeanDefinition beanDefinition)</span></span><br><span class=\"hljs-function\">\t\t<span class=\"hljs-keyword\">throws</span> BeanDefinitionStoreException </span>&#123;<br><br>\tAssert.hasText(beanName, <span class=\"hljs-string\">&quot;Bean name must not be empty&quot;</span>);<br>\tAssert.notNull(beanDefinition, <span class=\"hljs-string\">&quot;BeanDefinition must not be null&quot;</span>);<br><br>\t<span class=\"hljs-keyword\">if</span> (beanDefinition <span class=\"hljs-keyword\">instanceof</span> AbstractBeanDefinition) &#123;<br>\t\t<span class=\"hljs-keyword\">try</span> &#123;<br>\t\t\t((AbstractBeanDefinition) beanDefinition).validate();<br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">catch</span> (BeanDefinitionValidationException ex) &#123;<br>\t\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> BeanDefinitionStoreException(beanDefinition.getResourceDescription(), beanName,<br>\t\t\t\t\t<span class=\"hljs-string\">&quot;Validation of bean definition failed&quot;</span>, ex);<br>\t\t&#125;<br>\t&#125;<br><br>\tBeanDefinition existingDefinition = <span class=\"hljs-keyword\">this</span>.beanDefinitionMap.get(beanName);<br>\t<span class=\"hljs-comment\">// 查找是否存在同名的bean</span><br>\t<span class=\"hljs-keyword\">if</span> (existingDefinition != <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t<span class=\"hljs-comment\">// 有同名的bean存在时</span><br>\t\t<span class=\"hljs-keyword\">if</span> (!isAllowBeanDefinitionOverriding()) &#123;<br>\t\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> BeanDefinitionOverrideException(beanName, beanDefinition, existingDefinition);<br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (existingDefinition.getRole() &lt; beanDefinition.getRole()) &#123;<br>\t\t\t<span class=\"hljs-comment\">// e.g. was ROLE_APPLICATION, now overriding with ROLE_SUPPORT or ROLE_INFRASTRUCTURE</span><br>\t\t\t<span class=\"hljs-keyword\">if</span> (logger.isInfoEnabled()) &#123;<br>\t\t\t\tlogger.info(<span class=\"hljs-string\">&quot;Overriding user-defined bean definition for bean &#x27;&quot;</span> + beanName +<br>\t\t\t\t\t\t<span class=\"hljs-string\">&quot;&#x27; with a framework-generated bean definition: replacing [&quot;</span> +<br>\t\t\t\t\t\texistingDefinition + <span class=\"hljs-string\">&quot;] with [&quot;</span> + beanDefinition + <span class=\"hljs-string\">&quot;]&quot;</span>);<br>\t\t\t&#125;<br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (!beanDefinition.equals(existingDefinition)) &#123;<br>\t\t\t<span class=\"hljs-keyword\">if</span> (logger.isDebugEnabled()) &#123;<br>\t\t\t\tlogger.debug(<span class=\"hljs-string\">&quot;Overriding bean definition for bean &#x27;&quot;</span> + beanName +<br>\t\t\t\t\t\t<span class=\"hljs-string\">&quot;&#x27; with a different definition: replacing [&quot;</span> + existingDefinition +<br>\t\t\t\t\t\t<span class=\"hljs-string\">&quot;] with [&quot;</span> + beanDefinition + <span class=\"hljs-string\">&quot;]&quot;</span>);<br>\t\t\t&#125;<br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t\t<span class=\"hljs-keyword\">if</span> (logger.isTraceEnabled()) &#123;<br>\t\t\t\tlogger.trace(<span class=\"hljs-string\">&quot;Overriding bean definition for bean &#x27;&quot;</span> + beanName +<br>\t\t\t\t\t\t<span class=\"hljs-string\">&quot;&#x27; with an equivalent definition: replacing [&quot;</span> + existingDefinition +<br>\t\t\t\t\t\t<span class=\"hljs-string\">&quot;] with [&quot;</span> + beanDefinition + <span class=\"hljs-string\">&quot;]&quot;</span>);<br>\t\t\t&#125;<br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">this</span>.beanDefinitionMap.put(beanName, beanDefinition);<br>\t&#125;<br>\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t<span class=\"hljs-comment\">// 没有同名的bean存在时</span><br>\t\t<span class=\"hljs-keyword\">if</span> (hasBeanCreationStarted()) &#123;<br>\t\t\t<span class=\"hljs-comment\">// Cannot modify startup-time collection elements anymore (for stable iteration)</span><br>\t\t\t<span class=\"hljs-keyword\">synchronized</span> (<span class=\"hljs-keyword\">this</span>.beanDefinitionMap) &#123;<br>\t\t\t\t<span class=\"hljs-comment\">// beanDefinitionMap存储beanName:BeanDefinition一一对应的K:V信息</span><br>\t\t\t\t<span class=\"hljs-comment\">// beanName作为key， beanDefinition作为value存入DefaultListableBeanFactory对象的beanDefinitionMap字段中</span><br>\t\t\t\t<span class=\"hljs-comment\">// 完成Bean的注册，将Bean注册到BeanFactory中</span><br>\t\t\t\t<span class=\"hljs-keyword\">this</span>.beanDefinitionMap.put(beanName, beanDefinition);<br>\t\t\t\tList&lt;String&gt; updatedDefinitions = <span class=\"hljs-keyword\">new</span> ArrayList&lt;&gt;(<span class=\"hljs-keyword\">this</span>.beanDefinitionNames.size() + <span class=\"hljs-number\">1</span>);<br>\t\t\t\tupdatedDefinitions.addAll(<span class=\"hljs-keyword\">this</span>.beanDefinitionNames);<br>\t\t\t\tupdatedDefinitions.add(beanName);<br>\t\t\t\t<span class=\"hljs-comment\">// 将所有的beanName保存到beanDefinitionNames字段中，数据类型为</span><br>\t\t\t\t<span class=\"hljs-keyword\">this</span>.beanDefinitionNames = updatedDefinitions;<br>\t\t\t\tremoveManualSingletonName(beanName);<br>\t\t\t&#125;<br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t\t<span class=\"hljs-comment\">// Still in startup registration phase</span><br>\t\t\t<span class=\"hljs-keyword\">this</span>.beanDefinitionMap.put(beanName, beanDefinition);<br>\t\t\t<span class=\"hljs-keyword\">this</span>.beanDefinitionNames.add(beanName);<br>\t\t\tremoveManualSingletonName(beanName);<br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">this</span>.frozenBeanDefinitionNames = <span class=\"hljs-keyword\">null</span>;<br>\t&#125;<br><br>\t<span class=\"hljs-keyword\">if</span> (existingDefinition != <span class=\"hljs-keyword\">null</span> || containsSingleton(beanName)) &#123;<br>\t\tresetBeanDefinition(beanName);<br>\t&#125;<br>&#125;<br><br><br></code></pre></td></tr></table></figure></li>\n<li>到此上面的 loadBeanDefinitions(XmlBeanDefinitionReader reader)方法基本执行完成</li>\n<li>上一级的loadBeanDefinitions(DefaultListableBeanFactory beanFactory)方法也执行到loadBeanDefinitions(XmlBeanDefinitionReader reader)方法后结束</li>\n<li>在上述创建BeanFactory的过程中，BeanDefination注册到BeanFactory（DefaultListableBeanFactory）中的类型为ConcurrentHashMap&lt;String, BeanDefinition&gt;，字段名beanDefinitionMap的为对象中</li>\n<li>向beanDefinitionMap中注册时beanName为key,beanDefination为value；</li>\n<li>DefaultListableBeanFactory对象的字段beanDefinitionNames是一个ArrayList<String>类型数据，用于存储所有已经注册的Bean的名称</li>\n<li>refreshBeanFactory()方法执行完成，接下来进入其下一行的getBeanFactory()方法</li>\n</ul>\n<h3 id=\"getBeanFactory-方法的一种实现\"><a href=\"#getBeanFactory-方法的一种实现\" class=\"headerlink\" title=\"getBeanFactory()方法的一种实现\"></a>getBeanFactory()方法的一种实现</h3><ul>\n<li>AbstractRefreshableApplicationContext中getBeanFactory()方法的一种实现</li>\n<li>获取BeanFactory<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-meta\">@Override</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">final</span> ConfigurableListableBeanFactory <span class=\"hljs-title\">getBeanFactory</span><span class=\"hljs-params\">()</span> </span>&#123;<br>\t<span class=\"hljs-keyword\">synchronized</span> (<span class=\"hljs-keyword\">this</span>.beanFactoryMonitor) &#123;<br>\t\t<span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">this</span>.beanFactory == <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t   <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> IllegalStateException(<span class=\"hljs-string\">&quot;BeanFactory not initialized or already closed - call &#x27;refresh&#x27; before accessing beans via the ApplicationContext&quot;</span>);<br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">this</span>.beanFactory;<br>\t&#125;<br>&#125;<br></code></pre></td></tr></table></figure></li>\n<li>getBeanFactory()方法执行完，标志上一级的方法obtainFreshBeanFactory()执行完成，接下来将进入AbstractApplicationContext抽象类中定义的refresh()模板方法中的第三步定义的prepareBeanFactory(beanFactory)方法</li>\n</ul>\n<h1 id=\"6-prepareBeanFactory-beanFactory-方法\"><a href=\"#6-prepareBeanFactory-beanFactory-方法\" class=\"headerlink\" title=\"6 prepareBeanFactory(beanFactory)方法\"></a>6 prepareBeanFactory(beanFactory)方法</h1><ul>\n<li>代码位置: org.springframework.context.support.AbstractApplicationContext.java<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">protected</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">prepareBeanFactory</span><span class=\"hljs-params\">(ConfigurableListableBeanFactory beanFactory)</span> </span>&#123;<br>\t\t<span class=\"hljs-comment\">// Tell the internal bean factory to use the context&#x27;s class loader etc.</span><br>\t\tbeanFactory.setBeanClassLoader(getClassLoader());<br>\t\tbeanFactory.setBeanExpressionResolver(<span class=\"hljs-keyword\">new</span> StandardBeanExpressionResolver(beanFactory.getBeanClassLoader()));<br>\t\tbeanFactory.addPropertyEditorRegistrar(<span class=\"hljs-keyword\">new</span> ResourceEditorRegistrar(<span class=\"hljs-keyword\">this</span>, getEnvironment()));<br><br>\t\t<span class=\"hljs-comment\">// Configure the bean factory with context callbacks.</span><br>\t\tbeanFactory.addBeanPostProcessor(<span class=\"hljs-keyword\">new</span> ApplicationContextAwareProcessor(<span class=\"hljs-keyword\">this</span>));<br>\t\tbeanFactory.ignoreDependencyInterface(EnvironmentAware.class);<br>\t\tbeanFactory.ignoreDependencyInterface(EmbeddedValueResolverAware.class);<br>\t\tbeanFactory.ignoreDependencyInterface(ResourceLoaderAware.class);<br>\t\tbeanFactory.ignoreDependencyInterface(ApplicationEventPublisherAware.class);<br>\t\tbeanFactory.ignoreDependencyInterface(MessageSourceAware.class);<br>\t\tbeanFactory.ignoreDependencyInterface(ApplicationContextAware.class);<br><br>\t\t<span class=\"hljs-comment\">// BeanFactory interface not registered as resolvable type in a plain factory.</span><br>\t\t<span class=\"hljs-comment\">// MessageSource registered (and found for autowiring) as a bean.</span><br>\t\tbeanFactory.registerResolvableDependency(BeanFactory.class, beanFactory);<br>\t\tbeanFactory.registerResolvableDependency(ResourceLoader.class, <span class=\"hljs-keyword\">this</span>);<br>\t\tbeanFactory.registerResolvableDependency(ApplicationEventPublisher.class, <span class=\"hljs-keyword\">this</span>);<br>\t\tbeanFactory.registerResolvableDependency(ApplicationContext.class, <span class=\"hljs-keyword\">this</span>);<br><br>\t\t<span class=\"hljs-comment\">// Register early post-processor for detecting inner beans as ApplicationListeners.</span><br>\t\tbeanFactory.addBeanPostProcessor(<span class=\"hljs-keyword\">new</span> ApplicationListenerDetector(<span class=\"hljs-keyword\">this</span>));<br><br>\t\t<span class=\"hljs-comment\">// Detect a LoadTimeWeaver and prepare for weaving, if found.</span><br>\t\t<span class=\"hljs-keyword\">if</span> (beanFactory.containsBean(LOAD_TIME_WEAVER_BEAN_NAME)) &#123;<br>\t\t\tbeanFactory.addBeanPostProcessor(<span class=\"hljs-keyword\">new</span> LoadTimeWeaverAwareProcessor(beanFactory));<br>\t\t\t<span class=\"hljs-comment\">// Set a temporary ClassLoader for type matching.</span><br>\t\t\tbeanFactory.setTempClassLoader(<span class=\"hljs-keyword\">new</span> ContextTypeMatchClassLoader(beanFactory.getBeanClassLoader()));<br>\t\t&#125;<br><br>\t\t<span class=\"hljs-comment\">// Register default environment beans.</span><br>\t\t<span class=\"hljs-keyword\">if</span> (!beanFactory.containsLocalBean(ENVIRONMENT_BEAN_NAME)) &#123;<br>\t\t\tbeanFactory.registerSingleton(ENVIRONMENT_BEAN_NAME, getEnvironment());<br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">if</span> (!beanFactory.containsLocalBean(SYSTEM_PROPERTIES_BEAN_NAME)) &#123;<br>\t\t\tbeanFactory.registerSingleton(SYSTEM_PROPERTIES_BEAN_NAME, getEnvironment().getSystemProperties());<br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">if</span> (!beanFactory.containsLocalBean(SYSTEM_ENVIRONMENT_BEAN_NAME)) &#123;<br>\t\t\tbeanFactory.registerSingleton(SYSTEM_ENVIRONMENT_BEAN_NAME, getEnvironment().getSystemEnvironment());<br>\t\t&#125;<br>\t&#125;<br><br></code></pre></td></tr></table></figure></li>\n</ul>\n<h1 id=\"7-postProcessBeanFactory-ConfigurableListableBeanFactory-beanFactory\"><a href=\"#7-postProcessBeanFactory-ConfigurableListableBeanFactory-beanFactory\" class=\"headerlink\" title=\"7    postProcessBeanFactory(ConfigurableListableBeanFactory beanFactory)\"></a>7    postProcessBeanFactory(ConfigurableListableBeanFactory beanFactory)</h1><ul>\n<li>代码位置:org.springframework.context.support.AbstractApplicationContext.java<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">protected</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">postProcessBeanFactory</span><span class=\"hljs-params\">(ConfigurableListableBeanFactory beanFactory)</span> </span>&#123;<br>\t<span class=\"hljs-comment\">// 该方法是一个空方法，具体的实现依据具体的情况在其子类中继承或进行重写</span><br>\t<span class=\"hljs-comment\">// 观察AbstractApplicationContext到FileSystemXmlApplicationContext(location)的继承路径，其子类中并未实现具体的逻辑;</span><br>&#125;<br><br></code></pre></td></tr></table></figure></li>\n<li>postProcessBeanFactory(beanFactory)执行完后进入 invokeBeanFactoryPostProcessors(beanFactory)方法</li>\n</ul>\n<h1 id=\"8-invokeBeanFactoryPostProcessors-beanFactory-方法\"><a href=\"#8-invokeBeanFactoryPostProcessors-beanFactory-方法\" class=\"headerlink\" title=\"8. invokeBeanFactoryPostProcessors(beanFactory)方法\"></a>8. invokeBeanFactoryPostProcessors(beanFactory)方法</h1><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">protected</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">invokeBeanFactoryPostProcessors</span><span class=\"hljs-params\">(ConfigurableListableBeanFactory beanFactory)</span> </span>&#123;<br>\tPostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(beanFactory, getBeanFactoryPostProcessors());<br><br>\t<span class=\"hljs-comment\">// Detect a LoadTimeWeaver and prepare for weaving, if found in the meantime</span><br>\t<span class=\"hljs-comment\">// (e.g. through an @Bean method registered by ConfigurationClassPostProcessor)</span><br>\t<span class=\"hljs-keyword\">if</span> (beanFactory.getTempClassLoader() == <span class=\"hljs-keyword\">null</span> &amp;&amp; beanFactory.containsBean(LOAD_TIME_WEAVER_BEAN_NAME)) &#123;<br>\t\tbeanFactory.addBeanPostProcessor(<span class=\"hljs-keyword\">new</span> LoadTimeWeaverAwareProcessor(beanFactory));<br>\t\tbeanFactory.setTempClassLoader(<span class=\"hljs-keyword\">new</span> ContextTypeMatchClassLoader(beanFactory.getBeanClassLoader()));<br>\t&#125;<br>&#125;<br><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> List&lt;BeanFactoryPostProcessor&gt; <span class=\"hljs-title\">getBeanFactoryPostProcessors</span><span class=\"hljs-params\">()</span> </span>&#123;<br>\t<span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">this</span>.beanFactoryPostProcessors;<br>&#125;<br><br></code></pre></td></tr></table></figure>\n\n<ul>\n<li>PostProcessorRegistrationDelegate的invokeBeanFactoryPostProcessors(ConfigurableListableBeanFactory beanFactory, List<BeanFactoryPostProcessor> beanFactoryPostProcessors)静态方法<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">invokeBeanFactoryPostProcessors</span><span class=\"hljs-params\">(</span></span><br><span class=\"hljs-function\"><span class=\"hljs-params\">\t\tConfigurableListableBeanFactory beanFactory, List&lt;BeanFactoryPostProcessor&gt; beanFactoryPostProcessors)</span> </span>&#123;<br><br>\t<span class=\"hljs-comment\">// Invoke BeanDefinitionRegistryPostProcessors first, if any.</span><br>\tSet&lt;String&gt; processedBeans = <span class=\"hljs-keyword\">new</span> HashSet&lt;&gt;();<br><br>\t<span class=\"hljs-keyword\">if</span> (beanFactory <span class=\"hljs-keyword\">instanceof</span> BeanDefinitionRegistry) &#123;<br>\t\tBeanDefinitionRegistry registry = (BeanDefinitionRegistry) beanFactory;<br>\t\tList&lt;BeanFactoryPostProcessor&gt; regularPostProcessors = <span class=\"hljs-keyword\">new</span> ArrayList&lt;&gt;();<br>\t\tList&lt;BeanDefinitionRegistryPostProcessor&gt; registryProcessors = <span class=\"hljs-keyword\">new</span> ArrayList&lt;&gt;();<br><br>\t\t<span class=\"hljs-keyword\">for</span> (BeanFactoryPostProcessor postProcessor : beanFactoryPostProcessors) &#123;<br>\t\t\t<span class=\"hljs-keyword\">if</span> (postProcessor <span class=\"hljs-keyword\">instanceof</span> BeanDefinitionRegistryPostProcessor) &#123;<br>\t\t\t\tBeanDefinitionRegistryPostProcessor registryProcessor =<br>\t\t\t\t\t\t(BeanDefinitionRegistryPostProcessor) postProcessor;<br>\t\t\t\tregistryProcessor.postProcessBeanDefinitionRegistry(registry);<br>\t\t\t\tregistryProcessors.add(registryProcessor);<br>\t\t\t&#125;<br>\t\t\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t\t\tregularPostProcessors.add(postProcessor);<br>\t\t\t&#125;<br>\t\t&#125;<br><br>\t\t<span class=\"hljs-comment\">// Do not initialize FactoryBeans here: We need to leave all regular beans</span><br>\t\t<span class=\"hljs-comment\">// uninitialized to let the bean factory post-processors apply to them!</span><br>\t\t<span class=\"hljs-comment\">// Separate between BeanDefinitionRegistryPostProcessors that implement</span><br>\t\t<span class=\"hljs-comment\">// PriorityOrdered, Ordered, and the rest.</span><br>\t\tList&lt;BeanDefinitionRegistryPostProcessor&gt; currentRegistryProcessors = <span class=\"hljs-keyword\">new</span> ArrayList&lt;&gt;();<br><br>\t\t<span class=\"hljs-comment\">// First, invoke the BeanDefinitionRegistryPostProcessors that implement PriorityOrdered.</span><br>\t\tString[] postProcessorNames =<br>\t\t\t\tbeanFactory.getBeanNamesForType(BeanDefinitionRegistryPostProcessor.class, <span class=\"hljs-keyword\">true</span>, <span class=\"hljs-keyword\">false</span>);<br>\t\t<span class=\"hljs-keyword\">for</span> (String ppName : postProcessorNames) &#123;<br>\t\t\t<span class=\"hljs-keyword\">if</span> (beanFactory.isTypeMatch(ppName, PriorityOrdered.class)) &#123;<br>\t\t\t\tcurrentRegistryProcessors.add(beanFactory.getBean(ppName, BeanDefinitionRegistryPostProcessor.class));<br>\t\t\t\tprocessedBeans.add(ppName);<br>\t\t\t&#125;<br>\t\t&#125;<br>\t\tsortPostProcessors(currentRegistryProcessors, beanFactory);<br>\t\tregistryProcessors.addAll(currentRegistryProcessors);<br>\t\tinvokeBeanDefinitionRegistryPostProcessors(currentRegistryProcessors, registry);<br>\t\tcurrentRegistryProcessors.clear();<br><br>\t\t<span class=\"hljs-comment\">// Next, invoke the BeanDefinitionRegistryPostProcessors that implement Ordered.</span><br>\t\tpostProcessorNames = beanFactory.getBeanNamesForType(BeanDefinitionRegistryPostProcessor.class, <span class=\"hljs-keyword\">true</span>, <span class=\"hljs-keyword\">false</span>);<br>\t\t<span class=\"hljs-keyword\">for</span> (String ppName : postProcessorNames) &#123;<br>\t\t\t<span class=\"hljs-keyword\">if</span> (!processedBeans.contains(ppName) &amp;&amp; beanFactory.isTypeMatch(ppName, Ordered.class)) &#123;<br>\t\t\t\tcurrentRegistryProcessors.add(beanFactory.getBean(ppName, BeanDefinitionRegistryPostProcessor.class));<br>\t\t\t\tprocessedBeans.add(ppName);<br>\t\t\t&#125;<br>\t\t&#125;<br>\t\tsortPostProcessors(currentRegistryProcessors, beanFactory);<br>\t\tregistryProcessors.addAll(currentRegistryProcessors);<br>\t\tinvokeBeanDefinitionRegistryPostProcessors(currentRegistryProcessors, registry);<br>\t\tcurrentRegistryProcessors.clear();<br><br>\t\t<span class=\"hljs-comment\">// Finally, invoke all other BeanDefinitionRegistryPostProcessors until no further ones appear.</span><br>\t\t<span class=\"hljs-keyword\">boolean</span> reiterate = <span class=\"hljs-keyword\">true</span>;<br>\t\t<span class=\"hljs-keyword\">while</span> (reiterate) &#123;<br>\t\t\treiterate = <span class=\"hljs-keyword\">false</span>;<br>\t\t\tpostProcessorNames = beanFactory.getBeanNamesForType(BeanDefinitionRegistryPostProcessor.class, <span class=\"hljs-keyword\">true</span>, <span class=\"hljs-keyword\">false</span>);<br>\t\t\t<span class=\"hljs-keyword\">for</span> (String ppName : postProcessorNames) &#123;<br>\t\t\t\t<span class=\"hljs-keyword\">if</span> (!processedBeans.contains(ppName)) &#123;<br>\t\t\t\t\tcurrentRegistryProcessors.add(beanFactory.getBean(ppName, BeanDefinitionRegistryPostProcessor.class));<br>\t\t\t\t\tprocessedBeans.add(ppName);<br>\t\t\t\t\treiterate = <span class=\"hljs-keyword\">true</span>;<br>\t\t\t\t&#125;<br>\t\t\t&#125;<br>\t\t\tsortPostProcessors(currentRegistryProcessors, beanFactory);<br>\t\t\tregistryProcessors.addAll(currentRegistryProcessors);<br>\t\t\tinvokeBeanDefinitionRegistryPostProcessors(currentRegistryProcessors, registry);<br>\t\t\tcurrentRegistryProcessors.clear();<br>\t\t&#125;<br><br>\t\t<span class=\"hljs-comment\">// Now, invoke the postProcessBeanFactory callback of all processors handled so far.</span><br>\t\tinvokeBeanFactoryPostProcessors(registryProcessors, beanFactory);<br>\t\tinvokeBeanFactoryPostProcessors(regularPostProcessors, beanFactory);<br>\t&#125;<br><br>\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t<span class=\"hljs-comment\">// Invoke factory processors registered with the context instance.</span><br>\t\tinvokeBeanFactoryPostProcessors(beanFactoryPostProcessors, beanFactory);<br>\t&#125;<br><br>\t<span class=\"hljs-comment\">// Do not initialize FactoryBeans here: We need to leave all regular beans</span><br>\t<span class=\"hljs-comment\">// uninitialized to let the bean factory post-processors apply to them!</span><br>\tString[] postProcessorNames =<br>\t\t\tbeanFactory.getBeanNamesForType(BeanFactoryPostProcessor.class, <span class=\"hljs-keyword\">true</span>, <span class=\"hljs-keyword\">false</span>);<br><br>\t<span class=\"hljs-comment\">// Separate between BeanFactoryPostProcessors that implement PriorityOrdered,</span><br>\t<span class=\"hljs-comment\">// Ordered, and the rest.</span><br>\tList&lt;BeanFactoryPostProcessor&gt; priorityOrderedPostProcessors = <span class=\"hljs-keyword\">new</span> ArrayList&lt;&gt;();<br>\tList&lt;String&gt; orderedPostProcessorNames = <span class=\"hljs-keyword\">new</span> ArrayList&lt;&gt;();<br>\tList&lt;String&gt; nonOrderedPostProcessorNames = <span class=\"hljs-keyword\">new</span> ArrayList&lt;&gt;();<br>\t<span class=\"hljs-keyword\">for</span> (String ppName : postProcessorNames) &#123;<br>\t\t<span class=\"hljs-keyword\">if</span> (processedBeans.contains(ppName)) &#123;<br>\t\t\t<span class=\"hljs-comment\">// skip - already processed in first phase above</span><br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (beanFactory.isTypeMatch(ppName, PriorityOrdered.class)) &#123;<br>\t\t\tpriorityOrderedPostProcessors.add(beanFactory.getBean(ppName, BeanFactoryPostProcessor.class));<br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (beanFactory.isTypeMatch(ppName, Ordered.class)) &#123;<br>\t\t\torderedPostProcessorNames.add(ppName);<br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t\tnonOrderedPostProcessorNames.add(ppName);<br>\t\t&#125;<br>\t&#125;<br><br>\t<span class=\"hljs-comment\">// First, invoke the BeanFactoryPostProcessors that implement PriorityOrdered.</span><br>\tsortPostProcessors(priorityOrderedPostProcessors, beanFactory);<br>\tinvokeBeanFactoryPostProcessors(priorityOrderedPostProcessors, beanFactory);<br><br>\t<span class=\"hljs-comment\">// Next, invoke the BeanFactoryPostProcessors that implement Ordered.</span><br>\tList&lt;BeanFactoryPostProcessor&gt; orderedPostProcessors = <span class=\"hljs-keyword\">new</span> ArrayList&lt;&gt;(orderedPostProcessorNames.size());<br>\t<span class=\"hljs-keyword\">for</span> (String postProcessorName : orderedPostProcessorNames) &#123;<br>\t\torderedPostProcessors.add(beanFactory.getBean(postProcessorName, BeanFactoryPostProcessor.class));<br>\t&#125;<br>\tsortPostProcessors(orderedPostProcessors, beanFactory);<br>\tinvokeBeanFactoryPostProcessors(orderedPostProcessors, beanFactory);<br><br>\t<span class=\"hljs-comment\">// Finally, invoke all other BeanFactoryPostProcessors.</span><br>\tList&lt;BeanFactoryPostProcessor&gt; nonOrderedPostProcessors = <span class=\"hljs-keyword\">new</span> ArrayList&lt;&gt;(nonOrderedPostProcessorNames.size());<br>\t<span class=\"hljs-keyword\">for</span> (String postProcessorName : nonOrderedPostProcessorNames) &#123;<br>\t\tnonOrderedPostProcessors.add(beanFactory.getBean(postProcessorName, BeanFactoryPostProcessor.class));<br>\t&#125;<br>\tinvokeBeanFactoryPostProcessors(nonOrderedPostProcessors, beanFactory);<br><br>\t<span class=\"hljs-comment\">// Clear cached merged bean definitions since the post-processors might have</span><br>\t<span class=\"hljs-comment\">// modified the original metadata, e.g. replacing placeholders in values...</span><br>\tbeanFactory.clearMetadataCache();<br>&#125;<br><br><span class=\"hljs-comment\">// 上面的方法内部有调用该重载方法</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">invokeBeanDefinitionRegistryPostProcessors</span><span class=\"hljs-params\">(</span></span><br><span class=\"hljs-function\"><span class=\"hljs-params\">\t\tCollection&lt;? extends BeanDefinitionRegistryPostProcessor&gt; postProcessors, BeanDefinitionRegistry registry)</span> </span>&#123;<br><br>\t<span class=\"hljs-keyword\">for</span> (BeanDefinitionRegistryPostProcessor postProcessor : postProcessors) &#123;<br>\t\tpostProcessor.postProcessBeanDefinitionRegistry(registry);<br>\t&#125;<br>&#125;<br><br><span class=\"hljs-comment\">// 上面的方法内部有调用该方法</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">sortPostProcessors</span><span class=\"hljs-params\">(List&lt;?&gt; postProcessors, ConfigurableListableBeanFactory beanFactory)</span> </span>&#123;<br>\tComparator&lt;Object&gt; comparatorToUse = <span class=\"hljs-keyword\">null</span>;<br>\t<span class=\"hljs-keyword\">if</span> (beanFactory <span class=\"hljs-keyword\">instanceof</span> DefaultListableBeanFactory) &#123;<br>\t\tcomparatorToUse = ((DefaultListableBeanFactory) beanFactory).getDependencyComparator();<br>\t&#125;<br>\t<span class=\"hljs-keyword\">if</span> (comparatorToUse == <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\tcomparatorToUse = OrderComparator.INSTANCE;<br>\t&#125;<br>\tpostProcessors.sort(comparatorToUse);<br>&#125;<br></code></pre></td></tr></table></figure></li>\n</ul>\n<h1 id=\"9-registerBeanPostProcessors-beanFactory-方法\"><a href=\"#9-registerBeanPostProcessors-beanFactory-方法\" class=\"headerlink\" title=\"9. registerBeanPostProcessors(beanFactory);方法\"></a>9. registerBeanPostProcessors(beanFactory);方法</h1><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">protected</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">registerBeanPostProcessors</span><span class=\"hljs-params\">(ConfigurableListableBeanFactory beanFactory)</span> </span>&#123;<br>\tPostProcessorRegistrationDelegate.registerBeanPostProcessors(beanFactory, <span class=\"hljs-keyword\">this</span>);<br>&#125;<br><br></code></pre></td></tr></table></figure>\n<ul>\n<li>PostProcessorRegistrationDelegate的registerBeanPostProcessors(ConfigurableListableBeanFactory beanFactory, AbstractApplicationContext applicationContexs)静态方法，具体代码如下：<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">registerBeanPostProcessors</span><span class=\"hljs-params\">(</span></span><br><span class=\"hljs-function\"><span class=\"hljs-params\">\t\tConfigurableListableBeanFactory beanFactory, AbstractApplicationContext applicationContext)</span> </span>&#123;<br><br>\tString[] postProcessorNames = beanFactory.getBeanNamesForType(BeanPostProcessor.class, <span class=\"hljs-keyword\">true</span>, <span class=\"hljs-keyword\">false</span>);<br><br>\t<span class=\"hljs-comment\">// Register BeanPostProcessorChecker that logs an info message when</span><br>\t<span class=\"hljs-comment\">// a bean is created during BeanPostProcessor instantiation, i.e. when</span><br>\t<span class=\"hljs-comment\">// a bean is not eligible for getting processed by all BeanPostProcessors.</span><br>\t<span class=\"hljs-keyword\">int</span> beanProcessorTargetCount = beanFactory.getBeanPostProcessorCount() + <span class=\"hljs-number\">1</span> + postProcessorNames.length;<br>\tbeanFactory.addBeanPostProcessor(<span class=\"hljs-keyword\">new</span> BeanPostProcessorChecker(beanFactory, beanProcessorTargetCount));<br><br>\t<span class=\"hljs-comment\">// Separate between BeanPostProcessors that implement PriorityOrdered,</span><br>\t<span class=\"hljs-comment\">// Ordered, and the rest.</span><br>\tList&lt;BeanPostProcessor&gt; priorityOrderedPostProcessors = <span class=\"hljs-keyword\">new</span> ArrayList&lt;&gt;();<br>\tList&lt;BeanPostProcessor&gt; internalPostProcessors = <span class=\"hljs-keyword\">new</span> ArrayList&lt;&gt;();<br>\tList&lt;String&gt; orderedPostProcessorNames = <span class=\"hljs-keyword\">new</span> ArrayList&lt;&gt;();<br>\tList&lt;String&gt; nonOrderedPostProcessorNames = <span class=\"hljs-keyword\">new</span> ArrayList&lt;&gt;();<br>\t<span class=\"hljs-keyword\">for</span> (String ppName : postProcessorNames) &#123;<br>\t\t<span class=\"hljs-keyword\">if</span> (beanFactory.isTypeMatch(ppName, PriorityOrdered.class)) &#123;<br>\t\t\tBeanPostProcessor pp = beanFactory.getBean(ppName, BeanPostProcessor.class);<br>\t\t\tpriorityOrderedPostProcessors.add(pp);<br>\t\t\t<span class=\"hljs-keyword\">if</span> (pp <span class=\"hljs-keyword\">instanceof</span> MergedBeanDefinitionPostProcessor) &#123;<br>\t\t\t\tinternalPostProcessors.add(pp);<br>\t\t\t&#125;<br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (beanFactory.isTypeMatch(ppName, Ordered.class)) &#123;<br>\t\t\torderedPostProcessorNames.add(ppName);<br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t\tnonOrderedPostProcessorNames.add(ppName);<br>\t\t&#125;<br>\t&#125;<br><br>\t<span class=\"hljs-comment\">// First, register the BeanPostProcessors that implement PriorityOrdered.</span><br>\tsortPostProcessors(priorityOrderedPostProcessors, beanFactory);<br>\tregisterBeanPostProcessors(beanFactory, priorityOrderedPostProcessors);<br><br>\t<span class=\"hljs-comment\">// Next, register the BeanPostProcessors that implement Ordered.</span><br>\tList&lt;BeanPostProcessor&gt; orderedPostProcessors = <span class=\"hljs-keyword\">new</span> ArrayList&lt;&gt;(orderedPostProcessorNames.size());<br>\t<span class=\"hljs-keyword\">for</span> (String ppName : orderedPostProcessorNames) &#123;<br>\t\tBeanPostProcessor pp = beanFactory.getBean(ppName, BeanPostProcessor.class);<br>\t\torderedPostProcessors.add(pp);<br>\t\t<span class=\"hljs-keyword\">if</span> (pp <span class=\"hljs-keyword\">instanceof</span> MergedBeanDefinitionPostProcessor) &#123;<br>\t\t\tinternalPostProcessors.add(pp);<br>\t\t&#125;<br>\t&#125;<br>\tsortPostProcessors(orderedPostProcessors, beanFactory);<br>\tregisterBeanPostProcessors(beanFactory, orderedPostProcessors);<br><br>\t<span class=\"hljs-comment\">// Now, register all regular BeanPostProcessors.</span><br>\tList&lt;BeanPostProcessor&gt; nonOrderedPostProcessors = <span class=\"hljs-keyword\">new</span> ArrayList&lt;&gt;(nonOrderedPostProcessorNames.size());<br>\t<span class=\"hljs-keyword\">for</span> (String ppName : nonOrderedPostProcessorNames) &#123;<br>\t\tBeanPostProcessor pp = beanFactory.getBean(ppName, BeanPostProcessor.class);<br>\t\tnonOrderedPostProcessors.add(pp);<br>\t\t<span class=\"hljs-keyword\">if</span> (pp <span class=\"hljs-keyword\">instanceof</span> MergedBeanDefinitionPostProcessor) &#123;<br>\t\t\tinternalPostProcessors.add(pp);<br>\t\t&#125;<br>\t&#125;<br>\tregisterBeanPostProcessors(beanFactory, nonOrderedPostProcessors);<br><br>\t<span class=\"hljs-comment\">// Finally, re-register all internal BeanPostProcessors.</span><br>\tsortPostProcessors(internalPostProcessors, beanFactory);<br>\tregisterBeanPostProcessors(beanFactory, internalPostProcessors);<br><br>\t<span class=\"hljs-comment\">// Re-register post-processor for detecting inner beans as ApplicationListeners,</span><br>\t<span class=\"hljs-comment\">// moving it to the end of the processor chain (for picking up proxies etc).</span><br>\tbeanFactory.addBeanPostProcessor(<span class=\"hljs-keyword\">new</span> ApplicationListenerDetector(applicationContext));<br>&#125;<br><br><br><span class=\"hljs-comment\">//上面的方法内部有调用该重载方法</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">registerBeanPostProcessors</span><span class=\"hljs-params\">(</span></span><br><span class=\"hljs-function\"><span class=\"hljs-params\">\t\tConfigurableListableBeanFactory beanFactory, List&lt;BeanPostProcessor&gt; postProcessors)</span> </span>&#123;<br><br>\t<span class=\"hljs-keyword\">for</span> (BeanPostProcessor postProcessor : postProcessors) &#123;<br>\t\tbeanFactory.addBeanPostProcessor(postProcessor);<br>\t&#125;<br>&#125;<br></code></pre></td></tr></table></figure></li>\n</ul>\n<h1 id=\"10-initMessageSource-方法\"><a href=\"#10-initMessageSource-方法\" class=\"headerlink\" title=\"10. initMessageSource();方法\"></a>10. initMessageSource();方法</h1><ul>\n<li>org.springframework.context.support.AbstractApplicationContext中的initMessageSource()方法<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">protected</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">initMessageSource</span><span class=\"hljs-params\">()</span> </span>&#123;<br>\tConfigurableListableBeanFactory beanFactory = getBeanFactory();<br>\t<span class=\"hljs-keyword\">if</span> (beanFactory.containsLocalBean(MESSAGE_SOURCE_BEAN_NAME)) &#123;<br>\t\t<span class=\"hljs-keyword\">this</span>.messageSource = beanFactory.getBean(MESSAGE_SOURCE_BEAN_NAME, MessageSource.class);<br>\t\t<span class=\"hljs-comment\">// Make MessageSource aware of parent MessageSource.</span><br>\t\t<span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">this</span>.parent != <span class=\"hljs-keyword\">null</span> &amp;&amp; <span class=\"hljs-keyword\">this</span>.messageSource <span class=\"hljs-keyword\">instanceof</span> HierarchicalMessageSource) &#123;<br>\t\t\tHierarchicalMessageSource hms = (HierarchicalMessageSource) <span class=\"hljs-keyword\">this</span>.messageSource;<br>\t\t\t<span class=\"hljs-keyword\">if</span> (hms.getParentMessageSource() == <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t\t\t<span class=\"hljs-comment\">// Only set parent context as parent MessageSource if no parent MessageSource</span><br>\t\t\t\t<span class=\"hljs-comment\">// registered already.</span><br>\t\t\t\thms.setParentMessageSource(getInternalParentMessageSource());<br>\t\t\t&#125;<br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">if</span> (logger.isTraceEnabled()) &#123;<br>\t\t\tlogger.trace(<span class=\"hljs-string\">&quot;Using MessageSource [&quot;</span> + <span class=\"hljs-keyword\">this</span>.messageSource + <span class=\"hljs-string\">&quot;]&quot;</span>);<br>\t\t&#125;<br>\t&#125;<br>\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t<span class=\"hljs-comment\">// Use empty MessageSource to be able to accept getMessage calls.</span><br>\t\tDelegatingMessageSource dms = <span class=\"hljs-keyword\">new</span> DelegatingMessageSource();<br>\t\tdms.setParentMessageSource(getInternalParentMessageSource());<br>\t\t<span class=\"hljs-keyword\">this</span>.messageSource = dms;<br>\t\tbeanFactory.registerSingleton(MESSAGE_SOURCE_BEAN_NAME, <span class=\"hljs-keyword\">this</span>.messageSource);<br>\t\t<span class=\"hljs-keyword\">if</span> (logger.isTraceEnabled()) &#123;<br>\t\t\tlogger.trace(<span class=\"hljs-string\">&quot;No &#x27;&quot;</span> + MESSAGE_SOURCE_BEAN_NAME + <span class=\"hljs-string\">&quot;&#x27; bean, using [&quot;</span> + <span class=\"hljs-keyword\">this</span>.messageSource + <span class=\"hljs-string\">&quot;]&quot;</span>);<br>\t\t&#125;<br>\t&#125;<br>&#125;<br></code></pre></td></tr></table></figure></li>\n</ul>\n<h1 id=\"11-initApplicationEventMulticaster-方法\"><a href=\"#11-initApplicationEventMulticaster-方法\" class=\"headerlink\" title=\"11. initApplicationEventMulticaster();方法\"></a>11. initApplicationEventMulticaster();方法</h1><ul>\n<li>org.springframework.context.support.AbstractApplicationContext中的initApplicationEventMulticaster()方法<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">protected</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">initApplicationEventMulticaster</span><span class=\"hljs-params\">()</span> </span>&#123;<br>\tConfigurableListableBeanFactory beanFactory = getBeanFactory();<br>\t<span class=\"hljs-keyword\">if</span> (beanFactory.containsLocalBean(APPLICATION_EVENT_MULTICASTER_BEAN_NAME)) &#123;<br>\t\t<span class=\"hljs-keyword\">this</span>.applicationEventMulticaster =<br>\t\t\t\tbeanFactory.getBean(APPLICATION_EVENT_MULTICASTER_BEAN_NAME, ApplicationEventMulticaster.class);<br>\t\t<span class=\"hljs-keyword\">if</span> (logger.isTraceEnabled()) &#123;<br>\t\t\tlogger.trace(<span class=\"hljs-string\">&quot;Using ApplicationEventMulticaster [&quot;</span> + <span class=\"hljs-keyword\">this</span>.applicationEventMulticaster + <span class=\"hljs-string\">&quot;]&quot;</span>);<br>\t\t&#125;<br>\t&#125;<br>\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t<span class=\"hljs-keyword\">this</span>.applicationEventMulticaster = <span class=\"hljs-keyword\">new</span> SimpleApplicationEventMulticaster(beanFactory);<br>\t\tbeanFactory.registerSingleton(APPLICATION_EVENT_MULTICASTER_BEAN_NAME, <span class=\"hljs-keyword\">this</span>.applicationEventMulticaster);<br>\t\t<span class=\"hljs-keyword\">if</span> (logger.isTraceEnabled()) &#123;<br>\t\t\tlogger.trace(<span class=\"hljs-string\">&quot;No &#x27;&quot;</span> + APPLICATION_EVENT_MULTICASTER_BEAN_NAME + <span class=\"hljs-string\">&quot;&#x27; bean, using &quot;</span> +<br>\t\t\t\t\t<span class=\"hljs-string\">&quot;[&quot;</span> + <span class=\"hljs-keyword\">this</span>.applicationEventMulticaster.getClass().getSimpleName() + <span class=\"hljs-string\">&quot;]&quot;</span>);<br>\t\t&#125;<br>\t&#125;<br>&#125;<br></code></pre></td></tr></table></figure></li>\n</ul>\n<h1 id=\"12-onRefresh-方法\"><a href=\"#12-onRefresh-方法\" class=\"headerlink\" title=\"12. onRefresh();方法\"></a>12. onRefresh();方法</h1><ul>\n<li>org.springframework.context.support.AbstractApplicationContext中的onRefresh()方法<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">protected</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">onRefresh</span><span class=\"hljs-params\">()</span> <span class=\"hljs-keyword\">throws</span> BeansException </span>&#123;<br>\t<span class=\"hljs-comment\">// 该方法是一个空方法，具体的实现依据具体的情况在其子类中继承或进行重写</span><br>\t<span class=\"hljs-comment\">// For subclasses: do nothing by default.</span><br>&#125;<br><br></code></pre></td></tr></table></figure></li>\n</ul>\n<h1 id=\"13-registerListeners-方法\"><a href=\"#13-registerListeners-方法\" class=\"headerlink\" title=\"13. registerListeners();方法\"></a>13. registerListeners();方法</h1><ul>\n<li>org.springframework.context.support.AbstractApplicationContext中的registerListeners()方法<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">protected</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">registerListeners</span><span class=\"hljs-params\">()</span> </span>&#123;<br>\t<span class=\"hljs-comment\">// Register statically specified listeners first.</span><br>\t<span class=\"hljs-keyword\">for</span> (ApplicationListener&lt;?&gt; listener : getApplicationListeners()) &#123;<br>\t\tgetApplicationEventMulticaster().addApplicationListener(listener);<br>\t&#125;<br><br>\t<span class=\"hljs-comment\">// Do not initialize FactoryBeans here: We need to leave all regular beans</span><br>\t<span class=\"hljs-comment\">// uninitialized to let post-processors apply to them!</span><br>\tString[] listenerBeanNames = getBeanNamesForType(ApplicationListener.class, <span class=\"hljs-keyword\">true</span>, <span class=\"hljs-keyword\">false</span>);<br>\t<span class=\"hljs-keyword\">for</span> (String listenerBeanName : listenerBeanNames) &#123;<br>\t\tgetApplicationEventMulticaster().addApplicationListenerBean(listenerBeanName);<br>\t&#125;<br><br>\t<span class=\"hljs-comment\">// Publish early application events now that we finally have a multicaster...</span><br>\tSet&lt;ApplicationEvent&gt; earlyEventsToProcess = <span class=\"hljs-keyword\">this</span>.earlyApplicationEvents;<br>\t<span class=\"hljs-keyword\">this</span>.earlyApplicationEvents = <span class=\"hljs-keyword\">null</span>;<br>\t<span class=\"hljs-keyword\">if</span> (earlyEventsToProcess != <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t<span class=\"hljs-keyword\">for</span> (ApplicationEvent earlyEvent : earlyEventsToProcess) &#123;<br>\t\t\tgetApplicationEventMulticaster().multicastEvent(earlyEvent);<br>\t\t&#125;<br>\t&#125;<br>&#125;<br><br></code></pre></td></tr></table></figure></li>\n</ul>\n<h1 id=\"14-finishBeanFactoryInitialization-beanFactory-方法\"><a href=\"#14-finishBeanFactoryInitialization-beanFactory-方法\" class=\"headerlink\" title=\"14. finishBeanFactoryInitialization(beanFactory);方法\"></a>14. finishBeanFactoryInitialization(beanFactory);方法</h1><ul>\n<li>org.springframework.context.support.AbstractApplicationContext中的finishBeanFactoryInitialization(beanFactory)方法</li>\n<li>实例化Bean的核心方法<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">protected</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">finishBeanFactoryInitialization</span><span class=\"hljs-params\">(ConfigurableListableBeanFactory beanFactory)</span> </span>&#123;<br>\t<span class=\"hljs-comment\">// Initialize conversion service for this context.</span><br>\t<span class=\"hljs-keyword\">if</span> (beanFactory.containsBean(CONVERSION_SERVICE_BEAN_NAME) &amp;&amp;<br>\t\t\tbeanFactory.isTypeMatch(CONVERSION_SERVICE_BEAN_NAME, ConversionService.class)) &#123;<br>\t\tbeanFactory.setConversionService(<br>\t\t\t\tbeanFactory.getBean(CONVERSION_SERVICE_BEAN_NAME, ConversionService.class));<br>\t&#125;<br><br>\t<span class=\"hljs-comment\">// Register a default embedded value resolver if no bean post-processor</span><br>\t<span class=\"hljs-comment\">// (such as a PropertyPlaceholderConfigurer bean) registered any before:</span><br>\t<span class=\"hljs-comment\">// at this point, primarily for resolution in annotation attribute values.</span><br>\t<span class=\"hljs-keyword\">if</span> (!beanFactory.hasEmbeddedValueResolver()) &#123;<br>\t\tbeanFactory.addEmbeddedValueResolver(strVal -&gt; getEnvironment().resolvePlaceholders(strVal));<br>\t&#125;<br><br>\t<span class=\"hljs-comment\">// Initialize LoadTimeWeaverAware beans early to allow for registering their transformers early.</span><br>\tString[] weaverAwareNames = beanFactory.getBeanNamesForType(LoadTimeWeaverAware.class, <span class=\"hljs-keyword\">false</span>, <span class=\"hljs-keyword\">false</span>);<br>\t<span class=\"hljs-keyword\">for</span> (String weaverAwareName : weaverAwareNames) &#123;<br>\t\tgetBean(weaverAwareName);<br>\t&#125;<br><br>\t<span class=\"hljs-comment\">// Stop using the temporary ClassLoader for type matching.</span><br>\tbeanFactory.setTempClassLoader(<span class=\"hljs-keyword\">null</span>);<br><br>\t<span class=\"hljs-comment\">// Allow for caching all bean definition metadata, not expecting further changes.</span><br>\tbeanFactory.freezeConfiguration();<br><br>\t<span class=\"hljs-comment\">// Instantiate all remaining (non-lazy-init) singletons.</span><br>\t<span class=\"hljs-comment\">// 实例化bean的核心代码</span><br>\tbeanFactory.preInstantiateSingletons(); <br>\t<span class=\"hljs-comment\">// 上一行的preInstantiateSingletons()方法定义在ConfigurableListableBeanFactory接口中，</span><br>\t<span class=\"hljs-comment\">// 具体实现是在DefaultListableBeanFactory中preInstantiateSingletons()方法</span><br>&#125;<br><br></code></pre></td></tr></table></figure></li>\n</ul>\n<h4 id=\"DefaultListableBeanFactory中preInstantiateSingletons-方法\"><a href=\"#DefaultListableBeanFactory中preInstantiateSingletons-方法\" class=\"headerlink\" title=\"DefaultListableBeanFactory中preInstantiateSingletons()方法\"></a>DefaultListableBeanFactory中preInstantiateSingletons()方法</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-meta\">@Override</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">preInstantiateSingletons</span><span class=\"hljs-params\">()</span> <span class=\"hljs-keyword\">throws</span> BeansException </span>&#123;<br>\t<span class=\"hljs-keyword\">if</span> (logger.isTraceEnabled()) &#123;<br>\t\tlogger.trace(<span class=\"hljs-string\">&quot;Pre-instantiating singletons in &quot;</span> + <span class=\"hljs-keyword\">this</span>);<br>\t&#125;<br><br>\t<span class=\"hljs-comment\">// Iterate over a copy to allow for init methods which in turn register new bean definitions.</span><br>\t<span class=\"hljs-comment\">// While this may not be part of the regular factory bootstrap, it does otherwise work fine.</span><br>\tList&lt;String&gt; beanNames = <span class=\"hljs-keyword\">new</span> ArrayList&lt;&gt;(<span class=\"hljs-keyword\">this</span>.beanDefinitionNames);<br><br>\t<span class=\"hljs-comment\">// Trigger initialization of all non-lazy singleton beans...</span><br>\t<span class=\"hljs-comment\">// 遍历beanDefinitionNames这个ArrayList对象中的beanName，</span><br>\t<span class=\"hljs-keyword\">for</span> (String beanName : beanNames) &#123;<br>\t\tRootBeanDefinition bd = getMergedLocalBeanDefinition(beanName);<br>\t\t<span class=\"hljs-keyword\">if</span> (!bd.isAbstract() &amp;&amp; bd.isSingleton() &amp;&amp; !bd.isLazyInit()) &#123;<br>\t\t\t<span class=\"hljs-keyword\">if</span> (isFactoryBean(beanName)) &#123;<br>\t\t\t\tObject bean = getBean(FACTORY_BEAN_PREFIX + beanName);<br>\t\t\t\t<span class=\"hljs-keyword\">if</span> (bean <span class=\"hljs-keyword\">instanceof</span> FactoryBean) &#123;<br>\t\t\t\t\t<span class=\"hljs-keyword\">final</span> FactoryBean&lt;?&gt; factory = (FactoryBean&lt;?&gt;) bean;<br>\t\t\t\t\t<span class=\"hljs-keyword\">boolean</span> isEagerInit;<br>\t\t\t\t\t<span class=\"hljs-keyword\">if</span> (System.getSecurityManager() != <span class=\"hljs-keyword\">null</span> &amp;&amp; factory <span class=\"hljs-keyword\">instanceof</span> SmartFactoryBean) &#123;<br>\t\t\t\t\t\tisEagerInit = AccessController.doPrivileged((PrivilegedAction&lt;Boolean&gt;)<br>\t\t\t\t\t\t\t\t\t\t((SmartFactoryBean&lt;?&gt;) factory)::isEagerInit,<br>\t\t\t\t\t\t\t\tgetAccessControlContext());<br>\t\t\t\t\t&#125;<br>\t\t\t\t\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t\t\t\t\tisEagerInit = (factory <span class=\"hljs-keyword\">instanceof</span> SmartFactoryBean &amp;&amp;<br>\t\t\t\t\t\t\t\t((SmartFactoryBean&lt;?&gt;) factory).isEagerInit());<br>\t\t\t\t\t&#125;<br>\t\t\t\t\t<span class=\"hljs-keyword\">if</span> (isEagerInit) &#123;<br>\t\t\t\t\t\t<span class=\"hljs-comment\">// 创建bean并递归构建Bean之间的依赖关系</span><br>\t\t\t\t\t\tgetBean(beanName);<br>\t\t\t\t\t&#125;<br>\t\t\t\t&#125;<br>\t\t\t&#125;<br>\t\t\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t\t\t<span class=\"hljs-comment\">// 创建bean并递归构建Bean之间的依赖关系</span><br>\t\t\t\tgetBean(beanName);<br>\t\t\t&#125;<br>\t\t&#125;<br>\t&#125;<br><br>\t<span class=\"hljs-comment\">// Trigger post-initialization callback for all applicable beans...</span><br>\t<span class=\"hljs-keyword\">for</span> (String beanName : beanNames) &#123;<br>\t\tObject singletonInstance = getSingleton(beanName);<br>\t\t<span class=\"hljs-keyword\">if</span> (singletonInstance <span class=\"hljs-keyword\">instanceof</span> SmartInitializingSingleton) &#123;<br>\t\t\t<span class=\"hljs-keyword\">final</span> SmartInitializingSingleton smartSingleton = (SmartInitializingSingleton) singletonInstance;<br>\t\t\t<span class=\"hljs-keyword\">if</span> (System.getSecurityManager() != <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t\t\tAccessController.doPrivileged((PrivilegedAction&lt;Object&gt;) () -&gt; &#123;<br>\t\t\t\t\tsmartSingleton.afterSingletonsInstantiated();<br>\t\t\t\t\t<span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">null</span>;<br>\t\t\t\t&#125;, getAccessControlContext());<br>\t\t\t&#125;<br>\t\t\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t\t\tsmartSingleton.afterSingletonsInstantiated();<br>\t\t\t&#125;<br>\t\t&#125;<br>\t&#125;<br>&#125;<br><br><br></code></pre></td></tr></table></figure>\n\n<h3 id=\"preInstantiateSingletons-方法中调用的getBean方法\"><a href=\"#preInstantiateSingletons-方法中调用的getBean方法\" class=\"headerlink\" title=\"preInstantiateSingletons()方法中调用的getBean方法\"></a>preInstantiateSingletons()方法中调用的getBean方法</h3><ul>\n<li>getBean方法定义在BeanFactory接口中</li>\n<li>getBean方法org.springframework.beans.factory.support.AbstractBeanFactory中实现<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-meta\">@Override</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> Object <span class=\"hljs-title\">getBean</span><span class=\"hljs-params\">(String name)</span> <span class=\"hljs-keyword\">throws</span> BeansException </span>&#123;<br>\t<span class=\"hljs-keyword\">return</span> doGetBean(name, <span class=\"hljs-keyword\">null</span>, <span class=\"hljs-keyword\">null</span>, <span class=\"hljs-keyword\">false</span>);<br>&#125;<br><br><br><br><span class=\"hljs-comment\">//下面是上面方法调用doGetBean(name, null, null, false)方法</span><br><span class=\"hljs-comment\">// 这个方法特别长，以下是完整代码：</span><br><span class=\"hljs-meta\">@SuppressWarnings(&quot;unchecked&quot;)</span><br><span class=\"hljs-keyword\">protected</span> &lt;T&gt; <span class=\"hljs-function\">T <span class=\"hljs-title\">doGetBean</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">final</span> String name, <span class=\"hljs-meta\">@Nullable</span> <span class=\"hljs-keyword\">final</span> Class&lt;T&gt; requiredType,</span></span><br><span class=\"hljs-function\"><span class=\"hljs-params\">\t\t<span class=\"hljs-meta\">@Nullable</span> <span class=\"hljs-keyword\">final</span> Object[] args, <span class=\"hljs-keyword\">boolean</span> typeCheckOnly)</span> <span class=\"hljs-keyword\">throws</span> BeansException </span>&#123;<br><br>\t<span class=\"hljs-keyword\">final</span> String beanName = transformedBeanName(name);<br>\tObject bean;<br><br>\t<span class=\"hljs-comment\">// Eagerly check singleton cache for manually registered singletons.</span><br>\tObject sharedInstance = getSingleton(beanName);<br>\t<span class=\"hljs-keyword\">if</span> (sharedInstance != <span class=\"hljs-keyword\">null</span> &amp;&amp; args == <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t<span class=\"hljs-keyword\">if</span> (logger.isTraceEnabled()) &#123;<br>\t\t\t<span class=\"hljs-keyword\">if</span> (isSingletonCurrentlyInCreation(beanName)) &#123;<br>\t\t\t\tlogger.trace(<span class=\"hljs-string\">&quot;Returning eagerly cached instance of singleton bean &#x27;&quot;</span> + beanName +<br>\t\t\t\t\t\t<span class=\"hljs-string\">&quot;&#x27; that is not fully initialized yet - a consequence of a circular reference&quot;</span>);<br>\t\t\t&#125;<br>\t\t\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t\t\tlogger.trace(<span class=\"hljs-string\">&quot;Returning cached instance of singleton bean &#x27;&quot;</span> + beanName + <span class=\"hljs-string\">&quot;&#x27;&quot;</span>);<br>\t\t\t&#125;<br>\t\t&#125;<br>\t\tbean = getObjectForBeanInstance(sharedInstance, name, beanName, <span class=\"hljs-keyword\">null</span>);<br>\t&#125;<br><br>\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t<span class=\"hljs-comment\">// Fail if we&#x27;re already creating this bean instance:</span><br>\t\t<span class=\"hljs-comment\">// We&#x27;re assumably within a circular reference.</span><br>\t\t<span class=\"hljs-keyword\">if</span> (isPrototypeCurrentlyInCreation(beanName)) &#123;<br>\t\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> BeanCurrentlyInCreationException(beanName);<br>\t\t&#125;<br><br>\t\t<span class=\"hljs-comment\">// Check if bean definition exists in this factory.</span><br>\t\tBeanFactory parentBeanFactory = getParentBeanFactory();<br>\t\t<span class=\"hljs-keyword\">if</span> (parentBeanFactory != <span class=\"hljs-keyword\">null</span> &amp;&amp; !containsBeanDefinition(beanName)) &#123;<br>\t\t\t<span class=\"hljs-comment\">// Not found -&gt; check parent.</span><br>\t\t\tString nameToLookup = originalBeanName(name);<br>\t\t\t<span class=\"hljs-keyword\">if</span> (parentBeanFactory <span class=\"hljs-keyword\">instanceof</span> AbstractBeanFactory) &#123;<br>\t\t\t\t<span class=\"hljs-keyword\">return</span> ((AbstractBeanFactory) parentBeanFactory).doGetBean(<br>\t\t\t\t\t\tnameToLookup, requiredType, args, typeCheckOnly);<br>\t\t\t&#125;<br>\t\t\t<span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (args != <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t\t\t<span class=\"hljs-comment\">// Delegation to parent with explicit args.</span><br>\t\t\t\t<span class=\"hljs-keyword\">return</span> (T) parentBeanFactory.getBean(nameToLookup, args);<br>\t\t\t&#125;<br>\t\t\t<span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (requiredType != <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t\t\t<span class=\"hljs-comment\">// No args -&gt; delegate to standard getBean method.</span><br>\t\t\t\t<span class=\"hljs-keyword\">return</span> parentBeanFactory.getBean(nameToLookup, requiredType);<br>\t\t\t&#125;<br>\t\t\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t\t\t<span class=\"hljs-keyword\">return</span> (T) parentBeanFactory.getBean(nameToLookup);<br>\t\t\t&#125;<br>\t\t&#125;<br><br>\t\t<span class=\"hljs-keyword\">if</span> (!typeCheckOnly) &#123;<br>\t\t\tmarkBeanAsCreated(beanName);<br>\t\t&#125;<br><br>\t\t<span class=\"hljs-keyword\">try</span> &#123;<br>\t\t\t<span class=\"hljs-keyword\">final</span> RootBeanDefinition mbd = getMergedLocalBeanDefinition(beanName);<br>\t\t\tcheckMergedBeanDefinition(mbd, beanName, args);<br><br>\t\t\t<span class=\"hljs-comment\">// Guarantee initialization of beans that the current bean depends on.</span><br>\t\t\t<span class=\"hljs-comment\">// 获取当前bean的依赖关系</span><br>\t\t\tString[] dependsOn = mbd.getDependsOn();<br>\t\t\t<span class=\"hljs-comment\">// 根据依赖的beanName递归调用getBean()方法，不断探寻其依赖的bean，直到getSingleton方法返回依赖的Bean，即当前正在创建的Bean</span><br>\t\t\t<span class=\"hljs-comment\">// 直到依赖关系最底层的bean没有依赖对象了，至此整个递归过程结束  </span><br>\t\t\t<span class=\"hljs-keyword\">if</span> (dependsOn != <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t\t\t<span class=\"hljs-keyword\">for</span> (String dep : dependsOn) &#123;<br>\t\t\t\t\t<span class=\"hljs-keyword\">if</span> (isDependent(beanName, dep)) &#123;<br>\t\t\t\t\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> BeanCreationException(mbd.getResourceDescription(), beanName,<br>\t\t\t\t\t\t\t\t<span class=\"hljs-string\">&quot;Circular depends-on relationship between &#x27;&quot;</span> + beanName + <span class=\"hljs-string\">&quot;&#x27; and &#x27;&quot;</span> + dep + <span class=\"hljs-string\">&quot;&#x27;&quot;</span>);<br>\t\t\t\t\t&#125;<br>\t\t\t\t\t<span class=\"hljs-comment\">// </span><br>\t\t\t\t\tregisterDependentBean(dep, beanName);<br>\t\t\t\t\t<span class=\"hljs-keyword\">try</span> &#123;<br>\t\t\t\t\t\tgetBean(dep);<br>\t\t\t\t\t&#125;<br>\t\t\t\t\t<span class=\"hljs-keyword\">catch</span> (NoSuchBeanDefinitionException ex) &#123;<br>\t\t\t\t\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> BeanCreationException(mbd.getResourceDescription(), beanName,<br>\t\t\t\t\t\t\t\t<span class=\"hljs-string\">&quot;&#x27;&quot;</span> + beanName + <span class=\"hljs-string\">&quot;&#x27; depends on missing bean &#x27;&quot;</span> + dep + <span class=\"hljs-string\">&quot;&#x27;&quot;</span>, ex);<br>\t\t\t\t\t&#125;<br>\t\t\t\t&#125;<br>\t\t\t&#125;<br>\t\t\t<span class=\"hljs-comment\">// Create bean instance.</span><br>\t\t\t<span class=\"hljs-keyword\">if</span> (mbd.isSingleton()) &#123;<br>\t\t\t\t<span class=\"hljs-comment\">// getSingleton方法的参数是createBean(beanName, mbd, args)方法的返回值</span><br>\t\t\t\tsharedInstance = getSingleton(beanName, () -&gt; &#123;<br>\t\t\t\t\t<span class=\"hljs-keyword\">try</span> &#123;<br>\t\t\t\t\t\t<span class=\"hljs-comment\">// createBean方法在AbstractBeanFactory抽象类中定义，具体实现是在AbstractAutowireCapableBeanFactory抽象类中</span><br>\t\t\t\t\t\t<span class=\"hljs-keyword\">return</span> createBean(beanName, mbd, args);<br>\t\t\t\t\t&#125;<br>\t\t\t\t\t<span class=\"hljs-keyword\">catch</span> (BeansException ex) &#123;<br>\t\t\t\t\t\t<span class=\"hljs-comment\">// Explicitly remove instance from singleton cache: It might have been put there</span><br>\t\t\t\t\t\t<span class=\"hljs-comment\">// eagerly by the creation process, to allow for circular reference resolution.</span><br>\t\t\t\t\t\t<span class=\"hljs-comment\">// Also remove any beans that received a temporary reference to the bean.</span><br>\t\t\t\t\t\tdestroySingleton(beanName);<br>\t\t\t\t\t\t<span class=\"hljs-keyword\">throw</span> ex;<br>\t\t\t\t\t&#125;<br>\t\t\t\t&#125;);<br>\t\t\t\tbean = getObjectForBeanInstance(sharedInstance, name, beanName, mbd);<br>\t\t\t&#125;<br><br>\t\t\t<span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (mbd.isPrototype()) &#123;<br>\t\t\t\t<span class=\"hljs-comment\">// It&#x27;s a prototype -&gt; create a new instance.</span><br>\t\t\t\tObject prototypeInstance = <span class=\"hljs-keyword\">null</span>;<br>\t\t\t\t<span class=\"hljs-keyword\">try</span> &#123;<br>\t\t\t\t\tbeforePrototypeCreation(beanName);<br>\t\t\t\t\tprototypeInstance = createBean(beanName, mbd, args);<br>\t\t\t\t&#125;<br>\t\t\t\t<span class=\"hljs-keyword\">finally</span> &#123;<br>\t\t\t\t\tafterPrototypeCreation(beanName);<br>\t\t\t\t&#125;<br>\t\t\t\tbean = getObjectForBeanInstance(prototypeInstance, name, beanName, mbd);<br>\t\t\t&#125;<br><br>\t\t\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t\t\tString scopeName = mbd.getScope();<br>\t\t\t\t<span class=\"hljs-keyword\">final</span> Scope scope = <span class=\"hljs-keyword\">this</span>.scopes.get(scopeName);<br>\t\t\t\t<span class=\"hljs-keyword\">if</span> (scope == <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t\t\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> IllegalStateException(<span class=\"hljs-string\">&quot;No Scope registered for scope name &#x27;&quot;</span> + scopeName + <span class=\"hljs-string\">&quot;&#x27;&quot;</span>);<br>\t\t\t\t&#125;<br>\t\t\t\t<span class=\"hljs-keyword\">try</span> &#123;<br>\t\t\t\t\tObject scopedInstance = scope.get(beanName, () -&gt; &#123;<br>\t\t\t\t\t\tbeforePrototypeCreation(beanName);<br>\t\t\t\t\t\t<span class=\"hljs-keyword\">try</span> &#123;<br>\t\t\t\t\t\t\t<span class=\"hljs-keyword\">return</span> createBean(beanName, mbd, args);<br>\t\t\t\t\t\t&#125;<br>\t\t\t\t\t\t<span class=\"hljs-keyword\">finally</span> &#123;<br>\t\t\t\t\t\t\tafterPrototypeCreation(beanName);<br>\t\t\t\t\t\t&#125;<br>\t\t\t\t\t&#125;);<br>\t\t\t\t\tbean = getObjectForBeanInstance(scopedInstance, name, beanName, mbd);<br>\t\t\t\t&#125;<br>\t\t\t\t<span class=\"hljs-keyword\">catch</span> (IllegalStateException ex) &#123;<br>\t\t\t\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> BeanCreationException(beanName,<br>\t\t\t\t\t\t\t<span class=\"hljs-string\">&quot;Scope &#x27;&quot;</span> + scopeName + <span class=\"hljs-string\">&quot;&#x27; is not active for the current thread; consider &quot;</span> +<br>\t\t\t\t\t\t\t<span class=\"hljs-string\">&quot;defining a scoped proxy for this bean if you intend to refer to it from a singleton&quot;</span>,<br>\t\t\t\t\t\t\tex);<br>\t\t\t\t&#125;<br>\t\t\t&#125;<br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">catch</span> (BeansException ex) &#123;<br>\t\t\tcleanupAfterBeanCreationFailure(beanName);<br>\t\t\t<span class=\"hljs-keyword\">throw</span> ex;<br>\t\t&#125;<br>\t&#125;<br><br>\t<span class=\"hljs-comment\">// Check if required type matches the type of the actual bean instance.</span><br>\t<span class=\"hljs-keyword\">if</span> (requiredType != <span class=\"hljs-keyword\">null</span> &amp;&amp; !requiredType.isInstance(bean)) &#123;<br>\t\t<span class=\"hljs-keyword\">try</span> &#123;<br>\t\t\tT convertedBean = getTypeConverter().convertIfNecessary(bean, requiredType);<br>\t\t\t<span class=\"hljs-keyword\">if</span> (convertedBean == <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> BeanNotOfRequiredTypeException(name, requiredType, bean.getClass());<br>\t\t\t&#125;<br>\t\t\t<span class=\"hljs-keyword\">return</span> convertedBean;<br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">catch</span> (TypeMismatchException ex) &#123;<br>\t\t\t<span class=\"hljs-keyword\">if</span> (logger.isTraceEnabled()) &#123;<br>\t\t\t\tlogger.trace(<span class=\"hljs-string\">&quot;Failed to convert bean &#x27;&quot;</span> + name + <span class=\"hljs-string\">&quot;&#x27; to required type &#x27;&quot;</span> +<br>\t\t\t\t\t\tClassUtils.getQualifiedName(requiredType) + <span class=\"hljs-string\">&quot;&#x27;&quot;</span>, ex);<br>\t\t\t&#125;<br>\t\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> BeanNotOfRequiredTypeException(name, requiredType, bean.getClass());<br>\t\t&#125;<br>\t&#125;<br>\t<span class=\"hljs-keyword\">return</span> (T) bean;<br>&#125;<br><br><br></code></pre></td></tr></table></figure></li>\n</ul>\n<h4 id=\"AbstractAutowireCapableBeanFactory类中的createBean-String-beanName-RootBeanDefinition-mbd-Nullable-Object-args-方法\"><a href=\"#AbstractAutowireCapableBeanFactory类中的createBean-String-beanName-RootBeanDefinition-mbd-Nullable-Object-args-方法\" class=\"headerlink\" title=\"AbstractAutowireCapableBeanFactory类中的createBean(String beanName, RootBeanDefinition mbd, @Nullable Object[] args)方法\"></a>AbstractAutowireCapableBeanFactory类中的createBean(String beanName, RootBeanDefinition mbd, @Nullable Object[] args)方法</h4><ul>\n<li>代码位置：org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-meta\">@Override</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">protected</span> Object <span class=\"hljs-title\">createBean</span><span class=\"hljs-params\">(String beanName, RootBeanDefinition mbd, <span class=\"hljs-meta\">@Nullable</span> Object[] args)</span></span><br><span class=\"hljs-function\">\t\t<span class=\"hljs-keyword\">throws</span> BeanCreationException </span>&#123;<br><br>\t<span class=\"hljs-keyword\">if</span> (logger.isTraceEnabled()) &#123;<br>\t\tlogger.trace(<span class=\"hljs-string\">&quot;Creating instance of bean &#x27;&quot;</span> + beanName + <span class=\"hljs-string\">&quot;&#x27;&quot;</span>);<br>\t&#125;<br>\tRootBeanDefinition mbdToUse = mbd;<br><br>\t<span class=\"hljs-comment\">// Make sure bean class is actually resolved at this point, and</span><br>\t<span class=\"hljs-comment\">// clone the bean definition in case of a dynamically resolved Class</span><br>\t<span class=\"hljs-comment\">// which cannot be stored in the shared merged bean definition.</span><br>\tClass&lt;?&gt; resolvedClass = resolveBeanClass(mbd, beanName);<br>\t<span class=\"hljs-keyword\">if</span> (resolvedClass != <span class=\"hljs-keyword\">null</span> &amp;&amp; !mbd.hasBeanClass() &amp;&amp; mbd.getBeanClassName() != <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\tmbdToUse = <span class=\"hljs-keyword\">new</span> RootBeanDefinition(mbd);<br>\t\tmbdToUse.setBeanClass(resolvedClass);<br>\t&#125;<br><br>\t<span class=\"hljs-comment\">// Prepare method overrides.</span><br>\t<span class=\"hljs-keyword\">try</span> &#123;<br>\t\tmbdToUse.prepareMethodOverrides();<br>\t&#125;<br>\t<span class=\"hljs-keyword\">catch</span> (BeanDefinitionValidationException ex) &#123;<br>\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> BeanDefinitionStoreException(mbdToUse.getResourceDescription(),<br>\t\t\t\tbeanName, <span class=\"hljs-string\">&quot;Validation of method overrides failed&quot;</span>, ex);<br>\t&#125;<br><br>\t<span class=\"hljs-keyword\">try</span> &#123;<br>\t\t<span class=\"hljs-comment\">// Give BeanPostProcessors a chance to return a proxy instead of the target bean instance.</span><br>\t\tObject bean = resolveBeforeInstantiation(beanName, mbdToUse);<br>\t\t<span class=\"hljs-keyword\">if</span> (bean != <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t\t<span class=\"hljs-keyword\">return</span> bean;<br>\t\t&#125;<br>\t&#125;<br>\t<span class=\"hljs-keyword\">catch</span> (Throwable ex) &#123;<br>\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> BeanCreationException(mbdToUse.getResourceDescription(), beanName,<br>\t\t\t\t<span class=\"hljs-string\">&quot;BeanPostProcessor before instantiation of bean failed&quot;</span>, ex);<br>\t&#125;<br><br>\t<span class=\"hljs-keyword\">try</span> &#123;<br>\t\t<span class=\"hljs-comment\">// createBean方法的核心  该方法会返回Bean对象的实例，具体代码在下面贴出</span><br>\t\tObject beanInstance = doCreateBean(beanName, mbdToUse, args);<br>\t\t<span class=\"hljs-keyword\">if</span> (logger.isTraceEnabled()) &#123;<br>\t\t\tlogger.trace(<span class=\"hljs-string\">&quot;Finished creating instance of bean &#x27;&quot;</span> + beanName + <span class=\"hljs-string\">&quot;&#x27;&quot;</span>);<br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">return</span> beanInstance;<br>\t&#125;<br>\t<span class=\"hljs-keyword\">catch</span> (BeanCreationException | ImplicitlyAppearedSingletonException ex) &#123;<br>\t\t<span class=\"hljs-comment\">// A previously detected exception with proper bean creation context already,</span><br>\t\t<span class=\"hljs-comment\">// or illegal singleton state to be communicated up to DefaultSingletonBeanRegistry.</span><br>\t\t<span class=\"hljs-keyword\">throw</span> ex;<br>\t&#125;<br>\t<span class=\"hljs-keyword\">catch</span> (Throwable ex) &#123;<br>\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> BeanCreationException(<br>\t\t\t\tmbdToUse.getResourceDescription(), beanName, <span class=\"hljs-string\">&quot;Unexpected exception during bean creation&quot;</span>, ex);<br>\t&#125;<br>&#125;<br><br><br><br><span class=\"hljs-comment\">// 在AbstractAutowireCapableBeanFactory抽象类的createBean方法中调用的doCreateBean(beanName, mbdToUse, args)方法</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">protected</span> Object <span class=\"hljs-title\">doCreateBean</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">final</span> String beanName, <span class=\"hljs-keyword\">final</span> RootBeanDefinition mbd, <span class=\"hljs-keyword\">final</span> <span class=\"hljs-meta\">@Nullable</span> Object[] args)</span></span><br><span class=\"hljs-function\">\t\t<span class=\"hljs-keyword\">throws</span> BeanCreationException </span>&#123;<br><br>\t<span class=\"hljs-comment\">// Instantiate the bean.</span><br>\tBeanWrapper instanceWrapper = <span class=\"hljs-keyword\">null</span>;<br>\t<span class=\"hljs-keyword\">if</span> (mbd.isSingleton()) &#123;<br>\t\tinstanceWrapper = <span class=\"hljs-keyword\">this</span>.factoryBeanInstanceCache.remove(beanName);<br>\t&#125;<br>\t<span class=\"hljs-keyword\">if</span> (instanceWrapper == <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t<span class=\"hljs-comment\">// 创建Bean实例</span><br>\t\tinstanceWrapper = createBeanInstance(beanName, mbd, args);<br>\t&#125;<br>\t<span class=\"hljs-keyword\">final</span> Object bean = instanceWrapper.getWrappedInstance();<br>\tClass&lt;?&gt; beanType = instanceWrapper.getWrappedClass();<br>\t<span class=\"hljs-keyword\">if</span> (beanType != NullBean.class) &#123;<br>\t\tmbd.resolvedTargetType = beanType;<br>\t&#125;<br><br>\t<span class=\"hljs-comment\">// Allow post-processors to modify the merged bean definition.</span><br>\t<span class=\"hljs-keyword\">synchronized</span> (mbd.postProcessingLock) &#123;<br>\t\t<span class=\"hljs-keyword\">if</span> (!mbd.postProcessed) &#123;<br>\t\t\t<span class=\"hljs-keyword\">try</span> &#123;<br>\t\t\t\tapplyMergedBeanDefinitionPostProcessors(mbd, beanType, beanName);<br>\t\t\t&#125;<br>\t\t\t<span class=\"hljs-keyword\">catch</span> (Throwable ex) &#123;<br>\t\t\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> BeanCreationException(mbd.getResourceDescription(), beanName,<br>\t\t\t\t\t\t<span class=\"hljs-string\">&quot;Post-processing of merged bean definition failed&quot;</span>, ex);<br>\t\t\t&#125;<br>\t\t\tmbd.postProcessed = <span class=\"hljs-keyword\">true</span>;<br>\t\t&#125;<br>\t&#125;<br><br>\t<span class=\"hljs-comment\">// Eagerly cache singletons to be able to resolve circular references</span><br>\t<span class=\"hljs-comment\">// even when triggered by lifecycle interfaces like BeanFactoryAware.</span><br>\t<span class=\"hljs-keyword\">boolean</span> earlySingletonExposure = (mbd.isSingleton() &amp;&amp; <span class=\"hljs-keyword\">this</span>.allowCircularReferences &amp;&amp;<br>\t\t\tisSingletonCurrentlyInCreation(beanName));<br>\t<span class=\"hljs-keyword\">if</span> (earlySingletonExposure) &#123;<br>\t\t<span class=\"hljs-keyword\">if</span> (logger.isTraceEnabled()) &#123;<br>\t\t\tlogger.trace(<span class=\"hljs-string\">&quot;Eagerly caching bean &#x27;&quot;</span> + beanName +<br>\t\t\t\t\t<span class=\"hljs-string\">&quot;&#x27; to allow for resolving potential circular references&quot;</span>);<br>\t\t&#125;<br>\t\taddSingletonFactory(beanName, () -&gt; getEarlyBeanReference(beanName, mbd, bean));<br>\t&#125;<br><br>\t<span class=\"hljs-comment\">// Initialize the bean instance.</span><br>\tObject exposedObject = bean;<br>\t<span class=\"hljs-keyword\">try</span> &#123;<br>\t\t<span class=\"hljs-comment\">// 填充bean，实际进行依赖注入的地方</span><br>\t\tpopulateBean(beanName, mbd, instanceWrapper);<br>\t\texposedObject = initializeBean(beanName, exposedObject, mbd);<br>\t&#125;<br>\t<span class=\"hljs-keyword\">catch</span> (Throwable ex) &#123;<br>\t\t<span class=\"hljs-keyword\">if</span> (ex <span class=\"hljs-keyword\">instanceof</span> BeanCreationException &amp;&amp; beanName.equals(((BeanCreationException) ex).getBeanName())) &#123;<br>\t\t\t<span class=\"hljs-keyword\">throw</span> (BeanCreationException) ex;<br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> BeanCreationException(<br>\t\t\t\t\tmbd.getResourceDescription(), beanName, <span class=\"hljs-string\">&quot;Initialization of bean failed&quot;</span>, ex);<br>\t\t&#125;<br>\t&#125;<br><br>\t<span class=\"hljs-keyword\">if</span> (earlySingletonExposure) &#123;<br>\t\tObject earlySingletonReference = getSingleton(beanName, <span class=\"hljs-keyword\">false</span>);<br>\t\t<span class=\"hljs-keyword\">if</span> (earlySingletonReference != <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t\t<span class=\"hljs-keyword\">if</span> (exposedObject == bean) &#123;<br>\t\t\t\texposedObject = earlySingletonReference;<br>\t\t\t&#125;<br>\t\t\t<span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (!<span class=\"hljs-keyword\">this</span>.allowRawInjectionDespiteWrapping &amp;&amp; hasDependentBean(beanName)) &#123;<br>\t\t\t\tString[] dependentBeans = getDependentBeans(beanName);<br>\t\t\t\tSet&lt;String&gt; actualDependentBeans = <span class=\"hljs-keyword\">new</span> LinkedHashSet&lt;&gt;(dependentBeans.length);<br>\t\t\t\t<span class=\"hljs-keyword\">for</span> (String dependentBean : dependentBeans) &#123;<br>\t\t\t\t\t<span class=\"hljs-keyword\">if</span> (!removeSingletonIfCreatedForTypeCheckOnly(dependentBean)) &#123;<br>\t\t\t\t\t\tactualDependentBeans.add(dependentBean);<br>\t\t\t\t\t&#125;<br>\t\t\t\t&#125;<br>\t\t\t\t<span class=\"hljs-keyword\">if</span> (!actualDependentBeans.isEmpty()) &#123;<br>\t\t\t\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> BeanCurrentlyInCreationException(beanName,<br>\t\t\t\t\t\t\t<span class=\"hljs-string\">&quot;Bean with name &#x27;&quot;</span> + beanName + <span class=\"hljs-string\">&quot;&#x27; has been injected into other beans [&quot;</span> +<br>\t\t\t\t\t\t\tStringUtils.collectionToCommaDelimitedString(actualDependentBeans) +<br>\t\t\t\t\t\t\t<span class=\"hljs-string\">&quot;] in its raw version as part of a circular reference, but has eventually been &quot;</span> +<br>\t\t\t\t\t\t\t<span class=\"hljs-string\">&quot;wrapped. This means that said other beans do not use the final version of the &quot;</span> +<br>\t\t\t\t\t\t\t<span class=\"hljs-string\">&quot;bean. This is often the result of over-eager type matching - consider using &quot;</span> +<br>\t\t\t\t\t\t\t<span class=\"hljs-string\">&quot;&#x27;getBeanNamesOfType&#x27; with the &#x27;allowEagerInit&#x27; flag turned off, for example.&quot;</span>);<br>\t\t\t\t&#125;<br>\t\t\t&#125;<br>\t\t&#125;<br>\t&#125;<br><br>\t<span class=\"hljs-comment\">// Register bean as disposable.</span><br>\t<span class=\"hljs-keyword\">try</span> &#123;<br>\t\tregisterDisposableBeanIfNecessary(beanName, bean, mbd);<br>\t&#125;<br>\t<span class=\"hljs-keyword\">catch</span> (BeanDefinitionValidationException ex) &#123;<br>\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> BeanCreationException(<br>\t\t\t\tmbd.getResourceDescription(), beanName, <span class=\"hljs-string\">&quot;Invalid destruction signature&quot;</span>, ex);<br>\t&#125;<br><br>\t<span class=\"hljs-keyword\">return</span> exposedObject;<br>&#125;<br><br><br><span class=\"hljs-comment\">// 在AbstractAutowireCapableBeanFactory抽象类的doCreateBean方法中调用的 createBeanInstance(beanName, mbd, args)方法</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">protected</span> BeanWrapper <span class=\"hljs-title\">createBeanInstance</span><span class=\"hljs-params\">(String beanName, RootBeanDefinition mbd, <span class=\"hljs-meta\">@Nullable</span> Object[] args)</span> </span>&#123;<br>\t<span class=\"hljs-comment\">// Make sure bean class is actually resolved at this point.</span><br>\tClass&lt;?&gt; beanClass = resolveBeanClass(mbd, beanName);<br><br>\t<span class=\"hljs-keyword\">if</span> (beanClass != <span class=\"hljs-keyword\">null</span> &amp;&amp; !Modifier.isPublic(beanClass.getModifiers()) &amp;&amp; !mbd.isNonPublicAccessAllowed()) &#123;<br>\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> BeanCreationException(mbd.getResourceDescription(), beanName,<br>\t\t\t\t<span class=\"hljs-string\">&quot;Bean class isn&#x27;t public, and non-public access not allowed: &quot;</span> + beanClass.getName());<br>\t&#125;<br><br>\tSupplier&lt;?&gt; instanceSupplier = mbd.getInstanceSupplier();<br>\t<span class=\"hljs-keyword\">if</span> (instanceSupplier != <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t<span class=\"hljs-keyword\">return</span> obtainFromSupplier(instanceSupplier, beanName);<br>\t&#125;<br><br>\t<span class=\"hljs-keyword\">if</span> (mbd.getFactoryMethodName() != <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t<span class=\"hljs-keyword\">return</span> instantiateUsingFactoryMethod(beanName, mbd, args);<br>\t&#125;<br><br>\t<span class=\"hljs-comment\">// Shortcut when re-creating the same bean...</span><br>\t<span class=\"hljs-keyword\">boolean</span> resolved = <span class=\"hljs-keyword\">false</span>;<br>\t<span class=\"hljs-keyword\">boolean</span> autowireNecessary = <span class=\"hljs-keyword\">false</span>;<br>\t<span class=\"hljs-keyword\">if</span> (args == <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t<span class=\"hljs-keyword\">synchronized</span> (mbd.constructorArgumentLock) &#123;<br>\t\t\t<span class=\"hljs-keyword\">if</span> (mbd.resolvedConstructorOrFactoryMethod != <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t\t\tresolved = <span class=\"hljs-keyword\">true</span>;<br>\t\t\t\tautowireNecessary = mbd.constructorArgumentsResolved;<br>\t\t\t&#125;<br>\t\t&#125;<br>\t&#125;<br>\t<span class=\"hljs-keyword\">if</span> (resolved) &#123;<br>\t\t<span class=\"hljs-keyword\">if</span> (autowireNecessary) &#123;<br>\t\t\t<span class=\"hljs-keyword\">return</span> autowireConstructor(beanName, mbd, <span class=\"hljs-keyword\">null</span>, <span class=\"hljs-keyword\">null</span>);<br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t\t<span class=\"hljs-comment\">// 调用instantiateBean方法</span><br>\t\t\t<span class=\"hljs-keyword\">return</span> instantiateBean(beanName, mbd);<br>\t\t&#125;<br>\t&#125;<br><br>\t<span class=\"hljs-comment\">// Candidate constructors for autowiring?</span><br>\tConstructor&lt;?&gt;[] ctors = determineConstructorsFromBeanPostProcessors(beanClass, beanName);<br>\t<span class=\"hljs-keyword\">if</span> (ctors != <span class=\"hljs-keyword\">null</span> || mbd.getResolvedAutowireMode() == AUTOWIRE_CONSTRUCTOR ||<br>\t\t\tmbd.hasConstructorArgumentValues() || !ObjectUtils.isEmpty(args)) &#123;<br>\t\t<span class=\"hljs-keyword\">return</span> autowireConstructor(beanName, mbd, ctors, args);<br>\t&#125;<br><br>\t<span class=\"hljs-comment\">// Preferred constructors for default construction?</span><br>\tctors = mbd.getPreferredConstructors();<br>\t<span class=\"hljs-keyword\">if</span> (ctors != <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t<span class=\"hljs-keyword\">return</span> autowireConstructor(beanName, mbd, ctors, <span class=\"hljs-keyword\">null</span>);<br>\t&#125;<br><br>\t<span class=\"hljs-comment\">// No special handling: simply use no-arg constructor.</span><br>\t<span class=\"hljs-keyword\">return</span> instantiateBean(beanName, mbd);<br>&#125;<br><br><span class=\"hljs-comment\">// 在AbstractAutowireCapableBeanFactory抽象类的createBeanInstance方法中调用的instantiateBean(beanName, mbd)方法</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">protected</span> BeanWrapper <span class=\"hljs-title\">instantiateBean</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">final</span> String beanName, <span class=\"hljs-keyword\">final</span> RootBeanDefinition mbd)</span> </span>&#123;<br>\t<span class=\"hljs-keyword\">try</span> &#123;<br>\t\tObject beanInstance;<br>\t\t<span class=\"hljs-keyword\">final</span> BeanFactory parent = <span class=\"hljs-keyword\">this</span>;<br>\t\t<span class=\"hljs-keyword\">if</span> (System.getSecurityManager() != <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t\t<span class=\"hljs-comment\">// 核心逻辑</span><br>\t\t\tbeanInstance = AccessController.doPrivileged((PrivilegedAction&lt;Object&gt;) () -&gt;<br>\t\t\t\t\tgetInstantiationStrategy().instantiate(mbd, beanName, parent),<br>\t\t\t\t\tgetAccessControlContext());<br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t\t<span class=\"hljs-comment\">// 核心逻辑</span><br>\t\t\tbeanInstance = getInstantiationStrategy().instantiate(mbd, beanName, parent);<br>\t\t&#125;<br>\t\tBeanWrapper bw = <span class=\"hljs-keyword\">new</span> BeanWrapperImpl(beanInstance);<br>\t\tinitBeanWrapper(bw);<br>\t\t<span class=\"hljs-keyword\">return</span> bw;<br>\t&#125;<br>\t<span class=\"hljs-keyword\">catch</span> (Throwable ex) &#123;<br>\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> BeanCreationException(<br>\t\t\t\tmbd.getResourceDescription(), beanName, <span class=\"hljs-string\">&quot;Instantiation of bean failed&quot;</span>, ex);<br>\t&#125;<br>&#125;<br><br><span class=\"hljs-comment\">// 上面的getInstantiationStrategy()方法代码</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">protected</span> InstantiationStrategy <span class=\"hljs-title\">getInstantiationStrategy</span><span class=\"hljs-params\">()</span> </span>&#123;<br>\t<span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">this</span>.instantiationStrategy;<br>&#125;<br><br></code></pre></td></tr></table></figure></li>\n</ul>\n<h3 id=\"getInstantiationStrategy-方法的返回接口对象的策略对象的一个实现SimpleInstantiationStrategy\"><a href=\"#getInstantiationStrategy-方法的返回接口对象的策略对象的一个实现SimpleInstantiationStrategy\" class=\"headerlink\" title=\"getInstantiationStrategy()方法的返回接口对象的策略对象的一个实现SimpleInstantiationStrategy\"></a>getInstantiationStrategy()方法的返回接口对象的策略对象的一个实现SimpleInstantiationStrategy</h3><ul>\n<li>org.springframework.beans.factory.support.SimpleInstantiationStrategy</li>\n<li>SimpleInstantiationStrategy.instantiate(RootBeanDefinition bd, @Nullable String beanName, BeanFactory owner)方法的具体实现：<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-meta\">@Override</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> Object <span class=\"hljs-title\">instantiate</span><span class=\"hljs-params\">(RootBeanDefinition bd, <span class=\"hljs-meta\">@Nullable</span> String beanName, BeanFactory owner)</span> </span>&#123;<br>\t<span class=\"hljs-comment\">// Don&#x27;t override the class with CGLIB if no overrides.</span><br>\t<span class=\"hljs-keyword\">if</span> (!bd.hasMethodOverrides()) &#123;<br>\t\tConstructor&lt;?&gt; constructorToUse;<br>\t\t<span class=\"hljs-keyword\">synchronized</span> (bd.constructorArgumentLock) &#123;<br>\t\t\tconstructorToUse = (Constructor&lt;?&gt;) bd.resolvedConstructorOrFactoryMethod;<br>\t\t\t<span class=\"hljs-keyword\">if</span> (constructorToUse == <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t\t\t<span class=\"hljs-keyword\">final</span> Class&lt;?&gt; clazz = bd.getBeanClass();<br>\t\t\t\t<span class=\"hljs-keyword\">if</span> (clazz.isInterface()) &#123;<br>\t\t\t\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> BeanInstantiationException(clazz, <span class=\"hljs-string\">&quot;Specified class is an interface&quot;</span>);<br>\t\t\t\t&#125;<br>\t\t\t\t<span class=\"hljs-keyword\">try</span> &#123;<br>\t\t\t\t\t<span class=\"hljs-keyword\">if</span> (System.getSecurityManager() != <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t\t\t\t\tconstructorToUse = AccessController.doPrivileged(<br>\t\t\t\t\t\t\t\t(PrivilegedExceptionAction&lt;Constructor&lt;?&gt;&gt;) clazz::getDeclaredConstructor);<br>\t\t\t\t\t&#125;<br>\t\t\t\t\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t\t\t\t\tconstructorToUse = clazz.getDeclaredConstructor();<br>\t\t\t\t\t&#125;<br>\t\t\t\t\tbd.resolvedConstructorOrFactoryMethod = constructorToUse;<br>\t\t\t\t&#125;<br>\t\t\t\t<span class=\"hljs-keyword\">catch</span> (Throwable ex) &#123;<br>\t\t\t\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> BeanInstantiationException(clazz, <span class=\"hljs-string\">&quot;No default constructor found&quot;</span>, ex);<br>\t\t\t\t&#125;<br>\t\t\t&#125;<br>\t\t&#125;<br>\t\t<span class=\"hljs-comment\">// 调用静态方法BeanUtils.instantiateClass(constructorToUse);</span><br>\t\t<span class=\"hljs-keyword\">return</span> BeanUtils.instantiateClass(constructorToUse);<br>\t&#125;<br>\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t<span class=\"hljs-comment\">// Must generate CGLIB subclass.</span><br>\t\t<span class=\"hljs-keyword\">return</span> instantiateWithMethodInjection(bd, beanName, owner);<br>\t&#125;<br>&#125;<br></code></pre></td></tr></table></figure>\n<h4 id=\"静态方法BeanUtils-instantiateClass-constructorToUse-的实现细节\"><a href=\"#静态方法BeanUtils-instantiateClass-constructorToUse-的实现细节\" class=\"headerlink\" title=\"静态方法BeanUtils.instantiateClass(constructorToUse)的实现细节\"></a>静态方法BeanUtils.instantiateClass(constructorToUse)的实现细节</h4></li>\n<li>代码位置：org.springframework.beans.BeanUtils<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> &lt;T&gt; <span class=\"hljs-function\">T <span class=\"hljs-title\">instantiateClass</span><span class=\"hljs-params\">(Constructor&lt;T&gt; ctor, Object... args)</span> <span class=\"hljs-keyword\">throws</span> BeanInstantiationException </span>&#123;<br>\tAssert.notNull(ctor, <span class=\"hljs-string\">&quot;Constructor must not be null&quot;</span>);<br>\t<span class=\"hljs-keyword\">try</span> &#123;<br>\t\tReflectionUtils.makeAccessible(ctor);<br>\t\t<span class=\"hljs-comment\">// 判断是否是Kotlin类型</span><br>\t\t<span class=\"hljs-keyword\">if</span> (KotlinDetector.isKotlinReflectPresent() &amp;&amp; KotlinDetector.isKotlinType(ctor.getDeclaringClass())) &#123;<br>\t\t\t<span class=\"hljs-comment\">// 是Kotlin类型</span><br>\t\t\t<span class=\"hljs-keyword\">return</span> KotlinDelegate.instantiateClass(ctor, args);<br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t\t<span class=\"hljs-comment\">// 不是Kotlin类型</span><br>\t\t\tClass&lt;?&gt;[] parameterTypes = ctor.getParameterTypes();<br>\t\t\tAssert.isTrue(args.length &lt;= parameterTypes.length, <span class=\"hljs-string\">&quot;Can&#x27;t specify more arguments than constructor parameters&quot;</span>);<br>\t\t\tObject[] argsWithDefaultValues = <span class=\"hljs-keyword\">new</span> Object[args.length];<br>\t\t\t<span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">int</span> i = <span class=\"hljs-number\">0</span> ; i &lt; args.length; i++) &#123;<br>\t\t\t\t<span class=\"hljs-keyword\">if</span> (args[i] == <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t\t\t\tClass&lt;?&gt; parameterType = parameterTypes[i];<br>\t\t\t\t\targsWithDefaultValues[i] = (parameterType.isPrimitive() ? DEFAULT_TYPE_VALUES.get(parameterType) : <span class=\"hljs-keyword\">null</span>);<br>\t\t\t\t&#125;<br>\t\t\t\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t\t\t\targsWithDefaultValues[i] = args[i];<br>\t\t\t\t&#125;<br>\t\t\t&#125;<br>\t\t\t<span class=\"hljs-comment\">// 调用Constructor的newInstance方法，使用反射创建实例</span><br>\t\t\t<span class=\"hljs-comment\">// 到此之后bean实例创建完成</span><br>\t\t\t<span class=\"hljs-keyword\">return</span> ctor.newInstance(argsWithDefaultValues);<br>\t\t&#125;<br>\t&#125;<br>\t<span class=\"hljs-keyword\">catch</span> (InstantiationException ex) &#123;<br>\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> BeanInstantiationException(ctor, <span class=\"hljs-string\">&quot;Is it an abstract class?&quot;</span>, ex);<br>\t&#125;<br>\t<span class=\"hljs-keyword\">catch</span> (IllegalAccessException ex) &#123;<br>\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> BeanInstantiationException(ctor, <span class=\"hljs-string\">&quot;Is the constructor accessible?&quot;</span>, ex);<br>\t&#125;<br>\t<span class=\"hljs-keyword\">catch</span> (IllegalArgumentException ex) &#123;<br>\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> BeanInstantiationException(ctor, <span class=\"hljs-string\">&quot;Illegal arguments for constructor&quot;</span>, ex);<br>\t&#125;<br>\t<span class=\"hljs-keyword\">catch</span> (InvocationTargetException ex) &#123;<br>\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> BeanInstantiationException(ctor, <span class=\"hljs-string\">&quot;Constructor threw exception&quot;</span>, ex.getTargetException());<br>\t&#125;<br>&#125;<br><br></code></pre></td></tr></table></figure></li>\n</ul>\n<h4 id=\"AbstractAutowireCapableBeanFactory抽象类的中doCreateBean方法中调用的populateBean-beanName-mbd-instanceWrapper-方法\"><a href=\"#AbstractAutowireCapableBeanFactory抽象类的中doCreateBean方法中调用的populateBean-beanName-mbd-instanceWrapper-方法\" class=\"headerlink\" title=\"AbstractAutowireCapableBeanFactory抽象类的中doCreateBean方法中调用的populateBean(beanName, mbd, instanceWrapper)方法\"></a>AbstractAutowireCapableBeanFactory抽象类的中doCreateBean方法中调用的populateBean(beanName, mbd, instanceWrapper)方法</h4><ul>\n<li>在AbstractAutowireCapableBeanFactory抽象类中的方法populateBean方法</li>\n<li>该方法用于填充bean 具体发生依赖注入的地方<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-meta\">@SuppressWarnings(&quot;deprecation&quot;)</span>  <span class=\"hljs-comment\">// for postProcessPropertyValues</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">protected</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">populateBean</span><span class=\"hljs-params\">(String beanName, RootBeanDefinition mbd, <span class=\"hljs-meta\">@Nullable</span> BeanWrapper bw)</span> </span>&#123;<br>\t<span class=\"hljs-keyword\">if</span> (bw == <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t<span class=\"hljs-keyword\">if</span> (mbd.hasPropertyValues()) &#123;<br>\t\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> BeanCreationException(<br>\t\t\t\t\tmbd.getResourceDescription(), beanName, <span class=\"hljs-string\">&quot;Cannot apply property values to null instance&quot;</span>);<br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t\t<span class=\"hljs-comment\">// Skip property population phase for null instance.</span><br>\t\t\t<span class=\"hljs-keyword\">return</span>;<br>\t\t&#125;<br>\t&#125;<br><br>\t<span class=\"hljs-comment\">// Give any InstantiationAwareBeanPostProcessors the opportunity to modify the</span><br>\t<span class=\"hljs-comment\">// state of the bean before properties are set. This can be used, for example,</span><br>\t<span class=\"hljs-comment\">// to support styles of field injection.</span><br>\t<span class=\"hljs-keyword\">boolean</span> continueWithPropertyPopulation = <span class=\"hljs-keyword\">true</span>;<br><br>\t<span class=\"hljs-keyword\">if</span> (!mbd.isSynthetic() &amp;&amp; hasInstantiationAwareBeanPostProcessors()) &#123;<br>\t\t<span class=\"hljs-keyword\">for</span> (BeanPostProcessor bp : getBeanPostProcessors()) &#123;<br>\t\t\t<span class=\"hljs-keyword\">if</span> (bp <span class=\"hljs-keyword\">instanceof</span> InstantiationAwareBeanPostProcessor) &#123;<br>\t\t\t\tInstantiationAwareBeanPostProcessor ibp = (InstantiationAwareBeanPostProcessor) bp;<br>\t\t\t\t<span class=\"hljs-keyword\">if</span> (!ibp.postProcessAfterInstantiation(bw.getWrappedInstance(), beanName)) &#123;<br>\t\t\t\t\tcontinueWithPropertyPopulation = <span class=\"hljs-keyword\">false</span>;<br>\t\t\t\t\t<span class=\"hljs-keyword\">break</span>;<br>\t\t\t\t&#125;<br>\t\t\t&#125;<br>\t\t&#125;<br>\t&#125;<br><br>\t<span class=\"hljs-keyword\">if</span> (!continueWithPropertyPopulation) &#123;<br>\t\t<span class=\"hljs-keyword\">return</span>;<br>\t&#125;<br>    <span class=\"hljs-comment\">// 获取bean的所有属性 用于后面配置Property元素 即依赖关系</span><br>\tPropertyValues pvs = (mbd.hasPropertyValues() ? mbd.getPropertyValues() : <span class=\"hljs-keyword\">null</span>);<br><br>\t<span class=\"hljs-keyword\">int</span> resolvedAutowireMode = mbd.getResolvedAutowireMode();<br>\t<span class=\"hljs-keyword\">if</span> (resolvedAutowireMode == AUTOWIRE_BY_NAME || resolvedAutowireMode == AUTOWIRE_BY_TYPE) &#123;<br>\t\tMutablePropertyValues newPvs = <span class=\"hljs-keyword\">new</span> MutablePropertyValues(pvs);<br>\t\t<span class=\"hljs-comment\">// Add property values based on autowire by name if applicable.</span><br>\t\t<span class=\"hljs-keyword\">if</span> (resolvedAutowireMode == AUTOWIRE_BY_NAME) &#123;<br>\t\t\tautowireByName(beanName, mbd, bw, newPvs);<br>\t\t&#125;<br>\t\t<span class=\"hljs-comment\">// Add property values based on autowire by type if applicable.</span><br>\t\t<span class=\"hljs-keyword\">if</span> (resolvedAutowireMode == AUTOWIRE_BY_TYPE) &#123;<br>\t\t\tautowireByType(beanName, mbd, bw, newPvs);<br>\t\t&#125;<br>\t\tpvs = newPvs;<br>\t&#125;<br><br>\t<span class=\"hljs-keyword\">boolean</span> hasInstAwareBpps = hasInstantiationAwareBeanPostProcessors();<br>\t<span class=\"hljs-keyword\">boolean</span> needsDepCheck = (mbd.getDependencyCheck() != AbstractBeanDefinition.DEPENDENCY_CHECK_NONE);<br><br>\tPropertyDescriptor[] filteredPds = <span class=\"hljs-keyword\">null</span>;<br>\t<span class=\"hljs-keyword\">if</span> (hasInstAwareBpps) &#123;<br>\t\t<span class=\"hljs-keyword\">if</span> (pvs == <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t\tpvs = mbd.getPropertyValues();<br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">for</span> (BeanPostProcessor bp : getBeanPostProcessors()) &#123;<br>\t\t\t<span class=\"hljs-keyword\">if</span> (bp <span class=\"hljs-keyword\">instanceof</span> InstantiationAwareBeanPostProcessor) &#123;<br>\t\t\t\tInstantiationAwareBeanPostProcessor ibp = (InstantiationAwareBeanPostProcessor) bp;<br>\t\t\t\tPropertyValues pvsToUse = ibp.postProcessProperties(pvs, bw.getWrappedInstance(), beanName);<br>\t\t\t\t<span class=\"hljs-keyword\">if</span> (pvsToUse == <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t\t\t\t<span class=\"hljs-keyword\">if</span> (filteredPds == <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t\t\t\t\tfilteredPds = filterPropertyDescriptorsForDependencyCheck(bw, mbd.allowCaching);<br>\t\t\t\t\t&#125;<br>\t\t\t\t\tpvsToUse = ibp.postProcessPropertyValues(pvs, filteredPds, bw.getWrappedInstance(), beanName);<br>\t\t\t\t\t<span class=\"hljs-keyword\">if</span> (pvsToUse == <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t\t\t\t\t<span class=\"hljs-keyword\">return</span>;<br>\t\t\t\t\t&#125;<br>\t\t\t\t&#125;<br>\t\t\t\tpvs = pvsToUse;<br>\t\t\t&#125;<br>\t\t&#125;<br>\t&#125;<br>\t<span class=\"hljs-keyword\">if</span> (needsDepCheck) &#123;<br>\t\t<span class=\"hljs-keyword\">if</span> (filteredPds == <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t\tfilteredPds = filterPropertyDescriptorsForDependencyCheck(bw, mbd.allowCaching);<br>\t\t&#125;<br>\t\tcheckDependencies(beanName, mbd, filteredPds, pvs);<br>\t&#125;<br><br>\t<span class=\"hljs-keyword\">if</span> (pvs != <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t<span class=\"hljs-comment\">// 核心逻辑 applyPropertyValues方法的具体代码在下面</span><br>\t\tapplyPropertyValues(beanName, mbd, bw, pvs);<br>\t&#125;<br>&#125;<br><br><span class=\"hljs-comment\">// 上面方法中调用的applyPropertyValues方法具体代码</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">protected</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">applyPropertyValues</span><span class=\"hljs-params\">(String beanName, BeanDefinition mbd, BeanWrapper bw, PropertyValues pvs)</span> </span>&#123;<br>\t<span class=\"hljs-keyword\">if</span> (pvs.isEmpty()) &#123;<br>\t\t<span class=\"hljs-keyword\">return</span>;<br>\t&#125;<br><br>\t<span class=\"hljs-keyword\">if</span> (System.getSecurityManager() != <span class=\"hljs-keyword\">null</span> &amp;&amp; bw <span class=\"hljs-keyword\">instanceof</span> BeanWrapperImpl) &#123;<br>\t\t((BeanWrapperImpl) bw).setSecurityContext(getAccessControlContext());<br>\t&#125;<br><br>\tMutablePropertyValues mpvs = <span class=\"hljs-keyword\">null</span>;<br>\tList&lt;PropertyValue&gt; original;<br><br>\t<span class=\"hljs-keyword\">if</span> (pvs <span class=\"hljs-keyword\">instanceof</span> MutablePropertyValues) &#123;<br>\t\tmpvs = (MutablePropertyValues) pvs;<br>\t\t<span class=\"hljs-keyword\">if</span> (mpvs.isConverted()) &#123;<br>\t\t\t<span class=\"hljs-comment\">// Shortcut: use the pre-converted values as-is.</span><br>\t\t\t<span class=\"hljs-keyword\">try</span> &#123;<br>\t\t\t\tbw.setPropertyValues(mpvs);<br>\t\t\t\t<span class=\"hljs-keyword\">return</span>;<br>\t\t\t&#125;<br>\t\t\t<span class=\"hljs-keyword\">catch</span> (BeansException ex) &#123;<br>\t\t\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> BeanCreationException(<br>\t\t\t\t\t\tmbd.getResourceDescription(), beanName, <span class=\"hljs-string\">&quot;Error setting property values&quot;</span>, ex);<br>\t\t\t&#125;<br>\t\t&#125;<br>\t\toriginal = mpvs.getPropertyValueList();<br>\t&#125;<br>\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\toriginal = Arrays.asList(pvs.getPropertyValues());<br>\t&#125;<br><br>\tTypeConverter converter = getCustomTypeConverter();<br>\t<span class=\"hljs-keyword\">if</span> (converter == <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\tconverter = bw;<br>\t&#125;<br>\tBeanDefinitionValueResolver valueResolver = <span class=\"hljs-keyword\">new</span> BeanDefinitionValueResolver(<span class=\"hljs-keyword\">this</span>, beanName, mbd, converter);<br><br>\t<span class=\"hljs-comment\">// Create a deep copy, resolving any references for values.</span><br>\tList&lt;PropertyValue&gt; deepCopy = <span class=\"hljs-keyword\">new</span> ArrayList&lt;&gt;(original.size());<br>\t<span class=\"hljs-keyword\">boolean</span> resolveNecessary = <span class=\"hljs-keyword\">false</span>;<br>\t<span class=\"hljs-keyword\">for</span> (PropertyValue pv : original) &#123;<br>\t\t<span class=\"hljs-keyword\">if</span> (pv.isConverted()) &#123;<br>\t\t\tdeepCopy.add(pv);<br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t\tString propertyName = pv.getName();<br>\t\t\tObject originalValue = pv.getValue();<br>\t\t\t<span class=\"hljs-keyword\">if</span> (originalValue == AutowiredPropertyMarker.INSTANCE) &#123;<br>\t\t\t\tMethod writeMethod = bw.getPropertyDescriptor(propertyName).getWriteMethod();<br>\t\t\t\t<span class=\"hljs-keyword\">if</span> (writeMethod == <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t\t\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> IllegalArgumentException(<span class=\"hljs-string\">&quot;Autowire marker for property without write method: &quot;</span> + pv);<br>\t\t\t\t&#125;<br>\t\t\t\toriginalValue = <span class=\"hljs-keyword\">new</span> DependencyDescriptor(<span class=\"hljs-keyword\">new</span> MethodParameter(writeMethod, <span class=\"hljs-number\">0</span>), <span class=\"hljs-keyword\">true</span>);<br>\t\t\t&#125;<br>\t\t\t<span class=\"hljs-comment\">// 获取property对应的值   resolveValueIfNecessary方法的代码在下面给出</span><br>\t\t\tObject resolvedValue = valueResolver.resolveValueIfNecessary(pv, originalValue);<br>\t\t\tObject convertedValue = resolvedValue;<br>\t\t\t<span class=\"hljs-keyword\">boolean</span> convertible = bw.isWritableProperty(propertyName) &amp;&amp;<br>\t\t\t\t\t!PropertyAccessorUtils.isNestedOrIndexedProperty(propertyName);<br>\t\t\t<span class=\"hljs-keyword\">if</span> (convertible) &#123;<br>\t\t\t\tconvertedValue = convertForProperty(resolvedValue, propertyName, bw, converter);<br>\t\t\t&#125;<br>\t\t\t<span class=\"hljs-comment\">// Possibly store converted value in merged bean definition,</span><br>\t\t\t<span class=\"hljs-comment\">// in order to avoid re-conversion for every created bean instance.</span><br>\t\t\t<span class=\"hljs-keyword\">if</span> (resolvedValue == originalValue) &#123;<br>\t\t\t\t<span class=\"hljs-keyword\">if</span> (convertible) &#123;<br>\t\t\t\t\tpv.setConvertedValue(convertedValue);<br>\t\t\t\t&#125;<br>\t\t\t\tdeepCopy.add(pv);<br>\t\t\t&#125;<br>\t\t\t<span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (convertible &amp;&amp; originalValue <span class=\"hljs-keyword\">instanceof</span> TypedStringValue &amp;&amp;<br>\t\t\t\t\t!((TypedStringValue) originalValue).isDynamic() &amp;&amp;<br>\t\t\t\t\t!(convertedValue <span class=\"hljs-keyword\">instanceof</span> Collection || ObjectUtils.isArray(convertedValue))) &#123;<br>\t\t\t\tpv.setConvertedValue(convertedValue);<br>\t\t\t\tdeepCopy.add(pv);<br>\t\t\t&#125;<br>\t\t\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t\t\tresolveNecessary = <span class=\"hljs-keyword\">true</span>;<br>\t\t\t\tdeepCopy.add(<span class=\"hljs-keyword\">new</span> PropertyValue(pv, convertedValue));<br>\t\t\t&#125;<br>\t\t&#125;<br>\t&#125;<br>\t<span class=\"hljs-keyword\">if</span> (mpvs != <span class=\"hljs-keyword\">null</span> &amp;&amp; !resolveNecessary) &#123;<br>\t\tmpvs.setConverted();<br>\t&#125;<br><br>\t<span class=\"hljs-comment\">// Set our (possibly massaged) deep copy.</span><br>\t<span class=\"hljs-keyword\">try</span> &#123;<br>\t\t<span class=\"hljs-comment\">// 获取到依赖的对象值后 将依赖值注入</span><br>\t\tbw.setPropertyValues(<span class=\"hljs-keyword\">new</span> MutablePropertyValues(deepCopy));<br>\t&#125;<br>\t<span class=\"hljs-keyword\">catch</span> (BeansException ex) &#123;<br>\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> BeanCreationException(<br>\t\t\t\tmbd.getResourceDescription(), beanName, <span class=\"hljs-string\">&quot;Error setting property values&quot;</span>, ex);<br>\t&#125;<br>&#125;<br><br><br></code></pre></td></tr></table></figure>\n####################################################################################################################################################33</li>\n</ul>\n<h4 id=\"valueResolver-resolveValueIfNecessary-pv-originalValue-对应的方法\"><a href=\"#valueResolver-resolveValueIfNecessary-pv-originalValue-对应的方法\" class=\"headerlink\" title=\"valueResolver.resolveValueIfNecessary(pv, originalValue);对应的方法\"></a>valueResolver.resolveValueIfNecessary(pv, originalValue);对应的方法</h4><ul>\n<li>代码位置：org.springframework.beans.factory.support.BeanDefinitionValueResolver<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-meta\">@Nullable</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> Object <span class=\"hljs-title\">resolveValueIfNecessary</span><span class=\"hljs-params\">(Object argName, <span class=\"hljs-meta\">@Nullable</span> Object value)</span> </span>&#123;<br>\t<span class=\"hljs-comment\">// We must check each value to see whether it requires a runtime reference</span><br>\t<span class=\"hljs-comment\">// to another bean to be resolved.</span><br>\t<span class=\"hljs-keyword\">if</span> (value <span class=\"hljs-keyword\">instanceof</span> RuntimeBeanReference) &#123;<br>\t\tRuntimeBeanReference ref = (RuntimeBeanReference) value;<br>\t\t<span class=\"hljs-comment\">// 核心逻辑 解决Bean依赖关系 具体代码在下方贴出</span><br>\t\t<span class=\"hljs-keyword\">return</span> resolveReference(argName, ref);<br>\t&#125;<br>\t<span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (value <span class=\"hljs-keyword\">instanceof</span> RuntimeBeanNameReference) &#123;<br>\t\tString refName = ((RuntimeBeanNameReference) value).getBeanName();<br>\t\trefName = String.valueOf(doEvaluate(refName));<br>\t\t<span class=\"hljs-keyword\">if</span> (!<span class=\"hljs-keyword\">this</span>.beanFactory.containsBean(refName)) &#123;<br>\t\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> BeanDefinitionStoreException(<br>\t\t\t\t\t<span class=\"hljs-string\">&quot;Invalid bean name &#x27;&quot;</span> + refName + <span class=\"hljs-string\">&quot;&#x27; in bean reference for &quot;</span> + argName);<br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">return</span> refName;<br>\t&#125;<br>\t<span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (value <span class=\"hljs-keyword\">instanceof</span> BeanDefinitionHolder) &#123;<br>\t\t<span class=\"hljs-comment\">// Resolve BeanDefinitionHolder: contains BeanDefinition with name and aliases.</span><br>\t\tBeanDefinitionHolder bdHolder = (BeanDefinitionHolder) value;<br>\t\t<span class=\"hljs-keyword\">return</span> resolveInnerBean(argName, bdHolder.getBeanName(), bdHolder.getBeanDefinition());<br>\t&#125;<br>\t<span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (value <span class=\"hljs-keyword\">instanceof</span> BeanDefinition) &#123;<br>\t\t<span class=\"hljs-comment\">// Resolve plain BeanDefinition, without contained name: use dummy name.</span><br>\t\tBeanDefinition bd = (BeanDefinition) value;<br>\t\tString innerBeanName = <span class=\"hljs-string\">&quot;(inner bean)&quot;</span> + BeanFactoryUtils.GENERATED_BEAN_NAME_SEPARATOR +<br>\t\t\t\tObjectUtils.getIdentityHexString(bd);<br>\t\t<span class=\"hljs-keyword\">return</span> resolveInnerBean(argName, innerBeanName, bd);<br>\t&#125;<br>\t<span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (value <span class=\"hljs-keyword\">instanceof</span> DependencyDescriptor) &#123;<br>\t\tSet&lt;String&gt; autowiredBeanNames = <span class=\"hljs-keyword\">new</span> LinkedHashSet&lt;&gt;(<span class=\"hljs-number\">4</span>);<br>\t\tObject result = <span class=\"hljs-keyword\">this</span>.beanFactory.resolveDependency(<br>\t\t\t\t(DependencyDescriptor) value, <span class=\"hljs-keyword\">this</span>.beanName, autowiredBeanNames, <span class=\"hljs-keyword\">this</span>.typeConverter);<br>\t\t<span class=\"hljs-keyword\">for</span> (String autowiredBeanName : autowiredBeanNames) &#123;<br>\t\t\t<span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">this</span>.beanFactory.containsBean(autowiredBeanName)) &#123;<br>\t\t\t\t<span class=\"hljs-keyword\">this</span>.beanFactory.registerDependentBean(autowiredBeanName, <span class=\"hljs-keyword\">this</span>.beanName);<br>\t\t\t&#125;<br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">return</span> result;<br>\t&#125;<br>\t<span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (value <span class=\"hljs-keyword\">instanceof</span> ManagedArray) &#123;<br>\t\t<span class=\"hljs-comment\">// May need to resolve contained runtime references.</span><br>\t\tManagedArray array = (ManagedArray) value;<br>\t\tClass&lt;?&gt; elementType = array.resolvedElementType;<br>\t\t<span class=\"hljs-keyword\">if</span> (elementType == <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t\tString elementTypeName = array.getElementTypeName();<br>\t\t\t<span class=\"hljs-keyword\">if</span> (StringUtils.hasText(elementTypeName)) &#123;<br>\t\t\t\t<span class=\"hljs-keyword\">try</span> &#123;<br>\t\t\t\t\telementType = ClassUtils.forName(elementTypeName, <span class=\"hljs-keyword\">this</span>.beanFactory.getBeanClassLoader());<br>\t\t\t\t\tarray.resolvedElementType = elementType;<br>\t\t\t\t&#125;<br>\t\t\t\t<span class=\"hljs-keyword\">catch</span> (Throwable ex) &#123;<br>\t\t\t\t\t<span class=\"hljs-comment\">// Improve the message by showing the context.</span><br>\t\t\t\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> BeanCreationException(<br>\t\t\t\t\t\t\t<span class=\"hljs-keyword\">this</span>.beanDefinition.getResourceDescription(), <span class=\"hljs-keyword\">this</span>.beanName,<br>\t\t\t\t\t\t\t<span class=\"hljs-string\">&quot;Error resolving array type for &quot;</span> + argName, ex);<br>\t\t\t\t&#125;<br>\t\t\t&#125;<br>\t\t\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t\t\telementType = Object.class;<br>\t\t\t&#125;<br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">return</span> resolveManagedArray(argName, (List&lt;?&gt;) value, elementType);<br>\t&#125;<br>\t<span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (value <span class=\"hljs-keyword\">instanceof</span> ManagedList) &#123;<br>\t\t<span class=\"hljs-comment\">// May need to resolve contained runtime references.</span><br>\t\t<span class=\"hljs-keyword\">return</span> resolveManagedList(argName, (List&lt;?&gt;) value);<br>\t&#125;<br>\t<span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (value <span class=\"hljs-keyword\">instanceof</span> ManagedSet) &#123;<br>\t\t<span class=\"hljs-comment\">// May need to resolve contained runtime references.</span><br>\t\t<span class=\"hljs-keyword\">return</span> resolveManagedSet(argName, (Set&lt;?&gt;) value);<br>\t&#125;<br>\t<span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (value <span class=\"hljs-keyword\">instanceof</span> ManagedMap) &#123;<br>\t\t<span class=\"hljs-comment\">// May need to resolve contained runtime references.</span><br>\t\t<span class=\"hljs-keyword\">return</span> resolveManagedMap(argName, (Map&lt;?, ?&gt;) value);<br>\t&#125;<br>\t<span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (value <span class=\"hljs-keyword\">instanceof</span> ManagedProperties) &#123;<br>\t\tProperties original = (Properties) value;<br>\t\tProperties copy = <span class=\"hljs-keyword\">new</span> Properties();<br>\t\toriginal.forEach((propKey, propValue) -&gt; &#123;<br>\t\t\t<span class=\"hljs-keyword\">if</span> (propKey <span class=\"hljs-keyword\">instanceof</span> TypedStringValue) &#123;<br>\t\t\t\tpropKey = evaluate((TypedStringValue) propKey);<br>\t\t\t&#125;<br>\t\t\t<span class=\"hljs-keyword\">if</span> (propValue <span class=\"hljs-keyword\">instanceof</span> TypedStringValue) &#123;<br>\t\t\t\tpropValue = evaluate((TypedStringValue) propValue);<br>\t\t\t&#125;<br>\t\t\t<span class=\"hljs-keyword\">if</span> (propKey == <span class=\"hljs-keyword\">null</span> || propValue == <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> BeanCreationException(<br>\t\t\t\t\t\t<span class=\"hljs-keyword\">this</span>.beanDefinition.getResourceDescription(), <span class=\"hljs-keyword\">this</span>.beanName,<br>\t\t\t\t\t\t<span class=\"hljs-string\">&quot;Error converting Properties key/value pair for &quot;</span> + argName + <span class=\"hljs-string\">&quot;: resolved to null&quot;</span>);<br>\t\t\t&#125;<br>\t\t\tcopy.put(propKey, propValue);<br>\t\t&#125;);<br>\t\t<span class=\"hljs-keyword\">return</span> copy;<br>\t&#125;<br>\t<span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (value <span class=\"hljs-keyword\">instanceof</span> TypedStringValue) &#123;<br>\t\t<span class=\"hljs-comment\">// Convert value to target type here.</span><br>\t\tTypedStringValue typedStringValue = (TypedStringValue) value;<br>\t\tObject valueObject = evaluate(typedStringValue);<br>\t\t<span class=\"hljs-keyword\">try</span> &#123;<br>\t\t\tClass&lt;?&gt; resolvedTargetType = resolveTargetType(typedStringValue);<br>\t\t\t<span class=\"hljs-keyword\">if</span> (resolvedTargetType != <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t\t\t<span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">this</span>.typeConverter.convertIfNecessary(valueObject, resolvedTargetType);<br>\t\t\t&#125;<br>\t\t\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t\t\t<span class=\"hljs-keyword\">return</span> valueObject;<br>\t\t\t&#125;<br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">catch</span> (Throwable ex) &#123;<br>\t\t\t<span class=\"hljs-comment\">// Improve the message by showing the context.</span><br>\t\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> BeanCreationException(<br>\t\t\t\t\t<span class=\"hljs-keyword\">this</span>.beanDefinition.getResourceDescription(), <span class=\"hljs-keyword\">this</span>.beanName,<br>\t\t\t\t\t<span class=\"hljs-string\">&quot;Error converting typed String value for &quot;</span> + argName, ex);<br>\t\t&#125;<br>\t&#125;<br>\t<span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (value <span class=\"hljs-keyword\">instanceof</span> NullBean) &#123;<br>\t\t<span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">null</span>;<br>\t&#125;<br>\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t<span class=\"hljs-keyword\">return</span> evaluate(value);<br>\t&#125;<br>&#125;<br><br><br><span class=\"hljs-comment\">// 上面resolveValueIfNecessary方法中调用的resolveReference方法</span><br><span class=\"hljs-comment\">// 最后获取到依赖的bean</span><br><span class=\"hljs-meta\">@Nullable</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">private</span> Object <span class=\"hljs-title\">resolveReference</span><span class=\"hljs-params\">(Object argName, RuntimeBeanReference ref)</span> </span>&#123;<br>\t<span class=\"hljs-keyword\">try</span> &#123;<br>\t\tObject bean;<br>\t\tClass&lt;?&gt; beanType = ref.getBeanType();<br>\t\t<span class=\"hljs-keyword\">if</span> (ref.isToParent()) &#123;<br>\t\t\tBeanFactory parent = <span class=\"hljs-keyword\">this</span>.beanFactory.getParentBeanFactory();<br>\t\t\t<span class=\"hljs-keyword\">if</span> (parent == <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> BeanCreationException(<br>\t\t\t\t\t\t<span class=\"hljs-keyword\">this</span>.beanDefinition.getResourceDescription(), <span class=\"hljs-keyword\">this</span>.beanName,<br>\t\t\t\t\t\t<span class=\"hljs-string\">&quot;Cannot resolve reference to bean &quot;</span> + ref +<br>\t\t\t\t\t\t\t\t<span class=\"hljs-string\">&quot; in parent factory: no parent factory available&quot;</span>);<br>\t\t\t&#125;<br>\t\t\t<span class=\"hljs-keyword\">if</span> (beanType != <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t\t\t<span class=\"hljs-comment\">// 发生递归调用</span><br>\t\t\t\tbean = parent.getBean(beanType);<br>\t\t\t&#125;<br>\t\t\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t\t\t<span class=\"hljs-comment\">// 发生递归调用 根据依赖的名称从BeanFactory中递归得到依赖 最后获取到依赖的bean</span><br>\t\t\t\tbean = parent.getBean(String.valueOf(doEvaluate(ref.getBeanName())));<br>\t\t\t&#125;<br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t\tString resolvedName;<br>\t\t\t<span class=\"hljs-keyword\">if</span> (beanType != <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t\t\tNamedBeanHolder&lt;?&gt; namedBean = <span class=\"hljs-keyword\">this</span>.beanFactory.resolveNamedBean(beanType);<br>\t\t\t\tbean = namedBean.getBeanInstance();<br>\t\t\t\tresolvedName = namedBean.getBeanName();<br>\t\t\t&#125;<br>\t\t\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t\t\tresolvedName = String.valueOf(doEvaluate(ref.getBeanName()));<br>\t\t\t\tbean = <span class=\"hljs-keyword\">this</span>.beanFactory.getBean(resolvedName);<br>\t\t\t&#125;<br>\t\t\t<span class=\"hljs-keyword\">this</span>.beanFactory.registerDependentBean(resolvedName, <span class=\"hljs-keyword\">this</span>.beanName);<br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">if</span> (bean <span class=\"hljs-keyword\">instanceof</span> NullBean) &#123;<br>\t\t\tbean = <span class=\"hljs-keyword\">null</span>;<br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">return</span> bean;<br>\t&#125;<br>\t<span class=\"hljs-keyword\">catch</span> (BeansException ex) &#123;<br>\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> BeanCreationException(<br>\t\t\t\t<span class=\"hljs-keyword\">this</span>.beanDefinition.getResourceDescription(), <span class=\"hljs-keyword\">this</span>.beanName,<br>\t\t\t\t<span class=\"hljs-string\">&quot;Cannot resolve reference to bean &#x27;&quot;</span> + ref.getBeanName() + <span class=\"hljs-string\">&quot;&#x27; while setting &quot;</span> + argName, ex);<br>\t&#125;<br>&#125;<br></code></pre></td></tr></table></figure></li>\n</ul>\n<h4 id=\"AbstractPropertyAccessor的setPropertyValues-PropertyValues-pvs-方法\"><a href=\"#AbstractPropertyAccessor的setPropertyValues-PropertyValues-pvs-方法\" class=\"headerlink\" title=\"AbstractPropertyAccessor的setPropertyValues(PropertyValues pvs)方法\"></a>AbstractPropertyAccessor的setPropertyValues(PropertyValues pvs)方法</h4><ul>\n<li>代码位置：org.springframework.beans.AbstractPropertyAccessor</li>\n<li>循环属性列表 <figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-meta\">@Override</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setPropertyValues</span><span class=\"hljs-params\">(PropertyValues pvs)</span> <span class=\"hljs-keyword\">throws</span> BeansException </span>&#123;<br>\tsetPropertyValues(pvs, <span class=\"hljs-keyword\">false</span>, <span class=\"hljs-keyword\">false</span>);<br>&#125;<br><br><span class=\"hljs-comment\">//  循环属性列表 </span><br><span class=\"hljs-meta\">@Override</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setPropertyValues</span><span class=\"hljs-params\">(PropertyValues pvs, <span class=\"hljs-keyword\">boolean</span> ignoreUnknown, <span class=\"hljs-keyword\">boolean</span> ignoreInvalid)</span></span><br><span class=\"hljs-function\">\t\t<span class=\"hljs-keyword\">throws</span> BeansException </span>&#123;<br><br>\tList&lt;PropertyAccessException&gt; propertyAccessExceptions = <span class=\"hljs-keyword\">null</span>;<br>\tList&lt;PropertyValue&gt; propertyValues = (pvs <span class=\"hljs-keyword\">instanceof</span> MutablePropertyValues ?<br>\t\t\t((MutablePropertyValues) pvs).getPropertyValueList() : Arrays.asList(pvs.getPropertyValues()));<br>    <span class=\"hljs-comment\">// 循环属性列表 </span><br>\t<span class=\"hljs-keyword\">for</span> (PropertyValue pv : propertyValues) &#123;<br>\t\t<span class=\"hljs-keyword\">try</span> &#123;<br>\t\t\t<span class=\"hljs-comment\">// This method may throw any BeansException, which won&#x27;t be caught</span><br>\t\t\t<span class=\"hljs-comment\">// here, if there is a critical failure such as no matching field.</span><br>\t\t\t<span class=\"hljs-comment\">// We can attempt to deal only with less serious exceptions.</span><br>\t\t\t<span class=\"hljs-comment\">// 该方法通过AbstractNestablePropertyAccessor的setPropertyValue(PropertyValue pv)方法实现</span><br>\t\t\tsetPropertyValue(pv);<br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">catch</span> (NotWritablePropertyException ex) &#123;<br>\t\t\t<span class=\"hljs-keyword\">if</span> (!ignoreUnknown) &#123;<br>\t\t\t\t<span class=\"hljs-keyword\">throw</span> ex;<br>\t\t\t&#125;<br>\t\t\t<span class=\"hljs-comment\">// Otherwise, just ignore it and continue...</span><br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">catch</span> (NullValueInNestedPathException ex) &#123;<br>\t\t\t<span class=\"hljs-keyword\">if</span> (!ignoreInvalid) &#123;<br>\t\t\t\t<span class=\"hljs-keyword\">throw</span> ex;<br>\t\t\t&#125;<br>\t\t\t<span class=\"hljs-comment\">// Otherwise, just ignore it and continue...</span><br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">catch</span> (PropertyAccessException ex) &#123;<br>\t\t\t<span class=\"hljs-keyword\">if</span> (propertyAccessExceptions == <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t\t\tpropertyAccessExceptions = <span class=\"hljs-keyword\">new</span> ArrayList&lt;&gt;();<br>\t\t\t&#125;<br>\t\t\tpropertyAccessExceptions.add(ex);<br>\t\t&#125;<br>\t&#125;<br><br>\t<span class=\"hljs-comment\">// If we encountered individual exceptions, throw the composite exception.</span><br>\t<span class=\"hljs-keyword\">if</span> (propertyAccessExceptions != <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\tPropertyAccessException[] paeArray = propertyAccessExceptions.toArray(<span class=\"hljs-keyword\">new</span> PropertyAccessException[<span class=\"hljs-number\">0</span>]);<br>\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> PropertyBatchUpdateException(paeArray);<br>\t&#125;<br>&#125;<br></code></pre></td></tr></table></figure></li>\n</ul>\n<h4 id=\"AbstractNestablePropertyAccessor的-setPropertyValue-PropertyValue-pv-方法\"><a href=\"#AbstractNestablePropertyAccessor的-setPropertyValue-PropertyValue-pv-方法\" class=\"headerlink\" title=\"AbstractNestablePropertyAccessor的 setPropertyValue(PropertyValue pv)方法\"></a>AbstractNestablePropertyAccessor的 setPropertyValue(PropertyValue pv)方法</h4><ul>\n<li>代码位置：org.springframework.beans.AbstractNestablePropertyAccessor<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-meta\">@Override</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setPropertyValue</span><span class=\"hljs-params\">(PropertyValue pv)</span> <span class=\"hljs-keyword\">throws</span> BeansException </span>&#123;<br>\t\tPropertyTokenHolder tokens = (PropertyTokenHolder) pv.resolvedTokens;<br>\t\t<span class=\"hljs-keyword\">if</span> (tokens == <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t\tString propertyName = pv.getName();<br>\t\t\tAbstractNestablePropertyAccessor nestedPa;<br>\t\t\t<span class=\"hljs-keyword\">try</span> &#123;<br>\t\t\t\tnestedPa = getPropertyAccessorForPropertyPath(propertyName);<br>\t\t\t&#125;<br>\t\t\t<span class=\"hljs-keyword\">catch</span> (NotReadablePropertyException ex) &#123;<br>\t\t\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> NotWritablePropertyException(getRootClass(), <span class=\"hljs-keyword\">this</span>.nestedPath + propertyName,<br>\t\t\t\t\t\t<span class=\"hljs-string\">&quot;Nested property in path &#x27;&quot;</span> + propertyName + <span class=\"hljs-string\">&quot;&#x27; does not exist&quot;</span>, ex);<br>\t\t\t&#125;<br>\t\t\ttokens = getPropertyNameTokens(getFinalPath(nestedPa, propertyName));<br>\t\t\t<span class=\"hljs-keyword\">if</span> (nestedPa == <span class=\"hljs-keyword\">this</span>) &#123;<br>\t\t\t\tpv.getOriginalPropertyValue().resolvedTokens = tokens;<br>\t\t\t&#125;<br>\t\t\tnestedPa.setPropertyValue(tokens, pv);<br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t\tsetPropertyValue(tokens, pv);<br>\t\t&#125;<br>\t&#125;<br></code></pre></td></tr></table></figure>\n########################################################################################################################################</li>\n<li>上面setPropertyValue(PropertyValue pv)方法的重载方法setPropertyValue(PropertyTokenHolder tokens, PropertyValue pv)<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">protected</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setPropertyValue</span><span class=\"hljs-params\">(PropertyTokenHolder tokens, PropertyValue pv)</span> <span class=\"hljs-keyword\">throws</span> BeansException </span>&#123;<br>\t<span class=\"hljs-keyword\">if</span> (tokens.keys != <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\tprocessKeyedProperty(tokens, pv);<br>\t&#125;<br>\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\tprocessLocalProperty(tokens, pv);<br>\t&#125;<br>&#125;<br></code></pre></td></tr></table></figure></li>\n<li>processLocalProperty(PropertyTokenHolder tokens, PropertyValue pv)方法<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">processLocalProperty</span><span class=\"hljs-params\">(PropertyTokenHolder tokens, PropertyValue pv)</span> </span>&#123;<br>\tPropertyHandler ph = getLocalPropertyHandler(tokens.actualName);<br>\t<span class=\"hljs-keyword\">if</span> (ph == <span class=\"hljs-keyword\">null</span> || !ph.isWritable()) &#123;<br>\t\t<span class=\"hljs-keyword\">if</span> (pv.isOptional()) &#123;<br>\t\t\t<span class=\"hljs-keyword\">if</span> (logger.isDebugEnabled()) &#123;<br>\t\t\t\tlogger.debug(<span class=\"hljs-string\">&quot;Ignoring optional value for property &#x27;&quot;</span> + tokens.actualName +<br>\t\t\t\t\t\t<span class=\"hljs-string\">&quot;&#x27; - property not found on bean class [&quot;</span> + getRootClass().getName() + <span class=\"hljs-string\">&quot;]&quot;</span>);<br>\t\t\t&#125;<br>\t\t\t<span class=\"hljs-keyword\">return</span>;<br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t\t<span class=\"hljs-keyword\">throw</span> createNotWritablePropertyException(tokens.canonicalName);<br>\t\t&#125;<br>\t&#125;<br><br>\tObject oldValue = <span class=\"hljs-keyword\">null</span>;<br>\t<span class=\"hljs-keyword\">try</span> &#123;<br>\t\tObject originalValue = pv.getValue();<span class=\"hljs-comment\">//</span><br>\t\tObject valueToApply = originalValue;<span class=\"hljs-comment\">//</span><br>\t\t<span class=\"hljs-keyword\">if</span> (!Boolean.FALSE.equals(pv.conversionNecessary)) &#123;<br>\t\t\t<span class=\"hljs-keyword\">if</span> (pv.isConverted()) &#123;<br>\t\t\t\tvalueToApply = pv.getConvertedValue();<br>\t\t\t&#125;<br>\t\t\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t\t\t<span class=\"hljs-keyword\">if</span> (isExtractOldValueForEditor() &amp;&amp; ph.isReadable()) &#123;<br>\t\t\t\t\t<span class=\"hljs-keyword\">try</span> &#123;<br>\t\t\t\t\t\toldValue = ph.getValue();<br>\t\t\t\t\t&#125;<br>\t\t\t\t\t<span class=\"hljs-keyword\">catch</span> (Exception ex) &#123;<br>\t\t\t\t\t\t<span class=\"hljs-keyword\">if</span> (ex <span class=\"hljs-keyword\">instanceof</span> PrivilegedActionException) &#123;<br>\t\t\t\t\t\t\tex = ((PrivilegedActionException) ex).getException();<br>\t\t\t\t\t\t&#125;<br>\t\t\t\t\t\t<span class=\"hljs-keyword\">if</span> (logger.isDebugEnabled()) &#123;<br>\t\t\t\t\t\t\tlogger.debug(<span class=\"hljs-string\">&quot;Could not read previous value of property &#x27;&quot;</span> +<br>\t\t\t\t\t\t\t\t\t<span class=\"hljs-keyword\">this</span>.nestedPath + tokens.canonicalName + <span class=\"hljs-string\">&quot;&#x27;&quot;</span>, ex);<br>\t\t\t\t\t\t&#125;<br>\t\t\t\t\t&#125;<br>\t\t\t\t&#125;<br>\t\t\t\tvalueToApply = convertForProperty(<br>\t\t\t\t\t\ttokens.canonicalName, oldValue, originalValue, ph.toTypeDescriptor());<br>\t\t\t&#125;<br>\t\t\tpv.getOriginalPropertyValue().conversionNecessary = (valueToApply != originalValue);<br>\t\t&#125;<br>\t\tph.setValue(valueToApply);<span class=\"hljs-comment\">// 具体代码在下方列出</span><br>\t&#125;<br>\t<span class=\"hljs-keyword\">catch</span> (TypeMismatchException ex) &#123;<br>\t\t<span class=\"hljs-keyword\">throw</span> ex;<br>\t&#125;<br>\t<span class=\"hljs-keyword\">catch</span> (InvocationTargetException ex) &#123;<br>\t\tPropertyChangeEvent propertyChangeEvent = <span class=\"hljs-keyword\">new</span> PropertyChangeEvent(<br>\t\t\t\tgetRootInstance(), <span class=\"hljs-keyword\">this</span>.nestedPath + tokens.canonicalName, oldValue, pv.getValue());<br>\t\t<span class=\"hljs-keyword\">if</span> (ex.getTargetException() <span class=\"hljs-keyword\">instanceof</span> ClassCastException) &#123;<br>\t\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> TypeMismatchException(propertyChangeEvent, ph.getPropertyType(), ex.getTargetException());<br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t\tThrowable cause = ex.getTargetException();<br>\t\t\t<span class=\"hljs-keyword\">if</span> (cause <span class=\"hljs-keyword\">instanceof</span> UndeclaredThrowableException) &#123;<br>\t\t\t\t<span class=\"hljs-comment\">// May happen e.g. with Groovy-generated methods</span><br>\t\t\t\tcause = cause.getCause();<br>\t\t\t&#125;<br>\t\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> MethodInvocationException(propertyChangeEvent, cause);<br>\t\t&#125;<br>\t&#125;<br>\t<span class=\"hljs-keyword\">catch</span> (Exception ex) &#123;<br>\t\tPropertyChangeEvent pce = <span class=\"hljs-keyword\">new</span> PropertyChangeEvent(<br>\t\t\t\tgetRootInstance(), <span class=\"hljs-keyword\">this</span>.nestedPath + tokens.canonicalName, oldValue, pv.getValue());<br>\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> MethodInvocationException(pce, ex);<br>\t&#125;<br>&#125;<br></code></pre></td></tr></table></figure></li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>上述ph.setValue方法在org.springframework.beans.AbstractNestablePropertyAccessor抽象类中定义</li>\n<li>public abstract void setValue(@Nullable Object value) throws Exception; </li>\n<li>一个具体实现在org.springframework.beans.BeanWrapperImp的内部类BeanPropertyHandler中，完整代码如下：<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">final</span> PropertyDescriptor pd;  <span class=\"hljs-comment\">//BeanPropertyHandler中的字段</span><br><br><span class=\"hljs-meta\">@Override</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setValue</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">final</span> <span class=\"hljs-meta\">@Nullable</span> Object value)</span> <span class=\"hljs-keyword\">throws</span> Exception </span>&#123;<br>\t<span class=\"hljs-keyword\">final</span> Method writeMethod = (<span class=\"hljs-keyword\">this</span>.pd <span class=\"hljs-keyword\">instanceof</span> GenericTypeAwarePropertyDescriptor ?<br>\t\t\t((GenericTypeAwarePropertyDescriptor) <span class=\"hljs-keyword\">this</span>.pd).getWriteMethodForActualAccess() :<br>\t\t\t<span class=\"hljs-keyword\">this</span>.pd.getWriteMethod());<span class=\"hljs-comment\">// 找到属性的set方法</span><br>\t<span class=\"hljs-keyword\">if</span> (System.getSecurityManager() != <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\tAccessController.doPrivileged((PrivilegedAction&lt;Object&gt;) () -&gt; &#123;<br>\t\t\tReflectionUtils.makeAccessible(writeMethod);<br>\t\t\t<span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">null</span>;<br>\t\t&#125;);<br>\t\t<span class=\"hljs-keyword\">try</span> &#123;<br>\t\t\tAccessController.doPrivileged((PrivilegedExceptionAction&lt;Object&gt;) () -&gt;<br>\t\t\t\t\twriteMethod.invoke(getWrappedInstance(), value), acc);<br>\t\t\t\t\t<span class=\"hljs-comment\">// 调用Method的invoke方法，完成属性注入</span><br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">catch</span> (PrivilegedActionException ex) &#123;<br>\t\t\t<span class=\"hljs-keyword\">throw</span> ex.getException();<br>\t\t&#125;<br>\t&#125;<br>\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\tReflectionUtils.makeAccessible(writeMethod);<br>\t\twriteMethod.invoke(getWrappedInstance(), value);<span class=\"hljs-comment\">//调用Method的invoke方法，完成属性注入</span><br>\t&#125;<br>&#125;<br></code></pre></td></tr></table></figure></li>\n<li>至此Ioc容器的启动过程基本结束</li>\n</ul>\n<h1 id=\"15-finishRefresh-方法\"><a href=\"#15-finishRefresh-方法\" class=\"headerlink\" title=\"15. finishRefresh();方法\"></a>15. finishRefresh();方法</h1><ul>\n<li>org.springframework.context.support.AbstractApplicationContext中的finishRefresh()方法</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">protected</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">finishRefresh</span><span class=\"hljs-params\">()</span> </span>&#123;<br>\t<span class=\"hljs-comment\">// Clear context-level resource caches (such as ASM metadata from scanning).</span><br>\tclearResourceCaches();<br><br>\t<span class=\"hljs-comment\">// Initialize lifecycle processor for this context.</span><br>\tinitLifecycleProcessor();<br><br>\t<span class=\"hljs-comment\">// Propagate refresh to lifecycle processor first.</span><br>\tgetLifecycleProcessor().onRefresh();<br><br>\t<span class=\"hljs-comment\">// Publish the final event.</span><br>\tpublishEvent(<span class=\"hljs-keyword\">new</span> ContextRefreshedEvent(<span class=\"hljs-keyword\">this</span>));<br><br>\t<span class=\"hljs-comment\">// Participate in LiveBeansView MBean, if active.</span><br>\tLiveBeansView.registerApplicationContext(<span class=\"hljs-keyword\">this</span>);<br>&#125;<br></code></pre></td></tr></table></figure>\n\n\n<h1 id=\"16refresh-过程抛出异常时\"><a href=\"#16refresh-过程抛出异常时\" class=\"headerlink\" title=\"16refresh()过程抛出异常时\"></a>16refresh()过程抛出异常时</h1><ul>\n<li>之中有两个处理方法destroyBeans()和cancelRefresh(ex)</li>\n</ul>\n<h2 id=\"16-1-destroyBeans-方法\"><a href=\"#16-1-destroyBeans-方法\" class=\"headerlink\" title=\"16.1 destroyBeans();方法\"></a>16.1 destroyBeans();方法</h2><ul>\n<li>org.springframework.context.support.AbstractApplicationContext中的destroyBeans()方法</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">protected</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">destroyBeans</span><span class=\"hljs-params\">()</span> </span>&#123;<br>\tgetBeanFactory().destroySingletons();<br>&#125;<br></code></pre></td></tr></table></figure>\n\n<h2 id=\"16-2-cancelRefresh-ex-方法\"><a href=\"#16-2-cancelRefresh-ex-方法\" class=\"headerlink\" title=\"16.2 cancelRefresh(ex);方法\"></a>16.2 cancelRefresh(ex);方法</h2><ul>\n<li>org.springframework.context.support.AbstractApplicationContext中的cancelRefresh(ex)方法<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">protected</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">cancelRefresh</span><span class=\"hljs-params\">(BeansException ex)</span> </span>&#123;<br>\t<span class=\"hljs-keyword\">this</span>.active.set(<span class=\"hljs-keyword\">false</span>);<br>&#125;<br></code></pre></td></tr></table></figure>\n<h2 id=\"16-3抛出异常BeansException\"><a href=\"#16-3抛出异常BeansException\" class=\"headerlink\" title=\"16.3抛出异常BeansException\"></a>16.3抛出异常BeansException</h2></li>\n</ul>\n<h1 id=\"17-resetCommonCaches-方法\"><a href=\"#17-resetCommonCaches-方法\" class=\"headerlink\" title=\"17 resetCommonCaches();方法\"></a>17 resetCommonCaches();方法</h1><ul>\n<li>org.springframework.context.support.AbstractApplicationContext中的resetCommonCaches()方法</li>\n<li>try-catch-finally代码块中finally包裹的方法<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">protected</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">resetCommonCaches</span><span class=\"hljs-params\">()</span> </span>&#123;<br>\tReflectionUtils.clearCache();<br>\tAnnotationUtils.clearCache();<br>\tResolvableType.clearCache();<br>\tCachedIntrospectionResults.clearClassLoader(getClassLoader());<br>&#125;<br></code></pre></td></tr></table></figure></li>\n<li>执行到此Ioc容器启动完成，可以正式投入使用</li>\n</ul>\n<h1 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h1><ul>\n<li>Ioc的底层原理实现：Spring Ioc启动分为两步：<ul>\n<li>1.创建BeanFactory</li>\n<li>2.实例化Bean</li>\n</ul>\n</li>\n<li>Spring的Bean在内存中的状态就是BeanDefination</li>\n<li>在Bean的创建和依赖注入的过程中，需要根据BeanDefination的信息来递归的完成依赖注入，从代码可以看到，这些递归都是以getBean()为入口的，一个递归是在上下文体系中查找需要的bean和bean的依赖关系；另一个递归是在依赖注入时，通过递归调用容器的getBean方法得到当前依赖的Bean，同时也触发对依赖bean的创建和注入。在对bean的属性进行依赖注入时，解析过程也是一个递归过程，这样根据依赖关系，一层一层的完成Bean的创建和注入，直到当前bean相关的整个依赖链的注入完成。由于整个IoC容器启动过程较为复杂，使用下面的一张图来描述让读者更清楚厘清IoC容器的启动过程。</li>\n</ul>\n<p><img src=\"/Blog/static/image/20191125/BeanFactoryInitFlowChart.png\" alt=\"Ioc容器启动过程\"></p>\n<h3 id=\"模板\"><a href=\"#模板\" class=\"headerlink\" title=\"模板\"></a>模板</h3><ul>\n<li><p>代码位置:org.springframework.context.support.AbstractApplicationContext.java</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">protected</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">postProcessBeanFactory</span><span class=\"hljs-params\">(ConfigurableListableBeanFactory beanFactory)</span> </span>&#123;<br>\t<br>&#125;<br></code></pre></td></tr></table></figure></li>\n<li><p>代码位置:org.springframework.context.support.AbstractApplicationContext.java</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><br></code></pre></td></tr></table></figure></li>\n<li><p>代码位置:.java</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><br></code></pre></td></tr></table></figure></li>\n<li><p>代码位置:.java</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><br></code></pre></td></tr></table></figure></li>\n</ul>\n<h1 id=\"参考资料\"><a href=\"#参考资料\" class=\"headerlink\" title=\"参考资料\"></a>参考资料</h1><ul>\n<li>Spring源码深度解析（第二版） 郝佳</li>\n<li>Spring5企业级开发实战 周冠亚 黄文毅 <a href=\"https://github.com/online-demo/spring5projectdemo\">配套源码</a></li>\n<li>Gitee同步版本：<a href=\"https://gitee.com/ACANX/spring5projectdemo\">https://gitee.com/ACANX/spring5projectdemo</a></li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"1-几个重要类-接口\"><a href=\"#1-几个重要类-接口\" class=\"headerlink\" title=\"1.几个重要类/接口\"></a>1.几个重要类/接口</h1><h2 id=\"阅读前的准备\"><a href=\"#阅读前的准备\" class=\"headerlink\" title=\"阅读前的准备\"></a>阅读前的准备</h2><ul>\n<li>源码下载：<ul>\n<li><a href=\"https://github.com/spring-projects/spring-framework\">https://github.com/spring-projects/spring-framework</a>  </li>\n<li><a href=\"https://github.com/spring-projects/spring-framework.git\">https://github.com/spring-projects/spring-framework.git</a></li>\n</ul>\n</li>\n<li>源码版本：v5.2.1.RELEASE</li>\n</ul>\n<h2 id=\"1-1-BeanFactory-顶级接口（低配版的IoC容器）\"><a href=\"#1-1-BeanFactory-顶级接口（低配版的IoC容器）\" class=\"headerlink\" title=\"1.1 BeanFactory 顶级接口（低配版的IoC容器）\"></a>1.1 BeanFactory 顶级接口（低配版的IoC容器）</h2><h3 id=\"BeanFactory接口定义说明\"><a href=\"#BeanFactory接口定义说明\" class=\"headerlink\" title=\"BeanFactory接口定义说明\"></a>BeanFactory接口定义说明</h3><ul>\n<li>BeanFactory是低配版的IoC容器，定义了Ioc容器基本的功能</li>\n</ul>\n<h3 id=\"完整版源码：\"><a href=\"#完整版源码：\" class=\"headerlink\" title=\"完整版源码：\"></a>完整版源码：</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br><span class=\"line\">252</span><br><span class=\"line\">253</span><br><span class=\"line\">254</span><br><span class=\"line\">255</span><br><span class=\"line\">256</span><br><span class=\"line\">257</span><br><span class=\"line\">258</span><br><span class=\"line\">259</span><br><span class=\"line\">260</span><br><span class=\"line\">261</span><br><span class=\"line\">262</span><br><span class=\"line\">263</span><br><span class=\"line\">264</span><br><span class=\"line\">265</span><br><span class=\"line\">266</span><br><span class=\"line\">267</span><br><span class=\"line\">268</span><br><span class=\"line\">269</span><br><span class=\"line\">270</span><br><span class=\"line\">271</span><br><span class=\"line\">272</span><br><span class=\"line\">273</span><br><span class=\"line\">274</span><br><span class=\"line\">275</span><br><span class=\"line\">276</span><br><span class=\"line\">277</span><br><span class=\"line\">278</span><br><span class=\"line\">279</span><br><span class=\"line\">280</span><br><span class=\"line\">281</span><br><span class=\"line\">282</span><br><span class=\"line\">283</span><br><span class=\"line\">284</span><br><span class=\"line\">285</span><br><span class=\"line\">286</span><br><span class=\"line\">287</span><br><span class=\"line\">288</span><br><span class=\"line\">289</span><br><span class=\"line\">290</span><br><span class=\"line\">291</span><br><span class=\"line\">292</span><br><span class=\"line\">293</span><br><span class=\"line\">294</span><br><span class=\"line\">295</span><br><span class=\"line\">296</span><br><span class=\"line\">297</span><br><span class=\"line\">298</span><br><span class=\"line\">299</span><br><span class=\"line\">300</span><br><span class=\"line\">301</span><br><span class=\"line\">302</span><br><span class=\"line\">303</span><br><span class=\"line\">304</span><br><span class=\"line\">305</span><br><span class=\"line\">306</span><br><span class=\"line\">307</span><br><span class=\"line\">308</span><br><span class=\"line\">309</span><br><span class=\"line\">310</span><br><span class=\"line\">311</span><br><span class=\"line\">312</span><br><span class=\"line\">313</span><br><span class=\"line\">314</span><br><span class=\"line\">315</span><br><span class=\"line\">316</span><br><span class=\"line\">317</span><br><span class=\"line\">318</span><br><span class=\"line\">319</span><br><span class=\"line\">320</span><br><span class=\"line\">321</span><br><span class=\"line\">322</span><br><span class=\"line\">323</span><br><span class=\"line\">324</span><br><span class=\"line\">325</span><br><span class=\"line\">326</span><br><span class=\"line\">327</span><br><span class=\"line\">328</span><br><span class=\"line\">329</span><br><span class=\"line\">330</span><br><span class=\"line\">331</span><br><span class=\"line\">332</span><br><span class=\"line\">333</span><br><span class=\"line\">334</span><br><span class=\"line\">335</span><br><span class=\"line\">336</span><br><span class=\"line\">337</span><br><span class=\"line\">338</span><br><span class=\"line\">339</span><br><span class=\"line\">340</span><br><span class=\"line\">341</span><br><span class=\"line\">342</span><br><span class=\"line\">343</span><br><span class=\"line\">344</span><br><span class=\"line\">345</span><br><span class=\"line\">346</span><br><span class=\"line\">347</span><br><span class=\"line\">348</span><br><span class=\"line\">349</span><br><span class=\"line\">350</span><br><span class=\"line\">351</span><br><span class=\"line\">352</span><br><span class=\"line\">353</span><br><span class=\"line\">354</span><br><span class=\"line\">355</span><br><span class=\"line\">356</span><br><span class=\"line\">357</span><br><span class=\"line\">358</span><br><span class=\"line\">359</span><br><span class=\"line\">360</span><br><span class=\"line\">361</span><br><span class=\"line\">362</span><br><span class=\"line\">363</span><br><span class=\"line\">364</span><br><span class=\"line\">365</span><br><span class=\"line\">366</span><br><span class=\"line\">367</span><br><span class=\"line\">368</span><br><span class=\"line\">369</span><br><span class=\"line\">370</span><br><span class=\"line\">371</span><br><span class=\"line\">372</span><br><span class=\"line\">373</span><br><span class=\"line\">374</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\"> * Copyright 2002-2019 the original author or authors.</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span><br><span class=\"hljs-comment\"> * you may not use this file except in compliance with the License.</span><br><span class=\"hljs-comment\"> * You may obtain a copy of the License at</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> *      https://www.apache.org/licenses/LICENSE-2.0</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> * Unless required by applicable law or agreed to in writing, software</span><br><span class=\"hljs-comment\"> * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span><br><span class=\"hljs-comment\"> * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span><br><span class=\"hljs-comment\"> * See the License for the specific language governing permissions and</span><br><span class=\"hljs-comment\"> * limitations under the License.</span><br><span class=\"hljs-comment\"> */</span><br><br><span class=\"hljs-keyword\">package</span> org.springframework.beans.factory;<br><br><span class=\"hljs-keyword\">import</span> org.springframework.beans.BeansException;<br><span class=\"hljs-keyword\">import</span> org.springframework.core.ResolvableType;<br><span class=\"hljs-keyword\">import</span> org.springframework.lang.Nullable;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * The root interface for accessing a Spring bean container.</span><br><span class=\"hljs-comment\"> * This is the basic client view of a bean container;</span><br><span class=\"hljs-comment\"> * further interfaces such as &#123;<span class=\"hljs-doctag\">@link</span> ListableBeanFactory&#125; and</span><br><span class=\"hljs-comment\"> * &#123;<span class=\"hljs-doctag\">@link</span> org.springframework.beans.factory.config.ConfigurableBeanFactory&#125;</span><br><span class=\"hljs-comment\"> * are available for specific purposes.</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> * &lt;p&gt;This interface is implemented by objects that hold a number of bean definitions,</span><br><span class=\"hljs-comment\"> * each uniquely identified by a String name. Depending on the bean definition,</span><br><span class=\"hljs-comment\"> * the factory will return either an independent instance of a contained object</span><br><span class=\"hljs-comment\"> * (the Prototype design pattern), or a single shared instance (a superior</span><br><span class=\"hljs-comment\"> * alternative to the Singleton design pattern, in which the instance is a</span><br><span class=\"hljs-comment\"> * singleton in the scope of the factory). Which type of instance will be returned</span><br><span class=\"hljs-comment\"> * depends on the bean factory configuration: the API is the same. Since Spring</span><br><span class=\"hljs-comment\"> * 2.0, further scopes are available depending on the concrete application</span><br><span class=\"hljs-comment\"> * context (e.g. &quot;request&quot; and &quot;session&quot; scopes in a web environment).</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> * &lt;p&gt;The point of this approach is that the BeanFactory is a central registry</span><br><span class=\"hljs-comment\"> * of application components, and centralizes configuration of application</span><br><span class=\"hljs-comment\"> * components (no more do individual objects need to read properties files,</span><br><span class=\"hljs-comment\"> * for example). See chapters 4 and 11 of &quot;Expert One-on-One J2EE Design and</span><br><span class=\"hljs-comment\"> * Development&quot; for a discussion of the benefits of this approach.</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> * &lt;p&gt;Note that it is generally better to rely on Dependency Injection</span><br><span class=\"hljs-comment\"> * (&quot;push&quot; configuration) to configure application objects through setters</span><br><span class=\"hljs-comment\"> * or constructors, rather than use any form of &quot;pull&quot; configuration like a</span><br><span class=\"hljs-comment\"> * BeanFactory lookup. Spring&#x27;s Dependency Injection functionality is</span><br><span class=\"hljs-comment\"> * implemented using this BeanFactory interface and its subinterfaces.</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> * &lt;p&gt;Normally a BeanFactory will load bean definitions stored in a configuration</span><br><span class=\"hljs-comment\"> * source (such as an XML document), and use the &#123;<span class=\"hljs-doctag\">@code</span> org.springframework.beans&#125;</span><br><span class=\"hljs-comment\"> * package to configure the beans. However, an implementation could simply return</span><br><span class=\"hljs-comment\"> * Java objects it creates as necessary directly in Java code. There are no</span><br><span class=\"hljs-comment\"> * constraints on how the definitions could be stored: LDAP, RDBMS, XML,</span><br><span class=\"hljs-comment\"> * properties file, etc. Implementations are encouraged to support references</span><br><span class=\"hljs-comment\"> * amongst beans (Dependency Injection).</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> * &lt;p&gt;In contrast to the methods in &#123;<span class=\"hljs-doctag\">@link</span> ListableBeanFactory&#125;, all of the</span><br><span class=\"hljs-comment\"> * operations in this interface will also check parent factories if this is a</span><br><span class=\"hljs-comment\"> * &#123;<span class=\"hljs-doctag\">@link</span> HierarchicalBeanFactory&#125;. If a bean is not found in this factory instance,</span><br><span class=\"hljs-comment\"> * the immediate parent factory will be asked. Beans in this factory instance</span><br><span class=\"hljs-comment\"> * are supposed to override beans of the same name in any parent factory.</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> * &lt;p&gt;Bean factory implementations should support the standard bean lifecycle interfaces</span><br><span class=\"hljs-comment\"> * as far as possible. The full set of initialization methods and their standard order is:</span><br><span class=\"hljs-comment\"> * &lt;ol&gt;</span><br><span class=\"hljs-comment\"> * &lt;li&gt;BeanNameAware&#x27;s &#123;<span class=\"hljs-doctag\">@code</span> setBeanName&#125;</span><br><span class=\"hljs-comment\"> * &lt;li&gt;BeanClassLoaderAware&#x27;s &#123;<span class=\"hljs-doctag\">@code</span> setBeanClassLoader&#125;</span><br><span class=\"hljs-comment\"> * &lt;li&gt;BeanFactoryAware&#x27;s &#123;<span class=\"hljs-doctag\">@code</span> setBeanFactory&#125;</span><br><span class=\"hljs-comment\"> * &lt;li&gt;EnvironmentAware&#x27;s &#123;<span class=\"hljs-doctag\">@code</span> setEnvironment&#125;</span><br><span class=\"hljs-comment\"> * &lt;li&gt;EmbeddedValueResolverAware&#x27;s &#123;<span class=\"hljs-doctag\">@code</span> setEmbeddedValueResolver&#125;</span><br><span class=\"hljs-comment\"> * &lt;li&gt;ResourceLoaderAware&#x27;s &#123;<span class=\"hljs-doctag\">@code</span> setResourceLoader&#125;</span><br><span class=\"hljs-comment\"> * (only applicable when running in an application context)</span><br><span class=\"hljs-comment\"> * &lt;li&gt;ApplicationEventPublisherAware&#x27;s &#123;<span class=\"hljs-doctag\">@code</span> setApplicationEventPublisher&#125;</span><br><span class=\"hljs-comment\"> * (only applicable when running in an application context)</span><br><span class=\"hljs-comment\"> * &lt;li&gt;MessageSourceAware&#x27;s &#123;<span class=\"hljs-doctag\">@code</span> setMessageSource&#125;</span><br><span class=\"hljs-comment\"> * (only applicable when running in an application context)</span><br><span class=\"hljs-comment\"> * &lt;li&gt;ApplicationContextAware&#x27;s &#123;<span class=\"hljs-doctag\">@code</span> setApplicationContext&#125;</span><br><span class=\"hljs-comment\"> * (only applicable when running in an application context)</span><br><span class=\"hljs-comment\"> * &lt;li&gt;ServletContextAware&#x27;s &#123;<span class=\"hljs-doctag\">@code</span> setServletContext&#125;</span><br><span class=\"hljs-comment\"> * (only applicable when running in a web application context)</span><br><span class=\"hljs-comment\"> * &lt;li&gt;&#123;<span class=\"hljs-doctag\">@code</span> postProcessBeforeInitialization&#125; methods of BeanPostProcessors</span><br><span class=\"hljs-comment\"> * &lt;li&gt;InitializingBean&#x27;s &#123;<span class=\"hljs-doctag\">@code</span> afterPropertiesSet&#125;</span><br><span class=\"hljs-comment\"> * &lt;li&gt;a custom init-method definition</span><br><span class=\"hljs-comment\"> * &lt;li&gt;&#123;<span class=\"hljs-doctag\">@code</span> postProcessAfterInitialization&#125; methods of BeanPostProcessors</span><br><span class=\"hljs-comment\"> * &lt;/ol&gt;</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> * &lt;p&gt;On shutdown of a bean factory, the following lifecycle methods apply:</span><br><span class=\"hljs-comment\"> * &lt;ol&gt;</span><br><span class=\"hljs-comment\"> * &lt;li&gt;&#123;<span class=\"hljs-doctag\">@code</span> postProcessBeforeDestruction&#125; methods of DestructionAwareBeanPostProcessors</span><br><span class=\"hljs-comment\"> * &lt;li&gt;DisposableBean&#x27;s &#123;<span class=\"hljs-doctag\">@code</span> destroy&#125;</span><br><span class=\"hljs-comment\"> * &lt;li&gt;a custom destroy-method definition</span><br><span class=\"hljs-comment\"> * &lt;/ol&gt;</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> Rod Johnson</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> Juergen Hoeller</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> Chris Beams</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@since</span> 13 April 2001</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@see</span> BeanNameAware#setBeanName</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@see</span> BeanClassLoaderAware#setBeanClassLoader</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@see</span> BeanFactoryAware#setBeanFactory</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@see</span> org.springframework.context.ResourceLoaderAware#setResourceLoader</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@see</span> org.springframework.context.ApplicationEventPublisherAware#setApplicationEventPublisher</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@see</span> org.springframework.context.MessageSourceAware#setMessageSource</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@see</span> org.springframework.context.ApplicationContextAware#setApplicationContext</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@see</span> org.springframework.web.context.ServletContextAware#setServletContext</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@see</span> org.springframework.beans.factory.config.BeanPostProcessor#postProcessBeforeInitialization</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@see</span> InitializingBean#afterPropertiesSet</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@see</span> org.springframework.beans.factory.support.RootBeanDefinition#getInitMethodName</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@see</span> org.springframework.beans.factory.config.BeanPostProcessor#postProcessAfterInitialization</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@see</span> DisposableBean#destroy</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@see</span> org.springframework.beans.factory.support.RootBeanDefinition#getDestroyMethodName</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">interface</span> <span class=\"hljs-title\">BeanFactory</span> </span>&#123;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Used to dereference a &#123;<span class=\"hljs-doctag\">@link</span> FactoryBean&#125; instance and distinguish it from</span><br><span class=\"hljs-comment\">\t * beans &lt;i&gt;created&lt;/i&gt; by the FactoryBean. For example, if the bean named</span><br><span class=\"hljs-comment\">\t * &#123;<span class=\"hljs-doctag\">@code</span> myJndiObject&#125; is a FactoryBean, getting &#123;<span class=\"hljs-doctag\">@code</span> &amp;myJndiObject&#125;</span><br><span class=\"hljs-comment\">\t * will return the factory, not the instance returned by the factory.</span><br><span class=\"hljs-comment\">\t */</span><br>\tString FACTORY_BEAN_PREFIX = <span class=\"hljs-string\">&quot;&amp;&quot;</span>;<br><br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return an instance, which may be shared or independent, of the specified bean.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;This method allows a Spring BeanFactory to be used as a replacement for the</span><br><span class=\"hljs-comment\">\t * Singleton or Prototype design pattern. Callers may retain references to</span><br><span class=\"hljs-comment\">\t * returned objects in the case of Singleton beans.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Translates aliases back to the corresponding canonical bean name.</span><br><span class=\"hljs-comment\">\t * Will ask the parent factory if the bean cannot be found in this factory instance.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@param</span> name the name of the bean to retrieve</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@return</span> an instance of the bean</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@throws</span> NoSuchBeanDefinitionException if there is no bean with the specified name</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@throws</span> BeansException if the bean could not be obtained</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\">Object <span class=\"hljs-title\">getBean</span><span class=\"hljs-params\">(String name)</span> <span class=\"hljs-keyword\">throws</span> BeansException</span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return an instance, which may be shared or independent, of the specified bean.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Behaves the same as &#123;<span class=\"hljs-doctag\">@link</span> #getBean(String)&#125;, but provides a measure of type</span><br><span class=\"hljs-comment\">\t * safety by throwing a BeanNotOfRequiredTypeException if the bean is not of the</span><br><span class=\"hljs-comment\">\t * required type. This means that ClassCastException can&#x27;t be thrown on casting</span><br><span class=\"hljs-comment\">\t * the result correctly, as can happen with &#123;<span class=\"hljs-doctag\">@link</span> #getBean(String)&#125;.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Translates aliases back to the corresponding canonical bean name.</span><br><span class=\"hljs-comment\">\t * Will ask the parent factory if the bean cannot be found in this factory instance.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@param</span> name the name of the bean to retrieve</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@param</span> requiredType type the bean must match; can be an interface or superclass</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@return</span> an instance of the bean</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@throws</span> NoSuchBeanDefinitionException if there is no such bean definition</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@throws</span> BeanNotOfRequiredTypeException if the bean is not of the required type</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@throws</span> BeansException if the bean could not be created</span><br><span class=\"hljs-comment\">\t */</span><br>\t&lt;T&gt; <span class=\"hljs-function\">T <span class=\"hljs-title\">getBean</span><span class=\"hljs-params\">(String name, Class&lt;T&gt; requiredType)</span> <span class=\"hljs-keyword\">throws</span> BeansException</span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return an instance, which may be shared or independent, of the specified bean.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Allows for specifying explicit constructor arguments / factory method arguments,</span><br><span class=\"hljs-comment\">\t * overriding the specified default arguments (if any) in the bean definition.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@param</span> name the name of the bean to retrieve</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@param</span> args arguments to use when creating a bean instance using explicit arguments</span><br><span class=\"hljs-comment\">\t * (only applied when creating a new instance as opposed to retrieving an existing one)</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@return</span> an instance of the bean</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@throws</span> NoSuchBeanDefinitionException if there is no such bean definition</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@throws</span> BeanDefinitionStoreException if arguments have been given but</span><br><span class=\"hljs-comment\">\t * the affected bean isn&#x27;t a prototype</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@throws</span> BeansException if the bean could not be created</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@since</span> 2.5</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\">Object <span class=\"hljs-title\">getBean</span><span class=\"hljs-params\">(String name, Object... args)</span> <span class=\"hljs-keyword\">throws</span> BeansException</span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return the bean instance that uniquely matches the given object type, if any.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;This method goes into &#123;<span class=\"hljs-doctag\">@link</span> ListableBeanFactory&#125; by-type lookup territory</span><br><span class=\"hljs-comment\">\t * but may also be translated into a conventional by-name lookup based on the name</span><br><span class=\"hljs-comment\">\t * of the given type. For more extensive retrieval operations across sets of beans,</span><br><span class=\"hljs-comment\">\t * use &#123;<span class=\"hljs-doctag\">@link</span> ListableBeanFactory&#125; and/or &#123;<span class=\"hljs-doctag\">@link</span> BeanFactoryUtils&#125;.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@param</span> requiredType type the bean must match; can be an interface or superclass</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@return</span> an instance of the single bean matching the required type</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@throws</span> NoSuchBeanDefinitionException if no bean of the given type was found</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@throws</span> NoUniqueBeanDefinitionException if more than one bean of the given type was found</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@throws</span> BeansException if the bean could not be created</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@since</span> 3.0</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> ListableBeanFactory</span><br><span class=\"hljs-comment\">\t */</span><br>\t&lt;T&gt; <span class=\"hljs-function\">T <span class=\"hljs-title\">getBean</span><span class=\"hljs-params\">(Class&lt;T&gt; requiredType)</span> <span class=\"hljs-keyword\">throws</span> BeansException</span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return an instance, which may be shared or independent, of the specified bean.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Allows for specifying explicit constructor arguments / factory method arguments,</span><br><span class=\"hljs-comment\">\t * overriding the specified default arguments (if any) in the bean definition.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;This method goes into &#123;<span class=\"hljs-doctag\">@link</span> ListableBeanFactory&#125; by-type lookup territory</span><br><span class=\"hljs-comment\">\t * but may also be translated into a conventional by-name lookup based on the name</span><br><span class=\"hljs-comment\">\t * of the given type. For more extensive retrieval operations across sets of beans,</span><br><span class=\"hljs-comment\">\t * use &#123;<span class=\"hljs-doctag\">@link</span> ListableBeanFactory&#125; and/or &#123;<span class=\"hljs-doctag\">@link</span> BeanFactoryUtils&#125;.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@param</span> requiredType type the bean must match; can be an interface or superclass</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@param</span> args arguments to use when creating a bean instance using explicit arguments</span><br><span class=\"hljs-comment\">\t * (only applied when creating a new instance as opposed to retrieving an existing one)</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@return</span> an instance of the bean</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@throws</span> NoSuchBeanDefinitionException if there is no such bean definition</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@throws</span> BeanDefinitionStoreException if arguments have been given but</span><br><span class=\"hljs-comment\">\t * the affected bean isn&#x27;t a prototype</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@throws</span> BeansException if the bean could not be created</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@since</span> 4.1</span><br><span class=\"hljs-comment\">\t */</span><br>\t&lt;T&gt; <span class=\"hljs-function\">T <span class=\"hljs-title\">getBean</span><span class=\"hljs-params\">(Class&lt;T&gt; requiredType, Object... args)</span> <span class=\"hljs-keyword\">throws</span> BeansException</span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return a provider for the specified bean, allowing for lazy on-demand retrieval</span><br><span class=\"hljs-comment\">\t * of instances, including availability and uniqueness options.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@param</span> requiredType type the bean must match; can be an interface or superclass</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@return</span> a corresponding provider handle</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@since</span> 5.1</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> #getBeanProvider(ResolvableType)</span><br><span class=\"hljs-comment\">\t */</span><br>\t&lt;T&gt; <span class=\"hljs-function\">ObjectProvider&lt;T&gt; <span class=\"hljs-title\">getBeanProvider</span><span class=\"hljs-params\">(Class&lt;T&gt; requiredType)</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return a provider for the specified bean, allowing for lazy on-demand retrieval</span><br><span class=\"hljs-comment\">\t * of instances, including availability and uniqueness options.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@param</span> requiredType type the bean must match; can be a generic type declaration.</span><br><span class=\"hljs-comment\">\t * Note that collection types are not supported here, in contrast to reflective</span><br><span class=\"hljs-comment\">\t * injection points. For programmatically retrieving a list of beans matching a</span><br><span class=\"hljs-comment\">\t * specific type, specify the actual bean type as an argument here and subsequently</span><br><span class=\"hljs-comment\">\t * use &#123;<span class=\"hljs-doctag\">@link</span> ObjectProvider#orderedStream()&#125; or its lazy streaming/iteration options.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@return</span> a corresponding provider handle</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@since</span> 5.1</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> ObjectProvider#iterator()</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> ObjectProvider#stream()</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> ObjectProvider#orderedStream()</span><br><span class=\"hljs-comment\">\t */</span><br>\t&lt;T&gt; <span class=\"hljs-function\">ObjectProvider&lt;T&gt; <span class=\"hljs-title\">getBeanProvider</span><span class=\"hljs-params\">(ResolvableType requiredType)</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Does this bean factory contain a bean definition or externally registered singleton</span><br><span class=\"hljs-comment\">\t * instance with the given name?</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;If the given name is an alias, it will be translated back to the corresponding</span><br><span class=\"hljs-comment\">\t * canonical bean name.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;If this factory is hierarchical, will ask any parent factory if the bean cannot</span><br><span class=\"hljs-comment\">\t * be found in this factory instance.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;If a bean definition or singleton instance matching the given name is found,</span><br><span class=\"hljs-comment\">\t * this method will return &#123;<span class=\"hljs-doctag\">@code</span> true&#125; whether the named bean definition is concrete</span><br><span class=\"hljs-comment\">\t * or abstract, lazy or eager, in scope or not. Therefore, note that a &#123;<span class=\"hljs-doctag\">@code</span> true&#125;</span><br><span class=\"hljs-comment\">\t * return value from this method does not necessarily indicate that &#123;<span class=\"hljs-doctag\">@link</span> #getBean&#125;</span><br><span class=\"hljs-comment\">\t * will be able to obtain an instance for the same name.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@param</span> name the name of the bean to query</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@return</span> whether a bean with the given name is present</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">boolean</span> <span class=\"hljs-title\">containsBean</span><span class=\"hljs-params\">(String name)</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Is this bean a shared singleton? That is, will &#123;<span class=\"hljs-doctag\">@link</span> #getBean&#125; always</span><br><span class=\"hljs-comment\">\t * return the same instance?</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Note: This method returning &#123;<span class=\"hljs-doctag\">@code</span> false&#125; does not clearly indicate</span><br><span class=\"hljs-comment\">\t * independent instances. It indicates non-singleton instances, which may correspond</span><br><span class=\"hljs-comment\">\t * to a scoped bean as well. Use the &#123;<span class=\"hljs-doctag\">@link</span> #isPrototype&#125; operation to explicitly</span><br><span class=\"hljs-comment\">\t * check for independent instances.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Translates aliases back to the corresponding canonical bean name.</span><br><span class=\"hljs-comment\">\t * Will ask the parent factory if the bean cannot be found in this factory instance.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@param</span> name the name of the bean to query</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@return</span> whether this bean corresponds to a singleton instance</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@throws</span> NoSuchBeanDefinitionException if there is no bean with the given name</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> #getBean</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> #isPrototype</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">boolean</span> <span class=\"hljs-title\">isSingleton</span><span class=\"hljs-params\">(String name)</span> <span class=\"hljs-keyword\">throws</span> NoSuchBeanDefinitionException</span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Is this bean a prototype? That is, will &#123;<span class=\"hljs-doctag\">@link</span> #getBean&#125; always return</span><br><span class=\"hljs-comment\">\t * independent instances?</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Note: This method returning &#123;<span class=\"hljs-doctag\">@code</span> false&#125; does not clearly indicate</span><br><span class=\"hljs-comment\">\t * a singleton object. It indicates non-independent instances, which may correspond</span><br><span class=\"hljs-comment\">\t * to a scoped bean as well. Use the &#123;<span class=\"hljs-doctag\">@link</span> #isSingleton&#125; operation to explicitly</span><br><span class=\"hljs-comment\">\t * check for a shared singleton instance.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Translates aliases back to the corresponding canonical bean name.</span><br><span class=\"hljs-comment\">\t * Will ask the parent factory if the bean cannot be found in this factory instance.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@param</span> name the name of the bean to query</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@return</span> whether this bean will always deliver independent instances</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@throws</span> NoSuchBeanDefinitionException if there is no bean with the given name</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@since</span> 2.0.3</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> #getBean</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> #isSingleton</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">boolean</span> <span class=\"hljs-title\">isPrototype</span><span class=\"hljs-params\">(String name)</span> <span class=\"hljs-keyword\">throws</span> NoSuchBeanDefinitionException</span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Check whether the bean with the given name matches the specified type.</span><br><span class=\"hljs-comment\">\t * More specifically, check whether a &#123;<span class=\"hljs-doctag\">@link</span> #getBean&#125; call for the given name</span><br><span class=\"hljs-comment\">\t * would return an object that is assignable to the specified target type.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Translates aliases back to the corresponding canonical bean name.</span><br><span class=\"hljs-comment\">\t * Will ask the parent factory if the bean cannot be found in this factory instance.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@param</span> name the name of the bean to query</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@param</span> typeToMatch the type to match against (as a &#123;<span class=\"hljs-doctag\">@code</span> ResolvableType&#125;)</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@return</span> &#123;<span class=\"hljs-doctag\">@code</span> true&#125; if the bean type matches,</span><br><span class=\"hljs-comment\">\t * &#123;<span class=\"hljs-doctag\">@code</span> false&#125; if it doesn&#x27;t match or cannot be determined yet</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@throws</span> NoSuchBeanDefinitionException if there is no bean with the given name</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@since</span> 4.2</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> #getBean</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> #getType</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">boolean</span> <span class=\"hljs-title\">isTypeMatch</span><span class=\"hljs-params\">(String name, ResolvableType typeToMatch)</span> <span class=\"hljs-keyword\">throws</span> NoSuchBeanDefinitionException</span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Check whether the bean with the given name matches the specified type.</span><br><span class=\"hljs-comment\">\t * More specifically, check whether a &#123;<span class=\"hljs-doctag\">@link</span> #getBean&#125; call for the given name</span><br><span class=\"hljs-comment\">\t * would return an object that is assignable to the specified target type.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Translates aliases back to the corresponding canonical bean name.</span><br><span class=\"hljs-comment\">\t * Will ask the parent factory if the bean cannot be found in this factory instance.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@param</span> name the name of the bean to query</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@param</span> typeToMatch the type to match against (as a &#123;<span class=\"hljs-doctag\">@code</span> Class&#125;)</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@return</span> &#123;<span class=\"hljs-doctag\">@code</span> true&#125; if the bean type matches,</span><br><span class=\"hljs-comment\">\t * &#123;<span class=\"hljs-doctag\">@code</span> false&#125; if it doesn&#x27;t match or cannot be determined yet</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@throws</span> NoSuchBeanDefinitionException if there is no bean with the given name</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@since</span> 2.0.1</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> #getBean</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> #getType</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">boolean</span> <span class=\"hljs-title\">isTypeMatch</span><span class=\"hljs-params\">(String name, Class&lt;?&gt; typeToMatch)</span> <span class=\"hljs-keyword\">throws</span> NoSuchBeanDefinitionException</span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Determine the type of the bean with the given name. More specifically,</span><br><span class=\"hljs-comment\">\t * determine the type of object that &#123;<span class=\"hljs-doctag\">@link</span> #getBean&#125; would return for the given name.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;For a &#123;<span class=\"hljs-doctag\">@link</span> FactoryBean&#125;, return the type of object that the FactoryBean creates,</span><br><span class=\"hljs-comment\">\t * as exposed by &#123;<span class=\"hljs-doctag\">@link</span> FactoryBean#getObjectType()&#125;. This may lead to the initialization</span><br><span class=\"hljs-comment\">\t * of a previously uninitialized &#123;<span class=\"hljs-doctag\">@code</span> FactoryBean&#125; (see &#123;<span class=\"hljs-doctag\">@link</span> #getType(String, boolean)&#125;).</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Translates aliases back to the corresponding canonical bean name.</span><br><span class=\"hljs-comment\">\t * Will ask the parent factory if the bean cannot be found in this factory instance.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@param</span> name the name of the bean to query</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@return</span> the type of the bean, or &#123;<span class=\"hljs-doctag\">@code</span> null&#125; if not determinable</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@throws</span> NoSuchBeanDefinitionException if there is no bean with the given name</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@since</span> 1.1.2</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> #getBean</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> #isTypeMatch</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-meta\">@Nullable</span><br>\tClass&lt;?&gt; getType(String name) <span class=\"hljs-keyword\">throws</span> NoSuchBeanDefinitionException;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Determine the type of the bean with the given name. More specifically,</span><br><span class=\"hljs-comment\">\t * determine the type of object that &#123;<span class=\"hljs-doctag\">@link</span> #getBean&#125; would return for the given name.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;For a &#123;<span class=\"hljs-doctag\">@link</span> FactoryBean&#125;, return the type of object that the FactoryBean creates,</span><br><span class=\"hljs-comment\">\t * as exposed by &#123;<span class=\"hljs-doctag\">@link</span> FactoryBean#getObjectType()&#125;. Depending on the</span><br><span class=\"hljs-comment\">\t * &#123;<span class=\"hljs-doctag\">@code</span> allowFactoryBeanInit&#125; flag, this may lead to the initialization of a previously</span><br><span class=\"hljs-comment\">\t * uninitialized &#123;<span class=\"hljs-doctag\">@code</span> FactoryBean&#125; if no early type information is available.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Translates aliases back to the corresponding canonical bean name.</span><br><span class=\"hljs-comment\">\t * Will ask the parent factory if the bean cannot be found in this factory instance.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@param</span> name the name of the bean to query</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@param</span> allowFactoryBeanInit whether a &#123;<span class=\"hljs-doctag\">@code</span> FactoryBean&#125; may get initialized</span><br><span class=\"hljs-comment\">\t * just for the purpose of determining its object type</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@return</span> the type of the bean, or &#123;<span class=\"hljs-doctag\">@code</span> null&#125; if not determinable</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@throws</span> NoSuchBeanDefinitionException if there is no bean with the given name</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@since</span> 5.2</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> #getBean</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> #isTypeMatch</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-meta\">@Nullable</span><br>\tClass&lt;?&gt; getType(String name, <span class=\"hljs-keyword\">boolean</span> allowFactoryBeanInit) <span class=\"hljs-keyword\">throws</span> NoSuchBeanDefinitionException;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return the aliases for the given bean name, if any.</span><br><span class=\"hljs-comment\">\t * All of those aliases point to the same bean when used in a &#123;<span class=\"hljs-doctag\">@link</span> #getBean&#125; call.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;If the given name is an alias, the corresponding original bean name</span><br><span class=\"hljs-comment\">\t * and other aliases (if any) will be returned, with the original bean name</span><br><span class=\"hljs-comment\">\t * being the first element in the array.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Will ask the parent factory if the bean cannot be found in this factory instance.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@param</span> name the bean name to check for aliases</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@return</span> the aliases, or an empty array if none</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> #getBean</span><br><span class=\"hljs-comment\">\t */</span><br>\tString[] getAliases(String name);<br><br>&#125;<br></code></pre></td></tr></table></figure>\n\n<h3 id=\"BeanFactory方法属性摘要\"><a href=\"#BeanFactory方法属性摘要\" class=\"headerlink\" title=\"BeanFactory方法属性摘要\"></a>BeanFactory方法属性摘要</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">interface</span> <span class=\"hljs-title\">BeanFactory</span> </span>&#123;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t */</span><br>\tString FACTORY_BEAN_PREFIX = <span class=\"hljs-string\">&quot;&amp;&quot;</span>;<br><br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\">Object <span class=\"hljs-title\">getBean</span><span class=\"hljs-params\">(String name)</span> <span class=\"hljs-keyword\">throws</span> BeansException</span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t */</span><br>\t&lt;T&gt; <span class=\"hljs-function\">T <span class=\"hljs-title\">getBean</span><span class=\"hljs-params\">(String name, Class&lt;T&gt; requiredType)</span> <span class=\"hljs-keyword\">throws</span> BeansException</span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\">Object <span class=\"hljs-title\">getBean</span><span class=\"hljs-params\">(String name, Object... args)</span> <span class=\"hljs-keyword\">throws</span> BeansException</span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t */</span><br>\t&lt;T&gt; <span class=\"hljs-function\">T <span class=\"hljs-title\">getBean</span><span class=\"hljs-params\">(Class&lt;T&gt; requiredType)</span> <span class=\"hljs-keyword\">throws</span> BeansException</span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t */</span><br>\t&lt;T&gt; <span class=\"hljs-function\">T <span class=\"hljs-title\">getBean</span><span class=\"hljs-params\">(Class&lt;T&gt; requiredType, Object... args)</span> <span class=\"hljs-keyword\">throws</span> BeansException</span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t */</span><br>\t&lt;T&gt; <span class=\"hljs-function\">ObjectProvider&lt;T&gt; <span class=\"hljs-title\">getBeanProvider</span><span class=\"hljs-params\">(Class&lt;T&gt; requiredType)</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t */</span><br>\t&lt;T&gt; <span class=\"hljs-function\">ObjectProvider&lt;T&gt; <span class=\"hljs-title\">getBeanProvider</span><span class=\"hljs-params\">(ResolvableType requiredType)</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">boolean</span> <span class=\"hljs-title\">containsBean</span><span class=\"hljs-params\">(String name)</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">boolean</span> <span class=\"hljs-title\">isSingleton</span><span class=\"hljs-params\">(String name)</span> <span class=\"hljs-keyword\">throws</span> NoSuchBeanDefinitionException</span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">boolean</span> <span class=\"hljs-title\">isPrototype</span><span class=\"hljs-params\">(String name)</span> <span class=\"hljs-keyword\">throws</span> NoSuchBeanDefinitionException</span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">boolean</span> <span class=\"hljs-title\">isTypeMatch</span><span class=\"hljs-params\">(String name, ResolvableType typeToMatch)</span> <span class=\"hljs-keyword\">throws</span> NoSuchBeanDefinitionException</span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">boolean</span> <span class=\"hljs-title\">isTypeMatch</span><span class=\"hljs-params\">(String name, Class&lt;?&gt; typeToMatch)</span> <span class=\"hljs-keyword\">throws</span> NoSuchBeanDefinitionException</span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-meta\">@Nullable</span><br>\tClass&lt;?&gt; getType(String name) <span class=\"hljs-keyword\">throws</span> NoSuchBeanDefinitionException;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-meta\">@Nullable</span><br>\tClass&lt;?&gt; getType(String name, <span class=\"hljs-keyword\">boolean</span> allowFactoryBeanInit) <span class=\"hljs-keyword\">throws</span> NoSuchBeanDefinitionException;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t */</span><br>\tString[] getAliases(String name);<br><br>&#125;<br></code></pre></td></tr></table></figure>\n\n\n<h3 id=\"1-2-HierarchicalBeanFactory接口\"><a href=\"#1-2-HierarchicalBeanFactory接口\" class=\"headerlink\" title=\"1.2 HierarchicalBeanFactory接口\"></a>1.2 HierarchicalBeanFactory接口</h3><h3 id=\"完整版源码：-1\"><a href=\"#完整版源码：-1\" class=\"headerlink\" title=\"完整版源码：\"></a>完整版源码：</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\"> * Copyright 2002-2012 the original author or authors.</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span><br><span class=\"hljs-comment\"> * you may not use this file except in compliance with the License.</span><br><span class=\"hljs-comment\"> * You may obtain a copy of the License at</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> *      https://www.apache.org/licenses/LICENSE-2.0</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> * Unless required by applicable law or agreed to in writing, software</span><br><span class=\"hljs-comment\"> * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span><br><span class=\"hljs-comment\"> * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span><br><span class=\"hljs-comment\"> * See the License for the specific language governing permissions and</span><br><span class=\"hljs-comment\"> * limitations under the License.</span><br><span class=\"hljs-comment\"> */</span><br><br><span class=\"hljs-keyword\">package</span> org.springframework.beans.factory;<br><br><span class=\"hljs-keyword\">import</span> org.springframework.lang.Nullable;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * Sub-interface implemented by bean factories that can be part</span><br><span class=\"hljs-comment\"> * of a hierarchy.</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> * &lt;p&gt;The corresponding &#123;<span class=\"hljs-doctag\">@code</span> setParentBeanFactory&#125; method for bean</span><br><span class=\"hljs-comment\"> * factories that allow setting the parent in a configurable</span><br><span class=\"hljs-comment\"> * fashion can be found in the ConfigurableBeanFactory interface.</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> Rod Johnson</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> Juergen Hoeller</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@since</span> 07.07.2003</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@see</span> org.springframework.beans.factory.config.ConfigurableBeanFactory#setParentBeanFactory</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">interface</span> <span class=\"hljs-title\">HierarchicalBeanFactory</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">BeanFactory</span> </span>&#123;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return the parent bean factory, or &#123;<span class=\"hljs-doctag\">@code</span> null&#125; if there is none.</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-meta\">@Nullable</span><br>\t<span class=\"hljs-function\">BeanFactory <span class=\"hljs-title\">getParentBeanFactory</span><span class=\"hljs-params\">()</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return whether the local bean factory contains a bean of the given name,</span><br><span class=\"hljs-comment\">\t * ignoring beans defined in ancestor contexts.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;This is an alternative to &#123;<span class=\"hljs-doctag\">@code</span> containsBean&#125;, ignoring a bean</span><br><span class=\"hljs-comment\">\t * of the given name from an ancestor bean factory.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@param</span> name the name of the bean to query</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@return</span> whether a bean with the given name is defined in the local factory</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> BeanFactory#containsBean</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">boolean</span> <span class=\"hljs-title\">containsLocalBean</span><span class=\"hljs-params\">(String name)</span></span>;<br><br>&#125;<br><br></code></pre></td></tr></table></figure>\n\n<h3 id=\"HierarchicalBeanFactory方法属性摘要\"><a href=\"#HierarchicalBeanFactory方法属性摘要\" class=\"headerlink\" title=\"HierarchicalBeanFactory方法属性摘要\"></a>HierarchicalBeanFactory方法属性摘要</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">interface</span> <span class=\"hljs-title\">HierarchicalBeanFactory</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">BeanFactory</span> </span>&#123;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-meta\">@Nullable</span><br>\t<span class=\"hljs-function\">BeanFactory <span class=\"hljs-title\">getParentBeanFactory</span><span class=\"hljs-params\">()</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">boolean</span> <span class=\"hljs-title\">containsLocalBean</span><span class=\"hljs-params\">(String name)</span></span>;<br><br>&#125;<br></code></pre></td></tr></table></figure>\n\n<h3 id=\"1-3-ListableBeanFactory接口\"><a href=\"#1-3-ListableBeanFactory接口\" class=\"headerlink\" title=\"1.3 ListableBeanFactory接口\"></a>1.3 ListableBeanFactory接口</h3><h3 id=\"完整版源码：-2\"><a href=\"#完整版源码：-2\" class=\"headerlink\" title=\"完整版源码：\"></a>完整版源码：</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br><span class=\"line\">252</span><br><span class=\"line\">253</span><br><span class=\"line\">254</span><br><span class=\"line\">255</span><br><span class=\"line\">256</span><br><span class=\"line\">257</span><br><span class=\"line\">258</span><br><span class=\"line\">259</span><br><span class=\"line\">260</span><br><span class=\"line\">261</span><br><span class=\"line\">262</span><br><span class=\"line\">263</span><br><span class=\"line\">264</span><br><span class=\"line\">265</span><br><span class=\"line\">266</span><br><span class=\"line\">267</span><br><span class=\"line\">268</span><br><span class=\"line\">269</span><br><span class=\"line\">270</span><br><span class=\"line\">271</span><br><span class=\"line\">272</span><br><span class=\"line\">273</span><br><span class=\"line\">274</span><br><span class=\"line\">275</span><br><span class=\"line\">276</span><br><span class=\"line\">277</span><br><span class=\"line\">278</span><br><span class=\"line\">279</span><br><span class=\"line\">280</span><br><span class=\"line\">281</span><br><span class=\"line\">282</span><br><span class=\"line\">283</span><br><span class=\"line\">284</span><br><span class=\"line\">285</span><br><span class=\"line\">286</span><br><span class=\"line\">287</span><br><span class=\"line\">288</span><br><span class=\"line\">289</span><br><span class=\"line\">290</span><br><span class=\"line\">291</span><br><span class=\"line\">292</span><br><span class=\"line\">293</span><br><span class=\"line\">294</span><br><span class=\"line\">295</span><br><span class=\"line\">296</span><br><span class=\"line\">297</span><br><span class=\"line\">298</span><br><span class=\"line\">299</span><br><span class=\"line\">300</span><br><span class=\"line\">301</span><br><span class=\"line\">302</span><br><span class=\"line\">303</span><br><span class=\"line\">304</span><br><span class=\"line\">305</span><br><span class=\"line\">306</span><br><span class=\"line\">307</span><br><span class=\"line\">308</span><br><span class=\"line\">309</span><br><span class=\"line\">310</span><br><span class=\"line\">311</span><br><span class=\"line\">312</span><br><span class=\"line\">313</span><br><span class=\"line\">314</span><br><span class=\"line\">315</span><br><span class=\"line\">316</span><br><span class=\"line\">317</span><br><span class=\"line\">318</span><br><span class=\"line\">319</span><br><span class=\"line\">320</span><br><span class=\"line\">321</span><br><span class=\"line\">322</span><br><span class=\"line\">323</span><br><span class=\"line\">324</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\"> * Copyright 2002-2019 the original author or authors.</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span><br><span class=\"hljs-comment\"> * you may not use this file except in compliance with the License.</span><br><span class=\"hljs-comment\"> * You may obtain a copy of the License at</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> *      https://www.apache.org/licenses/LICENSE-2.0</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> * Unless required by applicable law or agreed to in writing, software</span><br><span class=\"hljs-comment\"> * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span><br><span class=\"hljs-comment\"> * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span><br><span class=\"hljs-comment\"> * See the License for the specific language governing permissions and</span><br><span class=\"hljs-comment\"> * limitations under the License.</span><br><span class=\"hljs-comment\"> */</span><br><br><span class=\"hljs-keyword\">package</span> org.springframework.beans.factory;<br><br><span class=\"hljs-keyword\">import</span> java.lang.annotation.Annotation;<br><span class=\"hljs-keyword\">import</span> java.util.Map;<br><br><span class=\"hljs-keyword\">import</span> org.springframework.beans.BeansException;<br><span class=\"hljs-keyword\">import</span> org.springframework.core.ResolvableType;<br><span class=\"hljs-keyword\">import</span> org.springframework.lang.Nullable;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * Extension of the &#123;<span class=\"hljs-doctag\">@link</span> BeanFactory&#125; interface to be implemented by bean factories</span><br><span class=\"hljs-comment\"> * that can enumerate all their bean instances, rather than attempting bean lookup</span><br><span class=\"hljs-comment\"> * by name one by one as requested by clients. BeanFactory implementations that</span><br><span class=\"hljs-comment\"> * preload all their bean definitions (such as XML-based factories) may implement</span><br><span class=\"hljs-comment\"> * this interface.</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> * &lt;p&gt;If this is a &#123;<span class=\"hljs-doctag\">@link</span> HierarchicalBeanFactory&#125;, the return values will &lt;i&gt;not&lt;/i&gt;</span><br><span class=\"hljs-comment\"> * take any BeanFactory hierarchy into account, but will relate only to the beans</span><br><span class=\"hljs-comment\"> * defined in the current factory. Use the &#123;<span class=\"hljs-doctag\">@link</span> BeanFactoryUtils&#125; helper class</span><br><span class=\"hljs-comment\"> * to consider beans in ancestor factories too.</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> * &lt;p&gt;The methods in this interface will just respect bean definitions of this factory.</span><br><span class=\"hljs-comment\"> * They will ignore any singleton beans that have been registered by other means like</span><br><span class=\"hljs-comment\"> * &#123;<span class=\"hljs-doctag\">@link</span> org.springframework.beans.factory.config.ConfigurableBeanFactory&#125;&#x27;s</span><br><span class=\"hljs-comment\"> * &#123;<span class=\"hljs-doctag\">@code</span> registerSingleton&#125; method, with the exception of</span><br><span class=\"hljs-comment\"> * &#123;<span class=\"hljs-doctag\">@code</span> getBeanNamesOfType&#125; and &#123;<span class=\"hljs-doctag\">@code</span> getBeansOfType&#125; which will check</span><br><span class=\"hljs-comment\"> * such manually registered singletons too. Of course, BeanFactory&#x27;s &#123;<span class=\"hljs-doctag\">@code</span> getBean&#125;</span><br><span class=\"hljs-comment\"> * does allow transparent access to such special beans as well. However, in typical</span><br><span class=\"hljs-comment\"> * scenarios, all beans will be defined by external bean definitions anyway, so most</span><br><span class=\"hljs-comment\"> * applications don&#x27;t need to worry about this differentiation.</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> * &lt;p&gt;&lt;b&gt;<span class=\"hljs-doctag\">NOTE:</span>&lt;/b&gt; With the exception of &#123;<span class=\"hljs-doctag\">@code</span> getBeanDefinitionCount&#125;</span><br><span class=\"hljs-comment\"> * and &#123;<span class=\"hljs-doctag\">@code</span> containsBeanDefinition&#125;, the methods in this interface</span><br><span class=\"hljs-comment\"> * are not designed for frequent invocation. Implementations may be slow.</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> Rod Johnson</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> Juergen Hoeller</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@since</span> 16 April 2001</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@see</span> HierarchicalBeanFactory</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@see</span> BeanFactoryUtils</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">interface</span> <span class=\"hljs-title\">ListableBeanFactory</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">BeanFactory</span> </span>&#123;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Check if this bean factory contains a bean definition with the given name.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Does not consider any hierarchy this factory may participate in,</span><br><span class=\"hljs-comment\">\t * and ignores any singleton beans that have been registered by</span><br><span class=\"hljs-comment\">\t * other means than bean definitions.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@param</span> beanName the name of the bean to look for</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@return</span> if this bean factory contains a bean definition with the given name</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> #containsBean</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">boolean</span> <span class=\"hljs-title\">containsBeanDefinition</span><span class=\"hljs-params\">(String beanName)</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return the number of beans defined in the factory.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Does not consider any hierarchy this factory may participate in,</span><br><span class=\"hljs-comment\">\t * and ignores any singleton beans that have been registered by</span><br><span class=\"hljs-comment\">\t * other means than bean definitions.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@return</span> the number of beans defined in the factory</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">getBeanDefinitionCount</span><span class=\"hljs-params\">()</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return the names of all beans defined in this factory.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Does not consider any hierarchy this factory may participate in,</span><br><span class=\"hljs-comment\">\t * and ignores any singleton beans that have been registered by</span><br><span class=\"hljs-comment\">\t * other means than bean definitions.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@return</span> the names of all beans defined in this factory,</span><br><span class=\"hljs-comment\">\t * or an empty array if none defined</span><br><span class=\"hljs-comment\">\t */</span><br>\tString[] getBeanDefinitionNames();<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return the names of beans matching the given type (including subclasses),</span><br><span class=\"hljs-comment\">\t * judging from either bean definitions or the value of &#123;<span class=\"hljs-doctag\">@code</span> getObjectType&#125;</span><br><span class=\"hljs-comment\">\t * in the case of FactoryBeans.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;&lt;b&gt;<span class=\"hljs-doctag\">NOTE:</span> This method introspects top-level beans only.&lt;/b&gt; It does &lt;i&gt;not&lt;/i&gt;</span><br><span class=\"hljs-comment\">\t * check nested beans which might match the specified type as well.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Does consider objects created by FactoryBeans, which means that FactoryBeans</span><br><span class=\"hljs-comment\">\t * will get initialized. If the object created by the FactoryBean doesn&#x27;t match,</span><br><span class=\"hljs-comment\">\t * the raw FactoryBean itself will be matched against the type.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Does not consider any hierarchy this factory may participate in.</span><br><span class=\"hljs-comment\">\t * Use BeanFactoryUtils&#x27; &#123;<span class=\"hljs-doctag\">@code</span> beanNamesForTypeIncludingAncestors&#125;</span><br><span class=\"hljs-comment\">\t * to include beans in ancestor factories too.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Note: Does &lt;i&gt;not&lt;/i&gt; ignore singleton beans that have been registered</span><br><span class=\"hljs-comment\">\t * by other means than bean definitions.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;This version of &#123;<span class=\"hljs-doctag\">@code</span> getBeanNamesForType&#125; matches all kinds of beans,</span><br><span class=\"hljs-comment\">\t * be it singletons, prototypes, or FactoryBeans. In most implementations, the</span><br><span class=\"hljs-comment\">\t * result will be the same as for &#123;<span class=\"hljs-doctag\">@code</span> getBeanNamesForType(type, true, true)&#125;.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Bean names returned by this method should always return bean names &lt;i&gt;in the</span><br><span class=\"hljs-comment\">\t * order of definition&lt;/i&gt; in the backend configuration, as far as possible.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@param</span> type the generically typed class or interface to match</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@return</span> the names of beans (or objects created by FactoryBeans) matching</span><br><span class=\"hljs-comment\">\t * the given object type (including subclasses), or an empty array if none</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@since</span> 4.2</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> #isTypeMatch(String, ResolvableType)</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> FactoryBean#getObjectType</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> BeanFactoryUtils#beanNamesForTypeIncludingAncestors(ListableBeanFactory, ResolvableType)</span><br><span class=\"hljs-comment\">\t */</span><br>\tString[] getBeanNamesForType(ResolvableType type);<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return the names of beans matching the given type (including subclasses),</span><br><span class=\"hljs-comment\">\t * judging from either bean definitions or the value of &#123;<span class=\"hljs-doctag\">@code</span> getObjectType&#125;</span><br><span class=\"hljs-comment\">\t * in the case of FactoryBeans.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;&lt;b&gt;<span class=\"hljs-doctag\">NOTE:</span> This method introspects top-level beans only.&lt;/b&gt; It does &lt;i&gt;not&lt;/i&gt;</span><br><span class=\"hljs-comment\">\t * check nested beans which might match the specified type as well.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Does consider objects created by FactoryBeans if the &quot;allowEagerInit&quot; flag is set,</span><br><span class=\"hljs-comment\">\t * which means that FactoryBeans will get initialized. If the object created by the</span><br><span class=\"hljs-comment\">\t * FactoryBean doesn&#x27;t match, the raw FactoryBean itself will be matched against the</span><br><span class=\"hljs-comment\">\t * type. If &quot;allowEagerInit&quot; is not set, only raw FactoryBeans will be checked</span><br><span class=\"hljs-comment\">\t * (which doesn&#x27;t require initialization of each FactoryBean).</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Does not consider any hierarchy this factory may participate in.</span><br><span class=\"hljs-comment\">\t * Use BeanFactoryUtils&#x27; &#123;<span class=\"hljs-doctag\">@code</span> beanNamesForTypeIncludingAncestors&#125;</span><br><span class=\"hljs-comment\">\t * to include beans in ancestor factories too.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Note: Does &lt;i&gt;not&lt;/i&gt; ignore singleton beans that have been registered</span><br><span class=\"hljs-comment\">\t * by other means than bean definitions.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Bean names returned by this method should always return bean names &lt;i&gt;in the</span><br><span class=\"hljs-comment\">\t * order of definition&lt;/i&gt; in the backend configuration, as far as possible.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@param</span> type the generically typed class or interface to match</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@param</span> includeNonSingletons whether to include prototype or scoped beans too</span><br><span class=\"hljs-comment\">\t * or just singletons (also applies to FactoryBeans)</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@param</span> allowEagerInit whether to initialize &lt;i&gt;lazy-init singletons&lt;/i&gt; and</span><br><span class=\"hljs-comment\">\t * &lt;i&gt;objects created by FactoryBeans&lt;/i&gt; (or by factory methods with a</span><br><span class=\"hljs-comment\">\t * &quot;factory-bean&quot; reference) for the type check. Note that FactoryBeans need to be</span><br><span class=\"hljs-comment\">\t * eagerly initialized to determine their type: So be aware that passing in &quot;true&quot;</span><br><span class=\"hljs-comment\">\t * for this flag will initialize FactoryBeans and &quot;factory-bean&quot; references.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@return</span> the names of beans (or objects created by FactoryBeans) matching</span><br><span class=\"hljs-comment\">\t * the given object type (including subclasses), or an empty array if none</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@since</span> 5.2</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> FactoryBean#getObjectType</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> BeanFactoryUtils#beanNamesForTypeIncludingAncestors(ListableBeanFactory, ResolvableType, boolean, boolean)</span><br><span class=\"hljs-comment\">\t */</span><br>\tString[] getBeanNamesForType(ResolvableType type, <span class=\"hljs-keyword\">boolean</span> includeNonSingletons, <span class=\"hljs-keyword\">boolean</span> allowEagerInit);<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return the names of beans matching the given type (including subclasses),</span><br><span class=\"hljs-comment\">\t * judging from either bean definitions or the value of &#123;<span class=\"hljs-doctag\">@code</span> getObjectType&#125;</span><br><span class=\"hljs-comment\">\t * in the case of FactoryBeans.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;&lt;b&gt;<span class=\"hljs-doctag\">NOTE:</span> This method introspects top-level beans only.&lt;/b&gt; It does &lt;i&gt;not&lt;/i&gt;</span><br><span class=\"hljs-comment\">\t * check nested beans which might match the specified type as well.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Does consider objects created by FactoryBeans, which means that FactoryBeans</span><br><span class=\"hljs-comment\">\t * will get initialized. If the object created by the FactoryBean doesn&#x27;t match,</span><br><span class=\"hljs-comment\">\t * the raw FactoryBean itself will be matched against the type.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Does not consider any hierarchy this factory may participate in.</span><br><span class=\"hljs-comment\">\t * Use BeanFactoryUtils&#x27; &#123;<span class=\"hljs-doctag\">@code</span> beanNamesForTypeIncludingAncestors&#125;</span><br><span class=\"hljs-comment\">\t * to include beans in ancestor factories too.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Note: Does &lt;i&gt;not&lt;/i&gt; ignore singleton beans that have been registered</span><br><span class=\"hljs-comment\">\t * by other means than bean definitions.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;This version of &#123;<span class=\"hljs-doctag\">@code</span> getBeanNamesForType&#125; matches all kinds of beans,</span><br><span class=\"hljs-comment\">\t * be it singletons, prototypes, or FactoryBeans. In most implementations, the</span><br><span class=\"hljs-comment\">\t * result will be the same as for &#123;<span class=\"hljs-doctag\">@code</span> getBeanNamesForType(type, true, true)&#125;.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Bean names returned by this method should always return bean names &lt;i&gt;in the</span><br><span class=\"hljs-comment\">\t * order of definition&lt;/i&gt; in the backend configuration, as far as possible.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@param</span> type the class or interface to match, or &#123;<span class=\"hljs-doctag\">@code</span> null&#125; for all bean names</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@return</span> the names of beans (or objects created by FactoryBeans) matching</span><br><span class=\"hljs-comment\">\t * the given object type (including subclasses), or an empty array if none</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> FactoryBean#getObjectType</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> BeanFactoryUtils#beanNamesForTypeIncludingAncestors(ListableBeanFactory, Class)</span><br><span class=\"hljs-comment\">\t */</span><br>\tString[] getBeanNamesForType(<span class=\"hljs-meta\">@Nullable</span> Class&lt;?&gt; type);<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return the names of beans matching the given type (including subclasses),</span><br><span class=\"hljs-comment\">\t * judging from either bean definitions or the value of &#123;<span class=\"hljs-doctag\">@code</span> getObjectType&#125;</span><br><span class=\"hljs-comment\">\t * in the case of FactoryBeans.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;&lt;b&gt;<span class=\"hljs-doctag\">NOTE:</span> This method introspects top-level beans only.&lt;/b&gt; It does &lt;i&gt;not&lt;/i&gt;</span><br><span class=\"hljs-comment\">\t * check nested beans which might match the specified type as well.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Does consider objects created by FactoryBeans if the &quot;allowEagerInit&quot; flag is set,</span><br><span class=\"hljs-comment\">\t * which means that FactoryBeans will get initialized. If the object created by the</span><br><span class=\"hljs-comment\">\t * FactoryBean doesn&#x27;t match, the raw FactoryBean itself will be matched against the</span><br><span class=\"hljs-comment\">\t * type. If &quot;allowEagerInit&quot; is not set, only raw FactoryBeans will be checked</span><br><span class=\"hljs-comment\">\t * (which doesn&#x27;t require initialization of each FactoryBean).</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Does not consider any hierarchy this factory may participate in.</span><br><span class=\"hljs-comment\">\t * Use BeanFactoryUtils&#x27; &#123;<span class=\"hljs-doctag\">@code</span> beanNamesForTypeIncludingAncestors&#125;</span><br><span class=\"hljs-comment\">\t * to include beans in ancestor factories too.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Note: Does &lt;i&gt;not&lt;/i&gt; ignore singleton beans that have been registered</span><br><span class=\"hljs-comment\">\t * by other means than bean definitions.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Bean names returned by this method should always return bean names &lt;i&gt;in the</span><br><span class=\"hljs-comment\">\t * order of definition&lt;/i&gt; in the backend configuration, as far as possible.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@param</span> type the class or interface to match, or &#123;<span class=\"hljs-doctag\">@code</span> null&#125; for all bean names</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@param</span> includeNonSingletons whether to include prototype or scoped beans too</span><br><span class=\"hljs-comment\">\t * or just singletons (also applies to FactoryBeans)</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@param</span> allowEagerInit whether to initialize &lt;i&gt;lazy-init singletons&lt;/i&gt; and</span><br><span class=\"hljs-comment\">\t * &lt;i&gt;objects created by FactoryBeans&lt;/i&gt; (or by factory methods with a</span><br><span class=\"hljs-comment\">\t * &quot;factory-bean&quot; reference) for the type check. Note that FactoryBeans need to be</span><br><span class=\"hljs-comment\">\t * eagerly initialized to determine their type: So be aware that passing in &quot;true&quot;</span><br><span class=\"hljs-comment\">\t * for this flag will initialize FactoryBeans and &quot;factory-bean&quot; references.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@return</span> the names of beans (or objects created by FactoryBeans) matching</span><br><span class=\"hljs-comment\">\t * the given object type (including subclasses), or an empty array if none</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> FactoryBean#getObjectType</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> BeanFactoryUtils#beanNamesForTypeIncludingAncestors(ListableBeanFactory, Class, boolean, boolean)</span><br><span class=\"hljs-comment\">\t */</span><br>\tString[] getBeanNamesForType(<span class=\"hljs-meta\">@Nullable</span> Class&lt;?&gt; type, <span class=\"hljs-keyword\">boolean</span> includeNonSingletons, <span class=\"hljs-keyword\">boolean</span> allowEagerInit);<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return the bean instances that match the given object type (including</span><br><span class=\"hljs-comment\">\t * subclasses), judging from either bean definitions or the value of</span><br><span class=\"hljs-comment\">\t * &#123;<span class=\"hljs-doctag\">@code</span> getObjectType&#125; in the case of FactoryBeans.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;&lt;b&gt;<span class=\"hljs-doctag\">NOTE:</span> This method introspects top-level beans only.&lt;/b&gt; It does &lt;i&gt;not&lt;/i&gt;</span><br><span class=\"hljs-comment\">\t * check nested beans which might match the specified type as well.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Does consider objects created by FactoryBeans, which means that FactoryBeans</span><br><span class=\"hljs-comment\">\t * will get initialized. If the object created by the FactoryBean doesn&#x27;t match,</span><br><span class=\"hljs-comment\">\t * the raw FactoryBean itself will be matched against the type.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Does not consider any hierarchy this factory may participate in.</span><br><span class=\"hljs-comment\">\t * Use BeanFactoryUtils&#x27; &#123;<span class=\"hljs-doctag\">@code</span> beansOfTypeIncludingAncestors&#125;</span><br><span class=\"hljs-comment\">\t * to include beans in ancestor factories too.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Note: Does &lt;i&gt;not&lt;/i&gt; ignore singleton beans that have been registered</span><br><span class=\"hljs-comment\">\t * by other means than bean definitions.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;This version of getBeansOfType matches all kinds of beans, be it</span><br><span class=\"hljs-comment\">\t * singletons, prototypes, or FactoryBeans. In most implementations, the</span><br><span class=\"hljs-comment\">\t * result will be the same as for &#123;<span class=\"hljs-doctag\">@code</span> getBeansOfType(type, true, true)&#125;.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;The Map returned by this method should always return bean names and</span><br><span class=\"hljs-comment\">\t * corresponding bean instances &lt;i&gt;in the order of definition&lt;/i&gt; in the</span><br><span class=\"hljs-comment\">\t * backend configuration, as far as possible.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@param</span> type the class or interface to match, or &#123;<span class=\"hljs-doctag\">@code</span> null&#125; for all concrete beans</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@return</span> a Map with the matching beans, containing the bean names as</span><br><span class=\"hljs-comment\">\t * keys and the corresponding bean instances as values</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@throws</span> BeansException if a bean could not be created</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@since</span> 1.1.2</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> FactoryBean#getObjectType</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> BeanFactoryUtils#beansOfTypeIncludingAncestors(ListableBeanFactory, Class)</span><br><span class=\"hljs-comment\">\t */</span><br>\t&lt;T&gt; <span class=\"hljs-function\">Map&lt;String, T&gt; <span class=\"hljs-title\">getBeansOfType</span><span class=\"hljs-params\">(<span class=\"hljs-meta\">@Nullable</span> Class&lt;T&gt; type)</span> <span class=\"hljs-keyword\">throws</span> BeansException</span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return the bean instances that match the given object type (including</span><br><span class=\"hljs-comment\">\t * subclasses), judging from either bean definitions or the value of</span><br><span class=\"hljs-comment\">\t * &#123;<span class=\"hljs-doctag\">@code</span> getObjectType&#125; in the case of FactoryBeans.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;&lt;b&gt;<span class=\"hljs-doctag\">NOTE:</span> This method introspects top-level beans only.&lt;/b&gt; It does &lt;i&gt;not&lt;/i&gt;</span><br><span class=\"hljs-comment\">\t * check nested beans which might match the specified type as well.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Does consider objects created by FactoryBeans if the &quot;allowEagerInit&quot; flag is set,</span><br><span class=\"hljs-comment\">\t * which means that FactoryBeans will get initialized. If the object created by the</span><br><span class=\"hljs-comment\">\t * FactoryBean doesn&#x27;t match, the raw FactoryBean itself will be matched against the</span><br><span class=\"hljs-comment\">\t * type. If &quot;allowEagerInit&quot; is not set, only raw FactoryBeans will be checked</span><br><span class=\"hljs-comment\">\t * (which doesn&#x27;t require initialization of each FactoryBean).</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Does not consider any hierarchy this factory may participate in.</span><br><span class=\"hljs-comment\">\t * Use BeanFactoryUtils&#x27; &#123;<span class=\"hljs-doctag\">@code</span> beansOfTypeIncludingAncestors&#125;</span><br><span class=\"hljs-comment\">\t * to include beans in ancestor factories too.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Note: Does &lt;i&gt;not&lt;/i&gt; ignore singleton beans that have been registered</span><br><span class=\"hljs-comment\">\t * by other means than bean definitions.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;The Map returned by this method should always return bean names and</span><br><span class=\"hljs-comment\">\t * corresponding bean instances &lt;i&gt;in the order of definition&lt;/i&gt; in the</span><br><span class=\"hljs-comment\">\t * backend configuration, as far as possible.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@param</span> type the class or interface to match, or &#123;<span class=\"hljs-doctag\">@code</span> null&#125; for all concrete beans</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@param</span> includeNonSingletons whether to include prototype or scoped beans too</span><br><span class=\"hljs-comment\">\t * or just singletons (also applies to FactoryBeans)</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@param</span> allowEagerInit whether to initialize &lt;i&gt;lazy-init singletons&lt;/i&gt; and</span><br><span class=\"hljs-comment\">\t * &lt;i&gt;objects created by FactoryBeans&lt;/i&gt; (or by factory methods with a</span><br><span class=\"hljs-comment\">\t * &quot;factory-bean&quot; reference) for the type check. Note that FactoryBeans need to be</span><br><span class=\"hljs-comment\">\t * eagerly initialized to determine their type: So be aware that passing in &quot;true&quot;</span><br><span class=\"hljs-comment\">\t * for this flag will initialize FactoryBeans and &quot;factory-bean&quot; references.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@return</span> a Map with the matching beans, containing the bean names as</span><br><span class=\"hljs-comment\">\t * keys and the corresponding bean instances as values</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@throws</span> BeansException if a bean could not be created</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> FactoryBean#getObjectType</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> BeanFactoryUtils#beansOfTypeIncludingAncestors(ListableBeanFactory, Class, boolean, boolean)</span><br><span class=\"hljs-comment\">\t */</span><br>\t&lt;T&gt; <span class=\"hljs-function\">Map&lt;String, T&gt; <span class=\"hljs-title\">getBeansOfType</span><span class=\"hljs-params\">(<span class=\"hljs-meta\">@Nullable</span> Class&lt;T&gt; type, <span class=\"hljs-keyword\">boolean</span> includeNonSingletons, <span class=\"hljs-keyword\">boolean</span> allowEagerInit)</span></span><br><span class=\"hljs-function\">\t\t\t<span class=\"hljs-keyword\">throws</span> BeansException</span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Find all names of beans which are annotated with the supplied &#123;<span class=\"hljs-doctag\">@link</span> Annotation&#125;</span><br><span class=\"hljs-comment\">\t * type, without creating corresponding bean instances yet.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Note that this method considers objects created by FactoryBeans, which means</span><br><span class=\"hljs-comment\">\t * that FactoryBeans will get initialized in order to determine their object type.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@param</span> annotationType the type of annotation to look for</span><br><span class=\"hljs-comment\">\t * (at class, interface or factory method level of the specified bean)</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@return</span> the names of all matching beans</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@since</span> 4.0</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> #findAnnotationOnBean</span><br><span class=\"hljs-comment\">\t */</span><br>\tString[] getBeanNamesForAnnotation(Class&lt;? extends Annotation&gt; annotationType);<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Find all beans which are annotated with the supplied &#123;<span class=\"hljs-doctag\">@link</span> Annotation&#125; type,</span><br><span class=\"hljs-comment\">\t * returning a Map of bean names with corresponding bean instances.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Note that this method considers objects created by FactoryBeans, which means</span><br><span class=\"hljs-comment\">\t * that FactoryBeans will get initialized in order to determine their object type.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@param</span> annotationType the type of annotation to look for</span><br><span class=\"hljs-comment\">\t * (at class, interface or factory method level of the specified bean)</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@return</span> a Map with the matching beans, containing the bean names as</span><br><span class=\"hljs-comment\">\t * keys and the corresponding bean instances as values</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@throws</span> BeansException if a bean could not be created</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@since</span> 3.0</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> #findAnnotationOnBean</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\">Map&lt;String, Object&gt; <span class=\"hljs-title\">getBeansWithAnnotation</span><span class=\"hljs-params\">(Class&lt;? extends Annotation&gt; annotationType)</span> <span class=\"hljs-keyword\">throws</span> BeansException</span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Find an &#123;<span class=\"hljs-doctag\">@link</span> Annotation&#125; of &#123;<span class=\"hljs-doctag\">@code</span> annotationType&#125; on the specified bean,</span><br><span class=\"hljs-comment\">\t * traversing its interfaces and super classes if no annotation can be found on</span><br><span class=\"hljs-comment\">\t * the given class itself, as well as checking the bean&#x27;s factory method (if any).</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@param</span> beanName the name of the bean to look for annotations on</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@param</span> annotationType the type of annotation to look for</span><br><span class=\"hljs-comment\">\t * (at class, interface or factory method level of the specified bean)</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@return</span> the annotation of the given type if found, or &#123;<span class=\"hljs-doctag\">@code</span> null&#125; otherwise</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@throws</span> NoSuchBeanDefinitionException if there is no bean with the given name</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@since</span> 3.0</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> #getBeanNamesForAnnotation</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> #getBeansWithAnnotation</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-meta\">@Nullable</span><br>\t&lt;A extends Annotation&gt; <span class=\"hljs-function\">A <span class=\"hljs-title\">findAnnotationOnBean</span><span class=\"hljs-params\">(String beanName, Class&lt;A&gt; annotationType)</span></span><br><span class=\"hljs-function\">\t\t\t<span class=\"hljs-keyword\">throws</span> NoSuchBeanDefinitionException</span>;<br><br>&#125;<br></code></pre></td></tr></table></figure>\n\n<h3 id=\"ListableBeanFactory方法属性摘要\"><a href=\"#ListableBeanFactory方法属性摘要\" class=\"headerlink\" title=\"ListableBeanFactory方法属性摘要\"></a>ListableBeanFactory方法属性摘要</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">interface</span> <span class=\"hljs-title\">ListableBeanFactory</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">BeanFactory</span> </span>&#123;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">boolean</span> <span class=\"hljs-title\">containsBeanDefinition</span><span class=\"hljs-params\">(String beanName)</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">getBeanDefinitionCount</span><span class=\"hljs-params\">()</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t */</span><br>\tString[] getBeanDefinitionNames();<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t */</span><br>\tString[] getBeanNamesForType(ResolvableType type);<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t */</span><br>\tString[] getBeanNamesForType(ResolvableType type, <span class=\"hljs-keyword\">boolean</span> includeNonSingletons, <span class=\"hljs-keyword\">boolean</span> allowEagerInit);<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t */</span><br>\tString[] getBeanNamesForType(<span class=\"hljs-meta\">@Nullable</span> Class&lt;?&gt; type);<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t */</span><br>\tString[] getBeanNamesForType(<span class=\"hljs-meta\">@Nullable</span> Class&lt;?&gt; type, <span class=\"hljs-keyword\">boolean</span> includeNonSingletons, <span class=\"hljs-keyword\">boolean</span> allowEagerInit);<br><br><br>\t&lt;T&gt; <span class=\"hljs-function\">Map&lt;String, T&gt; <span class=\"hljs-title\">getBeansOfType</span><span class=\"hljs-params\">(<span class=\"hljs-meta\">@Nullable</span> Class&lt;T&gt; type)</span> <span class=\"hljs-keyword\">throws</span> BeansException</span>;<br><br><br>\t&lt;T&gt; <span class=\"hljs-function\">Map&lt;String, T&gt; <span class=\"hljs-title\">getBeansOfType</span><span class=\"hljs-params\">(<span class=\"hljs-meta\">@Nullable</span> Class&lt;T&gt; type, <span class=\"hljs-keyword\">boolean</span> includeNonSingletons, <span class=\"hljs-keyword\">boolean</span> allowEagerInit)</span></span><br><span class=\"hljs-function\">\t\t\t<span class=\"hljs-keyword\">throws</span> BeansException</span>;<br><br><br>\tString[] getBeanNamesForAnnotation(Class&lt;? extends Annotation&gt; annotationType);<br><br><br>\t<span class=\"hljs-function\">Map&lt;String, Object&gt; <span class=\"hljs-title\">getBeansWithAnnotation</span><span class=\"hljs-params\">(Class&lt;? extends Annotation&gt; annotationType)</span> <span class=\"hljs-keyword\">throws</span> BeansException</span>;<br><br><br>\t<span class=\"hljs-meta\">@Nullable</span><br>\t&lt;A extends Annotation&gt; <span class=\"hljs-function\">A <span class=\"hljs-title\">findAnnotationOnBean</span><span class=\"hljs-params\">(String beanName, Class&lt;A&gt; annotationType)</span></span><br><span class=\"hljs-function\">\t\t\t<span class=\"hljs-keyword\">throws</span> NoSuchBeanDefinitionException</span>;<br><br>&#125;<br></code></pre></td></tr></table></figure>\n\n<h2 id=\"1-4-ApplicationContext接口\"><a href=\"#1-4-ApplicationContext接口\" class=\"headerlink\" title=\"1.4 ApplicationContext接口\"></a>1.4 ApplicationContext接口</h2><h3 id=\"ApplicationContext接口解析\"><a href=\"#ApplicationContext接口解析\" class=\"headerlink\" title=\"ApplicationContext接口解析\"></a>ApplicationContext接口解析</h3><ul>\n<li>相比于BeanFactory,ApplicationContext是高配版的Ioc容器，其在BeanFactory的基础上实现了更加复杂的扩展功能</li>\n<li>ListableBeanFactory, HierarchicalBeanFactory都是BeanFactory的子接口，ApplicationContext继承了这两个接口，ApplicationContext进一步扩展了BeanFactory接口的功能</li>\n<li>. . .</li>\n</ul>\n<h3 id=\"完整版源码：-3\"><a href=\"#完整版源码：-3\" class=\"headerlink\" title=\"完整版源码：\"></a>完整版源码：</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\"> * Copyright 2002-2014 the original author or authors.</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span><br><span class=\"hljs-comment\"> * you may not use this file except in compliance with the License.</span><br><span class=\"hljs-comment\"> * You may obtain a copy of the License at</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> *      https://www.apache.org/licenses/LICENSE-2.0</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> * Unless required by applicable law or agreed to in writing, software</span><br><span class=\"hljs-comment\"> * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span><br><span class=\"hljs-comment\"> * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span><br><span class=\"hljs-comment\"> * See the License for the specific language governing permissions and</span><br><span class=\"hljs-comment\"> * limitations under the License.</span><br><span class=\"hljs-comment\"> */</span><br><br><span class=\"hljs-keyword\">package</span> org.springframework.context;<br><br><span class=\"hljs-keyword\">import</span> org.springframework.beans.factory.HierarchicalBeanFactory;<br><span class=\"hljs-keyword\">import</span> org.springframework.beans.factory.ListableBeanFactory;<br><span class=\"hljs-keyword\">import</span> org.springframework.beans.factory.config.AutowireCapableBeanFactory;<br><span class=\"hljs-keyword\">import</span> org.springframework.core.env.EnvironmentCapable;<br><span class=\"hljs-keyword\">import</span> org.springframework.core.io.support.ResourcePatternResolver;<br><span class=\"hljs-keyword\">import</span> org.springframework.lang.Nullable;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * Central interface to provide configuration for an application.</span><br><span class=\"hljs-comment\"> * This is read-only while the application is running, but may be</span><br><span class=\"hljs-comment\"> * reloaded if the implementation supports this.</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> * &lt;p&gt;An ApplicationContext provides:</span><br><span class=\"hljs-comment\"> * &lt;ul&gt;</span><br><span class=\"hljs-comment\"> * &lt;li&gt;Bean factory methods for accessing application components.</span><br><span class=\"hljs-comment\"> * Inherited from &#123;<span class=\"hljs-doctag\">@link</span> org.springframework.beans.factory.ListableBeanFactory&#125;.</span><br><span class=\"hljs-comment\"> * &lt;li&gt;The ability to load file resources in a generic fashion.</span><br><span class=\"hljs-comment\"> * Inherited from the &#123;<span class=\"hljs-doctag\">@link</span> org.springframework.core.io.ResourceLoader&#125; interface.</span><br><span class=\"hljs-comment\"> * &lt;li&gt;The ability to publish events to registered listeners.</span><br><span class=\"hljs-comment\"> * Inherited from the &#123;<span class=\"hljs-doctag\">@link</span> ApplicationEventPublisher&#125; interface.</span><br><span class=\"hljs-comment\"> * &lt;li&gt;The ability to resolve messages, supporting internationalization.</span><br><span class=\"hljs-comment\"> * Inherited from the &#123;<span class=\"hljs-doctag\">@link</span> MessageSource&#125; interface.</span><br><span class=\"hljs-comment\"> * &lt;li&gt;Inheritance from a parent context. Definitions in a descendant context</span><br><span class=\"hljs-comment\"> * will always take priority. This means, for example, that a single parent</span><br><span class=\"hljs-comment\"> * context can be used by an entire web application, while each servlet has</span><br><span class=\"hljs-comment\"> * its own child context that is independent of that of any other servlet.</span><br><span class=\"hljs-comment\"> * &lt;/ul&gt;</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> * &lt;p&gt;In addition to standard &#123;<span class=\"hljs-doctag\">@link</span> org.springframework.beans.factory.BeanFactory&#125;</span><br><span class=\"hljs-comment\"> * lifecycle capabilities, ApplicationContext implementations detect and invoke</span><br><span class=\"hljs-comment\"> * &#123;<span class=\"hljs-doctag\">@link</span> ApplicationContextAware&#125; beans as well as &#123;<span class=\"hljs-doctag\">@link</span> ResourceLoaderAware&#125;,</span><br><span class=\"hljs-comment\"> * &#123;<span class=\"hljs-doctag\">@link</span> ApplicationEventPublisherAware&#125; and &#123;<span class=\"hljs-doctag\">@link</span> MessageSourceAware&#125; beans.</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> Rod Johnson</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> Juergen Hoeller</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@see</span> ConfigurableApplicationContext</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@see</span> org.springframework.beans.factory.BeanFactory</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@see</span> org.springframework.core.io.ResourceLoader</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">interface</span> <span class=\"hljs-title\">ApplicationContext</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">EnvironmentCapable</span>, <span class=\"hljs-title\">ListableBeanFactory</span>, <span class=\"hljs-title\">HierarchicalBeanFactory</span>,</span><br><span class=\"hljs-class\">\t\t<span class=\"hljs-title\">MessageSource</span>, <span class=\"hljs-title\">ApplicationEventPublisher</span>, <span class=\"hljs-title\">ResourcePatternResolver</span> </span>&#123;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return the unique id of this application context.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@return</span> the unique id of the context, or &#123;<span class=\"hljs-doctag\">@code</span> null&#125; if none</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-meta\">@Nullable</span><br>\t<span class=\"hljs-function\">String <span class=\"hljs-title\">getId</span><span class=\"hljs-params\">()</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return a name for the deployed application that this context belongs to.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@return</span> a name for the deployed application, or the empty String by default</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\">String <span class=\"hljs-title\">getApplicationName</span><span class=\"hljs-params\">()</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return a friendly name for this context.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@return</span> a display name for this context (never &#123;<span class=\"hljs-doctag\">@code</span> null&#125;)</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\">String <span class=\"hljs-title\">getDisplayName</span><span class=\"hljs-params\">()</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return the timestamp when this context was first loaded.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@return</span> the timestamp (ms) when this context was first loaded</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">long</span> <span class=\"hljs-title\">getStartupDate</span><span class=\"hljs-params\">()</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return the parent context, or &#123;<span class=\"hljs-doctag\">@code</span> null&#125; if there is no parent</span><br><span class=\"hljs-comment\">\t * and this is the root of the context hierarchy.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@return</span> the parent context, or &#123;<span class=\"hljs-doctag\">@code</span> null&#125; if there is no parent</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-meta\">@Nullable</span><br>\t<span class=\"hljs-function\">ApplicationContext <span class=\"hljs-title\">getParent</span><span class=\"hljs-params\">()</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Expose AutowireCapableBeanFactory functionality for this context.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;This is not typically used by application code, except for the purpose of</span><br><span class=\"hljs-comment\">\t * initializing bean instances that live outside of the application context,</span><br><span class=\"hljs-comment\">\t * applying the Spring bean lifecycle (fully or partly) to them.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Alternatively, the internal BeanFactory exposed by the</span><br><span class=\"hljs-comment\">\t * &#123;<span class=\"hljs-doctag\">@link</span> ConfigurableApplicationContext&#125; interface offers access to the</span><br><span class=\"hljs-comment\">\t * &#123;<span class=\"hljs-doctag\">@link</span> AutowireCapableBeanFactory&#125; interface too. The present method mainly</span><br><span class=\"hljs-comment\">\t * serves as a convenient, specific facility on the ApplicationContext interface.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;&lt;b&gt;<span class=\"hljs-doctag\">NOTE:</span> As of 4.2, this method will consistently throw IllegalStateException</span><br><span class=\"hljs-comment\">\t * after the application context has been closed.&lt;/b&gt; In current Spring Framework</span><br><span class=\"hljs-comment\">\t * versions, only refreshable application contexts behave that way; as of 4.2,</span><br><span class=\"hljs-comment\">\t * all application context implementations will be required to comply.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@return</span> the AutowireCapableBeanFactory for this context</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@throws</span> IllegalStateException if the context does not support the</span><br><span class=\"hljs-comment\">\t * &#123;<span class=\"hljs-doctag\">@link</span> AutowireCapableBeanFactory&#125; interface, or does not hold an</span><br><span class=\"hljs-comment\">\t * autowire-capable bean factory yet (e.g. if &#123;<span class=\"hljs-doctag\">@code</span> refresh()&#125; has</span><br><span class=\"hljs-comment\">\t * never been called), or if the context has been closed already</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> ConfigurableApplicationContext#refresh()</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> ConfigurableApplicationContext#getBeanFactory()</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\">AutowireCapableBeanFactory <span class=\"hljs-title\">getAutowireCapableBeanFactory</span><span class=\"hljs-params\">()</span> <span class=\"hljs-keyword\">throws</span> IllegalStateException</span>;<br><br>&#125;<br></code></pre></td></tr></table></figure>\n<h3 id=\"ApplicationContext方法属性摘要\"><a href=\"#ApplicationContext方法属性摘要\" class=\"headerlink\" title=\"ApplicationContext方法属性摘要\"></a>ApplicationContext方法属性摘要</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">interface</span> <span class=\"hljs-title\">ApplicationContext</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">EnvironmentCapable</span>, <span class=\"hljs-title\">ListableBeanFactory</span>, <span class=\"hljs-title\">HierarchicalBeanFactory</span>,</span><br><span class=\"hljs-class\">\t\t<span class=\"hljs-title\">MessageSource</span>, <span class=\"hljs-title\">ApplicationEventPublisher</span>, <span class=\"hljs-title\">ResourcePatternResolver</span> </span>&#123;<br><br>\t<span class=\"hljs-meta\">@Nullable</span><br>\t<span class=\"hljs-function\">String <span class=\"hljs-title\">getId</span><span class=\"hljs-params\">()</span></span>;<br><br><br>\t<span class=\"hljs-function\">String <span class=\"hljs-title\">getApplicationName</span><span class=\"hljs-params\">()</span></span>;<br><br><br>\t<span class=\"hljs-function\">String <span class=\"hljs-title\">getDisplayName</span><span class=\"hljs-params\">()</span></span>;<br><br><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">long</span> <span class=\"hljs-title\">getStartupDate</span><span class=\"hljs-params\">()</span></span>;<br><br><br>\t<span class=\"hljs-meta\">@Nullable</span><br>\t<span class=\"hljs-function\">ApplicationContext <span class=\"hljs-title\">getParent</span><span class=\"hljs-params\">()</span></span>;<br><br>\t<span class=\"hljs-function\">AutowireCapableBeanFactory <span class=\"hljs-title\">getAutowireCapableBeanFactory</span><span class=\"hljs-params\">()</span> <span class=\"hljs-keyword\">throws</span> IllegalStateException</span>;<br><br>&#125;<br></code></pre></td></tr></table></figure>\n\n<h2 id=\"1-5-BeanDefination接口\"><a href=\"#1-5-BeanDefination接口\" class=\"headerlink\" title=\"1.5 BeanDefination接口\"></a>1.5 BeanDefination接口</h2><h3 id=\"BeanDefination接口定义解析\"><a href=\"#BeanDefination接口定义解析\" class=\"headerlink\" title=\"BeanDefination接口定义解析\"></a>BeanDefination接口定义解析</h3><ul>\n<li>BeanDefination用于管理Ioc容器中JavaBean与JavaBean之间的依赖关系，其抽象了Java开发人员对于JavaBean的定义</li>\n<li>Spring将开发人员定义的JavaBean的数据结构转化为内存中的BeanDefination数据结构进行维护</li>\n</ul>\n<h3 id=\"完整版源码：-4\"><a href=\"#完整版源码：-4\" class=\"headerlink\" title=\"完整版源码：\"></a>完整版源码：</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br><span class=\"line\">252</span><br><span class=\"line\">253</span><br><span class=\"line\">254</span><br><span class=\"line\">255</span><br><span class=\"line\">256</span><br><span class=\"line\">257</span><br><span class=\"line\">258</span><br><span class=\"line\">259</span><br><span class=\"line\">260</span><br><span class=\"line\">261</span><br><span class=\"line\">262</span><br><span class=\"line\">263</span><br><span class=\"line\">264</span><br><span class=\"line\">265</span><br><span class=\"line\">266</span><br><span class=\"line\">267</span><br><span class=\"line\">268</span><br><span class=\"line\">269</span><br><span class=\"line\">270</span><br><span class=\"line\">271</span><br><span class=\"line\">272</span><br><span class=\"line\">273</span><br><span class=\"line\">274</span><br><span class=\"line\">275</span><br><span class=\"line\">276</span><br><span class=\"line\">277</span><br><span class=\"line\">278</span><br><span class=\"line\">279</span><br><span class=\"line\">280</span><br><span class=\"line\">281</span><br><span class=\"line\">282</span><br><span class=\"line\">283</span><br><span class=\"line\">284</span><br><span class=\"line\">285</span><br><span class=\"line\">286</span><br><span class=\"line\">287</span><br><span class=\"line\">288</span><br><span class=\"line\">289</span><br><span class=\"line\">290</span><br><span class=\"line\">291</span><br><span class=\"line\">292</span><br><span class=\"line\">293</span><br><span class=\"line\">294</span><br><span class=\"line\">295</span><br><span class=\"line\">296</span><br><span class=\"line\">297</span><br><span class=\"line\">298</span><br><span class=\"line\">299</span><br><span class=\"line\">300</span><br><span class=\"line\">301</span><br><span class=\"line\">302</span><br><span class=\"line\">303</span><br><span class=\"line\">304</span><br><span class=\"line\">305</span><br><span class=\"line\">306</span><br><span class=\"line\">307</span><br><span class=\"line\">308</span><br><span class=\"line\">309</span><br><span class=\"line\">310</span><br><span class=\"line\">311</span><br><span class=\"line\">312</span><br><span class=\"line\">313</span><br><span class=\"line\">314</span><br><span class=\"line\">315</span><br><span class=\"line\">316</span><br><span class=\"line\">317</span><br><span class=\"line\">318</span><br><span class=\"line\">319</span><br><span class=\"line\">320</span><br><span class=\"line\">321</span><br><span class=\"line\">322</span><br><span class=\"line\">323</span><br><span class=\"line\">324</span><br><span class=\"line\">325</span><br><span class=\"line\">326</span><br><span class=\"line\">327</span><br><span class=\"line\">328</span><br><span class=\"line\">329</span><br><span class=\"line\">330</span><br><span class=\"line\">331</span><br><span class=\"line\">332</span><br><span class=\"line\">333</span><br><span class=\"line\">334</span><br><span class=\"line\">335</span><br><span class=\"line\">336</span><br><span class=\"line\">337</span><br><span class=\"line\">338</span><br><span class=\"line\">339</span><br><span class=\"line\">340</span><br><span class=\"line\">341</span><br><span class=\"line\">342</span><br><span class=\"line\">343</span><br><span class=\"line\">344</span><br><span class=\"line\">345</span><br><span class=\"line\">346</span><br><span class=\"line\">347</span><br><span class=\"line\">348</span><br><span class=\"line\">349</span><br><span class=\"line\">350</span><br><span class=\"line\">351</span><br><span class=\"line\">352</span><br><span class=\"line\">353</span><br><span class=\"line\">354</span><br><span class=\"line\">355</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">/*</span><br><span class=\"hljs-comment\"> * Copyright 2002-2019 the original author or authors.</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span><br><span class=\"hljs-comment\"> * you may not use this file except in compliance with the License.</span><br><span class=\"hljs-comment\"> * You may obtain a copy of the License at</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> *      https://www.apache.org/licenses/LICENSE-2.0</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> * Unless required by applicable law or agreed to in writing, software</span><br><span class=\"hljs-comment\"> * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span><br><span class=\"hljs-comment\"> * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span><br><span class=\"hljs-comment\"> * See the License for the specific language governing permissions and</span><br><span class=\"hljs-comment\"> * limitations under the License.</span><br><span class=\"hljs-comment\"> */</span><br><br><span class=\"hljs-keyword\">package</span> org.springframework.beans.factory.config;<br><br><span class=\"hljs-keyword\">import</span> org.springframework.beans.BeanMetadataElement;<br><span class=\"hljs-keyword\">import</span> org.springframework.beans.MutablePropertyValues;<br><span class=\"hljs-keyword\">import</span> org.springframework.core.AttributeAccessor;<br><span class=\"hljs-keyword\">import</span> org.springframework.core.ResolvableType;<br><span class=\"hljs-keyword\">import</span> org.springframework.lang.Nullable;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * A BeanDefinition describes a bean instance, which has property values,</span><br><span class=\"hljs-comment\"> * constructor argument values, and further information supplied by</span><br><span class=\"hljs-comment\"> * concrete implementations.</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> * &lt;p&gt;This is just a minimal interface: The main intention is to allow a</span><br><span class=\"hljs-comment\"> * &#123;<span class=\"hljs-doctag\">@link</span> BeanFactoryPostProcessor&#125; to introspect and modify property values</span><br><span class=\"hljs-comment\"> * and other bean metadata.</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> Juergen Hoeller</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> Rob Harrop</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@since</span> 19.03.2004</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@see</span> ConfigurableListableBeanFactory#getBeanDefinition</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@see</span> org.springframework.beans.factory.support.RootBeanDefinition</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@see</span> org.springframework.beans.factory.support.ChildBeanDefinition</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">interface</span> <span class=\"hljs-title\">BeanDefinition</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">AttributeAccessor</span>, <span class=\"hljs-title\">BeanMetadataElement</span> </span>&#123;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Scope identifier for the standard singleton scope: &quot;singleton&quot;.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Note that extended bean factories might support further scopes.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> #setScope</span><br><span class=\"hljs-comment\">\t */</span><br>\tString SCOPE_SINGLETON = ConfigurableBeanFactory.SCOPE_SINGLETON;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Scope identifier for the standard prototype scope: &quot;prototype&quot;.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Note that extended bean factories might support further scopes.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> #setScope</span><br><span class=\"hljs-comment\">\t */</span><br>\tString SCOPE_PROTOTYPE = ConfigurableBeanFactory.SCOPE_PROTOTYPE;<br><br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Role hint indicating that a &#123;<span class=\"hljs-doctag\">@code</span> BeanDefinition&#125; is a major part</span><br><span class=\"hljs-comment\">\t * of the application. Typically corresponds to a user-defined bean.</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-keyword\">int</span> ROLE_APPLICATION = <span class=\"hljs-number\">0</span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Role hint indicating that a &#123;<span class=\"hljs-doctag\">@code</span> BeanDefinition&#125; is a supporting</span><br><span class=\"hljs-comment\">\t * part of some larger configuration, typically an outer</span><br><span class=\"hljs-comment\">\t * &#123;<span class=\"hljs-doctag\">@link</span> org.springframework.beans.factory.parsing.ComponentDefinition&#125;.</span><br><span class=\"hljs-comment\">\t * &#123;<span class=\"hljs-doctag\">@code</span> SUPPORT&#125; beans are considered important enough to be aware</span><br><span class=\"hljs-comment\">\t * of when looking more closely at a particular</span><br><span class=\"hljs-comment\">\t * &#123;<span class=\"hljs-doctag\">@link</span> org.springframework.beans.factory.parsing.ComponentDefinition&#125;,</span><br><span class=\"hljs-comment\">\t * but not when looking at the overall configuration of an application.</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-keyword\">int</span> ROLE_SUPPORT = <span class=\"hljs-number\">1</span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Role hint indicating that a &#123;<span class=\"hljs-doctag\">@code</span> BeanDefinition&#125; is providing an</span><br><span class=\"hljs-comment\">\t * entirely background role and has no relevance to the end-user. This hint is</span><br><span class=\"hljs-comment\">\t * used when registering beans that are completely part of the internal workings</span><br><span class=\"hljs-comment\">\t * of a &#123;<span class=\"hljs-doctag\">@link</span> org.springframework.beans.factory.parsing.ComponentDefinition&#125;.</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-keyword\">int</span> ROLE_INFRASTRUCTURE = <span class=\"hljs-number\">2</span>;<br><br><br>\t<span class=\"hljs-comment\">// Modifiable attributes</span><br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Set the name of the parent definition of this bean definition, if any.</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setParentName</span><span class=\"hljs-params\">(<span class=\"hljs-meta\">@Nullable</span> String parentName)</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return the name of the parent definition of this bean definition, if any.</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-meta\">@Nullable</span><br>\t<span class=\"hljs-function\">String <span class=\"hljs-title\">getParentName</span><span class=\"hljs-params\">()</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Specify the bean class name of this bean definition.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;The class name can be modified during bean factory post-processing,</span><br><span class=\"hljs-comment\">\t * typically replacing the original class name with a parsed variant of it.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> #setParentName</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> #setFactoryBeanName</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> #setFactoryMethodName</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setBeanClassName</span><span class=\"hljs-params\">(<span class=\"hljs-meta\">@Nullable</span> String beanClassName)</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return the current bean class name of this bean definition.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Note that this does not have to be the actual class name used at runtime, in</span><br><span class=\"hljs-comment\">\t * case of a child definition overriding/inheriting the class name from its parent.</span><br><span class=\"hljs-comment\">\t * Also, this may just be the class that a factory method is called on, or it may</span><br><span class=\"hljs-comment\">\t * even be empty in case of a factory bean reference that a method is called on.</span><br><span class=\"hljs-comment\">\t * Hence, do &lt;i&gt;not&lt;/i&gt; consider this to be the definitive bean type at runtime but</span><br><span class=\"hljs-comment\">\t * rather only use it for parsing purposes at the individual bean definition level.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> #getParentName()</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> #getFactoryBeanName()</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> #getFactoryMethodName()</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-meta\">@Nullable</span><br>\t<span class=\"hljs-function\">String <span class=\"hljs-title\">getBeanClassName</span><span class=\"hljs-params\">()</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Override the target scope of this bean, specifying a new scope name.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> #SCOPE_SINGLETON</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> #SCOPE_PROTOTYPE</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setScope</span><span class=\"hljs-params\">(<span class=\"hljs-meta\">@Nullable</span> String scope)</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return the name of the current target scope for this bean,</span><br><span class=\"hljs-comment\">\t * or &#123;<span class=\"hljs-doctag\">@code</span> null&#125; if not known yet.</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-meta\">@Nullable</span><br>\t<span class=\"hljs-function\">String <span class=\"hljs-title\">getScope</span><span class=\"hljs-params\">()</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Set whether this bean should be lazily initialized.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;If &#123;<span class=\"hljs-doctag\">@code</span> false&#125;, the bean will get instantiated on startup by bean</span><br><span class=\"hljs-comment\">\t * factories that perform eager initialization of singletons.</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setLazyInit</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">boolean</span> lazyInit)</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return whether this bean should be lazily initialized, i.e. not</span><br><span class=\"hljs-comment\">\t * eagerly instantiated on startup. Only applicable to a singleton bean.</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">boolean</span> <span class=\"hljs-title\">isLazyInit</span><span class=\"hljs-params\">()</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Set the names of the beans that this bean depends on being initialized.</span><br><span class=\"hljs-comment\">\t * The bean factory will guarantee that these beans get initialized first.</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setDependsOn</span><span class=\"hljs-params\">(<span class=\"hljs-meta\">@Nullable</span> String... dependsOn)</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return the bean names that this bean depends on.</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-meta\">@Nullable</span><br>\tString[] getDependsOn();<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Set whether this bean is a candidate for getting autowired into some other bean.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Note that this flag is designed to only affect type-based autowiring.</span><br><span class=\"hljs-comment\">\t * It does not affect explicit references by name, which will get resolved even</span><br><span class=\"hljs-comment\">\t * if the specified bean is not marked as an autowire candidate. As a consequence,</span><br><span class=\"hljs-comment\">\t * autowiring by name will nevertheless inject a bean if the name matches.</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setAutowireCandidate</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">boolean</span> autowireCandidate)</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return whether this bean is a candidate for getting autowired into some other bean.</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">boolean</span> <span class=\"hljs-title\">isAutowireCandidate</span><span class=\"hljs-params\">()</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Set whether this bean is a primary autowire candidate.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;If this value is &#123;<span class=\"hljs-doctag\">@code</span> true&#125; for exactly one bean among multiple</span><br><span class=\"hljs-comment\">\t * matching candidates, it will serve as a tie-breaker.</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setPrimary</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">boolean</span> primary)</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return whether this bean is a primary autowire candidate.</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">boolean</span> <span class=\"hljs-title\">isPrimary</span><span class=\"hljs-params\">()</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Specify the factory bean to use, if any.</span><br><span class=\"hljs-comment\">\t * This the name of the bean to call the specified factory method on.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> #setFactoryMethodName</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setFactoryBeanName</span><span class=\"hljs-params\">(<span class=\"hljs-meta\">@Nullable</span> String factoryBeanName)</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return the factory bean name, if any.</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-meta\">@Nullable</span><br>\t<span class=\"hljs-function\">String <span class=\"hljs-title\">getFactoryBeanName</span><span class=\"hljs-params\">()</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Specify a factory method, if any. This method will be invoked with</span><br><span class=\"hljs-comment\">\t * constructor arguments, or with no arguments if none are specified.</span><br><span class=\"hljs-comment\">\t * The method will be invoked on the specified factory bean, if any,</span><br><span class=\"hljs-comment\">\t * or otherwise as a static method on the local bean class.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> #setFactoryBeanName</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> #setBeanClassName</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setFactoryMethodName</span><span class=\"hljs-params\">(<span class=\"hljs-meta\">@Nullable</span> String factoryMethodName)</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return a factory method, if any.</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-meta\">@Nullable</span><br>\t<span class=\"hljs-function\">String <span class=\"hljs-title\">getFactoryMethodName</span><span class=\"hljs-params\">()</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return the constructor argument values for this bean.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;The returned instance can be modified during bean factory post-processing.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@return</span> the ConstructorArgumentValues object (never &#123;<span class=\"hljs-doctag\">@code</span> null&#125;)</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\">ConstructorArgumentValues <span class=\"hljs-title\">getConstructorArgumentValues</span><span class=\"hljs-params\">()</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return if there are constructor argument values defined for this bean.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@since</span> 5.0.2</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">default</span> <span class=\"hljs-keyword\">boolean</span> <span class=\"hljs-title\">hasConstructorArgumentValues</span><span class=\"hljs-params\">()</span> </span>&#123;<br>\t\t<span class=\"hljs-keyword\">return</span> !getConstructorArgumentValues().isEmpty();<br>\t&#125;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return the property values to be applied to a new instance of the bean.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;The returned instance can be modified during bean factory post-processing.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@return</span> the MutablePropertyValues object (never &#123;<span class=\"hljs-doctag\">@code</span> null&#125;)</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\">MutablePropertyValues <span class=\"hljs-title\">getPropertyValues</span><span class=\"hljs-params\">()</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return if there are property values values defined for this bean.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@since</span> 5.0.2</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">default</span> <span class=\"hljs-keyword\">boolean</span> <span class=\"hljs-title\">hasPropertyValues</span><span class=\"hljs-params\">()</span> </span>&#123;<br>\t\t<span class=\"hljs-keyword\">return</span> !getPropertyValues().isEmpty();<br>\t&#125;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Set the name of the initializer method.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@since</span> 5.1</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setInitMethodName</span><span class=\"hljs-params\">(<span class=\"hljs-meta\">@Nullable</span> String initMethodName)</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return the name of the initializer method.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@since</span> 5.1</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-meta\">@Nullable</span><br>\t<span class=\"hljs-function\">String <span class=\"hljs-title\">getInitMethodName</span><span class=\"hljs-params\">()</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Set the name of the destroy method.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@since</span> 5.1</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setDestroyMethodName</span><span class=\"hljs-params\">(<span class=\"hljs-meta\">@Nullable</span> String destroyMethodName)</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return the name of the destroy method.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@since</span> 5.1</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-meta\">@Nullable</span><br>\t<span class=\"hljs-function\">String <span class=\"hljs-title\">getDestroyMethodName</span><span class=\"hljs-params\">()</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Set the role hint for this &#123;<span class=\"hljs-doctag\">@code</span> BeanDefinition&#125;. The role hint</span><br><span class=\"hljs-comment\">\t * provides the frameworks as well as tools with an indication of</span><br><span class=\"hljs-comment\">\t * the role and importance of a particular &#123;<span class=\"hljs-doctag\">@code</span> BeanDefinition&#125;.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@since</span> 5.1</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> #ROLE_APPLICATION</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> #ROLE_SUPPORT</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> #ROLE_INFRASTRUCTURE</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setRole</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">int</span> role)</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Get the role hint for this &#123;<span class=\"hljs-doctag\">@code</span> BeanDefinition&#125;. The role hint</span><br><span class=\"hljs-comment\">\t * provides the frameworks as well as tools with an indication of</span><br><span class=\"hljs-comment\">\t * the role and importance of a particular &#123;<span class=\"hljs-doctag\">@code</span> BeanDefinition&#125;.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> #ROLE_APPLICATION</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> #ROLE_SUPPORT</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> #ROLE_INFRASTRUCTURE</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">getRole</span><span class=\"hljs-params\">()</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Set a human-readable description of this bean definition.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@since</span> 5.1</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setDescription</span><span class=\"hljs-params\">(<span class=\"hljs-meta\">@Nullable</span> String description)</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return a human-readable description of this bean definition.</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-meta\">@Nullable</span><br>\t<span class=\"hljs-function\">String <span class=\"hljs-title\">getDescription</span><span class=\"hljs-params\">()</span></span>;<br><br><br>\t<span class=\"hljs-comment\">// Read-only attributes</span><br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return a resolvable type for this bean definition,</span><br><span class=\"hljs-comment\">\t * based on the bean class or other specific metadata.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;This is typically fully resolved on a runtime-merged bean definition</span><br><span class=\"hljs-comment\">\t * but not necessarily on a configuration-time definition instance.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@return</span> the resolvable type (potentially &#123;<span class=\"hljs-doctag\">@link</span> ResolvableType#NONE&#125;)</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@since</span> 5.2</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> ConfigurableBeanFactory#getMergedBeanDefinition</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\">ResolvableType <span class=\"hljs-title\">getResolvableType</span><span class=\"hljs-params\">()</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return whether this a &lt;b&gt;Singleton&lt;/b&gt;, with a single, shared instance</span><br><span class=\"hljs-comment\">\t * returned on all calls.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> #SCOPE_SINGLETON</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">boolean</span> <span class=\"hljs-title\">isSingleton</span><span class=\"hljs-params\">()</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return whether this a &lt;b&gt;Prototype&lt;/b&gt;, with an independent instance</span><br><span class=\"hljs-comment\">\t * returned for each call.</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@since</span> 3.0</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@see</span> #SCOPE_PROTOTYPE</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">boolean</span> <span class=\"hljs-title\">isPrototype</span><span class=\"hljs-params\">()</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return whether this bean is &quot;abstract&quot;, that is, not meant to be instantiated.</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">boolean</span> <span class=\"hljs-title\">isAbstract</span><span class=\"hljs-params\">()</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return a description of the resource that this bean definition</span><br><span class=\"hljs-comment\">\t * came from (for the purpose of showing context in case of errors).</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-meta\">@Nullable</span><br>\t<span class=\"hljs-function\">String <span class=\"hljs-title\">getResourceDescription</span><span class=\"hljs-params\">()</span></span>;<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Return the originating BeanDefinition, or &#123;<span class=\"hljs-doctag\">@code</span> null&#125; if none.</span><br><span class=\"hljs-comment\">\t * Allows for retrieving the decorated bean definition, if any.</span><br><span class=\"hljs-comment\">\t * &lt;p&gt;Note that this method returns the immediate originator. Iterate through the</span><br><span class=\"hljs-comment\">\t * originator chain to find the original BeanDefinition as defined by the user.</span><br><span class=\"hljs-comment\">\t */</span><br>\t<span class=\"hljs-meta\">@Nullable</span><br>\t<span class=\"hljs-function\">BeanDefinition <span class=\"hljs-title\">getOriginatingBeanDefinition</span><span class=\"hljs-params\">()</span></span>;<br><br>&#125;<br></code></pre></td></tr></table></figure>\n<h3 id=\"BeanDefination方法属性摘要\"><a href=\"#BeanDefination方法属性摘要\" class=\"headerlink\" title=\"BeanDefination方法属性摘要\"></a>BeanDefination方法属性摘要</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">interface</span> <span class=\"hljs-title\">BeanDefinition</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">AttributeAccessor</span>, <span class=\"hljs-title\">BeanMetadataElement</span> </span>&#123;<br><br>\tString SCOPE_SINGLETON = ConfigurableBeanFactory.SCOPE_SINGLETON;<br><br>\tString SCOPE_PROTOTYPE = ConfigurableBeanFactory.SCOPE_PROTOTYPE;<br><br>\t<span class=\"hljs-keyword\">int</span> ROLE_APPLICATION = <span class=\"hljs-number\">0</span>;<br><br><br>\t<span class=\"hljs-keyword\">int</span> ROLE_SUPPORT = <span class=\"hljs-number\">1</span>;<br><br>    <span class=\"hljs-comment\">// infrastructure</span><br>\t<span class=\"hljs-keyword\">int</span> ROLE_INFRASTRUCTURE = <span class=\"hljs-number\">2</span>;<br><br><br>\t<span class=\"hljs-comment\">// Modifiable attributes</span><br><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setParentName</span><span class=\"hljs-params\">(<span class=\"hljs-meta\">@Nullable</span> String parentName)</span></span>;<br><br><br>\t<span class=\"hljs-meta\">@Nullable</span><br>\t<span class=\"hljs-function\">String <span class=\"hljs-title\">getParentName</span><span class=\"hljs-params\">()</span></span>;<br><br><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setBeanClassName</span><span class=\"hljs-params\">(<span class=\"hljs-meta\">@Nullable</span> String beanClassName)</span></span>;<br><br><br>\t<span class=\"hljs-meta\">@Nullable</span><br>\t<span class=\"hljs-function\">String <span class=\"hljs-title\">getBeanClassName</span><span class=\"hljs-params\">()</span></span>;<br><br><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setScope</span><span class=\"hljs-params\">(<span class=\"hljs-meta\">@Nullable</span> String scope)</span></span>;<br><br><br>\t<span class=\"hljs-meta\">@Nullable</span><br>\t<span class=\"hljs-function\">String <span class=\"hljs-title\">getScope</span><span class=\"hljs-params\">()</span></span>;<br><br><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setLazyInit</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">boolean</span> lazyInit)</span></span>;<br><br><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">boolean</span> <span class=\"hljs-title\">isLazyInit</span><span class=\"hljs-params\">()</span></span>;<br><br><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setDependsOn</span><span class=\"hljs-params\">(<span class=\"hljs-meta\">@Nullable</span> String... dependsOn)</span></span>;<br><br><br>\t<span class=\"hljs-meta\">@Nullable</span><br>\tString[] getDependsOn();<br><br><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setAutowireCandidate</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">boolean</span> autowireCandidate)</span></span>;<br><br><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">boolean</span> <span class=\"hljs-title\">isAutowireCandidate</span><span class=\"hljs-params\">()</span></span>;<br><br><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setPrimary</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">boolean</span> primary)</span></span>;<br><br><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">boolean</span> <span class=\"hljs-title\">isPrimary</span><span class=\"hljs-params\">()</span></span>;<br><br><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setFactoryBeanName</span><span class=\"hljs-params\">(<span class=\"hljs-meta\">@Nullable</span> String factoryBeanName)</span></span>;<br><br><br>\t<span class=\"hljs-meta\">@Nullable</span><br>\t<span class=\"hljs-function\">String <span class=\"hljs-title\">getFactoryBeanName</span><span class=\"hljs-params\">()</span></span>;<br><br><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setFactoryMethodName</span><span class=\"hljs-params\">(<span class=\"hljs-meta\">@Nullable</span> String factoryMethodName)</span></span>;<br><br><br>\t<span class=\"hljs-meta\">@Nullable</span><br>\t<span class=\"hljs-function\">String <span class=\"hljs-title\">getFactoryMethodName</span><span class=\"hljs-params\">()</span></span>;<br><br><br>\t<span class=\"hljs-function\">ConstructorArgumentValues <span class=\"hljs-title\">getConstructorArgumentValues</span><span class=\"hljs-params\">()</span></span>;<br><br><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">default</span> <span class=\"hljs-keyword\">boolean</span> <span class=\"hljs-title\">hasConstructorArgumentValues</span><span class=\"hljs-params\">()</span> </span>&#123;<br>\t\t<span class=\"hljs-keyword\">return</span> !getConstructorArgumentValues().isEmpty();<br>\t&#125;<br><br><br>\t<span class=\"hljs-function\">MutablePropertyValues <span class=\"hljs-title\">getPropertyValues</span><span class=\"hljs-params\">()</span></span>;<br><br><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">default</span> <span class=\"hljs-keyword\">boolean</span> <span class=\"hljs-title\">hasPropertyValues</span><span class=\"hljs-params\">()</span> </span>&#123;<br>\t\t<span class=\"hljs-keyword\">return</span> !getPropertyValues().isEmpty();<br>\t&#125;<br><br><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setInitMethodName</span><span class=\"hljs-params\">(<span class=\"hljs-meta\">@Nullable</span> String initMethodName)</span></span>;<br><br>\t<span class=\"hljs-meta\">@Nullable</span><br>\t<span class=\"hljs-function\">String <span class=\"hljs-title\">getInitMethodName</span><span class=\"hljs-params\">()</span></span>;<br><br><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setDestroyMethodName</span><span class=\"hljs-params\">(<span class=\"hljs-meta\">@Nullable</span> String destroyMethodName)</span></span>;<br><br><br>\t<span class=\"hljs-meta\">@Nullable</span><br>\t<span class=\"hljs-function\">String <span class=\"hljs-title\">getDestroyMethodName</span><span class=\"hljs-params\">()</span></span>;<br><br><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setRole</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">int</span> role)</span></span>;<br><br><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">getRole</span><span class=\"hljs-params\">()</span></span>;<br><br><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setDescription</span><span class=\"hljs-params\">(<span class=\"hljs-meta\">@Nullable</span> String description)</span></span>;<br><br>\t<span class=\"hljs-meta\">@Nullable</span><br>\t<span class=\"hljs-function\">String <span class=\"hljs-title\">getDescription</span><span class=\"hljs-params\">()</span></span>;<br><br><br>\t<span class=\"hljs-comment\">// Read-only attributes</span><br><br><br>\t<span class=\"hljs-function\">ResolvableType <span class=\"hljs-title\">getResolvableType</span><span class=\"hljs-params\">()</span></span>;<br><br><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">boolean</span> <span class=\"hljs-title\">isSingleton</span><span class=\"hljs-params\">()</span></span>;<br><br><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">boolean</span> <span class=\"hljs-title\">isPrototype</span><span class=\"hljs-params\">()</span></span>;<br><br><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">boolean</span> <span class=\"hljs-title\">isAbstract</span><span class=\"hljs-params\">()</span></span>;<br><br><br>\t<span class=\"hljs-meta\">@Nullable</span><br>\t<span class=\"hljs-function\">String <span class=\"hljs-title\">getResourceDescription</span><span class=\"hljs-params\">()</span></span>;<br><br><br>\t<span class=\"hljs-meta\">@Nullable</span><br>\t<span class=\"hljs-function\">BeanDefinition <span class=\"hljs-title\">getOriginatingBeanDefinition</span><span class=\"hljs-params\">()</span></span>;<br><br>&#125;<br><br><br><br><span class=\"hljs-comment\">// org.springframework.core.AttributeAccessor</span><br><span class=\"hljs-keyword\">package</span> org.springframework.core;<br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">interface</span> <span class=\"hljs-title\">AttributeAccessor</span> </span>&#123;<br><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setAttribute</span><span class=\"hljs-params\">(String name, <span class=\"hljs-meta\">@Nullable</span> Object value)</span></span>;<br><br><br>\t<span class=\"hljs-meta\">@Nullable</span><br>\t<span class=\"hljs-function\">Object <span class=\"hljs-title\">getAttribute</span><span class=\"hljs-params\">(String name)</span></span>;<br><br><br>\t<span class=\"hljs-meta\">@Nullable</span><br>\t<span class=\"hljs-function\">Object <span class=\"hljs-title\">removeAttribute</span><span class=\"hljs-params\">(String name)</span></span>;<br><br><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">boolean</span> <span class=\"hljs-title\">hasAttribute</span><span class=\"hljs-params\">(String name)</span></span>;<br><br><br>\tString[] attributeNames();<br><br>&#125;<br><br><br><br><span class=\"hljs-comment\">// org.springframework.beans.BeanMetadataElemen</span><br><span class=\"hljs-keyword\">package</span> org.springframework.beans;<br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">interface</span> <span class=\"hljs-title\">BeanMetadataElement</span> </span>&#123;<br><br>\t<span class=\"hljs-meta\">@Nullable</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">default</span> Object <span class=\"hljs-title\">getSource</span><span class=\"hljs-params\">()</span> </span>&#123;<br>\t\t<span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">null</span>;<br>\t&#125;<br><br>&#125;<br><br><br></code></pre></td></tr></table></figure>\n\n<h1 id=\"2-从一个Demo程序开始\"><a href=\"#2-从一个Demo程序开始\" class=\"headerlink\" title=\"2.从一个Demo程序开始\"></a>2.从一个Demo程序开始</h1><h2 id=\"2-1-Demo项目配置\"><a href=\"#2-1-Demo项目配置\" class=\"headerlink\" title=\"2.1 Demo项目配置\"></a>2.1 Demo项目配置</h2><h3 id=\"maven的pom-xml配置文件\"><a href=\"#maven的pom-xml配置文件\" class=\"headerlink\" title=\"maven的pom.xml配置文件\"></a>maven的pom.xml配置文件</h3><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs xml\"><span class=\"hljs-meta\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">project</span> <span class=\"hljs-attr\">xmlns</span>=<span class=\"hljs-string\">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class=\"hljs-attr\">xmlns:xsi</span>=<span class=\"hljs-string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class=\"hljs-tag\">         <span class=\"hljs-attr\">xsi:schemaLocation</span>=<span class=\"hljs-string\">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">modelVersion</span>&gt;</span>4.0.0<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">modelVersion</span>&gt;</span><br>    <span class=\"hljs-comment\">&lt;!--        &lt;parent&gt;--&gt;</span><br>    <span class=\"hljs-comment\">&lt;!--            &lt;groupId&gt;com.acanx&lt;/groupId&gt;--&gt;</span><br>    <span class=\"hljs-comment\">&lt;!--            &lt;artifactId&gt;ACANX-JavaEE-Dependencies&lt;/artifactId&gt;--&gt;</span><br>    <span class=\"hljs-comment\">&lt;!--            &lt;version&gt;0.0.1&lt;/version&gt;--&gt;</span><br>    <span class=\"hljs-comment\">&lt;!--        &lt;/parent&gt;--&gt;</span><br><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">groupId</span>&gt;</span>com.acanx<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">groupId</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">artifactId</span>&gt;</span>JavaWeb-Spring<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">artifactId</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">version</span>&gt;</span>0.0.1-SNAPSHOT<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">version</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">packaging</span>&gt;</span>war<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">packaging</span>&gt;</span><br><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">name</span>&gt;</span>JavaWeb-Spring<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">name</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">description</span>&gt;</span>JavaWeb-Spring project<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">description</span>&gt;</span><br><br><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">properties</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">project.build.sourceEncoding</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">project.reporting.outputEncoding</span>&gt;</span>UTF-8<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">project.reporting.outputEncoding</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">java.version</span>&gt;</span>11<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">java.version</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">spring.version</span>&gt;</span>5.2.1.RELEASE<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">spring.version</span>&gt;</span><br>        <span class=\"hljs-comment\">&lt;!-- log4j日志文件管理包版本 --&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">slf4j.version</span>&gt;</span>2.0.0-alpha1<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">slf4j.version</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">logback.version</span>&gt;</span>1.3.0-alpha5<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">logback.version</span>&gt;</span><br>        <span class=\"hljs-comment\">&lt;!-- log4j日志包版本号 --&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">log4j2.version</span>&gt;</span>2.8.2<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">log4j2.version</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">log4j.version</span>&gt;</span>1.2.17<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">log4j.version</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">junit.version</span>&gt;</span>4.12<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">junit.version</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">fastjson.version</span>&gt;</span>1.2.62<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">fastjson.version</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">maven-compiler-plugin.version</span>&gt;</span>3.8.1<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">maven-compiler-plugin.version</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">properties</span>&gt;</span><br><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">dependencies</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">dependency</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">groupId</span>&gt;</span>org.springframework<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">groupId</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">artifactId</span>&gt;</span>spring-context<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">artifactId</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">version</span>&gt;</span>$&#123;spring.version&#125;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">version</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">dependency</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">dependency</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">groupId</span>&gt;</span>ch.qos.logback<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">groupId</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">artifactId</span>&gt;</span>logback-classic<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">artifactId</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">version</span>&gt;</span>$&#123;logback.version&#125;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">version</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">dependency</span>&gt;</span><br>        <span class=\"hljs-comment\">&lt;!-- 添加fastjson --&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">dependency</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">groupId</span>&gt;</span>com.alibaba<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">groupId</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">artifactId</span>&gt;</span>fastjson<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">artifactId</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">version</span>&gt;</span>$&#123;fastjson.version&#125;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">version</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">dependency</span>&gt;</span><br>        <span class=\"hljs-comment\">&lt;!--  单元测试--&gt;</span><br>        <span class=\"hljs-comment\">&lt;!-- https://mvnrepository.com/artifact/junit/junit --&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">dependency</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">groupId</span>&gt;</span>junit<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">groupId</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">artifactId</span>&gt;</span>junit<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">artifactId</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">version</span>&gt;</span>$&#123;junit.version&#125;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">version</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">scope</span>&gt;</span>test<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">scope</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">dependency</span>&gt;</span><br><br>    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">dependencies</span>&gt;</span><br><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">build</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">plugins</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">plugin</span>&gt;</span><br>                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">groupId</span>&gt;</span>org.apache.maven.plugins<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">groupId</span>&gt;</span><br>                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">artifactId</span>&gt;</span>maven-compiler-plugin<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">artifactId</span>&gt;</span><br>                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">version</span>&gt;</span>$&#123;maven-compiler-plugin.version&#125;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">version</span>&gt;</span><br>                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">configuration</span>&gt;</span><br>                    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">target</span>&gt;</span>11<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">target</span>&gt;</span><br>                    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">source</span>&gt;</span>11<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">source</span>&gt;</span><br>                <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">configuration</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">plugin</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">plugins</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">build</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">project</span>&gt;</span><br><br></code></pre></td></tr></table></figure>\n\n<h2 id=\"2-2-Demo程序\"><a href=\"#2-2-Demo程序\" class=\"headerlink\" title=\"2.2 Demo程序\"></a>2.2 Demo程序</h2><h3 id=\"2-2-1启动类\"><a href=\"#2-2-1启动类\" class=\"headerlink\" title=\"2.2.1启动类\"></a>2.2.1启动类</h3><ul>\n<li>代码位置:com.acanx.spring.xml.CspringIocConfigByFileSystemXmlApplicationContext.java<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><br><span class=\"hljs-keyword\">package</span> com.acanx.spring.xml;<br><br><span class=\"hljs-keyword\">import</span> com.acanx.spring.bean.Car;<br><span class=\"hljs-keyword\">import</span> org.apache.commons.logging.Log;<br><span class=\"hljs-keyword\">import</span> org.apache.commons.logging.LogFactory;<br><span class=\"hljs-keyword\">import</span> org.slf4j.Logger;<br><span class=\"hljs-keyword\">import</span> org.slf4j.LoggerFactory;<br><span class=\"hljs-keyword\">import</span> org.springframework.context.ApplicationContext;<br><span class=\"hljs-keyword\">import</span> org.springframework.context.support.FileSystemXmlApplicationContext;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * ACANX-JavaWeb / com.acanx.spring.xml / SpringIocConfigByXmlFileInClassPath.java</span><br><span class=\"hljs-comment\"> * 文件由 ACANX 创建于 2019/7/30 - 13:39</span><br><span class=\"hljs-comment\"> * Description  SpringIocConfigByXmlFileInClassPath:</span><br><span class=\"hljs-comment\"> * 补充说明： 使用FileSystemXmlApplicationContext加载文件系统下的配置文件</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> ACANX</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@version</span> 0.0.1.0</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@date</span> 2019/7/30  13:39</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@since</span> 0.0.1-SNAPSHOT</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">CspringIocConfigByFileSystemXmlApplicationContext</span> </span>&#123;<br>   <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">final</span> Logger logger= LoggerFactory.getLogger(CspringIocConfigByFileSystemXmlApplicationContext.class);<br>   <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">main</span><span class=\"hljs-params\">(String[] args)</span>  </span>&#123;<br>        logger.info(<span class=\"hljs-string\">&quot;-------------------&quot;</span>);<br>        logger.info(System.getProperty(<span class=\"hljs-string\">&quot;org.apache.commons.logging.LogFactory&quot;</span>));<br>        logger.info(System.getProperty(<span class=\"hljs-string\">&quot;org.apache.commons.logging.Log&quot;</span>));<br>        logger.info(<span class=\"hljs-string\">&quot;-------------------&quot;</span>);<br>        String location=<span class=\"hljs-string\">&quot;D:\\\\ProgramCode\\\\JavaCode\\\\ACANX-JavaWeb\\\\JavaWeb-Spring\\\\ApplicationContextC.xml&quot;</span>;<br>        ApplicationContext applicationContext = <span class=\"hljs-keyword\">new</span> FileSystemXmlApplicationContext(location);<br>        Car car = (Car) applicationContext.getBean(<span class=\"hljs-string\">&quot;myCar&quot;</span>);<br>        logger.info(car.toString());<br>        logger.info(<span class=\"hljs-string\">&quot;Info :&#123;&#125;&quot;</span>,logger.isInfoEnabled());<br>        String[] beanNames=applicationContext.getBeanDefinitionNames();<br>        <span class=\"hljs-keyword\">for</span> (String beanName:beanNames) &#123;<br>             logger.info(beanName+<span class=\"hljs-string\">&quot;::::: &quot;</span>+applicationContext.getBean(beanName).toString());<br>        &#125;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure></li>\n</ul>\n<h3 id=\"2-2-2使用到的Bena对象\"><a href=\"#2-2-2使用到的Bena对象\" class=\"headerlink\" title=\"2.2.2使用到的Bena对象\"></a>2.2.2使用到的Bena对象</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">package</span> com.acanx.spring.bean;<br><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">Car</span> </span>&#123;<br><br>    <span class=\"hljs-keyword\">private</span>  String name;<br><br>    <span class=\"hljs-keyword\">private</span>  String price;<br><br>\t<span class=\"hljs-comment\">// get set 默认构造方法已省略</span><br><br>&#125;<br></code></pre></td></tr></table></figure>\n\n<h3 id=\"2-2-3-springContext的xml文件ApplicationContextC-xml\"><a href=\"#2-2-3-springContext的xml文件ApplicationContextC-xml\" class=\"headerlink\" title=\"2.2.3 springContext的xml文件ApplicationContextC.xml\"></a>2.2.3 springContext的xml文件ApplicationContextC.xml</h3><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs xml\"><span class=\"hljs-meta\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">beans</span> <span class=\"hljs-attr\">xmlns</span>=<span class=\"hljs-string\">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class=\"hljs-tag\">       <span class=\"hljs-attr\">xmlns:xsi</span>=<span class=\"hljs-string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class=\"hljs-tag\">       <span class=\"hljs-attr\">xsi:schemaLocation</span>=<span class=\"hljs-string\">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span><br>    <br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">bean</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;myCar&quot;</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;com.acanx.spring.bean.Car&quot;</span> &gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">property</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;name&quot;</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">&quot;QQAI&quot;</span>/&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">property</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;price&quot;</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">&quot;2222&quot;</span>/&gt;</span><br>    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">bean</span>&gt;</span><br>    <br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">beans</span>&gt;</span><br><br></code></pre></td></tr></table></figure>\n\n<h3 id=\"2-2-4-配置日志-logback-xml（resources文件夹下）\"><a href=\"#2-2-4-配置日志-logback-xml（resources文件夹下）\" class=\"headerlink\" title=\"2.2.4 配置日志 logback.xml（resources文件夹下）\"></a>2.2.4 配置日志 logback.xml（resources文件夹下）</h3><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs xml\"><span class=\"hljs-meta\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">configuration</span> <span class=\"hljs-attr\">scan</span>=<span class=\"hljs-string\">&quot;true&quot;</span> <span class=\"hljs-attr\">scanPeriod</span>=<span class=\"hljs-string\">&quot;60 seconds&quot;</span> <span class=\"hljs-attr\">debug</span>=<span class=\"hljs-string\">&quot;false&quot;</span>&gt;</span><br><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">property</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;LOG_PATH&quot;</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">&quot;.log&quot;</span>/&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">property</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;APP_NAME&quot;</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">&quot;IOCDemo&quot;</span>/&gt;</span><br>    <span class=\"hljs-comment\">&lt;!--设置系统日志目录--&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">property</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;APP_DIR&quot;</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">&quot;app-IOCDemo&quot;</span>/&gt;</span><br><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">property</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;CONSOLE_LOG_PATTERN&quot;</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">&quot;[CLP]$&#123;CONSOLE_LOG_PATTERN:-%clr(%d&#123;$&#123;LOG_DATEFORMAT_PATTERN:-yyyy-MM-dd HH:mm:ss.SSS&#125;&#125;)&#123;faint&#125; %clr($&#123;LOG_LEVEL_PATTERN:-%5p&#125;) %clr($&#123;PID:- &#125;)&#123;magenta&#125; %clr(---)&#123;faint&#125; %clr([%15.15t])&#123;faint&#125; %clr(%-40.40logger&#123;39&#125;)&#123;cyan&#125; %clr(%-15.15method)&#123;cyan&#125; %clr([%4.4line&#123;4&#125;])&#123;magenta&#125; %clr(:)&#123;faint&#125; %m%n$&#123;LOG_EXCEPTION_CONVERSION_WORD:-%wEx&#125;&#125;&quot;</span>/&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">property</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;FILE_LOG_PATTERN&quot;</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">&quot;$&#123;FILE_LOG_PATTERN:-%d&#123;$&#123;LOG_DATEFORMAT_PATTERN:-yyyy-MM-dd HH:mm:ss.SSS&#125;&#125; $&#123;LOG_LEVEL_PATTERN:-%5p&#125; $&#123;PID:- &#125; --- [%t] %-40.40logger&#123;39&#125; : %m%n$&#123;LOG_EXCEPTION_CONVERSION_WORD:-%wEx&#125;&#125;&quot;</span>/&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">property</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;CONSOLE_LOGBACK_PATTERN&quot;</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">&quot;[控制台] %d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; [%thread] %-5level | %-80logger # %-40M [%4line] : %msg%n&quot;</span>/&gt;</span><br><br><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">contextName</span>&gt;</span>logback<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">contextName</span>&gt;</span><br>    <span class=\"hljs-comment\">&lt;!--输出到控制台--&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">appender</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;CONSOLE&quot;</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;ch.qos.logback.core.ConsoleAppender&quot;</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">filter</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;ch.qos.logback.classic.filter.ThresholdFilter&quot;</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">level</span>&gt;</span>TRACE<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">level</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">filter</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">layout</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;ch.qos.logback.classic.PatternLayout&quot;</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Pattern</span>&gt;</span>$&#123;CONSOLE_LOGBACK_PATTERN&#125;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Pattern</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">layout</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">encoder</span>&gt;</span><br>            <span class=\"hljs-comment\">&lt;!--  文件名 [%file]--&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">pattern</span>&gt;</span>$&#123;CONSOLE_LOGBACK_PATTERN&#125;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">pattern</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">encoder</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">appender</span>&gt;</span><br><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">appender</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;ERROR_FILE&quot;</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">filter</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;ch.qos.logback.classic.filter.ThresholdFilter&quot;</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">level</span>&gt;</span>ERROR<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">level</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">onMatch</span>&gt;</span>ACCEPT<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">onMatch</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">onMismatch</span>&gt;</span>DENY<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">onMismatch</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">filter</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">File</span>&gt;</span>.log/ACANX-JavaWeb/LOG-ERROR.log<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">File</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">rollingPolicy</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">fileNamePattern</span>&gt;</span>.log/server-error-%d&#123;yyyyMMdd&#125;.log.%i<br>            <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">fileNamePattern</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">timeBasedFileNamingAndTriggeringPolicy</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP&quot;</span>&gt;</span><br>                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">maxFileSize</span>&gt;</span>5MB<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">maxFileSize</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">timeBasedFileNamingAndTriggeringPolicy</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">maxHistory</span>&gt;</span>2<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">maxHistory</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">rollingPolicy</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">layout</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;ch.qos.logback.classic.PatternLayout&quot;</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Pattern</span>&gt;</span>$&#123;CONSOLE_LOGBACK_PATTERN&#125;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Pattern</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">layout</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">appender</span>&gt;</span><br><br><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">appender</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;WARN_FILE&quot;</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">filter</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;ch.qos.logback.classic.filter.ThresholdFilter&quot;</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">level</span>&gt;</span>WARN<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">level</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">onMatch</span>&gt;</span>ACCEPT<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">onMatch</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">onMismatch</span>&gt;</span>DENY<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">onMismatch</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">filter</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">File</span>&gt;</span>.log/ACANX-JavaWeb/LOG-WARN.log<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">File</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">rollingPolicy</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">fileNamePattern</span>&gt;</span>.log/ACANX-JavaWeb/server-WARN-%d&#123;yyyyMMdd&#125;.log.%i<br>            <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">fileNamePattern</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">timeBasedFileNamingAndTriggeringPolicy</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP&quot;</span>&gt;</span><br>                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">maxFileSize</span>&gt;</span>5MB<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">maxFileSize</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">timeBasedFileNamingAndTriggeringPolicy</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">maxHistory</span>&gt;</span>2<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">maxHistory</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">rollingPolicy</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">layout</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;ch.qos.logback.classic.PatternLayout&quot;</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Pattern</span>&gt;</span>$&#123;CONSOLE_LOGBACK_PATTERN&#125;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Pattern</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">layout</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">appender</span>&gt;</span><br><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">appender</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;INFO_FILE&quot;</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">File</span>&gt;</span>.log/ACANX-JavaWeb/LOG-INFO.log<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">File</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">filter</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;ch.qos.logback.classic.filter.ThresholdFilter&quot;</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">level</span>&gt;</span>INFO<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">level</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">onMatch</span>&gt;</span>ACCEPT<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">onMatch</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">onMismatch</span>&gt;</span>DENY<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">onMismatch</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">filter</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">rollingPolicy</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">fileNamePattern</span>&gt;</span>.log/ACANX-JavaWeb/server-info-%d&#123;yyyyMMdd&#125;.log.%i<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">fileNamePattern</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">timeBasedFileNamingAndTriggeringPolicy</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP&quot;</span>&gt;</span><br>                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">maxFileSize</span>&gt;</span>5MB<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">maxFileSize</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">timeBasedFileNamingAndTriggeringPolicy</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">maxHistory</span>&gt;</span>2<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">maxHistory</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">rollingPolicy</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">layout</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;ch.qos.logback.classic.PatternLayout&quot;</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Pattern</span>&gt;</span>$&#123;CONSOLE_LOGBACK_PATTERN&#125;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Pattern</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">layout</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">encoder</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;ch.qos.logback.classic.encoder.PatternLayoutEncoder&quot;</span>&gt;</span><br>            <span class=\"hljs-comment\">&lt;!--格式化输出：%d表示日期，%thread表示线程名，%-5level：级别从左显示5个字符宽度%msg：日志消息，%n是换行符--&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">pattern</span>&gt;</span>$&#123;CONSOLE_LOGBACK_PATTERN&#125;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">pattern</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">encoder</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">appender</span>&gt;</span><br><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">appender</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;TRACE_FILE&quot;</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">filter</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;ch.qos.logback.classic.filter.ThresholdFilter&quot;</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">level</span>&gt;</span>TRACE<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">level</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">onMatch</span>&gt;</span>ACCEPT<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">onMatch</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">onMismatch</span>&gt;</span>DENY<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">onMismatch</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">filter</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">File</span>&gt;</span>.log/ACANX-JavaWeb/LOG-TRACE.log<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">File</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">rollingPolicy</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">fileNamePattern</span>&gt;</span>.log/ACANX-JavaWeb/server-TRACE-%d&#123;yyyyMMdd&#125;.log.%i<br>            <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">fileNamePattern</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">timeBasedFileNamingAndTriggeringPolicy</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP&quot;</span>&gt;</span><br>                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">maxFileSize</span>&gt;</span>5MB<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">maxFileSize</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">timeBasedFileNamingAndTriggeringPolicy</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">maxHistory</span>&gt;</span>2<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">maxHistory</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">rollingPolicy</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">layout</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;ch.qos.logback.classic.PatternLayout&quot;</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Pattern</span>&gt;</span>$&#123;CONSOLE_LOGBACK_PATTERN&#125;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Pattern</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">layout</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">appender</span>&gt;</span><br><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">appender</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;FULL_LEVEL_FILE&quot;</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">File</span>&gt;</span>.log/ACANX-JavaWeb/LOG-FULL.log<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">File</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">filter</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;ch.qos.logback.classic.filter.ThresholdFilter&quot;</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">level</span>&gt;</span>TRACE<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">level</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">filter</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">encoder</span>&gt;</span><br>            <span class=\"hljs-comment\">&lt;!--  文件名 [%file] --&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">pattern</span>&gt;</span>$&#123;CONSOLE_LOGBACK_PATTERN&#125;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">pattern</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">encoder</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">rollingPolicy</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">fileNamePattern</span>&gt;</span>.log/ACANX-JavaWeb/LOG-FULL-%d&#123;yyyyMMdd&#125;.log.%i<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">fileNamePattern</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">timeBasedFileNamingAndTriggeringPolicy</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP&quot;</span>&gt;</span><br>                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">maxFileSize</span>&gt;</span>5MB<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">maxFileSize</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">timeBasedFileNamingAndTriggeringPolicy</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">maxHistory</span>&gt;</span>2<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">maxHistory</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">rollingPolicy</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">layout</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;ch.qos.logback.classic.PatternLayout&quot;</span>&gt;</span><br>            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">Pattern</span>&gt;</span>$&#123;CONSOLE_LOGBACK_PATTERN&#125;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">Pattern</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">layout</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">appender</span>&gt;</span><br><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">root</span> <span class=\"hljs-attr\">level</span>=<span class=\"hljs-string\">&quot;TRACE&quot;</span> <span class=\"hljs-attr\">additivity</span>=<span class=\"hljs-string\">&quot;true&quot;</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">appender-ref</span> <span class=\"hljs-attr\">ref</span>=<span class=\"hljs-string\">&quot;CONSOLE&quot;</span>/&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">appender-ref</span> <span class=\"hljs-attr\">ref</span>=<span class=\"hljs-string\">&quot;WARN_FILE&quot;</span>/&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">appender-ref</span> <span class=\"hljs-attr\">ref</span>=<span class=\"hljs-string\">&quot;ERROR_FILE&quot;</span>/&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">appender-ref</span> <span class=\"hljs-attr\">ref</span>=<span class=\"hljs-string\">&quot;INFO_FILE&quot;</span>/&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">appender-ref</span> <span class=\"hljs-attr\">ref</span>=<span class=\"hljs-string\">&quot;TRACE_FILE&quot;</span>/&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">appender-ref</span> <span class=\"hljs-attr\">ref</span>=<span class=\"hljs-string\">&quot;FULL_LEVEL_FILE&quot;</span>/&gt;</span><br>    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">root</span>&gt;</span><br><br>    <span class=\"hljs-comment\">&lt;!-- TRACE, DEBUG, INFO, WARN, ERROR, ALL 和 OFF --&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">logger</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;org&quot;</span> <span class=\"hljs-attr\">level</span>=<span class=\"hljs-string\">&quot;TRACE&quot;</span> <span class=\"hljs-attr\">additivity</span>=<span class=\"hljs-string\">&quot;true&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">logger</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">logger</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;org.springframework.context&quot;</span> <span class=\"hljs-attr\">level</span>=<span class=\"hljs-string\">&quot;TRACE&quot;</span> <span class=\"hljs-attr\">additivity</span>=<span class=\"hljs-string\">&quot;false&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">logger</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">logger</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;org.apache&quot;</span> <span class=\"hljs-attr\">level</span>=<span class=\"hljs-string\">&quot;TRACE&quot;</span>/&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">logger</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;com.alibaba&quot;</span> <span class=\"hljs-attr\">level</span>=<span class=\"hljs-string\">&quot;TRACE&quot;</span>/&gt;</span><br>    <span class=\"hljs-comment\">&lt;!-- 如果这里设置了additivity=true 代码打印信息向上传递,将打印信息传递到root ，并且自己的appender-ref 也会打印，这样就是打印了俩次日志--&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">configuration</span>&gt;</span><br><br></code></pre></td></tr></table></figure>\n\n<h1 id=\"3-Spring-IOC容器的创建\"><a href=\"#3-Spring-IOC容器的创建\" class=\"headerlink\" title=\"3.Spring IOC容器的创建\"></a>3.Spring IOC容器的创建</h1><h2 id=\"3-1-进入FileSystemXmlApplicationContext（AbstractXmlApplicationContext抽象类的具体实现类）\"><a href=\"#3-1-进入FileSystemXmlApplicationContext（AbstractXmlApplicationContext抽象类的具体实现类）\" class=\"headerlink\" title=\"3.1 进入FileSystemXmlApplicationContext（AbstractXmlApplicationContext抽象类的具体实现类）\"></a>3.1 进入FileSystemXmlApplicationContext（AbstractXmlApplicationContext抽象类的具体实现类）</h2><ul>\n<li>代码位置: org.springframework.context.support.FileSystemXmlApplicationContext.java<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-title\">FileSystemXmlApplicationContext</span><span class=\"hljs-params\">(String configLocation)</span> <span class=\"hljs-keyword\">throws</span> BeansException </span>&#123;<br>\t<span class=\"hljs-keyword\">this</span>(<span class=\"hljs-keyword\">new</span> String[] &#123;configLocation&#125;, <span class=\"hljs-keyword\">true</span>, <span class=\"hljs-keyword\">null</span>);<br>&#125;<br><br><br>   <span class=\"hljs-comment\">// 上面的this 来到下面的重载构造方法</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-title\">FileSystemXmlApplicationContext</span><span class=\"hljs-params\">(</span></span><br><span class=\"hljs-function\"><span class=\"hljs-params\">\t\tString[] configLocations, <span class=\"hljs-keyword\">boolean</span> refresh, <span class=\"hljs-meta\">@Nullable</span> ApplicationContext parent)</span></span><br><span class=\"hljs-function\">\t\t<span class=\"hljs-keyword\">throws</span> BeansException </span>&#123;<br><br>\t<span class=\"hljs-keyword\">super</span>(parent);  <span class=\"hljs-comment\">// 初始化父容器AbstractApplicationContext</span><br>\tsetConfigLocations(configLocations); <span class=\"hljs-comment\">// 设置资源文件的位置</span><br>\t<span class=\"hljs-keyword\">if</span> (refresh) &#123;<br>\t\trefresh();<span class=\"hljs-comment\">// 核心方法，具体定义在超类AbstractApplicationContext（抽象类）中，是一个模板方法</span><br>\t&#125;<br>&#125;<br></code></pre></td></tr></table></figure></li>\n</ul>\n<h2 id=\"3-2-初始化父容器AbstractApplicationContext\"><a href=\"#3-2-初始化父容器AbstractApplicationContext\" class=\"headerlink\" title=\"3.2 初始化父容器AbstractApplicationContext\"></a>3.2 初始化父容器AbstractApplicationContext</h2><h3 id=\"3-2-1-AbstractXmlApplicationContext抽象类（FileSystemXmlApplicationContext的父类）\"><a href=\"#3-2-1-AbstractXmlApplicationContext抽象类（FileSystemXmlApplicationContext的父类）\" class=\"headerlink\" title=\"3.2.1 AbstractXmlApplicationContext抽象类（FileSystemXmlApplicationContext的父类）\"></a>3.2.1 AbstractXmlApplicationContext抽象类（FileSystemXmlApplicationContext的父类）</h3><ul>\n<li>代码位置: org.springframework.context.support.AbstractXmlApplicationContext.java<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-title\">AbstractXmlApplicationContext</span><span class=\"hljs-params\">(<span class=\"hljs-meta\">@Nullable</span> ApplicationContext parent)</span> </span>&#123;<br>\t<span class=\"hljs-keyword\">super</span>(parent);<br>&#125;<br><br></code></pre></td></tr></table></figure></li>\n</ul>\n<h3 id=\"3-2-2-AbstractRefreshableConfigApplicationContext抽象类（-AbstractXmlApplicationContext的父类）\"><a href=\"#3-2-2-AbstractRefreshableConfigApplicationContext抽象类（-AbstractXmlApplicationContext的父类）\" class=\"headerlink\" title=\"3.2.2 AbstractRefreshableConfigApplicationContext抽象类（ AbstractXmlApplicationContext的父类）\"></a>3.2.2 AbstractRefreshableConfigApplicationContext抽象类（ AbstractXmlApplicationContext的父类）</h3><ul>\n<li>代码位置:org.springframework.context.support.AbstractRefreshableConfigApplicationContext.java<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-title\">AbstractRefreshableConfigApplicationContext</span><span class=\"hljs-params\">(<span class=\"hljs-meta\">@Nullable</span> ApplicationContext parent)</span> </span>&#123;<br>\t<span class=\"hljs-keyword\">super</span>(parent);<br>&#125;<br><br></code></pre></td></tr></table></figure></li>\n</ul>\n<h3 id=\"3-2-3-AbstractRefreshableApplicationContext抽象类\"><a href=\"#3-2-3-AbstractRefreshableApplicationContext抽象类\" class=\"headerlink\" title=\"3.2.3 AbstractRefreshableApplicationContext抽象类\"></a>3.2.3 AbstractRefreshableApplicationContext抽象类</h3><ul>\n<li> 代码位置:org.springframework.context.support.AbstractRefreshableApplicationContext.java<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-title\">AbstractRefreshableApplicationContext</span><span class=\"hljs-params\">(<span class=\"hljs-meta\">@Nullable</span> ApplicationContext parent)</span> </span>&#123;<br>\t<span class=\"hljs-keyword\">super</span>(parent);<br>&#125;<br><br></code></pre></td></tr></table></figure></li>\n</ul>\n<h3 id=\"3-2-4-AbstractApplicationContext抽象类\"><a href=\"#3-2-4-AbstractApplicationContext抽象类\" class=\"headerlink\" title=\"3.2.4 AbstractApplicationContext抽象类\"></a>3.2.4 AbstractApplicationContext抽象类</h3><ul>\n<li>代码位置:org.springframework.context.support.AbstractApplicationContext.java<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-title\">AbstractApplicationContext</span><span class=\"hljs-params\">(<span class=\"hljs-meta\">@Nullable</span> ApplicationContext parent)</span> </span>&#123;<br>\t<span class=\"hljs-keyword\">this</span>();<br>\tsetParent(parent);<br>&#125;<br><br>   <span class=\"hljs-comment\">//上面对应的this()方法 </span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-title\">AbstractApplicationContext</span><span class=\"hljs-params\">()</span> </span>&#123;<br>\t<span class=\"hljs-keyword\">this</span>.resourcePatternResolver = getResourcePatternResolver();<br>&#125;<br><br>   <span class=\"hljs-comment\">//上面对应的 getResourcePatternResolver()方法</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">protected</span> ResourcePatternResolver <span class=\"hljs-title\">getResourcePatternResolver</span><span class=\"hljs-params\">()</span> </span>&#123;<br>\t<span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> PathMatchingResourcePatternResolver(<span class=\"hljs-keyword\">this</span>);<br>&#125;<br><br>   <span class=\"hljs-comment\">// this()之后的setParent(parent);方法</span><br><span class=\"hljs-meta\">@Override</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setParent</span><span class=\"hljs-params\">(<span class=\"hljs-meta\">@Nullable</span> ApplicationContext parent)</span> </span>&#123;<br>\t<span class=\"hljs-keyword\">this</span>.parent = parent;<br>\t<span class=\"hljs-keyword\">if</span> (parent != <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\tEnvironment parentEnvironment = parent.getEnvironment();<br>\t\t<span class=\"hljs-keyword\">if</span> (parentEnvironment <span class=\"hljs-keyword\">instanceof</span> ConfigurableEnvironment) &#123;<br>\t\t\tgetEnvironment().merge((ConfigurableEnvironment) parentEnvironment);<br>\t\t&#125;<br>\t&#125;<br>&#125;<br><br></code></pre></td></tr></table></figure></li>\n</ul>\n<h2 id=\"3-5-PathMatchingResourcePatternResolver类\"><a href=\"#3-5-PathMatchingResourcePatternResolver类\" class=\"headerlink\" title=\"3.5 PathMatchingResourcePatternResolver类\"></a>3.5 PathMatchingResourcePatternResolver类</h2><ul>\n<li>PathMatchingResourcePatternResolver(this)对应的构造方法</li>\n<li>代码位置:org.springframework.core.io.support.PathMatchingResourcePatternResolver.java<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-title\">PathMatchingResourcePatternResolver</span><span class=\"hljs-params\">(ResourceLoader resourceLoader)</span> </span>&#123;<br>\tAssert.notNull(resourceLoader, <span class=\"hljs-string\">&quot;ResourceLoader must not be null&quot;</span>);<br>\t<span class=\"hljs-keyword\">this</span>.resourceLoader = resourceLoader;<br>&#125;<br><br></code></pre></td></tr></table></figure></li>\n</ul>\n<h1 id=\"4-setConfigLocations-String…-locations-方法\"><a href=\"#4-setConfigLocations-String…-locations-方法\" class=\"headerlink\" title=\"4.setConfigLocations(String… locations) 方法\"></a>4.setConfigLocations(String… locations) 方法</h1><ul>\n<li>设置资源文件的位置</li>\n</ul>\n<h2 id=\"4-1-AbstractRefreshableConfigApplicationContext-setConfigLocations-Nullable-String…-locations-方法\"><a href=\"#4-1-AbstractRefreshableConfigApplicationContext-setConfigLocations-Nullable-String…-locations-方法\" class=\"headerlink\" title=\"4.1 AbstractRefreshableConfigApplicationContext.setConfigLocations(@Nullable String… locations) 方法\"></a>4.1 AbstractRefreshableConfigApplicationContext.setConfigLocations(@Nullable String… locations) 方法</h2><ul>\n<li> 代码位置:org.springframework.context.support.AbstractRefreshableConfigApplicationContext.java<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setConfigLocations</span><span class=\"hljs-params\">(<span class=\"hljs-meta\">@Nullable</span> String... locations)</span> </span>&#123;<br>\t<span class=\"hljs-keyword\">if</span> (locations != <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\tAssert.noNullElements(locations, <span class=\"hljs-string\">&quot;Config locations must not be null&quot;</span>);<br>\t\t<span class=\"hljs-keyword\">this</span>.configLocations = <span class=\"hljs-keyword\">new</span> String[locations.length];<br>\t\t<span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">int</span> i = <span class=\"hljs-number\">0</span>; i &lt; locations.length; i++) &#123;<br>\t\t\t<span class=\"hljs-keyword\">this</span>.configLocations[i] = resolvePath(locations[i]).trim();<br>\t\t&#125;<br>\t&#125;<br>\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t<span class=\"hljs-keyword\">this</span>.configLocations = <span class=\"hljs-keyword\">null</span>;<br>\t&#125;<br>&#125;<br><br><br></code></pre></td></tr></table></figure></li>\n</ul>\n<h1 id=\"5-refresh-方法\"><a href=\"#5-refresh-方法\" class=\"headerlink\" title=\"5. refresh()方法\"></a>5. refresh()方法</h1><ul>\n<li>AbstractApplicationContext抽象类中定义的refresh()模板方法</li>\n<li>定义了需要执行刷新操作的一些步骤，只是一个模板，个性化的逻辑由其子类来具体实现<h2 id=\"5-1-refresh-方法定义\"><a href=\"#5-1-refresh-方法定义\" class=\"headerlink\" title=\"5.1 refresh()方法定义\"></a>5.1 refresh()方法定义</h2></li>\n<li> 代码位置:org.springframework.context.support.AbstractApplicationContext.java<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-meta\">@Override</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">refresh</span><span class=\"hljs-params\">()</span> <span class=\"hljs-keyword\">throws</span> BeansException, IllegalStateException </span>&#123;<br>\t<span class=\"hljs-keyword\">synchronized</span> (<span class=\"hljs-keyword\">this</span>.startupShutdownMonitor) &#123;<br>\t\t<span class=\"hljs-comment\">// Prepare this context for refreshing.</span><br>\t\tprepareRefresh();<br><br>\t\t<span class=\"hljs-comment\">// Tell the subclass to refresh the internal bean factory.</span><br>\t\t<span class=\"hljs-comment\">// 创建BeanFactory</span><br>\t\tConfigurableListableBeanFactory beanFactory = obtainFreshBeanFactory();<br><br>\t\t<span class=\"hljs-comment\">// Prepare the bean factory for use in this context.</span><br>\t\tprepareBeanFactory(beanFactory);<br><br>\t\t<span class=\"hljs-keyword\">try</span> &#123;<br>\t\t\t<span class=\"hljs-comment\">// Allows post-processing of the bean factory in context subclasses.</span><br>\t\t\tpostProcessBeanFactory(beanFactory);<br><br>\t\t\t<span class=\"hljs-comment\">// Invoke factory processors registered as beans in the context.</span><br>\t\t\tinvokeBeanFactoryPostProcessors(beanFactory);<br><br>\t\t\t<span class=\"hljs-comment\">// Register bean processors that intercept bean creation.</span><br>\t\t\tregisterBeanPostProcessors(beanFactory);<br><br>\t\t\t<span class=\"hljs-comment\">// Initialize message source for this context.</span><br>\t\t\tinitMessageSource();<br><br>\t\t\t<span class=\"hljs-comment\">// Initialize event multicaster for this context.</span><br>\t\t\tinitApplicationEventMulticaster();<br><br>\t\t\t<span class=\"hljs-comment\">// Initialize other special beans in specific context subclasses.</span><br>\t\t\tonRefresh();<br><br>\t\t\t<span class=\"hljs-comment\">// Check for listener beans and register them.</span><br>\t\t\tregisterListeners();<br><br>\t\t\t<span class=\"hljs-comment\">// Instantiate all remaining (non-lazy-init) singletons.</span><br>\t\t\t<span class=\"hljs-comment\">// 实例化Bean</span><br>\t\t\tfinishBeanFactoryInitialization(beanFactory);<br><br>\t\t\t<span class=\"hljs-comment\">// Last step: publish corresponding event.</span><br>\t\t\tfinishRefresh();<br>\t\t&#125;<br><br>\t\t<span class=\"hljs-keyword\">catch</span> (BeansException ex) &#123;<br>\t\t\t<span class=\"hljs-keyword\">if</span> (logger.isWarnEnabled()) &#123;<br>\t\t\t\tlogger.warn(<span class=\"hljs-string\">&quot;Exception encountered during context initialization - &quot;</span> +<br>\t\t\t\t\t\t<span class=\"hljs-string\">&quot;cancelling refresh attempt: &quot;</span> + ex);<br>\t\t\t&#125;<br><br>\t\t\t<span class=\"hljs-comment\">// Destroy already created singletons to avoid dangling resources.</span><br>\t\t\tdestroyBeans();<br><br>\t\t\t<span class=\"hljs-comment\">// Reset &#x27;active&#x27; flag.</span><br>\t\t\tcancelRefresh(ex);<br><br>\t\t\t<span class=\"hljs-comment\">// Propagate exception to caller.</span><br>\t\t\t<span class=\"hljs-keyword\">throw</span> ex;<br>\t\t&#125;<br><br>\t\t<span class=\"hljs-keyword\">finally</span> &#123;<br>\t\t\t<span class=\"hljs-comment\">// Reset common introspection caches in Spring&#x27;s core, since we</span><br>\t\t\t<span class=\"hljs-comment\">// might not ever need metadata for singleton beans anymore...</span><br>\t\t\tresetCommonCaches();<br>\t\t&#125;<br>\t&#125;<br>&#125;<br><br></code></pre></td></tr></table></figure></li>\n</ul>\n<h2 id=\"5-2-prepareRefresh-方法\"><a href=\"#5-2-prepareRefresh-方法\" class=\"headerlink\" title=\"5.2 prepareRefresh()方法\"></a>5.2 prepareRefresh()方法</h2><ul>\n<li>正式Refresh()操作前的准备工作</li>\n<li>代码位置:org.springframework.context.support.AbstractApplicationContext.java<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">protected</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">prepareRefresh</span><span class=\"hljs-params\">()</span> </span>&#123;<br>\t<span class=\"hljs-comment\">// Switch to active.</span><br>\t<span class=\"hljs-keyword\">this</span>.startupDate = System.currentTimeMillis();<br>\t<span class=\"hljs-keyword\">this</span>.closed.set(<span class=\"hljs-keyword\">false</span>);<br>\t<span class=\"hljs-keyword\">this</span>.active.set(<span class=\"hljs-keyword\">true</span>);<br><br>\t<span class=\"hljs-keyword\">if</span> (logger.isDebugEnabled()) &#123;<br>\t\t<span class=\"hljs-keyword\">if</span> (logger.isTraceEnabled()) &#123;<br>\t\t\tlogger.trace(<span class=\"hljs-string\">&quot;Refreshing &quot;</span> + <span class=\"hljs-keyword\">this</span>);<br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t\tlogger.debug(<span class=\"hljs-string\">&quot;Refreshing &quot;</span> + getDisplayName());<br>\t\t&#125;<br>\t&#125;<br><br>\t<span class=\"hljs-comment\">// Initialize any placeholder property sources in the context environment.</span><br>\tinitPropertySources();<br><br>\t<span class=\"hljs-comment\">// Validate that all properties marked as required are resolvable:</span><br>\t<span class=\"hljs-comment\">// see ConfigurablePropertyResolver#setRequiredProperties</span><br>\tgetEnvironment().validateRequiredProperties();<br><br>\t<span class=\"hljs-comment\">// Store pre-refresh ApplicationListeners...</span><br>\t<span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">this</span>.earlyApplicationListeners == <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t<span class=\"hljs-keyword\">this</span>.earlyApplicationListeners = <span class=\"hljs-keyword\">new</span> LinkedHashSet&lt;&gt;(<span class=\"hljs-keyword\">this</span>.applicationListeners);<br>\t&#125;<br>\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t<span class=\"hljs-comment\">// Reset local application listeners to pre-refresh state.</span><br>\t\t<span class=\"hljs-keyword\">this</span>.applicationListeners.clear();<br>\t\t<span class=\"hljs-keyword\">this</span>.applicationListeners.addAll(<span class=\"hljs-keyword\">this</span>.earlyApplicationListeners);<br>\t&#125;<br><br>\t<span class=\"hljs-comment\">// Allow for the collection of early ApplicationEvents,</span><br>\t<span class=\"hljs-comment\">// to be published once the multicaster is available...</span><br>\t<span class=\"hljs-keyword\">this</span>.earlyApplicationEvents = <span class=\"hljs-keyword\">new</span> LinkedHashSet&lt;&gt;();<br>&#125;<br><br><span class=\"hljs-comment\">// 上述定义的initPropertySources()方法，具体由子类实现</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">protected</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">initPropertySources</span><span class=\"hljs-params\">()</span> </span>&#123;<br>\t<span class=\"hljs-comment\">// For subclasses: do nothing by default.</span><br>&#125;<br><br></code></pre></td></tr></table></figure></li>\n</ul>\n<h2 id=\"5-3-obtainFreshBeanFactory-方法\"><a href=\"#5-3-obtainFreshBeanFactory-方法\" class=\"headerlink\" title=\"5.3 obtainFreshBeanFactory()方法\"></a>5.3 obtainFreshBeanFactory()方法</h2><ul>\n<li>创建BeanFactory的核心方法</li>\n<li>代码位置:org.springframework.context.support.AbstractApplicationContext.java<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">protected</span> ConfigurableListableBeanFactory <span class=\"hljs-title\">obtainFreshBeanFactory</span><span class=\"hljs-params\">()</span> </span>&#123;<br>\trefreshBeanFactory();<span class=\"hljs-comment\">// 刷新BeanFactory，抽象方法由其子类实现,5.3.1中有说明</span><br>\t<span class=\"hljs-keyword\">return</span> getBeanFactory();<span class=\"hljs-comment\">// 获取BeanFactory，父类的抽象方法继承并由其子类实现</span><br>&#125;<br><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">protected</span> <span class=\"hljs-keyword\">abstract</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">refreshBeanFactory</span><span class=\"hljs-params\">()</span> <span class=\"hljs-keyword\">throws</span> BeansException, IllegalStateException</span>;<br><br><span class=\"hljs-meta\">@Override</span> <span class=\"hljs-comment\">// 该方法在ConfigurableApplicationContext接口中定义</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">abstract</span> ConfigurableListableBeanFactory <span class=\"hljs-title\">getBeanFactory</span><span class=\"hljs-params\">()</span> <span class=\"hljs-keyword\">throws</span> IllegalStateException</span>;<br></code></pre></td></tr></table></figure></li>\n</ul>\n<h3 id=\"5-3-1-refreshBeanFactory-方法的一种实现\"><a href=\"#5-3-1-refreshBeanFactory-方法的一种实现\" class=\"headerlink\" title=\"5.3.1 refreshBeanFactory()方法的一种实现\"></a>5.3.1 refreshBeanFactory()方法的一种实现</h3><ul>\n<li>org.springframework.context.support.AbstractRefreshableApplicationContext中的具体实现如下</li>\n<li>refreshBeanFactory()方法是AbstractApplicationContext中定义的抽象方法</li>\n<li>AbstractRefreshableApplicationContext中的refreshBeanFactory()方法是该抽象方法的一个具体实现</li>\n<li>主要作用：刷新BeanFactory<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">// AbstractRefreshableApplicationContext中refreshBeanFactory()方法的一种实现</span><br><span class=\"hljs-meta\">@Override</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">protected</span> <span class=\"hljs-keyword\">final</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">refreshBeanFactory</span><span class=\"hljs-params\">()</span> <span class=\"hljs-keyword\">throws</span> BeansException </span>&#123;<br>\t<span class=\"hljs-comment\">// 检查上下文中是否已存在BeanFactory</span><br>\t<span class=\"hljs-keyword\">if</span> (hasBeanFactory()) &#123;<br>\t\t<span class=\"hljs-comment\">// 存在BeanFactory时先销毁已存在的BeanFactory</span><br>\t\tdestroyBeans();<span class=\"hljs-comment\">//调用AbstractApplicationContext中的实现</span><br>\t\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t\t* 以下是AbstractApplicationContext中destroyBeans()方法的实现</span><br><span class=\"hljs-comment\">\t\t* protected void destroyBeans() &#123;</span><br><span class=\"hljs-comment\">\t\t*    getBeanFactory().destroySingletons();</span><br><span class=\"hljs-comment\">\t\t* &#125;</span><br><span class=\"hljs-comment\">\t\t*/</span><br>\t\tcloseBeanFactory();<span class=\"hljs-comment\">// 调用本抽象类中的closeBeanFactory()方法，具体代码在下面列出</span><br>\t&#125;<br>\t<span class=\"hljs-keyword\">try</span> &#123;<br>\t\t<span class=\"hljs-comment\">// 创建新的BeanFactory</span><br>\t\t<span class=\"hljs-comment\">// 下面这行代码只会创建一个空的BeanFactory，并未有任何Bean</span><br>\t\tDefaultListableBeanFactory beanFactory = createBeanFactory();<br>\t\tbeanFactory.setSerializationId(getId());<br>\t\tcustomizeBeanFactory(beanFactory);<br>\t\tloadBeanDefinitions(beanFactory);<span class=\"hljs-comment\">// refreshBeanFactory()方法实现的核心</span><br>\t\t<span class=\"hljs-keyword\">synchronized</span> (<span class=\"hljs-keyword\">this</span>.beanFactoryMonitor) &#123;<br>\t\t\t<span class=\"hljs-keyword\">this</span>.beanFactory = beanFactory;<br>\t\t&#125;<br>\t&#125;<br>\t<span class=\"hljs-keyword\">catch</span> (IOException ex) &#123;<br>\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> ApplicationContextException(<span class=\"hljs-string\">&quot;I/O error parsing bean definition source for &quot;</span> + getDisplayName(), ex);<br>\t&#125;<br>&#125;<br><br><span class=\"hljs-comment\">// AbstractRefreshableApplicationContext抽象类中refreshBeanFactory()方法内调用的closeBeanFactory()方法</span><br><span class=\"hljs-meta\">@Override</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">protected</span> <span class=\"hljs-keyword\">final</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">closeBeanFactory</span><span class=\"hljs-params\">()</span> </span>&#123;<br>\t<span class=\"hljs-keyword\">synchronized</span> (<span class=\"hljs-keyword\">this</span>.beanFactoryMonitor) &#123;<br>\t\t<span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">this</span>.beanFactory != <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t\t<span class=\"hljs-comment\">//销毁已存在的BeanFactory</span><br>\t\t\t<span class=\"hljs-keyword\">this</span>.beanFactory.setSerializationId(<span class=\"hljs-keyword\">null</span>);<br>\t\t\t<span class=\"hljs-keyword\">this</span>.beanFactory = <span class=\"hljs-keyword\">null</span>;<br>\t\t&#125;<br>\t&#125;<br>&#125;<br><br><span class=\"hljs-comment\">//AbstractRefreshableApplicationContext抽象类中refreshBeanFactory()方法内调用createBeanFactory()方法</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">protected</span> DefaultListableBeanFactory <span class=\"hljs-title\">createBeanFactory</span><span class=\"hljs-params\">()</span> </span>&#123;<br>\t<span class=\"hljs-comment\">// 调用下面 AbstractApplicationContext中的getInternalParentBeanFactory()方法</span><br>\t<span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> DefaultListableBeanFactory(getInternalParentBeanFactory());<br>&#125;<br></code></pre></td></tr></table></figure></li>\n</ul>\n<h4 id=\"AbstractApplicationContext中的getInternalParentBeanFactory-方法\"><a href=\"#AbstractApplicationContext中的getInternalParentBeanFactory-方法\" class=\"headerlink\" title=\"AbstractApplicationContext中的getInternalParentBeanFactory()方法\"></a>AbstractApplicationContext中的getInternalParentBeanFactory()方法</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-meta\">@Nullable</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">protected</span> BeanFactory <span class=\"hljs-title\">getInternalParentBeanFactory</span><span class=\"hljs-params\">()</span> </span>&#123;<br>\t<span class=\"hljs-keyword\">return</span> (getParent() <span class=\"hljs-keyword\">instanceof</span> ConfigurableApplicationContext ?<br>\t\t\t((ConfigurableApplicationContext) getParent()).getBeanFactory() : getParent());<br>&#125;<br></code></pre></td></tr></table></figure>\n\n<h4 id=\"DefaultListableBeanFactory的构造方法\"><a href=\"#DefaultListableBeanFactory的构造方法\" class=\"headerlink\" title=\"DefaultListableBeanFactory的构造方法\"></a>DefaultListableBeanFactory的构造方法</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-title\">DefaultListableBeanFactory</span><span class=\"hljs-params\">(<span class=\"hljs-meta\">@Nullable</span> BeanFactory parentBeanFactory)</span> </span>&#123;<br>\t<span class=\"hljs-keyword\">super</span>(parentBeanFactory);<span class=\"hljs-comment\">// 调用AbstractAutowireCapableBeanFactory(抽象类)的构造方法</span><br>&#125;<br></code></pre></td></tr></table></figure>\n\n<h4 id=\"DefaultListableBeanFactory父类AbstractAutowireCapableBeanFactory-抽象类-的构造方法\"><a href=\"#DefaultListableBeanFactory父类AbstractAutowireCapableBeanFactory-抽象类-的构造方法\" class=\"headerlink\" title=\"DefaultListableBeanFactory父类AbstractAutowireCapableBeanFactory(抽象类)的构造方法\"></a>DefaultListableBeanFactory父类AbstractAutowireCapableBeanFactory(抽象类)的构造方法</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-title\">AbstractAutowireCapableBeanFactory</span><span class=\"hljs-params\">(<span class=\"hljs-meta\">@Nullable</span> BeanFactory parentBeanFactory)</span> </span>&#123;<br>\t<span class=\"hljs-keyword\">this</span>();<br>\tsetParentBeanFactory(parentBeanFactory);<br>&#125;<br></code></pre></td></tr></table></figure>\n\n\n<h4 id=\"AbstractRefreshableApplicationContext中的customizeBeanFactory-beanFactory-方法\"><a href=\"#AbstractRefreshableApplicationContext中的customizeBeanFactory-beanFactory-方法\" class=\"headerlink\" title=\"AbstractRefreshableApplicationContext中的customizeBeanFactory(beanFactory)方法\"></a>AbstractRefreshableApplicationContext中的customizeBeanFactory(beanFactory)方法</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">protected</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">customizeBeanFactory</span><span class=\"hljs-params\">(DefaultListableBeanFactory beanFactory)</span> </span>&#123;<br>\t<span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">this</span>.allowBeanDefinitionOverriding != <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\tbeanFactory.setAllowBeanDefinitionOverriding(<span class=\"hljs-keyword\">this</span>.allowBeanDefinitionOverriding);<br>\t&#125;<br>\t<span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">this</span>.allowCircularReferences != <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\tbeanFactory.setAllowCircularReferences(<span class=\"hljs-keyword\">this</span>.allowCircularReferences);<br>\t&#125;<br>&#125;<br></code></pre></td></tr></table></figure>\n\n<h4 id=\"AbstractRefreshableApplicationContext中的loadBeanDefinitions-beanFactory-方法\"><a href=\"#AbstractRefreshableApplicationContext中的loadBeanDefinitions-beanFactory-方法\" class=\"headerlink\" title=\"AbstractRefreshableApplicationContext中的loadBeanDefinitions(beanFactory)方法\"></a>AbstractRefreshableApplicationContext中的loadBeanDefinitions(beanFactory)方法</h4><ul>\n<li>是实现refreshBeanFactory()方法的核心</li>\n<li>org.springframework.context.support.AbstractRefreshableApplicationContext中定义的抽象方法<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">protected</span> <span class=\"hljs-keyword\">abstract</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">loadBeanDefinitions</span><span class=\"hljs-params\">(DefaultListableBeanFactory beanFactory)</span></span><br><span class=\"hljs-function\">\t\t<span class=\"hljs-keyword\">throws</span> BeansException, IOException</span>;<br></code></pre></td></tr></table></figure></li>\n<li>该抽象方法的一个具体实现在org.springframework.context.support.AbstractXmlApplicationContext中</li>\n</ul>\n<h4 id=\"org-springframework-context-support-AbstractXmlApplicationContext中的loadBeanDefinitions-DefaultListableBeanFactory-beanFactory-方法\"><a href=\"#org-springframework-context-support-AbstractXmlApplicationContext中的loadBeanDefinitions-DefaultListableBeanFactory-beanFactory-方法\" class=\"headerlink\" title=\"org.springframework.context.support.AbstractXmlApplicationContext中的loadBeanDefinitions(DefaultListableBeanFactory beanFactory)方法\"></a>org.springframework.context.support.AbstractXmlApplicationContext中的loadBeanDefinitions(DefaultListableBeanFactory beanFactory)方法</h4><ul>\n<li>org.springframework.context.support.AbstractRefreshableApplicationContext中定义的抽象方法loadBeanDefinitions(DefaultListableBeanFactory beanFactory)的一个实现<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-meta\">@Override</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">protected</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">loadBeanDefinitions</span><span class=\"hljs-params\">(DefaultListableBeanFactory beanFactory)</span> <span class=\"hljs-keyword\">throws</span> BeansException, IOException </span>&#123;<br>\t<span class=\"hljs-comment\">// Create a new XmlBeanDefinitionReader for the given BeanFactory.</span><br>\t<span class=\"hljs-comment\">// 通过上一步创建的空BeanFactory来创建新的XmlBeanDefinitionReader对象</span><br>\t<span class=\"hljs-comment\">// XmlBeanDefinitionReader用于解析xml文件中定义的bean</span><br>\tXmlBeanDefinitionReader beanDefinitionReader = <span class=\"hljs-keyword\">new</span> XmlBeanDefinitionReader(beanFactory); <span class=\"hljs-comment\">//</span><br><br>\t<span class=\"hljs-comment\">// Configure the bean definition reader with this context&#x27;s</span><br>\t<span class=\"hljs-comment\">// resource loading environment.</span><br>\tbeanDefinitionReader.setEnvironment(<span class=\"hljs-keyword\">this</span>.getEnvironment());<br>\tbeanDefinitionReader.setResourceLoader(<span class=\"hljs-keyword\">this</span>);<br>\tbeanDefinitionReader.setEntityResolver(<span class=\"hljs-keyword\">new</span> ResourceEntityResolver(<span class=\"hljs-keyword\">this</span>));<br><br>\t<span class=\"hljs-comment\">// Allow a subclass to provide custom initialization of the reader,</span><br>\t<span class=\"hljs-comment\">// then proceed with actually loading the bean definitions.</span><br>\tinitBeanDefinitionReader(beanDefinitionReader);<br>\tloadBeanDefinitions(beanDefinitionReader); <span class=\"hljs-comment\">//这是一个重载方法，入参是上面生成的beanDefinitionReader</span><br>&#125;<br></code></pre></td></tr></table></figure></li>\n</ul>\n<h4 id=\"new-XmlBeanDefinitionReader-beanFactory\"><a href=\"#new-XmlBeanDefinitionReader-beanFactory\" class=\"headerlink\" title=\"new XmlBeanDefinitionReader(beanFactory)\"></a>new XmlBeanDefinitionReader(beanFactory)</h4><ul>\n<li>XmlBeanDefinitionReader(beanFactory)构造方法调用其父类AbstractBeanDefinitionReader的构造方法，具体如下<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">protected</span> <span class=\"hljs-title\">AbstractBeanDefinitionReader</span><span class=\"hljs-params\">(BeanDefinitionRegistry registry)</span> </span>&#123;<br>\tAssert.notNull(registry, <span class=\"hljs-string\">&quot;BeanDefinitionRegistry must not be null&quot;</span>);<br>\t<span class=\"hljs-keyword\">this</span>.registry = registry;<br><br>\t<span class=\"hljs-comment\">// Determine ResourceLoader to use.</span><br>\t<span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">this</span>.registry <span class=\"hljs-keyword\">instanceof</span> ResourceLoader) &#123;<br>\t\t<span class=\"hljs-keyword\">this</span>.resourceLoader = (ResourceLoader) <span class=\"hljs-keyword\">this</span>.registry;<br>\t&#125;<br>\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t<span class=\"hljs-keyword\">this</span>.resourceLoader = <span class=\"hljs-keyword\">new</span> PathMatchingResourcePatternResolver();<br>\t&#125;<br><br>\t<span class=\"hljs-comment\">// Inherit Environment if possible</span><br>\t<span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">this</span>.registry <span class=\"hljs-keyword\">instanceof</span> EnvironmentCapable) &#123;<br>\t\t<span class=\"hljs-keyword\">this</span>.environment = ((EnvironmentCapable) <span class=\"hljs-keyword\">this</span>.registry).getEnvironment();<br>\t&#125;<br>\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t<span class=\"hljs-keyword\">this</span>.environment = <span class=\"hljs-keyword\">new</span> StandardEnvironment();<br>\t&#125;<br>&#125;<br></code></pre></td></tr></table></figure></li>\n</ul>\n<h4 id=\"AbstractXmlApplicationContext抽象类中的initBeanDefinitionReader-beanDefinitionReader-方法\"><a href=\"#AbstractXmlApplicationContext抽象类中的initBeanDefinitionReader-beanDefinitionReader-方法\" class=\"headerlink\" title=\"AbstractXmlApplicationContext抽象类中的initBeanDefinitionReader(beanDefinitionReader)方法\"></a>AbstractXmlApplicationContext抽象类中的initBeanDefinitionReader(beanDefinitionReader)方法</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">protected</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">initBeanDefinitionReader</span><span class=\"hljs-params\">(XmlBeanDefinitionReader reader)</span> </span>&#123;<br>\treader.setValidating(<span class=\"hljs-keyword\">this</span>.validating);<br>&#125;<br></code></pre></td></tr></table></figure>\n\n<h4 id=\"AbstractXmlApplicationContext抽象类中的loadBeanDefinitions-XmlBeanDefinitionReader-reader-方法\"><a href=\"#AbstractXmlApplicationContext抽象类中的loadBeanDefinitions-XmlBeanDefinitionReader-reader-方法\" class=\"headerlink\" title=\"AbstractXmlApplicationContext抽象类中的loadBeanDefinitions(XmlBeanDefinitionReader reader)方法\"></a>AbstractXmlApplicationContext抽象类中的loadBeanDefinitions(XmlBeanDefinitionReader reader)方法</h4><ul>\n<li>主要功能是解析资源文件的位置</li>\n<li>调用XmlBeanDefinitionReader对象的loadBeanDefinitions方法解析bean的定义<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">protected</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">loadBeanDefinitions</span><span class=\"hljs-params\">(XmlBeanDefinitionReader reader)</span> <span class=\"hljs-keyword\">throws</span> BeansException, IOException </span>&#123;<br>\tResource[] configResources = getConfigResources();<br>\t<span class=\"hljs-keyword\">if</span> (configResources != <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\treader.loadBeanDefinitions(configResources); <span class=\"hljs-comment\">//具体调用AbstractBeanDefinitionReader中实现的loadBeanDefinitions(Resource... resources)方法</span><br>\t&#125;<br>\tString[] configLocations = getConfigLocations();<br>\t<span class=\"hljs-keyword\">if</span> (configLocations != <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\treader.loadBeanDefinitions(configLocations);<span class=\"hljs-comment\">//具体调用AbstractBeanDefinitionReader中实现的loadBeanDefinitions(String... locations)</span><br>\t&#125;<br>&#125;<br></code></pre></td></tr></table></figure></li>\n</ul>\n<h5 id=\"reader-loadBeanDefinitions-configResources-方法与reader-loadBeanDefinitions-configLocations-方法\"><a href=\"#reader-loadBeanDefinitions-configResources-方法与reader-loadBeanDefinitions-configLocations-方法\" class=\"headerlink\" title=\"reader.loadBeanDefinitions(configResources)方法与reader.loadBeanDefinitions(configLocations)方法\"></a>reader.loadBeanDefinitions(configResources)方法与reader.loadBeanDefinitions(configLocations)方法</h5><ul>\n<li>XmlBeanDefinitionReader对象的loadBeanDefinitions方法用于解析bean的定义</li>\n<li>reader是XmlBeanDefinitionReader类型的对象，loadBeanDefinitions方法定义在BeanDefinitionReader接口中，</li>\n<li>loadBeanDefinitions方法具体是在AbstractBeanDefinitionReader抽象类中实现的，具体代码如下：<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-meta\">@Override</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">loadBeanDefinitions</span><span class=\"hljs-params\">(Resource... resources)</span> <span class=\"hljs-keyword\">throws</span> BeanDefinitionStoreException </span>&#123;<br>\tAssert.notNull(resources, <span class=\"hljs-string\">&quot;Resource array must not be null&quot;</span>);<br>\t<span class=\"hljs-keyword\">int</span> count = <span class=\"hljs-number\">0</span>;<br>\t<span class=\"hljs-comment\">// 遍历每一个资源并依次调用重载方法loadBeanDefinitions(Resource resource)，定义在XmlBeanDefinitionReader中，具体实现在XmlBeanDefinitionReader中</span><br>\t<span class=\"hljs-keyword\">for</span> (Resource resource : resources) &#123;<br>\t\tcount += loadBeanDefinitions(resource);<span class=\"hljs-comment\">//</span><br>\t&#125;<br>\t<span class=\"hljs-keyword\">return</span> count;<br>&#125;<br><br><span class=\"hljs-meta\">@Override</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">loadBeanDefinitions</span><span class=\"hljs-params\">(String... locations)</span> <span class=\"hljs-keyword\">throws</span> BeanDefinitionStoreException </span>&#123;<br>\tAssert.notNull(locations, <span class=\"hljs-string\">&quot;Location array must not be null&quot;</span>);<br>\t<span class=\"hljs-keyword\">int</span> count = <span class=\"hljs-number\">0</span>;<br>\t<span class=\"hljs-comment\">//遍历资源数组，调用重载方法loadBeanDefinitions(String location)</span><br>\t<span class=\"hljs-keyword\">for</span> (String location : locations) &#123;<br>\t\tcount += loadBeanDefinitions(location);<span class=\"hljs-comment\">//</span><br>\t&#125;<br>\t<span class=\"hljs-keyword\">return</span> count;<br>&#125;<br><br></code></pre></td></tr></table></figure></li>\n</ul>\n<h4 id=\"count-loadBeanDefinitions-resource-中的loadBeanDefinitions-resource-方法\"><a href=\"#count-loadBeanDefinitions-resource-中的loadBeanDefinitions-resource-方法\" class=\"headerlink\" title=\"count += loadBeanDefinitions(resource)中的loadBeanDefinitions(resource)方法\"></a>count += loadBeanDefinitions(resource)中的loadBeanDefinitions(resource)方法</h4><ul>\n<li>loadBeanDefinitions(resource)方法在BeanDefinitionReader接口中定义，具体实现是在XmlBeanDefinitionReader中</li>\n<li>XmlBeanDefinitionReader中的实现代码如下：<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-meta\">@Override</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">loadBeanDefinitions</span><span class=\"hljs-params\">(Resource resource)</span> <span class=\"hljs-keyword\">throws</span> BeanDefinitionStoreException </span>&#123;<br>\t<span class=\"hljs-keyword\">return</span> loadBeanDefinitions(<span class=\"hljs-keyword\">new</span> EncodedResource(resource));<br>&#125;<br></code></pre></td></tr></table></figure></li>\n<li>可以看到，上面的方法又调用了loadBeanDefinitions(new EncodedResource(resource))方法，该方法在BeanDefinitionReader接口中定义，具体实现在XmlBeanDefinitionReader中,具体实现，详细代码如下：<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">loadBeanDefinitions</span><span class=\"hljs-params\">(EncodedResource encodedResource)</span> <span class=\"hljs-keyword\">throws</span> BeanDefinitionStoreException </span>&#123;<br>\tAssert.notNull(encodedResource, <span class=\"hljs-string\">&quot;EncodedResource must not be null&quot;</span>);<br>\t<span class=\"hljs-keyword\">if</span> (logger.isTraceEnabled()) &#123;<br>\t\tlogger.trace(<span class=\"hljs-string\">&quot;Loading XML bean definitions from &quot;</span> + encodedResource);<br>\t&#125;<br><br>\tSet&lt;EncodedResource&gt; currentResources = <span class=\"hljs-keyword\">this</span>.resourcesCurrentlyBeingLoaded.get();<br>\t<span class=\"hljs-keyword\">if</span> (currentResources == <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\tcurrentResources = <span class=\"hljs-keyword\">new</span> HashSet&lt;&gt;(<span class=\"hljs-number\">4</span>);<br>\t\t<span class=\"hljs-keyword\">this</span>.resourcesCurrentlyBeingLoaded.set(currentResources);<br>\t&#125;<br>\t<span class=\"hljs-keyword\">if</span> (!currentResources.add(encodedResource)) &#123;<br>\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> BeanDefinitionStoreException(<span class=\"hljs-string\">&quot;Detected cyclic loading of &quot;</span> + encodedResource + <span class=\"hljs-string\">&quot; - check your import definitions!&quot;</span>);<br>\t&#125;<br>\t<span class=\"hljs-keyword\">try</span> &#123;<br>\t\t<span class=\"hljs-comment\">//以流的形式读取资源文件</span><br>\t\tInputStream inputStream = encodedResource.getResource().getInputStream();<br>\t\t<span class=\"hljs-keyword\">try</span> &#123;<br>\t\t\tInputSource inputSource = <span class=\"hljs-keyword\">new</span> InputSource(inputStream);<br>\t\t\t<span class=\"hljs-keyword\">if</span> (encodedResource.getEncoding() != <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t\t\tinputSource.setEncoding(encodedResource.getEncoding());<br>\t\t\t&#125;<br>\t\t\t<span class=\"hljs-comment\">// 调用doLoadBeanDefinitions解析载入文件中的bean定义</span><br>\t\t\t<span class=\"hljs-keyword\">return</span> doLoadBeanDefinitions(inputSource, encodedResource.getResource());<br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">finally</span> &#123;<br>\t\t\tinputStream.close();<br>\t\t&#125;<br>\t&#125;<br>\t<span class=\"hljs-keyword\">catch</span> (IOException ex) &#123;<br>\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> BeanDefinitionStoreException(<br>\t\t\t\t<span class=\"hljs-string\">&quot;IOException parsing XML document from &quot;</span> + encodedResource.getResource(), ex);<br>\t&#125;<br>\t<span class=\"hljs-keyword\">finally</span> &#123;<br>\t\tcurrentResources.remove(encodedResource);<br>\t\t<span class=\"hljs-keyword\">if</span> (currentResources.isEmpty()) &#123;<br>\t\t\t<span class=\"hljs-keyword\">this</span>.resourcesCurrentlyBeingLoaded.remove();<br>\t\t&#125;<br>\t&#125;<br>&#125;<br></code></pre></td></tr></table></figure></li>\n</ul>\n<h4 id=\"count-loadBeanDefinitions-location-中的loadBeanDefinitions-location-方法\"><a href=\"#count-loadBeanDefinitions-location-中的loadBeanDefinitions-location-方法\" class=\"headerlink\" title=\"count += loadBeanDefinitions(location)中的loadBeanDefinitions(location)方法\"></a>count += loadBeanDefinitions(location)中的loadBeanDefinitions(location)方法</h4><ul>\n<li>loadBeanDefinitions(location)方法的具体实现AbstractBeanDefinitionReader中；<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-meta\">@Override</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">loadBeanDefinitions</span><span class=\"hljs-params\">(String location)</span> <span class=\"hljs-keyword\">throws</span> BeanDefinitionStoreException </span>&#123;<br>\t<span class=\"hljs-keyword\">return</span> loadBeanDefinitions(location, <span class=\"hljs-keyword\">null</span>);<br>&#125;<br><br></code></pre></td></tr></table></figure></li>\n<li>解析资源文件的路径，得到Resource[]资源数组</li>\n<li>上面AbstractBeanDefinitionReader中的loadBeanDefinitions(String location)方法又调用了同类里面的一个重载方法loadBeanDefinitions(String location, @Nullable Set<Resource> actualResources) 具体实现如下：<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">loadBeanDefinitions</span><span class=\"hljs-params\">(String location, <span class=\"hljs-meta\">@Nullable</span> Set&lt;Resource&gt; actualResources)</span> <span class=\"hljs-keyword\">throws</span> BeanDefinitionStoreException </span>&#123;<br>\t\tResourceLoader resourceLoader = getResourceLoader();<br>\t\t<span class=\"hljs-keyword\">if</span> (resourceLoader == <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> BeanDefinitionStoreException(<br>\t\t\t\t\t<span class=\"hljs-string\">&quot;Cannot load bean definitions from location [&quot;</span> + location + <span class=\"hljs-string\">&quot;]: no ResourceLoader available&quot;</span>);<br>\t\t&#125;<br><br>\t\t<span class=\"hljs-keyword\">if</span> (resourceLoader <span class=\"hljs-keyword\">instanceof</span> ResourcePatternResolver) &#123;<br>\t\t\t<span class=\"hljs-comment\">// Resource pattern matching available.</span><br>\t\t\t<span class=\"hljs-keyword\">try</span> &#123;<br>\t\t\t\tResource[] resources = ((ResourcePatternResolver) resourceLoader).getResources(location);<br>\t\t\t\t<span class=\"hljs-comment\">//下一行的核心逻辑  调用上面提到的重载方法loadBeanDefinitions(Resource resource)</span><br>\t\t\t\t<span class=\"hljs-keyword\">int</span> count = loadBeanDefinitions(resources);<br>\t\t\t\t<span class=\"hljs-keyword\">if</span> (actualResources != <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t\t\t\tCollections.addAll(actualResources, resources);<br>\t\t\t\t&#125;<br>\t\t\t\t<span class=\"hljs-keyword\">if</span> (logger.isTraceEnabled()) &#123;<br>\t\t\t\t\tlogger.trace(<span class=\"hljs-string\">&quot;Loaded &quot;</span> + count + <span class=\"hljs-string\">&quot; bean definitions from location pattern [&quot;</span> + location + <span class=\"hljs-string\">&quot;]&quot;</span>);<br>\t\t\t\t&#125;<br>\t\t\t\t<span class=\"hljs-keyword\">return</span> count;<br>\t\t\t&#125;<br>\t\t\t<span class=\"hljs-keyword\">catch</span> (IOException ex) &#123;<br>\t\t\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> BeanDefinitionStoreException(<br>\t\t\t\t\t\t<span class=\"hljs-string\">&quot;Could not resolve bean definition resource pattern [&quot;</span> + location + <span class=\"hljs-string\">&quot;]&quot;</span>, ex);<br>\t\t\t&#125;<br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t\t<span class=\"hljs-comment\">// Can only load single resources by absolute URL.</span><br>\t\t\tResource resource = resourceLoader.getResource(location);<br>\t\t\t<span class=\"hljs-keyword\">int</span> count = loadBeanDefinitions(resource);<br>\t\t\t<span class=\"hljs-keyword\">if</span> (actualResources != <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t\t\tactualResources.add(resource);<br>\t\t\t&#125;<br>\t\t\t<span class=\"hljs-keyword\">if</span> (logger.isTraceEnabled()) &#123;<br>\t\t\t\tlogger.trace(<span class=\"hljs-string\">&quot;Loaded &quot;</span> + count + <span class=\"hljs-string\">&quot; bean definitions from location [&quot;</span> + location + <span class=\"hljs-string\">&quot;]&quot;</span>);<br>\t\t\t&#125;<br>\t\t\t<span class=\"hljs-keyword\">return</span> count;<br>\t\t&#125;<br>\t&#125;<br></code></pre></td></tr></table></figure></li>\n</ul>\n<h4 id=\"XmlBeanDefinitionReader类中的doLoadBeanDefinitions-InputSource-inputSource-Resource-resource-方法\"><a href=\"#XmlBeanDefinitionReader类中的doLoadBeanDefinitions-InputSource-inputSource-Resource-resource-方法\" class=\"headerlink\" title=\"XmlBeanDefinitionReader类中的doLoadBeanDefinitions(InputSource inputSource, Resource resource)方法\"></a>XmlBeanDefinitionReader类中的doLoadBeanDefinitions(InputSource inputSource, Resource resource)方法</h4><ul>\n<li>该方法是载入定义bean的核心方法</li>\n<li>代码位置：org.springframework.beans.factory.xml.XmlBeanDefinitionReader<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">protected</span> <span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">doLoadBeanDefinitions</span><span class=\"hljs-params\">(InputSource inputSource, Resource resource)</span></span><br><span class=\"hljs-function\">\t\t<span class=\"hljs-keyword\">throws</span> BeanDefinitionStoreException </span>&#123;<br><br>\t<span class=\"hljs-keyword\">try</span> &#123;<br>\t\t<span class=\"hljs-comment\">// 解析XML文档</span><br>\t\tDocument doc = doLoadDocument(inputSource, resource);<br>\t\t<span class=\"hljs-comment\">// 下面一行代码 注册Bean</span><br>\t\t<span class=\"hljs-keyword\">int</span> count = registerBeanDefinitions(doc, resource);<br>\t\t<span class=\"hljs-keyword\">if</span> (logger.isDebugEnabled()) &#123;<br>\t\t\tlogger.debug(<span class=\"hljs-string\">&quot;Loaded &quot;</span> + count + <span class=\"hljs-string\">&quot; bean definitions from &quot;</span> + resource);<br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">return</span> count;<br>\t&#125;<br>\t<span class=\"hljs-keyword\">catch</span> (BeanDefinitionStoreException ex) &#123;<br>\t\t<span class=\"hljs-keyword\">throw</span> ex;<br>\t&#125;<br>\t<span class=\"hljs-keyword\">catch</span> (SAXParseException ex) &#123;<br>\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> XmlBeanDefinitionStoreException(resource.getDescription(),<br>\t\t\t\t<span class=\"hljs-string\">&quot;Line &quot;</span> + ex.getLineNumber() + <span class=\"hljs-string\">&quot; in XML document from &quot;</span> + resource + <span class=\"hljs-string\">&quot; is invalid&quot;</span>, ex);<br>\t&#125;<br>\t<span class=\"hljs-keyword\">catch</span> (SAXException ex) &#123;<br>\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> XmlBeanDefinitionStoreException(resource.getDescription(),<br>\t\t\t\t<span class=\"hljs-string\">&quot;XML document from &quot;</span> + resource + <span class=\"hljs-string\">&quot; is invalid&quot;</span>, ex);<br>\t&#125;<br>\t<span class=\"hljs-keyword\">catch</span> (ParserConfigurationException ex) &#123;<br>\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> BeanDefinitionStoreException(resource.getDescription(),<br>\t\t\t\t<span class=\"hljs-string\">&quot;Parser configuration exception parsing XML from &quot;</span> + resource, ex);<br>\t&#125;<br>\t<span class=\"hljs-keyword\">catch</span> (IOException ex) &#123;<br>\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> BeanDefinitionStoreException(resource.getDescription(),<br>\t\t\t\t<span class=\"hljs-string\">&quot;IOException parsing XML document from &quot;</span> + resource, ex);<br>\t&#125;<br>\t<span class=\"hljs-keyword\">catch</span> (Throwable ex) &#123;<br>\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> BeanDefinitionStoreException(resource.getDescription(),<br>\t\t\t\t<span class=\"hljs-string\">&quot;Unexpected exception parsing XML document from &quot;</span> + resource, ex);<br>\t&#125;<br>&#125;<br><br><span class=\"hljs-comment\">// 注册Bean的方法</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">registerBeanDefinitions</span><span class=\"hljs-params\">(Document doc, Resource resource)</span> <span class=\"hljs-keyword\">throws</span> BeanDefinitionStoreException </span>&#123;<br>\tBeanDefinitionDocumentReader documentReader = createBeanDefinitionDocumentReader();<br>\t<span class=\"hljs-keyword\">int</span> countBefore = getRegistry().getBeanDefinitionCount();<br>\t<span class=\"hljs-comment\">// 注册bean的核心逻辑</span><br>\tdocumentReader.registerBeanDefinitions(doc, createReaderContext(resource));<br>\t<span class=\"hljs-keyword\">return</span> getRegistry().getBeanDefinitionCount() - countBefore;<br>&#125;<br></code></pre></td></tr></table></figure></li>\n</ul>\n<h4 id=\"DefaultBeanDefinitionDocumentReader-registerBeanDefinitions-Document-doc-XmlReaderContext-readerContext\"><a href=\"#DefaultBeanDefinitionDocumentReader-registerBeanDefinitions-Document-doc-XmlReaderContext-readerContext\" class=\"headerlink\" title=\"DefaultBeanDefinitionDocumentReader.registerBeanDefinitions(Document doc, XmlReaderContext readerContext)\"></a>DefaultBeanDefinitionDocumentReader.registerBeanDefinitions(Document doc, XmlReaderContext readerContext)</h4><ul>\n<li>功能：</li>\n<li>代码位置：org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-meta\">@Override</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">registerBeanDefinitions</span><span class=\"hljs-params\">(Document doc, XmlReaderContext readerContext)</span> </span>&#123;<br>\t<span class=\"hljs-keyword\">this</span>.readerContext = readerContext;<br>\t<span class=\"hljs-comment\">// 核心逻辑</span><br>\tdoRegisterBeanDefinitions(doc.getDocumentElement());<br>&#125;<br><br><span class=\"hljs-comment\">// registerBeanDefinitions方法中调用的doRegisterBeanDefinitions方法</span><br><span class=\"hljs-meta\">@SuppressWarnings(&quot;deprecation&quot;)</span>  <span class=\"hljs-comment\">// for Environment.acceptsProfiles(String...)</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">protected</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">doRegisterBeanDefinitions</span><span class=\"hljs-params\">(Element root)</span> </span>&#123;<br>\t<span class=\"hljs-comment\">// Any nested &lt;beans&gt; elements will cause recursion in this method. In</span><br>\t<span class=\"hljs-comment\">// order to propagate and preserve &lt;beans&gt; default-* attributes correctly,</span><br>\t<span class=\"hljs-comment\">// keep track of the current (parent) delegate, which may be null. Create</span><br>\t<span class=\"hljs-comment\">// the new (child) delegate with a reference to the parent for fallback purposes,</span><br>\t<span class=\"hljs-comment\">// then ultimately reset this.delegate back to its original (parent) reference.</span><br>\t<span class=\"hljs-comment\">// this behavior emulates a stack of delegates without actually necessitating one.</span><br>\tBeanDefinitionParserDelegate parent = <span class=\"hljs-keyword\">this</span>.delegate;<br>\t<span class=\"hljs-keyword\">this</span>.delegate = createDelegate(getReaderContext(), root, parent);<br><br>\t<span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">this</span>.delegate.isDefaultNamespace(root)) &#123;<br>\t\tString profileSpec = root.getAttribute(PROFILE_ATTRIBUTE);<br>\t\t<span class=\"hljs-keyword\">if</span> (StringUtils.hasText(profileSpec)) &#123;<br>\t\t\tString[] specifiedProfiles = StringUtils.tokenizeToStringArray(<br>\t\t\t\t\tprofileSpec, BeanDefinitionParserDelegate.MULTI_VALUE_ATTRIBUTE_DELIMITERS);<br>\t\t\t<span class=\"hljs-comment\">// We cannot use Profiles.of(...) since profile expressions are not supported</span><br>\t\t\t<span class=\"hljs-comment\">// in XML config. See SPR-12458 for details.</span><br>\t\t\t<span class=\"hljs-keyword\">if</span> (!getReaderContext().getEnvironment().acceptsProfiles(specifiedProfiles)) &#123;<br>\t\t\t\t<span class=\"hljs-keyword\">if</span> (logger.isDebugEnabled()) &#123;<br>\t\t\t\t\tlogger.debug(<span class=\"hljs-string\">&quot;Skipped XML bean definition file due to specified profiles [&quot;</span> + profileSpec +<br>\t\t\t\t\t\t\t<span class=\"hljs-string\">&quot;] not matching: &quot;</span> + getReaderContext().getResource());<br>\t\t\t\t&#125;<br>\t\t\t\t<span class=\"hljs-keyword\">return</span>;<br>\t\t\t&#125;<br>\t\t&#125;<br>\t&#125;<br><br>\tpreProcessXml(root);<br>\t<span class=\"hljs-comment\">// 核心逻辑</span><br>\tparseBeanDefinitions(root, <span class=\"hljs-keyword\">this</span>.delegate);<br>\tpostProcessXml(root);<br><br>\t<span class=\"hljs-keyword\">this</span>.delegate = parent;<br>&#125;<br><br><span class=\"hljs-comment\">// 上面方法中调用的parseBeanDefinitions(root, this.delegate)对应的方法实现</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">protected</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">parseBeanDefinitions</span><span class=\"hljs-params\">(Element root, BeanDefinitionParserDelegate delegate)</span> </span>&#123;<br>\t<span class=\"hljs-keyword\">if</span> (delegate.isDefaultNamespace(root)) &#123;<br>\t\tNodeList nl = root.getChildNodes();<br>\t\t<span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">int</span> i = <span class=\"hljs-number\">0</span>; i &lt; nl.getLength(); i++) &#123;<br>\t\t\tNode node = nl.item(i);<br>\t\t\t<span class=\"hljs-keyword\">if</span> (node <span class=\"hljs-keyword\">instanceof</span> Element) &#123;<br>\t\t\t\tElement ele = (Element) node;<br>\t\t\t\t<span class=\"hljs-keyword\">if</span> (delegate.isDefaultNamespace(ele)) &#123;<br>\t\t\t\t\t<span class=\"hljs-comment\">// 本方法的核心逻辑</span><br>\t\t\t\t\tparseDefaultElement(ele, delegate);<br>\t\t\t\t&#125;<br>\t\t\t\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t\t\t\tdelegate.parseCustomElement(ele);<br>\t\t\t\t&#125;<br>\t\t\t&#125;<br>\t\t&#125;<br>\t&#125;<br>\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\tdelegate.parseCustomElement(root);<br>\t&#125;<br>&#125;<br><br><br><span class=\"hljs-comment\">// 上述方法调用的parseDefaultElement(ele, delegate);的具体实现</span><br><span class=\"hljs-comment\">// 根据bean配置的不同，进入不同分支</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">parseDefaultElement</span><span class=\"hljs-params\">(Element ele, BeanDefinitionParserDelegate delegate)</span> </span>&#123;<br>\t<span class=\"hljs-keyword\">if</span> (delegate.nodeNameEquals(ele, IMPORT_ELEMENT)) &#123;<br>\t\timportBeanDefinitionResource(ele);<br>\t&#125;<br>\t<span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (delegate.nodeNameEquals(ele, ALIAS_ELEMENT)) &#123;<br>\t\tprocessAliasRegistration(ele);<br>\t&#125;<br>\t<span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (delegate.nodeNameEquals(ele, BEAN_ELEMENT)) &#123;<br>\t\t<span class=\"hljs-comment\">// 本文示例会进入该方法</span><br>\t\tprocessBeanDefinition(ele, delegate);<br>\t&#125;<br>\t<span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (delegate.nodeNameEquals(ele, NESTED_BEANS_ELEMENT)) &#123;<br>\t\t<span class=\"hljs-comment\">// recurse</span><br>\t\tdoRegisterBeanDefinitions(ele);<br>\t&#125;<br>&#125;<br><br><span class=\"hljs-comment\">// 上述方法最后进入processBeanDefinition(ele, delegate)后的处理过程：</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">protected</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">processBeanDefinition</span><span class=\"hljs-params\">(Element ele, BeanDefinitionParserDelegate delegate)</span> </span>&#123;<br>\tBeanDefinitionHolder bdHolder = delegate.parseBeanDefinitionElement(ele);<br>\t<span class=\"hljs-keyword\">if</span> (bdHolder != <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\tbdHolder = delegate.decorateBeanDefinitionIfRequired(ele, bdHolder);<br>\t\t<span class=\"hljs-keyword\">try</span> &#123;<br>\t\t\t<span class=\"hljs-comment\">// Register the final decorated instance.</span><br>\t\t\t<span class=\"hljs-comment\">// 注册Bean的关键代码</span><br>\t\t\tBeanDefinitionReaderUtils.registerBeanDefinition(bdHolder, getReaderContext().getRegistry());<br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">catch</span> (BeanDefinitionStoreException ex) &#123;<br>\t\t\tgetReaderContext().error(<span class=\"hljs-string\">&quot;Failed to register bean definition with name &#x27;&quot;</span> +<br>\t\t\t\t\tbdHolder.getBeanName() + <span class=\"hljs-string\">&quot;&#x27;&quot;</span>, ele, ex);<br>\t\t&#125;<br>\t\t<span class=\"hljs-comment\">// Send registration event.</span><br>\t\tgetReaderContext().fireComponentRegistered(<span class=\"hljs-keyword\">new</span> BeanComponentDefinition(bdHolder));<br>\t&#125;<br>&#125;<br></code></pre></td></tr></table></figure></li>\n</ul>\n<h4 id=\"BeanDefinitionReaderUtils的registerBeanDefinition-bdHolder-getReaderContext-getRegistry-方法\"><a href=\"#BeanDefinitionReaderUtils的registerBeanDefinition-bdHolder-getReaderContext-getRegistry-方法\" class=\"headerlink\" title=\"BeanDefinitionReaderUtils的registerBeanDefinition(bdHolder, getReaderContext().getRegistry())方法\"></a>BeanDefinitionReaderUtils的registerBeanDefinition(bdHolder, getReaderContext().getRegistry())方法</h4><ul>\n<li>主要作用：</li>\n<li>代码位置：org.springframework.beans.factory.support.BeanDefinitionReaderUtils<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">registerBeanDefinition</span><span class=\"hljs-params\">(</span></span><br><span class=\"hljs-function\"><span class=\"hljs-params\">\t\tBeanDefinitionHolder definitionHolder, BeanDefinitionRegistry registry)</span></span><br><span class=\"hljs-function\">\t\t<span class=\"hljs-keyword\">throws</span> BeanDefinitionStoreException </span>&#123;<br><br>\t<span class=\"hljs-comment\">// Register bean definition under primary name.</span><br>\tString beanName = definitionHolder.getBeanName();<br>\t<span class=\"hljs-comment\">// 将Bean的名字和BeanDefinition对象进行注册</span><br>\t<span class=\"hljs-comment\">// registerBeanDefinition(beanName, definitionHolder.getBeanDefinition());方法定义在BeanDefinitionRegistry接口中：</span><br>\t<span class=\"hljs-comment\">// 具体实现在中实现</span><br>\tregistry.registerBeanDefinition(beanName, definitionHolder.getBeanDefinition());<br><br>\t<span class=\"hljs-comment\">// Register aliases for bean name, if any.</span><br>\tString[] aliases = definitionHolder.getAliases();<br>\t<span class=\"hljs-keyword\">if</span> (aliases != <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t<span class=\"hljs-keyword\">for</span> (String alias : aliases) &#123;<br>\t\t\tregistry.registerAlias(beanName, alias);<br>\t\t&#125;<br>\t&#125;<br>&#125;<br><br></code></pre></td></tr></table></figure></li>\n</ul>\n<h4 id=\"DefaultListableBeanFactory中registerBeanDefinition-String-beanName-BeanDefinition-beanDefinition\"><a href=\"#DefaultListableBeanFactory中registerBeanDefinition-String-beanName-BeanDefinition-beanDefinition\" class=\"headerlink\" title=\"DefaultListableBeanFactory中registerBeanDefinition(String beanName, BeanDefinition beanDefinition)\"></a>DefaultListableBeanFactory中registerBeanDefinition(String beanName, BeanDefinition beanDefinition)</h4><ul>\n<li>作用：</li>\n<li>DefaultListableBeanFactory的字段beanDefinitionMap是一个ConcurrentHashMap&lt;String, BeanDefinition&gt;，用于存储bean的定义信息</li>\n<li>DefaultListableBeanFactory的字段beanDefinitionNames是一个ArrayList<String>类型数据，用于存储Bean的名称</li>\n<li>代码位置：org.springframework.beans.factory.support.DefaultListableBeanFactory</li>\n<li><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-meta\">@Override</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">registerBeanDefinition</span><span class=\"hljs-params\">(String beanName, BeanDefinition beanDefinition)</span></span><br><span class=\"hljs-function\">\t\t<span class=\"hljs-keyword\">throws</span> BeanDefinitionStoreException </span>&#123;<br><br>\tAssert.hasText(beanName, <span class=\"hljs-string\">&quot;Bean name must not be empty&quot;</span>);<br>\tAssert.notNull(beanDefinition, <span class=\"hljs-string\">&quot;BeanDefinition must not be null&quot;</span>);<br><br>\t<span class=\"hljs-keyword\">if</span> (beanDefinition <span class=\"hljs-keyword\">instanceof</span> AbstractBeanDefinition) &#123;<br>\t\t<span class=\"hljs-keyword\">try</span> &#123;<br>\t\t\t((AbstractBeanDefinition) beanDefinition).validate();<br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">catch</span> (BeanDefinitionValidationException ex) &#123;<br>\t\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> BeanDefinitionStoreException(beanDefinition.getResourceDescription(), beanName,<br>\t\t\t\t\t<span class=\"hljs-string\">&quot;Validation of bean definition failed&quot;</span>, ex);<br>\t\t&#125;<br>\t&#125;<br><br>\tBeanDefinition existingDefinition = <span class=\"hljs-keyword\">this</span>.beanDefinitionMap.get(beanName);<br>\t<span class=\"hljs-comment\">// 查找是否存在同名的bean</span><br>\t<span class=\"hljs-keyword\">if</span> (existingDefinition != <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t<span class=\"hljs-comment\">// 有同名的bean存在时</span><br>\t\t<span class=\"hljs-keyword\">if</span> (!isAllowBeanDefinitionOverriding()) &#123;<br>\t\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> BeanDefinitionOverrideException(beanName, beanDefinition, existingDefinition);<br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (existingDefinition.getRole() &lt; beanDefinition.getRole()) &#123;<br>\t\t\t<span class=\"hljs-comment\">// e.g. was ROLE_APPLICATION, now overriding with ROLE_SUPPORT or ROLE_INFRASTRUCTURE</span><br>\t\t\t<span class=\"hljs-keyword\">if</span> (logger.isInfoEnabled()) &#123;<br>\t\t\t\tlogger.info(<span class=\"hljs-string\">&quot;Overriding user-defined bean definition for bean &#x27;&quot;</span> + beanName +<br>\t\t\t\t\t\t<span class=\"hljs-string\">&quot;&#x27; with a framework-generated bean definition: replacing [&quot;</span> +<br>\t\t\t\t\t\texistingDefinition + <span class=\"hljs-string\">&quot;] with [&quot;</span> + beanDefinition + <span class=\"hljs-string\">&quot;]&quot;</span>);<br>\t\t\t&#125;<br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (!beanDefinition.equals(existingDefinition)) &#123;<br>\t\t\t<span class=\"hljs-keyword\">if</span> (logger.isDebugEnabled()) &#123;<br>\t\t\t\tlogger.debug(<span class=\"hljs-string\">&quot;Overriding bean definition for bean &#x27;&quot;</span> + beanName +<br>\t\t\t\t\t\t<span class=\"hljs-string\">&quot;&#x27; with a different definition: replacing [&quot;</span> + existingDefinition +<br>\t\t\t\t\t\t<span class=\"hljs-string\">&quot;] with [&quot;</span> + beanDefinition + <span class=\"hljs-string\">&quot;]&quot;</span>);<br>\t\t\t&#125;<br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t\t<span class=\"hljs-keyword\">if</span> (logger.isTraceEnabled()) &#123;<br>\t\t\t\tlogger.trace(<span class=\"hljs-string\">&quot;Overriding bean definition for bean &#x27;&quot;</span> + beanName +<br>\t\t\t\t\t\t<span class=\"hljs-string\">&quot;&#x27; with an equivalent definition: replacing [&quot;</span> + existingDefinition +<br>\t\t\t\t\t\t<span class=\"hljs-string\">&quot;] with [&quot;</span> + beanDefinition + <span class=\"hljs-string\">&quot;]&quot;</span>);<br>\t\t\t&#125;<br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">this</span>.beanDefinitionMap.put(beanName, beanDefinition);<br>\t&#125;<br>\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t<span class=\"hljs-comment\">// 没有同名的bean存在时</span><br>\t\t<span class=\"hljs-keyword\">if</span> (hasBeanCreationStarted()) &#123;<br>\t\t\t<span class=\"hljs-comment\">// Cannot modify startup-time collection elements anymore (for stable iteration)</span><br>\t\t\t<span class=\"hljs-keyword\">synchronized</span> (<span class=\"hljs-keyword\">this</span>.beanDefinitionMap) &#123;<br>\t\t\t\t<span class=\"hljs-comment\">// beanDefinitionMap存储beanName:BeanDefinition一一对应的K:V信息</span><br>\t\t\t\t<span class=\"hljs-comment\">// beanName作为key， beanDefinition作为value存入DefaultListableBeanFactory对象的beanDefinitionMap字段中</span><br>\t\t\t\t<span class=\"hljs-comment\">// 完成Bean的注册，将Bean注册到BeanFactory中</span><br>\t\t\t\t<span class=\"hljs-keyword\">this</span>.beanDefinitionMap.put(beanName, beanDefinition);<br>\t\t\t\tList&lt;String&gt; updatedDefinitions = <span class=\"hljs-keyword\">new</span> ArrayList&lt;&gt;(<span class=\"hljs-keyword\">this</span>.beanDefinitionNames.size() + <span class=\"hljs-number\">1</span>);<br>\t\t\t\tupdatedDefinitions.addAll(<span class=\"hljs-keyword\">this</span>.beanDefinitionNames);<br>\t\t\t\tupdatedDefinitions.add(beanName);<br>\t\t\t\t<span class=\"hljs-comment\">// 将所有的beanName保存到beanDefinitionNames字段中，数据类型为</span><br>\t\t\t\t<span class=\"hljs-keyword\">this</span>.beanDefinitionNames = updatedDefinitions;<br>\t\t\t\tremoveManualSingletonName(beanName);<br>\t\t\t&#125;<br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t\t<span class=\"hljs-comment\">// Still in startup registration phase</span><br>\t\t\t<span class=\"hljs-keyword\">this</span>.beanDefinitionMap.put(beanName, beanDefinition);<br>\t\t\t<span class=\"hljs-keyword\">this</span>.beanDefinitionNames.add(beanName);<br>\t\t\tremoveManualSingletonName(beanName);<br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">this</span>.frozenBeanDefinitionNames = <span class=\"hljs-keyword\">null</span>;<br>\t&#125;<br><br>\t<span class=\"hljs-keyword\">if</span> (existingDefinition != <span class=\"hljs-keyword\">null</span> || containsSingleton(beanName)) &#123;<br>\t\tresetBeanDefinition(beanName);<br>\t&#125;<br>&#125;<br><br><br></code></pre></td></tr></table></figure></li>\n<li>到此上面的 loadBeanDefinitions(XmlBeanDefinitionReader reader)方法基本执行完成</li>\n<li>上一级的loadBeanDefinitions(DefaultListableBeanFactory beanFactory)方法也执行到loadBeanDefinitions(XmlBeanDefinitionReader reader)方法后结束</li>\n<li>在上述创建BeanFactory的过程中，BeanDefination注册到BeanFactory（DefaultListableBeanFactory）中的类型为ConcurrentHashMap&lt;String, BeanDefinition&gt;，字段名beanDefinitionMap的为对象中</li>\n<li>向beanDefinitionMap中注册时beanName为key,beanDefination为value；</li>\n<li>DefaultListableBeanFactory对象的字段beanDefinitionNames是一个ArrayList<String>类型数据，用于存储所有已经注册的Bean的名称</li>\n<li>refreshBeanFactory()方法执行完成，接下来进入其下一行的getBeanFactory()方法</li>\n</ul>\n<h3 id=\"getBeanFactory-方法的一种实现\"><a href=\"#getBeanFactory-方法的一种实现\" class=\"headerlink\" title=\"getBeanFactory()方法的一种实现\"></a>getBeanFactory()方法的一种实现</h3><ul>\n<li>AbstractRefreshableApplicationContext中getBeanFactory()方法的一种实现</li>\n<li>获取BeanFactory<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-meta\">@Override</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">final</span> ConfigurableListableBeanFactory <span class=\"hljs-title\">getBeanFactory</span><span class=\"hljs-params\">()</span> </span>&#123;<br>\t<span class=\"hljs-keyword\">synchronized</span> (<span class=\"hljs-keyword\">this</span>.beanFactoryMonitor) &#123;<br>\t\t<span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">this</span>.beanFactory == <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t   <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> IllegalStateException(<span class=\"hljs-string\">&quot;BeanFactory not initialized or already closed - call &#x27;refresh&#x27; before accessing beans via the ApplicationContext&quot;</span>);<br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">this</span>.beanFactory;<br>\t&#125;<br>&#125;<br></code></pre></td></tr></table></figure></li>\n<li>getBeanFactory()方法执行完，标志上一级的方法obtainFreshBeanFactory()执行完成，接下来将进入AbstractApplicationContext抽象类中定义的refresh()模板方法中的第三步定义的prepareBeanFactory(beanFactory)方法</li>\n</ul>\n<h1 id=\"6-prepareBeanFactory-beanFactory-方法\"><a href=\"#6-prepareBeanFactory-beanFactory-方法\" class=\"headerlink\" title=\"6 prepareBeanFactory(beanFactory)方法\"></a>6 prepareBeanFactory(beanFactory)方法</h1><ul>\n<li>代码位置: org.springframework.context.support.AbstractApplicationContext.java<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">protected</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">prepareBeanFactory</span><span class=\"hljs-params\">(ConfigurableListableBeanFactory beanFactory)</span> </span>&#123;<br>\t\t<span class=\"hljs-comment\">// Tell the internal bean factory to use the context&#x27;s class loader etc.</span><br>\t\tbeanFactory.setBeanClassLoader(getClassLoader());<br>\t\tbeanFactory.setBeanExpressionResolver(<span class=\"hljs-keyword\">new</span> StandardBeanExpressionResolver(beanFactory.getBeanClassLoader()));<br>\t\tbeanFactory.addPropertyEditorRegistrar(<span class=\"hljs-keyword\">new</span> ResourceEditorRegistrar(<span class=\"hljs-keyword\">this</span>, getEnvironment()));<br><br>\t\t<span class=\"hljs-comment\">// Configure the bean factory with context callbacks.</span><br>\t\tbeanFactory.addBeanPostProcessor(<span class=\"hljs-keyword\">new</span> ApplicationContextAwareProcessor(<span class=\"hljs-keyword\">this</span>));<br>\t\tbeanFactory.ignoreDependencyInterface(EnvironmentAware.class);<br>\t\tbeanFactory.ignoreDependencyInterface(EmbeddedValueResolverAware.class);<br>\t\tbeanFactory.ignoreDependencyInterface(ResourceLoaderAware.class);<br>\t\tbeanFactory.ignoreDependencyInterface(ApplicationEventPublisherAware.class);<br>\t\tbeanFactory.ignoreDependencyInterface(MessageSourceAware.class);<br>\t\tbeanFactory.ignoreDependencyInterface(ApplicationContextAware.class);<br><br>\t\t<span class=\"hljs-comment\">// BeanFactory interface not registered as resolvable type in a plain factory.</span><br>\t\t<span class=\"hljs-comment\">// MessageSource registered (and found for autowiring) as a bean.</span><br>\t\tbeanFactory.registerResolvableDependency(BeanFactory.class, beanFactory);<br>\t\tbeanFactory.registerResolvableDependency(ResourceLoader.class, <span class=\"hljs-keyword\">this</span>);<br>\t\tbeanFactory.registerResolvableDependency(ApplicationEventPublisher.class, <span class=\"hljs-keyword\">this</span>);<br>\t\tbeanFactory.registerResolvableDependency(ApplicationContext.class, <span class=\"hljs-keyword\">this</span>);<br><br>\t\t<span class=\"hljs-comment\">// Register early post-processor for detecting inner beans as ApplicationListeners.</span><br>\t\tbeanFactory.addBeanPostProcessor(<span class=\"hljs-keyword\">new</span> ApplicationListenerDetector(<span class=\"hljs-keyword\">this</span>));<br><br>\t\t<span class=\"hljs-comment\">// Detect a LoadTimeWeaver and prepare for weaving, if found.</span><br>\t\t<span class=\"hljs-keyword\">if</span> (beanFactory.containsBean(LOAD_TIME_WEAVER_BEAN_NAME)) &#123;<br>\t\t\tbeanFactory.addBeanPostProcessor(<span class=\"hljs-keyword\">new</span> LoadTimeWeaverAwareProcessor(beanFactory));<br>\t\t\t<span class=\"hljs-comment\">// Set a temporary ClassLoader for type matching.</span><br>\t\t\tbeanFactory.setTempClassLoader(<span class=\"hljs-keyword\">new</span> ContextTypeMatchClassLoader(beanFactory.getBeanClassLoader()));<br>\t\t&#125;<br><br>\t\t<span class=\"hljs-comment\">// Register default environment beans.</span><br>\t\t<span class=\"hljs-keyword\">if</span> (!beanFactory.containsLocalBean(ENVIRONMENT_BEAN_NAME)) &#123;<br>\t\t\tbeanFactory.registerSingleton(ENVIRONMENT_BEAN_NAME, getEnvironment());<br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">if</span> (!beanFactory.containsLocalBean(SYSTEM_PROPERTIES_BEAN_NAME)) &#123;<br>\t\t\tbeanFactory.registerSingleton(SYSTEM_PROPERTIES_BEAN_NAME, getEnvironment().getSystemProperties());<br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">if</span> (!beanFactory.containsLocalBean(SYSTEM_ENVIRONMENT_BEAN_NAME)) &#123;<br>\t\t\tbeanFactory.registerSingleton(SYSTEM_ENVIRONMENT_BEAN_NAME, getEnvironment().getSystemEnvironment());<br>\t\t&#125;<br>\t&#125;<br><br></code></pre></td></tr></table></figure></li>\n</ul>\n<h1 id=\"7-postProcessBeanFactory-ConfigurableListableBeanFactory-beanFactory\"><a href=\"#7-postProcessBeanFactory-ConfigurableListableBeanFactory-beanFactory\" class=\"headerlink\" title=\"7    postProcessBeanFactory(ConfigurableListableBeanFactory beanFactory)\"></a>7    postProcessBeanFactory(ConfigurableListableBeanFactory beanFactory)</h1><ul>\n<li>代码位置:org.springframework.context.support.AbstractApplicationContext.java<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">protected</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">postProcessBeanFactory</span><span class=\"hljs-params\">(ConfigurableListableBeanFactory beanFactory)</span> </span>&#123;<br>\t<span class=\"hljs-comment\">// 该方法是一个空方法，具体的实现依据具体的情况在其子类中继承或进行重写</span><br>\t<span class=\"hljs-comment\">// 观察AbstractApplicationContext到FileSystemXmlApplicationContext(location)的继承路径，其子类中并未实现具体的逻辑;</span><br>&#125;<br><br></code></pre></td></tr></table></figure></li>\n<li>postProcessBeanFactory(beanFactory)执行完后进入 invokeBeanFactoryPostProcessors(beanFactory)方法</li>\n</ul>\n<h1 id=\"8-invokeBeanFactoryPostProcessors-beanFactory-方法\"><a href=\"#8-invokeBeanFactoryPostProcessors-beanFactory-方法\" class=\"headerlink\" title=\"8. invokeBeanFactoryPostProcessors(beanFactory)方法\"></a>8. invokeBeanFactoryPostProcessors(beanFactory)方法</h1><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">protected</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">invokeBeanFactoryPostProcessors</span><span class=\"hljs-params\">(ConfigurableListableBeanFactory beanFactory)</span> </span>&#123;<br>\tPostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(beanFactory, getBeanFactoryPostProcessors());<br><br>\t<span class=\"hljs-comment\">// Detect a LoadTimeWeaver and prepare for weaving, if found in the meantime</span><br>\t<span class=\"hljs-comment\">// (e.g. through an @Bean method registered by ConfigurationClassPostProcessor)</span><br>\t<span class=\"hljs-keyword\">if</span> (beanFactory.getTempClassLoader() == <span class=\"hljs-keyword\">null</span> &amp;&amp; beanFactory.containsBean(LOAD_TIME_WEAVER_BEAN_NAME)) &#123;<br>\t\tbeanFactory.addBeanPostProcessor(<span class=\"hljs-keyword\">new</span> LoadTimeWeaverAwareProcessor(beanFactory));<br>\t\tbeanFactory.setTempClassLoader(<span class=\"hljs-keyword\">new</span> ContextTypeMatchClassLoader(beanFactory.getBeanClassLoader()));<br>\t&#125;<br>&#125;<br><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> List&lt;BeanFactoryPostProcessor&gt; <span class=\"hljs-title\">getBeanFactoryPostProcessors</span><span class=\"hljs-params\">()</span> </span>&#123;<br>\t<span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">this</span>.beanFactoryPostProcessors;<br>&#125;<br><br></code></pre></td></tr></table></figure>\n\n<ul>\n<li>PostProcessorRegistrationDelegate的invokeBeanFactoryPostProcessors(ConfigurableListableBeanFactory beanFactory, List<BeanFactoryPostProcessor> beanFactoryPostProcessors)静态方法<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">invokeBeanFactoryPostProcessors</span><span class=\"hljs-params\">(</span></span><br><span class=\"hljs-function\"><span class=\"hljs-params\">\t\tConfigurableListableBeanFactory beanFactory, List&lt;BeanFactoryPostProcessor&gt; beanFactoryPostProcessors)</span> </span>&#123;<br><br>\t<span class=\"hljs-comment\">// Invoke BeanDefinitionRegistryPostProcessors first, if any.</span><br>\tSet&lt;String&gt; processedBeans = <span class=\"hljs-keyword\">new</span> HashSet&lt;&gt;();<br><br>\t<span class=\"hljs-keyword\">if</span> (beanFactory <span class=\"hljs-keyword\">instanceof</span> BeanDefinitionRegistry) &#123;<br>\t\tBeanDefinitionRegistry registry = (BeanDefinitionRegistry) beanFactory;<br>\t\tList&lt;BeanFactoryPostProcessor&gt; regularPostProcessors = <span class=\"hljs-keyword\">new</span> ArrayList&lt;&gt;();<br>\t\tList&lt;BeanDefinitionRegistryPostProcessor&gt; registryProcessors = <span class=\"hljs-keyword\">new</span> ArrayList&lt;&gt;();<br><br>\t\t<span class=\"hljs-keyword\">for</span> (BeanFactoryPostProcessor postProcessor : beanFactoryPostProcessors) &#123;<br>\t\t\t<span class=\"hljs-keyword\">if</span> (postProcessor <span class=\"hljs-keyword\">instanceof</span> BeanDefinitionRegistryPostProcessor) &#123;<br>\t\t\t\tBeanDefinitionRegistryPostProcessor registryProcessor =<br>\t\t\t\t\t\t(BeanDefinitionRegistryPostProcessor) postProcessor;<br>\t\t\t\tregistryProcessor.postProcessBeanDefinitionRegistry(registry);<br>\t\t\t\tregistryProcessors.add(registryProcessor);<br>\t\t\t&#125;<br>\t\t\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t\t\tregularPostProcessors.add(postProcessor);<br>\t\t\t&#125;<br>\t\t&#125;<br><br>\t\t<span class=\"hljs-comment\">// Do not initialize FactoryBeans here: We need to leave all regular beans</span><br>\t\t<span class=\"hljs-comment\">// uninitialized to let the bean factory post-processors apply to them!</span><br>\t\t<span class=\"hljs-comment\">// Separate between BeanDefinitionRegistryPostProcessors that implement</span><br>\t\t<span class=\"hljs-comment\">// PriorityOrdered, Ordered, and the rest.</span><br>\t\tList&lt;BeanDefinitionRegistryPostProcessor&gt; currentRegistryProcessors = <span class=\"hljs-keyword\">new</span> ArrayList&lt;&gt;();<br><br>\t\t<span class=\"hljs-comment\">// First, invoke the BeanDefinitionRegistryPostProcessors that implement PriorityOrdered.</span><br>\t\tString[] postProcessorNames =<br>\t\t\t\tbeanFactory.getBeanNamesForType(BeanDefinitionRegistryPostProcessor.class, <span class=\"hljs-keyword\">true</span>, <span class=\"hljs-keyword\">false</span>);<br>\t\t<span class=\"hljs-keyword\">for</span> (String ppName : postProcessorNames) &#123;<br>\t\t\t<span class=\"hljs-keyword\">if</span> (beanFactory.isTypeMatch(ppName, PriorityOrdered.class)) &#123;<br>\t\t\t\tcurrentRegistryProcessors.add(beanFactory.getBean(ppName, BeanDefinitionRegistryPostProcessor.class));<br>\t\t\t\tprocessedBeans.add(ppName);<br>\t\t\t&#125;<br>\t\t&#125;<br>\t\tsortPostProcessors(currentRegistryProcessors, beanFactory);<br>\t\tregistryProcessors.addAll(currentRegistryProcessors);<br>\t\tinvokeBeanDefinitionRegistryPostProcessors(currentRegistryProcessors, registry);<br>\t\tcurrentRegistryProcessors.clear();<br><br>\t\t<span class=\"hljs-comment\">// Next, invoke the BeanDefinitionRegistryPostProcessors that implement Ordered.</span><br>\t\tpostProcessorNames = beanFactory.getBeanNamesForType(BeanDefinitionRegistryPostProcessor.class, <span class=\"hljs-keyword\">true</span>, <span class=\"hljs-keyword\">false</span>);<br>\t\t<span class=\"hljs-keyword\">for</span> (String ppName : postProcessorNames) &#123;<br>\t\t\t<span class=\"hljs-keyword\">if</span> (!processedBeans.contains(ppName) &amp;&amp; beanFactory.isTypeMatch(ppName, Ordered.class)) &#123;<br>\t\t\t\tcurrentRegistryProcessors.add(beanFactory.getBean(ppName, BeanDefinitionRegistryPostProcessor.class));<br>\t\t\t\tprocessedBeans.add(ppName);<br>\t\t\t&#125;<br>\t\t&#125;<br>\t\tsortPostProcessors(currentRegistryProcessors, beanFactory);<br>\t\tregistryProcessors.addAll(currentRegistryProcessors);<br>\t\tinvokeBeanDefinitionRegistryPostProcessors(currentRegistryProcessors, registry);<br>\t\tcurrentRegistryProcessors.clear();<br><br>\t\t<span class=\"hljs-comment\">// Finally, invoke all other BeanDefinitionRegistryPostProcessors until no further ones appear.</span><br>\t\t<span class=\"hljs-keyword\">boolean</span> reiterate = <span class=\"hljs-keyword\">true</span>;<br>\t\t<span class=\"hljs-keyword\">while</span> (reiterate) &#123;<br>\t\t\treiterate = <span class=\"hljs-keyword\">false</span>;<br>\t\t\tpostProcessorNames = beanFactory.getBeanNamesForType(BeanDefinitionRegistryPostProcessor.class, <span class=\"hljs-keyword\">true</span>, <span class=\"hljs-keyword\">false</span>);<br>\t\t\t<span class=\"hljs-keyword\">for</span> (String ppName : postProcessorNames) &#123;<br>\t\t\t\t<span class=\"hljs-keyword\">if</span> (!processedBeans.contains(ppName)) &#123;<br>\t\t\t\t\tcurrentRegistryProcessors.add(beanFactory.getBean(ppName, BeanDefinitionRegistryPostProcessor.class));<br>\t\t\t\t\tprocessedBeans.add(ppName);<br>\t\t\t\t\treiterate = <span class=\"hljs-keyword\">true</span>;<br>\t\t\t\t&#125;<br>\t\t\t&#125;<br>\t\t\tsortPostProcessors(currentRegistryProcessors, beanFactory);<br>\t\t\tregistryProcessors.addAll(currentRegistryProcessors);<br>\t\t\tinvokeBeanDefinitionRegistryPostProcessors(currentRegistryProcessors, registry);<br>\t\t\tcurrentRegistryProcessors.clear();<br>\t\t&#125;<br><br>\t\t<span class=\"hljs-comment\">// Now, invoke the postProcessBeanFactory callback of all processors handled so far.</span><br>\t\tinvokeBeanFactoryPostProcessors(registryProcessors, beanFactory);<br>\t\tinvokeBeanFactoryPostProcessors(regularPostProcessors, beanFactory);<br>\t&#125;<br><br>\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t<span class=\"hljs-comment\">// Invoke factory processors registered with the context instance.</span><br>\t\tinvokeBeanFactoryPostProcessors(beanFactoryPostProcessors, beanFactory);<br>\t&#125;<br><br>\t<span class=\"hljs-comment\">// Do not initialize FactoryBeans here: We need to leave all regular beans</span><br>\t<span class=\"hljs-comment\">// uninitialized to let the bean factory post-processors apply to them!</span><br>\tString[] postProcessorNames =<br>\t\t\tbeanFactory.getBeanNamesForType(BeanFactoryPostProcessor.class, <span class=\"hljs-keyword\">true</span>, <span class=\"hljs-keyword\">false</span>);<br><br>\t<span class=\"hljs-comment\">// Separate between BeanFactoryPostProcessors that implement PriorityOrdered,</span><br>\t<span class=\"hljs-comment\">// Ordered, and the rest.</span><br>\tList&lt;BeanFactoryPostProcessor&gt; priorityOrderedPostProcessors = <span class=\"hljs-keyword\">new</span> ArrayList&lt;&gt;();<br>\tList&lt;String&gt; orderedPostProcessorNames = <span class=\"hljs-keyword\">new</span> ArrayList&lt;&gt;();<br>\tList&lt;String&gt; nonOrderedPostProcessorNames = <span class=\"hljs-keyword\">new</span> ArrayList&lt;&gt;();<br>\t<span class=\"hljs-keyword\">for</span> (String ppName : postProcessorNames) &#123;<br>\t\t<span class=\"hljs-keyword\">if</span> (processedBeans.contains(ppName)) &#123;<br>\t\t\t<span class=\"hljs-comment\">// skip - already processed in first phase above</span><br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (beanFactory.isTypeMatch(ppName, PriorityOrdered.class)) &#123;<br>\t\t\tpriorityOrderedPostProcessors.add(beanFactory.getBean(ppName, BeanFactoryPostProcessor.class));<br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (beanFactory.isTypeMatch(ppName, Ordered.class)) &#123;<br>\t\t\torderedPostProcessorNames.add(ppName);<br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t\tnonOrderedPostProcessorNames.add(ppName);<br>\t\t&#125;<br>\t&#125;<br><br>\t<span class=\"hljs-comment\">// First, invoke the BeanFactoryPostProcessors that implement PriorityOrdered.</span><br>\tsortPostProcessors(priorityOrderedPostProcessors, beanFactory);<br>\tinvokeBeanFactoryPostProcessors(priorityOrderedPostProcessors, beanFactory);<br><br>\t<span class=\"hljs-comment\">// Next, invoke the BeanFactoryPostProcessors that implement Ordered.</span><br>\tList&lt;BeanFactoryPostProcessor&gt; orderedPostProcessors = <span class=\"hljs-keyword\">new</span> ArrayList&lt;&gt;(orderedPostProcessorNames.size());<br>\t<span class=\"hljs-keyword\">for</span> (String postProcessorName : orderedPostProcessorNames) &#123;<br>\t\torderedPostProcessors.add(beanFactory.getBean(postProcessorName, BeanFactoryPostProcessor.class));<br>\t&#125;<br>\tsortPostProcessors(orderedPostProcessors, beanFactory);<br>\tinvokeBeanFactoryPostProcessors(orderedPostProcessors, beanFactory);<br><br>\t<span class=\"hljs-comment\">// Finally, invoke all other BeanFactoryPostProcessors.</span><br>\tList&lt;BeanFactoryPostProcessor&gt; nonOrderedPostProcessors = <span class=\"hljs-keyword\">new</span> ArrayList&lt;&gt;(nonOrderedPostProcessorNames.size());<br>\t<span class=\"hljs-keyword\">for</span> (String postProcessorName : nonOrderedPostProcessorNames) &#123;<br>\t\tnonOrderedPostProcessors.add(beanFactory.getBean(postProcessorName, BeanFactoryPostProcessor.class));<br>\t&#125;<br>\tinvokeBeanFactoryPostProcessors(nonOrderedPostProcessors, beanFactory);<br><br>\t<span class=\"hljs-comment\">// Clear cached merged bean definitions since the post-processors might have</span><br>\t<span class=\"hljs-comment\">// modified the original metadata, e.g. replacing placeholders in values...</span><br>\tbeanFactory.clearMetadataCache();<br>&#125;<br><br><span class=\"hljs-comment\">// 上面的方法内部有调用该重载方法</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">invokeBeanDefinitionRegistryPostProcessors</span><span class=\"hljs-params\">(</span></span><br><span class=\"hljs-function\"><span class=\"hljs-params\">\t\tCollection&lt;? extends BeanDefinitionRegistryPostProcessor&gt; postProcessors, BeanDefinitionRegistry registry)</span> </span>&#123;<br><br>\t<span class=\"hljs-keyword\">for</span> (BeanDefinitionRegistryPostProcessor postProcessor : postProcessors) &#123;<br>\t\tpostProcessor.postProcessBeanDefinitionRegistry(registry);<br>\t&#125;<br>&#125;<br><br><span class=\"hljs-comment\">// 上面的方法内部有调用该方法</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">sortPostProcessors</span><span class=\"hljs-params\">(List&lt;?&gt; postProcessors, ConfigurableListableBeanFactory beanFactory)</span> </span>&#123;<br>\tComparator&lt;Object&gt; comparatorToUse = <span class=\"hljs-keyword\">null</span>;<br>\t<span class=\"hljs-keyword\">if</span> (beanFactory <span class=\"hljs-keyword\">instanceof</span> DefaultListableBeanFactory) &#123;<br>\t\tcomparatorToUse = ((DefaultListableBeanFactory) beanFactory).getDependencyComparator();<br>\t&#125;<br>\t<span class=\"hljs-keyword\">if</span> (comparatorToUse == <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\tcomparatorToUse = OrderComparator.INSTANCE;<br>\t&#125;<br>\tpostProcessors.sort(comparatorToUse);<br>&#125;<br></code></pre></td></tr></table></figure></li>\n</ul>\n<h1 id=\"9-registerBeanPostProcessors-beanFactory-方法\"><a href=\"#9-registerBeanPostProcessors-beanFactory-方法\" class=\"headerlink\" title=\"9. registerBeanPostProcessors(beanFactory);方法\"></a>9. registerBeanPostProcessors(beanFactory);方法</h1><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">protected</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">registerBeanPostProcessors</span><span class=\"hljs-params\">(ConfigurableListableBeanFactory beanFactory)</span> </span>&#123;<br>\tPostProcessorRegistrationDelegate.registerBeanPostProcessors(beanFactory, <span class=\"hljs-keyword\">this</span>);<br>&#125;<br><br></code></pre></td></tr></table></figure>\n<ul>\n<li>PostProcessorRegistrationDelegate的registerBeanPostProcessors(ConfigurableListableBeanFactory beanFactory, AbstractApplicationContext applicationContexs)静态方法，具体代码如下：<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">registerBeanPostProcessors</span><span class=\"hljs-params\">(</span></span><br><span class=\"hljs-function\"><span class=\"hljs-params\">\t\tConfigurableListableBeanFactory beanFactory, AbstractApplicationContext applicationContext)</span> </span>&#123;<br><br>\tString[] postProcessorNames = beanFactory.getBeanNamesForType(BeanPostProcessor.class, <span class=\"hljs-keyword\">true</span>, <span class=\"hljs-keyword\">false</span>);<br><br>\t<span class=\"hljs-comment\">// Register BeanPostProcessorChecker that logs an info message when</span><br>\t<span class=\"hljs-comment\">// a bean is created during BeanPostProcessor instantiation, i.e. when</span><br>\t<span class=\"hljs-comment\">// a bean is not eligible for getting processed by all BeanPostProcessors.</span><br>\t<span class=\"hljs-keyword\">int</span> beanProcessorTargetCount = beanFactory.getBeanPostProcessorCount() + <span class=\"hljs-number\">1</span> + postProcessorNames.length;<br>\tbeanFactory.addBeanPostProcessor(<span class=\"hljs-keyword\">new</span> BeanPostProcessorChecker(beanFactory, beanProcessorTargetCount));<br><br>\t<span class=\"hljs-comment\">// Separate between BeanPostProcessors that implement PriorityOrdered,</span><br>\t<span class=\"hljs-comment\">// Ordered, and the rest.</span><br>\tList&lt;BeanPostProcessor&gt; priorityOrderedPostProcessors = <span class=\"hljs-keyword\">new</span> ArrayList&lt;&gt;();<br>\tList&lt;BeanPostProcessor&gt; internalPostProcessors = <span class=\"hljs-keyword\">new</span> ArrayList&lt;&gt;();<br>\tList&lt;String&gt; orderedPostProcessorNames = <span class=\"hljs-keyword\">new</span> ArrayList&lt;&gt;();<br>\tList&lt;String&gt; nonOrderedPostProcessorNames = <span class=\"hljs-keyword\">new</span> ArrayList&lt;&gt;();<br>\t<span class=\"hljs-keyword\">for</span> (String ppName : postProcessorNames) &#123;<br>\t\t<span class=\"hljs-keyword\">if</span> (beanFactory.isTypeMatch(ppName, PriorityOrdered.class)) &#123;<br>\t\t\tBeanPostProcessor pp = beanFactory.getBean(ppName, BeanPostProcessor.class);<br>\t\t\tpriorityOrderedPostProcessors.add(pp);<br>\t\t\t<span class=\"hljs-keyword\">if</span> (pp <span class=\"hljs-keyword\">instanceof</span> MergedBeanDefinitionPostProcessor) &#123;<br>\t\t\t\tinternalPostProcessors.add(pp);<br>\t\t\t&#125;<br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (beanFactory.isTypeMatch(ppName, Ordered.class)) &#123;<br>\t\t\torderedPostProcessorNames.add(ppName);<br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t\tnonOrderedPostProcessorNames.add(ppName);<br>\t\t&#125;<br>\t&#125;<br><br>\t<span class=\"hljs-comment\">// First, register the BeanPostProcessors that implement PriorityOrdered.</span><br>\tsortPostProcessors(priorityOrderedPostProcessors, beanFactory);<br>\tregisterBeanPostProcessors(beanFactory, priorityOrderedPostProcessors);<br><br>\t<span class=\"hljs-comment\">// Next, register the BeanPostProcessors that implement Ordered.</span><br>\tList&lt;BeanPostProcessor&gt; orderedPostProcessors = <span class=\"hljs-keyword\">new</span> ArrayList&lt;&gt;(orderedPostProcessorNames.size());<br>\t<span class=\"hljs-keyword\">for</span> (String ppName : orderedPostProcessorNames) &#123;<br>\t\tBeanPostProcessor pp = beanFactory.getBean(ppName, BeanPostProcessor.class);<br>\t\torderedPostProcessors.add(pp);<br>\t\t<span class=\"hljs-keyword\">if</span> (pp <span class=\"hljs-keyword\">instanceof</span> MergedBeanDefinitionPostProcessor) &#123;<br>\t\t\tinternalPostProcessors.add(pp);<br>\t\t&#125;<br>\t&#125;<br>\tsortPostProcessors(orderedPostProcessors, beanFactory);<br>\tregisterBeanPostProcessors(beanFactory, orderedPostProcessors);<br><br>\t<span class=\"hljs-comment\">// Now, register all regular BeanPostProcessors.</span><br>\tList&lt;BeanPostProcessor&gt; nonOrderedPostProcessors = <span class=\"hljs-keyword\">new</span> ArrayList&lt;&gt;(nonOrderedPostProcessorNames.size());<br>\t<span class=\"hljs-keyword\">for</span> (String ppName : nonOrderedPostProcessorNames) &#123;<br>\t\tBeanPostProcessor pp = beanFactory.getBean(ppName, BeanPostProcessor.class);<br>\t\tnonOrderedPostProcessors.add(pp);<br>\t\t<span class=\"hljs-keyword\">if</span> (pp <span class=\"hljs-keyword\">instanceof</span> MergedBeanDefinitionPostProcessor) &#123;<br>\t\t\tinternalPostProcessors.add(pp);<br>\t\t&#125;<br>\t&#125;<br>\tregisterBeanPostProcessors(beanFactory, nonOrderedPostProcessors);<br><br>\t<span class=\"hljs-comment\">// Finally, re-register all internal BeanPostProcessors.</span><br>\tsortPostProcessors(internalPostProcessors, beanFactory);<br>\tregisterBeanPostProcessors(beanFactory, internalPostProcessors);<br><br>\t<span class=\"hljs-comment\">// Re-register post-processor for detecting inner beans as ApplicationListeners,</span><br>\t<span class=\"hljs-comment\">// moving it to the end of the processor chain (for picking up proxies etc).</span><br>\tbeanFactory.addBeanPostProcessor(<span class=\"hljs-keyword\">new</span> ApplicationListenerDetector(applicationContext));<br>&#125;<br><br><br><span class=\"hljs-comment\">//上面的方法内部有调用该重载方法</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">registerBeanPostProcessors</span><span class=\"hljs-params\">(</span></span><br><span class=\"hljs-function\"><span class=\"hljs-params\">\t\tConfigurableListableBeanFactory beanFactory, List&lt;BeanPostProcessor&gt; postProcessors)</span> </span>&#123;<br><br>\t<span class=\"hljs-keyword\">for</span> (BeanPostProcessor postProcessor : postProcessors) &#123;<br>\t\tbeanFactory.addBeanPostProcessor(postProcessor);<br>\t&#125;<br>&#125;<br></code></pre></td></tr></table></figure></li>\n</ul>\n<h1 id=\"10-initMessageSource-方法\"><a href=\"#10-initMessageSource-方法\" class=\"headerlink\" title=\"10. initMessageSource();方法\"></a>10. initMessageSource();方法</h1><ul>\n<li>org.springframework.context.support.AbstractApplicationContext中的initMessageSource()方法<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">protected</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">initMessageSource</span><span class=\"hljs-params\">()</span> </span>&#123;<br>\tConfigurableListableBeanFactory beanFactory = getBeanFactory();<br>\t<span class=\"hljs-keyword\">if</span> (beanFactory.containsLocalBean(MESSAGE_SOURCE_BEAN_NAME)) &#123;<br>\t\t<span class=\"hljs-keyword\">this</span>.messageSource = beanFactory.getBean(MESSAGE_SOURCE_BEAN_NAME, MessageSource.class);<br>\t\t<span class=\"hljs-comment\">// Make MessageSource aware of parent MessageSource.</span><br>\t\t<span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">this</span>.parent != <span class=\"hljs-keyword\">null</span> &amp;&amp; <span class=\"hljs-keyword\">this</span>.messageSource <span class=\"hljs-keyword\">instanceof</span> HierarchicalMessageSource) &#123;<br>\t\t\tHierarchicalMessageSource hms = (HierarchicalMessageSource) <span class=\"hljs-keyword\">this</span>.messageSource;<br>\t\t\t<span class=\"hljs-keyword\">if</span> (hms.getParentMessageSource() == <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t\t\t<span class=\"hljs-comment\">// Only set parent context as parent MessageSource if no parent MessageSource</span><br>\t\t\t\t<span class=\"hljs-comment\">// registered already.</span><br>\t\t\t\thms.setParentMessageSource(getInternalParentMessageSource());<br>\t\t\t&#125;<br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">if</span> (logger.isTraceEnabled()) &#123;<br>\t\t\tlogger.trace(<span class=\"hljs-string\">&quot;Using MessageSource [&quot;</span> + <span class=\"hljs-keyword\">this</span>.messageSource + <span class=\"hljs-string\">&quot;]&quot;</span>);<br>\t\t&#125;<br>\t&#125;<br>\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t<span class=\"hljs-comment\">// Use empty MessageSource to be able to accept getMessage calls.</span><br>\t\tDelegatingMessageSource dms = <span class=\"hljs-keyword\">new</span> DelegatingMessageSource();<br>\t\tdms.setParentMessageSource(getInternalParentMessageSource());<br>\t\t<span class=\"hljs-keyword\">this</span>.messageSource = dms;<br>\t\tbeanFactory.registerSingleton(MESSAGE_SOURCE_BEAN_NAME, <span class=\"hljs-keyword\">this</span>.messageSource);<br>\t\t<span class=\"hljs-keyword\">if</span> (logger.isTraceEnabled()) &#123;<br>\t\t\tlogger.trace(<span class=\"hljs-string\">&quot;No &#x27;&quot;</span> + MESSAGE_SOURCE_BEAN_NAME + <span class=\"hljs-string\">&quot;&#x27; bean, using [&quot;</span> + <span class=\"hljs-keyword\">this</span>.messageSource + <span class=\"hljs-string\">&quot;]&quot;</span>);<br>\t\t&#125;<br>\t&#125;<br>&#125;<br></code></pre></td></tr></table></figure></li>\n</ul>\n<h1 id=\"11-initApplicationEventMulticaster-方法\"><a href=\"#11-initApplicationEventMulticaster-方法\" class=\"headerlink\" title=\"11. initApplicationEventMulticaster();方法\"></a>11. initApplicationEventMulticaster();方法</h1><ul>\n<li>org.springframework.context.support.AbstractApplicationContext中的initApplicationEventMulticaster()方法<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">protected</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">initApplicationEventMulticaster</span><span class=\"hljs-params\">()</span> </span>&#123;<br>\tConfigurableListableBeanFactory beanFactory = getBeanFactory();<br>\t<span class=\"hljs-keyword\">if</span> (beanFactory.containsLocalBean(APPLICATION_EVENT_MULTICASTER_BEAN_NAME)) &#123;<br>\t\t<span class=\"hljs-keyword\">this</span>.applicationEventMulticaster =<br>\t\t\t\tbeanFactory.getBean(APPLICATION_EVENT_MULTICASTER_BEAN_NAME, ApplicationEventMulticaster.class);<br>\t\t<span class=\"hljs-keyword\">if</span> (logger.isTraceEnabled()) &#123;<br>\t\t\tlogger.trace(<span class=\"hljs-string\">&quot;Using ApplicationEventMulticaster [&quot;</span> + <span class=\"hljs-keyword\">this</span>.applicationEventMulticaster + <span class=\"hljs-string\">&quot;]&quot;</span>);<br>\t\t&#125;<br>\t&#125;<br>\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t<span class=\"hljs-keyword\">this</span>.applicationEventMulticaster = <span class=\"hljs-keyword\">new</span> SimpleApplicationEventMulticaster(beanFactory);<br>\t\tbeanFactory.registerSingleton(APPLICATION_EVENT_MULTICASTER_BEAN_NAME, <span class=\"hljs-keyword\">this</span>.applicationEventMulticaster);<br>\t\t<span class=\"hljs-keyword\">if</span> (logger.isTraceEnabled()) &#123;<br>\t\t\tlogger.trace(<span class=\"hljs-string\">&quot;No &#x27;&quot;</span> + APPLICATION_EVENT_MULTICASTER_BEAN_NAME + <span class=\"hljs-string\">&quot;&#x27; bean, using &quot;</span> +<br>\t\t\t\t\t<span class=\"hljs-string\">&quot;[&quot;</span> + <span class=\"hljs-keyword\">this</span>.applicationEventMulticaster.getClass().getSimpleName() + <span class=\"hljs-string\">&quot;]&quot;</span>);<br>\t\t&#125;<br>\t&#125;<br>&#125;<br></code></pre></td></tr></table></figure></li>\n</ul>\n<h1 id=\"12-onRefresh-方法\"><a href=\"#12-onRefresh-方法\" class=\"headerlink\" title=\"12. onRefresh();方法\"></a>12. onRefresh();方法</h1><ul>\n<li>org.springframework.context.support.AbstractApplicationContext中的onRefresh()方法<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">protected</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">onRefresh</span><span class=\"hljs-params\">()</span> <span class=\"hljs-keyword\">throws</span> BeansException </span>&#123;<br>\t<span class=\"hljs-comment\">// 该方法是一个空方法，具体的实现依据具体的情况在其子类中继承或进行重写</span><br>\t<span class=\"hljs-comment\">// For subclasses: do nothing by default.</span><br>&#125;<br><br></code></pre></td></tr></table></figure></li>\n</ul>\n<h1 id=\"13-registerListeners-方法\"><a href=\"#13-registerListeners-方法\" class=\"headerlink\" title=\"13. registerListeners();方法\"></a>13. registerListeners();方法</h1><ul>\n<li>org.springframework.context.support.AbstractApplicationContext中的registerListeners()方法<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">protected</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">registerListeners</span><span class=\"hljs-params\">()</span> </span>&#123;<br>\t<span class=\"hljs-comment\">// Register statically specified listeners first.</span><br>\t<span class=\"hljs-keyword\">for</span> (ApplicationListener&lt;?&gt; listener : getApplicationListeners()) &#123;<br>\t\tgetApplicationEventMulticaster().addApplicationListener(listener);<br>\t&#125;<br><br>\t<span class=\"hljs-comment\">// Do not initialize FactoryBeans here: We need to leave all regular beans</span><br>\t<span class=\"hljs-comment\">// uninitialized to let post-processors apply to them!</span><br>\tString[] listenerBeanNames = getBeanNamesForType(ApplicationListener.class, <span class=\"hljs-keyword\">true</span>, <span class=\"hljs-keyword\">false</span>);<br>\t<span class=\"hljs-keyword\">for</span> (String listenerBeanName : listenerBeanNames) &#123;<br>\t\tgetApplicationEventMulticaster().addApplicationListenerBean(listenerBeanName);<br>\t&#125;<br><br>\t<span class=\"hljs-comment\">// Publish early application events now that we finally have a multicaster...</span><br>\tSet&lt;ApplicationEvent&gt; earlyEventsToProcess = <span class=\"hljs-keyword\">this</span>.earlyApplicationEvents;<br>\t<span class=\"hljs-keyword\">this</span>.earlyApplicationEvents = <span class=\"hljs-keyword\">null</span>;<br>\t<span class=\"hljs-keyword\">if</span> (earlyEventsToProcess != <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t<span class=\"hljs-keyword\">for</span> (ApplicationEvent earlyEvent : earlyEventsToProcess) &#123;<br>\t\t\tgetApplicationEventMulticaster().multicastEvent(earlyEvent);<br>\t\t&#125;<br>\t&#125;<br>&#125;<br><br></code></pre></td></tr></table></figure></li>\n</ul>\n<h1 id=\"14-finishBeanFactoryInitialization-beanFactory-方法\"><a href=\"#14-finishBeanFactoryInitialization-beanFactory-方法\" class=\"headerlink\" title=\"14. finishBeanFactoryInitialization(beanFactory);方法\"></a>14. finishBeanFactoryInitialization(beanFactory);方法</h1><ul>\n<li>org.springframework.context.support.AbstractApplicationContext中的finishBeanFactoryInitialization(beanFactory)方法</li>\n<li>实例化Bean的核心方法<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">protected</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">finishBeanFactoryInitialization</span><span class=\"hljs-params\">(ConfigurableListableBeanFactory beanFactory)</span> </span>&#123;<br>\t<span class=\"hljs-comment\">// Initialize conversion service for this context.</span><br>\t<span class=\"hljs-keyword\">if</span> (beanFactory.containsBean(CONVERSION_SERVICE_BEAN_NAME) &amp;&amp;<br>\t\t\tbeanFactory.isTypeMatch(CONVERSION_SERVICE_BEAN_NAME, ConversionService.class)) &#123;<br>\t\tbeanFactory.setConversionService(<br>\t\t\t\tbeanFactory.getBean(CONVERSION_SERVICE_BEAN_NAME, ConversionService.class));<br>\t&#125;<br><br>\t<span class=\"hljs-comment\">// Register a default embedded value resolver if no bean post-processor</span><br>\t<span class=\"hljs-comment\">// (such as a PropertyPlaceholderConfigurer bean) registered any before:</span><br>\t<span class=\"hljs-comment\">// at this point, primarily for resolution in annotation attribute values.</span><br>\t<span class=\"hljs-keyword\">if</span> (!beanFactory.hasEmbeddedValueResolver()) &#123;<br>\t\tbeanFactory.addEmbeddedValueResolver(strVal -&gt; getEnvironment().resolvePlaceholders(strVal));<br>\t&#125;<br><br>\t<span class=\"hljs-comment\">// Initialize LoadTimeWeaverAware beans early to allow for registering their transformers early.</span><br>\tString[] weaverAwareNames = beanFactory.getBeanNamesForType(LoadTimeWeaverAware.class, <span class=\"hljs-keyword\">false</span>, <span class=\"hljs-keyword\">false</span>);<br>\t<span class=\"hljs-keyword\">for</span> (String weaverAwareName : weaverAwareNames) &#123;<br>\t\tgetBean(weaverAwareName);<br>\t&#125;<br><br>\t<span class=\"hljs-comment\">// Stop using the temporary ClassLoader for type matching.</span><br>\tbeanFactory.setTempClassLoader(<span class=\"hljs-keyword\">null</span>);<br><br>\t<span class=\"hljs-comment\">// Allow for caching all bean definition metadata, not expecting further changes.</span><br>\tbeanFactory.freezeConfiguration();<br><br>\t<span class=\"hljs-comment\">// Instantiate all remaining (non-lazy-init) singletons.</span><br>\t<span class=\"hljs-comment\">// 实例化bean的核心代码</span><br>\tbeanFactory.preInstantiateSingletons(); <br>\t<span class=\"hljs-comment\">// 上一行的preInstantiateSingletons()方法定义在ConfigurableListableBeanFactory接口中，</span><br>\t<span class=\"hljs-comment\">// 具体实现是在DefaultListableBeanFactory中preInstantiateSingletons()方法</span><br>&#125;<br><br></code></pre></td></tr></table></figure></li>\n</ul>\n<h4 id=\"DefaultListableBeanFactory中preInstantiateSingletons-方法\"><a href=\"#DefaultListableBeanFactory中preInstantiateSingletons-方法\" class=\"headerlink\" title=\"DefaultListableBeanFactory中preInstantiateSingletons()方法\"></a>DefaultListableBeanFactory中preInstantiateSingletons()方法</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-meta\">@Override</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">preInstantiateSingletons</span><span class=\"hljs-params\">()</span> <span class=\"hljs-keyword\">throws</span> BeansException </span>&#123;<br>\t<span class=\"hljs-keyword\">if</span> (logger.isTraceEnabled()) &#123;<br>\t\tlogger.trace(<span class=\"hljs-string\">&quot;Pre-instantiating singletons in &quot;</span> + <span class=\"hljs-keyword\">this</span>);<br>\t&#125;<br><br>\t<span class=\"hljs-comment\">// Iterate over a copy to allow for init methods which in turn register new bean definitions.</span><br>\t<span class=\"hljs-comment\">// While this may not be part of the regular factory bootstrap, it does otherwise work fine.</span><br>\tList&lt;String&gt; beanNames = <span class=\"hljs-keyword\">new</span> ArrayList&lt;&gt;(<span class=\"hljs-keyword\">this</span>.beanDefinitionNames);<br><br>\t<span class=\"hljs-comment\">// Trigger initialization of all non-lazy singleton beans...</span><br>\t<span class=\"hljs-comment\">// 遍历beanDefinitionNames这个ArrayList对象中的beanName，</span><br>\t<span class=\"hljs-keyword\">for</span> (String beanName : beanNames) &#123;<br>\t\tRootBeanDefinition bd = getMergedLocalBeanDefinition(beanName);<br>\t\t<span class=\"hljs-keyword\">if</span> (!bd.isAbstract() &amp;&amp; bd.isSingleton() &amp;&amp; !bd.isLazyInit()) &#123;<br>\t\t\t<span class=\"hljs-keyword\">if</span> (isFactoryBean(beanName)) &#123;<br>\t\t\t\tObject bean = getBean(FACTORY_BEAN_PREFIX + beanName);<br>\t\t\t\t<span class=\"hljs-keyword\">if</span> (bean <span class=\"hljs-keyword\">instanceof</span> FactoryBean) &#123;<br>\t\t\t\t\t<span class=\"hljs-keyword\">final</span> FactoryBean&lt;?&gt; factory = (FactoryBean&lt;?&gt;) bean;<br>\t\t\t\t\t<span class=\"hljs-keyword\">boolean</span> isEagerInit;<br>\t\t\t\t\t<span class=\"hljs-keyword\">if</span> (System.getSecurityManager() != <span class=\"hljs-keyword\">null</span> &amp;&amp; factory <span class=\"hljs-keyword\">instanceof</span> SmartFactoryBean) &#123;<br>\t\t\t\t\t\tisEagerInit = AccessController.doPrivileged((PrivilegedAction&lt;Boolean&gt;)<br>\t\t\t\t\t\t\t\t\t\t((SmartFactoryBean&lt;?&gt;) factory)::isEagerInit,<br>\t\t\t\t\t\t\t\tgetAccessControlContext());<br>\t\t\t\t\t&#125;<br>\t\t\t\t\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t\t\t\t\tisEagerInit = (factory <span class=\"hljs-keyword\">instanceof</span> SmartFactoryBean &amp;&amp;<br>\t\t\t\t\t\t\t\t((SmartFactoryBean&lt;?&gt;) factory).isEagerInit());<br>\t\t\t\t\t&#125;<br>\t\t\t\t\t<span class=\"hljs-keyword\">if</span> (isEagerInit) &#123;<br>\t\t\t\t\t\t<span class=\"hljs-comment\">// 创建bean并递归构建Bean之间的依赖关系</span><br>\t\t\t\t\t\tgetBean(beanName);<br>\t\t\t\t\t&#125;<br>\t\t\t\t&#125;<br>\t\t\t&#125;<br>\t\t\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t\t\t<span class=\"hljs-comment\">// 创建bean并递归构建Bean之间的依赖关系</span><br>\t\t\t\tgetBean(beanName);<br>\t\t\t&#125;<br>\t\t&#125;<br>\t&#125;<br><br>\t<span class=\"hljs-comment\">// Trigger post-initialization callback for all applicable beans...</span><br>\t<span class=\"hljs-keyword\">for</span> (String beanName : beanNames) &#123;<br>\t\tObject singletonInstance = getSingleton(beanName);<br>\t\t<span class=\"hljs-keyword\">if</span> (singletonInstance <span class=\"hljs-keyword\">instanceof</span> SmartInitializingSingleton) &#123;<br>\t\t\t<span class=\"hljs-keyword\">final</span> SmartInitializingSingleton smartSingleton = (SmartInitializingSingleton) singletonInstance;<br>\t\t\t<span class=\"hljs-keyword\">if</span> (System.getSecurityManager() != <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t\t\tAccessController.doPrivileged((PrivilegedAction&lt;Object&gt;) () -&gt; &#123;<br>\t\t\t\t\tsmartSingleton.afterSingletonsInstantiated();<br>\t\t\t\t\t<span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">null</span>;<br>\t\t\t\t&#125;, getAccessControlContext());<br>\t\t\t&#125;<br>\t\t\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t\t\tsmartSingleton.afterSingletonsInstantiated();<br>\t\t\t&#125;<br>\t\t&#125;<br>\t&#125;<br>&#125;<br><br><br></code></pre></td></tr></table></figure>\n\n<h3 id=\"preInstantiateSingletons-方法中调用的getBean方法\"><a href=\"#preInstantiateSingletons-方法中调用的getBean方法\" class=\"headerlink\" title=\"preInstantiateSingletons()方法中调用的getBean方法\"></a>preInstantiateSingletons()方法中调用的getBean方法</h3><ul>\n<li>getBean方法定义在BeanFactory接口中</li>\n<li>getBean方法org.springframework.beans.factory.support.AbstractBeanFactory中实现<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-meta\">@Override</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> Object <span class=\"hljs-title\">getBean</span><span class=\"hljs-params\">(String name)</span> <span class=\"hljs-keyword\">throws</span> BeansException </span>&#123;<br>\t<span class=\"hljs-keyword\">return</span> doGetBean(name, <span class=\"hljs-keyword\">null</span>, <span class=\"hljs-keyword\">null</span>, <span class=\"hljs-keyword\">false</span>);<br>&#125;<br><br><br><br><span class=\"hljs-comment\">//下面是上面方法调用doGetBean(name, null, null, false)方法</span><br><span class=\"hljs-comment\">// 这个方法特别长，以下是完整代码：</span><br><span class=\"hljs-meta\">@SuppressWarnings(&quot;unchecked&quot;)</span><br><span class=\"hljs-keyword\">protected</span> &lt;T&gt; <span class=\"hljs-function\">T <span class=\"hljs-title\">doGetBean</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">final</span> String name, <span class=\"hljs-meta\">@Nullable</span> <span class=\"hljs-keyword\">final</span> Class&lt;T&gt; requiredType,</span></span><br><span class=\"hljs-function\"><span class=\"hljs-params\">\t\t<span class=\"hljs-meta\">@Nullable</span> <span class=\"hljs-keyword\">final</span> Object[] args, <span class=\"hljs-keyword\">boolean</span> typeCheckOnly)</span> <span class=\"hljs-keyword\">throws</span> BeansException </span>&#123;<br><br>\t<span class=\"hljs-keyword\">final</span> String beanName = transformedBeanName(name);<br>\tObject bean;<br><br>\t<span class=\"hljs-comment\">// Eagerly check singleton cache for manually registered singletons.</span><br>\tObject sharedInstance = getSingleton(beanName);<br>\t<span class=\"hljs-keyword\">if</span> (sharedInstance != <span class=\"hljs-keyword\">null</span> &amp;&amp; args == <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t<span class=\"hljs-keyword\">if</span> (logger.isTraceEnabled()) &#123;<br>\t\t\t<span class=\"hljs-keyword\">if</span> (isSingletonCurrentlyInCreation(beanName)) &#123;<br>\t\t\t\tlogger.trace(<span class=\"hljs-string\">&quot;Returning eagerly cached instance of singleton bean &#x27;&quot;</span> + beanName +<br>\t\t\t\t\t\t<span class=\"hljs-string\">&quot;&#x27; that is not fully initialized yet - a consequence of a circular reference&quot;</span>);<br>\t\t\t&#125;<br>\t\t\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t\t\tlogger.trace(<span class=\"hljs-string\">&quot;Returning cached instance of singleton bean &#x27;&quot;</span> + beanName + <span class=\"hljs-string\">&quot;&#x27;&quot;</span>);<br>\t\t\t&#125;<br>\t\t&#125;<br>\t\tbean = getObjectForBeanInstance(sharedInstance, name, beanName, <span class=\"hljs-keyword\">null</span>);<br>\t&#125;<br><br>\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t<span class=\"hljs-comment\">// Fail if we&#x27;re already creating this bean instance:</span><br>\t\t<span class=\"hljs-comment\">// We&#x27;re assumably within a circular reference.</span><br>\t\t<span class=\"hljs-keyword\">if</span> (isPrototypeCurrentlyInCreation(beanName)) &#123;<br>\t\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> BeanCurrentlyInCreationException(beanName);<br>\t\t&#125;<br><br>\t\t<span class=\"hljs-comment\">// Check if bean definition exists in this factory.</span><br>\t\tBeanFactory parentBeanFactory = getParentBeanFactory();<br>\t\t<span class=\"hljs-keyword\">if</span> (parentBeanFactory != <span class=\"hljs-keyword\">null</span> &amp;&amp; !containsBeanDefinition(beanName)) &#123;<br>\t\t\t<span class=\"hljs-comment\">// Not found -&gt; check parent.</span><br>\t\t\tString nameToLookup = originalBeanName(name);<br>\t\t\t<span class=\"hljs-keyword\">if</span> (parentBeanFactory <span class=\"hljs-keyword\">instanceof</span> AbstractBeanFactory) &#123;<br>\t\t\t\t<span class=\"hljs-keyword\">return</span> ((AbstractBeanFactory) parentBeanFactory).doGetBean(<br>\t\t\t\t\t\tnameToLookup, requiredType, args, typeCheckOnly);<br>\t\t\t&#125;<br>\t\t\t<span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (args != <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t\t\t<span class=\"hljs-comment\">// Delegation to parent with explicit args.</span><br>\t\t\t\t<span class=\"hljs-keyword\">return</span> (T) parentBeanFactory.getBean(nameToLookup, args);<br>\t\t\t&#125;<br>\t\t\t<span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (requiredType != <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t\t\t<span class=\"hljs-comment\">// No args -&gt; delegate to standard getBean method.</span><br>\t\t\t\t<span class=\"hljs-keyword\">return</span> parentBeanFactory.getBean(nameToLookup, requiredType);<br>\t\t\t&#125;<br>\t\t\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t\t\t<span class=\"hljs-keyword\">return</span> (T) parentBeanFactory.getBean(nameToLookup);<br>\t\t\t&#125;<br>\t\t&#125;<br><br>\t\t<span class=\"hljs-keyword\">if</span> (!typeCheckOnly) &#123;<br>\t\t\tmarkBeanAsCreated(beanName);<br>\t\t&#125;<br><br>\t\t<span class=\"hljs-keyword\">try</span> &#123;<br>\t\t\t<span class=\"hljs-keyword\">final</span> RootBeanDefinition mbd = getMergedLocalBeanDefinition(beanName);<br>\t\t\tcheckMergedBeanDefinition(mbd, beanName, args);<br><br>\t\t\t<span class=\"hljs-comment\">// Guarantee initialization of beans that the current bean depends on.</span><br>\t\t\t<span class=\"hljs-comment\">// 获取当前bean的依赖关系</span><br>\t\t\tString[] dependsOn = mbd.getDependsOn();<br>\t\t\t<span class=\"hljs-comment\">// 根据依赖的beanName递归调用getBean()方法，不断探寻其依赖的bean，直到getSingleton方法返回依赖的Bean，即当前正在创建的Bean</span><br>\t\t\t<span class=\"hljs-comment\">// 直到依赖关系最底层的bean没有依赖对象了，至此整个递归过程结束  </span><br>\t\t\t<span class=\"hljs-keyword\">if</span> (dependsOn != <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t\t\t<span class=\"hljs-keyword\">for</span> (String dep : dependsOn) &#123;<br>\t\t\t\t\t<span class=\"hljs-keyword\">if</span> (isDependent(beanName, dep)) &#123;<br>\t\t\t\t\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> BeanCreationException(mbd.getResourceDescription(), beanName,<br>\t\t\t\t\t\t\t\t<span class=\"hljs-string\">&quot;Circular depends-on relationship between &#x27;&quot;</span> + beanName + <span class=\"hljs-string\">&quot;&#x27; and &#x27;&quot;</span> + dep + <span class=\"hljs-string\">&quot;&#x27;&quot;</span>);<br>\t\t\t\t\t&#125;<br>\t\t\t\t\t<span class=\"hljs-comment\">// </span><br>\t\t\t\t\tregisterDependentBean(dep, beanName);<br>\t\t\t\t\t<span class=\"hljs-keyword\">try</span> &#123;<br>\t\t\t\t\t\tgetBean(dep);<br>\t\t\t\t\t&#125;<br>\t\t\t\t\t<span class=\"hljs-keyword\">catch</span> (NoSuchBeanDefinitionException ex) &#123;<br>\t\t\t\t\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> BeanCreationException(mbd.getResourceDescription(), beanName,<br>\t\t\t\t\t\t\t\t<span class=\"hljs-string\">&quot;&#x27;&quot;</span> + beanName + <span class=\"hljs-string\">&quot;&#x27; depends on missing bean &#x27;&quot;</span> + dep + <span class=\"hljs-string\">&quot;&#x27;&quot;</span>, ex);<br>\t\t\t\t\t&#125;<br>\t\t\t\t&#125;<br>\t\t\t&#125;<br>\t\t\t<span class=\"hljs-comment\">// Create bean instance.</span><br>\t\t\t<span class=\"hljs-keyword\">if</span> (mbd.isSingleton()) &#123;<br>\t\t\t\t<span class=\"hljs-comment\">// getSingleton方法的参数是createBean(beanName, mbd, args)方法的返回值</span><br>\t\t\t\tsharedInstance = getSingleton(beanName, () -&gt; &#123;<br>\t\t\t\t\t<span class=\"hljs-keyword\">try</span> &#123;<br>\t\t\t\t\t\t<span class=\"hljs-comment\">// createBean方法在AbstractBeanFactory抽象类中定义，具体实现是在AbstractAutowireCapableBeanFactory抽象类中</span><br>\t\t\t\t\t\t<span class=\"hljs-keyword\">return</span> createBean(beanName, mbd, args);<br>\t\t\t\t\t&#125;<br>\t\t\t\t\t<span class=\"hljs-keyword\">catch</span> (BeansException ex) &#123;<br>\t\t\t\t\t\t<span class=\"hljs-comment\">// Explicitly remove instance from singleton cache: It might have been put there</span><br>\t\t\t\t\t\t<span class=\"hljs-comment\">// eagerly by the creation process, to allow for circular reference resolution.</span><br>\t\t\t\t\t\t<span class=\"hljs-comment\">// Also remove any beans that received a temporary reference to the bean.</span><br>\t\t\t\t\t\tdestroySingleton(beanName);<br>\t\t\t\t\t\t<span class=\"hljs-keyword\">throw</span> ex;<br>\t\t\t\t\t&#125;<br>\t\t\t\t&#125;);<br>\t\t\t\tbean = getObjectForBeanInstance(sharedInstance, name, beanName, mbd);<br>\t\t\t&#125;<br><br>\t\t\t<span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (mbd.isPrototype()) &#123;<br>\t\t\t\t<span class=\"hljs-comment\">// It&#x27;s a prototype -&gt; create a new instance.</span><br>\t\t\t\tObject prototypeInstance = <span class=\"hljs-keyword\">null</span>;<br>\t\t\t\t<span class=\"hljs-keyword\">try</span> &#123;<br>\t\t\t\t\tbeforePrototypeCreation(beanName);<br>\t\t\t\t\tprototypeInstance = createBean(beanName, mbd, args);<br>\t\t\t\t&#125;<br>\t\t\t\t<span class=\"hljs-keyword\">finally</span> &#123;<br>\t\t\t\t\tafterPrototypeCreation(beanName);<br>\t\t\t\t&#125;<br>\t\t\t\tbean = getObjectForBeanInstance(prototypeInstance, name, beanName, mbd);<br>\t\t\t&#125;<br><br>\t\t\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t\t\tString scopeName = mbd.getScope();<br>\t\t\t\t<span class=\"hljs-keyword\">final</span> Scope scope = <span class=\"hljs-keyword\">this</span>.scopes.get(scopeName);<br>\t\t\t\t<span class=\"hljs-keyword\">if</span> (scope == <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t\t\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> IllegalStateException(<span class=\"hljs-string\">&quot;No Scope registered for scope name &#x27;&quot;</span> + scopeName + <span class=\"hljs-string\">&quot;&#x27;&quot;</span>);<br>\t\t\t\t&#125;<br>\t\t\t\t<span class=\"hljs-keyword\">try</span> &#123;<br>\t\t\t\t\tObject scopedInstance = scope.get(beanName, () -&gt; &#123;<br>\t\t\t\t\t\tbeforePrototypeCreation(beanName);<br>\t\t\t\t\t\t<span class=\"hljs-keyword\">try</span> &#123;<br>\t\t\t\t\t\t\t<span class=\"hljs-keyword\">return</span> createBean(beanName, mbd, args);<br>\t\t\t\t\t\t&#125;<br>\t\t\t\t\t\t<span class=\"hljs-keyword\">finally</span> &#123;<br>\t\t\t\t\t\t\tafterPrototypeCreation(beanName);<br>\t\t\t\t\t\t&#125;<br>\t\t\t\t\t&#125;);<br>\t\t\t\t\tbean = getObjectForBeanInstance(scopedInstance, name, beanName, mbd);<br>\t\t\t\t&#125;<br>\t\t\t\t<span class=\"hljs-keyword\">catch</span> (IllegalStateException ex) &#123;<br>\t\t\t\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> BeanCreationException(beanName,<br>\t\t\t\t\t\t\t<span class=\"hljs-string\">&quot;Scope &#x27;&quot;</span> + scopeName + <span class=\"hljs-string\">&quot;&#x27; is not active for the current thread; consider &quot;</span> +<br>\t\t\t\t\t\t\t<span class=\"hljs-string\">&quot;defining a scoped proxy for this bean if you intend to refer to it from a singleton&quot;</span>,<br>\t\t\t\t\t\t\tex);<br>\t\t\t\t&#125;<br>\t\t\t&#125;<br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">catch</span> (BeansException ex) &#123;<br>\t\t\tcleanupAfterBeanCreationFailure(beanName);<br>\t\t\t<span class=\"hljs-keyword\">throw</span> ex;<br>\t\t&#125;<br>\t&#125;<br><br>\t<span class=\"hljs-comment\">// Check if required type matches the type of the actual bean instance.</span><br>\t<span class=\"hljs-keyword\">if</span> (requiredType != <span class=\"hljs-keyword\">null</span> &amp;&amp; !requiredType.isInstance(bean)) &#123;<br>\t\t<span class=\"hljs-keyword\">try</span> &#123;<br>\t\t\tT convertedBean = getTypeConverter().convertIfNecessary(bean, requiredType);<br>\t\t\t<span class=\"hljs-keyword\">if</span> (convertedBean == <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> BeanNotOfRequiredTypeException(name, requiredType, bean.getClass());<br>\t\t\t&#125;<br>\t\t\t<span class=\"hljs-keyword\">return</span> convertedBean;<br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">catch</span> (TypeMismatchException ex) &#123;<br>\t\t\t<span class=\"hljs-keyword\">if</span> (logger.isTraceEnabled()) &#123;<br>\t\t\t\tlogger.trace(<span class=\"hljs-string\">&quot;Failed to convert bean &#x27;&quot;</span> + name + <span class=\"hljs-string\">&quot;&#x27; to required type &#x27;&quot;</span> +<br>\t\t\t\t\t\tClassUtils.getQualifiedName(requiredType) + <span class=\"hljs-string\">&quot;&#x27;&quot;</span>, ex);<br>\t\t\t&#125;<br>\t\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> BeanNotOfRequiredTypeException(name, requiredType, bean.getClass());<br>\t\t&#125;<br>\t&#125;<br>\t<span class=\"hljs-keyword\">return</span> (T) bean;<br>&#125;<br><br><br></code></pre></td></tr></table></figure></li>\n</ul>\n<h4 id=\"AbstractAutowireCapableBeanFactory类中的createBean-String-beanName-RootBeanDefinition-mbd-Nullable-Object-args-方法\"><a href=\"#AbstractAutowireCapableBeanFactory类中的createBean-String-beanName-RootBeanDefinition-mbd-Nullable-Object-args-方法\" class=\"headerlink\" title=\"AbstractAutowireCapableBeanFactory类中的createBean(String beanName, RootBeanDefinition mbd, @Nullable Object[] args)方法\"></a>AbstractAutowireCapableBeanFactory类中的createBean(String beanName, RootBeanDefinition mbd, @Nullable Object[] args)方法</h4><ul>\n<li>代码位置：org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-meta\">@Override</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">protected</span> Object <span class=\"hljs-title\">createBean</span><span class=\"hljs-params\">(String beanName, RootBeanDefinition mbd, <span class=\"hljs-meta\">@Nullable</span> Object[] args)</span></span><br><span class=\"hljs-function\">\t\t<span class=\"hljs-keyword\">throws</span> BeanCreationException </span>&#123;<br><br>\t<span class=\"hljs-keyword\">if</span> (logger.isTraceEnabled()) &#123;<br>\t\tlogger.trace(<span class=\"hljs-string\">&quot;Creating instance of bean &#x27;&quot;</span> + beanName + <span class=\"hljs-string\">&quot;&#x27;&quot;</span>);<br>\t&#125;<br>\tRootBeanDefinition mbdToUse = mbd;<br><br>\t<span class=\"hljs-comment\">// Make sure bean class is actually resolved at this point, and</span><br>\t<span class=\"hljs-comment\">// clone the bean definition in case of a dynamically resolved Class</span><br>\t<span class=\"hljs-comment\">// which cannot be stored in the shared merged bean definition.</span><br>\tClass&lt;?&gt; resolvedClass = resolveBeanClass(mbd, beanName);<br>\t<span class=\"hljs-keyword\">if</span> (resolvedClass != <span class=\"hljs-keyword\">null</span> &amp;&amp; !mbd.hasBeanClass() &amp;&amp; mbd.getBeanClassName() != <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\tmbdToUse = <span class=\"hljs-keyword\">new</span> RootBeanDefinition(mbd);<br>\t\tmbdToUse.setBeanClass(resolvedClass);<br>\t&#125;<br><br>\t<span class=\"hljs-comment\">// Prepare method overrides.</span><br>\t<span class=\"hljs-keyword\">try</span> &#123;<br>\t\tmbdToUse.prepareMethodOverrides();<br>\t&#125;<br>\t<span class=\"hljs-keyword\">catch</span> (BeanDefinitionValidationException ex) &#123;<br>\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> BeanDefinitionStoreException(mbdToUse.getResourceDescription(),<br>\t\t\t\tbeanName, <span class=\"hljs-string\">&quot;Validation of method overrides failed&quot;</span>, ex);<br>\t&#125;<br><br>\t<span class=\"hljs-keyword\">try</span> &#123;<br>\t\t<span class=\"hljs-comment\">// Give BeanPostProcessors a chance to return a proxy instead of the target bean instance.</span><br>\t\tObject bean = resolveBeforeInstantiation(beanName, mbdToUse);<br>\t\t<span class=\"hljs-keyword\">if</span> (bean != <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t\t<span class=\"hljs-keyword\">return</span> bean;<br>\t\t&#125;<br>\t&#125;<br>\t<span class=\"hljs-keyword\">catch</span> (Throwable ex) &#123;<br>\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> BeanCreationException(mbdToUse.getResourceDescription(), beanName,<br>\t\t\t\t<span class=\"hljs-string\">&quot;BeanPostProcessor before instantiation of bean failed&quot;</span>, ex);<br>\t&#125;<br><br>\t<span class=\"hljs-keyword\">try</span> &#123;<br>\t\t<span class=\"hljs-comment\">// createBean方法的核心  该方法会返回Bean对象的实例，具体代码在下面贴出</span><br>\t\tObject beanInstance = doCreateBean(beanName, mbdToUse, args);<br>\t\t<span class=\"hljs-keyword\">if</span> (logger.isTraceEnabled()) &#123;<br>\t\t\tlogger.trace(<span class=\"hljs-string\">&quot;Finished creating instance of bean &#x27;&quot;</span> + beanName + <span class=\"hljs-string\">&quot;&#x27;&quot;</span>);<br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">return</span> beanInstance;<br>\t&#125;<br>\t<span class=\"hljs-keyword\">catch</span> (BeanCreationException | ImplicitlyAppearedSingletonException ex) &#123;<br>\t\t<span class=\"hljs-comment\">// A previously detected exception with proper bean creation context already,</span><br>\t\t<span class=\"hljs-comment\">// or illegal singleton state to be communicated up to DefaultSingletonBeanRegistry.</span><br>\t\t<span class=\"hljs-keyword\">throw</span> ex;<br>\t&#125;<br>\t<span class=\"hljs-keyword\">catch</span> (Throwable ex) &#123;<br>\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> BeanCreationException(<br>\t\t\t\tmbdToUse.getResourceDescription(), beanName, <span class=\"hljs-string\">&quot;Unexpected exception during bean creation&quot;</span>, ex);<br>\t&#125;<br>&#125;<br><br><br><br><span class=\"hljs-comment\">// 在AbstractAutowireCapableBeanFactory抽象类的createBean方法中调用的doCreateBean(beanName, mbdToUse, args)方法</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">protected</span> Object <span class=\"hljs-title\">doCreateBean</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">final</span> String beanName, <span class=\"hljs-keyword\">final</span> RootBeanDefinition mbd, <span class=\"hljs-keyword\">final</span> <span class=\"hljs-meta\">@Nullable</span> Object[] args)</span></span><br><span class=\"hljs-function\">\t\t<span class=\"hljs-keyword\">throws</span> BeanCreationException </span>&#123;<br><br>\t<span class=\"hljs-comment\">// Instantiate the bean.</span><br>\tBeanWrapper instanceWrapper = <span class=\"hljs-keyword\">null</span>;<br>\t<span class=\"hljs-keyword\">if</span> (mbd.isSingleton()) &#123;<br>\t\tinstanceWrapper = <span class=\"hljs-keyword\">this</span>.factoryBeanInstanceCache.remove(beanName);<br>\t&#125;<br>\t<span class=\"hljs-keyword\">if</span> (instanceWrapper == <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t<span class=\"hljs-comment\">// 创建Bean实例</span><br>\t\tinstanceWrapper = createBeanInstance(beanName, mbd, args);<br>\t&#125;<br>\t<span class=\"hljs-keyword\">final</span> Object bean = instanceWrapper.getWrappedInstance();<br>\tClass&lt;?&gt; beanType = instanceWrapper.getWrappedClass();<br>\t<span class=\"hljs-keyword\">if</span> (beanType != NullBean.class) &#123;<br>\t\tmbd.resolvedTargetType = beanType;<br>\t&#125;<br><br>\t<span class=\"hljs-comment\">// Allow post-processors to modify the merged bean definition.</span><br>\t<span class=\"hljs-keyword\">synchronized</span> (mbd.postProcessingLock) &#123;<br>\t\t<span class=\"hljs-keyword\">if</span> (!mbd.postProcessed) &#123;<br>\t\t\t<span class=\"hljs-keyword\">try</span> &#123;<br>\t\t\t\tapplyMergedBeanDefinitionPostProcessors(mbd, beanType, beanName);<br>\t\t\t&#125;<br>\t\t\t<span class=\"hljs-keyword\">catch</span> (Throwable ex) &#123;<br>\t\t\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> BeanCreationException(mbd.getResourceDescription(), beanName,<br>\t\t\t\t\t\t<span class=\"hljs-string\">&quot;Post-processing of merged bean definition failed&quot;</span>, ex);<br>\t\t\t&#125;<br>\t\t\tmbd.postProcessed = <span class=\"hljs-keyword\">true</span>;<br>\t\t&#125;<br>\t&#125;<br><br>\t<span class=\"hljs-comment\">// Eagerly cache singletons to be able to resolve circular references</span><br>\t<span class=\"hljs-comment\">// even when triggered by lifecycle interfaces like BeanFactoryAware.</span><br>\t<span class=\"hljs-keyword\">boolean</span> earlySingletonExposure = (mbd.isSingleton() &amp;&amp; <span class=\"hljs-keyword\">this</span>.allowCircularReferences &amp;&amp;<br>\t\t\tisSingletonCurrentlyInCreation(beanName));<br>\t<span class=\"hljs-keyword\">if</span> (earlySingletonExposure) &#123;<br>\t\t<span class=\"hljs-keyword\">if</span> (logger.isTraceEnabled()) &#123;<br>\t\t\tlogger.trace(<span class=\"hljs-string\">&quot;Eagerly caching bean &#x27;&quot;</span> + beanName +<br>\t\t\t\t\t<span class=\"hljs-string\">&quot;&#x27; to allow for resolving potential circular references&quot;</span>);<br>\t\t&#125;<br>\t\taddSingletonFactory(beanName, () -&gt; getEarlyBeanReference(beanName, mbd, bean));<br>\t&#125;<br><br>\t<span class=\"hljs-comment\">// Initialize the bean instance.</span><br>\tObject exposedObject = bean;<br>\t<span class=\"hljs-keyword\">try</span> &#123;<br>\t\t<span class=\"hljs-comment\">// 填充bean，实际进行依赖注入的地方</span><br>\t\tpopulateBean(beanName, mbd, instanceWrapper);<br>\t\texposedObject = initializeBean(beanName, exposedObject, mbd);<br>\t&#125;<br>\t<span class=\"hljs-keyword\">catch</span> (Throwable ex) &#123;<br>\t\t<span class=\"hljs-keyword\">if</span> (ex <span class=\"hljs-keyword\">instanceof</span> BeanCreationException &amp;&amp; beanName.equals(((BeanCreationException) ex).getBeanName())) &#123;<br>\t\t\t<span class=\"hljs-keyword\">throw</span> (BeanCreationException) ex;<br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> BeanCreationException(<br>\t\t\t\t\tmbd.getResourceDescription(), beanName, <span class=\"hljs-string\">&quot;Initialization of bean failed&quot;</span>, ex);<br>\t\t&#125;<br>\t&#125;<br><br>\t<span class=\"hljs-keyword\">if</span> (earlySingletonExposure) &#123;<br>\t\tObject earlySingletonReference = getSingleton(beanName, <span class=\"hljs-keyword\">false</span>);<br>\t\t<span class=\"hljs-keyword\">if</span> (earlySingletonReference != <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t\t<span class=\"hljs-keyword\">if</span> (exposedObject == bean) &#123;<br>\t\t\t\texposedObject = earlySingletonReference;<br>\t\t\t&#125;<br>\t\t\t<span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (!<span class=\"hljs-keyword\">this</span>.allowRawInjectionDespiteWrapping &amp;&amp; hasDependentBean(beanName)) &#123;<br>\t\t\t\tString[] dependentBeans = getDependentBeans(beanName);<br>\t\t\t\tSet&lt;String&gt; actualDependentBeans = <span class=\"hljs-keyword\">new</span> LinkedHashSet&lt;&gt;(dependentBeans.length);<br>\t\t\t\t<span class=\"hljs-keyword\">for</span> (String dependentBean : dependentBeans) &#123;<br>\t\t\t\t\t<span class=\"hljs-keyword\">if</span> (!removeSingletonIfCreatedForTypeCheckOnly(dependentBean)) &#123;<br>\t\t\t\t\t\tactualDependentBeans.add(dependentBean);<br>\t\t\t\t\t&#125;<br>\t\t\t\t&#125;<br>\t\t\t\t<span class=\"hljs-keyword\">if</span> (!actualDependentBeans.isEmpty()) &#123;<br>\t\t\t\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> BeanCurrentlyInCreationException(beanName,<br>\t\t\t\t\t\t\t<span class=\"hljs-string\">&quot;Bean with name &#x27;&quot;</span> + beanName + <span class=\"hljs-string\">&quot;&#x27; has been injected into other beans [&quot;</span> +<br>\t\t\t\t\t\t\tStringUtils.collectionToCommaDelimitedString(actualDependentBeans) +<br>\t\t\t\t\t\t\t<span class=\"hljs-string\">&quot;] in its raw version as part of a circular reference, but has eventually been &quot;</span> +<br>\t\t\t\t\t\t\t<span class=\"hljs-string\">&quot;wrapped. This means that said other beans do not use the final version of the &quot;</span> +<br>\t\t\t\t\t\t\t<span class=\"hljs-string\">&quot;bean. This is often the result of over-eager type matching - consider using &quot;</span> +<br>\t\t\t\t\t\t\t<span class=\"hljs-string\">&quot;&#x27;getBeanNamesOfType&#x27; with the &#x27;allowEagerInit&#x27; flag turned off, for example.&quot;</span>);<br>\t\t\t\t&#125;<br>\t\t\t&#125;<br>\t\t&#125;<br>\t&#125;<br><br>\t<span class=\"hljs-comment\">// Register bean as disposable.</span><br>\t<span class=\"hljs-keyword\">try</span> &#123;<br>\t\tregisterDisposableBeanIfNecessary(beanName, bean, mbd);<br>\t&#125;<br>\t<span class=\"hljs-keyword\">catch</span> (BeanDefinitionValidationException ex) &#123;<br>\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> BeanCreationException(<br>\t\t\t\tmbd.getResourceDescription(), beanName, <span class=\"hljs-string\">&quot;Invalid destruction signature&quot;</span>, ex);<br>\t&#125;<br><br>\t<span class=\"hljs-keyword\">return</span> exposedObject;<br>&#125;<br><br><br><span class=\"hljs-comment\">// 在AbstractAutowireCapableBeanFactory抽象类的doCreateBean方法中调用的 createBeanInstance(beanName, mbd, args)方法</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">protected</span> BeanWrapper <span class=\"hljs-title\">createBeanInstance</span><span class=\"hljs-params\">(String beanName, RootBeanDefinition mbd, <span class=\"hljs-meta\">@Nullable</span> Object[] args)</span> </span>&#123;<br>\t<span class=\"hljs-comment\">// Make sure bean class is actually resolved at this point.</span><br>\tClass&lt;?&gt; beanClass = resolveBeanClass(mbd, beanName);<br><br>\t<span class=\"hljs-keyword\">if</span> (beanClass != <span class=\"hljs-keyword\">null</span> &amp;&amp; !Modifier.isPublic(beanClass.getModifiers()) &amp;&amp; !mbd.isNonPublicAccessAllowed()) &#123;<br>\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> BeanCreationException(mbd.getResourceDescription(), beanName,<br>\t\t\t\t<span class=\"hljs-string\">&quot;Bean class isn&#x27;t public, and non-public access not allowed: &quot;</span> + beanClass.getName());<br>\t&#125;<br><br>\tSupplier&lt;?&gt; instanceSupplier = mbd.getInstanceSupplier();<br>\t<span class=\"hljs-keyword\">if</span> (instanceSupplier != <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t<span class=\"hljs-keyword\">return</span> obtainFromSupplier(instanceSupplier, beanName);<br>\t&#125;<br><br>\t<span class=\"hljs-keyword\">if</span> (mbd.getFactoryMethodName() != <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t<span class=\"hljs-keyword\">return</span> instantiateUsingFactoryMethod(beanName, mbd, args);<br>\t&#125;<br><br>\t<span class=\"hljs-comment\">// Shortcut when re-creating the same bean...</span><br>\t<span class=\"hljs-keyword\">boolean</span> resolved = <span class=\"hljs-keyword\">false</span>;<br>\t<span class=\"hljs-keyword\">boolean</span> autowireNecessary = <span class=\"hljs-keyword\">false</span>;<br>\t<span class=\"hljs-keyword\">if</span> (args == <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t<span class=\"hljs-keyword\">synchronized</span> (mbd.constructorArgumentLock) &#123;<br>\t\t\t<span class=\"hljs-keyword\">if</span> (mbd.resolvedConstructorOrFactoryMethod != <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t\t\tresolved = <span class=\"hljs-keyword\">true</span>;<br>\t\t\t\tautowireNecessary = mbd.constructorArgumentsResolved;<br>\t\t\t&#125;<br>\t\t&#125;<br>\t&#125;<br>\t<span class=\"hljs-keyword\">if</span> (resolved) &#123;<br>\t\t<span class=\"hljs-keyword\">if</span> (autowireNecessary) &#123;<br>\t\t\t<span class=\"hljs-keyword\">return</span> autowireConstructor(beanName, mbd, <span class=\"hljs-keyword\">null</span>, <span class=\"hljs-keyword\">null</span>);<br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t\t<span class=\"hljs-comment\">// 调用instantiateBean方法</span><br>\t\t\t<span class=\"hljs-keyword\">return</span> instantiateBean(beanName, mbd);<br>\t\t&#125;<br>\t&#125;<br><br>\t<span class=\"hljs-comment\">// Candidate constructors for autowiring?</span><br>\tConstructor&lt;?&gt;[] ctors = determineConstructorsFromBeanPostProcessors(beanClass, beanName);<br>\t<span class=\"hljs-keyword\">if</span> (ctors != <span class=\"hljs-keyword\">null</span> || mbd.getResolvedAutowireMode() == AUTOWIRE_CONSTRUCTOR ||<br>\t\t\tmbd.hasConstructorArgumentValues() || !ObjectUtils.isEmpty(args)) &#123;<br>\t\t<span class=\"hljs-keyword\">return</span> autowireConstructor(beanName, mbd, ctors, args);<br>\t&#125;<br><br>\t<span class=\"hljs-comment\">// Preferred constructors for default construction?</span><br>\tctors = mbd.getPreferredConstructors();<br>\t<span class=\"hljs-keyword\">if</span> (ctors != <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t<span class=\"hljs-keyword\">return</span> autowireConstructor(beanName, mbd, ctors, <span class=\"hljs-keyword\">null</span>);<br>\t&#125;<br><br>\t<span class=\"hljs-comment\">// No special handling: simply use no-arg constructor.</span><br>\t<span class=\"hljs-keyword\">return</span> instantiateBean(beanName, mbd);<br>&#125;<br><br><span class=\"hljs-comment\">// 在AbstractAutowireCapableBeanFactory抽象类的createBeanInstance方法中调用的instantiateBean(beanName, mbd)方法</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">protected</span> BeanWrapper <span class=\"hljs-title\">instantiateBean</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">final</span> String beanName, <span class=\"hljs-keyword\">final</span> RootBeanDefinition mbd)</span> </span>&#123;<br>\t<span class=\"hljs-keyword\">try</span> &#123;<br>\t\tObject beanInstance;<br>\t\t<span class=\"hljs-keyword\">final</span> BeanFactory parent = <span class=\"hljs-keyword\">this</span>;<br>\t\t<span class=\"hljs-keyword\">if</span> (System.getSecurityManager() != <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t\t<span class=\"hljs-comment\">// 核心逻辑</span><br>\t\t\tbeanInstance = AccessController.doPrivileged((PrivilegedAction&lt;Object&gt;) () -&gt;<br>\t\t\t\t\tgetInstantiationStrategy().instantiate(mbd, beanName, parent),<br>\t\t\t\t\tgetAccessControlContext());<br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t\t<span class=\"hljs-comment\">// 核心逻辑</span><br>\t\t\tbeanInstance = getInstantiationStrategy().instantiate(mbd, beanName, parent);<br>\t\t&#125;<br>\t\tBeanWrapper bw = <span class=\"hljs-keyword\">new</span> BeanWrapperImpl(beanInstance);<br>\t\tinitBeanWrapper(bw);<br>\t\t<span class=\"hljs-keyword\">return</span> bw;<br>\t&#125;<br>\t<span class=\"hljs-keyword\">catch</span> (Throwable ex) &#123;<br>\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> BeanCreationException(<br>\t\t\t\tmbd.getResourceDescription(), beanName, <span class=\"hljs-string\">&quot;Instantiation of bean failed&quot;</span>, ex);<br>\t&#125;<br>&#125;<br><br><span class=\"hljs-comment\">// 上面的getInstantiationStrategy()方法代码</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">protected</span> InstantiationStrategy <span class=\"hljs-title\">getInstantiationStrategy</span><span class=\"hljs-params\">()</span> </span>&#123;<br>\t<span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">this</span>.instantiationStrategy;<br>&#125;<br><br></code></pre></td></tr></table></figure></li>\n</ul>\n<h3 id=\"getInstantiationStrategy-方法的返回接口对象的策略对象的一个实现SimpleInstantiationStrategy\"><a href=\"#getInstantiationStrategy-方法的返回接口对象的策略对象的一个实现SimpleInstantiationStrategy\" class=\"headerlink\" title=\"getInstantiationStrategy()方法的返回接口对象的策略对象的一个实现SimpleInstantiationStrategy\"></a>getInstantiationStrategy()方法的返回接口对象的策略对象的一个实现SimpleInstantiationStrategy</h3><ul>\n<li>org.springframework.beans.factory.support.SimpleInstantiationStrategy</li>\n<li>SimpleInstantiationStrategy.instantiate(RootBeanDefinition bd, @Nullable String beanName, BeanFactory owner)方法的具体实现：<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-meta\">@Override</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> Object <span class=\"hljs-title\">instantiate</span><span class=\"hljs-params\">(RootBeanDefinition bd, <span class=\"hljs-meta\">@Nullable</span> String beanName, BeanFactory owner)</span> </span>&#123;<br>\t<span class=\"hljs-comment\">// Don&#x27;t override the class with CGLIB if no overrides.</span><br>\t<span class=\"hljs-keyword\">if</span> (!bd.hasMethodOverrides()) &#123;<br>\t\tConstructor&lt;?&gt; constructorToUse;<br>\t\t<span class=\"hljs-keyword\">synchronized</span> (bd.constructorArgumentLock) &#123;<br>\t\t\tconstructorToUse = (Constructor&lt;?&gt;) bd.resolvedConstructorOrFactoryMethod;<br>\t\t\t<span class=\"hljs-keyword\">if</span> (constructorToUse == <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t\t\t<span class=\"hljs-keyword\">final</span> Class&lt;?&gt; clazz = bd.getBeanClass();<br>\t\t\t\t<span class=\"hljs-keyword\">if</span> (clazz.isInterface()) &#123;<br>\t\t\t\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> BeanInstantiationException(clazz, <span class=\"hljs-string\">&quot;Specified class is an interface&quot;</span>);<br>\t\t\t\t&#125;<br>\t\t\t\t<span class=\"hljs-keyword\">try</span> &#123;<br>\t\t\t\t\t<span class=\"hljs-keyword\">if</span> (System.getSecurityManager() != <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t\t\t\t\tconstructorToUse = AccessController.doPrivileged(<br>\t\t\t\t\t\t\t\t(PrivilegedExceptionAction&lt;Constructor&lt;?&gt;&gt;) clazz::getDeclaredConstructor);<br>\t\t\t\t\t&#125;<br>\t\t\t\t\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t\t\t\t\tconstructorToUse = clazz.getDeclaredConstructor();<br>\t\t\t\t\t&#125;<br>\t\t\t\t\tbd.resolvedConstructorOrFactoryMethod = constructorToUse;<br>\t\t\t\t&#125;<br>\t\t\t\t<span class=\"hljs-keyword\">catch</span> (Throwable ex) &#123;<br>\t\t\t\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> BeanInstantiationException(clazz, <span class=\"hljs-string\">&quot;No default constructor found&quot;</span>, ex);<br>\t\t\t\t&#125;<br>\t\t\t&#125;<br>\t\t&#125;<br>\t\t<span class=\"hljs-comment\">// 调用静态方法BeanUtils.instantiateClass(constructorToUse);</span><br>\t\t<span class=\"hljs-keyword\">return</span> BeanUtils.instantiateClass(constructorToUse);<br>\t&#125;<br>\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t<span class=\"hljs-comment\">// Must generate CGLIB subclass.</span><br>\t\t<span class=\"hljs-keyword\">return</span> instantiateWithMethodInjection(bd, beanName, owner);<br>\t&#125;<br>&#125;<br></code></pre></td></tr></table></figure>\n<h4 id=\"静态方法BeanUtils-instantiateClass-constructorToUse-的实现细节\"><a href=\"#静态方法BeanUtils-instantiateClass-constructorToUse-的实现细节\" class=\"headerlink\" title=\"静态方法BeanUtils.instantiateClass(constructorToUse)的实现细节\"></a>静态方法BeanUtils.instantiateClass(constructorToUse)的实现细节</h4></li>\n<li>代码位置：org.springframework.beans.BeanUtils<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> &lt;T&gt; <span class=\"hljs-function\">T <span class=\"hljs-title\">instantiateClass</span><span class=\"hljs-params\">(Constructor&lt;T&gt; ctor, Object... args)</span> <span class=\"hljs-keyword\">throws</span> BeanInstantiationException </span>&#123;<br>\tAssert.notNull(ctor, <span class=\"hljs-string\">&quot;Constructor must not be null&quot;</span>);<br>\t<span class=\"hljs-keyword\">try</span> &#123;<br>\t\tReflectionUtils.makeAccessible(ctor);<br>\t\t<span class=\"hljs-comment\">// 判断是否是Kotlin类型</span><br>\t\t<span class=\"hljs-keyword\">if</span> (KotlinDetector.isKotlinReflectPresent() &amp;&amp; KotlinDetector.isKotlinType(ctor.getDeclaringClass())) &#123;<br>\t\t\t<span class=\"hljs-comment\">// 是Kotlin类型</span><br>\t\t\t<span class=\"hljs-keyword\">return</span> KotlinDelegate.instantiateClass(ctor, args);<br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t\t<span class=\"hljs-comment\">// 不是Kotlin类型</span><br>\t\t\tClass&lt;?&gt;[] parameterTypes = ctor.getParameterTypes();<br>\t\t\tAssert.isTrue(args.length &lt;= parameterTypes.length, <span class=\"hljs-string\">&quot;Can&#x27;t specify more arguments than constructor parameters&quot;</span>);<br>\t\t\tObject[] argsWithDefaultValues = <span class=\"hljs-keyword\">new</span> Object[args.length];<br>\t\t\t<span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">int</span> i = <span class=\"hljs-number\">0</span> ; i &lt; args.length; i++) &#123;<br>\t\t\t\t<span class=\"hljs-keyword\">if</span> (args[i] == <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t\t\t\tClass&lt;?&gt; parameterType = parameterTypes[i];<br>\t\t\t\t\targsWithDefaultValues[i] = (parameterType.isPrimitive() ? DEFAULT_TYPE_VALUES.get(parameterType) : <span class=\"hljs-keyword\">null</span>);<br>\t\t\t\t&#125;<br>\t\t\t\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t\t\t\targsWithDefaultValues[i] = args[i];<br>\t\t\t\t&#125;<br>\t\t\t&#125;<br>\t\t\t<span class=\"hljs-comment\">// 调用Constructor的newInstance方法，使用反射创建实例</span><br>\t\t\t<span class=\"hljs-comment\">// 到此之后bean实例创建完成</span><br>\t\t\t<span class=\"hljs-keyword\">return</span> ctor.newInstance(argsWithDefaultValues);<br>\t\t&#125;<br>\t&#125;<br>\t<span class=\"hljs-keyword\">catch</span> (InstantiationException ex) &#123;<br>\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> BeanInstantiationException(ctor, <span class=\"hljs-string\">&quot;Is it an abstract class?&quot;</span>, ex);<br>\t&#125;<br>\t<span class=\"hljs-keyword\">catch</span> (IllegalAccessException ex) &#123;<br>\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> BeanInstantiationException(ctor, <span class=\"hljs-string\">&quot;Is the constructor accessible?&quot;</span>, ex);<br>\t&#125;<br>\t<span class=\"hljs-keyword\">catch</span> (IllegalArgumentException ex) &#123;<br>\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> BeanInstantiationException(ctor, <span class=\"hljs-string\">&quot;Illegal arguments for constructor&quot;</span>, ex);<br>\t&#125;<br>\t<span class=\"hljs-keyword\">catch</span> (InvocationTargetException ex) &#123;<br>\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> BeanInstantiationException(ctor, <span class=\"hljs-string\">&quot;Constructor threw exception&quot;</span>, ex.getTargetException());<br>\t&#125;<br>&#125;<br><br></code></pre></td></tr></table></figure></li>\n</ul>\n<h4 id=\"AbstractAutowireCapableBeanFactory抽象类的中doCreateBean方法中调用的populateBean-beanName-mbd-instanceWrapper-方法\"><a href=\"#AbstractAutowireCapableBeanFactory抽象类的中doCreateBean方法中调用的populateBean-beanName-mbd-instanceWrapper-方法\" class=\"headerlink\" title=\"AbstractAutowireCapableBeanFactory抽象类的中doCreateBean方法中调用的populateBean(beanName, mbd, instanceWrapper)方法\"></a>AbstractAutowireCapableBeanFactory抽象类的中doCreateBean方法中调用的populateBean(beanName, mbd, instanceWrapper)方法</h4><ul>\n<li>在AbstractAutowireCapableBeanFactory抽象类中的方法populateBean方法</li>\n<li>该方法用于填充bean 具体发生依赖注入的地方<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-meta\">@SuppressWarnings(&quot;deprecation&quot;)</span>  <span class=\"hljs-comment\">// for postProcessPropertyValues</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">protected</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">populateBean</span><span class=\"hljs-params\">(String beanName, RootBeanDefinition mbd, <span class=\"hljs-meta\">@Nullable</span> BeanWrapper bw)</span> </span>&#123;<br>\t<span class=\"hljs-keyword\">if</span> (bw == <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t<span class=\"hljs-keyword\">if</span> (mbd.hasPropertyValues()) &#123;<br>\t\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> BeanCreationException(<br>\t\t\t\t\tmbd.getResourceDescription(), beanName, <span class=\"hljs-string\">&quot;Cannot apply property values to null instance&quot;</span>);<br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t\t<span class=\"hljs-comment\">// Skip property population phase for null instance.</span><br>\t\t\t<span class=\"hljs-keyword\">return</span>;<br>\t\t&#125;<br>\t&#125;<br><br>\t<span class=\"hljs-comment\">// Give any InstantiationAwareBeanPostProcessors the opportunity to modify the</span><br>\t<span class=\"hljs-comment\">// state of the bean before properties are set. This can be used, for example,</span><br>\t<span class=\"hljs-comment\">// to support styles of field injection.</span><br>\t<span class=\"hljs-keyword\">boolean</span> continueWithPropertyPopulation = <span class=\"hljs-keyword\">true</span>;<br><br>\t<span class=\"hljs-keyword\">if</span> (!mbd.isSynthetic() &amp;&amp; hasInstantiationAwareBeanPostProcessors()) &#123;<br>\t\t<span class=\"hljs-keyword\">for</span> (BeanPostProcessor bp : getBeanPostProcessors()) &#123;<br>\t\t\t<span class=\"hljs-keyword\">if</span> (bp <span class=\"hljs-keyword\">instanceof</span> InstantiationAwareBeanPostProcessor) &#123;<br>\t\t\t\tInstantiationAwareBeanPostProcessor ibp = (InstantiationAwareBeanPostProcessor) bp;<br>\t\t\t\t<span class=\"hljs-keyword\">if</span> (!ibp.postProcessAfterInstantiation(bw.getWrappedInstance(), beanName)) &#123;<br>\t\t\t\t\tcontinueWithPropertyPopulation = <span class=\"hljs-keyword\">false</span>;<br>\t\t\t\t\t<span class=\"hljs-keyword\">break</span>;<br>\t\t\t\t&#125;<br>\t\t\t&#125;<br>\t\t&#125;<br>\t&#125;<br><br>\t<span class=\"hljs-keyword\">if</span> (!continueWithPropertyPopulation) &#123;<br>\t\t<span class=\"hljs-keyword\">return</span>;<br>\t&#125;<br>    <span class=\"hljs-comment\">// 获取bean的所有属性 用于后面配置Property元素 即依赖关系</span><br>\tPropertyValues pvs = (mbd.hasPropertyValues() ? mbd.getPropertyValues() : <span class=\"hljs-keyword\">null</span>);<br><br>\t<span class=\"hljs-keyword\">int</span> resolvedAutowireMode = mbd.getResolvedAutowireMode();<br>\t<span class=\"hljs-keyword\">if</span> (resolvedAutowireMode == AUTOWIRE_BY_NAME || resolvedAutowireMode == AUTOWIRE_BY_TYPE) &#123;<br>\t\tMutablePropertyValues newPvs = <span class=\"hljs-keyword\">new</span> MutablePropertyValues(pvs);<br>\t\t<span class=\"hljs-comment\">// Add property values based on autowire by name if applicable.</span><br>\t\t<span class=\"hljs-keyword\">if</span> (resolvedAutowireMode == AUTOWIRE_BY_NAME) &#123;<br>\t\t\tautowireByName(beanName, mbd, bw, newPvs);<br>\t\t&#125;<br>\t\t<span class=\"hljs-comment\">// Add property values based on autowire by type if applicable.</span><br>\t\t<span class=\"hljs-keyword\">if</span> (resolvedAutowireMode == AUTOWIRE_BY_TYPE) &#123;<br>\t\t\tautowireByType(beanName, mbd, bw, newPvs);<br>\t\t&#125;<br>\t\tpvs = newPvs;<br>\t&#125;<br><br>\t<span class=\"hljs-keyword\">boolean</span> hasInstAwareBpps = hasInstantiationAwareBeanPostProcessors();<br>\t<span class=\"hljs-keyword\">boolean</span> needsDepCheck = (mbd.getDependencyCheck() != AbstractBeanDefinition.DEPENDENCY_CHECK_NONE);<br><br>\tPropertyDescriptor[] filteredPds = <span class=\"hljs-keyword\">null</span>;<br>\t<span class=\"hljs-keyword\">if</span> (hasInstAwareBpps) &#123;<br>\t\t<span class=\"hljs-keyword\">if</span> (pvs == <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t\tpvs = mbd.getPropertyValues();<br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">for</span> (BeanPostProcessor bp : getBeanPostProcessors()) &#123;<br>\t\t\t<span class=\"hljs-keyword\">if</span> (bp <span class=\"hljs-keyword\">instanceof</span> InstantiationAwareBeanPostProcessor) &#123;<br>\t\t\t\tInstantiationAwareBeanPostProcessor ibp = (InstantiationAwareBeanPostProcessor) bp;<br>\t\t\t\tPropertyValues pvsToUse = ibp.postProcessProperties(pvs, bw.getWrappedInstance(), beanName);<br>\t\t\t\t<span class=\"hljs-keyword\">if</span> (pvsToUse == <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t\t\t\t<span class=\"hljs-keyword\">if</span> (filteredPds == <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t\t\t\t\tfilteredPds = filterPropertyDescriptorsForDependencyCheck(bw, mbd.allowCaching);<br>\t\t\t\t\t&#125;<br>\t\t\t\t\tpvsToUse = ibp.postProcessPropertyValues(pvs, filteredPds, bw.getWrappedInstance(), beanName);<br>\t\t\t\t\t<span class=\"hljs-keyword\">if</span> (pvsToUse == <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t\t\t\t\t<span class=\"hljs-keyword\">return</span>;<br>\t\t\t\t\t&#125;<br>\t\t\t\t&#125;<br>\t\t\t\tpvs = pvsToUse;<br>\t\t\t&#125;<br>\t\t&#125;<br>\t&#125;<br>\t<span class=\"hljs-keyword\">if</span> (needsDepCheck) &#123;<br>\t\t<span class=\"hljs-keyword\">if</span> (filteredPds == <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t\tfilteredPds = filterPropertyDescriptorsForDependencyCheck(bw, mbd.allowCaching);<br>\t\t&#125;<br>\t\tcheckDependencies(beanName, mbd, filteredPds, pvs);<br>\t&#125;<br><br>\t<span class=\"hljs-keyword\">if</span> (pvs != <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t<span class=\"hljs-comment\">// 核心逻辑 applyPropertyValues方法的具体代码在下面</span><br>\t\tapplyPropertyValues(beanName, mbd, bw, pvs);<br>\t&#125;<br>&#125;<br><br><span class=\"hljs-comment\">// 上面方法中调用的applyPropertyValues方法具体代码</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">protected</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">applyPropertyValues</span><span class=\"hljs-params\">(String beanName, BeanDefinition mbd, BeanWrapper bw, PropertyValues pvs)</span> </span>&#123;<br>\t<span class=\"hljs-keyword\">if</span> (pvs.isEmpty()) &#123;<br>\t\t<span class=\"hljs-keyword\">return</span>;<br>\t&#125;<br><br>\t<span class=\"hljs-keyword\">if</span> (System.getSecurityManager() != <span class=\"hljs-keyword\">null</span> &amp;&amp; bw <span class=\"hljs-keyword\">instanceof</span> BeanWrapperImpl) &#123;<br>\t\t((BeanWrapperImpl) bw).setSecurityContext(getAccessControlContext());<br>\t&#125;<br><br>\tMutablePropertyValues mpvs = <span class=\"hljs-keyword\">null</span>;<br>\tList&lt;PropertyValue&gt; original;<br><br>\t<span class=\"hljs-keyword\">if</span> (pvs <span class=\"hljs-keyword\">instanceof</span> MutablePropertyValues) &#123;<br>\t\tmpvs = (MutablePropertyValues) pvs;<br>\t\t<span class=\"hljs-keyword\">if</span> (mpvs.isConverted()) &#123;<br>\t\t\t<span class=\"hljs-comment\">// Shortcut: use the pre-converted values as-is.</span><br>\t\t\t<span class=\"hljs-keyword\">try</span> &#123;<br>\t\t\t\tbw.setPropertyValues(mpvs);<br>\t\t\t\t<span class=\"hljs-keyword\">return</span>;<br>\t\t\t&#125;<br>\t\t\t<span class=\"hljs-keyword\">catch</span> (BeansException ex) &#123;<br>\t\t\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> BeanCreationException(<br>\t\t\t\t\t\tmbd.getResourceDescription(), beanName, <span class=\"hljs-string\">&quot;Error setting property values&quot;</span>, ex);<br>\t\t\t&#125;<br>\t\t&#125;<br>\t\toriginal = mpvs.getPropertyValueList();<br>\t&#125;<br>\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\toriginal = Arrays.asList(pvs.getPropertyValues());<br>\t&#125;<br><br>\tTypeConverter converter = getCustomTypeConverter();<br>\t<span class=\"hljs-keyword\">if</span> (converter == <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\tconverter = bw;<br>\t&#125;<br>\tBeanDefinitionValueResolver valueResolver = <span class=\"hljs-keyword\">new</span> BeanDefinitionValueResolver(<span class=\"hljs-keyword\">this</span>, beanName, mbd, converter);<br><br>\t<span class=\"hljs-comment\">// Create a deep copy, resolving any references for values.</span><br>\tList&lt;PropertyValue&gt; deepCopy = <span class=\"hljs-keyword\">new</span> ArrayList&lt;&gt;(original.size());<br>\t<span class=\"hljs-keyword\">boolean</span> resolveNecessary = <span class=\"hljs-keyword\">false</span>;<br>\t<span class=\"hljs-keyword\">for</span> (PropertyValue pv : original) &#123;<br>\t\t<span class=\"hljs-keyword\">if</span> (pv.isConverted()) &#123;<br>\t\t\tdeepCopy.add(pv);<br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t\tString propertyName = pv.getName();<br>\t\t\tObject originalValue = pv.getValue();<br>\t\t\t<span class=\"hljs-keyword\">if</span> (originalValue == AutowiredPropertyMarker.INSTANCE) &#123;<br>\t\t\t\tMethod writeMethod = bw.getPropertyDescriptor(propertyName).getWriteMethod();<br>\t\t\t\t<span class=\"hljs-keyword\">if</span> (writeMethod == <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t\t\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> IllegalArgumentException(<span class=\"hljs-string\">&quot;Autowire marker for property without write method: &quot;</span> + pv);<br>\t\t\t\t&#125;<br>\t\t\t\toriginalValue = <span class=\"hljs-keyword\">new</span> DependencyDescriptor(<span class=\"hljs-keyword\">new</span> MethodParameter(writeMethod, <span class=\"hljs-number\">0</span>), <span class=\"hljs-keyword\">true</span>);<br>\t\t\t&#125;<br>\t\t\t<span class=\"hljs-comment\">// 获取property对应的值   resolveValueIfNecessary方法的代码在下面给出</span><br>\t\t\tObject resolvedValue = valueResolver.resolveValueIfNecessary(pv, originalValue);<br>\t\t\tObject convertedValue = resolvedValue;<br>\t\t\t<span class=\"hljs-keyword\">boolean</span> convertible = bw.isWritableProperty(propertyName) &amp;&amp;<br>\t\t\t\t\t!PropertyAccessorUtils.isNestedOrIndexedProperty(propertyName);<br>\t\t\t<span class=\"hljs-keyword\">if</span> (convertible) &#123;<br>\t\t\t\tconvertedValue = convertForProperty(resolvedValue, propertyName, bw, converter);<br>\t\t\t&#125;<br>\t\t\t<span class=\"hljs-comment\">// Possibly store converted value in merged bean definition,</span><br>\t\t\t<span class=\"hljs-comment\">// in order to avoid re-conversion for every created bean instance.</span><br>\t\t\t<span class=\"hljs-keyword\">if</span> (resolvedValue == originalValue) &#123;<br>\t\t\t\t<span class=\"hljs-keyword\">if</span> (convertible) &#123;<br>\t\t\t\t\tpv.setConvertedValue(convertedValue);<br>\t\t\t\t&#125;<br>\t\t\t\tdeepCopy.add(pv);<br>\t\t\t&#125;<br>\t\t\t<span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (convertible &amp;&amp; originalValue <span class=\"hljs-keyword\">instanceof</span> TypedStringValue &amp;&amp;<br>\t\t\t\t\t!((TypedStringValue) originalValue).isDynamic() &amp;&amp;<br>\t\t\t\t\t!(convertedValue <span class=\"hljs-keyword\">instanceof</span> Collection || ObjectUtils.isArray(convertedValue))) &#123;<br>\t\t\t\tpv.setConvertedValue(convertedValue);<br>\t\t\t\tdeepCopy.add(pv);<br>\t\t\t&#125;<br>\t\t\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t\t\tresolveNecessary = <span class=\"hljs-keyword\">true</span>;<br>\t\t\t\tdeepCopy.add(<span class=\"hljs-keyword\">new</span> PropertyValue(pv, convertedValue));<br>\t\t\t&#125;<br>\t\t&#125;<br>\t&#125;<br>\t<span class=\"hljs-keyword\">if</span> (mpvs != <span class=\"hljs-keyword\">null</span> &amp;&amp; !resolveNecessary) &#123;<br>\t\tmpvs.setConverted();<br>\t&#125;<br><br>\t<span class=\"hljs-comment\">// Set our (possibly massaged) deep copy.</span><br>\t<span class=\"hljs-keyword\">try</span> &#123;<br>\t\t<span class=\"hljs-comment\">// 获取到依赖的对象值后 将依赖值注入</span><br>\t\tbw.setPropertyValues(<span class=\"hljs-keyword\">new</span> MutablePropertyValues(deepCopy));<br>\t&#125;<br>\t<span class=\"hljs-keyword\">catch</span> (BeansException ex) &#123;<br>\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> BeanCreationException(<br>\t\t\t\tmbd.getResourceDescription(), beanName, <span class=\"hljs-string\">&quot;Error setting property values&quot;</span>, ex);<br>\t&#125;<br>&#125;<br><br><br></code></pre></td></tr></table></figure>\n####################################################################################################################################################33</li>\n</ul>\n<h4 id=\"valueResolver-resolveValueIfNecessary-pv-originalValue-对应的方法\"><a href=\"#valueResolver-resolveValueIfNecessary-pv-originalValue-对应的方法\" class=\"headerlink\" title=\"valueResolver.resolveValueIfNecessary(pv, originalValue);对应的方法\"></a>valueResolver.resolveValueIfNecessary(pv, originalValue);对应的方法</h4><ul>\n<li>代码位置：org.springframework.beans.factory.support.BeanDefinitionValueResolver<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-meta\">@Nullable</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> Object <span class=\"hljs-title\">resolveValueIfNecessary</span><span class=\"hljs-params\">(Object argName, <span class=\"hljs-meta\">@Nullable</span> Object value)</span> </span>&#123;<br>\t<span class=\"hljs-comment\">// We must check each value to see whether it requires a runtime reference</span><br>\t<span class=\"hljs-comment\">// to another bean to be resolved.</span><br>\t<span class=\"hljs-keyword\">if</span> (value <span class=\"hljs-keyword\">instanceof</span> RuntimeBeanReference) &#123;<br>\t\tRuntimeBeanReference ref = (RuntimeBeanReference) value;<br>\t\t<span class=\"hljs-comment\">// 核心逻辑 解决Bean依赖关系 具体代码在下方贴出</span><br>\t\t<span class=\"hljs-keyword\">return</span> resolveReference(argName, ref);<br>\t&#125;<br>\t<span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (value <span class=\"hljs-keyword\">instanceof</span> RuntimeBeanNameReference) &#123;<br>\t\tString refName = ((RuntimeBeanNameReference) value).getBeanName();<br>\t\trefName = String.valueOf(doEvaluate(refName));<br>\t\t<span class=\"hljs-keyword\">if</span> (!<span class=\"hljs-keyword\">this</span>.beanFactory.containsBean(refName)) &#123;<br>\t\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> BeanDefinitionStoreException(<br>\t\t\t\t\t<span class=\"hljs-string\">&quot;Invalid bean name &#x27;&quot;</span> + refName + <span class=\"hljs-string\">&quot;&#x27; in bean reference for &quot;</span> + argName);<br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">return</span> refName;<br>\t&#125;<br>\t<span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (value <span class=\"hljs-keyword\">instanceof</span> BeanDefinitionHolder) &#123;<br>\t\t<span class=\"hljs-comment\">// Resolve BeanDefinitionHolder: contains BeanDefinition with name and aliases.</span><br>\t\tBeanDefinitionHolder bdHolder = (BeanDefinitionHolder) value;<br>\t\t<span class=\"hljs-keyword\">return</span> resolveInnerBean(argName, bdHolder.getBeanName(), bdHolder.getBeanDefinition());<br>\t&#125;<br>\t<span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (value <span class=\"hljs-keyword\">instanceof</span> BeanDefinition) &#123;<br>\t\t<span class=\"hljs-comment\">// Resolve plain BeanDefinition, without contained name: use dummy name.</span><br>\t\tBeanDefinition bd = (BeanDefinition) value;<br>\t\tString innerBeanName = <span class=\"hljs-string\">&quot;(inner bean)&quot;</span> + BeanFactoryUtils.GENERATED_BEAN_NAME_SEPARATOR +<br>\t\t\t\tObjectUtils.getIdentityHexString(bd);<br>\t\t<span class=\"hljs-keyword\">return</span> resolveInnerBean(argName, innerBeanName, bd);<br>\t&#125;<br>\t<span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (value <span class=\"hljs-keyword\">instanceof</span> DependencyDescriptor) &#123;<br>\t\tSet&lt;String&gt; autowiredBeanNames = <span class=\"hljs-keyword\">new</span> LinkedHashSet&lt;&gt;(<span class=\"hljs-number\">4</span>);<br>\t\tObject result = <span class=\"hljs-keyword\">this</span>.beanFactory.resolveDependency(<br>\t\t\t\t(DependencyDescriptor) value, <span class=\"hljs-keyword\">this</span>.beanName, autowiredBeanNames, <span class=\"hljs-keyword\">this</span>.typeConverter);<br>\t\t<span class=\"hljs-keyword\">for</span> (String autowiredBeanName : autowiredBeanNames) &#123;<br>\t\t\t<span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">this</span>.beanFactory.containsBean(autowiredBeanName)) &#123;<br>\t\t\t\t<span class=\"hljs-keyword\">this</span>.beanFactory.registerDependentBean(autowiredBeanName, <span class=\"hljs-keyword\">this</span>.beanName);<br>\t\t\t&#125;<br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">return</span> result;<br>\t&#125;<br>\t<span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (value <span class=\"hljs-keyword\">instanceof</span> ManagedArray) &#123;<br>\t\t<span class=\"hljs-comment\">// May need to resolve contained runtime references.</span><br>\t\tManagedArray array = (ManagedArray) value;<br>\t\tClass&lt;?&gt; elementType = array.resolvedElementType;<br>\t\t<span class=\"hljs-keyword\">if</span> (elementType == <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t\tString elementTypeName = array.getElementTypeName();<br>\t\t\t<span class=\"hljs-keyword\">if</span> (StringUtils.hasText(elementTypeName)) &#123;<br>\t\t\t\t<span class=\"hljs-keyword\">try</span> &#123;<br>\t\t\t\t\telementType = ClassUtils.forName(elementTypeName, <span class=\"hljs-keyword\">this</span>.beanFactory.getBeanClassLoader());<br>\t\t\t\t\tarray.resolvedElementType = elementType;<br>\t\t\t\t&#125;<br>\t\t\t\t<span class=\"hljs-keyword\">catch</span> (Throwable ex) &#123;<br>\t\t\t\t\t<span class=\"hljs-comment\">// Improve the message by showing the context.</span><br>\t\t\t\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> BeanCreationException(<br>\t\t\t\t\t\t\t<span class=\"hljs-keyword\">this</span>.beanDefinition.getResourceDescription(), <span class=\"hljs-keyword\">this</span>.beanName,<br>\t\t\t\t\t\t\t<span class=\"hljs-string\">&quot;Error resolving array type for &quot;</span> + argName, ex);<br>\t\t\t\t&#125;<br>\t\t\t&#125;<br>\t\t\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t\t\telementType = Object.class;<br>\t\t\t&#125;<br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">return</span> resolveManagedArray(argName, (List&lt;?&gt;) value, elementType);<br>\t&#125;<br>\t<span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (value <span class=\"hljs-keyword\">instanceof</span> ManagedList) &#123;<br>\t\t<span class=\"hljs-comment\">// May need to resolve contained runtime references.</span><br>\t\t<span class=\"hljs-keyword\">return</span> resolveManagedList(argName, (List&lt;?&gt;) value);<br>\t&#125;<br>\t<span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (value <span class=\"hljs-keyword\">instanceof</span> ManagedSet) &#123;<br>\t\t<span class=\"hljs-comment\">// May need to resolve contained runtime references.</span><br>\t\t<span class=\"hljs-keyword\">return</span> resolveManagedSet(argName, (Set&lt;?&gt;) value);<br>\t&#125;<br>\t<span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (value <span class=\"hljs-keyword\">instanceof</span> ManagedMap) &#123;<br>\t\t<span class=\"hljs-comment\">// May need to resolve contained runtime references.</span><br>\t\t<span class=\"hljs-keyword\">return</span> resolveManagedMap(argName, (Map&lt;?, ?&gt;) value);<br>\t&#125;<br>\t<span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (value <span class=\"hljs-keyword\">instanceof</span> ManagedProperties) &#123;<br>\t\tProperties original = (Properties) value;<br>\t\tProperties copy = <span class=\"hljs-keyword\">new</span> Properties();<br>\t\toriginal.forEach((propKey, propValue) -&gt; &#123;<br>\t\t\t<span class=\"hljs-keyword\">if</span> (propKey <span class=\"hljs-keyword\">instanceof</span> TypedStringValue) &#123;<br>\t\t\t\tpropKey = evaluate((TypedStringValue) propKey);<br>\t\t\t&#125;<br>\t\t\t<span class=\"hljs-keyword\">if</span> (propValue <span class=\"hljs-keyword\">instanceof</span> TypedStringValue) &#123;<br>\t\t\t\tpropValue = evaluate((TypedStringValue) propValue);<br>\t\t\t&#125;<br>\t\t\t<span class=\"hljs-keyword\">if</span> (propKey == <span class=\"hljs-keyword\">null</span> || propValue == <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> BeanCreationException(<br>\t\t\t\t\t\t<span class=\"hljs-keyword\">this</span>.beanDefinition.getResourceDescription(), <span class=\"hljs-keyword\">this</span>.beanName,<br>\t\t\t\t\t\t<span class=\"hljs-string\">&quot;Error converting Properties key/value pair for &quot;</span> + argName + <span class=\"hljs-string\">&quot;: resolved to null&quot;</span>);<br>\t\t\t&#125;<br>\t\t\tcopy.put(propKey, propValue);<br>\t\t&#125;);<br>\t\t<span class=\"hljs-keyword\">return</span> copy;<br>\t&#125;<br>\t<span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (value <span class=\"hljs-keyword\">instanceof</span> TypedStringValue) &#123;<br>\t\t<span class=\"hljs-comment\">// Convert value to target type here.</span><br>\t\tTypedStringValue typedStringValue = (TypedStringValue) value;<br>\t\tObject valueObject = evaluate(typedStringValue);<br>\t\t<span class=\"hljs-keyword\">try</span> &#123;<br>\t\t\tClass&lt;?&gt; resolvedTargetType = resolveTargetType(typedStringValue);<br>\t\t\t<span class=\"hljs-keyword\">if</span> (resolvedTargetType != <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t\t\t<span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">this</span>.typeConverter.convertIfNecessary(valueObject, resolvedTargetType);<br>\t\t\t&#125;<br>\t\t\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t\t\t<span class=\"hljs-keyword\">return</span> valueObject;<br>\t\t\t&#125;<br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">catch</span> (Throwable ex) &#123;<br>\t\t\t<span class=\"hljs-comment\">// Improve the message by showing the context.</span><br>\t\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> BeanCreationException(<br>\t\t\t\t\t<span class=\"hljs-keyword\">this</span>.beanDefinition.getResourceDescription(), <span class=\"hljs-keyword\">this</span>.beanName,<br>\t\t\t\t\t<span class=\"hljs-string\">&quot;Error converting typed String value for &quot;</span> + argName, ex);<br>\t\t&#125;<br>\t&#125;<br>\t<span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (value <span class=\"hljs-keyword\">instanceof</span> NullBean) &#123;<br>\t\t<span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">null</span>;<br>\t&#125;<br>\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t<span class=\"hljs-keyword\">return</span> evaluate(value);<br>\t&#125;<br>&#125;<br><br><br><span class=\"hljs-comment\">// 上面resolveValueIfNecessary方法中调用的resolveReference方法</span><br><span class=\"hljs-comment\">// 最后获取到依赖的bean</span><br><span class=\"hljs-meta\">@Nullable</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">private</span> Object <span class=\"hljs-title\">resolveReference</span><span class=\"hljs-params\">(Object argName, RuntimeBeanReference ref)</span> </span>&#123;<br>\t<span class=\"hljs-keyword\">try</span> &#123;<br>\t\tObject bean;<br>\t\tClass&lt;?&gt; beanType = ref.getBeanType();<br>\t\t<span class=\"hljs-keyword\">if</span> (ref.isToParent()) &#123;<br>\t\t\tBeanFactory parent = <span class=\"hljs-keyword\">this</span>.beanFactory.getParentBeanFactory();<br>\t\t\t<span class=\"hljs-keyword\">if</span> (parent == <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> BeanCreationException(<br>\t\t\t\t\t\t<span class=\"hljs-keyword\">this</span>.beanDefinition.getResourceDescription(), <span class=\"hljs-keyword\">this</span>.beanName,<br>\t\t\t\t\t\t<span class=\"hljs-string\">&quot;Cannot resolve reference to bean &quot;</span> + ref +<br>\t\t\t\t\t\t\t\t<span class=\"hljs-string\">&quot; in parent factory: no parent factory available&quot;</span>);<br>\t\t\t&#125;<br>\t\t\t<span class=\"hljs-keyword\">if</span> (beanType != <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t\t\t<span class=\"hljs-comment\">// 发生递归调用</span><br>\t\t\t\tbean = parent.getBean(beanType);<br>\t\t\t&#125;<br>\t\t\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t\t\t<span class=\"hljs-comment\">// 发生递归调用 根据依赖的名称从BeanFactory中递归得到依赖 最后获取到依赖的bean</span><br>\t\t\t\tbean = parent.getBean(String.valueOf(doEvaluate(ref.getBeanName())));<br>\t\t\t&#125;<br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t\tString resolvedName;<br>\t\t\t<span class=\"hljs-keyword\">if</span> (beanType != <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t\t\tNamedBeanHolder&lt;?&gt; namedBean = <span class=\"hljs-keyword\">this</span>.beanFactory.resolveNamedBean(beanType);<br>\t\t\t\tbean = namedBean.getBeanInstance();<br>\t\t\t\tresolvedName = namedBean.getBeanName();<br>\t\t\t&#125;<br>\t\t\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t\t\tresolvedName = String.valueOf(doEvaluate(ref.getBeanName()));<br>\t\t\t\tbean = <span class=\"hljs-keyword\">this</span>.beanFactory.getBean(resolvedName);<br>\t\t\t&#125;<br>\t\t\t<span class=\"hljs-keyword\">this</span>.beanFactory.registerDependentBean(resolvedName, <span class=\"hljs-keyword\">this</span>.beanName);<br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">if</span> (bean <span class=\"hljs-keyword\">instanceof</span> NullBean) &#123;<br>\t\t\tbean = <span class=\"hljs-keyword\">null</span>;<br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">return</span> bean;<br>\t&#125;<br>\t<span class=\"hljs-keyword\">catch</span> (BeansException ex) &#123;<br>\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> BeanCreationException(<br>\t\t\t\t<span class=\"hljs-keyword\">this</span>.beanDefinition.getResourceDescription(), <span class=\"hljs-keyword\">this</span>.beanName,<br>\t\t\t\t<span class=\"hljs-string\">&quot;Cannot resolve reference to bean &#x27;&quot;</span> + ref.getBeanName() + <span class=\"hljs-string\">&quot;&#x27; while setting &quot;</span> + argName, ex);<br>\t&#125;<br>&#125;<br></code></pre></td></tr></table></figure></li>\n</ul>\n<h4 id=\"AbstractPropertyAccessor的setPropertyValues-PropertyValues-pvs-方法\"><a href=\"#AbstractPropertyAccessor的setPropertyValues-PropertyValues-pvs-方法\" class=\"headerlink\" title=\"AbstractPropertyAccessor的setPropertyValues(PropertyValues pvs)方法\"></a>AbstractPropertyAccessor的setPropertyValues(PropertyValues pvs)方法</h4><ul>\n<li>代码位置：org.springframework.beans.AbstractPropertyAccessor</li>\n<li>循环属性列表 <figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-meta\">@Override</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setPropertyValues</span><span class=\"hljs-params\">(PropertyValues pvs)</span> <span class=\"hljs-keyword\">throws</span> BeansException </span>&#123;<br>\tsetPropertyValues(pvs, <span class=\"hljs-keyword\">false</span>, <span class=\"hljs-keyword\">false</span>);<br>&#125;<br><br><span class=\"hljs-comment\">//  循环属性列表 </span><br><span class=\"hljs-meta\">@Override</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setPropertyValues</span><span class=\"hljs-params\">(PropertyValues pvs, <span class=\"hljs-keyword\">boolean</span> ignoreUnknown, <span class=\"hljs-keyword\">boolean</span> ignoreInvalid)</span></span><br><span class=\"hljs-function\">\t\t<span class=\"hljs-keyword\">throws</span> BeansException </span>&#123;<br><br>\tList&lt;PropertyAccessException&gt; propertyAccessExceptions = <span class=\"hljs-keyword\">null</span>;<br>\tList&lt;PropertyValue&gt; propertyValues = (pvs <span class=\"hljs-keyword\">instanceof</span> MutablePropertyValues ?<br>\t\t\t((MutablePropertyValues) pvs).getPropertyValueList() : Arrays.asList(pvs.getPropertyValues()));<br>    <span class=\"hljs-comment\">// 循环属性列表 </span><br>\t<span class=\"hljs-keyword\">for</span> (PropertyValue pv : propertyValues) &#123;<br>\t\t<span class=\"hljs-keyword\">try</span> &#123;<br>\t\t\t<span class=\"hljs-comment\">// This method may throw any BeansException, which won&#x27;t be caught</span><br>\t\t\t<span class=\"hljs-comment\">// here, if there is a critical failure such as no matching field.</span><br>\t\t\t<span class=\"hljs-comment\">// We can attempt to deal only with less serious exceptions.</span><br>\t\t\t<span class=\"hljs-comment\">// 该方法通过AbstractNestablePropertyAccessor的setPropertyValue(PropertyValue pv)方法实现</span><br>\t\t\tsetPropertyValue(pv);<br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">catch</span> (NotWritablePropertyException ex) &#123;<br>\t\t\t<span class=\"hljs-keyword\">if</span> (!ignoreUnknown) &#123;<br>\t\t\t\t<span class=\"hljs-keyword\">throw</span> ex;<br>\t\t\t&#125;<br>\t\t\t<span class=\"hljs-comment\">// Otherwise, just ignore it and continue...</span><br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">catch</span> (NullValueInNestedPathException ex) &#123;<br>\t\t\t<span class=\"hljs-keyword\">if</span> (!ignoreInvalid) &#123;<br>\t\t\t\t<span class=\"hljs-keyword\">throw</span> ex;<br>\t\t\t&#125;<br>\t\t\t<span class=\"hljs-comment\">// Otherwise, just ignore it and continue...</span><br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">catch</span> (PropertyAccessException ex) &#123;<br>\t\t\t<span class=\"hljs-keyword\">if</span> (propertyAccessExceptions == <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t\t\tpropertyAccessExceptions = <span class=\"hljs-keyword\">new</span> ArrayList&lt;&gt;();<br>\t\t\t&#125;<br>\t\t\tpropertyAccessExceptions.add(ex);<br>\t\t&#125;<br>\t&#125;<br><br>\t<span class=\"hljs-comment\">// If we encountered individual exceptions, throw the composite exception.</span><br>\t<span class=\"hljs-keyword\">if</span> (propertyAccessExceptions != <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\tPropertyAccessException[] paeArray = propertyAccessExceptions.toArray(<span class=\"hljs-keyword\">new</span> PropertyAccessException[<span class=\"hljs-number\">0</span>]);<br>\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> PropertyBatchUpdateException(paeArray);<br>\t&#125;<br>&#125;<br></code></pre></td></tr></table></figure></li>\n</ul>\n<h4 id=\"AbstractNestablePropertyAccessor的-setPropertyValue-PropertyValue-pv-方法\"><a href=\"#AbstractNestablePropertyAccessor的-setPropertyValue-PropertyValue-pv-方法\" class=\"headerlink\" title=\"AbstractNestablePropertyAccessor的 setPropertyValue(PropertyValue pv)方法\"></a>AbstractNestablePropertyAccessor的 setPropertyValue(PropertyValue pv)方法</h4><ul>\n<li>代码位置：org.springframework.beans.AbstractNestablePropertyAccessor<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-meta\">@Override</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setPropertyValue</span><span class=\"hljs-params\">(PropertyValue pv)</span> <span class=\"hljs-keyword\">throws</span> BeansException </span>&#123;<br>\t\tPropertyTokenHolder tokens = (PropertyTokenHolder) pv.resolvedTokens;<br>\t\t<span class=\"hljs-keyword\">if</span> (tokens == <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\t\tString propertyName = pv.getName();<br>\t\t\tAbstractNestablePropertyAccessor nestedPa;<br>\t\t\t<span class=\"hljs-keyword\">try</span> &#123;<br>\t\t\t\tnestedPa = getPropertyAccessorForPropertyPath(propertyName);<br>\t\t\t&#125;<br>\t\t\t<span class=\"hljs-keyword\">catch</span> (NotReadablePropertyException ex) &#123;<br>\t\t\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> NotWritablePropertyException(getRootClass(), <span class=\"hljs-keyword\">this</span>.nestedPath + propertyName,<br>\t\t\t\t\t\t<span class=\"hljs-string\">&quot;Nested property in path &#x27;&quot;</span> + propertyName + <span class=\"hljs-string\">&quot;&#x27; does not exist&quot;</span>, ex);<br>\t\t\t&#125;<br>\t\t\ttokens = getPropertyNameTokens(getFinalPath(nestedPa, propertyName));<br>\t\t\t<span class=\"hljs-keyword\">if</span> (nestedPa == <span class=\"hljs-keyword\">this</span>) &#123;<br>\t\t\t\tpv.getOriginalPropertyValue().resolvedTokens = tokens;<br>\t\t\t&#125;<br>\t\t\tnestedPa.setPropertyValue(tokens, pv);<br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t\tsetPropertyValue(tokens, pv);<br>\t\t&#125;<br>\t&#125;<br></code></pre></td></tr></table></figure>\n########################################################################################################################################</li>\n<li>上面setPropertyValue(PropertyValue pv)方法的重载方法setPropertyValue(PropertyTokenHolder tokens, PropertyValue pv)<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">protected</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setPropertyValue</span><span class=\"hljs-params\">(PropertyTokenHolder tokens, PropertyValue pv)</span> <span class=\"hljs-keyword\">throws</span> BeansException </span>&#123;<br>\t<span class=\"hljs-keyword\">if</span> (tokens.keys != <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\tprocessKeyedProperty(tokens, pv);<br>\t&#125;<br>\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\tprocessLocalProperty(tokens, pv);<br>\t&#125;<br>&#125;<br></code></pre></td></tr></table></figure></li>\n<li>processLocalProperty(PropertyTokenHolder tokens, PropertyValue pv)方法<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">processLocalProperty</span><span class=\"hljs-params\">(PropertyTokenHolder tokens, PropertyValue pv)</span> </span>&#123;<br>\tPropertyHandler ph = getLocalPropertyHandler(tokens.actualName);<br>\t<span class=\"hljs-keyword\">if</span> (ph == <span class=\"hljs-keyword\">null</span> || !ph.isWritable()) &#123;<br>\t\t<span class=\"hljs-keyword\">if</span> (pv.isOptional()) &#123;<br>\t\t\t<span class=\"hljs-keyword\">if</span> (logger.isDebugEnabled()) &#123;<br>\t\t\t\tlogger.debug(<span class=\"hljs-string\">&quot;Ignoring optional value for property &#x27;&quot;</span> + tokens.actualName +<br>\t\t\t\t\t\t<span class=\"hljs-string\">&quot;&#x27; - property not found on bean class [&quot;</span> + getRootClass().getName() + <span class=\"hljs-string\">&quot;]&quot;</span>);<br>\t\t\t&#125;<br>\t\t\t<span class=\"hljs-keyword\">return</span>;<br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t\t<span class=\"hljs-keyword\">throw</span> createNotWritablePropertyException(tokens.canonicalName);<br>\t\t&#125;<br>\t&#125;<br><br>\tObject oldValue = <span class=\"hljs-keyword\">null</span>;<br>\t<span class=\"hljs-keyword\">try</span> &#123;<br>\t\tObject originalValue = pv.getValue();<span class=\"hljs-comment\">//</span><br>\t\tObject valueToApply = originalValue;<span class=\"hljs-comment\">//</span><br>\t\t<span class=\"hljs-keyword\">if</span> (!Boolean.FALSE.equals(pv.conversionNecessary)) &#123;<br>\t\t\t<span class=\"hljs-keyword\">if</span> (pv.isConverted()) &#123;<br>\t\t\t\tvalueToApply = pv.getConvertedValue();<br>\t\t\t&#125;<br>\t\t\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t\t\t<span class=\"hljs-keyword\">if</span> (isExtractOldValueForEditor() &amp;&amp; ph.isReadable()) &#123;<br>\t\t\t\t\t<span class=\"hljs-keyword\">try</span> &#123;<br>\t\t\t\t\t\toldValue = ph.getValue();<br>\t\t\t\t\t&#125;<br>\t\t\t\t\t<span class=\"hljs-keyword\">catch</span> (Exception ex) &#123;<br>\t\t\t\t\t\t<span class=\"hljs-keyword\">if</span> (ex <span class=\"hljs-keyword\">instanceof</span> PrivilegedActionException) &#123;<br>\t\t\t\t\t\t\tex = ((PrivilegedActionException) ex).getException();<br>\t\t\t\t\t\t&#125;<br>\t\t\t\t\t\t<span class=\"hljs-keyword\">if</span> (logger.isDebugEnabled()) &#123;<br>\t\t\t\t\t\t\tlogger.debug(<span class=\"hljs-string\">&quot;Could not read previous value of property &#x27;&quot;</span> +<br>\t\t\t\t\t\t\t\t\t<span class=\"hljs-keyword\">this</span>.nestedPath + tokens.canonicalName + <span class=\"hljs-string\">&quot;&#x27;&quot;</span>, ex);<br>\t\t\t\t\t\t&#125;<br>\t\t\t\t\t&#125;<br>\t\t\t\t&#125;<br>\t\t\t\tvalueToApply = convertForProperty(<br>\t\t\t\t\t\ttokens.canonicalName, oldValue, originalValue, ph.toTypeDescriptor());<br>\t\t\t&#125;<br>\t\t\tpv.getOriginalPropertyValue().conversionNecessary = (valueToApply != originalValue);<br>\t\t&#125;<br>\t\tph.setValue(valueToApply);<span class=\"hljs-comment\">// 具体代码在下方列出</span><br>\t&#125;<br>\t<span class=\"hljs-keyword\">catch</span> (TypeMismatchException ex) &#123;<br>\t\t<span class=\"hljs-keyword\">throw</span> ex;<br>\t&#125;<br>\t<span class=\"hljs-keyword\">catch</span> (InvocationTargetException ex) &#123;<br>\t\tPropertyChangeEvent propertyChangeEvent = <span class=\"hljs-keyword\">new</span> PropertyChangeEvent(<br>\t\t\t\tgetRootInstance(), <span class=\"hljs-keyword\">this</span>.nestedPath + tokens.canonicalName, oldValue, pv.getValue());<br>\t\t<span class=\"hljs-keyword\">if</span> (ex.getTargetException() <span class=\"hljs-keyword\">instanceof</span> ClassCastException) &#123;<br>\t\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> TypeMismatchException(propertyChangeEvent, ph.getPropertyType(), ex.getTargetException());<br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\t\tThrowable cause = ex.getTargetException();<br>\t\t\t<span class=\"hljs-keyword\">if</span> (cause <span class=\"hljs-keyword\">instanceof</span> UndeclaredThrowableException) &#123;<br>\t\t\t\t<span class=\"hljs-comment\">// May happen e.g. with Groovy-generated methods</span><br>\t\t\t\tcause = cause.getCause();<br>\t\t\t&#125;<br>\t\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> MethodInvocationException(propertyChangeEvent, cause);<br>\t\t&#125;<br>\t&#125;<br>\t<span class=\"hljs-keyword\">catch</span> (Exception ex) &#123;<br>\t\tPropertyChangeEvent pce = <span class=\"hljs-keyword\">new</span> PropertyChangeEvent(<br>\t\t\t\tgetRootInstance(), <span class=\"hljs-keyword\">this</span>.nestedPath + tokens.canonicalName, oldValue, pv.getValue());<br>\t\t<span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> MethodInvocationException(pce, ex);<br>\t&#125;<br>&#125;<br></code></pre></td></tr></table></figure></li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul>\n<li>上述ph.setValue方法在org.springframework.beans.AbstractNestablePropertyAccessor抽象类中定义</li>\n<li>public abstract void setValue(@Nullable Object value) throws Exception; </li>\n<li>一个具体实现在org.springframework.beans.BeanWrapperImp的内部类BeanPropertyHandler中，完整代码如下：<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">final</span> PropertyDescriptor pd;  <span class=\"hljs-comment\">//BeanPropertyHandler中的字段</span><br><br><span class=\"hljs-meta\">@Override</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setValue</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">final</span> <span class=\"hljs-meta\">@Nullable</span> Object value)</span> <span class=\"hljs-keyword\">throws</span> Exception </span>&#123;<br>\t<span class=\"hljs-keyword\">final</span> Method writeMethod = (<span class=\"hljs-keyword\">this</span>.pd <span class=\"hljs-keyword\">instanceof</span> GenericTypeAwarePropertyDescriptor ?<br>\t\t\t((GenericTypeAwarePropertyDescriptor) <span class=\"hljs-keyword\">this</span>.pd).getWriteMethodForActualAccess() :<br>\t\t\t<span class=\"hljs-keyword\">this</span>.pd.getWriteMethod());<span class=\"hljs-comment\">// 找到属性的set方法</span><br>\t<span class=\"hljs-keyword\">if</span> (System.getSecurityManager() != <span class=\"hljs-keyword\">null</span>) &#123;<br>\t\tAccessController.doPrivileged((PrivilegedAction&lt;Object&gt;) () -&gt; &#123;<br>\t\t\tReflectionUtils.makeAccessible(writeMethod);<br>\t\t\t<span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">null</span>;<br>\t\t&#125;);<br>\t\t<span class=\"hljs-keyword\">try</span> &#123;<br>\t\t\tAccessController.doPrivileged((PrivilegedExceptionAction&lt;Object&gt;) () -&gt;<br>\t\t\t\t\twriteMethod.invoke(getWrappedInstance(), value), acc);<br>\t\t\t\t\t<span class=\"hljs-comment\">// 调用Method的invoke方法，完成属性注入</span><br>\t\t&#125;<br>\t\t<span class=\"hljs-keyword\">catch</span> (PrivilegedActionException ex) &#123;<br>\t\t\t<span class=\"hljs-keyword\">throw</span> ex.getException();<br>\t\t&#125;<br>\t&#125;<br>\t<span class=\"hljs-keyword\">else</span> &#123;<br>\t\tReflectionUtils.makeAccessible(writeMethod);<br>\t\twriteMethod.invoke(getWrappedInstance(), value);<span class=\"hljs-comment\">//调用Method的invoke方法，完成属性注入</span><br>\t&#125;<br>&#125;<br></code></pre></td></tr></table></figure></li>\n<li>至此Ioc容器的启动过程基本结束</li>\n</ul>\n<h1 id=\"15-finishRefresh-方法\"><a href=\"#15-finishRefresh-方法\" class=\"headerlink\" title=\"15. finishRefresh();方法\"></a>15. finishRefresh();方法</h1><ul>\n<li>org.springframework.context.support.AbstractApplicationContext中的finishRefresh()方法</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">protected</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">finishRefresh</span><span class=\"hljs-params\">()</span> </span>&#123;<br>\t<span class=\"hljs-comment\">// Clear context-level resource caches (such as ASM metadata from scanning).</span><br>\tclearResourceCaches();<br><br>\t<span class=\"hljs-comment\">// Initialize lifecycle processor for this context.</span><br>\tinitLifecycleProcessor();<br><br>\t<span class=\"hljs-comment\">// Propagate refresh to lifecycle processor first.</span><br>\tgetLifecycleProcessor().onRefresh();<br><br>\t<span class=\"hljs-comment\">// Publish the final event.</span><br>\tpublishEvent(<span class=\"hljs-keyword\">new</span> ContextRefreshedEvent(<span class=\"hljs-keyword\">this</span>));<br><br>\t<span class=\"hljs-comment\">// Participate in LiveBeansView MBean, if active.</span><br>\tLiveBeansView.registerApplicationContext(<span class=\"hljs-keyword\">this</span>);<br>&#125;<br></code></pre></td></tr></table></figure>\n\n\n<h1 id=\"16refresh-过程抛出异常时\"><a href=\"#16refresh-过程抛出异常时\" class=\"headerlink\" title=\"16refresh()过程抛出异常时\"></a>16refresh()过程抛出异常时</h1><ul>\n<li>之中有两个处理方法destroyBeans()和cancelRefresh(ex)</li>\n</ul>\n<h2 id=\"16-1-destroyBeans-方法\"><a href=\"#16-1-destroyBeans-方法\" class=\"headerlink\" title=\"16.1 destroyBeans();方法\"></a>16.1 destroyBeans();方法</h2><ul>\n<li>org.springframework.context.support.AbstractApplicationContext中的destroyBeans()方法</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">protected</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">destroyBeans</span><span class=\"hljs-params\">()</span> </span>&#123;<br>\tgetBeanFactory().destroySingletons();<br>&#125;<br></code></pre></td></tr></table></figure>\n\n<h2 id=\"16-2-cancelRefresh-ex-方法\"><a href=\"#16-2-cancelRefresh-ex-方法\" class=\"headerlink\" title=\"16.2 cancelRefresh(ex);方法\"></a>16.2 cancelRefresh(ex);方法</h2><ul>\n<li>org.springframework.context.support.AbstractApplicationContext中的cancelRefresh(ex)方法<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">protected</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">cancelRefresh</span><span class=\"hljs-params\">(BeansException ex)</span> </span>&#123;<br>\t<span class=\"hljs-keyword\">this</span>.active.set(<span class=\"hljs-keyword\">false</span>);<br>&#125;<br></code></pre></td></tr></table></figure>\n<h2 id=\"16-3抛出异常BeansException\"><a href=\"#16-3抛出异常BeansException\" class=\"headerlink\" title=\"16.3抛出异常BeansException\"></a>16.3抛出异常BeansException</h2></li>\n</ul>\n<h1 id=\"17-resetCommonCaches-方法\"><a href=\"#17-resetCommonCaches-方法\" class=\"headerlink\" title=\"17 resetCommonCaches();方法\"></a>17 resetCommonCaches();方法</h1><ul>\n<li>org.springframework.context.support.AbstractApplicationContext中的resetCommonCaches()方法</li>\n<li>try-catch-finally代码块中finally包裹的方法<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">protected</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">resetCommonCaches</span><span class=\"hljs-params\">()</span> </span>&#123;<br>\tReflectionUtils.clearCache();<br>\tAnnotationUtils.clearCache();<br>\tResolvableType.clearCache();<br>\tCachedIntrospectionResults.clearClassLoader(getClassLoader());<br>&#125;<br></code></pre></td></tr></table></figure></li>\n<li>执行到此Ioc容器启动完成，可以正式投入使用</li>\n</ul>\n<h1 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h1><ul>\n<li>Ioc的底层原理实现：Spring Ioc启动分为两步：<ul>\n<li>1.创建BeanFactory</li>\n<li>2.实例化Bean</li>\n</ul>\n</li>\n<li>Spring的Bean在内存中的状态就是BeanDefination</li>\n<li>在Bean的创建和依赖注入的过程中，需要根据BeanDefination的信息来递归的完成依赖注入，从代码可以看到，这些递归都是以getBean()为入口的，一个递归是在上下文体系中查找需要的bean和bean的依赖关系；另一个递归是在依赖注入时，通过递归调用容器的getBean方法得到当前依赖的Bean，同时也触发对依赖bean的创建和注入。在对bean的属性进行依赖注入时，解析过程也是一个递归过程，这样根据依赖关系，一层一层的完成Bean的创建和注入，直到当前bean相关的整个依赖链的注入完成。由于整个IoC容器启动过程较为复杂，使用下面的一张图来描述让读者更清楚厘清IoC容器的启动过程。</li>\n</ul>\n<p><img src=\"/Blog/static/image/20191125/BeanFactoryInitFlowChart.png\" alt=\"Ioc容器启动过程\"></p>\n<h3 id=\"模板\"><a href=\"#模板\" class=\"headerlink\" title=\"模板\"></a>模板</h3><ul>\n<li><p>代码位置:org.springframework.context.support.AbstractApplicationContext.java</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">protected</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">postProcessBeanFactory</span><span class=\"hljs-params\">(ConfigurableListableBeanFactory beanFactory)</span> </span>&#123;<br>\t<br>&#125;<br></code></pre></td></tr></table></figure></li>\n<li><p>代码位置:org.springframework.context.support.AbstractApplicationContext.java</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><br></code></pre></td></tr></table></figure></li>\n<li><p>代码位置:.java</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><br></code></pre></td></tr></table></figure></li>\n<li><p>代码位置:.java</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><br></code></pre></td></tr></table></figure></li>\n</ul>\n<h1 id=\"参考资料\"><a href=\"#参考资料\" class=\"headerlink\" title=\"参考资料\"></a>参考资料</h1><ul>\n<li>Spring源码深度解析（第二版） 郝佳</li>\n<li>Spring5企业级开发实战 周冠亚 黄文毅 <a href=\"https://github.com/online-demo/spring5projectdemo\">配套源码</a></li>\n<li>Gitee同步版本：<a href=\"https://gitee.com/ACANX/spring5projectdemo\">https://gitee.com/ACANX/spring5projectdemo</a></li>\n</ul>\n"},{"title":"使用Hexo发布Markdown文档","date":"2025-03-20T04:00:00.000Z","description":"使用Hexo编写技术文档，常用操作说明","_content":"\nHexo 是一个快速、简洁且高效的博客框架。 Hexo 使用 [Markdown](http://daringfireball.net/projects/markdown/)（或其他标记语言）解析文章，在几秒内，即可利用靓丽的主题生成静态网页。\n\n\n## 快速开始\n\n### 新建一篇文章\n\n命令格式\n\n``` bash\n$ hexo new [layout] <title>\n```\n\n如果没有设置 layout 的话，默认使用 _config.yml 中的 default_layout 参数代替。 使用布局 draft 来创建草稿。 如果标题包含空格的话，请使用引号括起来。\n\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\n更多信息参考: [Writing](https://hexo.io/docs/writing.html)\n\n\n\n### 启动服务器\n\n\n``` bash\n$ hexo server\n```\n\n默认情况下，访问网址为： http://localhost:4000/。更多信息参考: [Server](https://hexo.io/docs/server.html)\n\n\n\n### 生成静态文件\n\n\n``` bash\n$ hexo generate\n```\n\n更多信息参考: [Generating](https://hexo.io/docs/generating.html)\n\n\n\n### 部署站点\n\n``` bash\n$ hexo deploy\n```\n\n更多信息参考: [Deployment](https://hexo.io/docs/deployment.html)\n\n\n### 更多推荐的主题\n\n- [hexo-theme-aria](https://github.com/AlynxZhou/hexo-theme-aria/)\n\n\n\n### 获取帮助\n\n使用 [Hexo](https://hexo.io/)! 使用快速上手 [文档](https://hexo.io/docs/) ，遇到问题可查看 [troubleshooting](https://hexo.io/docs/troubleshooting.html) 中的解答，或者在 [GitHub](https://github.com/hexojs/hexo/issues) 上提问。\n\n","source":"_posts/使用Hexo发布Markdown文档.md","raw":"---\ntitle: 使用Hexo发布Markdown文档\ndate: 2025-03-20 12:00:00\ncategories: \"Markdown\" # 文章分类目录 可以省略\ntags: \n     - Hexo\n     - Markdown\n     - 静态站点生成器\ndescription: 使用Hexo编写技术文档，常用操作说明  #\n---\n\nHexo 是一个快速、简洁且高效的博客框架。 Hexo 使用 [Markdown](http://daringfireball.net/projects/markdown/)（或其他标记语言）解析文章，在几秒内，即可利用靓丽的主题生成静态网页。\n\n\n## 快速开始\n\n### 新建一篇文章\n\n命令格式\n\n``` bash\n$ hexo new [layout] <title>\n```\n\n如果没有设置 layout 的话，默认使用 _config.yml 中的 default_layout 参数代替。 使用布局 draft 来创建草稿。 如果标题包含空格的话，请使用引号括起来。\n\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\n更多信息参考: [Writing](https://hexo.io/docs/writing.html)\n\n\n\n### 启动服务器\n\n\n``` bash\n$ hexo server\n```\n\n默认情况下，访问网址为： http://localhost:4000/。更多信息参考: [Server](https://hexo.io/docs/server.html)\n\n\n\n### 生成静态文件\n\n\n``` bash\n$ hexo generate\n```\n\n更多信息参考: [Generating](https://hexo.io/docs/generating.html)\n\n\n\n### 部署站点\n\n``` bash\n$ hexo deploy\n```\n\n更多信息参考: [Deployment](https://hexo.io/docs/deployment.html)\n\n\n### 更多推荐的主题\n\n- [hexo-theme-aria](https://github.com/AlynxZhou/hexo-theme-aria/)\n\n\n\n### 获取帮助\n\n使用 [Hexo](https://hexo.io/)! 使用快速上手 [文档](https://hexo.io/docs/) ，遇到问题可查看 [troubleshooting](https://hexo.io/docs/troubleshooting.html) 中的解答，或者在 [GitHub](https://github.com/hexojs/hexo/issues) 上提问。\n\n","slug":"使用Hexo发布Markdown文档","published":1,"updated":"2025-03-26T06:43:53.003Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cm8pr0j2f001dgskz9to00nud","content":"<p>Hexo 是一个快速、简洁且高效的博客框架。 Hexo 使用 <a href=\"http://daringfireball.net/projects/markdown/\">Markdown</a>（或其他标记语言）解析文章，在几秒内，即可利用靓丽的主题生成静态网页。</p>\n<h2 id=\"快速开始\"><a href=\"#快速开始\" class=\"headerlink\" title=\"快速开始\"></a>快速开始</h2><h3 id=\"新建一篇文章\"><a href=\"#新建一篇文章\" class=\"headerlink\" title=\"新建一篇文章\"></a>新建一篇文章</h3><p>命令格式</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">$ hexo new [layout] &lt;title&gt;<br></code></pre></td></tr></table></figure>\n\n<p>如果没有设置 layout 的话，默认使用 _config.yml 中的 default_layout 参数代替。 使用布局 draft 来创建草稿。 如果标题包含空格的话，请使用引号括起来。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">$ hexo new <span class=\"hljs-string\">&quot;My New Post&quot;</span><br></code></pre></td></tr></table></figure>\n\n<p>更多信息参考: <a href=\"https://hexo.io/docs/writing.html\">Writing</a></p>\n<h3 id=\"启动服务器\"><a href=\"#启动服务器\" class=\"headerlink\" title=\"启动服务器\"></a>启动服务器</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">$ hexo server<br></code></pre></td></tr></table></figure>\n\n<p>默认情况下，访问网址为： <a href=\"http://localhost:4000/%E3%80%82%E6%9B%B4%E5%A4%9A%E4%BF%A1%E6%81%AF%E5%8F%82%E8%80%83\">http://localhost:4000/。更多信息参考</a>: <a href=\"https://hexo.io/docs/server.html\">Server</a></p>\n<h3 id=\"生成静态文件\"><a href=\"#生成静态文件\" class=\"headerlink\" title=\"生成静态文件\"></a>生成静态文件</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">$ hexo generate<br></code></pre></td></tr></table></figure>\n\n<p>更多信息参考: <a href=\"https://hexo.io/docs/generating.html\">Generating</a></p>\n<h3 id=\"部署站点\"><a href=\"#部署站点\" class=\"headerlink\" title=\"部署站点\"></a>部署站点</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">$ hexo deploy<br></code></pre></td></tr></table></figure>\n\n<p>更多信息参考: <a href=\"https://hexo.io/docs/deployment.html\">Deployment</a></p>\n<h3 id=\"更多推荐的主题\"><a href=\"#更多推荐的主题\" class=\"headerlink\" title=\"更多推荐的主题\"></a>更多推荐的主题</h3><ul>\n<li><a href=\"https://github.com/AlynxZhou/hexo-theme-aria/\">hexo-theme-aria</a></li>\n</ul>\n<h3 id=\"获取帮助\"><a href=\"#获取帮助\" class=\"headerlink\" title=\"获取帮助\"></a>获取帮助</h3><p>使用 <a href=\"https://hexo.io/\">Hexo</a>! 使用快速上手 <a href=\"https://hexo.io/docs/\">文档</a> ，遇到问题可查看 <a href=\"https://hexo.io/docs/troubleshooting.html\">troubleshooting</a> 中的解答，或者在 <a href=\"https://github.com/hexojs/hexo/issues\">GitHub</a> 上提问。</p>\n","site":{"data":{}},"excerpt":"","more":"<p>Hexo 是一个快速、简洁且高效的博客框架。 Hexo 使用 <a href=\"http://daringfireball.net/projects/markdown/\">Markdown</a>（或其他标记语言）解析文章，在几秒内，即可利用靓丽的主题生成静态网页。</p>\n<h2 id=\"快速开始\"><a href=\"#快速开始\" class=\"headerlink\" title=\"快速开始\"></a>快速开始</h2><h3 id=\"新建一篇文章\"><a href=\"#新建一篇文章\" class=\"headerlink\" title=\"新建一篇文章\"></a>新建一篇文章</h3><p>命令格式</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">$ hexo new [layout] &lt;title&gt;<br></code></pre></td></tr></table></figure>\n\n<p>如果没有设置 layout 的话，默认使用 _config.yml 中的 default_layout 参数代替。 使用布局 draft 来创建草稿。 如果标题包含空格的话，请使用引号括起来。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">$ hexo new <span class=\"hljs-string\">&quot;My New Post&quot;</span><br></code></pre></td></tr></table></figure>\n\n<p>更多信息参考: <a href=\"https://hexo.io/docs/writing.html\">Writing</a></p>\n<h3 id=\"启动服务器\"><a href=\"#启动服务器\" class=\"headerlink\" title=\"启动服务器\"></a>启动服务器</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">$ hexo server<br></code></pre></td></tr></table></figure>\n\n<p>默认情况下，访问网址为： <a href=\"http://localhost:4000/%E3%80%82%E6%9B%B4%E5%A4%9A%E4%BF%A1%E6%81%AF%E5%8F%82%E8%80%83\">http://localhost:4000/。更多信息参考</a>: <a href=\"https://hexo.io/docs/server.html\">Server</a></p>\n<h3 id=\"生成静态文件\"><a href=\"#生成静态文件\" class=\"headerlink\" title=\"生成静态文件\"></a>生成静态文件</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">$ hexo generate<br></code></pre></td></tr></table></figure>\n\n<p>更多信息参考: <a href=\"https://hexo.io/docs/generating.html\">Generating</a></p>\n<h3 id=\"部署站点\"><a href=\"#部署站点\" class=\"headerlink\" title=\"部署站点\"></a>部署站点</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">$ hexo deploy<br></code></pre></td></tr></table></figure>\n\n<p>更多信息参考: <a href=\"https://hexo.io/docs/deployment.html\">Deployment</a></p>\n<h3 id=\"更多推荐的主题\"><a href=\"#更多推荐的主题\" class=\"headerlink\" title=\"更多推荐的主题\"></a>更多推荐的主题</h3><ul>\n<li><a href=\"https://github.com/AlynxZhou/hexo-theme-aria/\">hexo-theme-aria</a></li>\n</ul>\n<h3 id=\"获取帮助\"><a href=\"#获取帮助\" class=\"headerlink\" title=\"获取帮助\"></a>获取帮助</h3><p>使用 <a href=\"https://hexo.io/\">Hexo</a>! 使用快速上手 <a href=\"https://hexo.io/docs/\">文档</a> ，遇到问题可查看 <a href=\"https://hexo.io/docs/troubleshooting.html\">troubleshooting</a> 中的解答，或者在 <a href=\"https://github.com/hexojs/hexo/issues\">GitHub</a> 上提问。</p>\n"},{"title":"使用MkDocs发布Markdown文档","date":"2025-03-20T05:00:00.000Z","description":"使用MkDocs编写技术文档，常用操作说明","_content":"\n[MkDocs](https://www.mkdocs.org/) 是一款快速、简单且极其出色的静态站点生成器，旨在构建项目文档。文档源文件以 Markdown 编写，并使用单个 YAML 配置文件进行配置。首先阅读[入门教程](https://www.mkdocs.org/getting-started/)，然后查看 [用户指南](https://www.mkdocs.org/user-guide/)以了解更多信息。\n\n\n# 安装\n\n要安装 MkDocs，请从命令行运行以下命令：\n\n```bash\npip install mkdocs\n```\n\n有关详细信息，请参阅安装指南。\n\n# 创建新项目\n\n入门非常简单。要创建新项目，请从命令行运行以下命令：\n\n```bash\nmkdocs new my-project\ncd my-project\n```\n\n请花一点时间来检查一下为您创建的初始项目。\n\n![layout](https://www.mkdocs.org/img/initial-layout.png)\n\n\n## 初始 MkDocs 布局\n\n有一个名为 的配置文件mkdocs.yml，以及一个名为 的文件夹 docs，其中包含您的文档源文件（是docs_dirdocs配置设置的默认值）。目前，该 文件夹仅包含一个名为 的文档页面。docsindex.md\n\nMkDocs 带有内置开发服务器，可让您在处理文档时预览文档。确保您与mkdocs.yml 配置文件位于同一目录中，然后通过运行以下命令启动服务器mkdocs serve ：\n\n```bash\n$ mkdocs serve\nINFO    -  Building documentation...\nINFO    -  Cleaning site directory\nINFO    -  Documentation built in 0.22 seconds\nINFO    -  [15:50:43] Watching paths for changes: 'docs', 'mkdocs.yml'\nINFO    -  [15:50:43] Serving on http://127.0.0.1:8000/\n```\n\n在浏览器中打开http://127.0.0.1:8000/，您将看到显示的默认主页：\n\n![screenshot](https://www.mkdocs.org/img/screenshot.png)\n\n## MkDocs 实时服务器\n\n开发服务器还支持自动重新加载，并且只要配置文件、文档目录或主题目录中的任何内容发生变化，就会重建您的文档。\n\n在您选择的文本编辑器中打开docs/index.md文档，将初始标题更改为MkLorum，然后保存更改。您的浏览器将自动重新加载，您应该立即看到更新后的文档。\n\n现在尝试编辑配置文件：mkdocs.yml。将设置更改 site_name为MkLorum并保存文件。\n\n```yaml\nsite_name: MkLorum\n```\n\n您的浏览器应立即重新加载，并且您将看到新的网站名称生效。\n\n\n\n```yaml\nsite_name 设置\n```\n![site-name](https://www.mkdocs.org/img/site-name.png)\n\n注意：配置选项site_name是配置文件中唯一必需的选项。\n\n## 添加页面\n\n现在向您的文档添加第二页：\n\n```bash\ncurl 'https://jaspervdj.be/lorem-markdownum/markdown.txt' > docs/about.md\n```\n\n由于我们的文档站点将包含一些导航标题，您可能需要编辑配置文件并通过添加设置来添加有关导航标题中每个页面的顺序、标题和嵌套的一些信息nav ：\n\n```yaml\nsite_name: MkLorum\nnav:\n  - Home: index.md\n  - About: about.md\n```\n\n保存更改，您将看到一个导航栏， 左侧有Home和项目，右侧有、和项目。AboutSearchPreviousNext\n\n![multipage](https://www.mkdocs.org/img/multipage.png)\n\n尝试菜单项并在页面之间来回导航。然后点击 Search。将出现一个搜索对话框，允许您搜索任何页面上的任何文本。请注意，搜索结果包括网站上搜索词的每次出现，并直接链接到搜索词出现的页面部分。您无需付出任何努力或进行任何配置即可获得所有这些！\n\n![search](https://www.mkdocs.org/img/search.png)\n\n## 主题化我们的文档\n现在通过更改主题来更改配置文件以改变文档的显示方式。编辑mkdocs.yml文件并添加theme设置：\n\n```yaml\nsite_name: MkLorum\nnav:\n  - Home: index.md\n  - About: about.md\ntheme: readthedocs\n```\n\n保存您的更改，您将看到正在使用的 ReadTheDocs 主题。\n\n![readthedocs](https://www.mkdocs.org/img/readthedocs.png)\n\n\n### 更多推荐的主题\n\n- [mkdocs-material](https://squidfunk.github.io/mkdocs-material/)\n\n\n## 更改网站图标\n\n默认情况下，MkDocs 使用MkDocs 网站图标。要使用其他图标，请在目录img中创建一个子目录docs并将您的自定义文件复制favicon.ico 到该目录。MkDocs 将自动检测并使用该文件作为您的网站图标。\n\n## 建立网站\n看起来不错。您已准备好部署文档的第一遍MkLorum 。首先构建文档：\n\n```bash\nmkdocs build\n```\n\n这将创建一个名为 的新目录site。查看目录内部：\n\n```bash\n$ ls site\nabout  fonts  index.html  license  search.html\ncss    img    js          mkdocs   sitemap.xml\n```\n\n请注意，您的源文档已输出为两个 HTML 文件，分别名为 index.html和about/index.html。您还有各种其他媒体已复制到site目录中作为文档主题的一部分。您甚至有一个sitemap.xml文件和mkdocs/search_index.json。\n\n如果您使用源代码控制，例如git您可能不想将您的文档构建检查到存储库中。 site/在您的.gitignore文件中添加一行。\n\n```bash\necho \"site/\" >> .gitignore\n```\n\n如果您正在使用其他源代码控制工具，您将需要检查其文档以了解如何忽略特定目录。\n\n## 其他命令和选项\n还有各种其他命令和选项可用。要获取完整的命令列表，请使用以下--help标志：\n\n```bash\nmkdocs --help\n```\n\n要查看给定命令的可用选项列表，请将--help标志与该命令一起使用。例如，要获取该命令可用的所有选项的列表， build请运行以下命令：\n\n```bash\nmkdocs build --help\n```\n\n# 部署\n\n您刚刚构建的文档站点仅使用静态文件，因此您几乎可以从任何地方托管它。只需将整个site目录的内容上传到您托管网站的任何位置即可。有关一些常见主机的具体说明，请参阅 部署文档页面。\n\n\n# 获取帮助\n\n请参阅 [用户指南](https://www.mkdocs.org/user-guide/) 以获取有关 MkDocs 所有功能的更完整文档。\n\n要获得有关 MkDocs 的帮助，请使用 [GitHub Discussions](https://github.com/mkdocs/mkdocs/discussions) 或 [GitHub Issues](https://github.com/mkdocs/mkdocs/issues)。","source":"_posts/使用MKDocs发布Markdown文档.md","raw":"---\ntitle: 使用MkDocs发布Markdown文档\ndate: 2025-03-20 13:00:00\ncategories: \"Markdown\" #文章分类目录 可以省略\ntags:  \n     - MkDocs\n     - Markdown\n     - 静态站点生成器\ndescription: 使用MkDocs编写技术文档，常用操作说明  #\n---\n\n[MkDocs](https://www.mkdocs.org/) 是一款快速、简单且极其出色的静态站点生成器，旨在构建项目文档。文档源文件以 Markdown 编写，并使用单个 YAML 配置文件进行配置。首先阅读[入门教程](https://www.mkdocs.org/getting-started/)，然后查看 [用户指南](https://www.mkdocs.org/user-guide/)以了解更多信息。\n\n\n# 安装\n\n要安装 MkDocs，请从命令行运行以下命令：\n\n```bash\npip install mkdocs\n```\n\n有关详细信息，请参阅安装指南。\n\n# 创建新项目\n\n入门非常简单。要创建新项目，请从命令行运行以下命令：\n\n```bash\nmkdocs new my-project\ncd my-project\n```\n\n请花一点时间来检查一下为您创建的初始项目。\n\n![layout](https://www.mkdocs.org/img/initial-layout.png)\n\n\n## 初始 MkDocs 布局\n\n有一个名为 的配置文件mkdocs.yml，以及一个名为 的文件夹 docs，其中包含您的文档源文件（是docs_dirdocs配置设置的默认值）。目前，该 文件夹仅包含一个名为 的文档页面。docsindex.md\n\nMkDocs 带有内置开发服务器，可让您在处理文档时预览文档。确保您与mkdocs.yml 配置文件位于同一目录中，然后通过运行以下命令启动服务器mkdocs serve ：\n\n```bash\n$ mkdocs serve\nINFO    -  Building documentation...\nINFO    -  Cleaning site directory\nINFO    -  Documentation built in 0.22 seconds\nINFO    -  [15:50:43] Watching paths for changes: 'docs', 'mkdocs.yml'\nINFO    -  [15:50:43] Serving on http://127.0.0.1:8000/\n```\n\n在浏览器中打开http://127.0.0.1:8000/，您将看到显示的默认主页：\n\n![screenshot](https://www.mkdocs.org/img/screenshot.png)\n\n## MkDocs 实时服务器\n\n开发服务器还支持自动重新加载，并且只要配置文件、文档目录或主题目录中的任何内容发生变化，就会重建您的文档。\n\n在您选择的文本编辑器中打开docs/index.md文档，将初始标题更改为MkLorum，然后保存更改。您的浏览器将自动重新加载，您应该立即看到更新后的文档。\n\n现在尝试编辑配置文件：mkdocs.yml。将设置更改 site_name为MkLorum并保存文件。\n\n```yaml\nsite_name: MkLorum\n```\n\n您的浏览器应立即重新加载，并且您将看到新的网站名称生效。\n\n\n\n```yaml\nsite_name 设置\n```\n![site-name](https://www.mkdocs.org/img/site-name.png)\n\n注意：配置选项site_name是配置文件中唯一必需的选项。\n\n## 添加页面\n\n现在向您的文档添加第二页：\n\n```bash\ncurl 'https://jaspervdj.be/lorem-markdownum/markdown.txt' > docs/about.md\n```\n\n由于我们的文档站点将包含一些导航标题，您可能需要编辑配置文件并通过添加设置来添加有关导航标题中每个页面的顺序、标题和嵌套的一些信息nav ：\n\n```yaml\nsite_name: MkLorum\nnav:\n  - Home: index.md\n  - About: about.md\n```\n\n保存更改，您将看到一个导航栏， 左侧有Home和项目，右侧有、和项目。AboutSearchPreviousNext\n\n![multipage](https://www.mkdocs.org/img/multipage.png)\n\n尝试菜单项并在页面之间来回导航。然后点击 Search。将出现一个搜索对话框，允许您搜索任何页面上的任何文本。请注意，搜索结果包括网站上搜索词的每次出现，并直接链接到搜索词出现的页面部分。您无需付出任何努力或进行任何配置即可获得所有这些！\n\n![search](https://www.mkdocs.org/img/search.png)\n\n## 主题化我们的文档\n现在通过更改主题来更改配置文件以改变文档的显示方式。编辑mkdocs.yml文件并添加theme设置：\n\n```yaml\nsite_name: MkLorum\nnav:\n  - Home: index.md\n  - About: about.md\ntheme: readthedocs\n```\n\n保存您的更改，您将看到正在使用的 ReadTheDocs 主题。\n\n![readthedocs](https://www.mkdocs.org/img/readthedocs.png)\n\n\n### 更多推荐的主题\n\n- [mkdocs-material](https://squidfunk.github.io/mkdocs-material/)\n\n\n## 更改网站图标\n\n默认情况下，MkDocs 使用MkDocs 网站图标。要使用其他图标，请在目录img中创建一个子目录docs并将您的自定义文件复制favicon.ico 到该目录。MkDocs 将自动检测并使用该文件作为您的网站图标。\n\n## 建立网站\n看起来不错。您已准备好部署文档的第一遍MkLorum 。首先构建文档：\n\n```bash\nmkdocs build\n```\n\n这将创建一个名为 的新目录site。查看目录内部：\n\n```bash\n$ ls site\nabout  fonts  index.html  license  search.html\ncss    img    js          mkdocs   sitemap.xml\n```\n\n请注意，您的源文档已输出为两个 HTML 文件，分别名为 index.html和about/index.html。您还有各种其他媒体已复制到site目录中作为文档主题的一部分。您甚至有一个sitemap.xml文件和mkdocs/search_index.json。\n\n如果您使用源代码控制，例如git您可能不想将您的文档构建检查到存储库中。 site/在您的.gitignore文件中添加一行。\n\n```bash\necho \"site/\" >> .gitignore\n```\n\n如果您正在使用其他源代码控制工具，您将需要检查其文档以了解如何忽略特定目录。\n\n## 其他命令和选项\n还有各种其他命令和选项可用。要获取完整的命令列表，请使用以下--help标志：\n\n```bash\nmkdocs --help\n```\n\n要查看给定命令的可用选项列表，请将--help标志与该命令一起使用。例如，要获取该命令可用的所有选项的列表， build请运行以下命令：\n\n```bash\nmkdocs build --help\n```\n\n# 部署\n\n您刚刚构建的文档站点仅使用静态文件，因此您几乎可以从任何地方托管它。只需将整个site目录的内容上传到您托管网站的任何位置即可。有关一些常见主机的具体说明，请参阅 部署文档页面。\n\n\n# 获取帮助\n\n请参阅 [用户指南](https://www.mkdocs.org/user-guide/) 以获取有关 MkDocs 所有功能的更完整文档。\n\n要获得有关 MkDocs 的帮助，请使用 [GitHub Discussions](https://github.com/mkdocs/mkdocs/discussions) 或 [GitHub Issues](https://github.com/mkdocs/mkdocs/issues)。","slug":"使用MKDocs发布Markdown文档","published":1,"updated":"2025-03-26T06:43:53.003Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cm8pr0j2g001hgskzbuwo60ca","content":"<p><a href=\"https://www.mkdocs.org/\">MkDocs</a> 是一款快速、简单且极其出色的静态站点生成器，旨在构建项目文档。文档源文件以 Markdown 编写，并使用单个 YAML 配置文件进行配置。首先阅读<a href=\"https://www.mkdocs.org/getting-started/\">入门教程</a>，然后查看 <a href=\"https://www.mkdocs.org/user-guide/\">用户指南</a>以了解更多信息。</p>\n<h1 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h1><p>要安装 MkDocs，请从命令行运行以下命令：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">pip install mkdocs<br></code></pre></td></tr></table></figure>\n\n<p>有关详细信息，请参阅安装指南。</p>\n<h1 id=\"创建新项目\"><a href=\"#创建新项目\" class=\"headerlink\" title=\"创建新项目\"></a>创建新项目</h1><p>入门非常简单。要创建新项目，请从命令行运行以下命令：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">mkdocs new my-project<br><span class=\"hljs-built_in\">cd</span> my-project<br></code></pre></td></tr></table></figure>\n\n<p>请花一点时间来检查一下为您创建的初始项目。</p>\n<p><img src=\"https://www.mkdocs.org/img/initial-layout.png\" alt=\"layout\"></p>\n<h2 id=\"初始-MkDocs-布局\"><a href=\"#初始-MkDocs-布局\" class=\"headerlink\" title=\"初始 MkDocs 布局\"></a>初始 MkDocs 布局</h2><p>有一个名为 的配置文件mkdocs.yml，以及一个名为 的文件夹 docs，其中包含您的文档源文件（是docs_dirdocs配置设置的默认值）。目前，该 文件夹仅包含一个名为 的文档页面。docsindex.md</p>\n<p>MkDocs 带有内置开发服务器，可让您在处理文档时预览文档。确保您与mkdocs.yml 配置文件位于同一目录中，然后通过运行以下命令启动服务器mkdocs serve ：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">$ mkdocs serve<br>INFO    -  Building documentation...<br>INFO    -  Cleaning site directory<br>INFO    -  Documentation built <span class=\"hljs-keyword\">in</span> 0.22 seconds<br>INFO    -  [15:50:43] Watching paths <span class=\"hljs-keyword\">for</span> changes: <span class=\"hljs-string\">&#x27;docs&#x27;</span>, <span class=\"hljs-string\">&#x27;mkdocs.yml&#x27;</span><br>INFO    -  [15:50:43] Serving on http://127.0.0.1:8000/<br></code></pre></td></tr></table></figure>\n\n<p>在浏览器中打开<a href=\"http://127.0.0.1:8000/%EF%BC%8C%E6%82%A8%E5%B0%86%E7%9C%8B%E5%88%B0%E6%98%BE%E7%A4%BA%E7%9A%84%E9%BB%98%E8%AE%A4%E4%B8%BB%E9%A1%B5%EF%BC%9A\">http://127.0.0.1:8000/，您将看到显示的默认主页：</a></p>\n<p><img src=\"https://www.mkdocs.org/img/screenshot.png\" alt=\"screenshot\"></p>\n<h2 id=\"MkDocs-实时服务器\"><a href=\"#MkDocs-实时服务器\" class=\"headerlink\" title=\"MkDocs 实时服务器\"></a>MkDocs 实时服务器</h2><p>开发服务器还支持自动重新加载，并且只要配置文件、文档目录或主题目录中的任何内容发生变化，就会重建您的文档。</p>\n<p>在您选择的文本编辑器中打开docs/index.md文档，将初始标题更改为MkLorum，然后保存更改。您的浏览器将自动重新加载，您应该立即看到更新后的文档。</p>\n<p>现在尝试编辑配置文件：mkdocs.yml。将设置更改 site_name为MkLorum并保存文件。</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs yaml\"><span class=\"hljs-attr\">site_name:</span> <span class=\"hljs-string\">MkLorum</span><br></code></pre></td></tr></table></figure>\n\n<p>您的浏览器应立即重新加载，并且您将看到新的网站名称生效。</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs yaml\"><span class=\"hljs-string\">site_name</span> <span class=\"hljs-string\">设置</span><br></code></pre></td></tr></table></figure>\n<p><img src=\"https://www.mkdocs.org/img/site-name.png\" alt=\"site-name\"></p>\n<p>注意：配置选项site_name是配置文件中唯一必需的选项。</p>\n<h2 id=\"添加页面\"><a href=\"#添加页面\" class=\"headerlink\" title=\"添加页面\"></a>添加页面</h2><p>现在向您的文档添加第二页：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">curl <span class=\"hljs-string\">&#x27;https://jaspervdj.be/lorem-markdownum/markdown.txt&#x27;</span> &gt; docs/about.md<br></code></pre></td></tr></table></figure>\n\n<p>由于我们的文档站点将包含一些导航标题，您可能需要编辑配置文件并通过添加设置来添加有关导航标题中每个页面的顺序、标题和嵌套的一些信息nav ：</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs yaml\"><span class=\"hljs-attr\">site_name:</span> <span class=\"hljs-string\">MkLorum</span><br><span class=\"hljs-attr\">nav:</span><br>  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">Home:</span> <span class=\"hljs-string\">index.md</span><br>  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">About:</span> <span class=\"hljs-string\">about.md</span><br></code></pre></td></tr></table></figure>\n\n<p>保存更改，您将看到一个导航栏， 左侧有Home和项目，右侧有、和项目。AboutSearchPreviousNext</p>\n<p><img src=\"https://www.mkdocs.org/img/multipage.png\" alt=\"multipage\"></p>\n<p>尝试菜单项并在页面之间来回导航。然后点击 Search。将出现一个搜索对话框，允许您搜索任何页面上的任何文本。请注意，搜索结果包括网站上搜索词的每次出现，并直接链接到搜索词出现的页面部分。您无需付出任何努力或进行任何配置即可获得所有这些！</p>\n<p><img src=\"https://www.mkdocs.org/img/search.png\" alt=\"search\"></p>\n<h2 id=\"主题化我们的文档\"><a href=\"#主题化我们的文档\" class=\"headerlink\" title=\"主题化我们的文档\"></a>主题化我们的文档</h2><p>现在通过更改主题来更改配置文件以改变文档的显示方式。编辑mkdocs.yml文件并添加theme设置：</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs yaml\"><span class=\"hljs-attr\">site_name:</span> <span class=\"hljs-string\">MkLorum</span><br><span class=\"hljs-attr\">nav:</span><br>  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">Home:</span> <span class=\"hljs-string\">index.md</span><br>  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">About:</span> <span class=\"hljs-string\">about.md</span><br><span class=\"hljs-attr\">theme:</span> <span class=\"hljs-string\">readthedocs</span><br></code></pre></td></tr></table></figure>\n\n<p>保存您的更改，您将看到正在使用的 ReadTheDocs 主题。</p>\n<p><img src=\"https://www.mkdocs.org/img/readthedocs.png\" alt=\"readthedocs\"></p>\n<h3 id=\"更多推荐的主题\"><a href=\"#更多推荐的主题\" class=\"headerlink\" title=\"更多推荐的主题\"></a>更多推荐的主题</h3><ul>\n<li><a href=\"https://squidfunk.github.io/mkdocs-material/\">mkdocs-material</a></li>\n</ul>\n<h2 id=\"更改网站图标\"><a href=\"#更改网站图标\" class=\"headerlink\" title=\"更改网站图标\"></a>更改网站图标</h2><p>默认情况下，MkDocs 使用MkDocs 网站图标。要使用其他图标，请在目录img中创建一个子目录docs并将您的自定义文件复制favicon.ico 到该目录。MkDocs 将自动检测并使用该文件作为您的网站图标。</p>\n<h2 id=\"建立网站\"><a href=\"#建立网站\" class=\"headerlink\" title=\"建立网站\"></a>建立网站</h2><p>看起来不错。您已准备好部署文档的第一遍MkLorum 。首先构建文档：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">mkdocs build<br></code></pre></td></tr></table></figure>\n\n<p>这将创建一个名为 的新目录site。查看目录内部：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">$ ls site<br>about  fonts  index.html  license  search.html<br>css    img    js          mkdocs   sitemap.xml<br></code></pre></td></tr></table></figure>\n\n<p>请注意，您的源文档已输出为两个 HTML 文件，分别名为 index.html和about/index.html。您还有各种其他媒体已复制到site目录中作为文档主题的一部分。您甚至有一个sitemap.xml文件和mkdocs/search_index.json。</p>\n<p>如果您使用源代码控制，例如git您可能不想将您的文档构建检查到存储库中。 site/在您的.gitignore文件中添加一行。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\"><span class=\"hljs-built_in\">echo</span> <span class=\"hljs-string\">&quot;site/&quot;</span> &gt;&gt; .gitignore<br></code></pre></td></tr></table></figure>\n\n<p>如果您正在使用其他源代码控制工具，您将需要检查其文档以了解如何忽略特定目录。</p>\n<h2 id=\"其他命令和选项\"><a href=\"#其他命令和选项\" class=\"headerlink\" title=\"其他命令和选项\"></a>其他命令和选项</h2><p>还有各种其他命令和选项可用。要获取完整的命令列表，请使用以下–help标志：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">mkdocs --<span class=\"hljs-built_in\">help</span><br></code></pre></td></tr></table></figure>\n\n<p>要查看给定命令的可用选项列表，请将–help标志与该命令一起使用。例如，要获取该命令可用的所有选项的列表， build请运行以下命令：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">mkdocs build --<span class=\"hljs-built_in\">help</span><br></code></pre></td></tr></table></figure>\n\n<h1 id=\"部署\"><a href=\"#部署\" class=\"headerlink\" title=\"部署\"></a>部署</h1><p>您刚刚构建的文档站点仅使用静态文件，因此您几乎可以从任何地方托管它。只需将整个site目录的内容上传到您托管网站的任何位置即可。有关一些常见主机的具体说明，请参阅 部署文档页面。</p>\n<h1 id=\"获取帮助\"><a href=\"#获取帮助\" class=\"headerlink\" title=\"获取帮助\"></a>获取帮助</h1><p>请参阅 <a href=\"https://www.mkdocs.org/user-guide/\">用户指南</a> 以获取有关 MkDocs 所有功能的更完整文档。</p>\n<p>要获得有关 MkDocs 的帮助，请使用 <a href=\"https://github.com/mkdocs/mkdocs/discussions\">GitHub Discussions</a> 或 <a href=\"https://github.com/mkdocs/mkdocs/issues\">GitHub Issues</a>。</p>\n","site":{"data":{}},"excerpt":"","more":"<p><a href=\"https://www.mkdocs.org/\">MkDocs</a> 是一款快速、简单且极其出色的静态站点生成器，旨在构建项目文档。文档源文件以 Markdown 编写，并使用单个 YAML 配置文件进行配置。首先阅读<a href=\"https://www.mkdocs.org/getting-started/\">入门教程</a>，然后查看 <a href=\"https://www.mkdocs.org/user-guide/\">用户指南</a>以了解更多信息。</p>\n<h1 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h1><p>要安装 MkDocs，请从命令行运行以下命令：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">pip install mkdocs<br></code></pre></td></tr></table></figure>\n\n<p>有关详细信息，请参阅安装指南。</p>\n<h1 id=\"创建新项目\"><a href=\"#创建新项目\" class=\"headerlink\" title=\"创建新项目\"></a>创建新项目</h1><p>入门非常简单。要创建新项目，请从命令行运行以下命令：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">mkdocs new my-project<br><span class=\"hljs-built_in\">cd</span> my-project<br></code></pre></td></tr></table></figure>\n\n<p>请花一点时间来检查一下为您创建的初始项目。</p>\n<p><img src=\"https://www.mkdocs.org/img/initial-layout.png\" alt=\"layout\"></p>\n<h2 id=\"初始-MkDocs-布局\"><a href=\"#初始-MkDocs-布局\" class=\"headerlink\" title=\"初始 MkDocs 布局\"></a>初始 MkDocs 布局</h2><p>有一个名为 的配置文件mkdocs.yml，以及一个名为 的文件夹 docs，其中包含您的文档源文件（是docs_dirdocs配置设置的默认值）。目前，该 文件夹仅包含一个名为 的文档页面。docsindex.md</p>\n<p>MkDocs 带有内置开发服务器，可让您在处理文档时预览文档。确保您与mkdocs.yml 配置文件位于同一目录中，然后通过运行以下命令启动服务器mkdocs serve ：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">$ mkdocs serve<br>INFO    -  Building documentation...<br>INFO    -  Cleaning site directory<br>INFO    -  Documentation built <span class=\"hljs-keyword\">in</span> 0.22 seconds<br>INFO    -  [15:50:43] Watching paths <span class=\"hljs-keyword\">for</span> changes: <span class=\"hljs-string\">&#x27;docs&#x27;</span>, <span class=\"hljs-string\">&#x27;mkdocs.yml&#x27;</span><br>INFO    -  [15:50:43] Serving on http://127.0.0.1:8000/<br></code></pre></td></tr></table></figure>\n\n<p>在浏览器中打开<a href=\"http://127.0.0.1:8000/%EF%BC%8C%E6%82%A8%E5%B0%86%E7%9C%8B%E5%88%B0%E6%98%BE%E7%A4%BA%E7%9A%84%E9%BB%98%E8%AE%A4%E4%B8%BB%E9%A1%B5%EF%BC%9A\">http://127.0.0.1:8000/，您将看到显示的默认主页：</a></p>\n<p><img src=\"https://www.mkdocs.org/img/screenshot.png\" alt=\"screenshot\"></p>\n<h2 id=\"MkDocs-实时服务器\"><a href=\"#MkDocs-实时服务器\" class=\"headerlink\" title=\"MkDocs 实时服务器\"></a>MkDocs 实时服务器</h2><p>开发服务器还支持自动重新加载，并且只要配置文件、文档目录或主题目录中的任何内容发生变化，就会重建您的文档。</p>\n<p>在您选择的文本编辑器中打开docs/index.md文档，将初始标题更改为MkLorum，然后保存更改。您的浏览器将自动重新加载，您应该立即看到更新后的文档。</p>\n<p>现在尝试编辑配置文件：mkdocs.yml。将设置更改 site_name为MkLorum并保存文件。</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs yaml\"><span class=\"hljs-attr\">site_name:</span> <span class=\"hljs-string\">MkLorum</span><br></code></pre></td></tr></table></figure>\n\n<p>您的浏览器应立即重新加载，并且您将看到新的网站名称生效。</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs yaml\"><span class=\"hljs-string\">site_name</span> <span class=\"hljs-string\">设置</span><br></code></pre></td></tr></table></figure>\n<p><img src=\"https://www.mkdocs.org/img/site-name.png\" alt=\"site-name\"></p>\n<p>注意：配置选项site_name是配置文件中唯一必需的选项。</p>\n<h2 id=\"添加页面\"><a href=\"#添加页面\" class=\"headerlink\" title=\"添加页面\"></a>添加页面</h2><p>现在向您的文档添加第二页：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">curl <span class=\"hljs-string\">&#x27;https://jaspervdj.be/lorem-markdownum/markdown.txt&#x27;</span> &gt; docs/about.md<br></code></pre></td></tr></table></figure>\n\n<p>由于我们的文档站点将包含一些导航标题，您可能需要编辑配置文件并通过添加设置来添加有关导航标题中每个页面的顺序、标题和嵌套的一些信息nav ：</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs yaml\"><span class=\"hljs-attr\">site_name:</span> <span class=\"hljs-string\">MkLorum</span><br><span class=\"hljs-attr\">nav:</span><br>  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">Home:</span> <span class=\"hljs-string\">index.md</span><br>  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">About:</span> <span class=\"hljs-string\">about.md</span><br></code></pre></td></tr></table></figure>\n\n<p>保存更改，您将看到一个导航栏， 左侧有Home和项目，右侧有、和项目。AboutSearchPreviousNext</p>\n<p><img src=\"https://www.mkdocs.org/img/multipage.png\" alt=\"multipage\"></p>\n<p>尝试菜单项并在页面之间来回导航。然后点击 Search。将出现一个搜索对话框，允许您搜索任何页面上的任何文本。请注意，搜索结果包括网站上搜索词的每次出现，并直接链接到搜索词出现的页面部分。您无需付出任何努力或进行任何配置即可获得所有这些！</p>\n<p><img src=\"https://www.mkdocs.org/img/search.png\" alt=\"search\"></p>\n<h2 id=\"主题化我们的文档\"><a href=\"#主题化我们的文档\" class=\"headerlink\" title=\"主题化我们的文档\"></a>主题化我们的文档</h2><p>现在通过更改主题来更改配置文件以改变文档的显示方式。编辑mkdocs.yml文件并添加theme设置：</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs yaml\"><span class=\"hljs-attr\">site_name:</span> <span class=\"hljs-string\">MkLorum</span><br><span class=\"hljs-attr\">nav:</span><br>  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">Home:</span> <span class=\"hljs-string\">index.md</span><br>  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">About:</span> <span class=\"hljs-string\">about.md</span><br><span class=\"hljs-attr\">theme:</span> <span class=\"hljs-string\">readthedocs</span><br></code></pre></td></tr></table></figure>\n\n<p>保存您的更改，您将看到正在使用的 ReadTheDocs 主题。</p>\n<p><img src=\"https://www.mkdocs.org/img/readthedocs.png\" alt=\"readthedocs\"></p>\n<h3 id=\"更多推荐的主题\"><a href=\"#更多推荐的主题\" class=\"headerlink\" title=\"更多推荐的主题\"></a>更多推荐的主题</h3><ul>\n<li><a href=\"https://squidfunk.github.io/mkdocs-material/\">mkdocs-material</a></li>\n</ul>\n<h2 id=\"更改网站图标\"><a href=\"#更改网站图标\" class=\"headerlink\" title=\"更改网站图标\"></a>更改网站图标</h2><p>默认情况下，MkDocs 使用MkDocs 网站图标。要使用其他图标，请在目录img中创建一个子目录docs并将您的自定义文件复制favicon.ico 到该目录。MkDocs 将自动检测并使用该文件作为您的网站图标。</p>\n<h2 id=\"建立网站\"><a href=\"#建立网站\" class=\"headerlink\" title=\"建立网站\"></a>建立网站</h2><p>看起来不错。您已准备好部署文档的第一遍MkLorum 。首先构建文档：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">mkdocs build<br></code></pre></td></tr></table></figure>\n\n<p>这将创建一个名为 的新目录site。查看目录内部：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">$ ls site<br>about  fonts  index.html  license  search.html<br>css    img    js          mkdocs   sitemap.xml<br></code></pre></td></tr></table></figure>\n\n<p>请注意，您的源文档已输出为两个 HTML 文件，分别名为 index.html和about/index.html。您还有各种其他媒体已复制到site目录中作为文档主题的一部分。您甚至有一个sitemap.xml文件和mkdocs/search_index.json。</p>\n<p>如果您使用源代码控制，例如git您可能不想将您的文档构建检查到存储库中。 site/在您的.gitignore文件中添加一行。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\"><span class=\"hljs-built_in\">echo</span> <span class=\"hljs-string\">&quot;site/&quot;</span> &gt;&gt; .gitignore<br></code></pre></td></tr></table></figure>\n\n<p>如果您正在使用其他源代码控制工具，您将需要检查其文档以了解如何忽略特定目录。</p>\n<h2 id=\"其他命令和选项\"><a href=\"#其他命令和选项\" class=\"headerlink\" title=\"其他命令和选项\"></a>其他命令和选项</h2><p>还有各种其他命令和选项可用。要获取完整的命令列表，请使用以下–help标志：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">mkdocs --<span class=\"hljs-built_in\">help</span><br></code></pre></td></tr></table></figure>\n\n<p>要查看给定命令的可用选项列表，请将–help标志与该命令一起使用。例如，要获取该命令可用的所有选项的列表， build请运行以下命令：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">mkdocs build --<span class=\"hljs-built_in\">help</span><br></code></pre></td></tr></table></figure>\n\n<h1 id=\"部署\"><a href=\"#部署\" class=\"headerlink\" title=\"部署\"></a>部署</h1><p>您刚刚构建的文档站点仅使用静态文件，因此您几乎可以从任何地方托管它。只需将整个site目录的内容上传到您托管网站的任何位置即可。有关一些常见主机的具体说明，请参阅 部署文档页面。</p>\n<h1 id=\"获取帮助\"><a href=\"#获取帮助\" class=\"headerlink\" title=\"获取帮助\"></a>获取帮助</h1><p>请参阅 <a href=\"https://www.mkdocs.org/user-guide/\">用户指南</a> 以获取有关 MkDocs 所有功能的更完整文档。</p>\n<p>要获得有关 MkDocs 的帮助，请使用 <a href=\"https://github.com/mkdocs/mkdocs/discussions\">GitHub Discussions</a> 或 <a href=\"https://github.com/mkdocs/mkdocs/issues\">GitHub Issues</a>。</p>\n"},{"title":"将JAR包发布到Maven中央仓库","date":"2021-03-20T15:10:00.000Z","description":"将JAR包发布到Maven中央仓库操作过程记录","_content":"\n\n\n# 最新操作教程\n\n- [发布jar包到maven中央仓库，完整记录，规避一些不必要的坑](https://blog.csdn.net/qq_41813208/article/details/112370194)\n- [https://oss.sonatype.org/](https://oss.sonatype.org/)\n- [https://issues.sonatype.org/](https://issues.sonatype.org/)\n- []()\n\n\n\n# 问题记录\n\n\n\n#### 1.错误提示：Cannot run program \"gpg\": CreateProcess error=2\n\n```java\n\nFailed to execute goal org.apache.maven.plugins:maven-gpg-plugin:1.6:sign (sign-artifacts) on project dubbo-spring-boot-starter: Unable to execute gpg command: Error while executing process. Cannot run program \"gpg\": CreateProcess error=2, 系统找不到指定的文件。 -> [Help 1]\n```\n\n解决办法：   检查windows控制台中能否执行**gpg --version** 命令，如不能，需检查操作系统的环境变量**Path**的配置是否存在问题，GnuPG的安装路径下的bin目录是否已添加到Path变量中，若未添加，需手动添加进去。\n\n\n\n**影响** 如果未配置成功，在发布时会无法执行签名校验，后续的源码包、文档包均无法发布上传到sonatype的仓库中，会影响jar包发布\n\n\n\n### 2.Maven执行install时GPG Passphrase的解决办法\n\nmvn install后加上参数**-Dgpg.skip**，例如：mvn install **-Dgpg.skip**\n另外参数-DskipTests可以跳过test阶段。\n\n\n\n\n\n## 仍然存在的问题\n\n- 添加项目logo到https://mvnrepository.com/网站([how-to-create-a-logo-for-mvnrepository-artifact](https://stackoverflow.com/questions/40197177/how-to-create-a-logo-for-mvnrepository-artifact))\n- 如何避免进入https://mvnrepository.com/网站需要进行人工验证码校验（官方出的插件安装后任然需要验证，还是需要点击验证）\n- \n\n\n\n### 参考链接\n\n- [https://mvnrepository.com/](https://mvnrepository.com/)\n- [GPG入门教程](http://www.ruanyifeng.com/blog/2013/07/gpg.html)\n- [GPG下载](https://www.gpg4win.org/thanks-for-download.html)\n- [如何把jar发布到中央仓库](https://blog.csdn.net/huangjinjin520/article/details/78915789)\n- [如何发布jar包到maven中央仓库详细教程](https://blog.csdn.net/qq_36838191/article/details/81027586)\n- [使用gpg插件发布jar包到Maven中央仓库 完整实践](https://blog.csdn.net/alinyua/article/details/83687250)\n- [https://search.maven.org/](https://search.maven.org/search?q=a:acanx-utils)\n- [https://repo1.maven.org/maven2/com/acanx/acanx-utils/](https://repo1.maven.org/maven2/com/acanx/acanx-utils/)\n\n","source":"_posts/将JAR包发布到Maven中央仓库.md","raw":"---\ntitle: 将JAR包发布到Maven中央仓库\ndate: 2021-03-20 23:10:00\ncategories: \"Maven\" #文章分类目录 可以省略\ntags: #Java \n     - Maven\n     - Sonatype\n     - JAR\ndescription: 将JAR包发布到Maven中央仓库操作过程记录  #\n---\n\n\n\n# 最新操作教程\n\n- [发布jar包到maven中央仓库，完整记录，规避一些不必要的坑](https://blog.csdn.net/qq_41813208/article/details/112370194)\n- [https://oss.sonatype.org/](https://oss.sonatype.org/)\n- [https://issues.sonatype.org/](https://issues.sonatype.org/)\n- []()\n\n\n\n# 问题记录\n\n\n\n#### 1.错误提示：Cannot run program \"gpg\": CreateProcess error=2\n\n```java\n\nFailed to execute goal org.apache.maven.plugins:maven-gpg-plugin:1.6:sign (sign-artifacts) on project dubbo-spring-boot-starter: Unable to execute gpg command: Error while executing process. Cannot run program \"gpg\": CreateProcess error=2, 系统找不到指定的文件。 -> [Help 1]\n```\n\n解决办法：   检查windows控制台中能否执行**gpg --version** 命令，如不能，需检查操作系统的环境变量**Path**的配置是否存在问题，GnuPG的安装路径下的bin目录是否已添加到Path变量中，若未添加，需手动添加进去。\n\n\n\n**影响** 如果未配置成功，在发布时会无法执行签名校验，后续的源码包、文档包均无法发布上传到sonatype的仓库中，会影响jar包发布\n\n\n\n### 2.Maven执行install时GPG Passphrase的解决办法\n\nmvn install后加上参数**-Dgpg.skip**，例如：mvn install **-Dgpg.skip**\n另外参数-DskipTests可以跳过test阶段。\n\n\n\n\n\n## 仍然存在的问题\n\n- 添加项目logo到https://mvnrepository.com/网站([how-to-create-a-logo-for-mvnrepository-artifact](https://stackoverflow.com/questions/40197177/how-to-create-a-logo-for-mvnrepository-artifact))\n- 如何避免进入https://mvnrepository.com/网站需要进行人工验证码校验（官方出的插件安装后任然需要验证，还是需要点击验证）\n- \n\n\n\n### 参考链接\n\n- [https://mvnrepository.com/](https://mvnrepository.com/)\n- [GPG入门教程](http://www.ruanyifeng.com/blog/2013/07/gpg.html)\n- [GPG下载](https://www.gpg4win.org/thanks-for-download.html)\n- [如何把jar发布到中央仓库](https://blog.csdn.net/huangjinjin520/article/details/78915789)\n- [如何发布jar包到maven中央仓库详细教程](https://blog.csdn.net/qq_36838191/article/details/81027586)\n- [使用gpg插件发布jar包到Maven中央仓库 完整实践](https://blog.csdn.net/alinyua/article/details/83687250)\n- [https://search.maven.org/](https://search.maven.org/search?q=a:acanx-utils)\n- [https://repo1.maven.org/maven2/com/acanx/acanx-utils/](https://repo1.maven.org/maven2/com/acanx/acanx-utils/)\n\n","slug":"将JAR包发布到Maven中央仓库","published":1,"updated":"2025-03-26T06:43:53.003Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cm8pr0j2g001lgskz9iuzbrjz","content":"<h1 id=\"最新操作教程\"><a href=\"#最新操作教程\" class=\"headerlink\" title=\"最新操作教程\"></a>最新操作教程</h1><ul>\n<li><a href=\"https://blog.csdn.net/qq_41813208/article/details/112370194\">发布jar包到maven中央仓库，完整记录，规避一些不必要的坑</a></li>\n<li><a href=\"https://oss.sonatype.org/\">https://oss.sonatype.org/</a></li>\n<li><a href=\"https://issues.sonatype.org/\">https://issues.sonatype.org/</a></li>\n<li><a href=\"\"></a></li>\n</ul>\n<h1 id=\"问题记录\"><a href=\"#问题记录\" class=\"headerlink\" title=\"问题记录\"></a>问题记录</h1><h4 id=\"1-错误提示：Cannot-run-program-“gpg”-CreateProcess-error-2\"><a href=\"#1-错误提示：Cannot-run-program-“gpg”-CreateProcess-error-2\" class=\"headerlink\" title=\"1.错误提示：Cannot run program “gpg”: CreateProcess error=2\"></a>1.错误提示：Cannot run program “gpg”: CreateProcess error=2</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><br>Failed to execute goal org.apache.maven.plugins:maven-gpg-plugin:<span class=\"hljs-number\">1.6</span>:sign (sign-artifacts) on project dubbo-spring-boot-starter: Unable to execute gpg command: Error <span class=\"hljs-keyword\">while</span> executing process. Cannot run program <span class=\"hljs-string\">&quot;gpg&quot;</span>: CreateProcess error=<span class=\"hljs-number\">2</span>, 系统找不到指定的文件。 -&gt; [Help <span class=\"hljs-number\">1</span>]<br></code></pre></td></tr></table></figure>\n\n<p>解决办法：   检查windows控制台中能否执行<strong>gpg –version</strong> 命令，如不能，需检查操作系统的环境变量<strong>Path</strong>的配置是否存在问题，GnuPG的安装路径下的bin目录是否已添加到Path变量中，若未添加，需手动添加进去。</p>\n<p><strong>影响</strong> 如果未配置成功，在发布时会无法执行签名校验，后续的源码包、文档包均无法发布上传到sonatype的仓库中，会影响jar包发布</p>\n<h3 id=\"2-Maven执行install时GPG-Passphrase的解决办法\"><a href=\"#2-Maven执行install时GPG-Passphrase的解决办法\" class=\"headerlink\" title=\"2.Maven执行install时GPG Passphrase的解决办法\"></a>2.Maven执行install时GPG Passphrase的解决办法</h3><p>mvn install后加上参数**-Dgpg.skip**，例如：mvn install <strong>-Dgpg.skip</strong><br>另外参数-DskipTests可以跳过test阶段。</p>\n<h2 id=\"仍然存在的问题\"><a href=\"#仍然存在的问题\" class=\"headerlink\" title=\"仍然存在的问题\"></a>仍然存在的问题</h2><ul>\n<li>添加项目logo到<a href=\"https://mvnrepository.com/%E7%BD%91%E7%AB%99([how-to-create-a-logo-for-mvnrepository-artifact](https://stackoverflow.com/questions/40197177/how-to-create-a-logo-for-mvnrepository-artifact)\">https://mvnrepository.com/网站([how-to-create-a-logo-for-mvnrepository-artifact](https://stackoverflow.com/questions/40197177/how-to-create-a-logo-for-mvnrepository-artifact)</a>)</li>\n<li>如何避免进入<a href=\"https://mvnrepository.com/%E7%BD%91%E7%AB%99%E9%9C%80%E8%A6%81%E8%BF%9B%E8%A1%8C%E4%BA%BA%E5%B7%A5%E9%AA%8C%E8%AF%81%E7%A0%81%E6%A0%A1%E9%AA%8C%EF%BC%88%E5%AE%98%E6%96%B9%E5%87%BA%E7%9A%84%E6%8F%92%E4%BB%B6%E5%AE%89%E8%A3%85%E5%90%8E%E4%BB%BB%E7%84%B6%E9%9C%80%E8%A6%81%E9%AA%8C%E8%AF%81%EF%BC%8C%E8%BF%98%E6%98%AF%E9%9C%80%E8%A6%81%E7%82%B9%E5%87%BB%E9%AA%8C%E8%AF%81%EF%BC%89\">https://mvnrepository.com/网站需要进行人工验证码校验（官方出的插件安装后任然需要验证，还是需要点击验证）</a></li>\n<li></li>\n</ul>\n<h3 id=\"参考链接\"><a href=\"#参考链接\" class=\"headerlink\" title=\"参考链接\"></a>参考链接</h3><ul>\n<li><a href=\"https://mvnrepository.com/\">https://mvnrepository.com/</a></li>\n<li><a href=\"http://www.ruanyifeng.com/blog/2013/07/gpg.html\">GPG入门教程</a></li>\n<li><a href=\"https://www.gpg4win.org/thanks-for-download.html\">GPG下载</a></li>\n<li><a href=\"https://blog.csdn.net/huangjinjin520/article/details/78915789\">如何把jar发布到中央仓库</a></li>\n<li><a href=\"https://blog.csdn.net/qq_36838191/article/details/81027586\">如何发布jar包到maven中央仓库详细教程</a></li>\n<li><a href=\"https://blog.csdn.net/alinyua/article/details/83687250\">使用gpg插件发布jar包到Maven中央仓库 完整实践</a></li>\n<li><a href=\"https://search.maven.org/search?q=a:acanx-utils\">https://search.maven.org/</a></li>\n<li><a href=\"https://repo1.maven.org/maven2/com/acanx/acanx-utils/\">https://repo1.maven.org/maven2/com/acanx/acanx-utils/</a></li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"最新操作教程\"><a href=\"#最新操作教程\" class=\"headerlink\" title=\"最新操作教程\"></a>最新操作教程</h1><ul>\n<li><a href=\"https://blog.csdn.net/qq_41813208/article/details/112370194\">发布jar包到maven中央仓库，完整记录，规避一些不必要的坑</a></li>\n<li><a href=\"https://oss.sonatype.org/\">https://oss.sonatype.org/</a></li>\n<li><a href=\"https://issues.sonatype.org/\">https://issues.sonatype.org/</a></li>\n<li><a href=\"\"></a></li>\n</ul>\n<h1 id=\"问题记录\"><a href=\"#问题记录\" class=\"headerlink\" title=\"问题记录\"></a>问题记录</h1><h4 id=\"1-错误提示：Cannot-run-program-“gpg”-CreateProcess-error-2\"><a href=\"#1-错误提示：Cannot-run-program-“gpg”-CreateProcess-error-2\" class=\"headerlink\" title=\"1.错误提示：Cannot run program “gpg”: CreateProcess error=2\"></a>1.错误提示：Cannot run program “gpg”: CreateProcess error=2</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><br>Failed to execute goal org.apache.maven.plugins:maven-gpg-plugin:<span class=\"hljs-number\">1.6</span>:sign (sign-artifacts) on project dubbo-spring-boot-starter: Unable to execute gpg command: Error <span class=\"hljs-keyword\">while</span> executing process. Cannot run program <span class=\"hljs-string\">&quot;gpg&quot;</span>: CreateProcess error=<span class=\"hljs-number\">2</span>, 系统找不到指定的文件。 -&gt; [Help <span class=\"hljs-number\">1</span>]<br></code></pre></td></tr></table></figure>\n\n<p>解决办法：   检查windows控制台中能否执行<strong>gpg –version</strong> 命令，如不能，需检查操作系统的环境变量<strong>Path</strong>的配置是否存在问题，GnuPG的安装路径下的bin目录是否已添加到Path变量中，若未添加，需手动添加进去。</p>\n<p><strong>影响</strong> 如果未配置成功，在发布时会无法执行签名校验，后续的源码包、文档包均无法发布上传到sonatype的仓库中，会影响jar包发布</p>\n<h3 id=\"2-Maven执行install时GPG-Passphrase的解决办法\"><a href=\"#2-Maven执行install时GPG-Passphrase的解决办法\" class=\"headerlink\" title=\"2.Maven执行install时GPG Passphrase的解决办法\"></a>2.Maven执行install时GPG Passphrase的解决办法</h3><p>mvn install后加上参数**-Dgpg.skip**，例如：mvn install <strong>-Dgpg.skip</strong><br>另外参数-DskipTests可以跳过test阶段。</p>\n<h2 id=\"仍然存在的问题\"><a href=\"#仍然存在的问题\" class=\"headerlink\" title=\"仍然存在的问题\"></a>仍然存在的问题</h2><ul>\n<li>添加项目logo到<a href=\"https://mvnrepository.com/%E7%BD%91%E7%AB%99([how-to-create-a-logo-for-mvnrepository-artifact](https://stackoverflow.com/questions/40197177/how-to-create-a-logo-for-mvnrepository-artifact)\">https://mvnrepository.com/网站([how-to-create-a-logo-for-mvnrepository-artifact](https://stackoverflow.com/questions/40197177/how-to-create-a-logo-for-mvnrepository-artifact)</a>)</li>\n<li>如何避免进入<a href=\"https://mvnrepository.com/%E7%BD%91%E7%AB%99%E9%9C%80%E8%A6%81%E8%BF%9B%E8%A1%8C%E4%BA%BA%E5%B7%A5%E9%AA%8C%E8%AF%81%E7%A0%81%E6%A0%A1%E9%AA%8C%EF%BC%88%E5%AE%98%E6%96%B9%E5%87%BA%E7%9A%84%E6%8F%92%E4%BB%B6%E5%AE%89%E8%A3%85%E5%90%8E%E4%BB%BB%E7%84%B6%E9%9C%80%E8%A6%81%E9%AA%8C%E8%AF%81%EF%BC%8C%E8%BF%98%E6%98%AF%E9%9C%80%E8%A6%81%E7%82%B9%E5%87%BB%E9%AA%8C%E8%AF%81%EF%BC%89\">https://mvnrepository.com/网站需要进行人工验证码校验（官方出的插件安装后任然需要验证，还是需要点击验证）</a></li>\n<li></li>\n</ul>\n<h3 id=\"参考链接\"><a href=\"#参考链接\" class=\"headerlink\" title=\"参考链接\"></a>参考链接</h3><ul>\n<li><a href=\"https://mvnrepository.com/\">https://mvnrepository.com/</a></li>\n<li><a href=\"http://www.ruanyifeng.com/blog/2013/07/gpg.html\">GPG入门教程</a></li>\n<li><a href=\"https://www.gpg4win.org/thanks-for-download.html\">GPG下载</a></li>\n<li><a href=\"https://blog.csdn.net/huangjinjin520/article/details/78915789\">如何把jar发布到中央仓库</a></li>\n<li><a href=\"https://blog.csdn.net/qq_36838191/article/details/81027586\">如何发布jar包到maven中央仓库详细教程</a></li>\n<li><a href=\"https://blog.csdn.net/alinyua/article/details/83687250\">使用gpg插件发布jar包到Maven中央仓库 完整实践</a></li>\n<li><a href=\"https://search.maven.org/search?q=a:acanx-utils\">https://search.maven.org/</a></li>\n<li><a href=\"https://repo1.maven.org/maven2/com/acanx/acanx-utils/\">https://repo1.maven.org/maven2/com/acanx/acanx-utils/</a></li>\n</ul>\n"},{"title":"文章样式","date":"2018-06-27T12:55:48.000Z","description":"Hexo文章样式","_content":"\n\n# 标题一\n\n## 标题二\n\n\n### 标题三\n\n小车正穿行在洛基山脉蜿蜒曲折的盘山公路上，克里朵托夫里维静静地看着窗外，发现车子每当行驶到无路的关头，路边都会出现一块交通指示牌：“前方转弯”或写着“注意急转弯”。而转过每一道弯道之后前方照例又是一片柳暗花明、豁然开朗。山路弯弯、峰回路转，“前方转弯”几个大字一次次冲击着他的眼球，也渐渐敲醒了他的心扉。原来不是路已到了尽头，而是该转弯了……路在脚下，更在心中，心随路转，心路常宽。学会转弯也是人生的智慧，因为挫折往往是转折，危机同时是转机。\n\n### 代码样式\n\n\n\n\n\n### Create a new post\n\n``` bash\ndeploy:\n  - type: git\n    repo: # 像这样设置多个 git 仓库，`名称: 地址,分支`，逗号后面没有空格。\n      github: git@github.com:XXXXXX/XXXXXX.git,branch\n      coding: git@git.coding.net:XXXXXXX/XXXXXXX,coding-pages\n    message: Site updated by Hexo at {{ now('YYYY-MM-DD HH:mm:ss') }}.\n  - type: rsync\n    host: YOUR VPS IP # 你的服务器的 IP 地址\n    user: YOUR USERNAME # 你刚刚复制密钥的那个用户\n    root: YOUR DESTINATION # 你想把文件上传到哪里，比如我的是 `~/stackharbor.alynx.xyz/`\n    port: 22 # 这是 ssh 默认的端口，如果你修改了，这里也要改\n    args: --progress # 额外的 rsync 参数，我这里添加了一个进度条参数，你也可以不设置\n    delete: true # 是否删除旧的文件\n    verbose: true # 是否同步时显示详细状态\n    ignore_errors: false # 忽略错误\n```\n\n\n\n### Bash\n\n``` bash\n$ hexo server\n$ hexo generate\n$ hexo deploy\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` java\n/**\n * Created by y0n on 2017/4/18.\n * 1.编写一个代表地址的Address类，地址信息由国家，身份，城市，街道，邮编组成\n * 并可以返回完整的地址信息\n */\npublic class JavaDay002_1 {\n    String Country;\n    String Identifiy;\n    String City;\n    String Street;\n    String Stamp;\n    public void setCountry(String country) {\n        Country = country;\n    }\n    public void setIdentifiy(String identifiy) {\n        Identifiy = identifiy;\n    }\n    public void setCity(String city) {\n        City = city;\n    }\n    public void setStreet(String street) {\n        Street = street;\n    }\n    public void setStamp(String stamp) {\n        Stamp = stamp;\n    }\n    public String getCountry() {\n        return Country;\n    }\n    public String getIdentifiy() {\n        return Identifiy;\n    }\n    public String getCity() {\n        return City;\n    }\n    public String getStreet() {\n        return Street;\n    }\n    public String getStamp() {\n        return Stamp;\n    }\n    public static void main(String []args)\n    {\n        JavaDay002_1 address = new JavaDay002_1();\n        address.setCountry(\"Chain\");\n        address.setIdentifiy(\"Student\");\n        address.setCity(\"Beijing\");\n        address.setStreet(\"XinFuRoad\");\n        address.setStamp(\"402310\");\n \n        System.out.println(\"地址：\" +\n                address.getCountry() + \"_\" +\n                address.getIdentifiy() + \"_\" +\n                address.getCity() + \"_\" +\n                address.getStreet() + \"_\" +\n                address.getStamp());\n    }\n}\n \n/**\n * Created by y0n on 2017/4/18.\n * 2.设计一个Dog类，有名字，颜色，年龄等属性，定义构造方法来初始化类的这些属性，\n * 定义方法输出Dog信息，编写应用程序使用Dog类\n */\npublic class JavaDay002_2 {\n \n    String strName;\n    String strColor;\n    String strAge;\n    public JavaDay002_2(String strName, String strColor, String strAge) {\n        this.strName = strName;\n        this.strColor = strColor;\n        this.strAge = strAge;\n    }\n \n    void ShowDog()\n    {\n        System.out.println(\"此狗叫\" + strName + \",\" + strColor + \"色,\" + strAge + \"岁\");\n    }\n \n    public static void main(String []args)\n    {\n        JavaDay002_2 Dog = new JavaDay002_2(\"旺财\", \"白\", \"2\");\n        Dog.ShowDog();\n    }\n}\n \n/**\n * Created by y0n on 2017/4/18.\n * 3.定义一个数组，它可以存储一个矩形，三角形，圆形\n * 一个双精度数或一个整数\n */\npublic class JavaDay002_3 {\n    int Rectangle(int length, int wight)\n    {\n        return length * wight;\n    }\n    int Trangle(int aSide, int bSide, int cSide)\n    {\n        int s = (aSide + bSide + cSide) / 2;\n        double area = (double) (s * (s - aSide) * (s - bSide) * (s - cSide));\n        return (int) Math.pow(area, 0.5);\n    }\n    int Round(int redis)\n    {\n        return (int) (redis * redis * 3.14);\n    }\n    int IntNumber(int nNum)\n    {\n        return nNum;\n    }\n    public static void main(String []args)\n    {\n        JavaDay002_3 array = new JavaDay002_3();\n \n        System.out.println(\"矩形：\" + array.Rectangle(3, 4)\n                + \" 三角形：\" + array.Trangle(3, 4, 5)\n                + \" 圆：\" + array.Round(2)\n                + \" 整数：\" + array.IntNumber(5));\n    }\n}\n \n/**\n * Created by y0n on 2017/4/18.\n * 4.定义一个抽象类Shape，用类标示二维图形，\n * Shape具有抽象方法area和perimeter，分别用来计算形状的面积和周长，\n * 定义一些二维形状类(矩形，三角形，圆)\n * 这些类都是Shape类的子类\n */\npublic abstract class JavaDay002_4 {\n    abstract int area();\n    abstract int perimeter();\n}\n \nclass Rect extends JavaDay002_4\n{\n    int length;\n    int wight;\n    public int getLength() {\n        return length;\n    }\n \n    public void setLength(int length) {\n        this.length = length;\n    }\n \n    public int getWight() {\n        return wight;\n    }\n \n    public void setWight(int wight) {\n        this.wight = wight;\n    }\n \n    @Override\n    int area() {\n \n        return length * wight;\n    }\n \n    @Override\n    int perimeter() {\n        return (length + wight) * 2;\n    }\n}\n\n\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` php\n<?php\n$con = mysql_connect(\"localhost\", \"hello\", \"321\");\nif (!$con)\n  {\n  die('Could not connect: ' . mysql_error());\n  }\n\n$db_selected = mysql_select_db(\"test_db\",$con);\n\n$sql = \"SELECT * from Person\";\n$result = mysql_query($sql,$con);\n\nwhile ($property = mysql_fetch_field($result))\n  {\n  echo \"Field name: \" . $property->name . \"<br />\";\n  echo \"Table name: \" . $property->table . \"<br />\";\n  echo \"Default value: \" . $property->def . \"<br />\";\n  echo \"Max length: \" . $property->max_length . \"<br />\";\n  echo \"Not NULL: \" . $property->not_null . \"<br />\"; \n  echo \"Primary Key: \" . $property->primary_key . \"<br />\";\n  echo \"Unique Key: \" . $property->unique_key . \"<br />\"; \n  echo \"Mutliple Key: \" . $property->multiple_key . \"<br />\";\n  echo \"Numeric Field: \" . $property->numeric . \"<br />\";\n  echo \"BLOB: \" . $property->blob . \"<br />\";\n  echo \"Field Type: \" . $property->type . \"<br />\";\n  echo \"Unsigned: \" . $property->unsigned . \"<br />\";\n  echo \"Zero-filled: \" . $property->zerofill . \"<br /><br />\"; \n  }\n\nmysql_close($con);\n?>\n\n```\n\n### \n```python\n\n#!/usr/bin/python\n# -*- coding: UTF-8 -*-\n \nimport threading\nimport time\n \nclass myThread (threading.Thread):\n    def __init__(self, threadID, name, counter):\n        threading.Thread.__init__(self)\n        self.threadID = threadID\n        self.name = name\n        self.counter = counter\n    def run(self):\n        print \"Starting \" + self.name\n       # 获得锁，成功获得锁定后返回True\n       # 可选的timeout参数不填时将一直阻塞直到获得锁定\n       # 否则超时后将返回False\n        threadLock.acquire()\n        print_time(self.name, self.counter, 3)\n        # 释放锁\n        threadLock.release()\n \ndef print_time(threadName, delay, counter):\n    while counter:\n        time.sleep(delay)\n        print \"%s: %s\" % (threadName, time.ctime(time.time()))\n        counter -= 1\n \nthreadLock = threading.Lock()\nthreads = []\n \n# 创建新线程\nthread1 = myThread(1, \"Thread-1\", 1)\nthread2 = myThread(2, \"Thread-2\", 2)\n \n# 开启新线程\nthread1.start()\nthread2.start()\n \n# 添加线程到线程列表\nthreads.append(thread1)\nthreads.append(thread2)\n \n# 等待所有线程完成\nfor t in threads:\n    t.join()\nprint \"Exiting Main Thread\"\n\n```\n\n\n\n### html\n\n\n```html\n\n\n\n\n<!DOCTYPE html>\n<html lang=\"zh-cn\">\n<head>\n\n<!-- Global site tag (gtag.js) - Google Analytics -->\n<script async src=\"https://www.googletagmanager.com/gtag/js?id=UA-878633-1\"></script>\n<script>\n  window.dataLayer = window.dataLayer || [];\n  function gtag(){dataLayer.push(arguments);}\n  gtag('js', new Date());\n\n  gtag('config', 'UA-878633-1');\n</script>\n\n<meta charset=\"gbk\" />\n<meta name=\"robots\" content=\"all\" />\n<meta name=\"author\" content=\"w3school.com.cn\" />\n<link rel=\"stylesheet\" type=\"text/css\" href=\"/c5_20171220.css\" />\n<link rel=icon type=\"image/png\" sizes=\"16x16\" href=\"/ui2017/logo-16.png\">\n<link rel=icon type=\"image/png\" sizes=\"32x32\" href=\"/ui2017/logo-32.png\">\n<link rel=icon type=\"image/png\" sizes=\"48x48\" href=\"/ui2017/logo-48.png\">\n<link rel=icon type=\"image/png\" sizes=\"96x96\" href=\"/ui2017/logo-96.png\">\n<link rel=\"apple-touch-icon-precomposed\" sizes=\"96x96\" href=\"/ui2017/logo-96.png\">\n<link rel=\"apple-touch-icon-precomposed\" sizes=\"144x144\" href=\"/ui2017/logo-144.png\">\n\n\n<title>HTML 测验</title>\n\n</head>\n\n<body class=\"html\">\n\n<div id=\"wrapper\">\n\n<div id=\"header\">\n<a href=\"/index.html\" title=\"w3school 在线教程\" style=\"float:left;\">w3school 在线教程</a>\n<div id=\"ad_head\">\n<script type=\"text/javascript\"><!--\ngoogle_ad_client = \"pub-3381531532877742\";\n/* 728x90, 创建于 08-12-1 */\ngoogle_ad_slot = \"7423315034\";\ngoogle_ad_width = 728;\ngoogle_ad_height = 90;\n//-->\n</script>\n<script type=\"text/javascript\"\nsrc=\"http://pagead2.googlesyndication.com/pagead/show_ads.js\">\n</script>\n</div>\n</div>\n\n<div id=\"navfirst\">\n<ul id=\"menu\">\n<li id=\"h\"><a href=\"/h.asp\" title=\"HTML 系列教程\">HTML 系列教程</a></li>\n<li id=\"b\"><a href=\"/b.asp\" title=\"浏览器脚本教程\">浏览器脚本</a></li>\n<li id=\"s\"><a href=\"/s.asp\" title=\"服务器脚本教程\">服务器脚本</a></li>\n<li id=\"d\"><a href=\"/d.asp\" title=\"ASP.NET 教程\">ASP.NET 教程</a></li>\n<li id=\"x\"><a href=\"/x.asp\" title=\"XML 系列教程\">XML 系列教程</a></li>\n<li id=\"ws\"><a href=\"/ws.asp\" title=\"Web Services 系列教程\">Web Services 系列教程</a></li>\n<li id=\"w\"><a href=\"/w.asp\" title=\"建站手册\">建站手册</a></li>\n</ul>\n</div>\n\n<div id=\"navsecond\">\n\n<div id=\"course\"><h2>HTML 基础教程</h2>\n<ul>\n<li><a href=\"/html/index.asp\" title=\"HTML 教程\">HTML 教程</a></li>\n<li><a href=\"/html/html_jianjie.asp\" title=\"HTML 简介\">HTML 简介</a></li>\n<li><a href=\"/html/html_editors.asp\" title=\"HTML 编辑器\">HTML 编辑器</a></li>\n<li><a href=\"/html/html_basic.asp\" title=\"HTML 基础 - 四个实例\">HTML 基础</a></li>\n<li><a href=\"/html/html_elements.asp\" title=\"HTML 元素\">HTML 元素</a></li>\n<li><a href=\"/html/html_attributes.asp\" title=\"HTML 属性\">HTML 属性</a></li>\n<li><a href=\"/html/html_headings.asp\" title=\"HTML 标题\">HTML 标题</a></li>\n<li><a href=\"/html/html_paragraphs.asp\" title=\"HTML 段落\">HTML 段落</a></li>\n<li><a href=\"/html/html_styles.asp\" title=\"HTML 样式 - CSS\">HTML 样式</a></li>\n<li><a href=\"/html/html_formatting.asp\" title=\"HTML 文本格式化\">HTML 格式化</a></li>\n\n</ul>\n<h2>HTML XHTML</h2>\n<ul>\n<li><a href=\"/html/html_xhtml.asp\" title=\"XHTML 简介\">XHTML 简介</a></li>\n<li><a href=\"/html/html_xhtml_elements.asp\" title=\"XHTML - 元素\">XHTML 元素</a></li>\n<li><a href=\"/html/html_xhtml_attributes.asp\" title=\"XHTML - 属性\">XHTML 属性</a></li>\n</ul>\n\n<ul>\n<li><a href=\"/html/html5_canvas.asp\" title=\"HTML5 Canvas\">HTML5 画布</a></li>\n<li><a href=\"/html/html5_svg.asp\" title=\"HTML5 内联 SVG\">HTML5 SVG</a></li>\n<li><a href=\"/html/html5_canvas_vs_svg.asp\" title=\"HTML5 Canvas vs. SVG\">HTML5 画布 vs SVG</a></li>\n</ul>\n<h2>HTML 媒体</h2>\n<ul>\n<li><a href=\"/html/html_media.asp\" title=\"HTML 多媒体\">HTML 媒体</a></li>\n<li><a href=\"/html/html_object.asp\" title=\"HTML Object 元素\">HTML 对象</a></li>\n<li><a href=\"/html/html_audio.asp\" title=\"HTML 音频\">HTML 音频</a></li>\n<li><a href=\"/html/html_video.asp\" title=\"HTML 视频\">HTML 视频</a></li>\n</ul>\n<h2>HTML API</h2>\n<ul>\n<li><a href=\"/html/html5_geolocation.asp\" title=\"HTML5 地理定位\">HTML5 地理定位</a></li>\n<li><a href=\"/html/html5_draganddrop.asp\" title=\"HTML5 拖放\">HTML5 拖放</a></li>\n<li><a href=\"/html/html5_webstorage.asp\" title=\"HTML5 Web 存储\">HTML5 Web 存储</a></li>\n<li><a href=\"/html/html5_app_cache.asp\" title=\"HTML 5 应用程序缓存\">HTML5 应用缓存</a></li>\n<li><a href=\"/html/html5_webworkers.asp\" title=\"HTML5 Web Workers\">HTML5 Web Workers</a></li>\n<li><a href=\"/html/html5_serversentevents.asp\" title=\"HTML5 服务器发送事件\">HTML5 SSE</a></li>\n</ul>\n<h2>实例/测验/总结</h2>\n<ul>\n<li><a href=\"/example/html_examples.asp\" title=\"HTML 实例\">HTML 实例</a></li>\n<li class=\"currentLink\"><a href=\"/html/html_quiz.asp\" title=\"HTML 测验\">HTML 测验</a></li>\n<li><a href=\"/html/html_summary.asp\" title=\"HTML 总结\">HTML 总结</a></li>\n</ul>\n<h2>HTML 参考手册</h2>\n<ul>\n<li><a href=\"/tags/index.asp\" title=\"HTML 4.01 / XHTML 1.0 参考手册\">HTML 标签列表</a></li>\n<li><a href=\"/tags/html_ref_standardattributes.asp\" title=\"HTML 标准属性\">HTML 属性</a></li>\n<li><a href=\"/tags/html_ref_eventattributes.asp\" title=\"HTML 事件属性\">HTML 事件</a></li>\n<li><a href=\"/tags/html_ref_dtd.asp\" title=\"HTML 元素与合法的 Doctype\">HTML 合法 DTD</a></li>\n<li><a href=\"/tags/html_ref_colornames.asp\" title=\"HTML 颜色名\">HTML 颜色名</a></li>\n<li><a href=\"/tags/html_ref_charactersets.asp\" title=\"HTML 字符集\">HTML 字符集</a></li>\n<li><a href=\"/tags/html_ref_ascii.asp\" title=\"HTML ASCII 参考手册\">HTML ASCII</a></li>\n<li><a href=\"/tags/html_ref_entities.html\" title=\"HTML ISO-8859-1 参考手册\">HTML ISO-8859-1</a></li>\n<li><a href=\"/tags/html_ref_symbols.html\" title=\"HTML 4.01 符号实体\">HTML 符号</a></li>\n<li><a href=\"/tags/html_ref_urlencode.html\" title=\"HTML URL 编码\">HTML URL 编码</a></li>\n<li><a href=\"/tags/html_ref_language_codes.asp\" title=\"HTML 语言代码参考手册\">HTML 语言代码</a></li>\n<li><a href=\"/tags/html_ref_httpmessages.asp\" title=\"HTML 状态消息\">HTML 消息</a></li>\n</ul>\n<h2>HTML5</h2>\n<ul>\n<li><a href=\"/html/index.asp\" title=\"HTML5 教程\">HTML5 教程</a></li>\n<li><a href=\"/tags/index.asp\" title=\"HTML5 参考手册\">HTML5 参考手册</a></li>\n</ul>\n</div><div id=\"selected\">\n<h2>建站手册</h2>\n<ul>\n<li><a href=\"/site/index.asp\" title=\"网站构建\">网站构建</a></li>\n<li><a href=\"/w3c/index.asp\" title=\"万维网联盟 (W3C)\">万维网联盟 (W3C)</a></li>\n<li><a href=\"/browsers/index.asp\" title=\"浏览器信息\">浏览器信息</a></li>\n<li><a href=\"/quality/index.asp\" title=\"网站品质\">网站品质</a></li>\n<li><a href=\"/semweb/index.asp\" title=\"语义网\">语义网</a></li>\n<li><a href=\"/careers/index.asp\" title=\"职业规划\">职业规划</a></li>\n<li><a href=\"/hosting/index.asp\" title=\"网站主机\">网站主机</a></li>\n</ul>\n\n<h2><a href=\"/about/index.asp\" title=\"关于 W3School\" id=\"link_about\">关于 W3School</a></h2>\n<h2><a href=\"/about/about_helping.asp\" title=\"帮助 W3School\" id=\"link_help\">帮助 W3School</a></h2>\n\n</div>\n\n</div>\n\n<div id=\"maincontent\">\n\n\n\n\n<div id=\"intro\">\n<p><strong>您可以通过 W3SCHOOL 的测验程序来测试您的 HTML 技能。</strong></p>\n</div>\n\n\n<div>\n<h2>关于本测验</h2>\n\n<p>本测验包含 20 道题，每道题的最长答题时间是 20 分钟（这是由于每个 session 的默认有效时间是20钟）。</p>\n\n<p>本测验是非官方的测试，它仅仅提供了一个了解您对 HTML 的掌握程度的工具。</p>\n</div>\n\n\n<div>\n<h2>测验会被记分</h2>\n\n<p>每道题的分值是 1 分。在您完成全部的 20 道题之后，系统会为您的测验打分，并提供您做错的题目的正确答案。其中，绿色为正确答案，而红色为错误答案。</p>\n\n<p><a href=\"/quiz/quiz.asp?quiz=html\">现在就开始测验</a>！祝您好运。</p>\n</div>\n\n\n<div id=\"bpn\">\n<ul class=\"prenext\">\n<li class=\"pre\"><a href=\"/example/html_examples.asp\" title=\"HTML 实例\">HTML 实例</a></li>\n<li class=\"next\"><a href=\"/html/html_summary.asp\" title=\"HTML 总结\">HTML 总结</a></li>\n</ul>\n</div>\n\n\n<div style=\"background-color:#fcfdf8; padding:0;\">\n<script async src=\"//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js\"></script>\n<!-- W3School 正文底部广告位 -->\n<ins class=\"adsbygoogle\"\n     style=\"display:inline-block;width:800px;height:250px\"\n     data-ad-client=\"ca-pub-3381531532877742\"\n     data-ad-slot=\"9384069314\"></ins>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n</div>\n\n</div>\n<!-- maincontent end -->\n\n<div id=\"sidebar\">\n\n<div id=\"tools\">\n<h5 id=\"tools_reference\"><a href=\"/tags/index.asp\">HTML 参考手册</a></h5>\n<h5 id=\"tools_example\"><a href=\"/example/html_examples.asp\">HTML 实例</a></h5>\n<h5 id=\"tools_quiz\"><a href=\"/html/html_quiz.asp\">HTML 测验</a></h5>\n</div>\n\n\n\n\n</div>\n<!-- wrapper end -->\n\n</body>\n\n</html>\n\n```\n\n\n\n### 链接\nMore info: [Deployment](https://hexo.io/docs/deployment.html)\n\n\n","source":"_posts/文章样式.md","raw":"---\ntitle: 文章样式\ndate: 2018-06-27 20:55:48\ncategories: \"默认\" #文章分類目錄 可以省略\ntags: #Java \n     - 文章\n     - 样式\ndescription: Hexo文章样式  #你對本頁的描述 可以省略\n---\n\n\n# 标题一\n\n## 标题二\n\n\n### 标题三\n\n小车正穿行在洛基山脉蜿蜒曲折的盘山公路上，克里朵托夫里维静静地看着窗外，发现车子每当行驶到无路的关头，路边都会出现一块交通指示牌：“前方转弯”或写着“注意急转弯”。而转过每一道弯道之后前方照例又是一片柳暗花明、豁然开朗。山路弯弯、峰回路转，“前方转弯”几个大字一次次冲击着他的眼球，也渐渐敲醒了他的心扉。原来不是路已到了尽头，而是该转弯了……路在脚下，更在心中，心随路转，心路常宽。学会转弯也是人生的智慧，因为挫折往往是转折，危机同时是转机。\n\n### 代码样式\n\n\n\n\n\n### Create a new post\n\n``` bash\ndeploy:\n  - type: git\n    repo: # 像这样设置多个 git 仓库，`名称: 地址,分支`，逗号后面没有空格。\n      github: git@github.com:XXXXXX/XXXXXX.git,branch\n      coding: git@git.coding.net:XXXXXXX/XXXXXXX,coding-pages\n    message: Site updated by Hexo at {{ now('YYYY-MM-DD HH:mm:ss') }}.\n  - type: rsync\n    host: YOUR VPS IP # 你的服务器的 IP 地址\n    user: YOUR USERNAME # 你刚刚复制密钥的那个用户\n    root: YOUR DESTINATION # 你想把文件上传到哪里，比如我的是 `~/stackharbor.alynx.xyz/`\n    port: 22 # 这是 ssh 默认的端口，如果你修改了，这里也要改\n    args: --progress # 额外的 rsync 参数，我这里添加了一个进度条参数，你也可以不设置\n    delete: true # 是否删除旧的文件\n    verbose: true # 是否同步时显示详细状态\n    ignore_errors: false # 忽略错误\n```\n\n\n\n### Bash\n\n``` bash\n$ hexo server\n$ hexo generate\n$ hexo deploy\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` java\n/**\n * Created by y0n on 2017/4/18.\n * 1.编写一个代表地址的Address类，地址信息由国家，身份，城市，街道，邮编组成\n * 并可以返回完整的地址信息\n */\npublic class JavaDay002_1 {\n    String Country;\n    String Identifiy;\n    String City;\n    String Street;\n    String Stamp;\n    public void setCountry(String country) {\n        Country = country;\n    }\n    public void setIdentifiy(String identifiy) {\n        Identifiy = identifiy;\n    }\n    public void setCity(String city) {\n        City = city;\n    }\n    public void setStreet(String street) {\n        Street = street;\n    }\n    public void setStamp(String stamp) {\n        Stamp = stamp;\n    }\n    public String getCountry() {\n        return Country;\n    }\n    public String getIdentifiy() {\n        return Identifiy;\n    }\n    public String getCity() {\n        return City;\n    }\n    public String getStreet() {\n        return Street;\n    }\n    public String getStamp() {\n        return Stamp;\n    }\n    public static void main(String []args)\n    {\n        JavaDay002_1 address = new JavaDay002_1();\n        address.setCountry(\"Chain\");\n        address.setIdentifiy(\"Student\");\n        address.setCity(\"Beijing\");\n        address.setStreet(\"XinFuRoad\");\n        address.setStamp(\"402310\");\n \n        System.out.println(\"地址：\" +\n                address.getCountry() + \"_\" +\n                address.getIdentifiy() + \"_\" +\n                address.getCity() + \"_\" +\n                address.getStreet() + \"_\" +\n                address.getStamp());\n    }\n}\n \n/**\n * Created by y0n on 2017/4/18.\n * 2.设计一个Dog类，有名字，颜色，年龄等属性，定义构造方法来初始化类的这些属性，\n * 定义方法输出Dog信息，编写应用程序使用Dog类\n */\npublic class JavaDay002_2 {\n \n    String strName;\n    String strColor;\n    String strAge;\n    public JavaDay002_2(String strName, String strColor, String strAge) {\n        this.strName = strName;\n        this.strColor = strColor;\n        this.strAge = strAge;\n    }\n \n    void ShowDog()\n    {\n        System.out.println(\"此狗叫\" + strName + \",\" + strColor + \"色,\" + strAge + \"岁\");\n    }\n \n    public static void main(String []args)\n    {\n        JavaDay002_2 Dog = new JavaDay002_2(\"旺财\", \"白\", \"2\");\n        Dog.ShowDog();\n    }\n}\n \n/**\n * Created by y0n on 2017/4/18.\n * 3.定义一个数组，它可以存储一个矩形，三角形，圆形\n * 一个双精度数或一个整数\n */\npublic class JavaDay002_3 {\n    int Rectangle(int length, int wight)\n    {\n        return length * wight;\n    }\n    int Trangle(int aSide, int bSide, int cSide)\n    {\n        int s = (aSide + bSide + cSide) / 2;\n        double area = (double) (s * (s - aSide) * (s - bSide) * (s - cSide));\n        return (int) Math.pow(area, 0.5);\n    }\n    int Round(int redis)\n    {\n        return (int) (redis * redis * 3.14);\n    }\n    int IntNumber(int nNum)\n    {\n        return nNum;\n    }\n    public static void main(String []args)\n    {\n        JavaDay002_3 array = new JavaDay002_3();\n \n        System.out.println(\"矩形：\" + array.Rectangle(3, 4)\n                + \" 三角形：\" + array.Trangle(3, 4, 5)\n                + \" 圆：\" + array.Round(2)\n                + \" 整数：\" + array.IntNumber(5));\n    }\n}\n \n/**\n * Created by y0n on 2017/4/18.\n * 4.定义一个抽象类Shape，用类标示二维图形，\n * Shape具有抽象方法area和perimeter，分别用来计算形状的面积和周长，\n * 定义一些二维形状类(矩形，三角形，圆)\n * 这些类都是Shape类的子类\n */\npublic abstract class JavaDay002_4 {\n    abstract int area();\n    abstract int perimeter();\n}\n \nclass Rect extends JavaDay002_4\n{\n    int length;\n    int wight;\n    public int getLength() {\n        return length;\n    }\n \n    public void setLength(int length) {\n        this.length = length;\n    }\n \n    public int getWight() {\n        return wight;\n    }\n \n    public void setWight(int wight) {\n        this.wight = wight;\n    }\n \n    @Override\n    int area() {\n \n        return length * wight;\n    }\n \n    @Override\n    int perimeter() {\n        return (length + wight) * 2;\n    }\n}\n\n\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` php\n<?php\n$con = mysql_connect(\"localhost\", \"hello\", \"321\");\nif (!$con)\n  {\n  die('Could not connect: ' . mysql_error());\n  }\n\n$db_selected = mysql_select_db(\"test_db\",$con);\n\n$sql = \"SELECT * from Person\";\n$result = mysql_query($sql,$con);\n\nwhile ($property = mysql_fetch_field($result))\n  {\n  echo \"Field name: \" . $property->name . \"<br />\";\n  echo \"Table name: \" . $property->table . \"<br />\";\n  echo \"Default value: \" . $property->def . \"<br />\";\n  echo \"Max length: \" . $property->max_length . \"<br />\";\n  echo \"Not NULL: \" . $property->not_null . \"<br />\"; \n  echo \"Primary Key: \" . $property->primary_key . \"<br />\";\n  echo \"Unique Key: \" . $property->unique_key . \"<br />\"; \n  echo \"Mutliple Key: \" . $property->multiple_key . \"<br />\";\n  echo \"Numeric Field: \" . $property->numeric . \"<br />\";\n  echo \"BLOB: \" . $property->blob . \"<br />\";\n  echo \"Field Type: \" . $property->type . \"<br />\";\n  echo \"Unsigned: \" . $property->unsigned . \"<br />\";\n  echo \"Zero-filled: \" . $property->zerofill . \"<br /><br />\"; \n  }\n\nmysql_close($con);\n?>\n\n```\n\n### \n```python\n\n#!/usr/bin/python\n# -*- coding: UTF-8 -*-\n \nimport threading\nimport time\n \nclass myThread (threading.Thread):\n    def __init__(self, threadID, name, counter):\n        threading.Thread.__init__(self)\n        self.threadID = threadID\n        self.name = name\n        self.counter = counter\n    def run(self):\n        print \"Starting \" + self.name\n       # 获得锁，成功获得锁定后返回True\n       # 可选的timeout参数不填时将一直阻塞直到获得锁定\n       # 否则超时后将返回False\n        threadLock.acquire()\n        print_time(self.name, self.counter, 3)\n        # 释放锁\n        threadLock.release()\n \ndef print_time(threadName, delay, counter):\n    while counter:\n        time.sleep(delay)\n        print \"%s: %s\" % (threadName, time.ctime(time.time()))\n        counter -= 1\n \nthreadLock = threading.Lock()\nthreads = []\n \n# 创建新线程\nthread1 = myThread(1, \"Thread-1\", 1)\nthread2 = myThread(2, \"Thread-2\", 2)\n \n# 开启新线程\nthread1.start()\nthread2.start()\n \n# 添加线程到线程列表\nthreads.append(thread1)\nthreads.append(thread2)\n \n# 等待所有线程完成\nfor t in threads:\n    t.join()\nprint \"Exiting Main Thread\"\n\n```\n\n\n\n### html\n\n\n```html\n\n\n\n\n<!DOCTYPE html>\n<html lang=\"zh-cn\">\n<head>\n\n<!-- Global site tag (gtag.js) - Google Analytics -->\n<script async src=\"https://www.googletagmanager.com/gtag/js?id=UA-878633-1\"></script>\n<script>\n  window.dataLayer = window.dataLayer || [];\n  function gtag(){dataLayer.push(arguments);}\n  gtag('js', new Date());\n\n  gtag('config', 'UA-878633-1');\n</script>\n\n<meta charset=\"gbk\" />\n<meta name=\"robots\" content=\"all\" />\n<meta name=\"author\" content=\"w3school.com.cn\" />\n<link rel=\"stylesheet\" type=\"text/css\" href=\"/c5_20171220.css\" />\n<link rel=icon type=\"image/png\" sizes=\"16x16\" href=\"/ui2017/logo-16.png\">\n<link rel=icon type=\"image/png\" sizes=\"32x32\" href=\"/ui2017/logo-32.png\">\n<link rel=icon type=\"image/png\" sizes=\"48x48\" href=\"/ui2017/logo-48.png\">\n<link rel=icon type=\"image/png\" sizes=\"96x96\" href=\"/ui2017/logo-96.png\">\n<link rel=\"apple-touch-icon-precomposed\" sizes=\"96x96\" href=\"/ui2017/logo-96.png\">\n<link rel=\"apple-touch-icon-precomposed\" sizes=\"144x144\" href=\"/ui2017/logo-144.png\">\n\n\n<title>HTML 测验</title>\n\n</head>\n\n<body class=\"html\">\n\n<div id=\"wrapper\">\n\n<div id=\"header\">\n<a href=\"/index.html\" title=\"w3school 在线教程\" style=\"float:left;\">w3school 在线教程</a>\n<div id=\"ad_head\">\n<script type=\"text/javascript\"><!--\ngoogle_ad_client = \"pub-3381531532877742\";\n/* 728x90, 创建于 08-12-1 */\ngoogle_ad_slot = \"7423315034\";\ngoogle_ad_width = 728;\ngoogle_ad_height = 90;\n//-->\n</script>\n<script type=\"text/javascript\"\nsrc=\"http://pagead2.googlesyndication.com/pagead/show_ads.js\">\n</script>\n</div>\n</div>\n\n<div id=\"navfirst\">\n<ul id=\"menu\">\n<li id=\"h\"><a href=\"/h.asp\" title=\"HTML 系列教程\">HTML 系列教程</a></li>\n<li id=\"b\"><a href=\"/b.asp\" title=\"浏览器脚本教程\">浏览器脚本</a></li>\n<li id=\"s\"><a href=\"/s.asp\" title=\"服务器脚本教程\">服务器脚本</a></li>\n<li id=\"d\"><a href=\"/d.asp\" title=\"ASP.NET 教程\">ASP.NET 教程</a></li>\n<li id=\"x\"><a href=\"/x.asp\" title=\"XML 系列教程\">XML 系列教程</a></li>\n<li id=\"ws\"><a href=\"/ws.asp\" title=\"Web Services 系列教程\">Web Services 系列教程</a></li>\n<li id=\"w\"><a href=\"/w.asp\" title=\"建站手册\">建站手册</a></li>\n</ul>\n</div>\n\n<div id=\"navsecond\">\n\n<div id=\"course\"><h2>HTML 基础教程</h2>\n<ul>\n<li><a href=\"/html/index.asp\" title=\"HTML 教程\">HTML 教程</a></li>\n<li><a href=\"/html/html_jianjie.asp\" title=\"HTML 简介\">HTML 简介</a></li>\n<li><a href=\"/html/html_editors.asp\" title=\"HTML 编辑器\">HTML 编辑器</a></li>\n<li><a href=\"/html/html_basic.asp\" title=\"HTML 基础 - 四个实例\">HTML 基础</a></li>\n<li><a href=\"/html/html_elements.asp\" title=\"HTML 元素\">HTML 元素</a></li>\n<li><a href=\"/html/html_attributes.asp\" title=\"HTML 属性\">HTML 属性</a></li>\n<li><a href=\"/html/html_headings.asp\" title=\"HTML 标题\">HTML 标题</a></li>\n<li><a href=\"/html/html_paragraphs.asp\" title=\"HTML 段落\">HTML 段落</a></li>\n<li><a href=\"/html/html_styles.asp\" title=\"HTML 样式 - CSS\">HTML 样式</a></li>\n<li><a href=\"/html/html_formatting.asp\" title=\"HTML 文本格式化\">HTML 格式化</a></li>\n\n</ul>\n<h2>HTML XHTML</h2>\n<ul>\n<li><a href=\"/html/html_xhtml.asp\" title=\"XHTML 简介\">XHTML 简介</a></li>\n<li><a href=\"/html/html_xhtml_elements.asp\" title=\"XHTML - 元素\">XHTML 元素</a></li>\n<li><a href=\"/html/html_xhtml_attributes.asp\" title=\"XHTML - 属性\">XHTML 属性</a></li>\n</ul>\n\n<ul>\n<li><a href=\"/html/html5_canvas.asp\" title=\"HTML5 Canvas\">HTML5 画布</a></li>\n<li><a href=\"/html/html5_svg.asp\" title=\"HTML5 内联 SVG\">HTML5 SVG</a></li>\n<li><a href=\"/html/html5_canvas_vs_svg.asp\" title=\"HTML5 Canvas vs. SVG\">HTML5 画布 vs SVG</a></li>\n</ul>\n<h2>HTML 媒体</h2>\n<ul>\n<li><a href=\"/html/html_media.asp\" title=\"HTML 多媒体\">HTML 媒体</a></li>\n<li><a href=\"/html/html_object.asp\" title=\"HTML Object 元素\">HTML 对象</a></li>\n<li><a href=\"/html/html_audio.asp\" title=\"HTML 音频\">HTML 音频</a></li>\n<li><a href=\"/html/html_video.asp\" title=\"HTML 视频\">HTML 视频</a></li>\n</ul>\n<h2>HTML API</h2>\n<ul>\n<li><a href=\"/html/html5_geolocation.asp\" title=\"HTML5 地理定位\">HTML5 地理定位</a></li>\n<li><a href=\"/html/html5_draganddrop.asp\" title=\"HTML5 拖放\">HTML5 拖放</a></li>\n<li><a href=\"/html/html5_webstorage.asp\" title=\"HTML5 Web 存储\">HTML5 Web 存储</a></li>\n<li><a href=\"/html/html5_app_cache.asp\" title=\"HTML 5 应用程序缓存\">HTML5 应用缓存</a></li>\n<li><a href=\"/html/html5_webworkers.asp\" title=\"HTML5 Web Workers\">HTML5 Web Workers</a></li>\n<li><a href=\"/html/html5_serversentevents.asp\" title=\"HTML5 服务器发送事件\">HTML5 SSE</a></li>\n</ul>\n<h2>实例/测验/总结</h2>\n<ul>\n<li><a href=\"/example/html_examples.asp\" title=\"HTML 实例\">HTML 实例</a></li>\n<li class=\"currentLink\"><a href=\"/html/html_quiz.asp\" title=\"HTML 测验\">HTML 测验</a></li>\n<li><a href=\"/html/html_summary.asp\" title=\"HTML 总结\">HTML 总结</a></li>\n</ul>\n<h2>HTML 参考手册</h2>\n<ul>\n<li><a href=\"/tags/index.asp\" title=\"HTML 4.01 / XHTML 1.0 参考手册\">HTML 标签列表</a></li>\n<li><a href=\"/tags/html_ref_standardattributes.asp\" title=\"HTML 标准属性\">HTML 属性</a></li>\n<li><a href=\"/tags/html_ref_eventattributes.asp\" title=\"HTML 事件属性\">HTML 事件</a></li>\n<li><a href=\"/tags/html_ref_dtd.asp\" title=\"HTML 元素与合法的 Doctype\">HTML 合法 DTD</a></li>\n<li><a href=\"/tags/html_ref_colornames.asp\" title=\"HTML 颜色名\">HTML 颜色名</a></li>\n<li><a href=\"/tags/html_ref_charactersets.asp\" title=\"HTML 字符集\">HTML 字符集</a></li>\n<li><a href=\"/tags/html_ref_ascii.asp\" title=\"HTML ASCII 参考手册\">HTML ASCII</a></li>\n<li><a href=\"/tags/html_ref_entities.html\" title=\"HTML ISO-8859-1 参考手册\">HTML ISO-8859-1</a></li>\n<li><a href=\"/tags/html_ref_symbols.html\" title=\"HTML 4.01 符号实体\">HTML 符号</a></li>\n<li><a href=\"/tags/html_ref_urlencode.html\" title=\"HTML URL 编码\">HTML URL 编码</a></li>\n<li><a href=\"/tags/html_ref_language_codes.asp\" title=\"HTML 语言代码参考手册\">HTML 语言代码</a></li>\n<li><a href=\"/tags/html_ref_httpmessages.asp\" title=\"HTML 状态消息\">HTML 消息</a></li>\n</ul>\n<h2>HTML5</h2>\n<ul>\n<li><a href=\"/html/index.asp\" title=\"HTML5 教程\">HTML5 教程</a></li>\n<li><a href=\"/tags/index.asp\" title=\"HTML5 参考手册\">HTML5 参考手册</a></li>\n</ul>\n</div><div id=\"selected\">\n<h2>建站手册</h2>\n<ul>\n<li><a href=\"/site/index.asp\" title=\"网站构建\">网站构建</a></li>\n<li><a href=\"/w3c/index.asp\" title=\"万维网联盟 (W3C)\">万维网联盟 (W3C)</a></li>\n<li><a href=\"/browsers/index.asp\" title=\"浏览器信息\">浏览器信息</a></li>\n<li><a href=\"/quality/index.asp\" title=\"网站品质\">网站品质</a></li>\n<li><a href=\"/semweb/index.asp\" title=\"语义网\">语义网</a></li>\n<li><a href=\"/careers/index.asp\" title=\"职业规划\">职业规划</a></li>\n<li><a href=\"/hosting/index.asp\" title=\"网站主机\">网站主机</a></li>\n</ul>\n\n<h2><a href=\"/about/index.asp\" title=\"关于 W3School\" id=\"link_about\">关于 W3School</a></h2>\n<h2><a href=\"/about/about_helping.asp\" title=\"帮助 W3School\" id=\"link_help\">帮助 W3School</a></h2>\n\n</div>\n\n</div>\n\n<div id=\"maincontent\">\n\n\n\n\n<div id=\"intro\">\n<p><strong>您可以通过 W3SCHOOL 的测验程序来测试您的 HTML 技能。</strong></p>\n</div>\n\n\n<div>\n<h2>关于本测验</h2>\n\n<p>本测验包含 20 道题，每道题的最长答题时间是 20 分钟（这是由于每个 session 的默认有效时间是20钟）。</p>\n\n<p>本测验是非官方的测试，它仅仅提供了一个了解您对 HTML 的掌握程度的工具。</p>\n</div>\n\n\n<div>\n<h2>测验会被记分</h2>\n\n<p>每道题的分值是 1 分。在您完成全部的 20 道题之后，系统会为您的测验打分，并提供您做错的题目的正确答案。其中，绿色为正确答案，而红色为错误答案。</p>\n\n<p><a href=\"/quiz/quiz.asp?quiz=html\">现在就开始测验</a>！祝您好运。</p>\n</div>\n\n\n<div id=\"bpn\">\n<ul class=\"prenext\">\n<li class=\"pre\"><a href=\"/example/html_examples.asp\" title=\"HTML 实例\">HTML 实例</a></li>\n<li class=\"next\"><a href=\"/html/html_summary.asp\" title=\"HTML 总结\">HTML 总结</a></li>\n</ul>\n</div>\n\n\n<div style=\"background-color:#fcfdf8; padding:0;\">\n<script async src=\"//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js\"></script>\n<!-- W3School 正文底部广告位 -->\n<ins class=\"adsbygoogle\"\n     style=\"display:inline-block;width:800px;height:250px\"\n     data-ad-client=\"ca-pub-3381531532877742\"\n     data-ad-slot=\"9384069314\"></ins>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n</div>\n\n</div>\n<!-- maincontent end -->\n\n<div id=\"sidebar\">\n\n<div id=\"tools\">\n<h5 id=\"tools_reference\"><a href=\"/tags/index.asp\">HTML 参考手册</a></h5>\n<h5 id=\"tools_example\"><a href=\"/example/html_examples.asp\">HTML 实例</a></h5>\n<h5 id=\"tools_quiz\"><a href=\"/html/html_quiz.asp\">HTML 测验</a></h5>\n</div>\n\n\n\n\n</div>\n<!-- wrapper end -->\n\n</body>\n\n</html>\n\n```\n\n\n\n### 链接\nMore info: [Deployment](https://hexo.io/docs/deployment.html)\n\n\n","slug":"文章样式","published":1,"updated":"2025-03-26T06:43:53.004Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cm8pr0j2h001ogskz6rv52158","content":"<h1 id=\"标题一\"><a href=\"#标题一\" class=\"headerlink\" title=\"标题一\"></a>标题一</h1><h2 id=\"标题二\"><a href=\"#标题二\" class=\"headerlink\" title=\"标题二\"></a>标题二</h2><h3 id=\"标题三\"><a href=\"#标题三\" class=\"headerlink\" title=\"标题三\"></a>标题三</h3><p>小车正穿行在洛基山脉蜿蜒曲折的盘山公路上，克里朵托夫里维静静地看着窗外，发现车子每当行驶到无路的关头，路边都会出现一块交通指示牌：“前方转弯”或写着“注意急转弯”。而转过每一道弯道之后前方照例又是一片柳暗花明、豁然开朗。山路弯弯、峰回路转，“前方转弯”几个大字一次次冲击着他的眼球，也渐渐敲醒了他的心扉。原来不是路已到了尽头，而是该转弯了……路在脚下，更在心中，心随路转，心路常宽。学会转弯也是人生的智慧，因为挫折往往是转折，危机同时是转机。</p>\n<h3 id=\"代码样式\"><a href=\"#代码样式\" class=\"headerlink\" title=\"代码样式\"></a>代码样式</h3><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">deploy:<br>  - <span class=\"hljs-built_in\">type</span>: git<br>    repo: <span class=\"hljs-comment\"># 像这样设置多个 git 仓库，`名称: 地址,分支`，逗号后面没有空格。</span><br>      github: git@github.com:XXXXXX/XXXXXX.git,branch<br>      coding: git@git.coding.net:XXXXXXX/XXXXXXX,coding-pages<br>    message: Site updated by Hexo at &#123;&#123; now(<span class=\"hljs-string\">&#x27;YYYY-MM-DD HH:mm:ss&#x27;</span>) &#125;&#125;.<br>  - <span class=\"hljs-built_in\">type</span>: rsync<br>    host: YOUR VPS IP <span class=\"hljs-comment\"># 你的服务器的 IP 地址</span><br>    user: YOUR USERNAME <span class=\"hljs-comment\"># 你刚刚复制密钥的那个用户</span><br>    root: YOUR DESTINATION <span class=\"hljs-comment\"># 你想把文件上传到哪里，比如我的是 `~/stackharbor.alynx.xyz/`</span><br>    port: 22 <span class=\"hljs-comment\"># 这是 ssh 默认的端口，如果你修改了，这里也要改</span><br>    args: --progress <span class=\"hljs-comment\"># 额外的 rsync 参数，我这里添加了一个进度条参数，你也可以不设置</span><br>    delete: <span class=\"hljs-literal\">true</span> <span class=\"hljs-comment\"># 是否删除旧的文件</span><br>    verbose: <span class=\"hljs-literal\">true</span> <span class=\"hljs-comment\"># 是否同步时显示详细状态</span><br>    ignore_errors: <span class=\"hljs-literal\">false</span> <span class=\"hljs-comment\"># 忽略错误</span><br></code></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"Bash\"><a href=\"#Bash\" class=\"headerlink\" title=\"Bash\"></a>Bash</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">$ hexo server<br>$ hexo generate<br>$ hexo deploy<br>$ hexo server<br></code></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/server.html\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * Created by y0n on 2017/4/18.</span><br><span class=\"hljs-comment\"> * 1.编写一个代表地址的Address类，地址信息由国家，身份，城市，街道，邮编组成</span><br><span class=\"hljs-comment\"> * 并可以返回完整的地址信息</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">JavaDay002_1</span> </span>&#123;<br>    String Country;<br>    String Identifiy;<br>    String City;<br>    String Street;<br>    String Stamp;<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setCountry</span><span class=\"hljs-params\">(String country)</span> </span>&#123;<br>        Country = country;<br>    &#125;<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setIdentifiy</span><span class=\"hljs-params\">(String identifiy)</span> </span>&#123;<br>        Identifiy = identifiy;<br>    &#125;<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setCity</span><span class=\"hljs-params\">(String city)</span> </span>&#123;<br>        City = city;<br>    &#125;<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setStreet</span><span class=\"hljs-params\">(String street)</span> </span>&#123;<br>        Street = street;<br>    &#125;<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setStamp</span><span class=\"hljs-params\">(String stamp)</span> </span>&#123;<br>        Stamp = stamp;<br>    &#125;<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title\">getCountry</span><span class=\"hljs-params\">()</span> </span>&#123;<br>        <span class=\"hljs-keyword\">return</span> Country;<br>    &#125;<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title\">getIdentifiy</span><span class=\"hljs-params\">()</span> </span>&#123;<br>        <span class=\"hljs-keyword\">return</span> Identifiy;<br>    &#125;<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title\">getCity</span><span class=\"hljs-params\">()</span> </span>&#123;<br>        <span class=\"hljs-keyword\">return</span> City;<br>    &#125;<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title\">getStreet</span><span class=\"hljs-params\">()</span> </span>&#123;<br>        <span class=\"hljs-keyword\">return</span> Street;<br>    &#125;<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title\">getStamp</span><span class=\"hljs-params\">()</span> </span>&#123;<br>        <span class=\"hljs-keyword\">return</span> Stamp;<br>    &#125;<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">main</span><span class=\"hljs-params\">(String []args)</span></span><br><span class=\"hljs-function\">    </span>&#123;<br>        JavaDay002_1 address = <span class=\"hljs-keyword\">new</span> JavaDay002_1();<br>        address.setCountry(<span class=\"hljs-string\">&quot;Chain&quot;</span>);<br>        address.setIdentifiy(<span class=\"hljs-string\">&quot;Student&quot;</span>);<br>        address.setCity(<span class=\"hljs-string\">&quot;Beijing&quot;</span>);<br>        address.setStreet(<span class=\"hljs-string\">&quot;XinFuRoad&quot;</span>);<br>        address.setStamp(<span class=\"hljs-string\">&quot;402310&quot;</span>);<br> <br>        System.out.println(<span class=\"hljs-string\">&quot;地址：&quot;</span> +<br>                address.getCountry() + <span class=\"hljs-string\">&quot;_&quot;</span> +<br>                address.getIdentifiy() + <span class=\"hljs-string\">&quot;_&quot;</span> +<br>                address.getCity() + <span class=\"hljs-string\">&quot;_&quot;</span> +<br>                address.getStreet() + <span class=\"hljs-string\">&quot;_&quot;</span> +<br>                address.getStamp());<br>    &#125;<br>&#125;<br> <br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * Created by y0n on 2017/4/18.</span><br><span class=\"hljs-comment\"> * 2.设计一个Dog类，有名字，颜色，年龄等属性，定义构造方法来初始化类的这些属性，</span><br><span class=\"hljs-comment\"> * 定义方法输出Dog信息，编写应用程序使用Dog类</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">JavaDay002_2</span> </span>&#123;<br> <br>    String strName;<br>    String strColor;<br>    String strAge;<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-title\">JavaDay002_2</span><span class=\"hljs-params\">(String strName, String strColor, String strAge)</span> </span>&#123;<br>        <span class=\"hljs-keyword\">this</span>.strName = strName;<br>        <span class=\"hljs-keyword\">this</span>.strColor = strColor;<br>        <span class=\"hljs-keyword\">this</span>.strAge = strAge;<br>    &#125;<br> <br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">ShowDog</span><span class=\"hljs-params\">()</span></span><br><span class=\"hljs-function\">    </span>&#123;<br>        System.out.println(<span class=\"hljs-string\">&quot;此狗叫&quot;</span> + strName + <span class=\"hljs-string\">&quot;,&quot;</span> + strColor + <span class=\"hljs-string\">&quot;色,&quot;</span> + strAge + <span class=\"hljs-string\">&quot;岁&quot;</span>);<br>    &#125;<br> <br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">main</span><span class=\"hljs-params\">(String []args)</span></span><br><span class=\"hljs-function\">    </span>&#123;<br>        JavaDay002_2 Dog = <span class=\"hljs-keyword\">new</span> JavaDay002_2(<span class=\"hljs-string\">&quot;旺财&quot;</span>, <span class=\"hljs-string\">&quot;白&quot;</span>, <span class=\"hljs-string\">&quot;2&quot;</span>);<br>        Dog.ShowDog();<br>    &#125;<br>&#125;<br> <br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * Created by y0n on 2017/4/18.</span><br><span class=\"hljs-comment\"> * 3.定义一个数组，它可以存储一个矩形，三角形，圆形</span><br><span class=\"hljs-comment\"> * 一个双精度数或一个整数</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">JavaDay002_3</span> </span>&#123;<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">Rectangle</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">int</span> length, <span class=\"hljs-keyword\">int</span> wight)</span></span><br><span class=\"hljs-function\">    </span>&#123;<br>        <span class=\"hljs-keyword\">return</span> length * wight;<br>    &#125;<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">Trangle</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">int</span> aSide, <span class=\"hljs-keyword\">int</span> bSide, <span class=\"hljs-keyword\">int</span> cSide)</span></span><br><span class=\"hljs-function\">    </span>&#123;<br>        <span class=\"hljs-keyword\">int</span> s = (aSide + bSide + cSide) / <span class=\"hljs-number\">2</span>;<br>        <span class=\"hljs-keyword\">double</span> area = (<span class=\"hljs-keyword\">double</span>) (s * (s - aSide) * (s - bSide) * (s - cSide));<br>        <span class=\"hljs-keyword\">return</span> (<span class=\"hljs-keyword\">int</span>) Math.pow(area, <span class=\"hljs-number\">0.5</span>);<br>    &#125;<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">Round</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">int</span> redis)</span></span><br><span class=\"hljs-function\">    </span>&#123;<br>        <span class=\"hljs-keyword\">return</span> (<span class=\"hljs-keyword\">int</span>) (redis * redis * <span class=\"hljs-number\">3.14</span>);<br>    &#125;<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">IntNumber</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">int</span> nNum)</span></span><br><span class=\"hljs-function\">    </span>&#123;<br>        <span class=\"hljs-keyword\">return</span> nNum;<br>    &#125;<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">main</span><span class=\"hljs-params\">(String []args)</span></span><br><span class=\"hljs-function\">    </span>&#123;<br>        JavaDay002_3 array = <span class=\"hljs-keyword\">new</span> JavaDay002_3();<br> <br>        System.out.println(<span class=\"hljs-string\">&quot;矩形：&quot;</span> + array.Rectangle(<span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">4</span>)<br>                + <span class=\"hljs-string\">&quot; 三角形：&quot;</span> + array.Trangle(<span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">4</span>, <span class=\"hljs-number\">5</span>)<br>                + <span class=\"hljs-string\">&quot; 圆：&quot;</span> + array.Round(<span class=\"hljs-number\">2</span>)<br>                + <span class=\"hljs-string\">&quot; 整数：&quot;</span> + array.IntNumber(<span class=\"hljs-number\">5</span>));<br>    &#125;<br>&#125;<br> <br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * Created by y0n on 2017/4/18.</span><br><span class=\"hljs-comment\"> * 4.定义一个抽象类Shape，用类标示二维图形，</span><br><span class=\"hljs-comment\"> * Shape具有抽象方法area和perimeter，分别用来计算形状的面积和周长，</span><br><span class=\"hljs-comment\"> * 定义一些二维形状类(矩形，三角形，圆)</span><br><span class=\"hljs-comment\"> * 这些类都是Shape类的子类</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">abstract</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">JavaDay002_4</span> </span>&#123;<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">abstract</span> <span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">area</span><span class=\"hljs-params\">()</span></span>;<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">abstract</span> <span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">perimeter</span><span class=\"hljs-params\">()</span></span>;<br>&#125;<br> <br><span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">Rect</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">JavaDay002_4</span></span><br><span class=\"hljs-class\"></span>&#123;<br>    <span class=\"hljs-keyword\">int</span> length;<br>    <span class=\"hljs-keyword\">int</span> wight;<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">getLength</span><span class=\"hljs-params\">()</span> </span>&#123;<br>        <span class=\"hljs-keyword\">return</span> length;<br>    &#125;<br> <br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setLength</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">int</span> length)</span> </span>&#123;<br>        <span class=\"hljs-keyword\">this</span>.length = length;<br>    &#125;<br> <br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">getWight</span><span class=\"hljs-params\">()</span> </span>&#123;<br>        <span class=\"hljs-keyword\">return</span> wight;<br>    &#125;<br> <br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setWight</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">int</span> wight)</span> </span>&#123;<br>        <span class=\"hljs-keyword\">this</span>.wight = wight;<br>    &#125;<br> <br>    <span class=\"hljs-meta\">@Override</span><br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">area</span><span class=\"hljs-params\">()</span> </span>&#123;<br> <br>        <span class=\"hljs-keyword\">return</span> length * wight;<br>    &#125;<br> <br>    <span class=\"hljs-meta\">@Override</span><br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">perimeter</span><span class=\"hljs-params\">()</span> </span>&#123;<br>        <span class=\"hljs-keyword\">return</span> (length + wight) * <span class=\"hljs-number\">2</span>;<br>    &#125;<br>&#125;<br><br><br></code></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs php\"><span class=\"hljs-meta\">&lt;?php</span><br><span class=\"hljs-variable\">$con</span> = mysql_connect(<span class=\"hljs-string\">&quot;localhost&quot;</span>, <span class=\"hljs-string\">&quot;hello&quot;</span>, <span class=\"hljs-string\">&quot;321&quot;</span>);<br><span class=\"hljs-keyword\">if</span> (!<span class=\"hljs-variable\">$con</span>)<br>  &#123;<br>  <span class=\"hljs-keyword\">die</span>(<span class=\"hljs-string\">&#x27;Could not connect: &#x27;</span> . mysql_error());<br>  &#125;<br><br><span class=\"hljs-variable\">$db_selected</span> = mysql_select_db(<span class=\"hljs-string\">&quot;test_db&quot;</span>,<span class=\"hljs-variable\">$con</span>);<br><br><span class=\"hljs-variable\">$sql</span> = <span class=\"hljs-string\">&quot;SELECT * from Person&quot;</span>;<br><span class=\"hljs-variable\">$result</span> = mysql_query(<span class=\"hljs-variable\">$sql</span>,<span class=\"hljs-variable\">$con</span>);<br><br><span class=\"hljs-keyword\">while</span> (<span class=\"hljs-variable\">$property</span> = mysql_fetch_field(<span class=\"hljs-variable\">$result</span>))<br>  &#123;<br>  <span class=\"hljs-keyword\">echo</span> <span class=\"hljs-string\">&quot;Field name: &quot;</span> . <span class=\"hljs-variable\">$property</span>-&gt;name . <span class=\"hljs-string\">&quot;&lt;br /&gt;&quot;</span>;<br>  <span class=\"hljs-keyword\">echo</span> <span class=\"hljs-string\">&quot;Table name: &quot;</span> . <span class=\"hljs-variable\">$property</span>-&gt;table . <span class=\"hljs-string\">&quot;&lt;br /&gt;&quot;</span>;<br>  <span class=\"hljs-keyword\">echo</span> <span class=\"hljs-string\">&quot;Default value: &quot;</span> . <span class=\"hljs-variable\">$property</span>-&gt;def . <span class=\"hljs-string\">&quot;&lt;br /&gt;&quot;</span>;<br>  <span class=\"hljs-keyword\">echo</span> <span class=\"hljs-string\">&quot;Max length: &quot;</span> . <span class=\"hljs-variable\">$property</span>-&gt;max_length . <span class=\"hljs-string\">&quot;&lt;br /&gt;&quot;</span>;<br>  <span class=\"hljs-keyword\">echo</span> <span class=\"hljs-string\">&quot;Not NULL: &quot;</span> . <span class=\"hljs-variable\">$property</span>-&gt;not_null . <span class=\"hljs-string\">&quot;&lt;br /&gt;&quot;</span>; <br>  <span class=\"hljs-keyword\">echo</span> <span class=\"hljs-string\">&quot;Primary Key: &quot;</span> . <span class=\"hljs-variable\">$property</span>-&gt;primary_key . <span class=\"hljs-string\">&quot;&lt;br /&gt;&quot;</span>;<br>  <span class=\"hljs-keyword\">echo</span> <span class=\"hljs-string\">&quot;Unique Key: &quot;</span> . <span class=\"hljs-variable\">$property</span>-&gt;unique_key . <span class=\"hljs-string\">&quot;&lt;br /&gt;&quot;</span>; <br>  <span class=\"hljs-keyword\">echo</span> <span class=\"hljs-string\">&quot;Mutliple Key: &quot;</span> . <span class=\"hljs-variable\">$property</span>-&gt;multiple_key . <span class=\"hljs-string\">&quot;&lt;br /&gt;&quot;</span>;<br>  <span class=\"hljs-keyword\">echo</span> <span class=\"hljs-string\">&quot;Numeric Field: &quot;</span> . <span class=\"hljs-variable\">$property</span>-&gt;numeric . <span class=\"hljs-string\">&quot;&lt;br /&gt;&quot;</span>;<br>  <span class=\"hljs-keyword\">echo</span> <span class=\"hljs-string\">&quot;BLOB: &quot;</span> . <span class=\"hljs-variable\">$property</span>-&gt;blob . <span class=\"hljs-string\">&quot;&lt;br /&gt;&quot;</span>;<br>  <span class=\"hljs-keyword\">echo</span> <span class=\"hljs-string\">&quot;Field Type: &quot;</span> . <span class=\"hljs-variable\">$property</span>-&gt;type . <span class=\"hljs-string\">&quot;&lt;br /&gt;&quot;</span>;<br>  <span class=\"hljs-keyword\">echo</span> <span class=\"hljs-string\">&quot;Unsigned: &quot;</span> . <span class=\"hljs-variable\">$property</span>-&gt;unsigned . <span class=\"hljs-string\">&quot;&lt;br /&gt;&quot;</span>;<br>  <span class=\"hljs-keyword\">echo</span> <span class=\"hljs-string\">&quot;Zero-filled: &quot;</span> . <span class=\"hljs-variable\">$property</span>-&gt;zerofill . <span class=\"hljs-string\">&quot;&lt;br /&gt;&lt;br /&gt;&quot;</span>; <br>  &#125;<br><br>mysql_close(<span class=\"hljs-variable\">$con</span>);<br><span class=\"hljs-meta\">?&gt;</span><br><br></code></pre></td></tr></table></figure>\n\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><br><span class=\"hljs-comment\">#!/usr/bin/python</span><br><span class=\"hljs-comment\"># -*- coding: UTF-8 -*-</span><br> <br><span class=\"hljs-keyword\">import</span> threading<br><span class=\"hljs-keyword\">import</span> time<br> <br><span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">myThread</span> (<span class=\"hljs-params\">threading.Thread</span>):</span><br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">__init__</span>(<span class=\"hljs-params\">self, threadID, name, counter</span>):</span><br>        threading.Thread.__init__(self)<br>        self.threadID = threadID<br>        self.name = name<br>        self.counter = counter<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">run</span>(<span class=\"hljs-params\">self</span>):</span><br>        <span class=\"hljs-built_in\">print</span> <span class=\"hljs-string\">&quot;Starting &quot;</span> + self.name<br>       <span class=\"hljs-comment\"># 获得锁，成功获得锁定后返回True</span><br>       <span class=\"hljs-comment\"># 可选的timeout参数不填时将一直阻塞直到获得锁定</span><br>       <span class=\"hljs-comment\"># 否则超时后将返回False</span><br>        threadLock.acquire()<br>        print_time(self.name, self.counter, <span class=\"hljs-number\">3</span>)<br>        <span class=\"hljs-comment\"># 释放锁</span><br>        threadLock.release()<br> <br><span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">print_time</span>(<span class=\"hljs-params\">threadName, delay, counter</span>):</span><br>    <span class=\"hljs-keyword\">while</span> counter:<br>        time.sleep(delay)<br>        <span class=\"hljs-built_in\">print</span> <span class=\"hljs-string\">&quot;%s: %s&quot;</span> % (threadName, time.ctime(time.time()))<br>        counter -= <span class=\"hljs-number\">1</span><br> <br>threadLock = threading.Lock()<br>threads = []<br> <br><span class=\"hljs-comment\"># 创建新线程</span><br>thread1 = myThread(<span class=\"hljs-number\">1</span>, <span class=\"hljs-string\">&quot;Thread-1&quot;</span>, <span class=\"hljs-number\">1</span>)<br>thread2 = myThread(<span class=\"hljs-number\">2</span>, <span class=\"hljs-string\">&quot;Thread-2&quot;</span>, <span class=\"hljs-number\">2</span>)<br> <br><span class=\"hljs-comment\"># 开启新线程</span><br>thread1.start()<br>thread2.start()<br> <br><span class=\"hljs-comment\"># 添加线程到线程列表</span><br>threads.append(thread1)<br>threads.append(thread2)<br> <br><span class=\"hljs-comment\"># 等待所有线程完成</span><br><span class=\"hljs-keyword\">for</span> t <span class=\"hljs-keyword\">in</span> threads:<br>    t.join()<br><span class=\"hljs-built_in\">print</span> <span class=\"hljs-string\">&quot;Exiting Main Thread&quot;</span><br><br></code></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"html\"><a href=\"#html\" class=\"headerlink\" title=\"html\"></a>html</h3><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs html\"><br><br><br><br><span class=\"hljs-meta\">&lt;!DOCTYPE <span class=\"hljs-meta-keyword\">html</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">html</span> <span class=\"hljs-attr\">lang</span>=<span class=\"hljs-string\">&quot;zh-cn&quot;</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">head</span>&gt;</span><br><br><span class=\"hljs-comment\">&lt;!-- Global site tag (gtag.js) - Google Analytics --&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span> <span class=\"hljs-attr\">async</span> <span class=\"hljs-attr\">src</span>=<span class=\"hljs-string\">&quot;https://www.googletagmanager.com/gtag/js?id=UA-878633-1&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span>&gt;</span><br><span class=\"javascript\">  <span class=\"hljs-built_in\">window</span>.dataLayer = <span class=\"hljs-built_in\">window</span>.dataLayer || [];</span><br><span class=\"javascript\">  <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">gtag</span>(<span class=\"hljs-params\"></span>)</span>&#123;dataLayer.push(<span class=\"hljs-built_in\">arguments</span>);&#125;</span><br><span class=\"javascript\">  gtag(<span class=\"hljs-string\">&#x27;js&#x27;</span>, <span class=\"hljs-keyword\">new</span> <span class=\"hljs-built_in\">Date</span>());</span><br><br><span class=\"javascript\">  gtag(<span class=\"hljs-string\">&#x27;config&#x27;</span>, <span class=\"hljs-string\">&#x27;UA-878633-1&#x27;</span>);</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span><br><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">meta</span> <span class=\"hljs-attr\">charset</span>=<span class=\"hljs-string\">&quot;gbk&quot;</span> /&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">meta</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;robots&quot;</span> <span class=\"hljs-attr\">content</span>=<span class=\"hljs-string\">&quot;all&quot;</span> /&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">meta</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;author&quot;</span> <span class=\"hljs-attr\">content</span>=<span class=\"hljs-string\">&quot;w3school.com.cn&quot;</span> /&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">link</span> <span class=\"hljs-attr\">rel</span>=<span class=\"hljs-string\">&quot;stylesheet&quot;</span> <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">&quot;text/css&quot;</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/c5_20171220.css&quot;</span> /&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">link</span> <span class=\"hljs-attr\">rel</span>=<span class=\"hljs-string\">icon</span> <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">&quot;image/png&quot;</span> <span class=\"hljs-attr\">sizes</span>=<span class=\"hljs-string\">&quot;16x16&quot;</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/ui2017/logo-16.png&quot;</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">link</span> <span class=\"hljs-attr\">rel</span>=<span class=\"hljs-string\">icon</span> <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">&quot;image/png&quot;</span> <span class=\"hljs-attr\">sizes</span>=<span class=\"hljs-string\">&quot;32x32&quot;</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/ui2017/logo-32.png&quot;</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">link</span> <span class=\"hljs-attr\">rel</span>=<span class=\"hljs-string\">icon</span> <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">&quot;image/png&quot;</span> <span class=\"hljs-attr\">sizes</span>=<span class=\"hljs-string\">&quot;48x48&quot;</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/ui2017/logo-48.png&quot;</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">link</span> <span class=\"hljs-attr\">rel</span>=<span class=\"hljs-string\">icon</span> <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">&quot;image/png&quot;</span> <span class=\"hljs-attr\">sizes</span>=<span class=\"hljs-string\">&quot;96x96&quot;</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/ui2017/logo-96.png&quot;</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">link</span> <span class=\"hljs-attr\">rel</span>=<span class=\"hljs-string\">&quot;apple-touch-icon-precomposed&quot;</span> <span class=\"hljs-attr\">sizes</span>=<span class=\"hljs-string\">&quot;96x96&quot;</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/ui2017/logo-96.png&quot;</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">link</span> <span class=\"hljs-attr\">rel</span>=<span class=\"hljs-string\">&quot;apple-touch-icon-precomposed&quot;</span> <span class=\"hljs-attr\">sizes</span>=<span class=\"hljs-string\">&quot;144x144&quot;</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/ui2017/logo-144.png&quot;</span>&gt;</span><br><br><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">title</span>&gt;</span>HTML 测验<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">title</span>&gt;</span><br><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">head</span>&gt;</span><br><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">body</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;html&quot;</span>&gt;</span><br><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;wrapper&quot;</span>&gt;</span><br><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;header&quot;</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/index.html&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;w3school 在线教程&quot;</span> <span class=\"hljs-attr\">style</span>=<span class=\"hljs-string\">&quot;float:left;&quot;</span>&gt;</span>w3school 在线教程<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;ad_head&quot;</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span> <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">&quot;text/javascript&quot;</span>&gt;</span>&lt;!--<br><span class=\"javascript\">google_ad_client = <span class=\"hljs-string\">&quot;pub-3381531532877742&quot;</span>;</span><br><span class=\"javascript\"><span class=\"hljs-comment\">/* 728x90, 创建于 08-12-1 */</span></span><br><span class=\"javascript\">google_ad_slot = <span class=\"hljs-string\">&quot;7423315034&quot;</span>;</span><br>google_ad_width = 728;<br>google_ad_height = 90;<br><span class=\"javascript\"><span class=\"hljs-comment\">//--&gt;</span></span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span> <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">&quot;text/javascript&quot;</span></span><br><span class=\"hljs-tag\"><span class=\"hljs-attr\">src</span>=<span class=\"hljs-string\">&quot;http://pagead2.googlesyndication.com/pagead/show_ads.js&quot;</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span><br><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;navfirst&quot;</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">ul</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;menu&quot;</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;h&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/h.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML 系列教程&quot;</span>&gt;</span>HTML 系列教程<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;b&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/b.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;浏览器脚本教程&quot;</span>&gt;</span>浏览器脚本<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;s&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/s.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;服务器脚本教程&quot;</span>&gt;</span>服务器脚本<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;d&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/d.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;ASP.NET 教程&quot;</span>&gt;</span>ASP.NET 教程<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;x&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/x.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;XML 系列教程&quot;</span>&gt;</span>XML 系列教程<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;ws&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/ws.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;Web Services 系列教程&quot;</span>&gt;</span>Web Services 系列教程<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;w&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/w.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;建站手册&quot;</span>&gt;</span>建站手册<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">ul</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span><br><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;navsecond&quot;</span>&gt;</span><br><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;course&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">h2</span>&gt;</span>HTML 基础教程<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">h2</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">ul</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/html/index.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML 教程&quot;</span>&gt;</span>HTML 教程<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/html/html_jianjie.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML 简介&quot;</span>&gt;</span>HTML 简介<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/html/html_editors.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML 编辑器&quot;</span>&gt;</span>HTML 编辑器<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/html/html_basic.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML 基础 - 四个实例&quot;</span>&gt;</span>HTML 基础<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/html/html_elements.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML 元素&quot;</span>&gt;</span>HTML 元素<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/html/html_attributes.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML 属性&quot;</span>&gt;</span>HTML 属性<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/html/html_headings.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML 标题&quot;</span>&gt;</span>HTML 标题<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/html/html_paragraphs.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML 段落&quot;</span>&gt;</span>HTML 段落<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/html/html_styles.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML 样式 - CSS&quot;</span>&gt;</span>HTML 样式<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/html/html_formatting.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML 文本格式化&quot;</span>&gt;</span>HTML 格式化<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">ul</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">h2</span>&gt;</span>HTML XHTML<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">h2</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">ul</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/html/html_xhtml.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;XHTML 简介&quot;</span>&gt;</span>XHTML 简介<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/html/html_xhtml_elements.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;XHTML - 元素&quot;</span>&gt;</span>XHTML 元素<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/html/html_xhtml_attributes.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;XHTML - 属性&quot;</span>&gt;</span>XHTML 属性<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">ul</span>&gt;</span><br><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">ul</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/html/html5_canvas.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML5 Canvas&quot;</span>&gt;</span>HTML5 画布<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/html/html5_svg.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML5 内联 SVG&quot;</span>&gt;</span>HTML5 SVG<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/html/html5_canvas_vs_svg.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML5 Canvas vs. SVG&quot;</span>&gt;</span>HTML5 画布 vs SVG<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">ul</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">h2</span>&gt;</span>HTML 媒体<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">h2</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">ul</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/html/html_media.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML 多媒体&quot;</span>&gt;</span>HTML 媒体<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/html/html_object.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML Object 元素&quot;</span>&gt;</span>HTML 对象<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/html/html_audio.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML 音频&quot;</span>&gt;</span>HTML 音频<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/html/html_video.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML 视频&quot;</span>&gt;</span>HTML 视频<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">ul</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">h2</span>&gt;</span>HTML API<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">h2</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">ul</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/html/html5_geolocation.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML5 地理定位&quot;</span>&gt;</span>HTML5 地理定位<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/html/html5_draganddrop.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML5 拖放&quot;</span>&gt;</span>HTML5 拖放<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/html/html5_webstorage.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML5 Web 存储&quot;</span>&gt;</span>HTML5 Web 存储<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/html/html5_app_cache.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML 5 应用程序缓存&quot;</span>&gt;</span>HTML5 应用缓存<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/html/html5_webworkers.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML5 Web Workers&quot;</span>&gt;</span>HTML5 Web Workers<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/html/html5_serversentevents.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML5 服务器发送事件&quot;</span>&gt;</span>HTML5 SSE<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">ul</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">h2</span>&gt;</span>实例/测验/总结<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">h2</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">ul</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/example/html_examples.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML 实例&quot;</span>&gt;</span>HTML 实例<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;currentLink&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/html/html_quiz.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML 测验&quot;</span>&gt;</span>HTML 测验<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/html/html_summary.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML 总结&quot;</span>&gt;</span>HTML 总结<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">ul</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">h2</span>&gt;</span>HTML 参考手册<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">h2</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">ul</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/tags/index.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML 4.01 / XHTML 1.0 参考手册&quot;</span>&gt;</span>HTML 标签列表<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/tags/html_ref_standardattributes.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML 标准属性&quot;</span>&gt;</span>HTML 属性<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/tags/html_ref_eventattributes.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML 事件属性&quot;</span>&gt;</span>HTML 事件<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/tags/html_ref_dtd.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML 元素与合法的 Doctype&quot;</span>&gt;</span>HTML 合法 DTD<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/tags/html_ref_colornames.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML 颜色名&quot;</span>&gt;</span>HTML 颜色名<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/tags/html_ref_charactersets.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML 字符集&quot;</span>&gt;</span>HTML 字符集<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/tags/html_ref_ascii.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML ASCII 参考手册&quot;</span>&gt;</span>HTML ASCII<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/tags/html_ref_entities.html&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML ISO-8859-1 参考手册&quot;</span>&gt;</span>HTML ISO-8859-1<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/tags/html_ref_symbols.html&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML 4.01 符号实体&quot;</span>&gt;</span>HTML 符号<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/tags/html_ref_urlencode.html&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML URL 编码&quot;</span>&gt;</span>HTML URL 编码<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/tags/html_ref_language_codes.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML 语言代码参考手册&quot;</span>&gt;</span>HTML 语言代码<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/tags/html_ref_httpmessages.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML 状态消息&quot;</span>&gt;</span>HTML 消息<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">ul</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">h2</span>&gt;</span>HTML5<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">h2</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">ul</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/html/index.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML5 教程&quot;</span>&gt;</span>HTML5 教程<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/tags/index.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML5 参考手册&quot;</span>&gt;</span>HTML5 参考手册<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">ul</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;selected&quot;</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">h2</span>&gt;</span>建站手册<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">h2</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">ul</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/site/index.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;网站构建&quot;</span>&gt;</span>网站构建<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/w3c/index.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;万维网联盟 (W3C)&quot;</span>&gt;</span>万维网联盟 (W3C)<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/browsers/index.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;浏览器信息&quot;</span>&gt;</span>浏览器信息<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/quality/index.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;网站品质&quot;</span>&gt;</span>网站品质<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/semweb/index.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;语义网&quot;</span>&gt;</span>语义网<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/careers/index.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;职业规划&quot;</span>&gt;</span>职业规划<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/hosting/index.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;网站主机&quot;</span>&gt;</span>网站主机<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">ul</span>&gt;</span><br><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">h2</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/about/index.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;关于 W3School&quot;</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;link_about&quot;</span>&gt;</span>关于 W3School<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">h2</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">h2</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/about/about_helping.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;帮助 W3School&quot;</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;link_help&quot;</span>&gt;</span>帮助 W3School<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">h2</span>&gt;</span><br><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span><br><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span><br><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;maincontent&quot;</span>&gt;</span><br><br><br><br><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;intro&quot;</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">p</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">strong</span>&gt;</span>您可以通过 W3SCHOOL 的测验程序来测试您的 HTML 技能。<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">strong</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">p</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span><br><br><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">h2</span>&gt;</span>关于本测验<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">h2</span>&gt;</span><br><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">p</span>&gt;</span>本测验包含 20 道题，每道题的最长答题时间是 20 分钟（这是由于每个 session 的默认有效时间是20钟）。<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">p</span>&gt;</span><br><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">p</span>&gt;</span>本测验是非官方的测试，它仅仅提供了一个了解您对 HTML 的掌握程度的工具。<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">p</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span><br><br><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">h2</span>&gt;</span>测验会被记分<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">h2</span>&gt;</span><br><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">p</span>&gt;</span>每道题的分值是 1 分。在您完成全部的 20 道题之后，系统会为您的测验打分，并提供您做错的题目的正确答案。其中，绿色为正确答案，而红色为错误答案。<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">p</span>&gt;</span><br><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">p</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/quiz/quiz.asp?quiz=html&quot;</span>&gt;</span>现在就开始测验<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span>！祝您好运。<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">p</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span><br><br><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;bpn&quot;</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">ul</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;prenext&quot;</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;pre&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/example/html_examples.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML 实例&quot;</span>&gt;</span>HTML 实例<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;next&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/html/html_summary.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML 总结&quot;</span>&gt;</span>HTML 总结<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">ul</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span><br><br><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">style</span>=<span class=\"hljs-string\">&quot;background-color:#fcfdf8; padding:0;&quot;</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span> <span class=\"hljs-attr\">async</span> <span class=\"hljs-attr\">src</span>=<span class=\"hljs-string\">&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span><br><span class=\"hljs-comment\">&lt;!-- W3School 正文底部广告位 --&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">ins</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;adsbygoogle&quot;</span></span><br><span class=\"hljs-tag\">     <span class=\"hljs-attr\">style</span>=<span class=\"hljs-string\">&quot;display:inline-block;width:800px;height:250px&quot;</span></span><br><span class=\"hljs-tag\">     <span class=\"hljs-attr\">data-ad-client</span>=<span class=\"hljs-string\">&quot;ca-pub-3381531532877742&quot;</span></span><br><span class=\"hljs-tag\">     <span class=\"hljs-attr\">data-ad-slot</span>=<span class=\"hljs-string\">&quot;9384069314&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">ins</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span>&gt;</span><br><span class=\"javascript\">(adsbygoogle = <span class=\"hljs-built_in\">window</span>.adsbygoogle || []).push(&#123;&#125;);</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span><br><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span><br><span class=\"hljs-comment\">&lt;!-- maincontent end --&gt;</span><br><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;sidebar&quot;</span>&gt;</span><br><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;tools&quot;</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">h5</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;tools_reference&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/tags/index.asp&quot;</span>&gt;</span>HTML 参考手册<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">h5</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">h5</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;tools_example&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/example/html_examples.asp&quot;</span>&gt;</span>HTML 实例<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">h5</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">h5</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;tools_quiz&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/html/html_quiz.asp&quot;</span>&gt;</span>HTML 测验<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">h5</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span><br><br><br><br><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span><br><span class=\"hljs-comment\">&lt;!-- wrapper end --&gt;</span><br><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">body</span>&gt;</span><br><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">html</span>&gt;</span><br><br></code></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"链接\"><a href=\"#链接\" class=\"headerlink\" title=\"链接\"></a>链接</h3><p>More info: <a href=\"https://hexo.io/docs/deployment.html\">Deployment</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"标题一\"><a href=\"#标题一\" class=\"headerlink\" title=\"标题一\"></a>标题一</h1><h2 id=\"标题二\"><a href=\"#标题二\" class=\"headerlink\" title=\"标题二\"></a>标题二</h2><h3 id=\"标题三\"><a href=\"#标题三\" class=\"headerlink\" title=\"标题三\"></a>标题三</h3><p>小车正穿行在洛基山脉蜿蜒曲折的盘山公路上，克里朵托夫里维静静地看着窗外，发现车子每当行驶到无路的关头，路边都会出现一块交通指示牌：“前方转弯”或写着“注意急转弯”。而转过每一道弯道之后前方照例又是一片柳暗花明、豁然开朗。山路弯弯、峰回路转，“前方转弯”几个大字一次次冲击着他的眼球，也渐渐敲醒了他的心扉。原来不是路已到了尽头，而是该转弯了……路在脚下，更在心中，心随路转，心路常宽。学会转弯也是人生的智慧，因为挫折往往是转折，危机同时是转机。</p>\n<h3 id=\"代码样式\"><a href=\"#代码样式\" class=\"headerlink\" title=\"代码样式\"></a>代码样式</h3><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">deploy:<br>  - <span class=\"hljs-built_in\">type</span>: git<br>    repo: <span class=\"hljs-comment\"># 像这样设置多个 git 仓库，`名称: 地址,分支`，逗号后面没有空格。</span><br>      github: git@github.com:XXXXXX/XXXXXX.git,branch<br>      coding: git@git.coding.net:XXXXXXX/XXXXXXX,coding-pages<br>    message: Site updated by Hexo at &#123;&#123; now(<span class=\"hljs-string\">&#x27;YYYY-MM-DD HH:mm:ss&#x27;</span>) &#125;&#125;.<br>  - <span class=\"hljs-built_in\">type</span>: rsync<br>    host: YOUR VPS IP <span class=\"hljs-comment\"># 你的服务器的 IP 地址</span><br>    user: YOUR USERNAME <span class=\"hljs-comment\"># 你刚刚复制密钥的那个用户</span><br>    root: YOUR DESTINATION <span class=\"hljs-comment\"># 你想把文件上传到哪里，比如我的是 `~/stackharbor.alynx.xyz/`</span><br>    port: 22 <span class=\"hljs-comment\"># 这是 ssh 默认的端口，如果你修改了，这里也要改</span><br>    args: --progress <span class=\"hljs-comment\"># 额外的 rsync 参数，我这里添加了一个进度条参数，你也可以不设置</span><br>    delete: <span class=\"hljs-literal\">true</span> <span class=\"hljs-comment\"># 是否删除旧的文件</span><br>    verbose: <span class=\"hljs-literal\">true</span> <span class=\"hljs-comment\"># 是否同步时显示详细状态</span><br>    ignore_errors: <span class=\"hljs-literal\">false</span> <span class=\"hljs-comment\"># 忽略错误</span><br></code></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"Bash\"><a href=\"#Bash\" class=\"headerlink\" title=\"Bash\"></a>Bash</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">$ hexo server<br>$ hexo generate<br>$ hexo deploy<br>$ hexo server<br></code></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/server.html\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * Created by y0n on 2017/4/18.</span><br><span class=\"hljs-comment\"> * 1.编写一个代表地址的Address类，地址信息由国家，身份，城市，街道，邮编组成</span><br><span class=\"hljs-comment\"> * 并可以返回完整的地址信息</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">JavaDay002_1</span> </span>&#123;<br>    String Country;<br>    String Identifiy;<br>    String City;<br>    String Street;<br>    String Stamp;<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setCountry</span><span class=\"hljs-params\">(String country)</span> </span>&#123;<br>        Country = country;<br>    &#125;<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setIdentifiy</span><span class=\"hljs-params\">(String identifiy)</span> </span>&#123;<br>        Identifiy = identifiy;<br>    &#125;<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setCity</span><span class=\"hljs-params\">(String city)</span> </span>&#123;<br>        City = city;<br>    &#125;<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setStreet</span><span class=\"hljs-params\">(String street)</span> </span>&#123;<br>        Street = street;<br>    &#125;<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setStamp</span><span class=\"hljs-params\">(String stamp)</span> </span>&#123;<br>        Stamp = stamp;<br>    &#125;<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title\">getCountry</span><span class=\"hljs-params\">()</span> </span>&#123;<br>        <span class=\"hljs-keyword\">return</span> Country;<br>    &#125;<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title\">getIdentifiy</span><span class=\"hljs-params\">()</span> </span>&#123;<br>        <span class=\"hljs-keyword\">return</span> Identifiy;<br>    &#125;<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title\">getCity</span><span class=\"hljs-params\">()</span> </span>&#123;<br>        <span class=\"hljs-keyword\">return</span> City;<br>    &#125;<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title\">getStreet</span><span class=\"hljs-params\">()</span> </span>&#123;<br>        <span class=\"hljs-keyword\">return</span> Street;<br>    &#125;<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title\">getStamp</span><span class=\"hljs-params\">()</span> </span>&#123;<br>        <span class=\"hljs-keyword\">return</span> Stamp;<br>    &#125;<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">main</span><span class=\"hljs-params\">(String []args)</span></span><br><span class=\"hljs-function\">    </span>&#123;<br>        JavaDay002_1 address = <span class=\"hljs-keyword\">new</span> JavaDay002_1();<br>        address.setCountry(<span class=\"hljs-string\">&quot;Chain&quot;</span>);<br>        address.setIdentifiy(<span class=\"hljs-string\">&quot;Student&quot;</span>);<br>        address.setCity(<span class=\"hljs-string\">&quot;Beijing&quot;</span>);<br>        address.setStreet(<span class=\"hljs-string\">&quot;XinFuRoad&quot;</span>);<br>        address.setStamp(<span class=\"hljs-string\">&quot;402310&quot;</span>);<br> <br>        System.out.println(<span class=\"hljs-string\">&quot;地址：&quot;</span> +<br>                address.getCountry() + <span class=\"hljs-string\">&quot;_&quot;</span> +<br>                address.getIdentifiy() + <span class=\"hljs-string\">&quot;_&quot;</span> +<br>                address.getCity() + <span class=\"hljs-string\">&quot;_&quot;</span> +<br>                address.getStreet() + <span class=\"hljs-string\">&quot;_&quot;</span> +<br>                address.getStamp());<br>    &#125;<br>&#125;<br> <br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * Created by y0n on 2017/4/18.</span><br><span class=\"hljs-comment\"> * 2.设计一个Dog类，有名字，颜色，年龄等属性，定义构造方法来初始化类的这些属性，</span><br><span class=\"hljs-comment\"> * 定义方法输出Dog信息，编写应用程序使用Dog类</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">JavaDay002_2</span> </span>&#123;<br> <br>    String strName;<br>    String strColor;<br>    String strAge;<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-title\">JavaDay002_2</span><span class=\"hljs-params\">(String strName, String strColor, String strAge)</span> </span>&#123;<br>        <span class=\"hljs-keyword\">this</span>.strName = strName;<br>        <span class=\"hljs-keyword\">this</span>.strColor = strColor;<br>        <span class=\"hljs-keyword\">this</span>.strAge = strAge;<br>    &#125;<br> <br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">ShowDog</span><span class=\"hljs-params\">()</span></span><br><span class=\"hljs-function\">    </span>&#123;<br>        System.out.println(<span class=\"hljs-string\">&quot;此狗叫&quot;</span> + strName + <span class=\"hljs-string\">&quot;,&quot;</span> + strColor + <span class=\"hljs-string\">&quot;色,&quot;</span> + strAge + <span class=\"hljs-string\">&quot;岁&quot;</span>);<br>    &#125;<br> <br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">main</span><span class=\"hljs-params\">(String []args)</span></span><br><span class=\"hljs-function\">    </span>&#123;<br>        JavaDay002_2 Dog = <span class=\"hljs-keyword\">new</span> JavaDay002_2(<span class=\"hljs-string\">&quot;旺财&quot;</span>, <span class=\"hljs-string\">&quot;白&quot;</span>, <span class=\"hljs-string\">&quot;2&quot;</span>);<br>        Dog.ShowDog();<br>    &#125;<br>&#125;<br> <br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * Created by y0n on 2017/4/18.</span><br><span class=\"hljs-comment\"> * 3.定义一个数组，它可以存储一个矩形，三角形，圆形</span><br><span class=\"hljs-comment\"> * 一个双精度数或一个整数</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">JavaDay002_3</span> </span>&#123;<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">Rectangle</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">int</span> length, <span class=\"hljs-keyword\">int</span> wight)</span></span><br><span class=\"hljs-function\">    </span>&#123;<br>        <span class=\"hljs-keyword\">return</span> length * wight;<br>    &#125;<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">Trangle</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">int</span> aSide, <span class=\"hljs-keyword\">int</span> bSide, <span class=\"hljs-keyword\">int</span> cSide)</span></span><br><span class=\"hljs-function\">    </span>&#123;<br>        <span class=\"hljs-keyword\">int</span> s = (aSide + bSide + cSide) / <span class=\"hljs-number\">2</span>;<br>        <span class=\"hljs-keyword\">double</span> area = (<span class=\"hljs-keyword\">double</span>) (s * (s - aSide) * (s - bSide) * (s - cSide));<br>        <span class=\"hljs-keyword\">return</span> (<span class=\"hljs-keyword\">int</span>) Math.pow(area, <span class=\"hljs-number\">0.5</span>);<br>    &#125;<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">Round</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">int</span> redis)</span></span><br><span class=\"hljs-function\">    </span>&#123;<br>        <span class=\"hljs-keyword\">return</span> (<span class=\"hljs-keyword\">int</span>) (redis * redis * <span class=\"hljs-number\">3.14</span>);<br>    &#125;<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">IntNumber</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">int</span> nNum)</span></span><br><span class=\"hljs-function\">    </span>&#123;<br>        <span class=\"hljs-keyword\">return</span> nNum;<br>    &#125;<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">main</span><span class=\"hljs-params\">(String []args)</span></span><br><span class=\"hljs-function\">    </span>&#123;<br>        JavaDay002_3 array = <span class=\"hljs-keyword\">new</span> JavaDay002_3();<br> <br>        System.out.println(<span class=\"hljs-string\">&quot;矩形：&quot;</span> + array.Rectangle(<span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">4</span>)<br>                + <span class=\"hljs-string\">&quot; 三角形：&quot;</span> + array.Trangle(<span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">4</span>, <span class=\"hljs-number\">5</span>)<br>                + <span class=\"hljs-string\">&quot; 圆：&quot;</span> + array.Round(<span class=\"hljs-number\">2</span>)<br>                + <span class=\"hljs-string\">&quot; 整数：&quot;</span> + array.IntNumber(<span class=\"hljs-number\">5</span>));<br>    &#125;<br>&#125;<br> <br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * Created by y0n on 2017/4/18.</span><br><span class=\"hljs-comment\"> * 4.定义一个抽象类Shape，用类标示二维图形，</span><br><span class=\"hljs-comment\"> * Shape具有抽象方法area和perimeter，分别用来计算形状的面积和周长，</span><br><span class=\"hljs-comment\"> * 定义一些二维形状类(矩形，三角形，圆)</span><br><span class=\"hljs-comment\"> * 这些类都是Shape类的子类</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">abstract</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">JavaDay002_4</span> </span>&#123;<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">abstract</span> <span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">area</span><span class=\"hljs-params\">()</span></span>;<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">abstract</span> <span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">perimeter</span><span class=\"hljs-params\">()</span></span>;<br>&#125;<br> <br><span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">Rect</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">JavaDay002_4</span></span><br><span class=\"hljs-class\"></span>&#123;<br>    <span class=\"hljs-keyword\">int</span> length;<br>    <span class=\"hljs-keyword\">int</span> wight;<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">getLength</span><span class=\"hljs-params\">()</span> </span>&#123;<br>        <span class=\"hljs-keyword\">return</span> length;<br>    &#125;<br> <br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setLength</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">int</span> length)</span> </span>&#123;<br>        <span class=\"hljs-keyword\">this</span>.length = length;<br>    &#125;<br> <br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">getWight</span><span class=\"hljs-params\">()</span> </span>&#123;<br>        <span class=\"hljs-keyword\">return</span> wight;<br>    &#125;<br> <br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">setWight</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">int</span> wight)</span> </span>&#123;<br>        <span class=\"hljs-keyword\">this</span>.wight = wight;<br>    &#125;<br> <br>    <span class=\"hljs-meta\">@Override</span><br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">area</span><span class=\"hljs-params\">()</span> </span>&#123;<br> <br>        <span class=\"hljs-keyword\">return</span> length * wight;<br>    &#125;<br> <br>    <span class=\"hljs-meta\">@Override</span><br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">perimeter</span><span class=\"hljs-params\">()</span> </span>&#123;<br>        <span class=\"hljs-keyword\">return</span> (length + wight) * <span class=\"hljs-number\">2</span>;<br>    &#125;<br>&#125;<br><br><br></code></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs php\"><span class=\"hljs-meta\">&lt;?php</span><br><span class=\"hljs-variable\">$con</span> = mysql_connect(<span class=\"hljs-string\">&quot;localhost&quot;</span>, <span class=\"hljs-string\">&quot;hello&quot;</span>, <span class=\"hljs-string\">&quot;321&quot;</span>);<br><span class=\"hljs-keyword\">if</span> (!<span class=\"hljs-variable\">$con</span>)<br>  &#123;<br>  <span class=\"hljs-keyword\">die</span>(<span class=\"hljs-string\">&#x27;Could not connect: &#x27;</span> . mysql_error());<br>  &#125;<br><br><span class=\"hljs-variable\">$db_selected</span> = mysql_select_db(<span class=\"hljs-string\">&quot;test_db&quot;</span>,<span class=\"hljs-variable\">$con</span>);<br><br><span class=\"hljs-variable\">$sql</span> = <span class=\"hljs-string\">&quot;SELECT * from Person&quot;</span>;<br><span class=\"hljs-variable\">$result</span> = mysql_query(<span class=\"hljs-variable\">$sql</span>,<span class=\"hljs-variable\">$con</span>);<br><br><span class=\"hljs-keyword\">while</span> (<span class=\"hljs-variable\">$property</span> = mysql_fetch_field(<span class=\"hljs-variable\">$result</span>))<br>  &#123;<br>  <span class=\"hljs-keyword\">echo</span> <span class=\"hljs-string\">&quot;Field name: &quot;</span> . <span class=\"hljs-variable\">$property</span>-&gt;name . <span class=\"hljs-string\">&quot;&lt;br /&gt;&quot;</span>;<br>  <span class=\"hljs-keyword\">echo</span> <span class=\"hljs-string\">&quot;Table name: &quot;</span> . <span class=\"hljs-variable\">$property</span>-&gt;table . <span class=\"hljs-string\">&quot;&lt;br /&gt;&quot;</span>;<br>  <span class=\"hljs-keyword\">echo</span> <span class=\"hljs-string\">&quot;Default value: &quot;</span> . <span class=\"hljs-variable\">$property</span>-&gt;def . <span class=\"hljs-string\">&quot;&lt;br /&gt;&quot;</span>;<br>  <span class=\"hljs-keyword\">echo</span> <span class=\"hljs-string\">&quot;Max length: &quot;</span> . <span class=\"hljs-variable\">$property</span>-&gt;max_length . <span class=\"hljs-string\">&quot;&lt;br /&gt;&quot;</span>;<br>  <span class=\"hljs-keyword\">echo</span> <span class=\"hljs-string\">&quot;Not NULL: &quot;</span> . <span class=\"hljs-variable\">$property</span>-&gt;not_null . <span class=\"hljs-string\">&quot;&lt;br /&gt;&quot;</span>; <br>  <span class=\"hljs-keyword\">echo</span> <span class=\"hljs-string\">&quot;Primary Key: &quot;</span> . <span class=\"hljs-variable\">$property</span>-&gt;primary_key . <span class=\"hljs-string\">&quot;&lt;br /&gt;&quot;</span>;<br>  <span class=\"hljs-keyword\">echo</span> <span class=\"hljs-string\">&quot;Unique Key: &quot;</span> . <span class=\"hljs-variable\">$property</span>-&gt;unique_key . <span class=\"hljs-string\">&quot;&lt;br /&gt;&quot;</span>; <br>  <span class=\"hljs-keyword\">echo</span> <span class=\"hljs-string\">&quot;Mutliple Key: &quot;</span> . <span class=\"hljs-variable\">$property</span>-&gt;multiple_key . <span class=\"hljs-string\">&quot;&lt;br /&gt;&quot;</span>;<br>  <span class=\"hljs-keyword\">echo</span> <span class=\"hljs-string\">&quot;Numeric Field: &quot;</span> . <span class=\"hljs-variable\">$property</span>-&gt;numeric . <span class=\"hljs-string\">&quot;&lt;br /&gt;&quot;</span>;<br>  <span class=\"hljs-keyword\">echo</span> <span class=\"hljs-string\">&quot;BLOB: &quot;</span> . <span class=\"hljs-variable\">$property</span>-&gt;blob . <span class=\"hljs-string\">&quot;&lt;br /&gt;&quot;</span>;<br>  <span class=\"hljs-keyword\">echo</span> <span class=\"hljs-string\">&quot;Field Type: &quot;</span> . <span class=\"hljs-variable\">$property</span>-&gt;type . <span class=\"hljs-string\">&quot;&lt;br /&gt;&quot;</span>;<br>  <span class=\"hljs-keyword\">echo</span> <span class=\"hljs-string\">&quot;Unsigned: &quot;</span> . <span class=\"hljs-variable\">$property</span>-&gt;unsigned . <span class=\"hljs-string\">&quot;&lt;br /&gt;&quot;</span>;<br>  <span class=\"hljs-keyword\">echo</span> <span class=\"hljs-string\">&quot;Zero-filled: &quot;</span> . <span class=\"hljs-variable\">$property</span>-&gt;zerofill . <span class=\"hljs-string\">&quot;&lt;br /&gt;&lt;br /&gt;&quot;</span>; <br>  &#125;<br><br>mysql_close(<span class=\"hljs-variable\">$con</span>);<br><span class=\"hljs-meta\">?&gt;</span><br><br></code></pre></td></tr></table></figure>\n\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><br><span class=\"hljs-comment\">#!/usr/bin/python</span><br><span class=\"hljs-comment\"># -*- coding: UTF-8 -*-</span><br> <br><span class=\"hljs-keyword\">import</span> threading<br><span class=\"hljs-keyword\">import</span> time<br> <br><span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">myThread</span> (<span class=\"hljs-params\">threading.Thread</span>):</span><br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">__init__</span>(<span class=\"hljs-params\">self, threadID, name, counter</span>):</span><br>        threading.Thread.__init__(self)<br>        self.threadID = threadID<br>        self.name = name<br>        self.counter = counter<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">run</span>(<span class=\"hljs-params\">self</span>):</span><br>        <span class=\"hljs-built_in\">print</span> <span class=\"hljs-string\">&quot;Starting &quot;</span> + self.name<br>       <span class=\"hljs-comment\"># 获得锁，成功获得锁定后返回True</span><br>       <span class=\"hljs-comment\"># 可选的timeout参数不填时将一直阻塞直到获得锁定</span><br>       <span class=\"hljs-comment\"># 否则超时后将返回False</span><br>        threadLock.acquire()<br>        print_time(self.name, self.counter, <span class=\"hljs-number\">3</span>)<br>        <span class=\"hljs-comment\"># 释放锁</span><br>        threadLock.release()<br> <br><span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">print_time</span>(<span class=\"hljs-params\">threadName, delay, counter</span>):</span><br>    <span class=\"hljs-keyword\">while</span> counter:<br>        time.sleep(delay)<br>        <span class=\"hljs-built_in\">print</span> <span class=\"hljs-string\">&quot;%s: %s&quot;</span> % (threadName, time.ctime(time.time()))<br>        counter -= <span class=\"hljs-number\">1</span><br> <br>threadLock = threading.Lock()<br>threads = []<br> <br><span class=\"hljs-comment\"># 创建新线程</span><br>thread1 = myThread(<span class=\"hljs-number\">1</span>, <span class=\"hljs-string\">&quot;Thread-1&quot;</span>, <span class=\"hljs-number\">1</span>)<br>thread2 = myThread(<span class=\"hljs-number\">2</span>, <span class=\"hljs-string\">&quot;Thread-2&quot;</span>, <span class=\"hljs-number\">2</span>)<br> <br><span class=\"hljs-comment\"># 开启新线程</span><br>thread1.start()<br>thread2.start()<br> <br><span class=\"hljs-comment\"># 添加线程到线程列表</span><br>threads.append(thread1)<br>threads.append(thread2)<br> <br><span class=\"hljs-comment\"># 等待所有线程完成</span><br><span class=\"hljs-keyword\">for</span> t <span class=\"hljs-keyword\">in</span> threads:<br>    t.join()<br><span class=\"hljs-built_in\">print</span> <span class=\"hljs-string\">&quot;Exiting Main Thread&quot;</span><br><br></code></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"html\"><a href=\"#html\" class=\"headerlink\" title=\"html\"></a>html</h3><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs html\"><br><br><br><br><span class=\"hljs-meta\">&lt;!DOCTYPE <span class=\"hljs-meta-keyword\">html</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">html</span> <span class=\"hljs-attr\">lang</span>=<span class=\"hljs-string\">&quot;zh-cn&quot;</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">head</span>&gt;</span><br><br><span class=\"hljs-comment\">&lt;!-- Global site tag (gtag.js) - Google Analytics --&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span> <span class=\"hljs-attr\">async</span> <span class=\"hljs-attr\">src</span>=<span class=\"hljs-string\">&quot;https://www.googletagmanager.com/gtag/js?id=UA-878633-1&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span>&gt;</span><br><span class=\"javascript\">  <span class=\"hljs-built_in\">window</span>.dataLayer = <span class=\"hljs-built_in\">window</span>.dataLayer || [];</span><br><span class=\"javascript\">  <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">gtag</span>(<span class=\"hljs-params\"></span>)</span>&#123;dataLayer.push(<span class=\"hljs-built_in\">arguments</span>);&#125;</span><br><span class=\"javascript\">  gtag(<span class=\"hljs-string\">&#x27;js&#x27;</span>, <span class=\"hljs-keyword\">new</span> <span class=\"hljs-built_in\">Date</span>());</span><br><br><span class=\"javascript\">  gtag(<span class=\"hljs-string\">&#x27;config&#x27;</span>, <span class=\"hljs-string\">&#x27;UA-878633-1&#x27;</span>);</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span><br><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">meta</span> <span class=\"hljs-attr\">charset</span>=<span class=\"hljs-string\">&quot;gbk&quot;</span> /&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">meta</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;robots&quot;</span> <span class=\"hljs-attr\">content</span>=<span class=\"hljs-string\">&quot;all&quot;</span> /&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">meta</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;author&quot;</span> <span class=\"hljs-attr\">content</span>=<span class=\"hljs-string\">&quot;w3school.com.cn&quot;</span> /&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">link</span> <span class=\"hljs-attr\">rel</span>=<span class=\"hljs-string\">&quot;stylesheet&quot;</span> <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">&quot;text/css&quot;</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/c5_20171220.css&quot;</span> /&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">link</span> <span class=\"hljs-attr\">rel</span>=<span class=\"hljs-string\">icon</span> <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">&quot;image/png&quot;</span> <span class=\"hljs-attr\">sizes</span>=<span class=\"hljs-string\">&quot;16x16&quot;</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/ui2017/logo-16.png&quot;</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">link</span> <span class=\"hljs-attr\">rel</span>=<span class=\"hljs-string\">icon</span> <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">&quot;image/png&quot;</span> <span class=\"hljs-attr\">sizes</span>=<span class=\"hljs-string\">&quot;32x32&quot;</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/ui2017/logo-32.png&quot;</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">link</span> <span class=\"hljs-attr\">rel</span>=<span class=\"hljs-string\">icon</span> <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">&quot;image/png&quot;</span> <span class=\"hljs-attr\">sizes</span>=<span class=\"hljs-string\">&quot;48x48&quot;</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/ui2017/logo-48.png&quot;</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">link</span> <span class=\"hljs-attr\">rel</span>=<span class=\"hljs-string\">icon</span> <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">&quot;image/png&quot;</span> <span class=\"hljs-attr\">sizes</span>=<span class=\"hljs-string\">&quot;96x96&quot;</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/ui2017/logo-96.png&quot;</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">link</span> <span class=\"hljs-attr\">rel</span>=<span class=\"hljs-string\">&quot;apple-touch-icon-precomposed&quot;</span> <span class=\"hljs-attr\">sizes</span>=<span class=\"hljs-string\">&quot;96x96&quot;</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/ui2017/logo-96.png&quot;</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">link</span> <span class=\"hljs-attr\">rel</span>=<span class=\"hljs-string\">&quot;apple-touch-icon-precomposed&quot;</span> <span class=\"hljs-attr\">sizes</span>=<span class=\"hljs-string\">&quot;144x144&quot;</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/ui2017/logo-144.png&quot;</span>&gt;</span><br><br><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">title</span>&gt;</span>HTML 测验<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">title</span>&gt;</span><br><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">head</span>&gt;</span><br><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">body</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;html&quot;</span>&gt;</span><br><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;wrapper&quot;</span>&gt;</span><br><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;header&quot;</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/index.html&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;w3school 在线教程&quot;</span> <span class=\"hljs-attr\">style</span>=<span class=\"hljs-string\">&quot;float:left;&quot;</span>&gt;</span>w3school 在线教程<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;ad_head&quot;</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span> <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">&quot;text/javascript&quot;</span>&gt;</span>&lt;!--<br><span class=\"javascript\">google_ad_client = <span class=\"hljs-string\">&quot;pub-3381531532877742&quot;</span>;</span><br><span class=\"javascript\"><span class=\"hljs-comment\">/* 728x90, 创建于 08-12-1 */</span></span><br><span class=\"javascript\">google_ad_slot = <span class=\"hljs-string\">&quot;7423315034&quot;</span>;</span><br>google_ad_width = 728;<br>google_ad_height = 90;<br><span class=\"javascript\"><span class=\"hljs-comment\">//--&gt;</span></span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span> <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">&quot;text/javascript&quot;</span></span><br><span class=\"hljs-tag\"><span class=\"hljs-attr\">src</span>=<span class=\"hljs-string\">&quot;http://pagead2.googlesyndication.com/pagead/show_ads.js&quot;</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span><br><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;navfirst&quot;</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">ul</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;menu&quot;</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;h&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/h.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML 系列教程&quot;</span>&gt;</span>HTML 系列教程<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;b&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/b.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;浏览器脚本教程&quot;</span>&gt;</span>浏览器脚本<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;s&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/s.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;服务器脚本教程&quot;</span>&gt;</span>服务器脚本<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;d&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/d.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;ASP.NET 教程&quot;</span>&gt;</span>ASP.NET 教程<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;x&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/x.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;XML 系列教程&quot;</span>&gt;</span>XML 系列教程<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;ws&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/ws.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;Web Services 系列教程&quot;</span>&gt;</span>Web Services 系列教程<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;w&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/w.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;建站手册&quot;</span>&gt;</span>建站手册<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">ul</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span><br><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;navsecond&quot;</span>&gt;</span><br><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;course&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">h2</span>&gt;</span>HTML 基础教程<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">h2</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">ul</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/html/index.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML 教程&quot;</span>&gt;</span>HTML 教程<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/html/html_jianjie.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML 简介&quot;</span>&gt;</span>HTML 简介<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/html/html_editors.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML 编辑器&quot;</span>&gt;</span>HTML 编辑器<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/html/html_basic.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML 基础 - 四个实例&quot;</span>&gt;</span>HTML 基础<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/html/html_elements.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML 元素&quot;</span>&gt;</span>HTML 元素<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/html/html_attributes.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML 属性&quot;</span>&gt;</span>HTML 属性<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/html/html_headings.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML 标题&quot;</span>&gt;</span>HTML 标题<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/html/html_paragraphs.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML 段落&quot;</span>&gt;</span>HTML 段落<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/html/html_styles.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML 样式 - CSS&quot;</span>&gt;</span>HTML 样式<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/html/html_formatting.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML 文本格式化&quot;</span>&gt;</span>HTML 格式化<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">ul</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">h2</span>&gt;</span>HTML XHTML<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">h2</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">ul</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/html/html_xhtml.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;XHTML 简介&quot;</span>&gt;</span>XHTML 简介<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/html/html_xhtml_elements.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;XHTML - 元素&quot;</span>&gt;</span>XHTML 元素<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/html/html_xhtml_attributes.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;XHTML - 属性&quot;</span>&gt;</span>XHTML 属性<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">ul</span>&gt;</span><br><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">ul</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/html/html5_canvas.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML5 Canvas&quot;</span>&gt;</span>HTML5 画布<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/html/html5_svg.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML5 内联 SVG&quot;</span>&gt;</span>HTML5 SVG<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/html/html5_canvas_vs_svg.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML5 Canvas vs. SVG&quot;</span>&gt;</span>HTML5 画布 vs SVG<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">ul</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">h2</span>&gt;</span>HTML 媒体<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">h2</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">ul</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/html/html_media.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML 多媒体&quot;</span>&gt;</span>HTML 媒体<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/html/html_object.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML Object 元素&quot;</span>&gt;</span>HTML 对象<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/html/html_audio.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML 音频&quot;</span>&gt;</span>HTML 音频<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/html/html_video.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML 视频&quot;</span>&gt;</span>HTML 视频<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">ul</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">h2</span>&gt;</span>HTML API<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">h2</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">ul</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/html/html5_geolocation.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML5 地理定位&quot;</span>&gt;</span>HTML5 地理定位<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/html/html5_draganddrop.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML5 拖放&quot;</span>&gt;</span>HTML5 拖放<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/html/html5_webstorage.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML5 Web 存储&quot;</span>&gt;</span>HTML5 Web 存储<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/html/html5_app_cache.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML 5 应用程序缓存&quot;</span>&gt;</span>HTML5 应用缓存<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/html/html5_webworkers.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML5 Web Workers&quot;</span>&gt;</span>HTML5 Web Workers<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/html/html5_serversentevents.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML5 服务器发送事件&quot;</span>&gt;</span>HTML5 SSE<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">ul</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">h2</span>&gt;</span>实例/测验/总结<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">h2</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">ul</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/example/html_examples.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML 实例&quot;</span>&gt;</span>HTML 实例<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;currentLink&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/html/html_quiz.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML 测验&quot;</span>&gt;</span>HTML 测验<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/html/html_summary.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML 总结&quot;</span>&gt;</span>HTML 总结<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">ul</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">h2</span>&gt;</span>HTML 参考手册<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">h2</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">ul</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/tags/index.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML 4.01 / XHTML 1.0 参考手册&quot;</span>&gt;</span>HTML 标签列表<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/tags/html_ref_standardattributes.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML 标准属性&quot;</span>&gt;</span>HTML 属性<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/tags/html_ref_eventattributes.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML 事件属性&quot;</span>&gt;</span>HTML 事件<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/tags/html_ref_dtd.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML 元素与合法的 Doctype&quot;</span>&gt;</span>HTML 合法 DTD<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/tags/html_ref_colornames.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML 颜色名&quot;</span>&gt;</span>HTML 颜色名<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/tags/html_ref_charactersets.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML 字符集&quot;</span>&gt;</span>HTML 字符集<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/tags/html_ref_ascii.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML ASCII 参考手册&quot;</span>&gt;</span>HTML ASCII<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/tags/html_ref_entities.html&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML ISO-8859-1 参考手册&quot;</span>&gt;</span>HTML ISO-8859-1<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/tags/html_ref_symbols.html&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML 4.01 符号实体&quot;</span>&gt;</span>HTML 符号<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/tags/html_ref_urlencode.html&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML URL 编码&quot;</span>&gt;</span>HTML URL 编码<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/tags/html_ref_language_codes.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML 语言代码参考手册&quot;</span>&gt;</span>HTML 语言代码<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/tags/html_ref_httpmessages.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML 状态消息&quot;</span>&gt;</span>HTML 消息<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">ul</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">h2</span>&gt;</span>HTML5<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">h2</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">ul</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/html/index.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML5 教程&quot;</span>&gt;</span>HTML5 教程<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/tags/index.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML5 参考手册&quot;</span>&gt;</span>HTML5 参考手册<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">ul</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;selected&quot;</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">h2</span>&gt;</span>建站手册<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">h2</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">ul</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/site/index.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;网站构建&quot;</span>&gt;</span>网站构建<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/w3c/index.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;万维网联盟 (W3C)&quot;</span>&gt;</span>万维网联盟 (W3C)<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/browsers/index.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;浏览器信息&quot;</span>&gt;</span>浏览器信息<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/quality/index.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;网站品质&quot;</span>&gt;</span>网站品质<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/semweb/index.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;语义网&quot;</span>&gt;</span>语义网<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/careers/index.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;职业规划&quot;</span>&gt;</span>职业规划<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/hosting/index.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;网站主机&quot;</span>&gt;</span>网站主机<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">ul</span>&gt;</span><br><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">h2</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/about/index.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;关于 W3School&quot;</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;link_about&quot;</span>&gt;</span>关于 W3School<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">h2</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">h2</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/about/about_helping.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;帮助 W3School&quot;</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;link_help&quot;</span>&gt;</span>帮助 W3School<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">h2</span>&gt;</span><br><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span><br><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span><br><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;maincontent&quot;</span>&gt;</span><br><br><br><br><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;intro&quot;</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">p</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">strong</span>&gt;</span>您可以通过 W3SCHOOL 的测验程序来测试您的 HTML 技能。<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">strong</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">p</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span><br><br><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">h2</span>&gt;</span>关于本测验<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">h2</span>&gt;</span><br><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">p</span>&gt;</span>本测验包含 20 道题，每道题的最长答题时间是 20 分钟（这是由于每个 session 的默认有效时间是20钟）。<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">p</span>&gt;</span><br><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">p</span>&gt;</span>本测验是非官方的测试，它仅仅提供了一个了解您对 HTML 的掌握程度的工具。<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">p</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span><br><br><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">h2</span>&gt;</span>测验会被记分<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">h2</span>&gt;</span><br><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">p</span>&gt;</span>每道题的分值是 1 分。在您完成全部的 20 道题之后，系统会为您的测验打分，并提供您做错的题目的正确答案。其中，绿色为正确答案，而红色为错误答案。<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">p</span>&gt;</span><br><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">p</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/quiz/quiz.asp?quiz=html&quot;</span>&gt;</span>现在就开始测验<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span>！祝您好运。<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">p</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span><br><br><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;bpn&quot;</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">ul</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;prenext&quot;</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;pre&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/example/html_examples.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML 实例&quot;</span>&gt;</span>HTML 实例<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;next&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/html/html_summary.asp&quot;</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;HTML 总结&quot;</span>&gt;</span>HTML 总结<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">ul</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span><br><br><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">style</span>=<span class=\"hljs-string\">&quot;background-color:#fcfdf8; padding:0;&quot;</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span> <span class=\"hljs-attr\">async</span> <span class=\"hljs-attr\">src</span>=<span class=\"hljs-string\">&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span><br><span class=\"hljs-comment\">&lt;!-- W3School 正文底部广告位 --&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">ins</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;adsbygoogle&quot;</span></span><br><span class=\"hljs-tag\">     <span class=\"hljs-attr\">style</span>=<span class=\"hljs-string\">&quot;display:inline-block;width:800px;height:250px&quot;</span></span><br><span class=\"hljs-tag\">     <span class=\"hljs-attr\">data-ad-client</span>=<span class=\"hljs-string\">&quot;ca-pub-3381531532877742&quot;</span></span><br><span class=\"hljs-tag\">     <span class=\"hljs-attr\">data-ad-slot</span>=<span class=\"hljs-string\">&quot;9384069314&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">ins</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span>&gt;</span><br><span class=\"javascript\">(adsbygoogle = <span class=\"hljs-built_in\">window</span>.adsbygoogle || []).push(&#123;&#125;);</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span><br><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span><br><span class=\"hljs-comment\">&lt;!-- maincontent end --&gt;</span><br><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;sidebar&quot;</span>&gt;</span><br><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;tools&quot;</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">h5</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;tools_reference&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/tags/index.asp&quot;</span>&gt;</span>HTML 参考手册<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">h5</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">h5</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;tools_example&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/example/html_examples.asp&quot;</span>&gt;</span>HTML 实例<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">h5</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">h5</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;tools_quiz&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;/html/html_quiz.asp&quot;</span>&gt;</span>HTML 测验<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">h5</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span><br><br><br><br><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span><br><span class=\"hljs-comment\">&lt;!-- wrapper end --&gt;</span><br><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">body</span>&gt;</span><br><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">html</span>&gt;</span><br><br></code></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"链接\"><a href=\"#链接\" class=\"headerlink\" title=\"链接\"></a>链接</h3><p>More info: <a href=\"https://hexo.io/docs/deployment.html\">Deployment</a></p>\n"},{"title":"Markdown文章样式HTML","date":"2018-09-16T12:55:48.000Z","description":"Markdown文章样式HTML Hexo文章样式","_content":"\n\n# 标题一\n\n## 标题二\n\n\n### 标题三\n\n小车正穿行在洛基山脉蜿蜒曲折的盘山公路上，克里朵托夫里维静静地看着窗外，发现车子每当行驶到无路的关头，路边都会出现一块交通指示牌：“前方转弯”或写着“注意急转弯”。而转过每一道弯道之后前方照例又是一片柳暗花明、豁然开朗。山路弯弯、峰回路转，“前方转弯”几个大字一次次冲击着他的眼球，也渐渐敲醒了他的心扉。原来不是路已到了尽头，而是该转弯了……路在脚下，更在心中，心随路转，心路常宽。学会转弯也是人生的智慧，因为挫折往往是转折，危机同时是转机。\n\n### 代码样式\n\n\n### Create a new post\n\n\n\n\n### Bash\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n\n### html\n\n\n\n\n\n---\n\n<!DOCTYPE html>\n<html lang=\"zh-cn\">\n<head>\n\n<!-- Global site tag (gtag.js) - Google Analytics -->\n<script async src=\"https://www.googletagmanager.com/gtag/js?id=UA-878633-1\"></script>\n<script>\n  window.dataLayer = window.dataLayer || [];\n  function gtag(){dataLayer.push(arguments);}\n  gtag('js', new Date());\n\n  gtag('config', 'UA-878633-1');\n</script>\n\n<meta charset=\"gbk\" />\n<meta name=\"robots\" content=\"all\" />\n<meta name=\"author\" content=\"w3school.com.cn\" />\n<link rel=\"stylesheet\" type=\"text/css\" href=\"/c5_20171220.css\" />\n<link rel=icon type=\"image/png\" sizes=\"16x16\" href=\"/ui2017/logo-16.png\">\n<link rel=icon type=\"image/png\" sizes=\"32x32\" href=\"/ui2017/logo-32.png\">\n<link rel=icon type=\"image/png\" sizes=\"48x48\" href=\"/ui2017/logo-48.png\">\n<link rel=icon type=\"image/png\" sizes=\"96x96\" href=\"/ui2017/logo-96.png\">\n<link rel=\"apple-touch-icon-precomposed\" sizes=\"96x96\" href=\"/ui2017/logo-96.png\">\n<link rel=\"apple-touch-icon-precomposed\" sizes=\"144x144\" href=\"/ui2017/logo-144.png\">\n\n\n<title>HTML 测验</title>\n\n</head>\n\n<body class=\"html\">\n\n<div id=\"wrapper\">\n\n<div id=\"header\">\n<a href=\"/index.html\" title=\"w3school 在线教程\" style=\"float:left;\">w3school 在线教程</a>\n<div id=\"ad_head\">\n<script type=\"text/javascript\"><!--\ngoogle_ad_client = \"pub-3381531532877742\";\n/* 728x90, 创建于 08-12-1 */\ngoogle_ad_slot = \"7423315034\";\ngoogle_ad_width = 728;\ngoogle_ad_height = 90;\n//-->\n</script>\n<script type=\"text/javascript\"\nsrc=\"http://pagead2.googlesyndication.com/pagead/show_ads.js\">\n</script>\n</div>\n</div>\n\n<div id=\"navfirst\">\n<ul id=\"menu\">\n<li id=\"h\"><a href=\"/h.asp\" title=\"HTML 系列教程\">HTML 系列教程</a></li>\n<li id=\"b\"><a href=\"/b.asp\" title=\"浏览器脚本教程\">浏览器脚本</a></li>\n<li id=\"s\"><a href=\"/s.asp\" title=\"服务器脚本教程\">服务器脚本</a></li>\n<li id=\"d\"><a href=\"/d.asp\" title=\"ASP.NET 教程\">ASP.NET 教程</a></li>\n<li id=\"x\"><a href=\"/x.asp\" title=\"XML 系列教程\">XML 系列教程</a></li>\n<li id=\"ws\"><a href=\"/ws.asp\" title=\"Web Services 系列教程\">Web Services 系列教程</a></li>\n<li id=\"w\"><a href=\"/w.asp\" title=\"建站手册\">建站手册</a></li>\n</ul>\n</div>\n\n<div id=\"navsecond\">\n\n<div id=\"course\"><h2>HTML 基础教程</h2>\n<ul>\n<li><a href=\"/html/index.asp\" title=\"HTML 教程\">HTML 教程</a></li>\n<li><a href=\"/html/html_jianjie.asp\" title=\"HTML 简介\">HTML 简介</a></li>\n<li><a href=\"/html/html_editors.asp\" title=\"HTML 编辑器\">HTML 编辑器</a></li>\n<li><a href=\"/html/html_basic.asp\" title=\"HTML 基础 - 四个实例\">HTML 基础</a></li>\n<li><a href=\"/html/html_elements.asp\" title=\"HTML 元素\">HTML 元素</a></li>\n<li><a href=\"/html/html_attributes.asp\" title=\"HTML 属性\">HTML 属性</a></li>\n<li><a href=\"/html/html_headings.asp\" title=\"HTML 标题\">HTML 标题</a></li>\n<li><a href=\"/html/html_paragraphs.asp\" title=\"HTML 段落\">HTML 段落</a></li>\n<li><a href=\"/html/html_styles.asp\" title=\"HTML 样式 - CSS\">HTML 样式</a></li>\n<li><a href=\"/html/html_formatting.asp\" title=\"HTML 文本格式化\">HTML 格式化</a></li>\n\n</ul>\n<h2>HTML XHTML</h2>\n<ul>\n<li><a href=\"/html/html_xhtml.asp\" title=\"XHTML 简介\">XHTML 简介</a></li>\n<li><a href=\"/html/html_xhtml_elements.asp\" title=\"XHTML - 元素\">XHTML 元素</a></li>\n<li><a href=\"/html/html_xhtml_attributes.asp\" title=\"XHTML - 属性\">XHTML 属性</a></li>\n</ul>\n\n<ul>\n<li><a href=\"/html/html5_canvas.asp\" title=\"HTML5 Canvas\">HTML5 画布</a></li>\n<li><a href=\"/html/html5_svg.asp\" title=\"HTML5 内联 SVG\">HTML5 SVG</a></li>\n<li><a href=\"/html/html5_canvas_vs_svg.asp\" title=\"HTML5 Canvas vs. SVG\">HTML5 画布 vs SVG</a></li>\n</ul>\n<h2>HTML 媒体</h2>\n<ul>\n<li><a href=\"/html/html_media.asp\" title=\"HTML 多媒体\">HTML 媒体</a></li>\n<li><a href=\"/html/html_object.asp\" title=\"HTML Object 元素\">HTML 对象</a></li>\n<li><a href=\"/html/html_audio.asp\" title=\"HTML 音频\">HTML 音频</a></li>\n<li><a href=\"/html/html_video.asp\" title=\"HTML 视频\">HTML 视频</a></li>\n</ul>\n<h2>HTML API</h2>\n<ul>\n<li><a href=\"/html/html5_geolocation.asp\" title=\"HTML5 地理定位\">HTML5 地理定位</a></li>\n<li><a href=\"/html/html5_draganddrop.asp\" title=\"HTML5 拖放\">HTML5 拖放</a></li>\n<li><a href=\"/html/html5_webstorage.asp\" title=\"HTML5 Web 存储\">HTML5 Web 存储</a></li>\n<li><a href=\"/html/html5_app_cache.asp\" title=\"HTML 5 应用程序缓存\">HTML5 应用缓存</a></li>\n<li><a href=\"/html/html5_webworkers.asp\" title=\"HTML5 Web Workers\">HTML5 Web Workers</a></li>\n<li><a href=\"/html/html5_serversentevents.asp\" title=\"HTML5 服务器发送事件\">HTML5 SSE</a></li>\n</ul>\n<h2>实例/测验/总结</h2>\n<ul>\n<li><a href=\"/example/html_examples.asp\" title=\"HTML 实例\">HTML 实例</a></li>\n<li class=\"currentLink\"><a href=\"/html/html_quiz.asp\" title=\"HTML 测验\">HTML 测验</a></li>\n<li><a href=\"/html/html_summary.asp\" title=\"HTML 总结\">HTML 总结</a></li>\n</ul>\n<h2>HTML 参考手册</h2>\n<ul>\n<li><a href=\"/tags/index.asp\" title=\"HTML 4.01 / XHTML 1.0 参考手册\">HTML 标签列表</a></li>\n<li><a href=\"/tags/html_ref_standardattributes.asp\" title=\"HTML 标准属性\">HTML 属性</a></li>\n<li><a href=\"/tags/html_ref_eventattributes.asp\" title=\"HTML 事件属性\">HTML 事件</a></li>\n<li><a href=\"/tags/html_ref_dtd.asp\" title=\"HTML 元素与合法的 Doctype\">HTML 合法 DTD</a></li>\n<li><a href=\"/tags/html_ref_colornames.asp\" title=\"HTML 颜色名\">HTML 颜色名</a></li>\n<li><a href=\"/tags/html_ref_charactersets.asp\" title=\"HTML 字符集\">HTML 字符集</a></li>\n<li><a href=\"/tags/html_ref_ascii.asp\" title=\"HTML ASCII 参考手册\">HTML ASCII</a></li>\n<li><a href=\"/tags/html_ref_entities.html\" title=\"HTML ISO-8859-1 参考手册\">HTML ISO-8859-1</a></li>\n<li><a href=\"/tags/html_ref_symbols.html\" title=\"HTML 4.01 符号实体\">HTML 符号</a></li>\n<li><a href=\"/tags/html_ref_urlencode.html\" title=\"HTML URL 编码\">HTML URL 编码</a></li>\n<li><a href=\"/tags/html_ref_language_codes.asp\" title=\"HTML 语言代码参考手册\">HTML 语言代码</a></li>\n<li><a href=\"/tags/html_ref_httpmessages.asp\" title=\"HTML 状态消息\">HTML 消息</a></li>\n</ul>\n<h2>HTML5</h2>\n<ul>\n<li><a href=\"/html/index.asp\" title=\"HTML5 教程\">HTML5 教程</a></li>\n<li><a href=\"/tags/index.asp\" title=\"HTML5 参考手册\">HTML5 参考手册</a></li>\n</ul>\n</div><div id=\"selected\">\n<h2>建站手册</h2>\n<ul>\n<li><a href=\"/site/index.asp\" title=\"网站构建\">网站构建</a></li>\n<li><a href=\"/w3c/index.asp\" title=\"万维网联盟 (W3C)\">万维网联盟 (W3C)</a></li>\n<li><a href=\"/browsers/index.asp\" title=\"浏览器信息\">浏览器信息</a></li>\n<li><a href=\"/quality/index.asp\" title=\"网站品质\">网站品质</a></li>\n<li><a href=\"/semweb/index.asp\" title=\"语义网\">语义网</a></li>\n<li><a href=\"/careers/index.asp\" title=\"职业规划\">职业规划</a></li>\n<li><a href=\"/hosting/index.asp\" title=\"网站主机\">网站主机</a></li>\n</ul>\n\n<h2><a href=\"/about/index.asp\" title=\"关于 W3School\" id=\"link_about\">关于 W3School</a></h2>\n<h2><a href=\"/about/about_helping.asp\" title=\"帮助 W3School\" id=\"link_help\">帮助 W3School</a></h2>\n\n</div>\n\n</div>\n\n<div id=\"maincontent\">\n\n\n\n\n<div id=\"intro\">\n<p><strong>您可以通过 W3SCHOOL 的测验程序来测试您的 HTML 技能。</strong></p>\n</div>\n\n\n<div>\n<h2>关于本测验</h2>\n\n<p>本测验包含 20 道题，每道题的最长答题时间是 20 分钟（这是由于每个 session 的默认有效时间是20钟）。</p>\n\n<p>本测验是非官方的测试，它仅仅提供了一个了解您对 HTML 的掌握程度的工具。</p>\n</div>\n\n\n<div>\n<h2>测验会被记分</h2>\n\n<p>每道题的分值是 1 分。在您完成全部的 20 道题之后，系统会为您的测验打分，并提供您做错的题目的正确答案。其中，绿色为正确答案，而红色为错误答案。</p>\n\n<p><a href=\"/quiz/quiz.asp?quiz=html\">现在就开始测验</a>！祝您好运。</p>\n</div>\n\n\n<div id=\"bpn\">\n<ul class=\"prenext\">\n<li class=\"pre\"><a href=\"/example/html_examples.asp\" title=\"HTML 实例\">HTML 实例</a></li>\n<li class=\"next\"><a href=\"/html/html_summary.asp\" title=\"HTML 总结\">HTML 总结</a></li>\n</ul>\n</div>\n\n\n<div style=\"background-color:#fcfdf8; padding:0;\">\n<script async src=\"//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js\"></script>\n<!-- W3School 正文底部广告位 -->\n<ins class=\"adsbygoogle\"\n     style=\"display:inline-block;width:800px;height:250px\"\n     data-ad-client=\"ca-pub-3381531532877742\"\n     data-ad-slot=\"9384069314\"></ins>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n</div>\n\n</div>\n<!-- maincontent end -->\n\n<div id=\"sidebar\">\n\n<div id=\"tools\">\n<h5 id=\"tools_reference\"><a href=\"/tags/index.asp\">HTML 参考手册</a></h5>\n<h5 id=\"tools_example\"><a href=\"/example/html_examples.asp\">HTML 实例</a></h5>\n<h5 id=\"tools_quiz\"><a href=\"/html/html_quiz.asp\">HTML 测验</a></h5>\n</div>\n\n\n\n\n</div>\n<!-- wrapper end -->\n\n</body>\n\n</html>\n\n\n\n---\n\n\n\n### 链接\nMore info: [Deployment](https://hexo.io/docs/deployment.html)\n\n\n\n\n### 打飞机HTML+CSS+JS\n\n\n---\n<script id=\"jquery_172\" type=\"text/javascript\" class=\"library\" src=\"/js/sandbox/jquery/jquery-1.7.2.min.js\"></script>\n\n<style>\n\t\n\tbody{ margin:0; padding:0; background:#000; font-family:microsoft yahei;  }\n\t#box { width: 300px; height:500px; margin:10px auto; overflow:hidden; position:relative; border:15px solid #f0f0f0; }\n\t#box .title{ width:300px; height:40px; line-height:40px; position:absolute; left:0; top:80px; z-index:1; color:#fff; text-align:center; font-size:24px; }\n\t#box .difficulty{ width:300px; position:absolute; top:180px; z-index:1; font-family:microsoft yahei;}\n\t#box .difficulty a{ width:180px; height:30px; line-height:30px; text-align:center; display:block; margin:20px auto 0 auto; background:#f0f0f0; color:#333; text-decoration:none;}\n\t#box .difficulty a:hover{ background:#900; color:#fff;}\n\t#box .bg img{ display:block;}\n\t#box .warcraft{ width:60px; height:36px; position:absolute; left:120px;  top:500px; background:url('http://sandbox.runjs.cn/uploads/rs/130/es3n7cq9/warcraft.png') center no-repeat; z-index:3;}\n\t#box .bullet{ width:6px; height:22px; background:url('http://sandbox.runjs.cn/uploads/rs/130/es3n7cq9/bullet.png'); position:absolute; z-index:2}\n\t#box .enemy{ width:23px; height:30px; background:url('http://sandbox.runjs.cn/uploads/rs/130/es3n7cq9/enemy.png'); position:absolute; z-index:3}\n\t#box .score { width:220px; height:30px; line-height:30px; position:absolute; color:#fff; font-weight:bold; padding-left:5px; font-size:16px; z-index:5;}\n\t#box .tips{ width:240px; height: 200px; line-height:40px; padding:10px; position:absolute; left:20px; top:130px;  background:#f0f0f0;}\n\t#box .tips .type{ width:160px; padding: 2px 15px; height:30px; line-height:30px; text-align:center; color:red; font-weight:bold;}\n\t#box .tips p{ width:160px; height:40px; font-size:32px; line-height:40px; text-align:center; cursor:pointer;  background:#333; color:#fff; margin:20px auto 0 auto;}\n\t#box .tips .nn,#box .tips .tt{ padding:2px 10px; font-weight:bold;  color:blue;}\n\t#box .tips .tt{ display:block; text-align:center; font-size:24px;}\n</style>\n\n<div id=\"box\"></div>\n\n<script>\n\n$(function () {\n\tgame.startScreen.draw();\n})\n\n\nvar game = {\n\t\n\tstage : $(\"#box\"),\n\t\n\tmodetxt : \"\",\n\t\n\ttimer : {\n\t\tbg : null,\n\t\tbullet : null,\n\t\tenemy : null\n\t},\n\tmode : [\n\t\t[7,2500,500,1000,4000,200],\n\t\t[5,2000,300,3000,6000,300],\n\t\t[3,1500,50,4000,8000,400]\n\t], //参数配置\n\tnum : {\n\t\tcount : 0,\n\t\twarcraftX : 0,\n\t\twarcraftY : 0,\n\t\tscore : 0\n\t},\n\tstitle : function ( score ) {\n\t\tswitch ( game.modetxt ) {\n\t\t\tcase '纯屌丝模式' : \n\t\t\t\tif( score == 0 ) {\n\t\t\t\t\treturn '屌丝中的屌丝';\n\t\t\t\t}\n\t\t\t\telse if( score <= 20000 ) {\n\t\t\t\t\treturn '入门级屌丝'\n\t\t\t\t}\n\t\t\t\telse if( score <= 100000 && score > 20000 ) {\n\t\t\t\t\treturn '资深屌丝'\n\t\t\t\t}\n\t\t\t\telse if( score <= 500000 && score > 100000 ) {\n\t\t\t\t\treturn '知名屌丝'\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\treturn '全国十佳屌丝';\n\t\t\t\t}\n\t\t\tcase '高富帅模式' : \n\t\t\t\tif( score == 0 ) {\n\t\t\t\t\treturn '药不能停';\n\t\t\t\t}\n\t\t\t\telse if( score <= 20000 ) {\n\t\t\t\t\treturn '人艰不拆'\n\t\t\t\t}\n\t\t\t\telse if( score <= 100000 && score > 20000 ) {\n\t\t\t\t\treturn '夜用型高富帅'\n\t\t\t\t}\n\t\t\t\telse if( score <= 500000 && score > 100000 ) {\n\t\t\t\t\treturn '日夜两用'\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\treturn '打飞机战将';\n\t\t\t\t}\n\t\t\tcase '李少侠模式' : \n\t\t\t\tif( score == 0 ) {\n\t\t\t\t\treturn '坑爹坑娘';\n\t\t\t\t}\n\t\t\t\telse if( score <= 20000 ) {\n\t\t\t\t\treturn '我很无辜'\n\t\t\t\t}\n\t\t\t\telse if( score <= 100000 && score > 20000 ) {\n\t\t\t\t\treturn '小伙伴惊呆了'\n\t\t\t\t}\n\t\t\t\telse if( score <= 500000 && score > 100000 ) {\n\t\t\t\t\treturn '我是受害者'\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\treturn '嫖客';\n\t\t\t\t}\n\t\t}\n\t},\n\tstartScreen : {\n\t\tdraw : function () {\n\t\t\tvar title = $(\"<div>\");\n\t\t\t\ttitle.addClass(\"title\");\n\t\t\t\ttitle.html(\"打飞机 1.0 Javascript版\");\n\t\t\t\tgame.stage.append(title);\n\t\t\t\n\t\t\tvar difficulty = $(\"<div>\");\n\t\t\t\tdifficulty.addClass(\"difficulty\");\n\t\t\t\tdifficulty.html(\"<a href='javascript:void(0)'>纯屌丝模式</a><a href='javascript:void(0)'>高富帅模式</a><a href='javascript:void(0)'>李少侠模式</a>\");\n\t\t\t\tgame.stage.append(difficulty);\n\t\t\tgame.stage.find($(\".difficulty\")).delegate(\"a\",\"click\", function ( e ) {\n\t\t\t\tgame.stage.start = true ;\n\t\t\t\tgame.startScreen.remove();\n\t\t\t\t$(document).mousemove( function ( e ) {\n\t\t\t\t\tif( game.num.count % 2 == 0 && game.stage.start)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar e = e || event;\n\t\t\t\t\t\tvar x = e.clientX - game.stage.offset().left - 10;\n\t\t\t\t\t\tvar y = e.clientY - game.stage.offset().top - 10;\n\t\t\t\t\t\tgame.core.warcraft([x,y]);\n\t\t\t\t\t}\n\t\t\t\t\tgame.num.count++;\n\t\t\t\t})\n\t\t\t\tvar set = game.mode[$(this).index()];\n\t\t\t\tgame.modetxt = $(this).html();\n\t\t\t\tgame.core.draw(set[0]);\n\t\t\t\tgame.timer.bullet = setInterval ( function () {\n\t\t\t\t\tgame.core.bullet(set[1],[game.num.warcraftX,game.num.warcraftY]);\n\t\t\t\t},set[2]);\n\t\t\t\tgame.timer.enemy =setInterval ( function () {\n\t\t\t\t\tgame.core.enemy({\n\t\t\t\t\t\tspeed : game.randomNum(set[3],set[4]),\n\t\t\t\t\t\tleft : game.randomNum(0,277),\n\t\t\t\t\t\ttop : -game.randomNum(30,80)\n\t\t\t\t\t});\n\t\t\t\t},set[5])\n\t\t\t\n\t\t\t});\n\t\t}, //绘制开始界面\n\t\tremove : function () {\n\t\t\tvar removeDiv = game.stage.children($(\"div\"));\n\t\t\tremoveDiv.stop().animate({opacity:0},100);\n\t\t\tsetTimeout( function () {\n\t\t\t\tremoveDiv.remove();\n\t\t\t},300)\n\t\t}\n\t}, //开始场景\n\tcore : {\n\t\tdraw : function ( speed ) {\n\t\t\tvar warcraft = $(\"<div>\");\n\t\t\t\twarcraft.addClass(\"warcraft\");\n\t\t\tgame.stage.append(warcraft);\n\t\t\tvar score = $(\"<div>\");\n\t\t\t\tscore.addClass(\"score\");\n\t\t\t\tscore.html(\"0\");\n\t\t\tgame.stage.append(score);\n\t\t}, //绘制游戏场景\n\t\twarcraft : function ( pos ) { \n\t\t\tvar warcraft = game.stage.find($(\".warcraft\")),\n\t\t\t\tleft =  pos[0] -warcraft.width()/2 - 3,\n\t\t\t\ttop =  pos[1] - warcraft.height()/2 - 6;\n\t\t\t\n\t\t\tif( left <= -warcraft.width()/2 ) {\n\t\t\t\tleft = -warcraft.width()/2;\n\t\t\t}\n\t\t\telse if( left >= game.stage.width() - warcraft.width()/2) {\n\t\t\t\tleft = game.stage.width() - warcraft.width()/2;\n\t\t\t}\n\t\t\tif( top <= 0) {\n\t\t\t\ttop = 0;\n\t\t\t}\n\t\t\telse if ( top >= game.stage.height() - warcraft.height()) {\n\t\t\t\ttop = game.stage.height() - warcraft.height();\n\t\t\t}\n\t\t\twarcraft.css({left:left,top:top});\n\t\t\tgame.num.warcraftX = left + warcraft.width()/2;\n\t\t\tgame.num.warcraftY = top + warcraft.height()/2;\n\t\t}, //战斗机位置\n\t\tbullet : function ( speed ,pos ) {\n\t\t\tvar bullet = $(\"<div>\");\n\t\t\t\tbullet.addClass(\"bullet\");\n\t\t\tgame.stage.append(bullet);\n\t\t\tbullet.css({\n\t\t\t\t\tleft : pos[0] - bullet.width()/2,\n\t\t\t\t\ttop : pos[1] - bullet.height()/2\n\t\t\t\t});\n\t\t\tbullet.stop().animate({top:-bullet.height()},speed,function () { bullet.remove();})\n\t\t}, //子弹开始发射\n\t\tenemy : function ( argument ) {\n\t\t\tvar speed = argument.speed;\n\t\t\tvar left = argument.left;\n\t\t\tvar top = argument.top;\n\t\t\tvar oEnemy  = $(\"<div>\");\n\t\t\t\toEnemy.addClass(\"enemy\");\n\t\t\t\toEnemy.css({\n\t\t\t\t\tleft : left,\n\t\t\t\t\ttop : top\n\t\t\t\t});\n\t\t\toEnemy.appendTo(game.stage);\n\t\t\toEnemy.stop().animate( { top:530 }, speed , function () { oEnemy.remove(); clearInterval(oEnemy.timer)});\n\t\t\toEnemy.timer = setInterval ( function () {\n\t\t\t\tvar x = parseInt(oEnemy.css(\"left\")) + 12,\n\t\t\t\t\ty = parseInt(oEnemy.css(\"top\")) + 15,\n\t\t\t\t\tl = $(\".bullet\").length;\n\t\t\t\tfor( var i = 0 ; i< l; i++ )\n\t\t\t\t{\n\t\t\t\t\tvar bx = Math.abs( x - parseInt($(\".bullet\").eq(i).css(\"left\"))),\n\t\t\t\t\t\tby = Math.abs( y - parseInt($(\".bullet\").eq(i).css(\"top\")));\n\t\t\t\t\tif( bx <= 14 &&  by <= 20 )\n\t\t\t\t\t{\n\t\t\t\t\t\toEnemy.css(\"background\",\"url('http://sandbox.runjs.cn/uploads/rs/130/es3n7cq9/boom.png')\");\n\t\t\t\t\t\t$(\".bullet\").eq(i).remove();\n\t\t\t\t\t\tclearInterval(oEnemy.timer);\n\t\t\t\t\t\tgame.num.score++;\n\t\t\t\t\t\tgame.stage.find($(\".score\")).html(game.num.score*1000);\n\t\t\t\t\t\tsetTimeout( function () { oEnemy.remove(); },300)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tvar bx2 = Math.abs( x - parseInt($(\".warcraft\").css(\"left\")) - 30),\n\t\t\t\t\tby2 = Math.abs( y - parseInt($(\".warcraft\").css(\"top\")) - 18);\n\t\t\t\tif( bx2 <= 40 &&  by2 <= 33 )\n\t\t\t\t{\n\t\t\t\t\tvar tips = $(\"<div>\");\n\t\t\t\t\t\ttips.addClass(\"tips\");\n\t\t\t\t\t\ttips.html(\"您在<span class='type'>\" + game.modetxt.substring(0,3) + \"杯</span>全国花式打飞机大赛上，以<span class='nn'>\"+$(\".score\").html() + \"</span>分荣获称谓<span class='tt'>\"+game.stitle($(\".score\").html())+\"</span><p>再打一次</p>\");\n\t\t\t\t\t\tgame.stage.delegate(\".tips p\",'click',function(){\n\t\t\t\t\t\t\tgame.num.score = 0;\n\t\t\t\t\t\t\tgame.startScreen.remove();\n\t\t\t\t\t\t\tgame.startScreen.draw();\n\t\t\t\t\t\t})\n\t\t\t\t\toEnemy.remove();\n\t\t\t\t\t$(\".score\").css(\"display\",\"none\");\n\t\t\t\t\t$(\".warcraft\").css(\"background\",\"url('http://sandbox.runjs.cn/uploads/rs/130/es3n7cq9/boom2.png')\");\n\t\t\t\t\tclearInterval(oEnemy.timer);\n\t\t\t\t\tsetTimeout( function () { $(\".warcraft\").remove(); },300)\n\t\t\t\t\tclearInterval(game.timer.bullet);\n\t\t\t\t\tclearInterval(game.timer.enemy);\n\t\t\t\t\tclearInterval(game.timer.bg);\n\t\t\t\t\tsetTimeout( function () {\n\t\t\t\t\t\tgame.stage.append(tips);\n\t\t\t\t\t},3000)\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t},50)\n\t\t} //敌机\n\n\t}, //核心代码\n\trandomNum : function (a,b){\n\t\tvar value = Math.abs(a-b) , num ;\n\t\tnum = parseInt(Math.random()*(value)) + Math.min(a,b);\n\t\treturn num;\n\t} //产生指定区域整形随机数。\n};\n\n\t\n</script>\n\n\n---","source":"_posts/文章样式HTML.md","raw":"---\ntitle: Markdown文章样式HTML\ndate: 2018-09-16 20:55:48\ncategories: \"默认\" #文章分類目錄 可以省略\ntags: #Java \n     - 文章\n     - 样式\n     - Markdown\n     - HTML\ndescription: Markdown文章样式HTML Hexo文章样式  #你對本頁的描述 可以省略\n---\n\n\n# 标题一\n\n## 标题二\n\n\n### 标题三\n\n小车正穿行在洛基山脉蜿蜒曲折的盘山公路上，克里朵托夫里维静静地看着窗外，发现车子每当行驶到无路的关头，路边都会出现一块交通指示牌：“前方转弯”或写着“注意急转弯”。而转过每一道弯道之后前方照例又是一片柳暗花明、豁然开朗。山路弯弯、峰回路转，“前方转弯”几个大字一次次冲击着他的眼球，也渐渐敲醒了他的心扉。原来不是路已到了尽头，而是该转弯了……路在脚下，更在心中，心随路转，心路常宽。学会转弯也是人生的智慧，因为挫折往往是转折，危机同时是转机。\n\n### 代码样式\n\n\n### Create a new post\n\n\n\n\n### Bash\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n\n### html\n\n\n\n\n\n---\n\n<!DOCTYPE html>\n<html lang=\"zh-cn\">\n<head>\n\n<!-- Global site tag (gtag.js) - Google Analytics -->\n<script async src=\"https://www.googletagmanager.com/gtag/js?id=UA-878633-1\"></script>\n<script>\n  window.dataLayer = window.dataLayer || [];\n  function gtag(){dataLayer.push(arguments);}\n  gtag('js', new Date());\n\n  gtag('config', 'UA-878633-1');\n</script>\n\n<meta charset=\"gbk\" />\n<meta name=\"robots\" content=\"all\" />\n<meta name=\"author\" content=\"w3school.com.cn\" />\n<link rel=\"stylesheet\" type=\"text/css\" href=\"/c5_20171220.css\" />\n<link rel=icon type=\"image/png\" sizes=\"16x16\" href=\"/ui2017/logo-16.png\">\n<link rel=icon type=\"image/png\" sizes=\"32x32\" href=\"/ui2017/logo-32.png\">\n<link rel=icon type=\"image/png\" sizes=\"48x48\" href=\"/ui2017/logo-48.png\">\n<link rel=icon type=\"image/png\" sizes=\"96x96\" href=\"/ui2017/logo-96.png\">\n<link rel=\"apple-touch-icon-precomposed\" sizes=\"96x96\" href=\"/ui2017/logo-96.png\">\n<link rel=\"apple-touch-icon-precomposed\" sizes=\"144x144\" href=\"/ui2017/logo-144.png\">\n\n\n<title>HTML 测验</title>\n\n</head>\n\n<body class=\"html\">\n\n<div id=\"wrapper\">\n\n<div id=\"header\">\n<a href=\"/index.html\" title=\"w3school 在线教程\" style=\"float:left;\">w3school 在线教程</a>\n<div id=\"ad_head\">\n<script type=\"text/javascript\"><!--\ngoogle_ad_client = \"pub-3381531532877742\";\n/* 728x90, 创建于 08-12-1 */\ngoogle_ad_slot = \"7423315034\";\ngoogle_ad_width = 728;\ngoogle_ad_height = 90;\n//-->\n</script>\n<script type=\"text/javascript\"\nsrc=\"http://pagead2.googlesyndication.com/pagead/show_ads.js\">\n</script>\n</div>\n</div>\n\n<div id=\"navfirst\">\n<ul id=\"menu\">\n<li id=\"h\"><a href=\"/h.asp\" title=\"HTML 系列教程\">HTML 系列教程</a></li>\n<li id=\"b\"><a href=\"/b.asp\" title=\"浏览器脚本教程\">浏览器脚本</a></li>\n<li id=\"s\"><a href=\"/s.asp\" title=\"服务器脚本教程\">服务器脚本</a></li>\n<li id=\"d\"><a href=\"/d.asp\" title=\"ASP.NET 教程\">ASP.NET 教程</a></li>\n<li id=\"x\"><a href=\"/x.asp\" title=\"XML 系列教程\">XML 系列教程</a></li>\n<li id=\"ws\"><a href=\"/ws.asp\" title=\"Web Services 系列教程\">Web Services 系列教程</a></li>\n<li id=\"w\"><a href=\"/w.asp\" title=\"建站手册\">建站手册</a></li>\n</ul>\n</div>\n\n<div id=\"navsecond\">\n\n<div id=\"course\"><h2>HTML 基础教程</h2>\n<ul>\n<li><a href=\"/html/index.asp\" title=\"HTML 教程\">HTML 教程</a></li>\n<li><a href=\"/html/html_jianjie.asp\" title=\"HTML 简介\">HTML 简介</a></li>\n<li><a href=\"/html/html_editors.asp\" title=\"HTML 编辑器\">HTML 编辑器</a></li>\n<li><a href=\"/html/html_basic.asp\" title=\"HTML 基础 - 四个实例\">HTML 基础</a></li>\n<li><a href=\"/html/html_elements.asp\" title=\"HTML 元素\">HTML 元素</a></li>\n<li><a href=\"/html/html_attributes.asp\" title=\"HTML 属性\">HTML 属性</a></li>\n<li><a href=\"/html/html_headings.asp\" title=\"HTML 标题\">HTML 标题</a></li>\n<li><a href=\"/html/html_paragraphs.asp\" title=\"HTML 段落\">HTML 段落</a></li>\n<li><a href=\"/html/html_styles.asp\" title=\"HTML 样式 - CSS\">HTML 样式</a></li>\n<li><a href=\"/html/html_formatting.asp\" title=\"HTML 文本格式化\">HTML 格式化</a></li>\n\n</ul>\n<h2>HTML XHTML</h2>\n<ul>\n<li><a href=\"/html/html_xhtml.asp\" title=\"XHTML 简介\">XHTML 简介</a></li>\n<li><a href=\"/html/html_xhtml_elements.asp\" title=\"XHTML - 元素\">XHTML 元素</a></li>\n<li><a href=\"/html/html_xhtml_attributes.asp\" title=\"XHTML - 属性\">XHTML 属性</a></li>\n</ul>\n\n<ul>\n<li><a href=\"/html/html5_canvas.asp\" title=\"HTML5 Canvas\">HTML5 画布</a></li>\n<li><a href=\"/html/html5_svg.asp\" title=\"HTML5 内联 SVG\">HTML5 SVG</a></li>\n<li><a href=\"/html/html5_canvas_vs_svg.asp\" title=\"HTML5 Canvas vs. SVG\">HTML5 画布 vs SVG</a></li>\n</ul>\n<h2>HTML 媒体</h2>\n<ul>\n<li><a href=\"/html/html_media.asp\" title=\"HTML 多媒体\">HTML 媒体</a></li>\n<li><a href=\"/html/html_object.asp\" title=\"HTML Object 元素\">HTML 对象</a></li>\n<li><a href=\"/html/html_audio.asp\" title=\"HTML 音频\">HTML 音频</a></li>\n<li><a href=\"/html/html_video.asp\" title=\"HTML 视频\">HTML 视频</a></li>\n</ul>\n<h2>HTML API</h2>\n<ul>\n<li><a href=\"/html/html5_geolocation.asp\" title=\"HTML5 地理定位\">HTML5 地理定位</a></li>\n<li><a href=\"/html/html5_draganddrop.asp\" title=\"HTML5 拖放\">HTML5 拖放</a></li>\n<li><a href=\"/html/html5_webstorage.asp\" title=\"HTML5 Web 存储\">HTML5 Web 存储</a></li>\n<li><a href=\"/html/html5_app_cache.asp\" title=\"HTML 5 应用程序缓存\">HTML5 应用缓存</a></li>\n<li><a href=\"/html/html5_webworkers.asp\" title=\"HTML5 Web Workers\">HTML5 Web Workers</a></li>\n<li><a href=\"/html/html5_serversentevents.asp\" title=\"HTML5 服务器发送事件\">HTML5 SSE</a></li>\n</ul>\n<h2>实例/测验/总结</h2>\n<ul>\n<li><a href=\"/example/html_examples.asp\" title=\"HTML 实例\">HTML 实例</a></li>\n<li class=\"currentLink\"><a href=\"/html/html_quiz.asp\" title=\"HTML 测验\">HTML 测验</a></li>\n<li><a href=\"/html/html_summary.asp\" title=\"HTML 总结\">HTML 总结</a></li>\n</ul>\n<h2>HTML 参考手册</h2>\n<ul>\n<li><a href=\"/tags/index.asp\" title=\"HTML 4.01 / XHTML 1.0 参考手册\">HTML 标签列表</a></li>\n<li><a href=\"/tags/html_ref_standardattributes.asp\" title=\"HTML 标准属性\">HTML 属性</a></li>\n<li><a href=\"/tags/html_ref_eventattributes.asp\" title=\"HTML 事件属性\">HTML 事件</a></li>\n<li><a href=\"/tags/html_ref_dtd.asp\" title=\"HTML 元素与合法的 Doctype\">HTML 合法 DTD</a></li>\n<li><a href=\"/tags/html_ref_colornames.asp\" title=\"HTML 颜色名\">HTML 颜色名</a></li>\n<li><a href=\"/tags/html_ref_charactersets.asp\" title=\"HTML 字符集\">HTML 字符集</a></li>\n<li><a href=\"/tags/html_ref_ascii.asp\" title=\"HTML ASCII 参考手册\">HTML ASCII</a></li>\n<li><a href=\"/tags/html_ref_entities.html\" title=\"HTML ISO-8859-1 参考手册\">HTML ISO-8859-1</a></li>\n<li><a href=\"/tags/html_ref_symbols.html\" title=\"HTML 4.01 符号实体\">HTML 符号</a></li>\n<li><a href=\"/tags/html_ref_urlencode.html\" title=\"HTML URL 编码\">HTML URL 编码</a></li>\n<li><a href=\"/tags/html_ref_language_codes.asp\" title=\"HTML 语言代码参考手册\">HTML 语言代码</a></li>\n<li><a href=\"/tags/html_ref_httpmessages.asp\" title=\"HTML 状态消息\">HTML 消息</a></li>\n</ul>\n<h2>HTML5</h2>\n<ul>\n<li><a href=\"/html/index.asp\" title=\"HTML5 教程\">HTML5 教程</a></li>\n<li><a href=\"/tags/index.asp\" title=\"HTML5 参考手册\">HTML5 参考手册</a></li>\n</ul>\n</div><div id=\"selected\">\n<h2>建站手册</h2>\n<ul>\n<li><a href=\"/site/index.asp\" title=\"网站构建\">网站构建</a></li>\n<li><a href=\"/w3c/index.asp\" title=\"万维网联盟 (W3C)\">万维网联盟 (W3C)</a></li>\n<li><a href=\"/browsers/index.asp\" title=\"浏览器信息\">浏览器信息</a></li>\n<li><a href=\"/quality/index.asp\" title=\"网站品质\">网站品质</a></li>\n<li><a href=\"/semweb/index.asp\" title=\"语义网\">语义网</a></li>\n<li><a href=\"/careers/index.asp\" title=\"职业规划\">职业规划</a></li>\n<li><a href=\"/hosting/index.asp\" title=\"网站主机\">网站主机</a></li>\n</ul>\n\n<h2><a href=\"/about/index.asp\" title=\"关于 W3School\" id=\"link_about\">关于 W3School</a></h2>\n<h2><a href=\"/about/about_helping.asp\" title=\"帮助 W3School\" id=\"link_help\">帮助 W3School</a></h2>\n\n</div>\n\n</div>\n\n<div id=\"maincontent\">\n\n\n\n\n<div id=\"intro\">\n<p><strong>您可以通过 W3SCHOOL 的测验程序来测试您的 HTML 技能。</strong></p>\n</div>\n\n\n<div>\n<h2>关于本测验</h2>\n\n<p>本测验包含 20 道题，每道题的最长答题时间是 20 分钟（这是由于每个 session 的默认有效时间是20钟）。</p>\n\n<p>本测验是非官方的测试，它仅仅提供了一个了解您对 HTML 的掌握程度的工具。</p>\n</div>\n\n\n<div>\n<h2>测验会被记分</h2>\n\n<p>每道题的分值是 1 分。在您完成全部的 20 道题之后，系统会为您的测验打分，并提供您做错的题目的正确答案。其中，绿色为正确答案，而红色为错误答案。</p>\n\n<p><a href=\"/quiz/quiz.asp?quiz=html\">现在就开始测验</a>！祝您好运。</p>\n</div>\n\n\n<div id=\"bpn\">\n<ul class=\"prenext\">\n<li class=\"pre\"><a href=\"/example/html_examples.asp\" title=\"HTML 实例\">HTML 实例</a></li>\n<li class=\"next\"><a href=\"/html/html_summary.asp\" title=\"HTML 总结\">HTML 总结</a></li>\n</ul>\n</div>\n\n\n<div style=\"background-color:#fcfdf8; padding:0;\">\n<script async src=\"//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js\"></script>\n<!-- W3School 正文底部广告位 -->\n<ins class=\"adsbygoogle\"\n     style=\"display:inline-block;width:800px;height:250px\"\n     data-ad-client=\"ca-pub-3381531532877742\"\n     data-ad-slot=\"9384069314\"></ins>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n</div>\n\n</div>\n<!-- maincontent end -->\n\n<div id=\"sidebar\">\n\n<div id=\"tools\">\n<h5 id=\"tools_reference\"><a href=\"/tags/index.asp\">HTML 参考手册</a></h5>\n<h5 id=\"tools_example\"><a href=\"/example/html_examples.asp\">HTML 实例</a></h5>\n<h5 id=\"tools_quiz\"><a href=\"/html/html_quiz.asp\">HTML 测验</a></h5>\n</div>\n\n\n\n\n</div>\n<!-- wrapper end -->\n\n</body>\n\n</html>\n\n\n\n---\n\n\n\n### 链接\nMore info: [Deployment](https://hexo.io/docs/deployment.html)\n\n\n\n\n### 打飞机HTML+CSS+JS\n\n\n---\n<script id=\"jquery_172\" type=\"text/javascript\" class=\"library\" src=\"/js/sandbox/jquery/jquery-1.7.2.min.js\"></script>\n\n<style>\n\t\n\tbody{ margin:0; padding:0; background:#000; font-family:microsoft yahei;  }\n\t#box { width: 300px; height:500px; margin:10px auto; overflow:hidden; position:relative; border:15px solid #f0f0f0; }\n\t#box .title{ width:300px; height:40px; line-height:40px; position:absolute; left:0; top:80px; z-index:1; color:#fff; text-align:center; font-size:24px; }\n\t#box .difficulty{ width:300px; position:absolute; top:180px; z-index:1; font-family:microsoft yahei;}\n\t#box .difficulty a{ width:180px; height:30px; line-height:30px; text-align:center; display:block; margin:20px auto 0 auto; background:#f0f0f0; color:#333; text-decoration:none;}\n\t#box .difficulty a:hover{ background:#900; color:#fff;}\n\t#box .bg img{ display:block;}\n\t#box .warcraft{ width:60px; height:36px; position:absolute; left:120px;  top:500px; background:url('http://sandbox.runjs.cn/uploads/rs/130/es3n7cq9/warcraft.png') center no-repeat; z-index:3;}\n\t#box .bullet{ width:6px; height:22px; background:url('http://sandbox.runjs.cn/uploads/rs/130/es3n7cq9/bullet.png'); position:absolute; z-index:2}\n\t#box .enemy{ width:23px; height:30px; background:url('http://sandbox.runjs.cn/uploads/rs/130/es3n7cq9/enemy.png'); position:absolute; z-index:3}\n\t#box .score { width:220px; height:30px; line-height:30px; position:absolute; color:#fff; font-weight:bold; padding-left:5px; font-size:16px; z-index:5;}\n\t#box .tips{ width:240px; height: 200px; line-height:40px; padding:10px; position:absolute; left:20px; top:130px;  background:#f0f0f0;}\n\t#box .tips .type{ width:160px; padding: 2px 15px; height:30px; line-height:30px; text-align:center; color:red; font-weight:bold;}\n\t#box .tips p{ width:160px; height:40px; font-size:32px; line-height:40px; text-align:center; cursor:pointer;  background:#333; color:#fff; margin:20px auto 0 auto;}\n\t#box .tips .nn,#box .tips .tt{ padding:2px 10px; font-weight:bold;  color:blue;}\n\t#box .tips .tt{ display:block; text-align:center; font-size:24px;}\n</style>\n\n<div id=\"box\"></div>\n\n<script>\n\n$(function () {\n\tgame.startScreen.draw();\n})\n\n\nvar game = {\n\t\n\tstage : $(\"#box\"),\n\t\n\tmodetxt : \"\",\n\t\n\ttimer : {\n\t\tbg : null,\n\t\tbullet : null,\n\t\tenemy : null\n\t},\n\tmode : [\n\t\t[7,2500,500,1000,4000,200],\n\t\t[5,2000,300,3000,6000,300],\n\t\t[3,1500,50,4000,8000,400]\n\t], //参数配置\n\tnum : {\n\t\tcount : 0,\n\t\twarcraftX : 0,\n\t\twarcraftY : 0,\n\t\tscore : 0\n\t},\n\tstitle : function ( score ) {\n\t\tswitch ( game.modetxt ) {\n\t\t\tcase '纯屌丝模式' : \n\t\t\t\tif( score == 0 ) {\n\t\t\t\t\treturn '屌丝中的屌丝';\n\t\t\t\t}\n\t\t\t\telse if( score <= 20000 ) {\n\t\t\t\t\treturn '入门级屌丝'\n\t\t\t\t}\n\t\t\t\telse if( score <= 100000 && score > 20000 ) {\n\t\t\t\t\treturn '资深屌丝'\n\t\t\t\t}\n\t\t\t\telse if( score <= 500000 && score > 100000 ) {\n\t\t\t\t\treturn '知名屌丝'\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\treturn '全国十佳屌丝';\n\t\t\t\t}\n\t\t\tcase '高富帅模式' : \n\t\t\t\tif( score == 0 ) {\n\t\t\t\t\treturn '药不能停';\n\t\t\t\t}\n\t\t\t\telse if( score <= 20000 ) {\n\t\t\t\t\treturn '人艰不拆'\n\t\t\t\t}\n\t\t\t\telse if( score <= 100000 && score > 20000 ) {\n\t\t\t\t\treturn '夜用型高富帅'\n\t\t\t\t}\n\t\t\t\telse if( score <= 500000 && score > 100000 ) {\n\t\t\t\t\treturn '日夜两用'\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\treturn '打飞机战将';\n\t\t\t\t}\n\t\t\tcase '李少侠模式' : \n\t\t\t\tif( score == 0 ) {\n\t\t\t\t\treturn '坑爹坑娘';\n\t\t\t\t}\n\t\t\t\telse if( score <= 20000 ) {\n\t\t\t\t\treturn '我很无辜'\n\t\t\t\t}\n\t\t\t\telse if( score <= 100000 && score > 20000 ) {\n\t\t\t\t\treturn '小伙伴惊呆了'\n\t\t\t\t}\n\t\t\t\telse if( score <= 500000 && score > 100000 ) {\n\t\t\t\t\treturn '我是受害者'\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\treturn '嫖客';\n\t\t\t\t}\n\t\t}\n\t},\n\tstartScreen : {\n\t\tdraw : function () {\n\t\t\tvar title = $(\"<div>\");\n\t\t\t\ttitle.addClass(\"title\");\n\t\t\t\ttitle.html(\"打飞机 1.0 Javascript版\");\n\t\t\t\tgame.stage.append(title);\n\t\t\t\n\t\t\tvar difficulty = $(\"<div>\");\n\t\t\t\tdifficulty.addClass(\"difficulty\");\n\t\t\t\tdifficulty.html(\"<a href='javascript:void(0)'>纯屌丝模式</a><a href='javascript:void(0)'>高富帅模式</a><a href='javascript:void(0)'>李少侠模式</a>\");\n\t\t\t\tgame.stage.append(difficulty);\n\t\t\tgame.stage.find($(\".difficulty\")).delegate(\"a\",\"click\", function ( e ) {\n\t\t\t\tgame.stage.start = true ;\n\t\t\t\tgame.startScreen.remove();\n\t\t\t\t$(document).mousemove( function ( e ) {\n\t\t\t\t\tif( game.num.count % 2 == 0 && game.stage.start)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar e = e || event;\n\t\t\t\t\t\tvar x = e.clientX - game.stage.offset().left - 10;\n\t\t\t\t\t\tvar y = e.clientY - game.stage.offset().top - 10;\n\t\t\t\t\t\tgame.core.warcraft([x,y]);\n\t\t\t\t\t}\n\t\t\t\t\tgame.num.count++;\n\t\t\t\t})\n\t\t\t\tvar set = game.mode[$(this).index()];\n\t\t\t\tgame.modetxt = $(this).html();\n\t\t\t\tgame.core.draw(set[0]);\n\t\t\t\tgame.timer.bullet = setInterval ( function () {\n\t\t\t\t\tgame.core.bullet(set[1],[game.num.warcraftX,game.num.warcraftY]);\n\t\t\t\t},set[2]);\n\t\t\t\tgame.timer.enemy =setInterval ( function () {\n\t\t\t\t\tgame.core.enemy({\n\t\t\t\t\t\tspeed : game.randomNum(set[3],set[4]),\n\t\t\t\t\t\tleft : game.randomNum(0,277),\n\t\t\t\t\t\ttop : -game.randomNum(30,80)\n\t\t\t\t\t});\n\t\t\t\t},set[5])\n\t\t\t\n\t\t\t});\n\t\t}, //绘制开始界面\n\t\tremove : function () {\n\t\t\tvar removeDiv = game.stage.children($(\"div\"));\n\t\t\tremoveDiv.stop().animate({opacity:0},100);\n\t\t\tsetTimeout( function () {\n\t\t\t\tremoveDiv.remove();\n\t\t\t},300)\n\t\t}\n\t}, //开始场景\n\tcore : {\n\t\tdraw : function ( speed ) {\n\t\t\tvar warcraft = $(\"<div>\");\n\t\t\t\twarcraft.addClass(\"warcraft\");\n\t\t\tgame.stage.append(warcraft);\n\t\t\tvar score = $(\"<div>\");\n\t\t\t\tscore.addClass(\"score\");\n\t\t\t\tscore.html(\"0\");\n\t\t\tgame.stage.append(score);\n\t\t}, //绘制游戏场景\n\t\twarcraft : function ( pos ) { \n\t\t\tvar warcraft = game.stage.find($(\".warcraft\")),\n\t\t\t\tleft =  pos[0] -warcraft.width()/2 - 3,\n\t\t\t\ttop =  pos[1] - warcraft.height()/2 - 6;\n\t\t\t\n\t\t\tif( left <= -warcraft.width()/2 ) {\n\t\t\t\tleft = -warcraft.width()/2;\n\t\t\t}\n\t\t\telse if( left >= game.stage.width() - warcraft.width()/2) {\n\t\t\t\tleft = game.stage.width() - warcraft.width()/2;\n\t\t\t}\n\t\t\tif( top <= 0) {\n\t\t\t\ttop = 0;\n\t\t\t}\n\t\t\telse if ( top >= game.stage.height() - warcraft.height()) {\n\t\t\t\ttop = game.stage.height() - warcraft.height();\n\t\t\t}\n\t\t\twarcraft.css({left:left,top:top});\n\t\t\tgame.num.warcraftX = left + warcraft.width()/2;\n\t\t\tgame.num.warcraftY = top + warcraft.height()/2;\n\t\t}, //战斗机位置\n\t\tbullet : function ( speed ,pos ) {\n\t\t\tvar bullet = $(\"<div>\");\n\t\t\t\tbullet.addClass(\"bullet\");\n\t\t\tgame.stage.append(bullet);\n\t\t\tbullet.css({\n\t\t\t\t\tleft : pos[0] - bullet.width()/2,\n\t\t\t\t\ttop : pos[1] - bullet.height()/2\n\t\t\t\t});\n\t\t\tbullet.stop().animate({top:-bullet.height()},speed,function () { bullet.remove();})\n\t\t}, //子弹开始发射\n\t\tenemy : function ( argument ) {\n\t\t\tvar speed = argument.speed;\n\t\t\tvar left = argument.left;\n\t\t\tvar top = argument.top;\n\t\t\tvar oEnemy  = $(\"<div>\");\n\t\t\t\toEnemy.addClass(\"enemy\");\n\t\t\t\toEnemy.css({\n\t\t\t\t\tleft : left,\n\t\t\t\t\ttop : top\n\t\t\t\t});\n\t\t\toEnemy.appendTo(game.stage);\n\t\t\toEnemy.stop().animate( { top:530 }, speed , function () { oEnemy.remove(); clearInterval(oEnemy.timer)});\n\t\t\toEnemy.timer = setInterval ( function () {\n\t\t\t\tvar x = parseInt(oEnemy.css(\"left\")) + 12,\n\t\t\t\t\ty = parseInt(oEnemy.css(\"top\")) + 15,\n\t\t\t\t\tl = $(\".bullet\").length;\n\t\t\t\tfor( var i = 0 ; i< l; i++ )\n\t\t\t\t{\n\t\t\t\t\tvar bx = Math.abs( x - parseInt($(\".bullet\").eq(i).css(\"left\"))),\n\t\t\t\t\t\tby = Math.abs( y - parseInt($(\".bullet\").eq(i).css(\"top\")));\n\t\t\t\t\tif( bx <= 14 &&  by <= 20 )\n\t\t\t\t\t{\n\t\t\t\t\t\toEnemy.css(\"background\",\"url('http://sandbox.runjs.cn/uploads/rs/130/es3n7cq9/boom.png')\");\n\t\t\t\t\t\t$(\".bullet\").eq(i).remove();\n\t\t\t\t\t\tclearInterval(oEnemy.timer);\n\t\t\t\t\t\tgame.num.score++;\n\t\t\t\t\t\tgame.stage.find($(\".score\")).html(game.num.score*1000);\n\t\t\t\t\t\tsetTimeout( function () { oEnemy.remove(); },300)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tvar bx2 = Math.abs( x - parseInt($(\".warcraft\").css(\"left\")) - 30),\n\t\t\t\t\tby2 = Math.abs( y - parseInt($(\".warcraft\").css(\"top\")) - 18);\n\t\t\t\tif( bx2 <= 40 &&  by2 <= 33 )\n\t\t\t\t{\n\t\t\t\t\tvar tips = $(\"<div>\");\n\t\t\t\t\t\ttips.addClass(\"tips\");\n\t\t\t\t\t\ttips.html(\"您在<span class='type'>\" + game.modetxt.substring(0,3) + \"杯</span>全国花式打飞机大赛上，以<span class='nn'>\"+$(\".score\").html() + \"</span>分荣获称谓<span class='tt'>\"+game.stitle($(\".score\").html())+\"</span><p>再打一次</p>\");\n\t\t\t\t\t\tgame.stage.delegate(\".tips p\",'click',function(){\n\t\t\t\t\t\t\tgame.num.score = 0;\n\t\t\t\t\t\t\tgame.startScreen.remove();\n\t\t\t\t\t\t\tgame.startScreen.draw();\n\t\t\t\t\t\t})\n\t\t\t\t\toEnemy.remove();\n\t\t\t\t\t$(\".score\").css(\"display\",\"none\");\n\t\t\t\t\t$(\".warcraft\").css(\"background\",\"url('http://sandbox.runjs.cn/uploads/rs/130/es3n7cq9/boom2.png')\");\n\t\t\t\t\tclearInterval(oEnemy.timer);\n\t\t\t\t\tsetTimeout( function () { $(\".warcraft\").remove(); },300)\n\t\t\t\t\tclearInterval(game.timer.bullet);\n\t\t\t\t\tclearInterval(game.timer.enemy);\n\t\t\t\t\tclearInterval(game.timer.bg);\n\t\t\t\t\tsetTimeout( function () {\n\t\t\t\t\t\tgame.stage.append(tips);\n\t\t\t\t\t},3000)\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t},50)\n\t\t} //敌机\n\n\t}, //核心代码\n\trandomNum : function (a,b){\n\t\tvar value = Math.abs(a-b) , num ;\n\t\tnum = parseInt(Math.random()*(value)) + Math.min(a,b);\n\t\treturn num;\n\t} //产生指定区域整形随机数。\n};\n\n\t\n</script>\n\n\n---","slug":"文章样式HTML","published":1,"updated":"2025-03-26T06:43:53.004Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cm8pr0j2h001sgskzdo5q5hzx","content":"<h1 id=\"标题一\"><a href=\"#标题一\" class=\"headerlink\" title=\"标题一\"></a>标题一</h1><h2 id=\"标题二\"><a href=\"#标题二\" class=\"headerlink\" title=\"标题二\"></a>标题二</h2><h3 id=\"标题三\"><a href=\"#标题三\" class=\"headerlink\" title=\"标题三\"></a>标题三</h3><p>小车正穿行在洛基山脉蜿蜒曲折的盘山公路上，克里朵托夫里维静静地看着窗外，发现车子每当行驶到无路的关头，路边都会出现一块交通指示牌：“前方转弯”或写着“注意急转弯”。而转过每一道弯道之后前方照例又是一片柳暗花明、豁然开朗。山路弯弯、峰回路转，“前方转弯”几个大字一次次冲击着他的眼球，也渐渐敲醒了他的心扉。原来不是路已到了尽头，而是该转弯了……路在脚下，更在心中，心随路转，心路常宽。学会转弯也是人生的智慧，因为挫折往往是转折，危机同时是转机。</p>\n<h3 id=\"代码样式\"><a href=\"#代码样式\" class=\"headerlink\" title=\"代码样式\"></a>代码样式</h3><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><h3 id=\"Bash\"><a href=\"#Bash\" class=\"headerlink\" title=\"Bash\"></a>Bash</h3><p>More info: <a href=\"https://hexo.io/docs/server.html\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><h3 id=\"html\"><a href=\"#html\" class=\"headerlink\" title=\"html\"></a>html</h3><hr>\n<!DOCTYPE html>\n<html lang=\"zh-cn\">\n<head>\n\n<!-- Global site tag (gtag.js) - Google Analytics -->\n<script async src=\"https://www.googletagmanager.com/gtag/js?id=UA-878633-1\"></script>\n<script>\n  window.dataLayer = window.dataLayer || [];\n  function gtag(){dataLayer.push(arguments);}\n  gtag('js', new Date());\n\n  gtag('config', 'UA-878633-1');\n</script>\n\n<meta charset=\"gbk\" />\n<meta name=\"robots\" content=\"all\" />\n<meta name=\"author\" content=\"w3school.com.cn\" />\n<link rel=\"stylesheet\" type=\"text/css\" href=\"/c5_20171220.css\" />\n<link rel=icon type=\"image/png\" sizes=\"16x16\" href=\"/ui2017/logo-16.png\">\n<link rel=icon type=\"image/png\" sizes=\"32x32\" href=\"/ui2017/logo-32.png\">\n<link rel=icon type=\"image/png\" sizes=\"48x48\" href=\"/ui2017/logo-48.png\">\n<link rel=icon type=\"image/png\" sizes=\"96x96\" href=\"/ui2017/logo-96.png\">\n<link rel=\"apple-touch-icon-precomposed\" sizes=\"96x96\" href=\"/ui2017/logo-96.png\">\n<link rel=\"apple-touch-icon-precomposed\" sizes=\"144x144\" href=\"/ui2017/logo-144.png\">\n\n\n<title>HTML 测验</title>\n\n</head>\n\n<body class=\"html\">\n\n<div id=\"wrapper\">\n\n<div id=\"header\">\n<a href=\"/index.html\" title=\"w3school 在线教程\" style=\"float:left;\">w3school 在线教程</a>\n<div id=\"ad_head\">\n<script type=\"text/javascript\"><!--\ngoogle_ad_client = \"pub-3381531532877742\";\n/* 728x90, 创建于 08-12-1 */\ngoogle_ad_slot = \"7423315034\";\ngoogle_ad_width = 728;\ngoogle_ad_height = 90;\n//-->\n</script>\n<script type=\"text/javascript\"\nsrc=\"http://pagead2.googlesyndication.com/pagead/show_ads.js\">\n</script>\n</div>\n</div>\n\n<div id=\"navfirst\">\n<ul id=\"menu\">\n<li id=\"h\"><a href=\"/h.asp\" title=\"HTML 系列教程\">HTML 系列教程</a></li>\n<li id=\"b\"><a href=\"/b.asp\" title=\"浏览器脚本教程\">浏览器脚本</a></li>\n<li id=\"s\"><a href=\"/s.asp\" title=\"服务器脚本教程\">服务器脚本</a></li>\n<li id=\"d\"><a href=\"/d.asp\" title=\"ASP.NET 教程\">ASP.NET 教程</a></li>\n<li id=\"x\"><a href=\"/x.asp\" title=\"XML 系列教程\">XML 系列教程</a></li>\n<li id=\"ws\"><a href=\"/ws.asp\" title=\"Web Services 系列教程\">Web Services 系列教程</a></li>\n<li id=\"w\"><a href=\"/w.asp\" title=\"建站手册\">建站手册</a></li>\n</ul>\n</div>\n\n<div id=\"navsecond\">\n\n<div id=\"course\"><h2>HTML 基础教程</h2>\n<ul>\n<li><a href=\"/html/index.asp\" title=\"HTML 教程\">HTML 教程</a></li>\n<li><a href=\"/html/html_jianjie.asp\" title=\"HTML 简介\">HTML 简介</a></li>\n<li><a href=\"/html/html_editors.asp\" title=\"HTML 编辑器\">HTML 编辑器</a></li>\n<li><a href=\"/html/html_basic.asp\" title=\"HTML 基础 - 四个实例\">HTML 基础</a></li>\n<li><a href=\"/html/html_elements.asp\" title=\"HTML 元素\">HTML 元素</a></li>\n<li><a href=\"/html/html_attributes.asp\" title=\"HTML 属性\">HTML 属性</a></li>\n<li><a href=\"/html/html_headings.asp\" title=\"HTML 标题\">HTML 标题</a></li>\n<li><a href=\"/html/html_paragraphs.asp\" title=\"HTML 段落\">HTML 段落</a></li>\n<li><a href=\"/html/html_styles.asp\" title=\"HTML 样式 - CSS\">HTML 样式</a></li>\n<li><a href=\"/html/html_formatting.asp\" title=\"HTML 文本格式化\">HTML 格式化</a></li>\n\n</ul>\n<h2>HTML XHTML</h2>\n<ul>\n<li><a href=\"/html/html_xhtml.asp\" title=\"XHTML 简介\">XHTML 简介</a></li>\n<li><a href=\"/html/html_xhtml_elements.asp\" title=\"XHTML - 元素\">XHTML 元素</a></li>\n<li><a href=\"/html/html_xhtml_attributes.asp\" title=\"XHTML - 属性\">XHTML 属性</a></li>\n</ul>\n\n<ul>\n<li><a href=\"/html/html5_canvas.asp\" title=\"HTML5 Canvas\">HTML5 画布</a></li>\n<li><a href=\"/html/html5_svg.asp\" title=\"HTML5 内联 SVG\">HTML5 SVG</a></li>\n<li><a href=\"/html/html5_canvas_vs_svg.asp\" title=\"HTML5 Canvas vs. SVG\">HTML5 画布 vs SVG</a></li>\n</ul>\n<h2>HTML 媒体</h2>\n<ul>\n<li><a href=\"/html/html_media.asp\" title=\"HTML 多媒体\">HTML 媒体</a></li>\n<li><a href=\"/html/html_object.asp\" title=\"HTML Object 元素\">HTML 对象</a></li>\n<li><a href=\"/html/html_audio.asp\" title=\"HTML 音频\">HTML 音频</a></li>\n<li><a href=\"/html/html_video.asp\" title=\"HTML 视频\">HTML 视频</a></li>\n</ul>\n<h2>HTML API</h2>\n<ul>\n<li><a href=\"/html/html5_geolocation.asp\" title=\"HTML5 地理定位\">HTML5 地理定位</a></li>\n<li><a href=\"/html/html5_draganddrop.asp\" title=\"HTML5 拖放\">HTML5 拖放</a></li>\n<li><a href=\"/html/html5_webstorage.asp\" title=\"HTML5 Web 存储\">HTML5 Web 存储</a></li>\n<li><a href=\"/html/html5_app_cache.asp\" title=\"HTML 5 应用程序缓存\">HTML5 应用缓存</a></li>\n<li><a href=\"/html/html5_webworkers.asp\" title=\"HTML5 Web Workers\">HTML5 Web Workers</a></li>\n<li><a href=\"/html/html5_serversentevents.asp\" title=\"HTML5 服务器发送事件\">HTML5 SSE</a></li>\n</ul>\n<h2>实例/测验/总结</h2>\n<ul>\n<li><a href=\"/example/html_examples.asp\" title=\"HTML 实例\">HTML 实例</a></li>\n<li class=\"currentLink\"><a href=\"/html/html_quiz.asp\" title=\"HTML 测验\">HTML 测验</a></li>\n<li><a href=\"/html/html_summary.asp\" title=\"HTML 总结\">HTML 总结</a></li>\n</ul>\n<h2>HTML 参考手册</h2>\n<ul>\n<li><a href=\"/tags/index.asp\" title=\"HTML 4.01 / XHTML 1.0 参考手册\">HTML 标签列表</a></li>\n<li><a href=\"/tags/html_ref_standardattributes.asp\" title=\"HTML 标准属性\">HTML 属性</a></li>\n<li><a href=\"/tags/html_ref_eventattributes.asp\" title=\"HTML 事件属性\">HTML 事件</a></li>\n<li><a href=\"/tags/html_ref_dtd.asp\" title=\"HTML 元素与合法的 Doctype\">HTML 合法 DTD</a></li>\n<li><a href=\"/tags/html_ref_colornames.asp\" title=\"HTML 颜色名\">HTML 颜色名</a></li>\n<li><a href=\"/tags/html_ref_charactersets.asp\" title=\"HTML 字符集\">HTML 字符集</a></li>\n<li><a href=\"/tags/html_ref_ascii.asp\" title=\"HTML ASCII 参考手册\">HTML ASCII</a></li>\n<li><a href=\"/tags/html_ref_entities.html\" title=\"HTML ISO-8859-1 参考手册\">HTML ISO-8859-1</a></li>\n<li><a href=\"/tags/html_ref_symbols.html\" title=\"HTML 4.01 符号实体\">HTML 符号</a></li>\n<li><a href=\"/tags/html_ref_urlencode.html\" title=\"HTML URL 编码\">HTML URL 编码</a></li>\n<li><a href=\"/tags/html_ref_language_codes.asp\" title=\"HTML 语言代码参考手册\">HTML 语言代码</a></li>\n<li><a href=\"/tags/html_ref_httpmessages.asp\" title=\"HTML 状态消息\">HTML 消息</a></li>\n</ul>\n<h2>HTML5</h2>\n<ul>\n<li><a href=\"/html/index.asp\" title=\"HTML5 教程\">HTML5 教程</a></li>\n<li><a href=\"/tags/index.asp\" title=\"HTML5 参考手册\">HTML5 参考手册</a></li>\n</ul>\n</div><div id=\"selected\">\n<h2>建站手册</h2>\n<ul>\n<li><a href=\"/site/index.asp\" title=\"网站构建\">网站构建</a></li>\n<li><a href=\"/w3c/index.asp\" title=\"万维网联盟 (W3C)\">万维网联盟 (W3C)</a></li>\n<li><a href=\"/browsers/index.asp\" title=\"浏览器信息\">浏览器信息</a></li>\n<li><a href=\"/quality/index.asp\" title=\"网站品质\">网站品质</a></li>\n<li><a href=\"/semweb/index.asp\" title=\"语义网\">语义网</a></li>\n<li><a href=\"/careers/index.asp\" title=\"职业规划\">职业规划</a></li>\n<li><a href=\"/hosting/index.asp\" title=\"网站主机\">网站主机</a></li>\n</ul>\n\n<h2><a href=\"/about/index.asp\" title=\"关于 W3School\" id=\"link_about\">关于 W3School</a></h2>\n<h2><a href=\"/about/about_helping.asp\" title=\"帮助 W3School\" id=\"link_help\">帮助 W3School</a></h2>\n\n</div>\n\n</div>\n\n<div id=\"maincontent\">\n\n\n\n\n<div id=\"intro\">\n<p><strong>您可以通过 W3SCHOOL 的测验程序来测试您的 HTML 技能。</strong></p>\n</div>\n\n\n<div>\n<h2>关于本测验</h2>\n\n<p>本测验包含 20 道题，每道题的最长答题时间是 20 分钟（这是由于每个 session 的默认有效时间是20钟）。</p>\n\n<p>本测验是非官方的测试，它仅仅提供了一个了解您对 HTML 的掌握程度的工具。</p>\n</div>\n\n\n<div>\n<h2>测验会被记分</h2>\n\n<p>每道题的分值是 1 分。在您完成全部的 20 道题之后，系统会为您的测验打分，并提供您做错的题目的正确答案。其中，绿色为正确答案，而红色为错误答案。</p>\n\n<p><a href=\"/quiz/quiz.asp?quiz=html\">现在就开始测验</a>！祝您好运。</p>\n</div>\n\n\n<div id=\"bpn\">\n<ul class=\"prenext\">\n<li class=\"pre\"><a href=\"/example/html_examples.asp\" title=\"HTML 实例\">HTML 实例</a></li>\n<li class=\"next\"><a href=\"/html/html_summary.asp\" title=\"HTML 总结\">HTML 总结</a></li>\n</ul>\n</div>\n\n\n<div style=\"background-color:#fcfdf8; padding:0;\">\n<script async src=\"//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js\"></script>\n<!-- W3School 正文底部广告位 -->\n<ins class=\"adsbygoogle\"\n     style=\"display:inline-block;width:800px;height:250px\"\n     data-ad-client=\"ca-pub-3381531532877742\"\n     data-ad-slot=\"9384069314\"></ins>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n</div>\n\n</div>\n<!-- maincontent end -->\n\n<div id=\"sidebar\">\n\n<div id=\"tools\">\n<h5 id=\"tools_reference\"><a href=\"/tags/index.asp\">HTML 参考手册</a></h5>\n<h5 id=\"tools_example\"><a href=\"/example/html_examples.asp\">HTML 实例</a></h5>\n<h5 id=\"tools_quiz\"><a href=\"/html/html_quiz.asp\">HTML 测验</a></h5>\n</div>\n\n\n\n\n</div>\n<!-- wrapper end -->\n\n</body>\n\n</html>\n\n\n\n<hr>\n<h3 id=\"链接\"><a href=\"#链接\" class=\"headerlink\" title=\"链接\"></a>链接</h3><p>More info: <a href=\"https://hexo.io/docs/deployment.html\">Deployment</a></p>\n<h3 id=\"打飞机HTML-CSS-JS\"><a href=\"#打飞机HTML-CSS-JS\" class=\"headerlink\" title=\"打飞机HTML+CSS+JS\"></a>打飞机HTML+CSS+JS</h3><hr>\n<script id=\"jquery_172\" type=\"text/javascript\" class=\"library\" src=\"/js/sandbox/jquery/jquery-1.7.2.min.js\"></script>\n\n<style>\n    \n    body{ margin:0; padding:0; background:#000; font-family:microsoft yahei;  }\n    #box { width: 300px; height:500px; margin:10px auto; overflow:hidden; position:relative; border:15px solid #f0f0f0; }\n    #box .title{ width:300px; height:40px; line-height:40px; position:absolute; left:0; top:80px; z-index:1; color:#fff; text-align:center; font-size:24px; }\n    #box .difficulty{ width:300px; position:absolute; top:180px; z-index:1; font-family:microsoft yahei;}\n    #box .difficulty a{ width:180px; height:30px; line-height:30px; text-align:center; display:block; margin:20px auto 0 auto; background:#f0f0f0; color:#333; text-decoration:none;}\n    #box .difficulty a:hover{ background:#900; color:#fff;}\n    #box .bg img{ display:block;}\n    #box .warcraft{ width:60px; height:36px; position:absolute; left:120px;  top:500px; background:url('http://sandbox.runjs.cn/uploads/rs/130/es3n7cq9/warcraft.png') center no-repeat; z-index:3;}\n    #box .bullet{ width:6px; height:22px; background:url('http://sandbox.runjs.cn/uploads/rs/130/es3n7cq9/bullet.png'); position:absolute; z-index:2}\n    #box .enemy{ width:23px; height:30px; background:url('http://sandbox.runjs.cn/uploads/rs/130/es3n7cq9/enemy.png'); position:absolute; z-index:3}\n    #box .score { width:220px; height:30px; line-height:30px; position:absolute; color:#fff; font-weight:bold; padding-left:5px; font-size:16px; z-index:5;}\n    #box .tips{ width:240px; height: 200px; line-height:40px; padding:10px; position:absolute; left:20px; top:130px;  background:#f0f0f0;}\n    #box .tips .type{ width:160px; padding: 2px 15px; height:30px; line-height:30px; text-align:center; color:red; font-weight:bold;}\n    #box .tips p{ width:160px; height:40px; font-size:32px; line-height:40px; text-align:center; cursor:pointer;  background:#333; color:#fff; margin:20px auto 0 auto;}\n    #box .tips .nn,#box .tips .tt{ padding:2px 10px; font-weight:bold;  color:blue;}\n    #box .tips .tt{ display:block; text-align:center; font-size:24px;}\n</style>\n\n<div id=\"box\"></div>\n\n<script>\n\n$(function () {\n    game.startScreen.draw();\n})\n\n\nvar game = {\n    \n    stage : $(\"#box\"),\n    \n    modetxt : \"\",\n    \n    timer : {\n        bg : null,\n        bullet : null,\n        enemy : null\n    },\n    mode : [\n        [7,2500,500,1000,4000,200],\n        [5,2000,300,3000,6000,300],\n        [3,1500,50,4000,8000,400]\n    ], //参数配置\n    num : {\n        count : 0,\n        warcraftX : 0,\n        warcraftY : 0,\n        score : 0\n    },\n    stitle : function ( score ) {\n        switch ( game.modetxt ) {\n            case '纯屌丝模式' : \n                if( score == 0 ) {\n                    return '屌丝中的屌丝';\n                }\n                else if( score <= 20000 ) {\n                    return '入门级屌丝'\n                }\n                else if( score <= 100000 && score > 20000 ) {\n                    return '资深屌丝'\n                }\n                else if( score <= 500000 && score > 100000 ) {\n                    return '知名屌丝'\n                }\n                else {\n                    return '全国十佳屌丝';\n                }\n            case '高富帅模式' : \n                if( score == 0 ) {\n                    return '药不能停';\n                }\n                else if( score <= 20000 ) {\n                    return '人艰不拆'\n                }\n                else if( score <= 100000 && score > 20000 ) {\n                    return '夜用型高富帅'\n                }\n                else if( score <= 500000 && score > 100000 ) {\n                    return '日夜两用'\n                }\n                else {\n                    return '打飞机战将';\n                }\n            case '李少侠模式' : \n                if( score == 0 ) {\n                    return '坑爹坑娘';\n                }\n                else if( score <= 20000 ) {\n                    return '我很无辜'\n                }\n                else if( score <= 100000 && score > 20000 ) {\n                    return '小伙伴惊呆了'\n                }\n                else if( score <= 500000 && score > 100000 ) {\n                    return '我是受害者'\n                }\n                else {\n                    return '嫖客';\n                }\n        }\n    },\n    startScreen : {\n        draw : function () {\n            var title = $(\"<div>\");\n                title.addClass(\"title\");\n                title.html(\"打飞机 1.0 Javascript版\");\n                game.stage.append(title);\n            \n            var difficulty = $(\"<div>\");\n                difficulty.addClass(\"difficulty\");\n                difficulty.html(\"<a href='javascript:void(0)'>纯屌丝模式</a><a href='javascript:void(0)'>高富帅模式</a><a href='javascript:void(0)'>李少侠模式</a>\");\n                game.stage.append(difficulty);\n            game.stage.find($(\".difficulty\")).delegate(\"a\",\"click\", function ( e ) {\n                game.stage.start = true ;\n                game.startScreen.remove();\n                $(document).mousemove( function ( e ) {\n                    if( game.num.count % 2 == 0 && game.stage.start)\n                    {\n                        var e = e || event;\n                        var x = e.clientX - game.stage.offset().left - 10;\n                        var y = e.clientY - game.stage.offset().top - 10;\n                        game.core.warcraft([x,y]);\n                    }\n                    game.num.count++;\n                })\n                var set = game.mode[$(this).index()];\n                game.modetxt = $(this).html();\n                game.core.draw(set[0]);\n                game.timer.bullet = setInterval ( function () {\n                    game.core.bullet(set[1],[game.num.warcraftX,game.num.warcraftY]);\n                },set[2]);\n                game.timer.enemy =setInterval ( function () {\n                    game.core.enemy({\n                        speed : game.randomNum(set[3],set[4]),\n                        left : game.randomNum(0,277),\n                        top : -game.randomNum(30,80)\n                    });\n                },set[5])\n            \n            });\n        }, //绘制开始界面\n        remove : function () {\n            var removeDiv = game.stage.children($(\"div\"));\n            removeDiv.stop().animate({opacity:0},100);\n            setTimeout( function () {\n                removeDiv.remove();\n            },300)\n        }\n    }, //开始场景\n    core : {\n        draw : function ( speed ) {\n            var warcraft = $(\"<div>\");\n                warcraft.addClass(\"warcraft\");\n            game.stage.append(warcraft);\n            var score = $(\"<div>\");\n                score.addClass(\"score\");\n                score.html(\"0\");\n            game.stage.append(score);\n        }, //绘制游戏场景\n        warcraft : function ( pos ) { \n            var warcraft = game.stage.find($(\".warcraft\")),\n                left =  pos[0] -warcraft.width()/2 - 3,\n                top =  pos[1] - warcraft.height()/2 - 6;\n            \n            if( left <= -warcraft.width()/2 ) {\n                left = -warcraft.width()/2;\n            }\n            else if( left >= game.stage.width() - warcraft.width()/2) {\n                left = game.stage.width() - warcraft.width()/2;\n            }\n            if( top <= 0) {\n                top = 0;\n            }\n            else if ( top >= game.stage.height() - warcraft.height()) {\n                top = game.stage.height() - warcraft.height();\n            }\n            warcraft.css({left:left,top:top});\n            game.num.warcraftX = left + warcraft.width()/2;\n            game.num.warcraftY = top + warcraft.height()/2;\n        }, //战斗机位置\n        bullet : function ( speed ,pos ) {\n            var bullet = $(\"<div>\");\n                bullet.addClass(\"bullet\");\n            game.stage.append(bullet);\n            bullet.css({\n                    left : pos[0] - bullet.width()/2,\n                    top : pos[1] - bullet.height()/2\n                });\n            bullet.stop().animate({top:-bullet.height()},speed,function () { bullet.remove();})\n        }, //子弹开始发射\n        enemy : function ( argument ) {\n            var speed = argument.speed;\n            var left = argument.left;\n            var top = argument.top;\n            var oEnemy  = $(\"<div>\");\n                oEnemy.addClass(\"enemy\");\n                oEnemy.css({\n                    left : left,\n                    top : top\n                });\n            oEnemy.appendTo(game.stage);\n            oEnemy.stop().animate( { top:530 }, speed , function () { oEnemy.remove(); clearInterval(oEnemy.timer)});\n            oEnemy.timer = setInterval ( function () {\n                var x = parseInt(oEnemy.css(\"left\")) + 12,\n                    y = parseInt(oEnemy.css(\"top\")) + 15,\n                    l = $(\".bullet\").length;\n                for( var i = 0 ; i< l; i++ )\n                {\n                    var bx = Math.abs( x - parseInt($(\".bullet\").eq(i).css(\"left\"))),\n                        by = Math.abs( y - parseInt($(\".bullet\").eq(i).css(\"top\")));\n                    if( bx <= 14 &&  by <= 20 )\n                    {\n                        oEnemy.css(\"background\",\"url('http://sandbox.runjs.cn/uploads/rs/130/es3n7cq9/boom.png')\");\n                        $(\".bullet\").eq(i).remove();\n                        clearInterval(oEnemy.timer);\n                        game.num.score++;\n                        game.stage.find($(\".score\")).html(game.num.score*1000);\n                        setTimeout( function () { oEnemy.remove(); },300)\n                    }\n                }\n                var bx2 = Math.abs( x - parseInt($(\".warcraft\").css(\"left\")) - 30),\n                    by2 = Math.abs( y - parseInt($(\".warcraft\").css(\"top\")) - 18);\n                if( bx2 <= 40 &&  by2 <= 33 )\n                {\n                    var tips = $(\"<div>\");\n                        tips.addClass(\"tips\");\n                        tips.html(\"您在<span class='type'>\" + game.modetxt.substring(0,3) + \"杯</span>全国花式打飞机大赛上，以<span class='nn'>\"+$(\".score\").html() + \"</span>分荣获称谓<span class='tt'>\"+game.stitle($(\".score\").html())+\"</span><p>再打一次</p>\");\n                        game.stage.delegate(\".tips p\",'click',function(){\n                            game.num.score = 0;\n                            game.startScreen.remove();\n                            game.startScreen.draw();\n                        })\n                    oEnemy.remove();\n                    $(\".score\").css(\"display\",\"none\");\n                    $(\".warcraft\").css(\"background\",\"url('http://sandbox.runjs.cn/uploads/rs/130/es3n7cq9/boom2.png')\");\n                    clearInterval(oEnemy.timer);\n                    setTimeout( function () { $(\".warcraft\").remove(); },300)\n                    clearInterval(game.timer.bullet);\n                    clearInterval(game.timer.enemy);\n                    clearInterval(game.timer.bg);\n                    setTimeout( function () {\n                        game.stage.append(tips);\n                    },3000)\n                    \n                }\n            },50)\n        } //敌机\n\n    }, //核心代码\n    randomNum : function (a,b){\n        var value = Math.abs(a-b) , num ;\n        num = parseInt(Math.random()*(value)) + Math.min(a,b);\n        return num;\n    } //产生指定区域整形随机数。\n};\n\n    \n</script>\n\n\n<hr>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"标题一\"><a href=\"#标题一\" class=\"headerlink\" title=\"标题一\"></a>标题一</h1><h2 id=\"标题二\"><a href=\"#标题二\" class=\"headerlink\" title=\"标题二\"></a>标题二</h2><h3 id=\"标题三\"><a href=\"#标题三\" class=\"headerlink\" title=\"标题三\"></a>标题三</h3><p>小车正穿行在洛基山脉蜿蜒曲折的盘山公路上，克里朵托夫里维静静地看着窗外，发现车子每当行驶到无路的关头，路边都会出现一块交通指示牌：“前方转弯”或写着“注意急转弯”。而转过每一道弯道之后前方照例又是一片柳暗花明、豁然开朗。山路弯弯、峰回路转，“前方转弯”几个大字一次次冲击着他的眼球，也渐渐敲醒了他的心扉。原来不是路已到了尽头，而是该转弯了……路在脚下，更在心中，心随路转，心路常宽。学会转弯也是人生的智慧，因为挫折往往是转折，危机同时是转机。</p>\n<h3 id=\"代码样式\"><a href=\"#代码样式\" class=\"headerlink\" title=\"代码样式\"></a>代码样式</h3><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><h3 id=\"Bash\"><a href=\"#Bash\" class=\"headerlink\" title=\"Bash\"></a>Bash</h3><p>More info: <a href=\"https://hexo.io/docs/server.html\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><h3 id=\"html\"><a href=\"#html\" class=\"headerlink\" title=\"html\"></a>html</h3><hr>\n<!DOCTYPE html>\n<html lang=\"zh-cn\">\n<head>\n\n<!-- Global site tag (gtag.js) - Google Analytics -->\n<script async src=\"https://www.googletagmanager.com/gtag/js?id=UA-878633-1\"></script>\n<script>\n  window.dataLayer = window.dataLayer || [];\n  function gtag(){dataLayer.push(arguments);}\n  gtag('js', new Date());\n\n  gtag('config', 'UA-878633-1');\n</script>\n\n<meta charset=\"gbk\" />\n<meta name=\"robots\" content=\"all\" />\n<meta name=\"author\" content=\"w3school.com.cn\" />\n<link rel=\"stylesheet\" type=\"text/css\" href=\"/c5_20171220.css\" />\n<link rel=icon type=\"image/png\" sizes=\"16x16\" href=\"/ui2017/logo-16.png\">\n<link rel=icon type=\"image/png\" sizes=\"32x32\" href=\"/ui2017/logo-32.png\">\n<link rel=icon type=\"image/png\" sizes=\"48x48\" href=\"/ui2017/logo-48.png\">\n<link rel=icon type=\"image/png\" sizes=\"96x96\" href=\"/ui2017/logo-96.png\">\n<link rel=\"apple-touch-icon-precomposed\" sizes=\"96x96\" href=\"/ui2017/logo-96.png\">\n<link rel=\"apple-touch-icon-precomposed\" sizes=\"144x144\" href=\"/ui2017/logo-144.png\">\n\n\n<title>HTML 测验</title>\n\n</head>\n\n<body class=\"html\">\n\n<div id=\"wrapper\">\n\n<div id=\"header\">\n<a href=\"/index.html\" title=\"w3school 在线教程\" style=\"float:left;\">w3school 在线教程</a>\n<div id=\"ad_head\">\n<script type=\"text/javascript\"><!--\ngoogle_ad_client = \"pub-3381531532877742\";\n/* 728x90, 创建于 08-12-1 */\ngoogle_ad_slot = \"7423315034\";\ngoogle_ad_width = 728;\ngoogle_ad_height = 90;\n//-->\n</script>\n<script type=\"text/javascript\"\nsrc=\"http://pagead2.googlesyndication.com/pagead/show_ads.js\">\n</script>\n</div>\n</div>\n\n<div id=\"navfirst\">\n<ul id=\"menu\">\n<li id=\"h\"><a href=\"/h.asp\" title=\"HTML 系列教程\">HTML 系列教程</a></li>\n<li id=\"b\"><a href=\"/b.asp\" title=\"浏览器脚本教程\">浏览器脚本</a></li>\n<li id=\"s\"><a href=\"/s.asp\" title=\"服务器脚本教程\">服务器脚本</a></li>\n<li id=\"d\"><a href=\"/d.asp\" title=\"ASP.NET 教程\">ASP.NET 教程</a></li>\n<li id=\"x\"><a href=\"/x.asp\" title=\"XML 系列教程\">XML 系列教程</a></li>\n<li id=\"ws\"><a href=\"/ws.asp\" title=\"Web Services 系列教程\">Web Services 系列教程</a></li>\n<li id=\"w\"><a href=\"/w.asp\" title=\"建站手册\">建站手册</a></li>\n</ul>\n</div>\n\n<div id=\"navsecond\">\n\n<div id=\"course\"><h2>HTML 基础教程</h2>\n<ul>\n<li><a href=\"/html/index.asp\" title=\"HTML 教程\">HTML 教程</a></li>\n<li><a href=\"/html/html_jianjie.asp\" title=\"HTML 简介\">HTML 简介</a></li>\n<li><a href=\"/html/html_editors.asp\" title=\"HTML 编辑器\">HTML 编辑器</a></li>\n<li><a href=\"/html/html_basic.asp\" title=\"HTML 基础 - 四个实例\">HTML 基础</a></li>\n<li><a href=\"/html/html_elements.asp\" title=\"HTML 元素\">HTML 元素</a></li>\n<li><a href=\"/html/html_attributes.asp\" title=\"HTML 属性\">HTML 属性</a></li>\n<li><a href=\"/html/html_headings.asp\" title=\"HTML 标题\">HTML 标题</a></li>\n<li><a href=\"/html/html_paragraphs.asp\" title=\"HTML 段落\">HTML 段落</a></li>\n<li><a href=\"/html/html_styles.asp\" title=\"HTML 样式 - CSS\">HTML 样式</a></li>\n<li><a href=\"/html/html_formatting.asp\" title=\"HTML 文本格式化\">HTML 格式化</a></li>\n\n</ul>\n<h2>HTML XHTML</h2>\n<ul>\n<li><a href=\"/html/html_xhtml.asp\" title=\"XHTML 简介\">XHTML 简介</a></li>\n<li><a href=\"/html/html_xhtml_elements.asp\" title=\"XHTML - 元素\">XHTML 元素</a></li>\n<li><a href=\"/html/html_xhtml_attributes.asp\" title=\"XHTML - 属性\">XHTML 属性</a></li>\n</ul>\n\n<ul>\n<li><a href=\"/html/html5_canvas.asp\" title=\"HTML5 Canvas\">HTML5 画布</a></li>\n<li><a href=\"/html/html5_svg.asp\" title=\"HTML5 内联 SVG\">HTML5 SVG</a></li>\n<li><a href=\"/html/html5_canvas_vs_svg.asp\" title=\"HTML5 Canvas vs. SVG\">HTML5 画布 vs SVG</a></li>\n</ul>\n<h2>HTML 媒体</h2>\n<ul>\n<li><a href=\"/html/html_media.asp\" title=\"HTML 多媒体\">HTML 媒体</a></li>\n<li><a href=\"/html/html_object.asp\" title=\"HTML Object 元素\">HTML 对象</a></li>\n<li><a href=\"/html/html_audio.asp\" title=\"HTML 音频\">HTML 音频</a></li>\n<li><a href=\"/html/html_video.asp\" title=\"HTML 视频\">HTML 视频</a></li>\n</ul>\n<h2>HTML API</h2>\n<ul>\n<li><a href=\"/html/html5_geolocation.asp\" title=\"HTML5 地理定位\">HTML5 地理定位</a></li>\n<li><a href=\"/html/html5_draganddrop.asp\" title=\"HTML5 拖放\">HTML5 拖放</a></li>\n<li><a href=\"/html/html5_webstorage.asp\" title=\"HTML5 Web 存储\">HTML5 Web 存储</a></li>\n<li><a href=\"/html/html5_app_cache.asp\" title=\"HTML 5 应用程序缓存\">HTML5 应用缓存</a></li>\n<li><a href=\"/html/html5_webworkers.asp\" title=\"HTML5 Web Workers\">HTML5 Web Workers</a></li>\n<li><a href=\"/html/html5_serversentevents.asp\" title=\"HTML5 服务器发送事件\">HTML5 SSE</a></li>\n</ul>\n<h2>实例/测验/总结</h2>\n<ul>\n<li><a href=\"/example/html_examples.asp\" title=\"HTML 实例\">HTML 实例</a></li>\n<li class=\"currentLink\"><a href=\"/html/html_quiz.asp\" title=\"HTML 测验\">HTML 测验</a></li>\n<li><a href=\"/html/html_summary.asp\" title=\"HTML 总结\">HTML 总结</a></li>\n</ul>\n<h2>HTML 参考手册</h2>\n<ul>\n<li><a href=\"/tags/index.asp\" title=\"HTML 4.01 / XHTML 1.0 参考手册\">HTML 标签列表</a></li>\n<li><a href=\"/tags/html_ref_standardattributes.asp\" title=\"HTML 标准属性\">HTML 属性</a></li>\n<li><a href=\"/tags/html_ref_eventattributes.asp\" title=\"HTML 事件属性\">HTML 事件</a></li>\n<li><a href=\"/tags/html_ref_dtd.asp\" title=\"HTML 元素与合法的 Doctype\">HTML 合法 DTD</a></li>\n<li><a href=\"/tags/html_ref_colornames.asp\" title=\"HTML 颜色名\">HTML 颜色名</a></li>\n<li><a href=\"/tags/html_ref_charactersets.asp\" title=\"HTML 字符集\">HTML 字符集</a></li>\n<li><a href=\"/tags/html_ref_ascii.asp\" title=\"HTML ASCII 参考手册\">HTML ASCII</a></li>\n<li><a href=\"/tags/html_ref_entities.html\" title=\"HTML ISO-8859-1 参考手册\">HTML ISO-8859-1</a></li>\n<li><a href=\"/tags/html_ref_symbols.html\" title=\"HTML 4.01 符号实体\">HTML 符号</a></li>\n<li><a href=\"/tags/html_ref_urlencode.html\" title=\"HTML URL 编码\">HTML URL 编码</a></li>\n<li><a href=\"/tags/html_ref_language_codes.asp\" title=\"HTML 语言代码参考手册\">HTML 语言代码</a></li>\n<li><a href=\"/tags/html_ref_httpmessages.asp\" title=\"HTML 状态消息\">HTML 消息</a></li>\n</ul>\n<h2>HTML5</h2>\n<ul>\n<li><a href=\"/html/index.asp\" title=\"HTML5 教程\">HTML5 教程</a></li>\n<li><a href=\"/tags/index.asp\" title=\"HTML5 参考手册\">HTML5 参考手册</a></li>\n</ul>\n</div><div id=\"selected\">\n<h2>建站手册</h2>\n<ul>\n<li><a href=\"/site/index.asp\" title=\"网站构建\">网站构建</a></li>\n<li><a href=\"/w3c/index.asp\" title=\"万维网联盟 (W3C)\">万维网联盟 (W3C)</a></li>\n<li><a href=\"/browsers/index.asp\" title=\"浏览器信息\">浏览器信息</a></li>\n<li><a href=\"/quality/index.asp\" title=\"网站品质\">网站品质</a></li>\n<li><a href=\"/semweb/index.asp\" title=\"语义网\">语义网</a></li>\n<li><a href=\"/careers/index.asp\" title=\"职业规划\">职业规划</a></li>\n<li><a href=\"/hosting/index.asp\" title=\"网站主机\">网站主机</a></li>\n</ul>\n\n<h2><a href=\"/about/index.asp\" title=\"关于 W3School\" id=\"link_about\">关于 W3School</a></h2>\n<h2><a href=\"/about/about_helping.asp\" title=\"帮助 W3School\" id=\"link_help\">帮助 W3School</a></h2>\n\n</div>\n\n</div>\n\n<div id=\"maincontent\">\n\n\n\n\n<div id=\"intro\">\n<p><strong>您可以通过 W3SCHOOL 的测验程序来测试您的 HTML 技能。</strong></p>\n</div>\n\n\n<div>\n<h2>关于本测验</h2>\n\n<p>本测验包含 20 道题，每道题的最长答题时间是 20 分钟（这是由于每个 session 的默认有效时间是20钟）。</p>\n\n<p>本测验是非官方的测试，它仅仅提供了一个了解您对 HTML 的掌握程度的工具。</p>\n</div>\n\n\n<div>\n<h2>测验会被记分</h2>\n\n<p>每道题的分值是 1 分。在您完成全部的 20 道题之后，系统会为您的测验打分，并提供您做错的题目的正确答案。其中，绿色为正确答案，而红色为错误答案。</p>\n\n<p><a href=\"/quiz/quiz.asp?quiz=html\">现在就开始测验</a>！祝您好运。</p>\n</div>\n\n\n<div id=\"bpn\">\n<ul class=\"prenext\">\n<li class=\"pre\"><a href=\"/example/html_examples.asp\" title=\"HTML 实例\">HTML 实例</a></li>\n<li class=\"next\"><a href=\"/html/html_summary.asp\" title=\"HTML 总结\">HTML 总结</a></li>\n</ul>\n</div>\n\n\n<div style=\"background-color:#fcfdf8; padding:0;\">\n<script async src=\"//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js\"></script>\n<!-- W3School 正文底部广告位 -->\n<ins class=\"adsbygoogle\"\n     style=\"display:inline-block;width:800px;height:250px\"\n     data-ad-client=\"ca-pub-3381531532877742\"\n     data-ad-slot=\"9384069314\"></ins>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n</div>\n\n</div>\n<!-- maincontent end -->\n\n<div id=\"sidebar\">\n\n<div id=\"tools\">\n<h5 id=\"tools_reference\"><a href=\"/tags/index.asp\">HTML 参考手册</a></h5>\n<h5 id=\"tools_example\"><a href=\"/example/html_examples.asp\">HTML 实例</a></h5>\n<h5 id=\"tools_quiz\"><a href=\"/html/html_quiz.asp\">HTML 测验</a></h5>\n</div>\n\n\n\n\n</div>\n<!-- wrapper end -->\n\n</body>\n\n</html>\n\n\n\n<hr>\n<h3 id=\"链接\"><a href=\"#链接\" class=\"headerlink\" title=\"链接\"></a>链接</h3><p>More info: <a href=\"https://hexo.io/docs/deployment.html\">Deployment</a></p>\n<h3 id=\"打飞机HTML-CSS-JS\"><a href=\"#打飞机HTML-CSS-JS\" class=\"headerlink\" title=\"打飞机HTML+CSS+JS\"></a>打飞机HTML+CSS+JS</h3><hr>\n<script id=\"jquery_172\" type=\"text/javascript\" class=\"library\" src=\"/js/sandbox/jquery/jquery-1.7.2.min.js\"></script>\n\n<style>\n    \n    body{ margin:0; padding:0; background:#000; font-family:microsoft yahei;  }\n    #box { width: 300px; height:500px; margin:10px auto; overflow:hidden; position:relative; border:15px solid #f0f0f0; }\n    #box .title{ width:300px; height:40px; line-height:40px; position:absolute; left:0; top:80px; z-index:1; color:#fff; text-align:center; font-size:24px; }\n    #box .difficulty{ width:300px; position:absolute; top:180px; z-index:1; font-family:microsoft yahei;}\n    #box .difficulty a{ width:180px; height:30px; line-height:30px; text-align:center; display:block; margin:20px auto 0 auto; background:#f0f0f0; color:#333; text-decoration:none;}\n    #box .difficulty a:hover{ background:#900; color:#fff;}\n    #box .bg img{ display:block;}\n    #box .warcraft{ width:60px; height:36px; position:absolute; left:120px;  top:500px; background:url('http://sandbox.runjs.cn/uploads/rs/130/es3n7cq9/warcraft.png') center no-repeat; z-index:3;}\n    #box .bullet{ width:6px; height:22px; background:url('http://sandbox.runjs.cn/uploads/rs/130/es3n7cq9/bullet.png'); position:absolute; z-index:2}\n    #box .enemy{ width:23px; height:30px; background:url('http://sandbox.runjs.cn/uploads/rs/130/es3n7cq9/enemy.png'); position:absolute; z-index:3}\n    #box .score { width:220px; height:30px; line-height:30px; position:absolute; color:#fff; font-weight:bold; padding-left:5px; font-size:16px; z-index:5;}\n    #box .tips{ width:240px; height: 200px; line-height:40px; padding:10px; position:absolute; left:20px; top:130px;  background:#f0f0f0;}\n    #box .tips .type{ width:160px; padding: 2px 15px; height:30px; line-height:30px; text-align:center; color:red; font-weight:bold;}\n    #box .tips p{ width:160px; height:40px; font-size:32px; line-height:40px; text-align:center; cursor:pointer;  background:#333; color:#fff; margin:20px auto 0 auto;}\n    #box .tips .nn,#box .tips .tt{ padding:2px 10px; font-weight:bold;  color:blue;}\n    #box .tips .tt{ display:block; text-align:center; font-size:24px;}\n</style>\n\n<div id=\"box\"></div>\n\n<script>\n\n$(function () {\n    game.startScreen.draw();\n})\n\n\nvar game = {\n    \n    stage : $(\"#box\"),\n    \n    modetxt : \"\",\n    \n    timer : {\n        bg : null,\n        bullet : null,\n        enemy : null\n    },\n    mode : [\n        [7,2500,500,1000,4000,200],\n        [5,2000,300,3000,6000,300],\n        [3,1500,50,4000,8000,400]\n    ], //参数配置\n    num : {\n        count : 0,\n        warcraftX : 0,\n        warcraftY : 0,\n        score : 0\n    },\n    stitle : function ( score ) {\n        switch ( game.modetxt ) {\n            case '纯屌丝模式' : \n                if( score == 0 ) {\n                    return '屌丝中的屌丝';\n                }\n                else if( score <= 20000 ) {\n                    return '入门级屌丝'\n                }\n                else if( score <= 100000 && score > 20000 ) {\n                    return '资深屌丝'\n                }\n                else if( score <= 500000 && score > 100000 ) {\n                    return '知名屌丝'\n                }\n                else {\n                    return '全国十佳屌丝';\n                }\n            case '高富帅模式' : \n                if( score == 0 ) {\n                    return '药不能停';\n                }\n                else if( score <= 20000 ) {\n                    return '人艰不拆'\n                }\n                else if( score <= 100000 && score > 20000 ) {\n                    return '夜用型高富帅'\n                }\n                else if( score <= 500000 && score > 100000 ) {\n                    return '日夜两用'\n                }\n                else {\n                    return '打飞机战将';\n                }\n            case '李少侠模式' : \n                if( score == 0 ) {\n                    return '坑爹坑娘';\n                }\n                else if( score <= 20000 ) {\n                    return '我很无辜'\n                }\n                else if( score <= 100000 && score > 20000 ) {\n                    return '小伙伴惊呆了'\n                }\n                else if( score <= 500000 && score > 100000 ) {\n                    return '我是受害者'\n                }\n                else {\n                    return '嫖客';\n                }\n        }\n    },\n    startScreen : {\n        draw : function () {\n            var title = $(\"<div>\");\n                title.addClass(\"title\");\n                title.html(\"打飞机 1.0 Javascript版\");\n                game.stage.append(title);\n            \n            var difficulty = $(\"<div>\");\n                difficulty.addClass(\"difficulty\");\n                difficulty.html(\"<a href='javascript:void(0)'>纯屌丝模式</a><a href='javascript:void(0)'>高富帅模式</a><a href='javascript:void(0)'>李少侠模式</a>\");\n                game.stage.append(difficulty);\n            game.stage.find($(\".difficulty\")).delegate(\"a\",\"click\", function ( e ) {\n                game.stage.start = true ;\n                game.startScreen.remove();\n                $(document).mousemove( function ( e ) {\n                    if( game.num.count % 2 == 0 && game.stage.start)\n                    {\n                        var e = e || event;\n                        var x = e.clientX - game.stage.offset().left - 10;\n                        var y = e.clientY - game.stage.offset().top - 10;\n                        game.core.warcraft([x,y]);\n                    }\n                    game.num.count++;\n                })\n                var set = game.mode[$(this).index()];\n                game.modetxt = $(this).html();\n                game.core.draw(set[0]);\n                game.timer.bullet = setInterval ( function () {\n                    game.core.bullet(set[1],[game.num.warcraftX,game.num.warcraftY]);\n                },set[2]);\n                game.timer.enemy =setInterval ( function () {\n                    game.core.enemy({\n                        speed : game.randomNum(set[3],set[4]),\n                        left : game.randomNum(0,277),\n                        top : -game.randomNum(30,80)\n                    });\n                },set[5])\n            \n            });\n        }, //绘制开始界面\n        remove : function () {\n            var removeDiv = game.stage.children($(\"div\"));\n            removeDiv.stop().animate({opacity:0},100);\n            setTimeout( function () {\n                removeDiv.remove();\n            },300)\n        }\n    }, //开始场景\n    core : {\n        draw : function ( speed ) {\n            var warcraft = $(\"<div>\");\n                warcraft.addClass(\"warcraft\");\n            game.stage.append(warcraft);\n            var score = $(\"<div>\");\n                score.addClass(\"score\");\n                score.html(\"0\");\n            game.stage.append(score);\n        }, //绘制游戏场景\n        warcraft : function ( pos ) { \n            var warcraft = game.stage.find($(\".warcraft\")),\n                left =  pos[0] -warcraft.width()/2 - 3,\n                top =  pos[1] - warcraft.height()/2 - 6;\n            \n            if( left <= -warcraft.width()/2 ) {\n                left = -warcraft.width()/2;\n            }\n            else if( left >= game.stage.width() - warcraft.width()/2) {\n                left = game.stage.width() - warcraft.width()/2;\n            }\n            if( top <= 0) {\n                top = 0;\n            }\n            else if ( top >= game.stage.height() - warcraft.height()) {\n                top = game.stage.height() - warcraft.height();\n            }\n            warcraft.css({left:left,top:top});\n            game.num.warcraftX = left + warcraft.width()/2;\n            game.num.warcraftY = top + warcraft.height()/2;\n        }, //战斗机位置\n        bullet : function ( speed ,pos ) {\n            var bullet = $(\"<div>\");\n                bullet.addClass(\"bullet\");\n            game.stage.append(bullet);\n            bullet.css({\n                    left : pos[0] - bullet.width()/2,\n                    top : pos[1] - bullet.height()/2\n                });\n            bullet.stop().animate({top:-bullet.height()},speed,function () { bullet.remove();})\n        }, //子弹开始发射\n        enemy : function ( argument ) {\n            var speed = argument.speed;\n            var left = argument.left;\n            var top = argument.top;\n            var oEnemy  = $(\"<div>\");\n                oEnemy.addClass(\"enemy\");\n                oEnemy.css({\n                    left : left,\n                    top : top\n                });\n            oEnemy.appendTo(game.stage);\n            oEnemy.stop().animate( { top:530 }, speed , function () { oEnemy.remove(); clearInterval(oEnemy.timer)});\n            oEnemy.timer = setInterval ( function () {\n                var x = parseInt(oEnemy.css(\"left\")) + 12,\n                    y = parseInt(oEnemy.css(\"top\")) + 15,\n                    l = $(\".bullet\").length;\n                for( var i = 0 ; i< l; i++ )\n                {\n                    var bx = Math.abs( x - parseInt($(\".bullet\").eq(i).css(\"left\"))),\n                        by = Math.abs( y - parseInt($(\".bullet\").eq(i).css(\"top\")));\n                    if( bx <= 14 &&  by <= 20 )\n                    {\n                        oEnemy.css(\"background\",\"url('http://sandbox.runjs.cn/uploads/rs/130/es3n7cq9/boom.png')\");\n                        $(\".bullet\").eq(i).remove();\n                        clearInterval(oEnemy.timer);\n                        game.num.score++;\n                        game.stage.find($(\".score\")).html(game.num.score*1000);\n                        setTimeout( function () { oEnemy.remove(); },300)\n                    }\n                }\n                var bx2 = Math.abs( x - parseInt($(\".warcraft\").css(\"left\")) - 30),\n                    by2 = Math.abs( y - parseInt($(\".warcraft\").css(\"top\")) - 18);\n                if( bx2 <= 40 &&  by2 <= 33 )\n                {\n                    var tips = $(\"<div>\");\n                        tips.addClass(\"tips\");\n                        tips.html(\"您在<span class='type'>\" + game.modetxt.substring(0,3) + \"杯</span>全国花式打飞机大赛上，以<span class='nn'>\"+$(\".score\").html() + \"</span>分荣获称谓<span class='tt'>\"+game.stitle($(\".score\").html())+\"</span><p>再打一次</p>\");\n                        game.stage.delegate(\".tips p\",'click',function(){\n                            game.num.score = 0;\n                            game.startScreen.remove();\n                            game.startScreen.draw();\n                        })\n                    oEnemy.remove();\n                    $(\".score\").css(\"display\",\"none\");\n                    $(\".warcraft\").css(\"background\",\"url('http://sandbox.runjs.cn/uploads/rs/130/es3n7cq9/boom2.png')\");\n                    clearInterval(oEnemy.timer);\n                    setTimeout( function () { $(\".warcraft\").remove(); },300)\n                    clearInterval(game.timer.bullet);\n                    clearInterval(game.timer.enemy);\n                    clearInterval(game.timer.bg);\n                    setTimeout( function () {\n                        game.stage.append(tips);\n                    },3000)\n                    \n                }\n            },50)\n        } //敌机\n\n    }, //核心代码\n    randomNum : function (a,b){\n        var value = Math.abs(a-b) , num ;\n        num = parseInt(Math.random()*(value)) + Math.min(a,b);\n        return num;\n    } //产生指定区域整形随机数。\n};\n\n    \n</script>\n\n\n<hr>\n"},{"title":"文章汇总","date":"2021-03-14T03:00:00.000Z","description":"博客文章汇总","_content":"\n# 计算机科学与技术、软件工程基础知识\n- 1.[计算机导论](https://hexo.io/docs/deployment.html)\n- 2.[计算机组成原理](https://hexo.io/docs/deployment.html)\n- 3.[操作系统](https://hexo.io/docs/deployment.html)\n- 4.[计算机网络](https://hexo.io/docs/deployment.html)\n- 5.[数据结构](https://hexo.io/docs/deployment.html)\n- 6.[软件工程](https://hexo.io/docs/deployment.html)\n- 7.[大数据](https://hexo.io/docs/deployment.html)\n- 8.[人工智能](https://hexo.io/docs/deployment.html)\n\n# Java知识体系\n\n## Java基础知识\n- 0001.[Java简史](https://hexo.io/docs/deployment.html)\n- 0002.[Java特性](https://hexo.io/docs/deployment.html)\n- 0003.[Java快速开始](https://hexo.io/docs/deployment.html)\n- 0004.[Java基本数据类型](https://hexo.io/docs/deployment.html)\n- 0005.[Java运算符](https://hexo.io/docs/deployment.html)\n- 0006.[Java基础语法](https://hexo.io/docs/deployment.html)\n- 0007.[Java关键字](https://hexo.io/docs/deployment.html)\n- 0008.[Java类](https://hexo.io/docs/deployment.html)\n- 0009.[Java面向对象](https://hexo.io/docs/deployment.html)\n- 0010.[Java接口](https://hexo.io/docs/deployment.html)\n- 0011.[Java继承](https://hexo.io/docs/deployment.html)\n- 0012.[Java抽象类](https://hexo.io/docs/deployment.html)\n- 0013.[Java实现类及多态](https://hexo.io/docs/deployment.html)\n- 0014.[Java内部类](https://hexo.io/docs/deployment.html)\n\n## Java、JDK核心API及源码\n- 0001.[String](https://hexo.io/docs/deployment.html)\n- 0002.[集合](https://hexo.io/docs/deployment.html)\n- 0003.[泛型](https://hexo.io/docs/deployment.html)\n- 0003.[反射](https://hexo.io/docs/deployment.html)\n- 0004.[JUC](https://hexo.io/docs/deployment.html)\n- 0005.[Java锁](https://hexo.io/docs/deployment.html)\n- 0006.[Java JDBC](https://hexo.io/docs/deployment.html)\n\n\n## JVM\n- 0001.[JVM运行时内存模型](https://hexo.io/docs/deployment.html)\n- 0002.[JVM垃圾收集](https://hexo.io/docs/deployment.html)\n- 0003.[Java类加载执行机制](https://hexo.io/docs/deployment.html)\n\n## Java生态相关\n- 1.[Spring](https://hexo.io/docs/deployment.html)\n- 2.[SpringBoot](https://hexo.io/docs/deployment.html)\n- 3.[SpringCloud](https://hexo.io/docs/deployment.html)\n- 4.[Dubbo](https://hexo.io/docs/deployment.html)\n- 5.[Netty](https://hexo.io/docs/deployment.html)\n- 6.[Mybatis](https://hexo.io/docs/deployment.html)\n- 7.[Hibernate](https://hexo.io/docs/deployment.html)\n\n\n\n## 案例\n\n小车正穿行在洛基山脉蜿蜒曲折的盘山公路上，克里朵托夫里维静静地看着窗外，发现车子每当行驶到无路的关头，路边都会出现一块交通指示牌：“前方转弯”或写着“注意急转弯”。而转过每一道弯道之后前方照例又是一片柳暗花明、豁然开朗。山路弯弯、峰回路转，“前方转弯”几个大字一次次冲击着他的眼球，也渐渐敲醒了他的心扉。原来不是路已到了尽头，而是该转弯了……路在脚下，更在心中，心随路转，心路常宽。学会转弯也是人生的智慧，因为挫折往往是转折，危机同时是转机。\n\n### 代码样式\n\n### 链接\nMore info: [Deployment](https://hexo.io/docs/deployment.html)\n\n\n","source":"_posts/文章汇总.md","raw":"---\ntitle: 文章汇总\ndate: 2021-03-14 11:00:00\ncategories: \"默认\" #文章分類目录 可以省略\ntags: #Java \n     - 文章\n     - 汇总\n     - Java\n     - 博客\n     - 技术\n\ndescription: 博客文章汇总  #你对本文的描述 可以省略\n---\n\n# 计算机科学与技术、软件工程基础知识\n- 1.[计算机导论](https://hexo.io/docs/deployment.html)\n- 2.[计算机组成原理](https://hexo.io/docs/deployment.html)\n- 3.[操作系统](https://hexo.io/docs/deployment.html)\n- 4.[计算机网络](https://hexo.io/docs/deployment.html)\n- 5.[数据结构](https://hexo.io/docs/deployment.html)\n- 6.[软件工程](https://hexo.io/docs/deployment.html)\n- 7.[大数据](https://hexo.io/docs/deployment.html)\n- 8.[人工智能](https://hexo.io/docs/deployment.html)\n\n# Java知识体系\n\n## Java基础知识\n- 0001.[Java简史](https://hexo.io/docs/deployment.html)\n- 0002.[Java特性](https://hexo.io/docs/deployment.html)\n- 0003.[Java快速开始](https://hexo.io/docs/deployment.html)\n- 0004.[Java基本数据类型](https://hexo.io/docs/deployment.html)\n- 0005.[Java运算符](https://hexo.io/docs/deployment.html)\n- 0006.[Java基础语法](https://hexo.io/docs/deployment.html)\n- 0007.[Java关键字](https://hexo.io/docs/deployment.html)\n- 0008.[Java类](https://hexo.io/docs/deployment.html)\n- 0009.[Java面向对象](https://hexo.io/docs/deployment.html)\n- 0010.[Java接口](https://hexo.io/docs/deployment.html)\n- 0011.[Java继承](https://hexo.io/docs/deployment.html)\n- 0012.[Java抽象类](https://hexo.io/docs/deployment.html)\n- 0013.[Java实现类及多态](https://hexo.io/docs/deployment.html)\n- 0014.[Java内部类](https://hexo.io/docs/deployment.html)\n\n## Java、JDK核心API及源码\n- 0001.[String](https://hexo.io/docs/deployment.html)\n- 0002.[集合](https://hexo.io/docs/deployment.html)\n- 0003.[泛型](https://hexo.io/docs/deployment.html)\n- 0003.[反射](https://hexo.io/docs/deployment.html)\n- 0004.[JUC](https://hexo.io/docs/deployment.html)\n- 0005.[Java锁](https://hexo.io/docs/deployment.html)\n- 0006.[Java JDBC](https://hexo.io/docs/deployment.html)\n\n\n## JVM\n- 0001.[JVM运行时内存模型](https://hexo.io/docs/deployment.html)\n- 0002.[JVM垃圾收集](https://hexo.io/docs/deployment.html)\n- 0003.[Java类加载执行机制](https://hexo.io/docs/deployment.html)\n\n## Java生态相关\n- 1.[Spring](https://hexo.io/docs/deployment.html)\n- 2.[SpringBoot](https://hexo.io/docs/deployment.html)\n- 3.[SpringCloud](https://hexo.io/docs/deployment.html)\n- 4.[Dubbo](https://hexo.io/docs/deployment.html)\n- 5.[Netty](https://hexo.io/docs/deployment.html)\n- 6.[Mybatis](https://hexo.io/docs/deployment.html)\n- 7.[Hibernate](https://hexo.io/docs/deployment.html)\n\n\n\n## 案例\n\n小车正穿行在洛基山脉蜿蜒曲折的盘山公路上，克里朵托夫里维静静地看着窗外，发现车子每当行驶到无路的关头，路边都会出现一块交通指示牌：“前方转弯”或写着“注意急转弯”。而转过每一道弯道之后前方照例又是一片柳暗花明、豁然开朗。山路弯弯、峰回路转，“前方转弯”几个大字一次次冲击着他的眼球，也渐渐敲醒了他的心扉。原来不是路已到了尽头，而是该转弯了……路在脚下，更在心中，心随路转，心路常宽。学会转弯也是人生的智慧，因为挫折往往是转折，危机同时是转机。\n\n### 代码样式\n\n### 链接\nMore info: [Deployment](https://hexo.io/docs/deployment.html)\n\n\n","slug":"文章汇总","published":1,"updated":"2025-03-26T06:43:53.004Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cm8pr0j2i001wgskz88ava58b","content":"<h1 id=\"计算机科学与技术、软件工程基础知识\"><a href=\"#计算机科学与技术、软件工程基础知识\" class=\"headerlink\" title=\"计算机科学与技术、软件工程基础知识\"></a>计算机科学与技术、软件工程基础知识</h1><ul>\n<li>1.<a href=\"https://hexo.io/docs/deployment.html\">计算机导论</a></li>\n<li>2.<a href=\"https://hexo.io/docs/deployment.html\">计算机组成原理</a></li>\n<li>3.<a href=\"https://hexo.io/docs/deployment.html\">操作系统</a></li>\n<li>4.<a href=\"https://hexo.io/docs/deployment.html\">计算机网络</a></li>\n<li>5.<a href=\"https://hexo.io/docs/deployment.html\">数据结构</a></li>\n<li>6.<a href=\"https://hexo.io/docs/deployment.html\">软件工程</a></li>\n<li>7.<a href=\"https://hexo.io/docs/deployment.html\">大数据</a></li>\n<li>8.<a href=\"https://hexo.io/docs/deployment.html\">人工智能</a></li>\n</ul>\n<h1 id=\"Java知识体系\"><a href=\"#Java知识体系\" class=\"headerlink\" title=\"Java知识体系\"></a>Java知识体系</h1><h2 id=\"Java基础知识\"><a href=\"#Java基础知识\" class=\"headerlink\" title=\"Java基础知识\"></a>Java基础知识</h2><ul>\n<li>0001.<a href=\"https://hexo.io/docs/deployment.html\">Java简史</a></li>\n<li>0002.<a href=\"https://hexo.io/docs/deployment.html\">Java特性</a></li>\n<li>0003.<a href=\"https://hexo.io/docs/deployment.html\">Java快速开始</a></li>\n<li>0004.<a href=\"https://hexo.io/docs/deployment.html\">Java基本数据类型</a></li>\n<li>0005.<a href=\"https://hexo.io/docs/deployment.html\">Java运算符</a></li>\n<li>0006.<a href=\"https://hexo.io/docs/deployment.html\">Java基础语法</a></li>\n<li>0007.<a href=\"https://hexo.io/docs/deployment.html\">Java关键字</a></li>\n<li>0008.<a href=\"https://hexo.io/docs/deployment.html\">Java类</a></li>\n<li>0009.<a href=\"https://hexo.io/docs/deployment.html\">Java面向对象</a></li>\n<li>0010.<a href=\"https://hexo.io/docs/deployment.html\">Java接口</a></li>\n<li>0011.<a href=\"https://hexo.io/docs/deployment.html\">Java继承</a></li>\n<li>0012.<a href=\"https://hexo.io/docs/deployment.html\">Java抽象类</a></li>\n<li>0013.<a href=\"https://hexo.io/docs/deployment.html\">Java实现类及多态</a></li>\n<li>0014.<a href=\"https://hexo.io/docs/deployment.html\">Java内部类</a></li>\n</ul>\n<h2 id=\"Java、JDK核心API及源码\"><a href=\"#Java、JDK核心API及源码\" class=\"headerlink\" title=\"Java、JDK核心API及源码\"></a>Java、JDK核心API及源码</h2><ul>\n<li>0001.<a href=\"https://hexo.io/docs/deployment.html\">String</a></li>\n<li>0002.<a href=\"https://hexo.io/docs/deployment.html\">集合</a></li>\n<li>0003.<a href=\"https://hexo.io/docs/deployment.html\">泛型</a></li>\n<li>0003.<a href=\"https://hexo.io/docs/deployment.html\">反射</a></li>\n<li>0004.<a href=\"https://hexo.io/docs/deployment.html\">JUC</a></li>\n<li>0005.<a href=\"https://hexo.io/docs/deployment.html\">Java锁</a></li>\n<li>0006.<a href=\"https://hexo.io/docs/deployment.html\">Java JDBC</a></li>\n</ul>\n<h2 id=\"JVM\"><a href=\"#JVM\" class=\"headerlink\" title=\"JVM\"></a>JVM</h2><ul>\n<li>0001.<a href=\"https://hexo.io/docs/deployment.html\">JVM运行时内存模型</a></li>\n<li>0002.<a href=\"https://hexo.io/docs/deployment.html\">JVM垃圾收集</a></li>\n<li>0003.<a href=\"https://hexo.io/docs/deployment.html\">Java类加载执行机制</a></li>\n</ul>\n<h2 id=\"Java生态相关\"><a href=\"#Java生态相关\" class=\"headerlink\" title=\"Java生态相关\"></a>Java生态相关</h2><ul>\n<li>1.<a href=\"https://hexo.io/docs/deployment.html\">Spring</a></li>\n<li>2.<a href=\"https://hexo.io/docs/deployment.html\">SpringBoot</a></li>\n<li>3.<a href=\"https://hexo.io/docs/deployment.html\">SpringCloud</a></li>\n<li>4.<a href=\"https://hexo.io/docs/deployment.html\">Dubbo</a></li>\n<li>5.<a href=\"https://hexo.io/docs/deployment.html\">Netty</a></li>\n<li>6.<a href=\"https://hexo.io/docs/deployment.html\">Mybatis</a></li>\n<li>7.<a href=\"https://hexo.io/docs/deployment.html\">Hibernate</a></li>\n</ul>\n<h2 id=\"案例\"><a href=\"#案例\" class=\"headerlink\" title=\"案例\"></a>案例</h2><p>小车正穿行在洛基山脉蜿蜒曲折的盘山公路上，克里朵托夫里维静静地看着窗外，发现车子每当行驶到无路的关头，路边都会出现一块交通指示牌：“前方转弯”或写着“注意急转弯”。而转过每一道弯道之后前方照例又是一片柳暗花明、豁然开朗。山路弯弯、峰回路转，“前方转弯”几个大字一次次冲击着他的眼球，也渐渐敲醒了他的心扉。原来不是路已到了尽头，而是该转弯了……路在脚下，更在心中，心随路转，心路常宽。学会转弯也是人生的智慧，因为挫折往往是转折，危机同时是转机。</p>\n<h3 id=\"代码样式\"><a href=\"#代码样式\" class=\"headerlink\" title=\"代码样式\"></a>代码样式</h3><h3 id=\"链接\"><a href=\"#链接\" class=\"headerlink\" title=\"链接\"></a>链接</h3><p>More info: <a href=\"https://hexo.io/docs/deployment.html\">Deployment</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"计算机科学与技术、软件工程基础知识\"><a href=\"#计算机科学与技术、软件工程基础知识\" class=\"headerlink\" title=\"计算机科学与技术、软件工程基础知识\"></a>计算机科学与技术、软件工程基础知识</h1><ul>\n<li>1.<a href=\"https://hexo.io/docs/deployment.html\">计算机导论</a></li>\n<li>2.<a href=\"https://hexo.io/docs/deployment.html\">计算机组成原理</a></li>\n<li>3.<a href=\"https://hexo.io/docs/deployment.html\">操作系统</a></li>\n<li>4.<a href=\"https://hexo.io/docs/deployment.html\">计算机网络</a></li>\n<li>5.<a href=\"https://hexo.io/docs/deployment.html\">数据结构</a></li>\n<li>6.<a href=\"https://hexo.io/docs/deployment.html\">软件工程</a></li>\n<li>7.<a href=\"https://hexo.io/docs/deployment.html\">大数据</a></li>\n<li>8.<a href=\"https://hexo.io/docs/deployment.html\">人工智能</a></li>\n</ul>\n<h1 id=\"Java知识体系\"><a href=\"#Java知识体系\" class=\"headerlink\" title=\"Java知识体系\"></a>Java知识体系</h1><h2 id=\"Java基础知识\"><a href=\"#Java基础知识\" class=\"headerlink\" title=\"Java基础知识\"></a>Java基础知识</h2><ul>\n<li>0001.<a href=\"https://hexo.io/docs/deployment.html\">Java简史</a></li>\n<li>0002.<a href=\"https://hexo.io/docs/deployment.html\">Java特性</a></li>\n<li>0003.<a href=\"https://hexo.io/docs/deployment.html\">Java快速开始</a></li>\n<li>0004.<a href=\"https://hexo.io/docs/deployment.html\">Java基本数据类型</a></li>\n<li>0005.<a href=\"https://hexo.io/docs/deployment.html\">Java运算符</a></li>\n<li>0006.<a href=\"https://hexo.io/docs/deployment.html\">Java基础语法</a></li>\n<li>0007.<a href=\"https://hexo.io/docs/deployment.html\">Java关键字</a></li>\n<li>0008.<a href=\"https://hexo.io/docs/deployment.html\">Java类</a></li>\n<li>0009.<a href=\"https://hexo.io/docs/deployment.html\">Java面向对象</a></li>\n<li>0010.<a href=\"https://hexo.io/docs/deployment.html\">Java接口</a></li>\n<li>0011.<a href=\"https://hexo.io/docs/deployment.html\">Java继承</a></li>\n<li>0012.<a href=\"https://hexo.io/docs/deployment.html\">Java抽象类</a></li>\n<li>0013.<a href=\"https://hexo.io/docs/deployment.html\">Java实现类及多态</a></li>\n<li>0014.<a href=\"https://hexo.io/docs/deployment.html\">Java内部类</a></li>\n</ul>\n<h2 id=\"Java、JDK核心API及源码\"><a href=\"#Java、JDK核心API及源码\" class=\"headerlink\" title=\"Java、JDK核心API及源码\"></a>Java、JDK核心API及源码</h2><ul>\n<li>0001.<a href=\"https://hexo.io/docs/deployment.html\">String</a></li>\n<li>0002.<a href=\"https://hexo.io/docs/deployment.html\">集合</a></li>\n<li>0003.<a href=\"https://hexo.io/docs/deployment.html\">泛型</a></li>\n<li>0003.<a href=\"https://hexo.io/docs/deployment.html\">反射</a></li>\n<li>0004.<a href=\"https://hexo.io/docs/deployment.html\">JUC</a></li>\n<li>0005.<a href=\"https://hexo.io/docs/deployment.html\">Java锁</a></li>\n<li>0006.<a href=\"https://hexo.io/docs/deployment.html\">Java JDBC</a></li>\n</ul>\n<h2 id=\"JVM\"><a href=\"#JVM\" class=\"headerlink\" title=\"JVM\"></a>JVM</h2><ul>\n<li>0001.<a href=\"https://hexo.io/docs/deployment.html\">JVM运行时内存模型</a></li>\n<li>0002.<a href=\"https://hexo.io/docs/deployment.html\">JVM垃圾收集</a></li>\n<li>0003.<a href=\"https://hexo.io/docs/deployment.html\">Java类加载执行机制</a></li>\n</ul>\n<h2 id=\"Java生态相关\"><a href=\"#Java生态相关\" class=\"headerlink\" title=\"Java生态相关\"></a>Java生态相关</h2><ul>\n<li>1.<a href=\"https://hexo.io/docs/deployment.html\">Spring</a></li>\n<li>2.<a href=\"https://hexo.io/docs/deployment.html\">SpringBoot</a></li>\n<li>3.<a href=\"https://hexo.io/docs/deployment.html\">SpringCloud</a></li>\n<li>4.<a href=\"https://hexo.io/docs/deployment.html\">Dubbo</a></li>\n<li>5.<a href=\"https://hexo.io/docs/deployment.html\">Netty</a></li>\n<li>6.<a href=\"https://hexo.io/docs/deployment.html\">Mybatis</a></li>\n<li>7.<a href=\"https://hexo.io/docs/deployment.html\">Hibernate</a></li>\n</ul>\n<h2 id=\"案例\"><a href=\"#案例\" class=\"headerlink\" title=\"案例\"></a>案例</h2><p>小车正穿行在洛基山脉蜿蜒曲折的盘山公路上，克里朵托夫里维静静地看着窗外，发现车子每当行驶到无路的关头，路边都会出现一块交通指示牌：“前方转弯”或写着“注意急转弯”。而转过每一道弯道之后前方照例又是一片柳暗花明、豁然开朗。山路弯弯、峰回路转，“前方转弯”几个大字一次次冲击着他的眼球，也渐渐敲醒了他的心扉。原来不是路已到了尽头，而是该转弯了……路在脚下，更在心中，心随路转，心路常宽。学会转弯也是人生的智慧，因为挫折往往是转折，危机同时是转机。</p>\n<h3 id=\"代码样式\"><a href=\"#代码样式\" class=\"headerlink\" title=\"代码样式\"></a>代码样式</h3><h3 id=\"链接\"><a href=\"#链接\" class=\"headerlink\" title=\"链接\"></a>链接</h3><p>More info: <a href=\"https://hexo.io/docs/deployment.html\">Deployment</a></p>\n"},{"title":"Markdown文档渲染出的代码样式","date":"2018-09-06T02:10:00.000Z","description":"Markdown代码样式","_content":"\n\n# 代码样式\n\n\n\n# Java\n\n```java\npackage com.acanx.thread;\n\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport java.util.concurrent.ExecutionException;\nimport java.util.concurrent.FutureTask;\n\n/**\n * Created by ACANX on 2018/9/3.\n * MultiThread :\n * <p>\n * <p>\n * 1.继承Thread类，重写该类的run()方法。\n * 2.实现Runnable接口，并重写该接口的run()方法，该run()方法同样是线程执行体，\n * 创建Runnable实现类的实例，并以此实例作为Thread类的target来创建Thread对象，\n * 该Thread对象才是真正的线程对象。\n */\npublic class MultiThread {\n\n    private static final Logger logger = LoggerFactory.getLogger(MultiThread.class);\n\n    private WhutStudent whutStudent;\n\n\n    public static void main(String[] args) {\n        Thread.currentThread().setName(\"Main Thread:\");\n        String str = \" 1234566\";\n        logger.debug(\"-------程序启动------------------------\");\n\n        //在类中的写法  继承Thread类\n        Thread threadByThreadInMain = new Thread() {\n            int j = 1;\n            @Override\n            public void run() {\n                Thread.currentThread().setName(\"threadByThreadInMain \");\n                for (int j = 0; j < 100; j++) {\n                    logger.debug(Thread.currentThread().getName() + \" \" + j );\n                    try {\n                        Thread.sleep(100);\n                    } catch (InterruptedException e) {\n                        e.printStackTrace();\n                    }\n                    WhutStudent w=WhutStudent.getInstance();\n                    logger.debug(w.getStudentId()+\" \"+Thread.currentThread().getName());\n                    w.setStudentId(\"StudentID:threadByThreadInMain\"+j);\n\n                }\n            }\n        };\n\n        //在类中的写法 实现Runnable接口\n        Thread threadByRunnableInMain = new Thread(new Runnable() {\n            @Override\n            public void run() {\n                Thread.currentThread().setName(\"threadByRunnableInMain \");\n                logger.debug(\"new Thread 2\");//输出:new Thread 2\n                for (int j = 0; j < 100; j++) {\n                    logger.debug(Thread.currentThread().getName() + \" \" + j + \"   \" );\n                    try {\n                        Thread.sleep(100);\n                    } catch (InterruptedException e) {\n                        e.printStackTrace();\n                    }\n                    WhutStudent w=WhutStudent.getInstance();\n                    logger.debug(w.getStudentId()+\" \"+Thread.currentThread().getName());\n                    w.setStudentId(\"StudentID:threadByRunnableInMain\"+j);\n\n                }\n            }\n        });\n\n        MyThread myThread = new MyThread();\n        myThread.start();\n\n        MyRunnable myRunnable = new MyRunnable();\n        Thread myRunnableThread=new Thread(myRunnable);\n        myRunnableThread.start();\n\n        threadByThreadInMain.start();\n\n\n        threadByRunnableInMain.start();\n\n\n\n        //执行Callable 方式，需要FutureTask 实现实现，用于接收运算结果\n        FutureTask<Integer> futureTask = new FutureTask<Integer>(new MyCallable());\n        new Thread(futureTask).start();\n        //接收线程运算后的结果\n        try {\n            Integer sum = futureTask.get();\n            logger.debug(\"sum=\"+sum);\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        } catch (ExecutionException e) {\n            e.printStackTrace();\n        }\n\n\n    }\n}\n\n\n```\n\n\n\n\n# Python\n\n```python\n# -*- coding: utf-8 -*-\nimport os\nimport sys\nimport urllib2\nimport requests\nimport re\nfrom lxml import etree\n\n\ndef StringListSave(save_path, filename, slist):\n    if not os.path.exists(save_path):\n        os.makedirs(save_path)\n    path = save_path+\"/\"+filename+\".txt\"\n    with open(path, \"w+\") as fp:\n        for s in slist:\n            fp.write(\"%s\\t\\t%s\\n\" % (s[0].encode(\"utf8\"), s[1].encode(\"utf8\")))\n\ndef Page_Info(myPage):\n    '''Regex'''\n    mypage_Info = re.findall(r'<div class=\"titleBar\" id=\".*?\"><h2>(.*?)</h2><div class=\"more\"><a href=\"(.*?)\">.*?</a></div></div>', myPage, re.S)\n    return mypage_Info\n\ndef New_Page_Info(new_page):\n    '''Regex(slowly) or Xpath(fast)'''\n    # new_page_Info = re.findall(r'<td class=\".*?\">.*?<a href=\"(.*?)\\.html\".*?>(.*?)</a></td>', new_page, re.S)\n    # # new_page_Info = re.findall(r'<td class=\".*?\">.*?<a href=\"(.*?)\">(.*?)</a></td>', new_page, re.S) # bugs\n    # results = []\n    # for url, item in new_page_Info:\n    #     results.append((item, url+\".html\"))\n    # return results\n    dom = etree.HTML(new_page)\n    new_items = dom.xpath('//tr/td/a/text()')\n    new_urls = dom.xpath('//tr/td/a/@href')\n    assert(len(new_items) == len(new_urls))\n    return zip(new_items, new_urls)\n\ndef Spider(url):\n    i = 0\n    print \"downloading \", url\n    myPage = requests.get(url).content.decode(\"gbk\")\n    # myPage = urllib2.urlopen(url).read().decode(\"gbk\")\n    myPageResults = Page_Info(myPage)\n    save_path = u\"网易新闻抓取\"\n    filename = str(i)+\"_\"+u\"新闻排行榜\"\n    StringListSave(save_path, filename, myPageResults)\n    i += 1\n    for item, url in myPageResults:\n        print \"downloading \", url\n        new_page = requests.get(url).content.decode(\"gbk\")\n        # new_page = urllib2.urlopen(url).read().decode(\"gbk\")\n        newPageResults = New_Page_Info(new_page)\n        filename = str(i)+\"_\"+item\n        StringListSave(save_path, filename, newPageResults)\n        i += 1\n\n\nif __name__ == '__main__':\n    print \"start\"\n    start_url = \"http://news.163.com/rank/\"\n    Spider(start_url)\n    print \"end\"\n\n```\n\n# PHP\n```php\n<?php\nnamespace PhpOffice\\PhpSpreadsheet;\nuse PhpOffice\\PhpSpreadsheet\\Shared\\File;\n/**\n * Factory to create readers and writers easily.\n *\n * It is not required to use this class, but it should make it easier to read and write files.\n * Especially for reading files with an unknown format.\n */\nabstract class IOFactory\n{\n    private static $readers = [\n        'Xlsx' => Reader\\Xlsx::class,\n        'Xls' => Reader\\Xls::class,\n        'Xml' => Reader\\Xml::class,\n        'Ods' => Reader\\Ods::class,\n        'Slk' => Reader\\Slk::class,\n        'Gnumeric' => Reader\\Gnumeric::class,\n        'Html' => Reader\\Html::class,\n        'Csv' => Reader\\Csv::class,\n    ];\n    private static $writers = [\n        'Xls' => Writer\\Xls::class,\n        'Xlsx' => Writer\\Xlsx::class,\n        'Ods' => Writer\\Ods::class,\n        'Csv' => Writer\\Csv::class,\n        'Html' => Writer\\Html::class,\n        'Tcpdf' => Writer\\Pdf\\Tcpdf::class,\n        'Dompdf' => Writer\\Pdf\\Dompdf::class,\n        'Mpdf' => Writer\\Pdf\\Mpdf::class,\n    ];\n    /**\n     * Create Writer\\IWriter.\n     *\n     * @param Spreadsheet $spreadsheet\n     * @param string $writerType Example: Xlsx\n     *\n     * @throws Writer\\Exception\n     *\n     * @return Writer\\IWriter\n     */\n    public static function createWriter(Spreadsheet $spreadsheet, $writerType)\n    {\n        if (!isset(self::$writers[$writerType])) {\n            throw new Writer\\Exception(\"No writer found for type $writerType\");\n        }\n        // Instantiate writer\n        $className = self::$writers[$writerType];\n        $writer = new $className($spreadsheet);\n        return $writer;\n    }\n    /**\n     * Create Reader\\IReader.\n     *\n     * @param string $readerType Example: Xlsx\n     *\n     * @throws Reader\\Exception\n     *\n     * @return Reader\\IReader\n     */\n    public static function createReader($readerType)\n    {\n        if (!isset(self::$readers[$readerType])) {\n            throw new Reader\\Exception(\"No reader found for type $readerType\");\n        }\n        // Instantiate reader\n        $className = self::$readers[$readerType];\n        $reader = new $className();\n        return $reader;\n    }\n    /**\n     * Loads Spreadsheet from file using automatic Reader\\IReader resolution.\n     *\n     * @param string $pFilename The name of the spreadsheet file\n     *\n     * @throws Reader\\Exception\n     *\n     * @return Spreadsheet\n     */\n    public static function load($pFilename)\n    {\n        $reader = self::createReaderForFile($pFilename);\n        return $reader->load($pFilename);\n    }\n    /**\n     * Identify file type using automatic Reader\\IReader resolution.\n     *\n     * @param string $pFilename The name of the spreadsheet file to identify\n     *\n     * @throws Reader\\Exception\n     *\n     * @return string\n     */\n    public static function identify($pFilename)\n    {\n        $reader = self::createReaderForFile($pFilename);\n        $className = get_class($reader);\n        $classType = explode('\\\\', $className);\n        unset($reader);\n        return array_pop($classType);\n    }\n    /**\n     * Create Reader\\IReader for file using automatic Reader\\IReader resolution.\n     *\n     * @param string $filename The name of the spreadsheet file\n     *\n     * @throws Reader\\Exception\n     *\n     * @return Reader\\IReader\n     */\n    public static function createReaderForFile($filename)\n    {\n        File::assertFile($filename);\n        // First, lucky guess by inspecting file extension\n        $guessedReader = self::getReaderTypeFromExtension($filename);\n        if ($guessedReader !== null) {\n            $reader = self::createReader($guessedReader);\n            // Let's see if we are lucky\n            if (isset($reader) && $reader->canRead($filename)) {\n                return $reader;\n            }\n        }\n        // If we reach here then \"lucky guess\" didn't give any result\n        // Try walking through all the options in self::$autoResolveClasses\n        foreach (self::$readers as $type => $class) {\n            //    Ignore our original guess, we know that won't work\n            if ($type !== $guessedReader) {\n                $reader = self::createReader($type);\n                if ($reader->canRead($filename)) {\n                    return $reader;\n                }\n            }\n        }\n        throw new Reader\\Exception('Unable to identify a reader for this file');\n    }\n    /**\n     * Guess a reader type from the file extension, if any.\n     *\n     * @param string $filename\n     *\n     * @return null|string\n     */\n    private static function getReaderTypeFromExtension($filename)\n    {\n        $pathinfo = pathinfo($filename);\n        if (!isset($pathinfo['extension'])) {\n            return null;\n        }\n        switch (strtolower($pathinfo['extension'])) {\n            case 'xlsx': // Excel (OfficeOpenXML) Spreadsheet\n            case 'xlsm': // Excel (OfficeOpenXML) Macro Spreadsheet (macros will be discarded)\n            case 'xltx': // Excel (OfficeOpenXML) Template\n            case 'xltm': // Excel (OfficeOpenXML) Macro Template (macros will be discarded)\n                return 'Xlsx';\n            case 'xls': // Excel (BIFF) Spreadsheet\n            case 'xlt': // Excel (BIFF) Template\n                return 'Xls';\n            case 'ods': // Open/Libre Offic Calc\n            case 'ots': // Open/Libre Offic Calc Template\n                return 'Ods';\n            case 'slk':\n                return 'Slk';\n            case 'xml': // Excel 2003 SpreadSheetML\n                return 'Xml';\n            case 'gnumeric':\n                return 'Gnumeric';\n            case 'htm':\n            case 'html':\n                return 'Html';\n            case 'csv':\n                // Do nothing\n                // We must not try to use CSV reader since it loads\n                // all files including Excel files etc.\n                return null;\n            default:\n                return null;\n        }\n    }\n    /**\n     * Register a writer with its type and class name.\n     *\n     * @param string $writerType\n     * @param string $writerClass\n     */\n    public static function registerWriter($writerType, $writerClass)\n    {\n        if (!is_a($writerClass, Writer\\IWriter::class, true)) {\n            throw new Writer\\Exception('Registered writers must implement ' . Writer\\IWriter::class);\n        }\n        self::$writers[$writerType] = $writerClass;\n    }\n    /**\n     * Register a reader with its type and class name.\n     *\n     * @param string $readerType\n     * @param string $readerClass\n     */\n    public static function registerReader($readerType, $readerClass)\n    {\n        if (!is_a($readerClass, Reader\\IReader::class, true)) {\n            throw new Reader\\Exception('Registered readers must implement ' . Reader\\IReader::class);\n        }\n        self::$readers[$readerType] = $readerClass;\n    }\n}\n```\n\n\n\n# Go\n```go\npackage list\n\n// Element is an element of a linked list.\ntype Element struct {\n\t// Next and previous pointers in the doubly-linked list of elements.\n\t// To simplify the implementation, internally a list l is implemented\n\t// as a ring, such that &l.root is both the next element of the last\n\t// list element (l.Back()) and the previous element of the first list\n\t// element (l.Front()).\n\tnext, prev *Element\n\n\t// The list to which this element belongs.\n\tlist *List\n\n\t// The value stored with this element.\n\tValue interface{}\n}\n\n// Next returns the next list element or nil.\nfunc (e *Element) Next() *Element {\n\tif p := e.next; e.list != nil && p != &e.list.root {\n\t\treturn p\n\t}\n\treturn nil\n}\n\n// Prev returns the previous list element or nil.\nfunc (e *Element) Prev() *Element {\n\tif p := e.prev; e.list != nil && p != &e.list.root {\n\t\treturn p\n\t}\n\treturn nil\n}\n\n// List represents a doubly linked list.\n// The zero value for List is an empty list ready to use.\ntype List struct {\n\troot Element // sentinel list element, only &root, root.prev, and root.next are used\n\tlen  int     // current list length excluding (this) sentinel element\n}\n\n// Init initializes or clears list l.\nfunc (l *List) Init() *List {\n\tl.root.next = &l.root\n\tl.root.prev = &l.root\n\tl.len = 0\n\treturn l\n}\n\n// New returns an initialized list.\nfunc New() *List { return new(List).Init() }\n\n// Len returns the number of elements of list l.\n// The complexity is O(1).\nfunc (l *List) Len() int { return l.len }\n\n// Front returns the first element of list l or nil if the list is empty.\nfunc (l *List) Front() *Element {\n\tif l.len == 0 {\n\t\treturn nil\n\t}\n\treturn l.root.next\n}\n\n// Back returns the last element of list l or nil if the list is empty.\nfunc (l *List) Back() *Element {\n\tif l.len == 0 {\n\t\treturn nil\n\t}\n\treturn l.root.prev\n}\n\n// lazyInit lazily initializes a zero List value.\nfunc (l *List) lazyInit() {\n\tif l.root.next == nil {\n\t\tl.Init()\n\t}\n}\n\n// insert inserts e after at, increments l.len, and returns e.\nfunc (l *List) insert(e, at *Element) *Element {\n\tn := at.next\n\tat.next = e\n\te.prev = at\n\te.next = n\n\tn.prev = e\n\te.list = l\n\tl.len++\n\treturn e\n}\n\n// insertValue is a convenience wrapper for insert(&Element{Value: v}, at).\nfunc (l *List) insertValue(v interface{}, at *Element) *Element {\n\treturn l.insert(&Element{Value: v}, at)\n}\n\n// remove removes e from its list, decrements l.len, and returns e.\nfunc (l *List) remove(e *Element) *Element {\n\te.prev.next = e.next\n\te.next.prev = e.prev\n\te.next = nil // avoid memory leaks\n\te.prev = nil // avoid memory leaks\n\te.list = nil\n\tl.len--\n\treturn e\n}\n\n// Remove removes e from l if e is an element of list l.\n// It returns the element value e.Value.\n// The element must not be nil.\nfunc (l *List) Remove(e *Element) interface{} {\n\tif e.list == l {\n\t\t// if e.list == l, l must have been initialized when e was inserted\n\t\t// in l or l == nil (e is a zero Element) and l.remove will crash\n\t\tl.remove(e)\n\t}\n\treturn e.Value\n}\n\n// PushFront inserts a new element e with value v at the front of list l and returns e.\nfunc (l *List) PushFront(v interface{}) *Element {\n\tl.lazyInit()\n\treturn l.insertValue(v, &l.root)\n}\n\n// PushBack inserts a new element e with value v at the back of list l and returns e.\nfunc (l *List) PushBack(v interface{}) *Element {\n\tl.lazyInit()\n\treturn l.insertValue(v, l.root.prev)\n}\n\n// InsertBefore inserts a new element e with value v immediately before mark and returns e.\n// If mark is not an element of l, the list is not modified.\n// The mark must not be nil.\nfunc (l *List) InsertBefore(v interface{}, mark *Element) *Element {\n\tif mark.list != l {\n\t\treturn nil\n\t}\n\t// see comment in List.Remove about initialization of l\n\treturn l.insertValue(v, mark.prev)\n}\n\n// InsertAfter inserts a new element e with value v immediately after mark and returns e.\n// If mark is not an element of l, the list is not modified.\n// The mark must not be nil.\nfunc (l *List) InsertAfter(v interface{}, mark *Element) *Element {\n\tif mark.list != l {\n\t\treturn nil\n\t}\n\t// see comment in List.Remove about initialization of l\n\treturn l.insertValue(v, mark)\n}\n\n// MoveToFront moves element e to the front of list l.\n// If e is not an element of l, the list is not modified.\n// The element must not be nil.\nfunc (l *List) MoveToFront(e *Element) {\n\tif e.list != l || l.root.next == e {\n\t\treturn\n\t}\n\t// see comment in List.Remove about initialization of l\n\tl.insert(l.remove(e), &l.root)\n}\n\n// MoveToBack moves element e to the back of list l.\n// If e is not an element of l, the list is not modified.\n// The element must not be nil.\nfunc (l *List) MoveToBack(e *Element) {\n\tif e.list != l || l.root.prev == e {\n\t\treturn\n\t}\n\t// see comment in List.Remove about initialization of l\n\tl.insert(l.remove(e), l.root.prev)\n}\n\n// MoveBefore moves element e to its new position before mark.\n// If e or mark is not an element of l, or e == mark, the list is not modified.\n// The element and mark must not be nil.\nfunc (l *List) MoveBefore(e, mark *Element) {\n\tif e.list != l || e == mark || mark.list != l {\n\t\treturn\n\t}\n\tl.insert(l.remove(e), mark.prev)\n}\n\n// MoveAfter moves element e to its new position after mark.\n// If e or mark is not an element of l, or e == mark, the list is not modified.\n// The element and mark must not be nil.\nfunc (l *List) MoveAfter(e, mark *Element) {\n\tif e.list != l || e == mark || mark.list != l {\n\t\treturn\n\t}\n\tl.insert(l.remove(e), mark)\n}\n\n// PushBackList inserts a copy of an other list at the back of list l.\n// The lists l and other may be the same. They must not be nil.\nfunc (l *List) PushBackList(other *List) {\n\tl.lazyInit()\n\tfor i, e := other.Len(), other.Front(); i > 0; i, e = i-1, e.Next() {\n\t\tl.insertValue(e.Value, l.root.prev)\n\t}\n}\n\n// PushFrontList inserts a copy of an other list at the front of list l.\n// The lists l and other may be the same. They must not be nil.\nfunc (l *List) PushFrontList(other *List) {\n\tl.lazyInit()\n\tfor i, e := other.Len(), other.Back(); i > 0; i, e = i-1, e.Prev() {\n\t\tl.insertValue(e.Value, &l.root)\n\t}\n}\n```\n\n\n# C++\n```c++\n#include <grpc/support/time.h>\n#include <grpcpp/support/config.h>\n#include <grpcpp/support/time.h>\n\nusing std::chrono::duration_cast;\nusing std::chrono::high_resolution_clock;\nusing std::chrono::nanoseconds;\nusing std::chrono::seconds;\nusing std::chrono::system_clock;\n\nnamespace grpc {\n\nvoid Timepoint2Timespec(const system_clock::time_point& from,\n                        gpr_timespec* to) {\n  system_clock::duration deadline = from.time_since_epoch();\n  seconds secs = duration_cast<seconds>(deadline);\n  if (from == system_clock::time_point::max() ||\n      secs.count() >= gpr_inf_future(GPR_CLOCK_REALTIME).tv_sec ||\n      secs.count() < 0) {\n    *to = gpr_inf_future(GPR_CLOCK_REALTIME);\n    return;\n  }\n  nanoseconds nsecs = duration_cast<nanoseconds>(deadline - secs);\n  to->tv_sec = static_cast<int64_t>(secs.count());\n  to->tv_nsec = static_cast<int32_t>(nsecs.count());\n  to->clock_type = GPR_CLOCK_REALTIME;\n}\n\nvoid TimepointHR2Timespec(const high_resolution_clock::time_point& from,\n                          gpr_timespec* to) {\n  high_resolution_clock::duration deadline = from.time_since_epoch();\n  seconds secs = duration_cast<seconds>(deadline);\n  if (from == high_resolution_clock::time_point::max() ||\n      secs.count() >= gpr_inf_future(GPR_CLOCK_REALTIME).tv_sec ||\n      secs.count() < 0) {\n    *to = gpr_inf_future(GPR_CLOCK_REALTIME);\n    return;\n  }\n  nanoseconds nsecs = duration_cast<nanoseconds>(deadline - secs);\n  to->tv_sec = static_cast<int64_t>(secs.count());\n  to->tv_nsec = static_cast<int32_t>(nsecs.count());\n  to->clock_type = GPR_CLOCK_REALTIME;\n}\n\nsystem_clock::time_point Timespec2Timepoint(gpr_timespec t) {\n  if (gpr_time_cmp(t, gpr_inf_future(t.clock_type)) == 0) {\n    return system_clock::time_point::max();\n  }\n  t = gpr_convert_clock_type(t, GPR_CLOCK_REALTIME);\n  system_clock::time_point tp;\n  tp += duration_cast<system_clock::time_point::duration>(seconds(t.tv_sec));\n  tp +=\n      duration_cast<system_clock::time_point::duration>(nanoseconds(t.tv_nsec));\n  return tp;\n}\n\n}  // namespace grpc\n```\n\n\n# C\n```c\n#include <stdio.h>\n#include <stdlib.h>\n#include <time.h>\n\nvoid shellSort(int array[], int value){\n  int i = value;\n  int j, k, tmp;\n  for (i = value / 2; i > 0; i = i / 2){\n    for (j = i; j < value; j++){\n      for(k = j - i; k >= 0; k = k - i){\n        if (array[k+i] >= array[k]){\n          break;\n        }\n        else{\n          tmp = array[k];\n          array[k] = array[k+i];\n          array[k+i] = tmp;\n        }\n      }\n    }\n  }\n}\n\n\nint main(){\n    int array[20];\n    int range = 500;\n    for(int i = 0; i < 100; i++){\n     array[i] = rand() % range + 1;\n    }\n    int size = sizeof array / sizeof array[0];\n\n\n\n    clock_t start = clock();\n    shellSort(array,size);\n    clock_t end = clock();\n    double time_spent = (double)(end - start) / CLOCKS_PER_SEC;\n\n\n    printf(\"Data Sorted\\n\");\n    printf(\"%s\\n\", \"Shell Sort Big O Notation:\\n--> Best Case: O(n log(n))\\n--> Average Case: depends on gap sequence\\n--> Worst Case: O(n)\\n\");\n    printf(\"Time spent sorting: %f\\n\", time_spent);\n\n  return 0;\n}\n```\n\n\n\n# C\\#    #  C#\n```csharp\n#pragma warning disable 1591, 0612, 3021\n#region Designer generated code\n\nusing pb = global::Google.Protobuf;\nusing pbc = global::Google.Protobuf.Collections;\nusing pbr = global::Google.Protobuf.Reflection;\nusing scg = global::System.Collections.Generic;\nnamespace Math {\n\n  /// <summary>Holder for reflection information generated from math/math.proto</summary>\n  public static partial class MathReflection {\n\n    #region Descriptor\n    /// <summary>File descriptor for math/math.proto</summary>\n    public static pbr::FileDescriptor Descriptor {\n      get { return descriptor; }\n    }\n    private static pbr::FileDescriptor descriptor;\n\n    static MathReflection() {\n      byte[] descriptorData = global::System.Convert.FromBase64String(\n          string.Concat(\n            \"Cg9tYXRoL21hdGgucHJvdG8SBG1hdGgiLAoHRGl2QXJncxIQCghkaXZpZGVu\",\n            \"ZBgBIAEoAxIPCgdkaXZpc29yGAIgASgDIi8KCERpdlJlcGx5EhAKCHF1b3Rp\",\n            \"ZW50GAEgASgDEhEKCXJlbWFpbmRlchgCIAEoAyIYCgdGaWJBcmdzEg0KBWxp\",\n            \"bWl0GAEgASgDIhIKA051bRILCgNudW0YASABKAMiGQoIRmliUmVwbHkSDQoF\",\n            \"Y291bnQYASABKAMypAEKBE1hdGgSJgoDRGl2Eg0ubWF0aC5EaXZBcmdzGg4u\",\n            \"bWF0aC5EaXZSZXBseSIAEi4KB0Rpdk1hbnkSDS5tYXRoLkRpdkFyZ3MaDi5t\",\n            \"YXRoLkRpdlJlcGx5IgAoATABEiMKA0ZpYhINLm1hdGguRmliQXJncxoJLm1h\",\n            \"dGguTnVtIgAwARIfCgNTdW0SCS5tYXRoLk51bRoJLm1hdGguTnVtIgAoAWIG\",\n            \"cHJvdG8z\"));\n      descriptor = pbr::FileDescriptor.FromGeneratedCode(descriptorData,\n          new pbr::FileDescriptor[] { },\n          new pbr::GeneratedClrTypeInfo(null, new pbr::GeneratedClrTypeInfo[] {\n            new pbr::GeneratedClrTypeInfo(typeof(global::Math.DivArgs), global::Math.DivArgs.Parser, new[]{ \"Dividend\", \"Divisor\" }, null, null, null),\n            new pbr::GeneratedClrTypeInfo(typeof(global::Math.DivReply), global::Math.DivReply.Parser, new[]{ \"Quotient\", \"Remainder\" }, null, null, null),\n            new pbr::GeneratedClrTypeInfo(typeof(global::Math.FibArgs), global::Math.FibArgs.Parser, new[]{ \"Limit\" }, null, null, null),\n            new pbr::GeneratedClrTypeInfo(typeof(global::Math.Num), global::Math.Num.Parser, new[]{ \"Num_\" }, null, null, null),\n            new pbr::GeneratedClrTypeInfo(typeof(global::Math.FibReply), global::Math.FibReply.Parser, new[]{ \"Count\" }, null, null, null)\n          }));\n    }\n    #endregion\n\n  }\n  #region Messages\n  public sealed partial class DivArgs : pb::IMessage<DivArgs> {\n    private static readonly pb::MessageParser<DivArgs> _parser = new pb::MessageParser<DivArgs>(() => new DivArgs());\n    private pb::UnknownFieldSet _unknownFields;\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public static pb::MessageParser<DivArgs> Parser { get { return _parser; } }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public static pbr::MessageDescriptor Descriptor {\n      get { return global::Math.MathReflection.Descriptor.MessageTypes[0]; }\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    pbr::MessageDescriptor pb::IMessage.Descriptor {\n      get { return Descriptor; }\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public DivArgs() {\n      OnConstruction();\n    }\n\n    partial void OnConstruction();\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public DivArgs(DivArgs other) : this() {\n      dividend_ = other.dividend_;\n      divisor_ = other.divisor_;\n      _unknownFields = pb::UnknownFieldSet.Clone(other._unknownFields);\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public DivArgs Clone() {\n      return new DivArgs(this);\n    }\n\n    /// <summary>Field number for the \"dividend\" field.</summary>\n    public const int DividendFieldNumber = 1;\n    private long dividend_;\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public long Dividend {\n      get { return dividend_; }\n      set {\n        dividend_ = value;\n      }\n    }\n\n    /// <summary>Field number for the \"divisor\" field.</summary>\n    public const int DivisorFieldNumber = 2;\n    private long divisor_;\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public long Divisor {\n      get { return divisor_; }\n      set {\n        divisor_ = value;\n      }\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public override bool Equals(object other) {\n      return Equals(other as DivArgs);\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public bool Equals(DivArgs other) {\n      if (ReferenceEquals(other, null)) {\n        return false;\n      }\n      if (ReferenceEquals(other, this)) {\n        return true;\n      }\n      if (Dividend != other.Dividend) return false;\n      if (Divisor != other.Divisor) return false;\n      return Equals(_unknownFields, other._unknownFields);\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public override int GetHashCode() {\n      int hash = 1;\n      if (Dividend != 0L) hash ^= Dividend.GetHashCode();\n      if (Divisor != 0L) hash ^= Divisor.GetHashCode();\n      if (_unknownFields != null) {\n        hash ^= _unknownFields.GetHashCode();\n      }\n      return hash;\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public override string ToString() {\n      return pb::JsonFormatter.ToDiagnosticString(this);\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public void WriteTo(pb::CodedOutputStream output) {\n      if (Dividend != 0L) {\n        output.WriteRawTag(8);\n        output.WriteInt64(Dividend);\n      }\n      if (Divisor != 0L) {\n        output.WriteRawTag(16);\n        output.WriteInt64(Divisor);\n      }\n      if (_unknownFields != null) {\n        _unknownFields.WriteTo(output);\n      }\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public int CalculateSize() {\n      int size = 0;\n      if (Dividend != 0L) {\n        size += 1 + pb::CodedOutputStream.ComputeInt64Size(Dividend);\n      }\n      if (Divisor != 0L) {\n        size += 1 + pb::CodedOutputStream.ComputeInt64Size(Divisor);\n      }\n      if (_unknownFields != null) {\n        size += _unknownFields.CalculateSize();\n      }\n      return size;\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public void MergeFrom(DivArgs other) {\n      if (other == null) {\n        return;\n      }\n      if (other.Dividend != 0L) {\n        Dividend = other.Dividend;\n      }\n      if (other.Divisor != 0L) {\n        Divisor = other.Divisor;\n      }\n      _unknownFields = pb::UnknownFieldSet.MergeFrom(_unknownFields, other._unknownFields);\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public void MergeFrom(pb::CodedInputStream input) {\n      uint tag;\n      while ((tag = input.ReadTag()) != 0) {\n        switch(tag) {\n          default:\n            _unknownFields = pb::UnknownFieldSet.MergeFieldFrom(_unknownFields, input);\n            break;\n          case 8: {\n            Dividend = input.ReadInt64();\n            break;\n          }\n          case 16: {\n            Divisor = input.ReadInt64();\n            break;\n          }\n        }\n      }\n    }\n\n  }\n\n  public sealed partial class DivReply : pb::IMessage<DivReply> {\n    private static readonly pb::MessageParser<DivReply> _parser = new pb::MessageParser<DivReply>(() => new DivReply());\n    private pb::UnknownFieldSet _unknownFields;\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public static pb::MessageParser<DivReply> Parser { get { return _parser; } }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public static pbr::MessageDescriptor Descriptor {\n      get { return global::Math.MathReflection.Descriptor.MessageTypes[1]; }\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    pbr::MessageDescriptor pb::IMessage.Descriptor {\n      get { return Descriptor; }\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public DivReply() {\n      OnConstruction();\n    }\n\n    partial void OnConstruction();\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public DivReply(DivReply other) : this() {\n      quotient_ = other.quotient_;\n      remainder_ = other.remainder_;\n      _unknownFields = pb::UnknownFieldSet.Clone(other._unknownFields);\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public DivReply Clone() {\n      return new DivReply(this);\n    }\n\n    /// <summary>Field number for the \"quotient\" field.</summary>\n    public const int QuotientFieldNumber = 1;\n    private long quotient_;\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public long Quotient {\n      get { return quotient_; }\n      set {\n        quotient_ = value;\n      }\n    }\n\n    /// <summary>Field number for the \"remainder\" field.</summary>\n    public const int RemainderFieldNumber = 2;\n    private long remainder_;\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public long Remainder {\n      get { return remainder_; }\n      set {\n        remainder_ = value;\n      }\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public override bool Equals(object other) {\n      return Equals(other as DivReply);\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public bool Equals(DivReply other) {\n      if (ReferenceEquals(other, null)) {\n        return false;\n      }\n      if (ReferenceEquals(other, this)) {\n        return true;\n      }\n      if (Quotient != other.Quotient) return false;\n      if (Remainder != other.Remainder) return false;\n      return Equals(_unknownFields, other._unknownFields);\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public override int GetHashCode() {\n      int hash = 1;\n      if (Quotient != 0L) hash ^= Quotient.GetHashCode();\n      if (Remainder != 0L) hash ^= Remainder.GetHashCode();\n      if (_unknownFields != null) {\n        hash ^= _unknownFields.GetHashCode();\n      }\n      return hash;\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public override string ToString() {\n      return pb::JsonFormatter.ToDiagnosticString(this);\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public void WriteTo(pb::CodedOutputStream output) {\n      if (Quotient != 0L) {\n        output.WriteRawTag(8);\n        output.WriteInt64(Quotient);\n      }\n      if (Remainder != 0L) {\n        output.WriteRawTag(16);\n        output.WriteInt64(Remainder);\n      }\n      if (_unknownFields != null) {\n        _unknownFields.WriteTo(output);\n      }\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public int CalculateSize() {\n      int size = 0;\n      if (Quotient != 0L) {\n        size += 1 + pb::CodedOutputStream.ComputeInt64Size(Quotient);\n      }\n      if (Remainder != 0L) {\n        size += 1 + pb::CodedOutputStream.ComputeInt64Size(Remainder);\n      }\n      if (_unknownFields != null) {\n        size += _unknownFields.CalculateSize();\n      }\n      return size;\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public void MergeFrom(DivReply other) {\n      if (other == null) {\n        return;\n      }\n      if (other.Quotient != 0L) {\n        Quotient = other.Quotient;\n      }\n      if (other.Remainder != 0L) {\n        Remainder = other.Remainder;\n      }\n      _unknownFields = pb::UnknownFieldSet.MergeFrom(_unknownFields, other._unknownFields);\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public void MergeFrom(pb::CodedInputStream input) {\n      uint tag;\n      while ((tag = input.ReadTag()) != 0) {\n        switch(tag) {\n          default:\n            _unknownFields = pb::UnknownFieldSet.MergeFieldFrom(_unknownFields, input);\n            break;\n          case 8: {\n            Quotient = input.ReadInt64();\n            break;\n          }\n          case 16: {\n            Remainder = input.ReadInt64();\n            break;\n          }\n        }\n      }\n    }\n\n  }\n\n  public sealed partial class FibArgs : pb::IMessage<FibArgs> {\n    private static readonly pb::MessageParser<FibArgs> _parser = new pb::MessageParser<FibArgs>(() => new FibArgs());\n    private pb::UnknownFieldSet _unknownFields;\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public static pb::MessageParser<FibArgs> Parser { get { return _parser; } }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public static pbr::MessageDescriptor Descriptor {\n      get { return global::Math.MathReflection.Descriptor.MessageTypes[2]; }\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    pbr::MessageDescriptor pb::IMessage.Descriptor {\n      get { return Descriptor; }\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public FibArgs() {\n      OnConstruction();\n    }\n\n    partial void OnConstruction();\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public FibArgs(FibArgs other) : this() {\n      limit_ = other.limit_;\n      _unknownFields = pb::UnknownFieldSet.Clone(other._unknownFields);\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public FibArgs Clone() {\n      return new FibArgs(this);\n    }\n\n    /// <summary>Field number for the \"limit\" field.</summary>\n    public const int LimitFieldNumber = 1;\n    private long limit_;\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public long Limit {\n      get { return limit_; }\n      set {\n        limit_ = value;\n      }\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public override bool Equals(object other) {\n      return Equals(other as FibArgs);\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public bool Equals(FibArgs other) {\n      if (ReferenceEquals(other, null)) {\n        return false;\n      }\n      if (ReferenceEquals(other, this)) {\n        return true;\n      }\n      if (Limit != other.Limit) return false;\n      return Equals(_unknownFields, other._unknownFields);\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public override int GetHashCode() {\n      int hash = 1;\n      if (Limit != 0L) hash ^= Limit.GetHashCode();\n      if (_unknownFields != null) {\n        hash ^= _unknownFields.GetHashCode();\n      }\n      return hash;\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public override string ToString() {\n      return pb::JsonFormatter.ToDiagnosticString(this);\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public void WriteTo(pb::CodedOutputStream output) {\n      if (Limit != 0L) {\n        output.WriteRawTag(8);\n        output.WriteInt64(Limit);\n      }\n      if (_unknownFields != null) {\n        _unknownFields.WriteTo(output);\n      }\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public int CalculateSize() {\n      int size = 0;\n      if (Limit != 0L) {\n        size += 1 + pb::CodedOutputStream.ComputeInt64Size(Limit);\n      }\n      if (_unknownFields != null) {\n        size += _unknownFields.CalculateSize();\n      }\n      return size;\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public void MergeFrom(FibArgs other) {\n      if (other == null) {\n        return;\n      }\n      if (other.Limit != 0L) {\n        Limit = other.Limit;\n      }\n      _unknownFields = pb::UnknownFieldSet.MergeFrom(_unknownFields, other._unknownFields);\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public void MergeFrom(pb::CodedInputStream input) {\n      uint tag;\n      while ((tag = input.ReadTag()) != 0) {\n        switch(tag) {\n          default:\n            _unknownFields = pb::UnknownFieldSet.MergeFieldFrom(_unknownFields, input);\n            break;\n          case 8: {\n            Limit = input.ReadInt64();\n            break;\n          }\n        }\n      }\n    }\n\n  }\n\n  public sealed partial class Num : pb::IMessage<Num> {\n    private static readonly pb::MessageParser<Num> _parser = new pb::MessageParser<Num>(() => new Num());\n    private pb::UnknownFieldSet _unknownFields;\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public static pb::MessageParser<Num> Parser { get { return _parser; } }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public static pbr::MessageDescriptor Descriptor {\n      get { return global::Math.MathReflection.Descriptor.MessageTypes[3]; }\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    pbr::MessageDescriptor pb::IMessage.Descriptor {\n      get { return Descriptor; }\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public Num() {\n      OnConstruction();\n    }\n\n    partial void OnConstruction();\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public Num(Num other) : this() {\n      num_ = other.num_;\n      _unknownFields = pb::UnknownFieldSet.Clone(other._unknownFields);\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public Num Clone() {\n      return new Num(this);\n    }\n\n    /// <summary>Field number for the \"num\" field.</summary>\n    public const int Num_FieldNumber = 1;\n    private long num_;\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public long Num_ {\n      get { return num_; }\n      set {\n        num_ = value;\n      }\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public override bool Equals(object other) {\n      return Equals(other as Num);\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public bool Equals(Num other) {\n      if (ReferenceEquals(other, null)) {\n        return false;\n      }\n      if (ReferenceEquals(other, this)) {\n        return true;\n      }\n      if (Num_ != other.Num_) return false;\n      return Equals(_unknownFields, other._unknownFields);\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public override int GetHashCode() {\n      int hash = 1;\n      if (Num_ != 0L) hash ^= Num_.GetHashCode();\n      if (_unknownFields != null) {\n        hash ^= _unknownFields.GetHashCode();\n      }\n      return hash;\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public override string ToString() {\n      return pb::JsonFormatter.ToDiagnosticString(this);\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public void WriteTo(pb::CodedOutputStream output) {\n      if (Num_ != 0L) {\n        output.WriteRawTag(8);\n        output.WriteInt64(Num_);\n      }\n      if (_unknownFields != null) {\n        _unknownFields.WriteTo(output);\n      }\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public int CalculateSize() {\n      int size = 0;\n      if (Num_ != 0L) {\n        size += 1 + pb::CodedOutputStream.ComputeInt64Size(Num_);\n      }\n      if (_unknownFields != null) {\n        size += _unknownFields.CalculateSize();\n      }\n      return size;\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public void MergeFrom(Num other) {\n      if (other == null) {\n        return;\n      }\n      if (other.Num_ != 0L) {\n        Num_ = other.Num_;\n      }\n      _unknownFields = pb::UnknownFieldSet.MergeFrom(_unknownFields, other._unknownFields);\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public void MergeFrom(pb::CodedInputStream input) {\n      uint tag;\n      while ((tag = input.ReadTag()) != 0) {\n        switch(tag) {\n          default:\n            _unknownFields = pb::UnknownFieldSet.MergeFieldFrom(_unknownFields, input);\n            break;\n          case 8: {\n            Num_ = input.ReadInt64();\n            break;\n          }\n        }\n      }\n    }\n\n  }\n\n  public sealed partial class FibReply : pb::IMessage<FibReply> {\n    private static readonly pb::MessageParser<FibReply> _parser = new pb::MessageParser<FibReply>(() => new FibReply());\n    private pb::UnknownFieldSet _unknownFields;\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public static pb::MessageParser<FibReply> Parser { get { return _parser; } }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public static pbr::MessageDescriptor Descriptor {\n      get { return global::Math.MathReflection.Descriptor.MessageTypes[4]; }\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    pbr::MessageDescriptor pb::IMessage.Descriptor {\n      get { return Descriptor; }\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public FibReply() {\n      OnConstruction();\n    }\n\n    partial void OnConstruction();\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public FibReply(FibReply other) : this() {\n      count_ = other.count_;\n      _unknownFields = pb::UnknownFieldSet.Clone(other._unknownFields);\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public FibReply Clone() {\n      return new FibReply(this);\n    }\n\n    /// <summary>Field number for the \"count\" field.</summary>\n    public const int CountFieldNumber = 1;\n    private long count_;\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public long Count {\n      get { return count_; }\n      set {\n        count_ = value;\n      }\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public override bool Equals(object other) {\n      return Equals(other as FibReply);\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public bool Equals(FibReply other) {\n      if (ReferenceEquals(other, null)) {\n        return false;\n      }\n      if (ReferenceEquals(other, this)) {\n        return true;\n      }\n      if (Count != other.Count) return false;\n      return Equals(_unknownFields, other._unknownFields);\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public override int GetHashCode() {\n      int hash = 1;\n      if (Count != 0L) hash ^= Count.GetHashCode();\n      if (_unknownFields != null) {\n        hash ^= _unknownFields.GetHashCode();\n      }\n      return hash;\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public override string ToString() {\n      return pb::JsonFormatter.ToDiagnosticString(this);\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public void WriteTo(pb::CodedOutputStream output) {\n      if (Count != 0L) {\n        output.WriteRawTag(8);\n        output.WriteInt64(Count);\n      }\n      if (_unknownFields != null) {\n        _unknownFields.WriteTo(output);\n      }\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public int CalculateSize() {\n      int size = 0;\n      if (Count != 0L) {\n        size += 1 + pb::CodedOutputStream.ComputeInt64Size(Count);\n      }\n      if (_unknownFields != null) {\n        size += _unknownFields.CalculateSize();\n      }\n      return size;\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public void MergeFrom(FibReply other) {\n      if (other == null) {\n        return;\n      }\n      if (other.Count != 0L) {\n        Count = other.Count;\n      }\n      _unknownFields = pb::UnknownFieldSet.MergeFrom(_unknownFields, other._unknownFields);\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public void MergeFrom(pb::CodedInputStream input) {\n      uint tag;\n      while ((tag = input.ReadTag()) != 0) {\n        switch(tag) {\n          default:\n            _unknownFields = pb::UnknownFieldSet.MergeFieldFrom(_unknownFields, input);\n            break;\n          case 8: {\n            Count = input.ReadInt64();\n            break;\n          }\n        }\n      }\n    }\n\n  }\n\n  #endregion\n}\n#endregion Designer generated code\n```\n\n\n# Kotlin\n```kotlin\npackage liang.cxx.rommel.evaluationbar\n\nimport android.content.Context\nimport android.graphics.*\nimport android.util.AttributeSet\nimport android.view.MotionEvent\nimport android.view.View\n\n/**\n * Created by Rommel on 2017/12/1.\n */\n\nclass EvaluationProgressBar : View {\n    private var m_density: Float = 0.0f//dp\n    private var img_height: Int = 30//滑块和进度条高度(默认三十)\n    private var m_content: Context? = null\n    //滑块样式\n    private var slider: Bitmap? = null\n    private var m_laughing: Bitmap? = null\n    private var m_satisfactiong: Bitmap? = null\n    private var m_sad: Bitmap? = null\n    //滑块位置\n    var image_postion: Float = 0.0f\n    private //滑块宽度\n    var image_weight: Float = 0.0f\n    private //控件的宽和高\n    var m_weight: Float = 0.0f\n    private var m_height: Float = 0.0f\n    private //每段的长度\n    var m_cell: Float = 0.0f\n    private //是否为第一次加载\n    var is_first = true\n    //画笔\n    private var m_color_back: Paint? = null\n    private var m_color_back_line: Paint? = null\n    private var m_color_back_diver_one: Paint? = null\n    private var m_color_back_diver_two: Paint? = null\n    private var m_color_back_wall: Paint? = null\n    private var back_line = \"#C7C7C7\"\n    private var back_sad = \"#CECECE\"//差评背景\n    private var back_satisfactiong = \"#FFEAB0\"//中评背景\n    private var back_satisfactiong_line = \"#FFD68C\"//中评线框\n    private var back_laughing = \"#FFBBBB\"//好评背景\n    private var back_laughing_line = \"#FF9F9F\"//好评背景\n    private var back_baseground = \"#F8F8F8\"//好评背景\n    private var back_satisfactiong_diver = \"#FFD68C\"//中评分割线\n    private var back_laughing_diver = \"#FF9F9F\"//好评分割线\n    //触摸和滑动是否在滑块上\n    private var is_touch_scope = false\n\n    //滑动监听事件\n    private var volChangeListener: VolChangeListener? = null\n    private var vol = 2\n\n    constructor(context: Context) : super(context) {\n        init(context)\n    }\n\n    constructor(context: Context, attrs: AttributeSet?) : super(context, attrs) {\n        init(context)\n    }\n\n    constructor(context: Context, attrs: AttributeSet?, defStyleAttr: Int) : super(context, attrs, defStyleAttr) {\n        init(context)\n    }\n\n    private fun init(context: Context) {\n        m_density = context.resources.displayMetrics.density\n        m_laughing = zoomImg(BitmapFactory.decodeResource(resources, R.mipmap.icon_laughing))\n        m_satisfactiong = zoomImg(BitmapFactory.decodeResource(resources, R.mipmap.icon_satisfaction))\n        m_sad = zoomImg(BitmapFactory.decodeResource(resources, R.mipmap.icon_sad))\n        image_weight = m_laughing!!.width.toFloat()\n        m_content = context\n        m_height = (m_laughing!!.height + 1).toFloat()\n        //画笔初始化\n        m_color_back = Paint()\n        m_color_back_line = Paint()\n        m_color_back_line!!.style = Paint.Style.STROKE\n        m_color_back_line!!.isAntiAlias = true\n        m_color_back_line!!.strokeMiter = 1.0f\n        m_color_back_diver_one = Paint()\n        m_color_back_diver_two = Paint()\n        m_color_back_diver_one!!.strokeMiter = 1.0F\n        m_color_back_diver_two!!.strokeMiter = 1.0F\n        m_color_back_wall = Paint()\n        m_color_back_wall!!.color = Color.parseColor(back_line)\n        m_color_back_wall!!.style = Paint.Style.STROKE\n        m_color_back_wall!!.isAntiAlias = true\n        m_color_back_wall!!.strokeWidth = 1.0f\n    }\n\n    override fun onDraw(canvas: Canvas) {\n        super.onDraw(canvas)\n        canvas.drawFilter = PaintFlagsDrawFilter(0, Paint.ANTI_ALIAS_FLAG or Paint.FILTER_BITMAP_FLAG)\n        image_postion = if (image_postion < image_weight / 2) image_weight / 2 else image_postion\n        image_postion = if (image_postion > m_weight - image_weight / 2) m_weight - image_weight / 2 else image_postion\n        if (image_postion <= m_cell) {\n            //差评\n            slider = m_sad\n            m_color_back!!.color = Color.parseColor(back_sad)\n            m_color_back_line!!.color = Color.parseColor(back_line)\n        } else if (image_postion > m_cell && image_postion <= m_cell * 2) {\n            //中评\n            slider = m_satisfactiong\n            m_color_back!!.color = Color.parseColor(back_satisfactiong)\n            m_color_back_line!!.color = Color.parseColor(back_satisfactiong_line)\n        } else if (image_postion > m_cell * 2) {\n            //好评\n            slider = m_laughing\n            m_color_back!!.color = Color.parseColor(back_laughing)\n            m_color_back_line!!.color = Color.parseColor(back_laughing_line)\n        }\n        drawWall(canvas)\n        drawBckground(canvas)\n        drawDiverLine(canvas)\n        drawImage(canvas)\n    }\n\n    //绘制最外层线和整体背景\n    fun drawWall(canvas: Canvas) {\n        //外边框\n        var rectf = RectF(2f, 0f, m_weight, m_height)\n        canvas.drawRoundRect(rectf, m_height / 2, m_height / 2, m_color_back_wall)\n        //基础背景\n        var back_base = RectF(3f, 1f, m_weight - 1, m_height - 1)\n        var back_base_color = Paint()\n        back_base_color.color = Color.parseColor(back_baseground)\n        canvas.drawRoundRect(back_base, m_height / 2, m_height / 2, back_base_color)\n    }\n\n    //绘制进度颜色\n    fun drawBckground(canvas: Canvas) {\n        var rectf = RectF(2f, 1f, image_postion + image_weight / 2 - 1, m_height - 1)\n        canvas.drawRoundRect(rectf, m_height / 2, m_height / 2, m_color_back)\n    }\n\n    //根据滑块位置改变边框和分割线颜色\n    fun drawDiverLine(canvas: Canvas) {\n        //根据滑块位置改变外层边框颜色\n        var rectF = RectF(2f, 0f, image_postion + image_weight / 2, m_height)\n        canvas.drawRoundRect(rectF, m_height / 2, m_height / 2, m_color_back_line)\n        if (image_postion <= m_cell) {\n            //差评\n            m_color_back_diver_one!!.color = Color.parseColor(back_line)\n            canvas.drawLine(m_weight / 3, 0f, m_weight / 3, m_height, m_color_back_diver_one)\n            m_color_back_diver_two!!.color = Color.parseColor(back_line)\n            canvas.drawLine(m_weight * 2 / 3, 0f, m_weight * 2 / 3, m_height, m_color_back_diver_two)\n        } else if (image_postion > m_cell && image_postion <= m_cell * 2) {\n            //中评\n            m_color_back_diver_one!!.color = Color.parseColor(back_satisfactiong_diver)\n            canvas.drawLine(m_weight / 3, 0f, m_weight / 3, m_height, m_color_back_diver_one)\n            m_color_back_diver_two!!.color = Color.parseColor(back_line)\n            canvas.drawLine(m_weight * 2 / 3, 0f, m_weight * 2 / 3, m_height, m_color_back_diver_two)\n        } else if (image_postion > m_cell * 2) {\n            //好评\n            m_color_back_diver_one!!.color = Color.parseColor(back_laughing_diver)\n            canvas.drawLine(m_weight / 3, 0f, m_weight / 3, m_height, m_color_back_diver_one)\n            m_color_back_diver_two!!.color = Color.parseColor(back_laughing_diver)\n            canvas.drawLine(m_weight * 2 / 3, 0f, m_weight * 2 / 3, m_height, m_color_back_diver_two)\n        }\n    }\n\n    //绘制滑块\n    fun drawImage(canvas: Canvas) {\n        canvas.drawBitmap(slider, image_postion - image_weight / 2 - 2, 1f, Paint())\n    }\n\n    override fun onLayout(changed: Boolean, left: Int, top: Int, right: Int, bottom: Int) {\n        super.onLayout(changed, left, top, right, bottom)\n        m_weight = (width - 2).toFloat()\n        m_cell = m_weight / 3\n        if (is_first) {\n            //首次加载默认值\n            image_postion = m_weight * 2 / 3\n            is_first = false\n        }\n\n    }\n\n    override fun onMeasure(widthMeasureSpec: Int, heightMeasureSpec: Int) {\n        super.onMeasure(widthMeasureSpec, heightMeasureSpec)\n        var width = getSize((200 * m_density).toInt(), widthMeasureSpec)\n        var height = getSize(m_laughing!!.width + 1, heightMeasureSpec)\n        setMeasuredDimension(width, height)\n    }\n\n    private fun getSize(defaultSize: Int, measureSpec: Int): Int {\n        var m_size = defaultSize\n        var mode = View.MeasureSpec.getMode(measureSpec)\n        var size = MeasureSpec.getSize(measureSpec)\n        when (mode) {\n            MeasureSpec.AT_MOST -> {\n                //当前尺寸是当前View能取的最大尺寸-wrap_content\n                m_size = defaultSize\n            }\n            MeasureSpec.EXACTLY -> {\n                //当前的尺寸就是当前View应该取的尺寸-match_parent\n                m_size = size\n            }\n            MeasureSpec.UNSPECIFIED -> {\n                //父容器没有对当前View有任何限制，当前View可以任意取尺寸-固定尺寸（如100dp\n                m_size = size\n            }\n        }\n        return m_size\n    }\n\n    override fun onTouchEvent(event: MotionEvent): Boolean {\n        var x_postion = event.x\n        when (event.action) {\n            MotionEvent.ACTION_DOWN -> {\n                if (x_postion > image_postion - image_weight / 2\n                        && x < image_postion + image_weight / 2) {\n                    //触摸事件在滑块上\n                    image_postion = x_postion\n                    is_touch_scope = true\n                } else {\n                    //触摸事件不在滑块上\n                    image_postion = x_postion\n                    setImgPostion()\n                    invalidate()\n                    onChange()\n                    return false\n                }\n            }\n            MotionEvent.ACTION_MOVE -> {\n                if (is_touch_scope) {\n                    image_postion = x_postion\n                    invalidate()\n                    onChange()\n                }\n            }\n            MotionEvent.ACTION_UP -> {\n                if (is_touch_scope) {\n                    is_touch_scope = false\n                    setImgPostion()\n                }\n            }\n            MotionEvent.ACTION_CANCEL -> {\n                if (is_touch_scope) {\n                    is_touch_scope = false\n                    setImgPostion()\n                }\n            }\n        }\n        return true\n    }\n\n    private fun setImgPostion() {\n        //松手后滑块走到指定的位置\n        if (image_postion <= m_cell) {\n            //差评\n            image_postion = m_cell\n        } else if (image_postion > m_cell && image_postion <= m_cell * 2) {\n            //中评\n            image_postion = m_cell * 2\n        } else if (image_postion > m_cell * 2) {\n            //好评\n            image_postion = m_cell * 3\n        }\n        invalidate()\n        onChange()\n    }\n\n    //滑块位置变化监听\n    fun onChange() {\n        if (volChangeListener != null) {\n            if (image_postion <= m_cell) {\n                vol = 1\n            } else if (image_postion > m_cell && image_postion <= 2 * m_cell) {\n                vol = 2\n            } else if (image_postion > 2 * m_cell) {\n                vol = 3\n            }\n            volChangeListener!!.onVolChange(vol)\n        }\n    }\n\n    private fun zoomImg(btm: Bitmap): Bitmap {\n        //获取图片宽高\n        var width = btm.width\n        var height = btm.height\n        //计算缩放比例\n        var scaleWidth = (img_height * m_density) / width\n        var scaleHeight = (img_height * m_density) / height\n        //获取Matrix参数\n        var matrix = Matrix()\n        matrix.postScale(scaleWidth, scaleHeight)\n        //返回新的图片\n        return Bitmap.createBitmap(btm, 0, 0, width, height, matrix, true)\n    }\n\n    interface VolChangeListener {\n        fun onVolChange(vol: Int)\n    }\n\n    fun volVhangeListener(volChangeListener :VolChangeListener) {\n        this.volChangeListener = volChangeListener\n    }\n}\n```\n\n\n# HTML\n```html\n<xmp>\n<!DOCTYPE html>\n<html lang=\"zh\">\n<head>\n    <meta charset=\"UTF-8\">\n\t<meta name=\"viewport\" content=\"width=device-width, \n                                 initial-scale=1.0, \n                                 maximum-scale=1.0, \n                                 user-scalable=no\">\n\t\n\t<link rel=\"stylesheet\" href=\"http://cdn.staticfile.org/twitter-bootstrap/3.3.6/css/bootstrap.min.css\">\n\t<link rel=\"stylesheet\" href=\"http://cdn.staticfile.org/twitter-bootstrap/3.3.6/css/bootstrap-theme.min.css\">\n\t<script src=\"http://cdn.staticfile.org/jquery/2.1.4/jquery.min.js\"></script>\n\t<script src=\"http://cdn.staticfile.org/twitter-bootstrap/3.3.6/js/bootstrap.min.js\"></script>\n\n\t<title>测试一下bootstrap</title>\n</head>\n<body>\n<div class=\"container\">\n<ol class=\"breadcrumb\">\n  <li><a href=\"#\">主页</a></li>\n  <li><a href=\"#\">新闻资讯</a></li>\n  <li class=\"active\">新闻正文</li>\n</ol>\n<div class=\"page-header\">\n  <h1>这是新闻的标题\n  <br><small></small></h1>\n</div>\n\t<div class=\"sstarter-template\">\n\t\t<p class=\"lead\">Use this dow project.<br> All yoy barebones HTML document.</p>\n\t\t<p>Google（中文名：谷歌），是一家美国的跨国科技企业，致力于互联网搜索、云计算、广告技术等领域，开发并提供大量基于互联网的产品与服务，其主要利润来自于AdWords等广告服务。Google由当时在斯坦福大学攻读理工博士的拉里·佩奇和谢尔盖·布卢姆共同创建，因此两人也被称为“Google Guys”。</p>\n\t\t<p class=\"lead\">这一段的内容<strong>突出</strong>显示看看效果</p>\n\t\t<address>\n  <strong>Twitter, Inc.</strong><br>\n  795 Folsom Ave, Suite 600<br>\n  San Francisco, CA 94107<br>\n  <abbr title=\"Phone\">P:</abbr> (123) 456-7890\n</address>\n\n<table class=\"table table-striped\">\n      <thead>\n        <tr>\n          <th>#</th>\n          <th>First Name</th>\n          <th>Last Name</th>\n          <th>Username</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr>\n          <th scope=\"row\">1</th>\n          <td>Mark</td>\n          <td>Otto</td>\n          <td>@mdo</td>\n        </tr>\n        <tr>\n          <th scope=\"row\">2</th>\n          <td>Jacob</td>\n          <td>Thornton</td>\n          <td>@fat</td>\n        </tr>\n        <tr>\n          <th scope=\"row\">3</th>\n          <td>Larry</td>\n          <td>the Bird</td>\n          <td>@twitter</td>\n        </tr>\n      </tbody>\n    </table>\n\t</div>\n\t<div class=\"progress\">\n  <div class=\"progress-bar progress-bar-danger progress-bar-striped active\" role=\"progressbar\" aria-valuenow=\"45\" aria-valuemin=\"0\" aria-valuemax=\"100\" style=\"width: 80%\">\n    <span class=\"sr-only\">45% Complete</span>\n  </div>\n</div>\n\t<nav>\n  <ul class=\"pager\">\n    <li><a href=\"#\"><span class=\"glyphicon glyphicon-chevron-left\" aria-hidden=\"true\"></span>前一篇新闻</a></li>\n    <li><a href=\"#\">后一篇新闻<span class=\"glyphicon glyphicon-chevron-right\" aria-hidden=\"true\"></span></a></li>\n  </ul>\n</nav>\n\t<button class=\"btn btn-danger btn-block btn-lg btn-primary\" type=\"button\">退出登录</button>\n</div>\n</body>\n</html>\n<xmp>\n```\n\n# CSS\n```css\n.top{background-color: gray;\n    font-size: 14px; \n      \n}\n.top p{display: inline-block;\n line-height: 20px;\n color:white;\n margin: auto;\n overflow: hidden;\n}\n.top P:nth-child(1){margin-left: 10%;\n}\n.top P:nth-child(2){margin-left: 50%;\n}\n.top P:nth-child(3){margin-left: 5%;\n}\n\n.header img{\n  float: left;\n  margin-left: 8%;\t\n}\n\n.nav-tabs {\n  border-bottom: 0px solid #ddd;\n  height: 82px;\n  margin-top: 20px;\n  \n \n}\n.nav-tabs > li {\n  float: left;\n  margin-top: 20px;\n  font-size: 18px;\n  margin-left: 20px;\n  \n  \n  \n}\n.nav-tabs > li > a {\n  margin-right: 30px;\n  line-height: 1.42857143;\n  border: 0px solid transparent;\n  border-radius: 4px 4px 0 0;\n}\n.nav-tabs > li > a:hover {\n  border-color: #eee #eee #ddd;\n}\n.nav-tabs > li.active > a,\n.nav-tabs > li.active > a:hover,\n.nav-tabs > li.active > a:focus {\n  color: #555;\n  cursor: default;\n  background-color: #fff;\n  border: 1px solid #ddd;\n  border-bottom-color: transparent;\n}\n\n\n.banner img{\n\twidth: 100%;\n}\n\n.xiaotu{text-align: center;\n        padding-left: 50px; \n        float: left;\t\t\n}\n\n.survey{background-color: gray;\n       font-size: 14px;\n       height: 60px;\n       position: relative;\n      \n      \n}\n.survey p{display:inline-block;\n color: white;\n margin: 20px auto;\n overflow: hidden;\n\n}\n.survey P:nth-child(1){margin-left: 10%;\n}\n.survey P:nth-child(2){margin-left: 1%;\n}\n\n\n#nav{padding: 0;\n    margin-left: 40%;\n    position:absolute;\n    display: inline-block;\n}\n#nav ul{list-style-type: none; }\n#nav ul li{float: left;}\n#nav ul li a{text-align: center; \npadding:20px; \ndisplay:block; \ntext-decoration:none; \ncolor:white;\nline-height: 20px; \n}\n#nav ul li a:hover{\n\tbackground-color:white;\n    color:#31B0D5;\n}\n.Introduced{text-align: center;\n           margin-top: 50px;}\n\n.Introduced p{\n   max-width: 900px;\n   margin: 30px auto;\t\n   text-align: left;\n}\n\n\n```\n\n# Javascript\n```javascript\n'use strict';\n\nvar defaults = require('../core/core.defaults');\nvar Element = require('../core/core.element');\nvar helpers = require('../helpers/index');\nvar layouts = require('../core/core.layouts');\n\nvar noop = helpers.noop;\n\ndefaults._set('global', {\n\ttitle: {\n\t\tdisplay: false,\n\t\tfontStyle: 'bold',\n\t\tfullWidth: true,\n\t\tlineHeight: 1.2,\n\t\tpadding: 10,\n\t\tposition: 'top',\n\t\ttext: '',\n\t\tweight: 2000         // by default greater than legend (1000) to be above\n\t}\n});\n\n/**\n * IMPORTANT: this class is exposed publicly as Chart.Legend, backward compatibility required!\n */\nvar Title = Element.extend({\n\tinitialize: function(config) {\n\t\tvar me = this;\n\t\thelpers.extend(me, config);\n\n\t\t// Contains hit boxes for each dataset (in dataset order)\n\t\tme.legendHitBoxes = [];\n\t},\n\n\t// These methods are ordered by lifecycle. Utilities then follow.\n\n\tbeforeUpdate: noop,\n\tupdate: function(maxWidth, maxHeight, margins) {\n\t\tvar me = this;\n\n\t\t// Update Lifecycle - Probably don't want to ever extend or overwrite this function ;)\n\t\tme.beforeUpdate();\n\n\t\t// Absorb the master measurements\n\t\tme.maxWidth = maxWidth;\n\t\tme.maxHeight = maxHeight;\n\t\tme.margins = margins;\n\n\t\t// Dimensions\n\t\tme.beforeSetDimensions();\n\t\tme.setDimensions();\n\t\tme.afterSetDimensions();\n\t\t// Labels\n\t\tme.beforeBuildLabels();\n\t\tme.buildLabels();\n\t\tme.afterBuildLabels();\n\n\t\t// Fit\n\t\tme.beforeFit();\n\t\tme.fit();\n\t\tme.afterFit();\n\t\t//\n\t\tme.afterUpdate();\n\t\treturn me.minSize;\n\n\t},\n\tafterUpdate: noop,\n\n\t//\n\n\tbeforeSetDimensions: noop,\n\tsetDimensions: function() {\n\t\tvar me = this;\n\t\t// Set the unconstrained dimension before label rotation\n\t\tif (me.isHorizontal()) {\n\t\t\t// Reset position before calculating rotation\n\t\t\tme.width = me.maxWidth;\n\t\t\tme.left = 0;\n\t\t\tme.right = me.width;\n\t\t} else {\n\t\t\tme.height = me.maxHeight;\n\n\t\t\t// Reset position before calculating rotation\n\t\t\tme.top = 0;\n\t\t\tme.bottom = me.height;\n\t\t}\n\n\t\t// Reset padding\n\t\tme.paddingLeft = 0;\n\t\tme.paddingTop = 0;\n\t\tme.paddingRight = 0;\n\t\tme.paddingBottom = 0;\n\n\t\t// Reset minSize\n\t\tme.minSize = {\n\t\t\twidth: 0,\n\t\t\theight: 0\n\t\t};\n\t},\n\tafterSetDimensions: noop,\n\n\t//\n\n\tbeforeBuildLabels: noop,\n\tbuildLabels: noop,\n\tafterBuildLabels: noop,\n\n\t//\n\n\tbeforeFit: noop,\n\tfit: function() {\n\t\tvar me = this;\n\t\tvar valueOrDefault = helpers.valueOrDefault;\n\t\tvar opts = me.options;\n\t\tvar display = opts.display;\n\t\tvar fontSize = valueOrDefault(opts.fontSize, defaults.global.defaultFontSize);\n\t\tvar minSize = me.minSize;\n\t\tvar lineCount = helpers.isArray(opts.text) ? opts.text.length : 1;\n\t\tvar lineHeight = helpers.options.toLineHeight(opts.lineHeight, fontSize);\n\t\tvar textSize = display ? (lineCount * lineHeight) + (opts.padding * 2) : 0;\n\n\t\tif (me.isHorizontal()) {\n\t\t\tminSize.width = me.maxWidth; // fill all the width\n\t\t\tminSize.height = textSize;\n\t\t} else {\n\t\t\tminSize.width = textSize;\n\t\t\tminSize.height = me.maxHeight; // fill all the height\n\t\t}\n\n\t\tme.width = minSize.width;\n\t\tme.height = minSize.height;\n\n\t},\n\tafterFit: noop,\n\n\t// Shared Methods\n\tisHorizontal: function() {\n\t\tvar pos = this.options.position;\n\t\treturn pos === 'top' || pos === 'bottom';\n\t},\n\n\t// Actually draw the title block on the canvas\n\tdraw: function() {\n\t\tvar me = this;\n\t\tvar ctx = me.ctx;\n\t\tvar valueOrDefault = helpers.valueOrDefault;\n\t\tvar opts = me.options;\n\t\tvar globalDefaults = defaults.global;\n\n\t\tif (opts.display) {\n\t\t\tvar fontSize = valueOrDefault(opts.fontSize, globalDefaults.defaultFontSize);\n\t\t\tvar fontStyle = valueOrDefault(opts.fontStyle, globalDefaults.defaultFontStyle);\n\t\t\tvar fontFamily = valueOrDefault(opts.fontFamily, globalDefaults.defaultFontFamily);\n\t\t\tvar titleFont = helpers.fontString(fontSize, fontStyle, fontFamily);\n\t\t\tvar lineHeight = helpers.options.toLineHeight(opts.lineHeight, fontSize);\n\t\t\tvar offset = lineHeight / 2 + opts.padding;\n\t\t\tvar rotation = 0;\n\t\t\tvar top = me.top;\n\t\t\tvar left = me.left;\n\t\t\tvar bottom = me.bottom;\n\t\t\tvar right = me.right;\n\t\t\tvar maxWidth, titleX, titleY;\n\n\t\t\tctx.fillStyle = valueOrDefault(opts.fontColor, globalDefaults.defaultFontColor); // render in correct colour\n\t\t\tctx.font = titleFont;\n\n\t\t\t// Horizontal\n\t\t\tif (me.isHorizontal()) {\n\t\t\t\ttitleX = left + ((right - left) / 2); // midpoint of the width\n\t\t\t\ttitleY = top + offset;\n\t\t\t\tmaxWidth = right - left;\n\t\t\t} else {\n\t\t\t\ttitleX = opts.position === 'left' ? left + offset : right - offset;\n\t\t\t\ttitleY = top + ((bottom - top) / 2);\n\t\t\t\tmaxWidth = bottom - top;\n\t\t\t\trotation = Math.PI * (opts.position === 'left' ? -0.5 : 0.5);\n\t\t\t}\n\n\t\t\tctx.save();\n\t\t\tctx.translate(titleX, titleY);\n\t\t\tctx.rotate(rotation);\n\t\t\tctx.textAlign = 'center';\n\t\t\tctx.textBaseline = 'middle';\n\n\t\t\tvar text = opts.text;\n\t\t\tif (helpers.isArray(text)) {\n\t\t\t\tvar y = 0;\n\t\t\t\tfor (var i = 0; i < text.length; ++i) {\n\t\t\t\t\tctx.fillText(text[i], 0, y, maxWidth);\n\t\t\t\t\ty += lineHeight;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tctx.fillText(text, 0, 0, maxWidth);\n\t\t\t}\n\n\t\t\tctx.restore();\n\t\t}\n\t}\n});\n\nfunction createNewTitleBlockAndAttach(chart, titleOpts) {\n\tvar title = new Title({\n\t\tctx: chart.ctx,\n\t\toptions: titleOpts,\n\t\tchart: chart\n\t});\n\n\tlayouts.configure(chart, title, titleOpts);\n\tlayouts.addBox(chart, title);\n\tchart.titleBlock = title;\n}\n\nmodule.exports = {\n\tid: 'title',\n\n\t/**\n\t * Backward compatibility: since 2.1.5, the title is registered as a plugin, making\n\t * Chart.Title obsolete. To avoid a breaking change, we export the Title as part of\n\t * the plugin, which one will be re-exposed in the chart.js file.\n\t * https://github.com/chartjs/Chart.js/pull/2640\n\t * @private\n\t */\n\t_element: Title,\n\n\tbeforeInit: function(chart) {\n\t\tvar titleOpts = chart.options.title;\n\n\t\tif (titleOpts) {\n\t\t\tcreateNewTitleBlockAndAttach(chart, titleOpts);\n\t\t}\n\t},\n\n\tbeforeUpdate: function(chart) {\n\t\tvar titleOpts = chart.options.title;\n\t\tvar titleBlock = chart.titleBlock;\n\n\t\tif (titleOpts) {\n\t\t\thelpers.mergeIf(titleOpts, defaults.global.title);\n\n\t\t\tif (titleBlock) {\n\t\t\t\tlayouts.configure(chart, titleBlock, titleOpts);\n\t\t\t\ttitleBlock.options = titleOpts;\n\t\t\t} else {\n\t\t\t\tcreateNewTitleBlockAndAttach(chart, titleOpts);\n\t\t\t}\n\t\t} else if (titleBlock) {\n\t\t\tlayouts.removeBox(chart, titleBlock);\n\t\t\tdelete chart.titleBlock;\n\t\t}\n\t}\n};\n```\n\n\n# JSON\n\n```json\n{\n    \"version\": \"0.2.0\",\n    \"configurations\": [\n        {\n            \"name\": \"(gdb) Launch\", \n            \"type\": \"cppdbg\",\n            \"request\": \"launch\", \n            \"program\": \"${fileDirname}/${fileBasenameNoExtension}.exe\", \n            \"stopAtEntry\": false, \n            \"cwd\": \"${workspaceRoot}\",\n            \"externalConsole\": true, \n            \"linux\": {\n                \"MIMode\": \"gdb\"\n            },\n            \"osx\": {\n                \"MIMode\": \"lldb\"\n            },\n            \"windows\": { \n                \"MIMode\": \"gdb\",\n                \"miDebuggerPath\": \"gdb.exe\"\n            }\n        }\n    ]\n}\n\n```\n\n# SQL\n\n```sql\n SELECT Company, OrderNumber FROM Orders ORDER BY Company DESC, OrderNumber ASC\n update whut_student SET grade=2017 where id>1003740\n update whut_student SET id=id+1 where id>0\n select COUNT(student_id) from whut_student\n\n select * from whut_student\n where student_id in (select  student_id  from  whut_student  group  by  student_id  having  count(student_id) > 1)\n\n delete from whut_student where id<=137\n UPDATE whut_student SET DEGREE=\"硕士\" WHERE id>0;\n\n SELECT * from whut_student where student_id=1049731702891;\n\n DELETE FROM whut_student WHERE id=1008281\n\n SELECT COUNT(*)  num,student_id FROM whut_student GROUP BY student_id ORDER BY num DESC ;\n```\n\n# Properties\n\n```ini\n## 开发/测试/生产环境分别对应dev/test/prod\n\nserver.port=1000\ndebug=true\ntrace=false\nspring.application.name=blog-web-server\nspring.profiles.active=dev\n\nspring.datasource.name=datasource\nspring.datasource.type=com.alibaba.druid.pool.DruidDataSource\nspring.datasource.druid.filters=stat\nspring.datasource.druid.driver-class-name=com.mysql.jdbc.Driver\nspring.datasource.druid.url=jdbc:mysql://127.0.0.1:3306/acanx?useUnicode=true&characterEncoding=UTF-8&allowMultiQueries=true\nspring.datasource.druid.username=root\nspring.datasource.druid.password=root\nspring.datasource.druid.initial-size=1\nspring.datasource.druid.min-idle=1\nspring.datasource.druid.max-active=20\nspring.datasource.druid.max-wait=60000\nspring.datasource.druid.time-between-eviction-runs-millis=60000\nspring.datasource.druid.min-evictable-idle-time-millis=300000\nspring.datasource.druid.validation-query=SELECT 'x'\nspring.datasource.druid.test-while-idle=true\nspring.datasource.druid.test-on-borrow=false\nspring.datasource.druid.test-on-return=false\nspring.datasource.druid.pool-prepared-statements=false\nspring.datasource.druid.max-pool-prepared-statement-per-connection-size=20\n```\n\n\n# yml\n```yml\n# 设置集群的名字，对应为http://127.0.0.1:9200/中的\"cluster_name\" : \"acanx-es-demo\",\ncluster.name: acanx-es-demo\n# 节点名字，对应为http://127.0.0.1:9200/中的\"name\" : \"node-1001\",\nnode.name: node-1001\nnode.master: true\nnode.data: true\n# 修改ES的监听地址，以便其他机器也可以访问\nnetwork.host: 0.0.0.0\n# 默认端口\nhttp.port: 9200\n# 增加新的CORS参数，这样head插件可以访问ES\nhttp.cors.enabled: true\nhttp.cors.allow-origin: \"*\"\n```\n\n\n# Bash\n```bash\n#!/bin/bash\n# - main program\nset -o errexit -o noglob -o pipefail\n\n# Configuration constants:\n# - Use upper case, underscore-separated names\n# - Use `readonly` keyword to highlight it is a constant\nreadonly GREETING_FORMAT=\"Hello %s!\\n\"\n\n# Global variables:\n\nfunction sayHello {\n    # Variable declarations:\n    # - Always declared using `local` keyword\n    # - Function parameters declared at the beginning of function\n    # - Use meaningful names\n    # - Use all lower case, underscrore-separated names\n    local greeted_name=\"$1\"\n\n    # Variable references:\n    # - Are always wrapped in ${ }\n    # - Are properly quoted to avoid issues with embedded whitespace\n    if [ -z \"${greeted_name}\" ]; then\n        # Return status:\n        # - Use a non-zero value if something went wrong\n        # - If none is specified - zero (success) is used by default\n        return 1\n    else\n        if [ \"${greeted_name}\" == '-' ]; then\n            read greeted_name\n        fi\n        printf \"${GREETING_FORMAT}\" \"${greeted_name}\"\n    fi\n}\n\nfunction toUpperCase {\n    tr \"[a-z]\" \"[A-Z]\"\n}\n\nfunction printError {\n    local message=\"$1\"\n    local red_color='\\e[31;1m'\n    local no_color='\\e[m'\n\n    printf '\\n'${red_color}'ERROR:'${no_color}' %s\\n' \"${message}\" 1>&2\n}\n\n# Main program\n\nsayHello \"Luke Skywalker\"\n\necho \"Han Solo\" | sayHello -\n\necho \"Master Yoda\" | sayHello - | toUpperCase\n\nif ! sayHello; then\n    printError \"You gave no name!\"\n    exit 1\nfi\n\n```\n\n\n# Shell\n```javascript\n#!/bin/sh\necho '============卡密管理==============='\necho '创建卡密类型如下:'\narr=`redis-cli -h 172.17.95.112 keys hardware:bus:*`\n for i in ${arr[@]};\n        do\n        bus=`echo $i | awk -F ':' '{print $3}'`\n        value=`redis-cli --raw -h 172.17.95.112 get $i | grep -Po '\"name\":\".*?\"' | awk -F ':' '{print $2}'`\n         echo $bus、$value ;\n done\n\nread -p '请输入操作:' typevalue\nif [ \"$typevalue\" == \"exit\" ];then\n        exit\nfi\n\nisexist=`redis-cli --raw -h 172.17.95.112 get \"hardware:bus:$typevalue:\"`\nif [ \"$isexist\" == \"\" ];then\n        echo '输入类型不存在'\n        sh $0\nfi\n\n\nread -p '生成数量:' createNum\n\necho $createNum\n\necho \"====================卡密=========================编号:$typevalue\"\noutFile=\"$typevalue-$RANDOM.log\"\nfor((i=0;i<$createNum;i++));\ndo\n        card=`date +%s%N | md5sum | head -c 8`\n        redis-cli -h 172.17.95.112 set \"hardware:card:$card:\" \"$typevalue\" >/dev/null\n        echo \"$card\">>$outFile\n        echo \"$card\"\ndone\necho \"输出文件路径为`pwd`/$outFile\"\necho '====================卡密========================='\nexit\n```\n\n\n# PowerShell\n```powershell\ntitle 修改shift+右击在此处打开PowerShell\nmode con cols=73 lines=20\nrem 验证是否是以管理员身份运行\nset TempFile_Name=%SystemRoot%\\System32\\BatTestUACin_SysRt%Random%.batemp\n( echo \"BAT Test UAC in Temp\" >%TempFile_Name% ) 1>nul 2>nul\nif not exist %TempFile_Name% (\ncolor 0c\necho.\necho.\necho 错误：没有以管理员身份运行该工具。\necho 该工具将无法使用！\necho.\necho 方法：\necho 找到该工具，右击\"以管理员身份运行\"。\necho.\necho 按任意键退出该工具..... & pause >nul\nexit\n)\necho 初始化中，请稍后.....\nrem 设置\"HKCR\\Directory\\Background\\shell\"的所有者为:Everyone\n>>fcc_owner.inf echo.[Version]\n>>fcc_owner.inf echo.Signature = \"$Chicago$\"\n>>fcc_owner.inf echo.\n>>fcc_owner.inf echo.[Registry Keys]\n>>fcc_owner.inf echo.\"CLASSES_ROOT\\Directory\\Background\\shell\", 0, \"O:WD\"\nsecedit /configure /db fcc_owner.sdb /cfg fcc_owner.inf /log fcc_owner.log\ndel fcc_owner.*\n:main\ncls\ncolor 0a\necho *************************************************************************\necho.\necho 该工具用于更改新版windows10系统shift+右键以何种方式打开命令窗口。\necho 系统默认“在此处打开PowerShell”，\necho 此工具可以在“PowerShell”和“CMD”之间切换。\necho.\necho ★注意！请使用管理员权限运行改工具！\necho.\necho 请选择操作：\necho 1、修改为“在此处打开CMD窗口”\necho 2、修改为“在此处打开PowerShell窗口”\necho 3、同时显示1和2\necho.\necho by:frogchou\necho website:frogchou.com\necho *************************************************************************\necho.\nset /p var=请输入序号并回车开始修改：\nif \"%var%\"==\"1\" goto changeCMD\nif \"%var%\"==\"2\" goto changePowerShell\nif \"%var%\"==\"3\" (goto changeShowAll) else (goto error)\n:changeCMD\nreg delete HKCR\\Directory\\Background\\shell\\cmd /v HideBasedOnVelocityId /f\nreg add HKCR\\Directory\\Background\\shell\\cmd /v ShowBasedOnVelocityId /t REG_DWORD /d 6527944 /f\nreg delete HKCR\\Directory\\Background\\shell\\Powershell /v ShowBasedOnVelocityId /f\nreg add HKCR\\Directory\\Background\\shell\\Powershell /v HideBasedOnVelocityId /t REG_DWORD /d 6527944 /f\ngoto end\n:changePowerShell\nreg delete HKCR\\Directory\\Background\\shell\\cmd /v ShowBasedOnVelocityId /f\nreg add HKCR\\Directory\\Background\\shell\\cmd /v HideBasedOnVelocityId /t REG_DWORD /d 6527944 /f\nreg delete HKCR\\Directory\\Background\\shell\\Powershell /v HideBasedOnVelocityId /f\nreg add HKCR\\Directory\\Background\\shell\\Powershell /v ShowBasedOnVelocityId /t REG_DWORD /d 6527944 /f\ngoto end\n:changeShowAll\nreg delete HKCR\\Directory\\Background\\shell\\cmd /v HideBasedOnVelocityId /f\nreg add HKCR\\Directory\\Background\\shell\\cmd /v ShowBasedOnVelocityId /t REG_DWORD /d 6527944 /f\nreg delete HKCR\\Directory\\Background\\shell\\Powershell /v HideBasedOnVelocityId /f\nreg add HKCR\\Directory\\Background\\shell\\Powershell /v ShowBasedOnVelocityId /t REG_DWORD /d 6527944 /f\ngoto end\n:end\necho.\necho 修改完成！按任意键退出.\npause >nul\nexit\n:error\necho.\necho 选择错误！按任意键返回主菜单.\npause >nul\ngoto main\n```\n\n\n# CMD\n```cmd\n@echo off \necho 定时关机DOS命令，使用方式: \"sdat 23:12:12\"; \necho sdat 为命令名称，23:12:12为当天的时间参数\n::set yy=%date:~0,4%\n::set mm=%date:~5,2%\n::set dd=%date:~8,2%\nset h=%time:~0,2%\nset m=%time:~3,2%\nset s=%time:~6,2%\n::echo %yy% %mm% %dd% %h% %m% %s%\n::echo %1 %2 %3\nset /a ts=(%1 - %h%)*3600 + (%2 - %m%)*60 + (%3 - %s%)\nIF /i %ts% LSS 1 (\necho ERROR:Shutdown time must be time in future;\n) ELSE (\necho INFO:System will shutdown after %ts% seconds at %1 : %2 ：%3; \nshutdown /s /t %ts%\n)\n::pause \n```\n\n\n\n# Bat\n```bat\n@echo off\necho.\necho MySQL数据库备份\nset del_date_back=15\nset all_data_back_value=1\nset haoya_bin_path=\"C:\\Program Files\\HaoZip\\\"\nset mysql_bin_path=\"C:\\wamp\\bin\\mysql\\mysql5.5.24\\bin\\\"\nset mysql_data_path=\"C:\\wamp\\bin\\mysql\\mysql5.5.24\\data\\\"\n::set apache_bin_path=\"C:\\wamp\\bin\\apache\\apache2.2.22\\bin\\\"\nset apache_data_path=\"C:\\wamp\\\"\nset data_back_path=\"C:\\dtsbc_data_back\\\"\nset del_file_path=\"C:\\wamp\\www\\dtsbc\\Admin\\Runtime\\\"\nset Ymd=\"%date:~,4%%date:~5,2%%date:~8,2%\"\nset /a t=100+%time:~,2%\nset bakFileNameTail=_BAK_%date:~,4%%date:~5,2%%date:~8,2%_%t:~1%%time:~3,2%%time:~6,2%\necho *****************************\necho.\necho 今天是： %date%_%time%\necho 好压执行路径为： %haoya_bin_path%\necho mysql执行路径为： %mysql_bin_path%\necho mysql数据路径为： %mysql_data_path%\n::echo apache执行路径为： %apache_bin_path%\necho apache数据路径为： %apache_data_path%\necho.\necho *****************************\n:: HaoZipC a -tzip 20161221.zip config\\*\n::set mysql_bin_path = \"C:\\wamp\\bin\\mysql\\mysql5.5.24\\bin\"\n::set apache_bin_path = \"C:\\wamp\\bin\\apache\\apache2.2.22\\bin\"\n::set haoya_bin_path = \"C:\\Program Files\\HaoZip\"\n::创建备份的数据的目录\n\nmd %data_back_path%%Ymd%\n%mysql_bin_path%\\mysqldump -u root --default-character-set=utf8 --databases dtsbc > %data_back_path%%Ymd%\\dtsbc_%bakFileNameTail%.sql\n%mysql_bin_path%\\mysqldump -u root --default-character-set=utf8 --databases mysql > %data_back_path%%Ymd%\\mysql_%bakFileNameTail%.sql\n%mysql_bin_path%\\mysqldump -u root --default-character-set=utf8 --databases bbsdata > %data_back_path%%Ymd%\\bbsdata_%bakFileNameTail%.sql\nnet stop wampapache\nnet stop wampmysqld\nrd/s/q %del_file_path%\n\n%haoya_bin_path%HaoZipC a -tzip %data_back_path%%Ymd%\\dtsbc_mysql_%Ymd%.zip %mysql_data_path%dtsbc\\*\n%haoya_bin_path%HaoZipC a -tzip %data_back_path%%Ymd%\\bbs_mysql_%Ymd%.zip %mysql_data_path%bbs\\*\n%haoya_bin_path%HaoZipC a -tzip %data_back_path%%Ymd%\\mysql_mysql_%Ymd%.zip %mysql_data_path%mysql\\*\n%haoya_bin_path%HaoZipC a -tzip %data_back_path%%Ymd%\\dtsbc_php_%Ymd%.zip %apache_data_path%dtsbc\\*\n%haoya_bin_path%HaoZipC a -tzip %data_back_path%%Ymd%\\bbs_php_%Ymd%.zip %apache_data_path%bbs\\*\n\nif  %date:~9,1% equ %all_data_back_value% ( %haoya_bin_path%HaoZipC a -tzip %data_back_path%%Ymd%\\wamp_%Ymd%.zip %apache_data_path%*)\n::cmd\nnet start wampapache\nnet start wampmysqld\n::set/a n=5\nset/a y=%date:~,4%,m=1%date:~5,2%-100,d=1%date:~8,2%-100\nset/a d-=%del_date_back%\nif %d% gtr 0 goto :ok\n:ov\nset/a \"md=31-!(m-5)-!(m-7)-!(m-10)-!(m-12)-!(m-3)*(3-!(y&3))\"\nset/a d+=md,m-=1\nif %m% equ 0 set/a m=12,y-=1\nif %d% leq 0 goto :ov\n:ok\nset/a md=m*100+d+10000\nset back_data_value=\"%y%%md:~1%\"\necho %del_date_back%天前的日期为：%back_data_value%\ncd %data_back_path%\n\nset /a data_back_value_int=%back_data_value%+0\necho %data_back_value_int%\n::单条语句执行的时候需要的是一个% 在批处理中的话，需要两个%%\nfor /F %%i in ('dir  %data_back_path% /a:d /b') do (if %%i lss %data_back_value_int% ( rd/s/q %%i ))\n::for /F %%i in ('dir  %data_back_path% /a:d /b') do (  if %%i lss %data_back_value_int% ( echo %%i ) else ( echo \"google\" )  )\necho.:P\n\necho MySQL数据库备份完成，请进行检查。。。\n\necho.:P\necho.\n//pause\n::pause\n```\n\n\n\n# Groovy\n```groovy\nerrpattern = ~/Failures: [1-9]+/\nerrpatternSum = ~/passed:\\d+,.*failed:\\d+,/\ndef ratio\nmanager.build.logFile.eachLine{ line ->\n    errmatcher=errpattern.matcher(line)\n    errmatcherSum=errpatternSum.matcher(line)\n    if (errmatcher.find()) {\n        manager.build.@result = hudson.model.Result.UNSTABLE\n    }\n    if(errmatcherSum.find()){\n        numArray = line.findAll(/\\d+/)*.toInteger()\n        manager.listener.logger.println(\">>> number =  \" + numArray)\n        ratio = (numArray[1] / numArray[3]) * 100\n        manager.listener.logger.println(\">>> ratio =  \" + ratio + \"%\")\n    }\n}\n\nratio = Math.round(ratio)\n//add text next to the job build history\nmanager.addShortText(\"failure rate -> \" + ratio + \"%\")\n```\n\n\n# Gradle\n```gradle\napply plugin: 'com.android.application'\n\nandroid {\n    compileSdkVersion 25\n    buildToolsVersion \"25.0.1\"\n    defaultConfig {\n        applicationId \"com.grgbanking.school\"\n        minSdkVersion 15\n        targetSdkVersion 25\n        versionCode 1\n        versionName \"1.0\"\n        testInstrumentationRunner \"android.support.test.runner.AndroidJUnitRunner\"\n    }\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n        }\n    }\n    dataBinding {\n        enabled = true\n    }\n}\n\ndependencies {\n    compile fileTree(dir: 'libs', include: ['*.jar'])\n    androidTestCompile('com.android.support.test.espresso:espresso-core:2.2.2', {\n        exclude group: 'com.android.support', module: 'support-annotations'\n    })\n    compile 'com.android.support:appcompat-v7:25.0.1'\n    compile 'com.jakewharton.rxbinding:rxbinding:0.4.0'\n\n    /*compile 'com.squareup.retrofit2:retrofit:2.1.0'\n    compile 'com.squareup.retrofit2:adapter-rxjava:2.0.0-beta4'*/\n    compile 'com.squareup.retrofit2:retrofit:2.0.0-beta4'\n    compile 'com.squareup.retrofit2:converter-gson:2.0.0-beta4'\n    compile 'com.squareup.retrofit2:adapter-rxjava:2.0.0-beta4'\n\n    compile 'com.squareup.okhttp:okhttp:2.7.5'\n    compile 'com.alibaba:fastjson:1.2.20'\n    compile 'org.apache.commons:commons-lang3:3.5'\n\n    testCompile 'junit:junit:4.12'\n}\n\n```\n\n#  Git\n```git\n# 1.初始化git\ngit init \n\n# 2.查看git修改状态：\ngit status\n\n# 3.将项目保存到仓库\n先 git add .\n再 git commit -m \"备注\"\n\n# 4. 查看最新三个仓库中的项目\ngit log\n\n# 5. 查看所有仓库中的项目\ngit reflog\n\n# 6.恢复成某个项目\ngit reset --hard 这里写id\n\n# 7.将github中的项目拷贝下来\ngit clone 地址\n\n# 8.将本地项目传到github \ngit push origin master\n\n\n# 9.更新本地项目，与gitbub一致\ngit pull\n\n# 10.将本地项目和新建的远程仓库关联起来，必须是未初始化仓库\ngit remote add origin git@github.com:michaelliao/learngit.git\n\n# 11.把本地库的内容推送到远程，用git push命令\ngit push -u origin master    # （由于远程库是空的，我们第一次推送master分支时，加上了-u参数，\n\t\t\t\tGit不但会把本地的master分支内容推送的远程新的master分支，\n\t\t\t\t还会把本地的master分支和远程的master分支关联起来，\n\t\t\t\t在以后的推送或者拉取时就可以简化命令。）\n\n```\n\n\n···\n···\n···\n\n# 待添加\n```js\nconnect: {\n    server: {\n        options: {\n            port: 9100,\n            hostname: '*',\n            base: '.',\n            keepalive: true\n        }\n    }\n}\n```\n# 待添加\n\n```js\nthis.base_uri = this.config.base_uri || this.prefs.get(\"app-base_uri\") || \"http://localhost:9200\";\n```\n\n# 待添加\n\n```js\nthis.base_uri = this.config.base_uri || this.prefs.get(\"app-base_uri\") || \"http://127.0.0.1:9200\";\n```\n\n\n# 待添加\n \n```\n npm install\n```\n\n# 待添加\n\n\n# 待添加\n\n\n\n","source":"_posts/MD代码样式.md","raw":"---\ntitle: Markdown文档渲染出的代码样式\ndate: 2018-09-06 10:10:00\ncategories: \"Markdown\" #文章分类目录 可以省略\ntags: #Java \n     - Markdown\n     - 前端\n     - JS\ndescription: Markdown代码样式  #\n---\n\n\n# 代码样式\n\n\n\n# Java\n\n```java\npackage com.acanx.thread;\n\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport java.util.concurrent.ExecutionException;\nimport java.util.concurrent.FutureTask;\n\n/**\n * Created by ACANX on 2018/9/3.\n * MultiThread :\n * <p>\n * <p>\n * 1.继承Thread类，重写该类的run()方法。\n * 2.实现Runnable接口，并重写该接口的run()方法，该run()方法同样是线程执行体，\n * 创建Runnable实现类的实例，并以此实例作为Thread类的target来创建Thread对象，\n * 该Thread对象才是真正的线程对象。\n */\npublic class MultiThread {\n\n    private static final Logger logger = LoggerFactory.getLogger(MultiThread.class);\n\n    private WhutStudent whutStudent;\n\n\n    public static void main(String[] args) {\n        Thread.currentThread().setName(\"Main Thread:\");\n        String str = \" 1234566\";\n        logger.debug(\"-------程序启动------------------------\");\n\n        //在类中的写法  继承Thread类\n        Thread threadByThreadInMain = new Thread() {\n            int j = 1;\n            @Override\n            public void run() {\n                Thread.currentThread().setName(\"threadByThreadInMain \");\n                for (int j = 0; j < 100; j++) {\n                    logger.debug(Thread.currentThread().getName() + \" \" + j );\n                    try {\n                        Thread.sleep(100);\n                    } catch (InterruptedException e) {\n                        e.printStackTrace();\n                    }\n                    WhutStudent w=WhutStudent.getInstance();\n                    logger.debug(w.getStudentId()+\" \"+Thread.currentThread().getName());\n                    w.setStudentId(\"StudentID:threadByThreadInMain\"+j);\n\n                }\n            }\n        };\n\n        //在类中的写法 实现Runnable接口\n        Thread threadByRunnableInMain = new Thread(new Runnable() {\n            @Override\n            public void run() {\n                Thread.currentThread().setName(\"threadByRunnableInMain \");\n                logger.debug(\"new Thread 2\");//输出:new Thread 2\n                for (int j = 0; j < 100; j++) {\n                    logger.debug(Thread.currentThread().getName() + \" \" + j + \"   \" );\n                    try {\n                        Thread.sleep(100);\n                    } catch (InterruptedException e) {\n                        e.printStackTrace();\n                    }\n                    WhutStudent w=WhutStudent.getInstance();\n                    logger.debug(w.getStudentId()+\" \"+Thread.currentThread().getName());\n                    w.setStudentId(\"StudentID:threadByRunnableInMain\"+j);\n\n                }\n            }\n        });\n\n        MyThread myThread = new MyThread();\n        myThread.start();\n\n        MyRunnable myRunnable = new MyRunnable();\n        Thread myRunnableThread=new Thread(myRunnable);\n        myRunnableThread.start();\n\n        threadByThreadInMain.start();\n\n\n        threadByRunnableInMain.start();\n\n\n\n        //执行Callable 方式，需要FutureTask 实现实现，用于接收运算结果\n        FutureTask<Integer> futureTask = new FutureTask<Integer>(new MyCallable());\n        new Thread(futureTask).start();\n        //接收线程运算后的结果\n        try {\n            Integer sum = futureTask.get();\n            logger.debug(\"sum=\"+sum);\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        } catch (ExecutionException e) {\n            e.printStackTrace();\n        }\n\n\n    }\n}\n\n\n```\n\n\n\n\n# Python\n\n```python\n# -*- coding: utf-8 -*-\nimport os\nimport sys\nimport urllib2\nimport requests\nimport re\nfrom lxml import etree\n\n\ndef StringListSave(save_path, filename, slist):\n    if not os.path.exists(save_path):\n        os.makedirs(save_path)\n    path = save_path+\"/\"+filename+\".txt\"\n    with open(path, \"w+\") as fp:\n        for s in slist:\n            fp.write(\"%s\\t\\t%s\\n\" % (s[0].encode(\"utf8\"), s[1].encode(\"utf8\")))\n\ndef Page_Info(myPage):\n    '''Regex'''\n    mypage_Info = re.findall(r'<div class=\"titleBar\" id=\".*?\"><h2>(.*?)</h2><div class=\"more\"><a href=\"(.*?)\">.*?</a></div></div>', myPage, re.S)\n    return mypage_Info\n\ndef New_Page_Info(new_page):\n    '''Regex(slowly) or Xpath(fast)'''\n    # new_page_Info = re.findall(r'<td class=\".*?\">.*?<a href=\"(.*?)\\.html\".*?>(.*?)</a></td>', new_page, re.S)\n    # # new_page_Info = re.findall(r'<td class=\".*?\">.*?<a href=\"(.*?)\">(.*?)</a></td>', new_page, re.S) # bugs\n    # results = []\n    # for url, item in new_page_Info:\n    #     results.append((item, url+\".html\"))\n    # return results\n    dom = etree.HTML(new_page)\n    new_items = dom.xpath('//tr/td/a/text()')\n    new_urls = dom.xpath('//tr/td/a/@href')\n    assert(len(new_items) == len(new_urls))\n    return zip(new_items, new_urls)\n\ndef Spider(url):\n    i = 0\n    print \"downloading \", url\n    myPage = requests.get(url).content.decode(\"gbk\")\n    # myPage = urllib2.urlopen(url).read().decode(\"gbk\")\n    myPageResults = Page_Info(myPage)\n    save_path = u\"网易新闻抓取\"\n    filename = str(i)+\"_\"+u\"新闻排行榜\"\n    StringListSave(save_path, filename, myPageResults)\n    i += 1\n    for item, url in myPageResults:\n        print \"downloading \", url\n        new_page = requests.get(url).content.decode(\"gbk\")\n        # new_page = urllib2.urlopen(url).read().decode(\"gbk\")\n        newPageResults = New_Page_Info(new_page)\n        filename = str(i)+\"_\"+item\n        StringListSave(save_path, filename, newPageResults)\n        i += 1\n\n\nif __name__ == '__main__':\n    print \"start\"\n    start_url = \"http://news.163.com/rank/\"\n    Spider(start_url)\n    print \"end\"\n\n```\n\n# PHP\n```php\n<?php\nnamespace PhpOffice\\PhpSpreadsheet;\nuse PhpOffice\\PhpSpreadsheet\\Shared\\File;\n/**\n * Factory to create readers and writers easily.\n *\n * It is not required to use this class, but it should make it easier to read and write files.\n * Especially for reading files with an unknown format.\n */\nabstract class IOFactory\n{\n    private static $readers = [\n        'Xlsx' => Reader\\Xlsx::class,\n        'Xls' => Reader\\Xls::class,\n        'Xml' => Reader\\Xml::class,\n        'Ods' => Reader\\Ods::class,\n        'Slk' => Reader\\Slk::class,\n        'Gnumeric' => Reader\\Gnumeric::class,\n        'Html' => Reader\\Html::class,\n        'Csv' => Reader\\Csv::class,\n    ];\n    private static $writers = [\n        'Xls' => Writer\\Xls::class,\n        'Xlsx' => Writer\\Xlsx::class,\n        'Ods' => Writer\\Ods::class,\n        'Csv' => Writer\\Csv::class,\n        'Html' => Writer\\Html::class,\n        'Tcpdf' => Writer\\Pdf\\Tcpdf::class,\n        'Dompdf' => Writer\\Pdf\\Dompdf::class,\n        'Mpdf' => Writer\\Pdf\\Mpdf::class,\n    ];\n    /**\n     * Create Writer\\IWriter.\n     *\n     * @param Spreadsheet $spreadsheet\n     * @param string $writerType Example: Xlsx\n     *\n     * @throws Writer\\Exception\n     *\n     * @return Writer\\IWriter\n     */\n    public static function createWriter(Spreadsheet $spreadsheet, $writerType)\n    {\n        if (!isset(self::$writers[$writerType])) {\n            throw new Writer\\Exception(\"No writer found for type $writerType\");\n        }\n        // Instantiate writer\n        $className = self::$writers[$writerType];\n        $writer = new $className($spreadsheet);\n        return $writer;\n    }\n    /**\n     * Create Reader\\IReader.\n     *\n     * @param string $readerType Example: Xlsx\n     *\n     * @throws Reader\\Exception\n     *\n     * @return Reader\\IReader\n     */\n    public static function createReader($readerType)\n    {\n        if (!isset(self::$readers[$readerType])) {\n            throw new Reader\\Exception(\"No reader found for type $readerType\");\n        }\n        // Instantiate reader\n        $className = self::$readers[$readerType];\n        $reader = new $className();\n        return $reader;\n    }\n    /**\n     * Loads Spreadsheet from file using automatic Reader\\IReader resolution.\n     *\n     * @param string $pFilename The name of the spreadsheet file\n     *\n     * @throws Reader\\Exception\n     *\n     * @return Spreadsheet\n     */\n    public static function load($pFilename)\n    {\n        $reader = self::createReaderForFile($pFilename);\n        return $reader->load($pFilename);\n    }\n    /**\n     * Identify file type using automatic Reader\\IReader resolution.\n     *\n     * @param string $pFilename The name of the spreadsheet file to identify\n     *\n     * @throws Reader\\Exception\n     *\n     * @return string\n     */\n    public static function identify($pFilename)\n    {\n        $reader = self::createReaderForFile($pFilename);\n        $className = get_class($reader);\n        $classType = explode('\\\\', $className);\n        unset($reader);\n        return array_pop($classType);\n    }\n    /**\n     * Create Reader\\IReader for file using automatic Reader\\IReader resolution.\n     *\n     * @param string $filename The name of the spreadsheet file\n     *\n     * @throws Reader\\Exception\n     *\n     * @return Reader\\IReader\n     */\n    public static function createReaderForFile($filename)\n    {\n        File::assertFile($filename);\n        // First, lucky guess by inspecting file extension\n        $guessedReader = self::getReaderTypeFromExtension($filename);\n        if ($guessedReader !== null) {\n            $reader = self::createReader($guessedReader);\n            // Let's see if we are lucky\n            if (isset($reader) && $reader->canRead($filename)) {\n                return $reader;\n            }\n        }\n        // If we reach here then \"lucky guess\" didn't give any result\n        // Try walking through all the options in self::$autoResolveClasses\n        foreach (self::$readers as $type => $class) {\n            //    Ignore our original guess, we know that won't work\n            if ($type !== $guessedReader) {\n                $reader = self::createReader($type);\n                if ($reader->canRead($filename)) {\n                    return $reader;\n                }\n            }\n        }\n        throw new Reader\\Exception('Unable to identify a reader for this file');\n    }\n    /**\n     * Guess a reader type from the file extension, if any.\n     *\n     * @param string $filename\n     *\n     * @return null|string\n     */\n    private static function getReaderTypeFromExtension($filename)\n    {\n        $pathinfo = pathinfo($filename);\n        if (!isset($pathinfo['extension'])) {\n            return null;\n        }\n        switch (strtolower($pathinfo['extension'])) {\n            case 'xlsx': // Excel (OfficeOpenXML) Spreadsheet\n            case 'xlsm': // Excel (OfficeOpenXML) Macro Spreadsheet (macros will be discarded)\n            case 'xltx': // Excel (OfficeOpenXML) Template\n            case 'xltm': // Excel (OfficeOpenXML) Macro Template (macros will be discarded)\n                return 'Xlsx';\n            case 'xls': // Excel (BIFF) Spreadsheet\n            case 'xlt': // Excel (BIFF) Template\n                return 'Xls';\n            case 'ods': // Open/Libre Offic Calc\n            case 'ots': // Open/Libre Offic Calc Template\n                return 'Ods';\n            case 'slk':\n                return 'Slk';\n            case 'xml': // Excel 2003 SpreadSheetML\n                return 'Xml';\n            case 'gnumeric':\n                return 'Gnumeric';\n            case 'htm':\n            case 'html':\n                return 'Html';\n            case 'csv':\n                // Do nothing\n                // We must not try to use CSV reader since it loads\n                // all files including Excel files etc.\n                return null;\n            default:\n                return null;\n        }\n    }\n    /**\n     * Register a writer with its type and class name.\n     *\n     * @param string $writerType\n     * @param string $writerClass\n     */\n    public static function registerWriter($writerType, $writerClass)\n    {\n        if (!is_a($writerClass, Writer\\IWriter::class, true)) {\n            throw new Writer\\Exception('Registered writers must implement ' . Writer\\IWriter::class);\n        }\n        self::$writers[$writerType] = $writerClass;\n    }\n    /**\n     * Register a reader with its type and class name.\n     *\n     * @param string $readerType\n     * @param string $readerClass\n     */\n    public static function registerReader($readerType, $readerClass)\n    {\n        if (!is_a($readerClass, Reader\\IReader::class, true)) {\n            throw new Reader\\Exception('Registered readers must implement ' . Reader\\IReader::class);\n        }\n        self::$readers[$readerType] = $readerClass;\n    }\n}\n```\n\n\n\n# Go\n```go\npackage list\n\n// Element is an element of a linked list.\ntype Element struct {\n\t// Next and previous pointers in the doubly-linked list of elements.\n\t// To simplify the implementation, internally a list l is implemented\n\t// as a ring, such that &l.root is both the next element of the last\n\t// list element (l.Back()) and the previous element of the first list\n\t// element (l.Front()).\n\tnext, prev *Element\n\n\t// The list to which this element belongs.\n\tlist *List\n\n\t// The value stored with this element.\n\tValue interface{}\n}\n\n// Next returns the next list element or nil.\nfunc (e *Element) Next() *Element {\n\tif p := e.next; e.list != nil && p != &e.list.root {\n\t\treturn p\n\t}\n\treturn nil\n}\n\n// Prev returns the previous list element or nil.\nfunc (e *Element) Prev() *Element {\n\tif p := e.prev; e.list != nil && p != &e.list.root {\n\t\treturn p\n\t}\n\treturn nil\n}\n\n// List represents a doubly linked list.\n// The zero value for List is an empty list ready to use.\ntype List struct {\n\troot Element // sentinel list element, only &root, root.prev, and root.next are used\n\tlen  int     // current list length excluding (this) sentinel element\n}\n\n// Init initializes or clears list l.\nfunc (l *List) Init() *List {\n\tl.root.next = &l.root\n\tl.root.prev = &l.root\n\tl.len = 0\n\treturn l\n}\n\n// New returns an initialized list.\nfunc New() *List { return new(List).Init() }\n\n// Len returns the number of elements of list l.\n// The complexity is O(1).\nfunc (l *List) Len() int { return l.len }\n\n// Front returns the first element of list l or nil if the list is empty.\nfunc (l *List) Front() *Element {\n\tif l.len == 0 {\n\t\treturn nil\n\t}\n\treturn l.root.next\n}\n\n// Back returns the last element of list l or nil if the list is empty.\nfunc (l *List) Back() *Element {\n\tif l.len == 0 {\n\t\treturn nil\n\t}\n\treturn l.root.prev\n}\n\n// lazyInit lazily initializes a zero List value.\nfunc (l *List) lazyInit() {\n\tif l.root.next == nil {\n\t\tl.Init()\n\t}\n}\n\n// insert inserts e after at, increments l.len, and returns e.\nfunc (l *List) insert(e, at *Element) *Element {\n\tn := at.next\n\tat.next = e\n\te.prev = at\n\te.next = n\n\tn.prev = e\n\te.list = l\n\tl.len++\n\treturn e\n}\n\n// insertValue is a convenience wrapper for insert(&Element{Value: v}, at).\nfunc (l *List) insertValue(v interface{}, at *Element) *Element {\n\treturn l.insert(&Element{Value: v}, at)\n}\n\n// remove removes e from its list, decrements l.len, and returns e.\nfunc (l *List) remove(e *Element) *Element {\n\te.prev.next = e.next\n\te.next.prev = e.prev\n\te.next = nil // avoid memory leaks\n\te.prev = nil // avoid memory leaks\n\te.list = nil\n\tl.len--\n\treturn e\n}\n\n// Remove removes e from l if e is an element of list l.\n// It returns the element value e.Value.\n// The element must not be nil.\nfunc (l *List) Remove(e *Element) interface{} {\n\tif e.list == l {\n\t\t// if e.list == l, l must have been initialized when e was inserted\n\t\t// in l or l == nil (e is a zero Element) and l.remove will crash\n\t\tl.remove(e)\n\t}\n\treturn e.Value\n}\n\n// PushFront inserts a new element e with value v at the front of list l and returns e.\nfunc (l *List) PushFront(v interface{}) *Element {\n\tl.lazyInit()\n\treturn l.insertValue(v, &l.root)\n}\n\n// PushBack inserts a new element e with value v at the back of list l and returns e.\nfunc (l *List) PushBack(v interface{}) *Element {\n\tl.lazyInit()\n\treturn l.insertValue(v, l.root.prev)\n}\n\n// InsertBefore inserts a new element e with value v immediately before mark and returns e.\n// If mark is not an element of l, the list is not modified.\n// The mark must not be nil.\nfunc (l *List) InsertBefore(v interface{}, mark *Element) *Element {\n\tif mark.list != l {\n\t\treturn nil\n\t}\n\t// see comment in List.Remove about initialization of l\n\treturn l.insertValue(v, mark.prev)\n}\n\n// InsertAfter inserts a new element e with value v immediately after mark and returns e.\n// If mark is not an element of l, the list is not modified.\n// The mark must not be nil.\nfunc (l *List) InsertAfter(v interface{}, mark *Element) *Element {\n\tif mark.list != l {\n\t\treturn nil\n\t}\n\t// see comment in List.Remove about initialization of l\n\treturn l.insertValue(v, mark)\n}\n\n// MoveToFront moves element e to the front of list l.\n// If e is not an element of l, the list is not modified.\n// The element must not be nil.\nfunc (l *List) MoveToFront(e *Element) {\n\tif e.list != l || l.root.next == e {\n\t\treturn\n\t}\n\t// see comment in List.Remove about initialization of l\n\tl.insert(l.remove(e), &l.root)\n}\n\n// MoveToBack moves element e to the back of list l.\n// If e is not an element of l, the list is not modified.\n// The element must not be nil.\nfunc (l *List) MoveToBack(e *Element) {\n\tif e.list != l || l.root.prev == e {\n\t\treturn\n\t}\n\t// see comment in List.Remove about initialization of l\n\tl.insert(l.remove(e), l.root.prev)\n}\n\n// MoveBefore moves element e to its new position before mark.\n// If e or mark is not an element of l, or e == mark, the list is not modified.\n// The element and mark must not be nil.\nfunc (l *List) MoveBefore(e, mark *Element) {\n\tif e.list != l || e == mark || mark.list != l {\n\t\treturn\n\t}\n\tl.insert(l.remove(e), mark.prev)\n}\n\n// MoveAfter moves element e to its new position after mark.\n// If e or mark is not an element of l, or e == mark, the list is not modified.\n// The element and mark must not be nil.\nfunc (l *List) MoveAfter(e, mark *Element) {\n\tif e.list != l || e == mark || mark.list != l {\n\t\treturn\n\t}\n\tl.insert(l.remove(e), mark)\n}\n\n// PushBackList inserts a copy of an other list at the back of list l.\n// The lists l and other may be the same. They must not be nil.\nfunc (l *List) PushBackList(other *List) {\n\tl.lazyInit()\n\tfor i, e := other.Len(), other.Front(); i > 0; i, e = i-1, e.Next() {\n\t\tl.insertValue(e.Value, l.root.prev)\n\t}\n}\n\n// PushFrontList inserts a copy of an other list at the front of list l.\n// The lists l and other may be the same. They must not be nil.\nfunc (l *List) PushFrontList(other *List) {\n\tl.lazyInit()\n\tfor i, e := other.Len(), other.Back(); i > 0; i, e = i-1, e.Prev() {\n\t\tl.insertValue(e.Value, &l.root)\n\t}\n}\n```\n\n\n# C++\n```c++\n#include <grpc/support/time.h>\n#include <grpcpp/support/config.h>\n#include <grpcpp/support/time.h>\n\nusing std::chrono::duration_cast;\nusing std::chrono::high_resolution_clock;\nusing std::chrono::nanoseconds;\nusing std::chrono::seconds;\nusing std::chrono::system_clock;\n\nnamespace grpc {\n\nvoid Timepoint2Timespec(const system_clock::time_point& from,\n                        gpr_timespec* to) {\n  system_clock::duration deadline = from.time_since_epoch();\n  seconds secs = duration_cast<seconds>(deadline);\n  if (from == system_clock::time_point::max() ||\n      secs.count() >= gpr_inf_future(GPR_CLOCK_REALTIME).tv_sec ||\n      secs.count() < 0) {\n    *to = gpr_inf_future(GPR_CLOCK_REALTIME);\n    return;\n  }\n  nanoseconds nsecs = duration_cast<nanoseconds>(deadline - secs);\n  to->tv_sec = static_cast<int64_t>(secs.count());\n  to->tv_nsec = static_cast<int32_t>(nsecs.count());\n  to->clock_type = GPR_CLOCK_REALTIME;\n}\n\nvoid TimepointHR2Timespec(const high_resolution_clock::time_point& from,\n                          gpr_timespec* to) {\n  high_resolution_clock::duration deadline = from.time_since_epoch();\n  seconds secs = duration_cast<seconds>(deadline);\n  if (from == high_resolution_clock::time_point::max() ||\n      secs.count() >= gpr_inf_future(GPR_CLOCK_REALTIME).tv_sec ||\n      secs.count() < 0) {\n    *to = gpr_inf_future(GPR_CLOCK_REALTIME);\n    return;\n  }\n  nanoseconds nsecs = duration_cast<nanoseconds>(deadline - secs);\n  to->tv_sec = static_cast<int64_t>(secs.count());\n  to->tv_nsec = static_cast<int32_t>(nsecs.count());\n  to->clock_type = GPR_CLOCK_REALTIME;\n}\n\nsystem_clock::time_point Timespec2Timepoint(gpr_timespec t) {\n  if (gpr_time_cmp(t, gpr_inf_future(t.clock_type)) == 0) {\n    return system_clock::time_point::max();\n  }\n  t = gpr_convert_clock_type(t, GPR_CLOCK_REALTIME);\n  system_clock::time_point tp;\n  tp += duration_cast<system_clock::time_point::duration>(seconds(t.tv_sec));\n  tp +=\n      duration_cast<system_clock::time_point::duration>(nanoseconds(t.tv_nsec));\n  return tp;\n}\n\n}  // namespace grpc\n```\n\n\n# C\n```c\n#include <stdio.h>\n#include <stdlib.h>\n#include <time.h>\n\nvoid shellSort(int array[], int value){\n  int i = value;\n  int j, k, tmp;\n  for (i = value / 2; i > 0; i = i / 2){\n    for (j = i; j < value; j++){\n      for(k = j - i; k >= 0; k = k - i){\n        if (array[k+i] >= array[k]){\n          break;\n        }\n        else{\n          tmp = array[k];\n          array[k] = array[k+i];\n          array[k+i] = tmp;\n        }\n      }\n    }\n  }\n}\n\n\nint main(){\n    int array[20];\n    int range = 500;\n    for(int i = 0; i < 100; i++){\n     array[i] = rand() % range + 1;\n    }\n    int size = sizeof array / sizeof array[0];\n\n\n\n    clock_t start = clock();\n    shellSort(array,size);\n    clock_t end = clock();\n    double time_spent = (double)(end - start) / CLOCKS_PER_SEC;\n\n\n    printf(\"Data Sorted\\n\");\n    printf(\"%s\\n\", \"Shell Sort Big O Notation:\\n--> Best Case: O(n log(n))\\n--> Average Case: depends on gap sequence\\n--> Worst Case: O(n)\\n\");\n    printf(\"Time spent sorting: %f\\n\", time_spent);\n\n  return 0;\n}\n```\n\n\n\n# C\\#    #  C#\n```csharp\n#pragma warning disable 1591, 0612, 3021\n#region Designer generated code\n\nusing pb = global::Google.Protobuf;\nusing pbc = global::Google.Protobuf.Collections;\nusing pbr = global::Google.Protobuf.Reflection;\nusing scg = global::System.Collections.Generic;\nnamespace Math {\n\n  /// <summary>Holder for reflection information generated from math/math.proto</summary>\n  public static partial class MathReflection {\n\n    #region Descriptor\n    /// <summary>File descriptor for math/math.proto</summary>\n    public static pbr::FileDescriptor Descriptor {\n      get { return descriptor; }\n    }\n    private static pbr::FileDescriptor descriptor;\n\n    static MathReflection() {\n      byte[] descriptorData = global::System.Convert.FromBase64String(\n          string.Concat(\n            \"Cg9tYXRoL21hdGgucHJvdG8SBG1hdGgiLAoHRGl2QXJncxIQCghkaXZpZGVu\",\n            \"ZBgBIAEoAxIPCgdkaXZpc29yGAIgASgDIi8KCERpdlJlcGx5EhAKCHF1b3Rp\",\n            \"ZW50GAEgASgDEhEKCXJlbWFpbmRlchgCIAEoAyIYCgdGaWJBcmdzEg0KBWxp\",\n            \"bWl0GAEgASgDIhIKA051bRILCgNudW0YASABKAMiGQoIRmliUmVwbHkSDQoF\",\n            \"Y291bnQYASABKAMypAEKBE1hdGgSJgoDRGl2Eg0ubWF0aC5EaXZBcmdzGg4u\",\n            \"bWF0aC5EaXZSZXBseSIAEi4KB0Rpdk1hbnkSDS5tYXRoLkRpdkFyZ3MaDi5t\",\n            \"YXRoLkRpdlJlcGx5IgAoATABEiMKA0ZpYhINLm1hdGguRmliQXJncxoJLm1h\",\n            \"dGguTnVtIgAwARIfCgNTdW0SCS5tYXRoLk51bRoJLm1hdGguTnVtIgAoAWIG\",\n            \"cHJvdG8z\"));\n      descriptor = pbr::FileDescriptor.FromGeneratedCode(descriptorData,\n          new pbr::FileDescriptor[] { },\n          new pbr::GeneratedClrTypeInfo(null, new pbr::GeneratedClrTypeInfo[] {\n            new pbr::GeneratedClrTypeInfo(typeof(global::Math.DivArgs), global::Math.DivArgs.Parser, new[]{ \"Dividend\", \"Divisor\" }, null, null, null),\n            new pbr::GeneratedClrTypeInfo(typeof(global::Math.DivReply), global::Math.DivReply.Parser, new[]{ \"Quotient\", \"Remainder\" }, null, null, null),\n            new pbr::GeneratedClrTypeInfo(typeof(global::Math.FibArgs), global::Math.FibArgs.Parser, new[]{ \"Limit\" }, null, null, null),\n            new pbr::GeneratedClrTypeInfo(typeof(global::Math.Num), global::Math.Num.Parser, new[]{ \"Num_\" }, null, null, null),\n            new pbr::GeneratedClrTypeInfo(typeof(global::Math.FibReply), global::Math.FibReply.Parser, new[]{ \"Count\" }, null, null, null)\n          }));\n    }\n    #endregion\n\n  }\n  #region Messages\n  public sealed partial class DivArgs : pb::IMessage<DivArgs> {\n    private static readonly pb::MessageParser<DivArgs> _parser = new pb::MessageParser<DivArgs>(() => new DivArgs());\n    private pb::UnknownFieldSet _unknownFields;\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public static pb::MessageParser<DivArgs> Parser { get { return _parser; } }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public static pbr::MessageDescriptor Descriptor {\n      get { return global::Math.MathReflection.Descriptor.MessageTypes[0]; }\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    pbr::MessageDescriptor pb::IMessage.Descriptor {\n      get { return Descriptor; }\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public DivArgs() {\n      OnConstruction();\n    }\n\n    partial void OnConstruction();\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public DivArgs(DivArgs other) : this() {\n      dividend_ = other.dividend_;\n      divisor_ = other.divisor_;\n      _unknownFields = pb::UnknownFieldSet.Clone(other._unknownFields);\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public DivArgs Clone() {\n      return new DivArgs(this);\n    }\n\n    /// <summary>Field number for the \"dividend\" field.</summary>\n    public const int DividendFieldNumber = 1;\n    private long dividend_;\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public long Dividend {\n      get { return dividend_; }\n      set {\n        dividend_ = value;\n      }\n    }\n\n    /// <summary>Field number for the \"divisor\" field.</summary>\n    public const int DivisorFieldNumber = 2;\n    private long divisor_;\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public long Divisor {\n      get { return divisor_; }\n      set {\n        divisor_ = value;\n      }\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public override bool Equals(object other) {\n      return Equals(other as DivArgs);\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public bool Equals(DivArgs other) {\n      if (ReferenceEquals(other, null)) {\n        return false;\n      }\n      if (ReferenceEquals(other, this)) {\n        return true;\n      }\n      if (Dividend != other.Dividend) return false;\n      if (Divisor != other.Divisor) return false;\n      return Equals(_unknownFields, other._unknownFields);\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public override int GetHashCode() {\n      int hash = 1;\n      if (Dividend != 0L) hash ^= Dividend.GetHashCode();\n      if (Divisor != 0L) hash ^= Divisor.GetHashCode();\n      if (_unknownFields != null) {\n        hash ^= _unknownFields.GetHashCode();\n      }\n      return hash;\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public override string ToString() {\n      return pb::JsonFormatter.ToDiagnosticString(this);\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public void WriteTo(pb::CodedOutputStream output) {\n      if (Dividend != 0L) {\n        output.WriteRawTag(8);\n        output.WriteInt64(Dividend);\n      }\n      if (Divisor != 0L) {\n        output.WriteRawTag(16);\n        output.WriteInt64(Divisor);\n      }\n      if (_unknownFields != null) {\n        _unknownFields.WriteTo(output);\n      }\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public int CalculateSize() {\n      int size = 0;\n      if (Dividend != 0L) {\n        size += 1 + pb::CodedOutputStream.ComputeInt64Size(Dividend);\n      }\n      if (Divisor != 0L) {\n        size += 1 + pb::CodedOutputStream.ComputeInt64Size(Divisor);\n      }\n      if (_unknownFields != null) {\n        size += _unknownFields.CalculateSize();\n      }\n      return size;\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public void MergeFrom(DivArgs other) {\n      if (other == null) {\n        return;\n      }\n      if (other.Dividend != 0L) {\n        Dividend = other.Dividend;\n      }\n      if (other.Divisor != 0L) {\n        Divisor = other.Divisor;\n      }\n      _unknownFields = pb::UnknownFieldSet.MergeFrom(_unknownFields, other._unknownFields);\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public void MergeFrom(pb::CodedInputStream input) {\n      uint tag;\n      while ((tag = input.ReadTag()) != 0) {\n        switch(tag) {\n          default:\n            _unknownFields = pb::UnknownFieldSet.MergeFieldFrom(_unknownFields, input);\n            break;\n          case 8: {\n            Dividend = input.ReadInt64();\n            break;\n          }\n          case 16: {\n            Divisor = input.ReadInt64();\n            break;\n          }\n        }\n      }\n    }\n\n  }\n\n  public sealed partial class DivReply : pb::IMessage<DivReply> {\n    private static readonly pb::MessageParser<DivReply> _parser = new pb::MessageParser<DivReply>(() => new DivReply());\n    private pb::UnknownFieldSet _unknownFields;\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public static pb::MessageParser<DivReply> Parser { get { return _parser; } }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public static pbr::MessageDescriptor Descriptor {\n      get { return global::Math.MathReflection.Descriptor.MessageTypes[1]; }\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    pbr::MessageDescriptor pb::IMessage.Descriptor {\n      get { return Descriptor; }\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public DivReply() {\n      OnConstruction();\n    }\n\n    partial void OnConstruction();\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public DivReply(DivReply other) : this() {\n      quotient_ = other.quotient_;\n      remainder_ = other.remainder_;\n      _unknownFields = pb::UnknownFieldSet.Clone(other._unknownFields);\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public DivReply Clone() {\n      return new DivReply(this);\n    }\n\n    /// <summary>Field number for the \"quotient\" field.</summary>\n    public const int QuotientFieldNumber = 1;\n    private long quotient_;\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public long Quotient {\n      get { return quotient_; }\n      set {\n        quotient_ = value;\n      }\n    }\n\n    /// <summary>Field number for the \"remainder\" field.</summary>\n    public const int RemainderFieldNumber = 2;\n    private long remainder_;\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public long Remainder {\n      get { return remainder_; }\n      set {\n        remainder_ = value;\n      }\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public override bool Equals(object other) {\n      return Equals(other as DivReply);\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public bool Equals(DivReply other) {\n      if (ReferenceEquals(other, null)) {\n        return false;\n      }\n      if (ReferenceEquals(other, this)) {\n        return true;\n      }\n      if (Quotient != other.Quotient) return false;\n      if (Remainder != other.Remainder) return false;\n      return Equals(_unknownFields, other._unknownFields);\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public override int GetHashCode() {\n      int hash = 1;\n      if (Quotient != 0L) hash ^= Quotient.GetHashCode();\n      if (Remainder != 0L) hash ^= Remainder.GetHashCode();\n      if (_unknownFields != null) {\n        hash ^= _unknownFields.GetHashCode();\n      }\n      return hash;\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public override string ToString() {\n      return pb::JsonFormatter.ToDiagnosticString(this);\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public void WriteTo(pb::CodedOutputStream output) {\n      if (Quotient != 0L) {\n        output.WriteRawTag(8);\n        output.WriteInt64(Quotient);\n      }\n      if (Remainder != 0L) {\n        output.WriteRawTag(16);\n        output.WriteInt64(Remainder);\n      }\n      if (_unknownFields != null) {\n        _unknownFields.WriteTo(output);\n      }\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public int CalculateSize() {\n      int size = 0;\n      if (Quotient != 0L) {\n        size += 1 + pb::CodedOutputStream.ComputeInt64Size(Quotient);\n      }\n      if (Remainder != 0L) {\n        size += 1 + pb::CodedOutputStream.ComputeInt64Size(Remainder);\n      }\n      if (_unknownFields != null) {\n        size += _unknownFields.CalculateSize();\n      }\n      return size;\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public void MergeFrom(DivReply other) {\n      if (other == null) {\n        return;\n      }\n      if (other.Quotient != 0L) {\n        Quotient = other.Quotient;\n      }\n      if (other.Remainder != 0L) {\n        Remainder = other.Remainder;\n      }\n      _unknownFields = pb::UnknownFieldSet.MergeFrom(_unknownFields, other._unknownFields);\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public void MergeFrom(pb::CodedInputStream input) {\n      uint tag;\n      while ((tag = input.ReadTag()) != 0) {\n        switch(tag) {\n          default:\n            _unknownFields = pb::UnknownFieldSet.MergeFieldFrom(_unknownFields, input);\n            break;\n          case 8: {\n            Quotient = input.ReadInt64();\n            break;\n          }\n          case 16: {\n            Remainder = input.ReadInt64();\n            break;\n          }\n        }\n      }\n    }\n\n  }\n\n  public sealed partial class FibArgs : pb::IMessage<FibArgs> {\n    private static readonly pb::MessageParser<FibArgs> _parser = new pb::MessageParser<FibArgs>(() => new FibArgs());\n    private pb::UnknownFieldSet _unknownFields;\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public static pb::MessageParser<FibArgs> Parser { get { return _parser; } }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public static pbr::MessageDescriptor Descriptor {\n      get { return global::Math.MathReflection.Descriptor.MessageTypes[2]; }\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    pbr::MessageDescriptor pb::IMessage.Descriptor {\n      get { return Descriptor; }\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public FibArgs() {\n      OnConstruction();\n    }\n\n    partial void OnConstruction();\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public FibArgs(FibArgs other) : this() {\n      limit_ = other.limit_;\n      _unknownFields = pb::UnknownFieldSet.Clone(other._unknownFields);\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public FibArgs Clone() {\n      return new FibArgs(this);\n    }\n\n    /// <summary>Field number for the \"limit\" field.</summary>\n    public const int LimitFieldNumber = 1;\n    private long limit_;\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public long Limit {\n      get { return limit_; }\n      set {\n        limit_ = value;\n      }\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public override bool Equals(object other) {\n      return Equals(other as FibArgs);\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public bool Equals(FibArgs other) {\n      if (ReferenceEquals(other, null)) {\n        return false;\n      }\n      if (ReferenceEquals(other, this)) {\n        return true;\n      }\n      if (Limit != other.Limit) return false;\n      return Equals(_unknownFields, other._unknownFields);\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public override int GetHashCode() {\n      int hash = 1;\n      if (Limit != 0L) hash ^= Limit.GetHashCode();\n      if (_unknownFields != null) {\n        hash ^= _unknownFields.GetHashCode();\n      }\n      return hash;\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public override string ToString() {\n      return pb::JsonFormatter.ToDiagnosticString(this);\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public void WriteTo(pb::CodedOutputStream output) {\n      if (Limit != 0L) {\n        output.WriteRawTag(8);\n        output.WriteInt64(Limit);\n      }\n      if (_unknownFields != null) {\n        _unknownFields.WriteTo(output);\n      }\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public int CalculateSize() {\n      int size = 0;\n      if (Limit != 0L) {\n        size += 1 + pb::CodedOutputStream.ComputeInt64Size(Limit);\n      }\n      if (_unknownFields != null) {\n        size += _unknownFields.CalculateSize();\n      }\n      return size;\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public void MergeFrom(FibArgs other) {\n      if (other == null) {\n        return;\n      }\n      if (other.Limit != 0L) {\n        Limit = other.Limit;\n      }\n      _unknownFields = pb::UnknownFieldSet.MergeFrom(_unknownFields, other._unknownFields);\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public void MergeFrom(pb::CodedInputStream input) {\n      uint tag;\n      while ((tag = input.ReadTag()) != 0) {\n        switch(tag) {\n          default:\n            _unknownFields = pb::UnknownFieldSet.MergeFieldFrom(_unknownFields, input);\n            break;\n          case 8: {\n            Limit = input.ReadInt64();\n            break;\n          }\n        }\n      }\n    }\n\n  }\n\n  public sealed partial class Num : pb::IMessage<Num> {\n    private static readonly pb::MessageParser<Num> _parser = new pb::MessageParser<Num>(() => new Num());\n    private pb::UnknownFieldSet _unknownFields;\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public static pb::MessageParser<Num> Parser { get { return _parser; } }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public static pbr::MessageDescriptor Descriptor {\n      get { return global::Math.MathReflection.Descriptor.MessageTypes[3]; }\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    pbr::MessageDescriptor pb::IMessage.Descriptor {\n      get { return Descriptor; }\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public Num() {\n      OnConstruction();\n    }\n\n    partial void OnConstruction();\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public Num(Num other) : this() {\n      num_ = other.num_;\n      _unknownFields = pb::UnknownFieldSet.Clone(other._unknownFields);\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public Num Clone() {\n      return new Num(this);\n    }\n\n    /// <summary>Field number for the \"num\" field.</summary>\n    public const int Num_FieldNumber = 1;\n    private long num_;\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public long Num_ {\n      get { return num_; }\n      set {\n        num_ = value;\n      }\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public override bool Equals(object other) {\n      return Equals(other as Num);\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public bool Equals(Num other) {\n      if (ReferenceEquals(other, null)) {\n        return false;\n      }\n      if (ReferenceEquals(other, this)) {\n        return true;\n      }\n      if (Num_ != other.Num_) return false;\n      return Equals(_unknownFields, other._unknownFields);\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public override int GetHashCode() {\n      int hash = 1;\n      if (Num_ != 0L) hash ^= Num_.GetHashCode();\n      if (_unknownFields != null) {\n        hash ^= _unknownFields.GetHashCode();\n      }\n      return hash;\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public override string ToString() {\n      return pb::JsonFormatter.ToDiagnosticString(this);\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public void WriteTo(pb::CodedOutputStream output) {\n      if (Num_ != 0L) {\n        output.WriteRawTag(8);\n        output.WriteInt64(Num_);\n      }\n      if (_unknownFields != null) {\n        _unknownFields.WriteTo(output);\n      }\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public int CalculateSize() {\n      int size = 0;\n      if (Num_ != 0L) {\n        size += 1 + pb::CodedOutputStream.ComputeInt64Size(Num_);\n      }\n      if (_unknownFields != null) {\n        size += _unknownFields.CalculateSize();\n      }\n      return size;\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public void MergeFrom(Num other) {\n      if (other == null) {\n        return;\n      }\n      if (other.Num_ != 0L) {\n        Num_ = other.Num_;\n      }\n      _unknownFields = pb::UnknownFieldSet.MergeFrom(_unknownFields, other._unknownFields);\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public void MergeFrom(pb::CodedInputStream input) {\n      uint tag;\n      while ((tag = input.ReadTag()) != 0) {\n        switch(tag) {\n          default:\n            _unknownFields = pb::UnknownFieldSet.MergeFieldFrom(_unknownFields, input);\n            break;\n          case 8: {\n            Num_ = input.ReadInt64();\n            break;\n          }\n        }\n      }\n    }\n\n  }\n\n  public sealed partial class FibReply : pb::IMessage<FibReply> {\n    private static readonly pb::MessageParser<FibReply> _parser = new pb::MessageParser<FibReply>(() => new FibReply());\n    private pb::UnknownFieldSet _unknownFields;\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public static pb::MessageParser<FibReply> Parser { get { return _parser; } }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public static pbr::MessageDescriptor Descriptor {\n      get { return global::Math.MathReflection.Descriptor.MessageTypes[4]; }\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    pbr::MessageDescriptor pb::IMessage.Descriptor {\n      get { return Descriptor; }\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public FibReply() {\n      OnConstruction();\n    }\n\n    partial void OnConstruction();\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public FibReply(FibReply other) : this() {\n      count_ = other.count_;\n      _unknownFields = pb::UnknownFieldSet.Clone(other._unknownFields);\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public FibReply Clone() {\n      return new FibReply(this);\n    }\n\n    /// <summary>Field number for the \"count\" field.</summary>\n    public const int CountFieldNumber = 1;\n    private long count_;\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public long Count {\n      get { return count_; }\n      set {\n        count_ = value;\n      }\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public override bool Equals(object other) {\n      return Equals(other as FibReply);\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public bool Equals(FibReply other) {\n      if (ReferenceEquals(other, null)) {\n        return false;\n      }\n      if (ReferenceEquals(other, this)) {\n        return true;\n      }\n      if (Count != other.Count) return false;\n      return Equals(_unknownFields, other._unknownFields);\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public override int GetHashCode() {\n      int hash = 1;\n      if (Count != 0L) hash ^= Count.GetHashCode();\n      if (_unknownFields != null) {\n        hash ^= _unknownFields.GetHashCode();\n      }\n      return hash;\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public override string ToString() {\n      return pb::JsonFormatter.ToDiagnosticString(this);\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public void WriteTo(pb::CodedOutputStream output) {\n      if (Count != 0L) {\n        output.WriteRawTag(8);\n        output.WriteInt64(Count);\n      }\n      if (_unknownFields != null) {\n        _unknownFields.WriteTo(output);\n      }\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public int CalculateSize() {\n      int size = 0;\n      if (Count != 0L) {\n        size += 1 + pb::CodedOutputStream.ComputeInt64Size(Count);\n      }\n      if (_unknownFields != null) {\n        size += _unknownFields.CalculateSize();\n      }\n      return size;\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public void MergeFrom(FibReply other) {\n      if (other == null) {\n        return;\n      }\n      if (other.Count != 0L) {\n        Count = other.Count;\n      }\n      _unknownFields = pb::UnknownFieldSet.MergeFrom(_unknownFields, other._unknownFields);\n    }\n\n    [global::System.Diagnostics.DebuggerNonUserCodeAttribute]\n    public void MergeFrom(pb::CodedInputStream input) {\n      uint tag;\n      while ((tag = input.ReadTag()) != 0) {\n        switch(tag) {\n          default:\n            _unknownFields = pb::UnknownFieldSet.MergeFieldFrom(_unknownFields, input);\n            break;\n          case 8: {\n            Count = input.ReadInt64();\n            break;\n          }\n        }\n      }\n    }\n\n  }\n\n  #endregion\n}\n#endregion Designer generated code\n```\n\n\n# Kotlin\n```kotlin\npackage liang.cxx.rommel.evaluationbar\n\nimport android.content.Context\nimport android.graphics.*\nimport android.util.AttributeSet\nimport android.view.MotionEvent\nimport android.view.View\n\n/**\n * Created by Rommel on 2017/12/1.\n */\n\nclass EvaluationProgressBar : View {\n    private var m_density: Float = 0.0f//dp\n    private var img_height: Int = 30//滑块和进度条高度(默认三十)\n    private var m_content: Context? = null\n    //滑块样式\n    private var slider: Bitmap? = null\n    private var m_laughing: Bitmap? = null\n    private var m_satisfactiong: Bitmap? = null\n    private var m_sad: Bitmap? = null\n    //滑块位置\n    var image_postion: Float = 0.0f\n    private //滑块宽度\n    var image_weight: Float = 0.0f\n    private //控件的宽和高\n    var m_weight: Float = 0.0f\n    private var m_height: Float = 0.0f\n    private //每段的长度\n    var m_cell: Float = 0.0f\n    private //是否为第一次加载\n    var is_first = true\n    //画笔\n    private var m_color_back: Paint? = null\n    private var m_color_back_line: Paint? = null\n    private var m_color_back_diver_one: Paint? = null\n    private var m_color_back_diver_two: Paint? = null\n    private var m_color_back_wall: Paint? = null\n    private var back_line = \"#C7C7C7\"\n    private var back_sad = \"#CECECE\"//差评背景\n    private var back_satisfactiong = \"#FFEAB0\"//中评背景\n    private var back_satisfactiong_line = \"#FFD68C\"//中评线框\n    private var back_laughing = \"#FFBBBB\"//好评背景\n    private var back_laughing_line = \"#FF9F9F\"//好评背景\n    private var back_baseground = \"#F8F8F8\"//好评背景\n    private var back_satisfactiong_diver = \"#FFD68C\"//中评分割线\n    private var back_laughing_diver = \"#FF9F9F\"//好评分割线\n    //触摸和滑动是否在滑块上\n    private var is_touch_scope = false\n\n    //滑动监听事件\n    private var volChangeListener: VolChangeListener? = null\n    private var vol = 2\n\n    constructor(context: Context) : super(context) {\n        init(context)\n    }\n\n    constructor(context: Context, attrs: AttributeSet?) : super(context, attrs) {\n        init(context)\n    }\n\n    constructor(context: Context, attrs: AttributeSet?, defStyleAttr: Int) : super(context, attrs, defStyleAttr) {\n        init(context)\n    }\n\n    private fun init(context: Context) {\n        m_density = context.resources.displayMetrics.density\n        m_laughing = zoomImg(BitmapFactory.decodeResource(resources, R.mipmap.icon_laughing))\n        m_satisfactiong = zoomImg(BitmapFactory.decodeResource(resources, R.mipmap.icon_satisfaction))\n        m_sad = zoomImg(BitmapFactory.decodeResource(resources, R.mipmap.icon_sad))\n        image_weight = m_laughing!!.width.toFloat()\n        m_content = context\n        m_height = (m_laughing!!.height + 1).toFloat()\n        //画笔初始化\n        m_color_back = Paint()\n        m_color_back_line = Paint()\n        m_color_back_line!!.style = Paint.Style.STROKE\n        m_color_back_line!!.isAntiAlias = true\n        m_color_back_line!!.strokeMiter = 1.0f\n        m_color_back_diver_one = Paint()\n        m_color_back_diver_two = Paint()\n        m_color_back_diver_one!!.strokeMiter = 1.0F\n        m_color_back_diver_two!!.strokeMiter = 1.0F\n        m_color_back_wall = Paint()\n        m_color_back_wall!!.color = Color.parseColor(back_line)\n        m_color_back_wall!!.style = Paint.Style.STROKE\n        m_color_back_wall!!.isAntiAlias = true\n        m_color_back_wall!!.strokeWidth = 1.0f\n    }\n\n    override fun onDraw(canvas: Canvas) {\n        super.onDraw(canvas)\n        canvas.drawFilter = PaintFlagsDrawFilter(0, Paint.ANTI_ALIAS_FLAG or Paint.FILTER_BITMAP_FLAG)\n        image_postion = if (image_postion < image_weight / 2) image_weight / 2 else image_postion\n        image_postion = if (image_postion > m_weight - image_weight / 2) m_weight - image_weight / 2 else image_postion\n        if (image_postion <= m_cell) {\n            //差评\n            slider = m_sad\n            m_color_back!!.color = Color.parseColor(back_sad)\n            m_color_back_line!!.color = Color.parseColor(back_line)\n        } else if (image_postion > m_cell && image_postion <= m_cell * 2) {\n            //中评\n            slider = m_satisfactiong\n            m_color_back!!.color = Color.parseColor(back_satisfactiong)\n            m_color_back_line!!.color = Color.parseColor(back_satisfactiong_line)\n        } else if (image_postion > m_cell * 2) {\n            //好评\n            slider = m_laughing\n            m_color_back!!.color = Color.parseColor(back_laughing)\n            m_color_back_line!!.color = Color.parseColor(back_laughing_line)\n        }\n        drawWall(canvas)\n        drawBckground(canvas)\n        drawDiverLine(canvas)\n        drawImage(canvas)\n    }\n\n    //绘制最外层线和整体背景\n    fun drawWall(canvas: Canvas) {\n        //外边框\n        var rectf = RectF(2f, 0f, m_weight, m_height)\n        canvas.drawRoundRect(rectf, m_height / 2, m_height / 2, m_color_back_wall)\n        //基础背景\n        var back_base = RectF(3f, 1f, m_weight - 1, m_height - 1)\n        var back_base_color = Paint()\n        back_base_color.color = Color.parseColor(back_baseground)\n        canvas.drawRoundRect(back_base, m_height / 2, m_height / 2, back_base_color)\n    }\n\n    //绘制进度颜色\n    fun drawBckground(canvas: Canvas) {\n        var rectf = RectF(2f, 1f, image_postion + image_weight / 2 - 1, m_height - 1)\n        canvas.drawRoundRect(rectf, m_height / 2, m_height / 2, m_color_back)\n    }\n\n    //根据滑块位置改变边框和分割线颜色\n    fun drawDiverLine(canvas: Canvas) {\n        //根据滑块位置改变外层边框颜色\n        var rectF = RectF(2f, 0f, image_postion + image_weight / 2, m_height)\n        canvas.drawRoundRect(rectF, m_height / 2, m_height / 2, m_color_back_line)\n        if (image_postion <= m_cell) {\n            //差评\n            m_color_back_diver_one!!.color = Color.parseColor(back_line)\n            canvas.drawLine(m_weight / 3, 0f, m_weight / 3, m_height, m_color_back_diver_one)\n            m_color_back_diver_two!!.color = Color.parseColor(back_line)\n            canvas.drawLine(m_weight * 2 / 3, 0f, m_weight * 2 / 3, m_height, m_color_back_diver_two)\n        } else if (image_postion > m_cell && image_postion <= m_cell * 2) {\n            //中评\n            m_color_back_diver_one!!.color = Color.parseColor(back_satisfactiong_diver)\n            canvas.drawLine(m_weight / 3, 0f, m_weight / 3, m_height, m_color_back_diver_one)\n            m_color_back_diver_two!!.color = Color.parseColor(back_line)\n            canvas.drawLine(m_weight * 2 / 3, 0f, m_weight * 2 / 3, m_height, m_color_back_diver_two)\n        } else if (image_postion > m_cell * 2) {\n            //好评\n            m_color_back_diver_one!!.color = Color.parseColor(back_laughing_diver)\n            canvas.drawLine(m_weight / 3, 0f, m_weight / 3, m_height, m_color_back_diver_one)\n            m_color_back_diver_two!!.color = Color.parseColor(back_laughing_diver)\n            canvas.drawLine(m_weight * 2 / 3, 0f, m_weight * 2 / 3, m_height, m_color_back_diver_two)\n        }\n    }\n\n    //绘制滑块\n    fun drawImage(canvas: Canvas) {\n        canvas.drawBitmap(slider, image_postion - image_weight / 2 - 2, 1f, Paint())\n    }\n\n    override fun onLayout(changed: Boolean, left: Int, top: Int, right: Int, bottom: Int) {\n        super.onLayout(changed, left, top, right, bottom)\n        m_weight = (width - 2).toFloat()\n        m_cell = m_weight / 3\n        if (is_first) {\n            //首次加载默认值\n            image_postion = m_weight * 2 / 3\n            is_first = false\n        }\n\n    }\n\n    override fun onMeasure(widthMeasureSpec: Int, heightMeasureSpec: Int) {\n        super.onMeasure(widthMeasureSpec, heightMeasureSpec)\n        var width = getSize((200 * m_density).toInt(), widthMeasureSpec)\n        var height = getSize(m_laughing!!.width + 1, heightMeasureSpec)\n        setMeasuredDimension(width, height)\n    }\n\n    private fun getSize(defaultSize: Int, measureSpec: Int): Int {\n        var m_size = defaultSize\n        var mode = View.MeasureSpec.getMode(measureSpec)\n        var size = MeasureSpec.getSize(measureSpec)\n        when (mode) {\n            MeasureSpec.AT_MOST -> {\n                //当前尺寸是当前View能取的最大尺寸-wrap_content\n                m_size = defaultSize\n            }\n            MeasureSpec.EXACTLY -> {\n                //当前的尺寸就是当前View应该取的尺寸-match_parent\n                m_size = size\n            }\n            MeasureSpec.UNSPECIFIED -> {\n                //父容器没有对当前View有任何限制，当前View可以任意取尺寸-固定尺寸（如100dp\n                m_size = size\n            }\n        }\n        return m_size\n    }\n\n    override fun onTouchEvent(event: MotionEvent): Boolean {\n        var x_postion = event.x\n        when (event.action) {\n            MotionEvent.ACTION_DOWN -> {\n                if (x_postion > image_postion - image_weight / 2\n                        && x < image_postion + image_weight / 2) {\n                    //触摸事件在滑块上\n                    image_postion = x_postion\n                    is_touch_scope = true\n                } else {\n                    //触摸事件不在滑块上\n                    image_postion = x_postion\n                    setImgPostion()\n                    invalidate()\n                    onChange()\n                    return false\n                }\n            }\n            MotionEvent.ACTION_MOVE -> {\n                if (is_touch_scope) {\n                    image_postion = x_postion\n                    invalidate()\n                    onChange()\n                }\n            }\n            MotionEvent.ACTION_UP -> {\n                if (is_touch_scope) {\n                    is_touch_scope = false\n                    setImgPostion()\n                }\n            }\n            MotionEvent.ACTION_CANCEL -> {\n                if (is_touch_scope) {\n                    is_touch_scope = false\n                    setImgPostion()\n                }\n            }\n        }\n        return true\n    }\n\n    private fun setImgPostion() {\n        //松手后滑块走到指定的位置\n        if (image_postion <= m_cell) {\n            //差评\n            image_postion = m_cell\n        } else if (image_postion > m_cell && image_postion <= m_cell * 2) {\n            //中评\n            image_postion = m_cell * 2\n        } else if (image_postion > m_cell * 2) {\n            //好评\n            image_postion = m_cell * 3\n        }\n        invalidate()\n        onChange()\n    }\n\n    //滑块位置变化监听\n    fun onChange() {\n        if (volChangeListener != null) {\n            if (image_postion <= m_cell) {\n                vol = 1\n            } else if (image_postion > m_cell && image_postion <= 2 * m_cell) {\n                vol = 2\n            } else if (image_postion > 2 * m_cell) {\n                vol = 3\n            }\n            volChangeListener!!.onVolChange(vol)\n        }\n    }\n\n    private fun zoomImg(btm: Bitmap): Bitmap {\n        //获取图片宽高\n        var width = btm.width\n        var height = btm.height\n        //计算缩放比例\n        var scaleWidth = (img_height * m_density) / width\n        var scaleHeight = (img_height * m_density) / height\n        //获取Matrix参数\n        var matrix = Matrix()\n        matrix.postScale(scaleWidth, scaleHeight)\n        //返回新的图片\n        return Bitmap.createBitmap(btm, 0, 0, width, height, matrix, true)\n    }\n\n    interface VolChangeListener {\n        fun onVolChange(vol: Int)\n    }\n\n    fun volVhangeListener(volChangeListener :VolChangeListener) {\n        this.volChangeListener = volChangeListener\n    }\n}\n```\n\n\n# HTML\n```html\n<xmp>\n<!DOCTYPE html>\n<html lang=\"zh\">\n<head>\n    <meta charset=\"UTF-8\">\n\t<meta name=\"viewport\" content=\"width=device-width, \n                                 initial-scale=1.0, \n                                 maximum-scale=1.0, \n                                 user-scalable=no\">\n\t\n\t<link rel=\"stylesheet\" href=\"http://cdn.staticfile.org/twitter-bootstrap/3.3.6/css/bootstrap.min.css\">\n\t<link rel=\"stylesheet\" href=\"http://cdn.staticfile.org/twitter-bootstrap/3.3.6/css/bootstrap-theme.min.css\">\n\t<script src=\"http://cdn.staticfile.org/jquery/2.1.4/jquery.min.js\"></script>\n\t<script src=\"http://cdn.staticfile.org/twitter-bootstrap/3.3.6/js/bootstrap.min.js\"></script>\n\n\t<title>测试一下bootstrap</title>\n</head>\n<body>\n<div class=\"container\">\n<ol class=\"breadcrumb\">\n  <li><a href=\"#\">主页</a></li>\n  <li><a href=\"#\">新闻资讯</a></li>\n  <li class=\"active\">新闻正文</li>\n</ol>\n<div class=\"page-header\">\n  <h1>这是新闻的标题\n  <br><small></small></h1>\n</div>\n\t<div class=\"sstarter-template\">\n\t\t<p class=\"lead\">Use this dow project.<br> All yoy barebones HTML document.</p>\n\t\t<p>Google（中文名：谷歌），是一家美国的跨国科技企业，致力于互联网搜索、云计算、广告技术等领域，开发并提供大量基于互联网的产品与服务，其主要利润来自于AdWords等广告服务。Google由当时在斯坦福大学攻读理工博士的拉里·佩奇和谢尔盖·布卢姆共同创建，因此两人也被称为“Google Guys”。</p>\n\t\t<p class=\"lead\">这一段的内容<strong>突出</strong>显示看看效果</p>\n\t\t<address>\n  <strong>Twitter, Inc.</strong><br>\n  795 Folsom Ave, Suite 600<br>\n  San Francisco, CA 94107<br>\n  <abbr title=\"Phone\">P:</abbr> (123) 456-7890\n</address>\n\n<table class=\"table table-striped\">\n      <thead>\n        <tr>\n          <th>#</th>\n          <th>First Name</th>\n          <th>Last Name</th>\n          <th>Username</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr>\n          <th scope=\"row\">1</th>\n          <td>Mark</td>\n          <td>Otto</td>\n          <td>@mdo</td>\n        </tr>\n        <tr>\n          <th scope=\"row\">2</th>\n          <td>Jacob</td>\n          <td>Thornton</td>\n          <td>@fat</td>\n        </tr>\n        <tr>\n          <th scope=\"row\">3</th>\n          <td>Larry</td>\n          <td>the Bird</td>\n          <td>@twitter</td>\n        </tr>\n      </tbody>\n    </table>\n\t</div>\n\t<div class=\"progress\">\n  <div class=\"progress-bar progress-bar-danger progress-bar-striped active\" role=\"progressbar\" aria-valuenow=\"45\" aria-valuemin=\"0\" aria-valuemax=\"100\" style=\"width: 80%\">\n    <span class=\"sr-only\">45% Complete</span>\n  </div>\n</div>\n\t<nav>\n  <ul class=\"pager\">\n    <li><a href=\"#\"><span class=\"glyphicon glyphicon-chevron-left\" aria-hidden=\"true\"></span>前一篇新闻</a></li>\n    <li><a href=\"#\">后一篇新闻<span class=\"glyphicon glyphicon-chevron-right\" aria-hidden=\"true\"></span></a></li>\n  </ul>\n</nav>\n\t<button class=\"btn btn-danger btn-block btn-lg btn-primary\" type=\"button\">退出登录</button>\n</div>\n</body>\n</html>\n<xmp>\n```\n\n# CSS\n```css\n.top{background-color: gray;\n    font-size: 14px; \n      \n}\n.top p{display: inline-block;\n line-height: 20px;\n color:white;\n margin: auto;\n overflow: hidden;\n}\n.top P:nth-child(1){margin-left: 10%;\n}\n.top P:nth-child(2){margin-left: 50%;\n}\n.top P:nth-child(3){margin-left: 5%;\n}\n\n.header img{\n  float: left;\n  margin-left: 8%;\t\n}\n\n.nav-tabs {\n  border-bottom: 0px solid #ddd;\n  height: 82px;\n  margin-top: 20px;\n  \n \n}\n.nav-tabs > li {\n  float: left;\n  margin-top: 20px;\n  font-size: 18px;\n  margin-left: 20px;\n  \n  \n  \n}\n.nav-tabs > li > a {\n  margin-right: 30px;\n  line-height: 1.42857143;\n  border: 0px solid transparent;\n  border-radius: 4px 4px 0 0;\n}\n.nav-tabs > li > a:hover {\n  border-color: #eee #eee #ddd;\n}\n.nav-tabs > li.active > a,\n.nav-tabs > li.active > a:hover,\n.nav-tabs > li.active > a:focus {\n  color: #555;\n  cursor: default;\n  background-color: #fff;\n  border: 1px solid #ddd;\n  border-bottom-color: transparent;\n}\n\n\n.banner img{\n\twidth: 100%;\n}\n\n.xiaotu{text-align: center;\n        padding-left: 50px; \n        float: left;\t\t\n}\n\n.survey{background-color: gray;\n       font-size: 14px;\n       height: 60px;\n       position: relative;\n      \n      \n}\n.survey p{display:inline-block;\n color: white;\n margin: 20px auto;\n overflow: hidden;\n\n}\n.survey P:nth-child(1){margin-left: 10%;\n}\n.survey P:nth-child(2){margin-left: 1%;\n}\n\n\n#nav{padding: 0;\n    margin-left: 40%;\n    position:absolute;\n    display: inline-block;\n}\n#nav ul{list-style-type: none; }\n#nav ul li{float: left;}\n#nav ul li a{text-align: center; \npadding:20px; \ndisplay:block; \ntext-decoration:none; \ncolor:white;\nline-height: 20px; \n}\n#nav ul li a:hover{\n\tbackground-color:white;\n    color:#31B0D5;\n}\n.Introduced{text-align: center;\n           margin-top: 50px;}\n\n.Introduced p{\n   max-width: 900px;\n   margin: 30px auto;\t\n   text-align: left;\n}\n\n\n```\n\n# Javascript\n```javascript\n'use strict';\n\nvar defaults = require('../core/core.defaults');\nvar Element = require('../core/core.element');\nvar helpers = require('../helpers/index');\nvar layouts = require('../core/core.layouts');\n\nvar noop = helpers.noop;\n\ndefaults._set('global', {\n\ttitle: {\n\t\tdisplay: false,\n\t\tfontStyle: 'bold',\n\t\tfullWidth: true,\n\t\tlineHeight: 1.2,\n\t\tpadding: 10,\n\t\tposition: 'top',\n\t\ttext: '',\n\t\tweight: 2000         // by default greater than legend (1000) to be above\n\t}\n});\n\n/**\n * IMPORTANT: this class is exposed publicly as Chart.Legend, backward compatibility required!\n */\nvar Title = Element.extend({\n\tinitialize: function(config) {\n\t\tvar me = this;\n\t\thelpers.extend(me, config);\n\n\t\t// Contains hit boxes for each dataset (in dataset order)\n\t\tme.legendHitBoxes = [];\n\t},\n\n\t// These methods are ordered by lifecycle. Utilities then follow.\n\n\tbeforeUpdate: noop,\n\tupdate: function(maxWidth, maxHeight, margins) {\n\t\tvar me = this;\n\n\t\t// Update Lifecycle - Probably don't want to ever extend or overwrite this function ;)\n\t\tme.beforeUpdate();\n\n\t\t// Absorb the master measurements\n\t\tme.maxWidth = maxWidth;\n\t\tme.maxHeight = maxHeight;\n\t\tme.margins = margins;\n\n\t\t// Dimensions\n\t\tme.beforeSetDimensions();\n\t\tme.setDimensions();\n\t\tme.afterSetDimensions();\n\t\t// Labels\n\t\tme.beforeBuildLabels();\n\t\tme.buildLabels();\n\t\tme.afterBuildLabels();\n\n\t\t// Fit\n\t\tme.beforeFit();\n\t\tme.fit();\n\t\tme.afterFit();\n\t\t//\n\t\tme.afterUpdate();\n\t\treturn me.minSize;\n\n\t},\n\tafterUpdate: noop,\n\n\t//\n\n\tbeforeSetDimensions: noop,\n\tsetDimensions: function() {\n\t\tvar me = this;\n\t\t// Set the unconstrained dimension before label rotation\n\t\tif (me.isHorizontal()) {\n\t\t\t// Reset position before calculating rotation\n\t\t\tme.width = me.maxWidth;\n\t\t\tme.left = 0;\n\t\t\tme.right = me.width;\n\t\t} else {\n\t\t\tme.height = me.maxHeight;\n\n\t\t\t// Reset position before calculating rotation\n\t\t\tme.top = 0;\n\t\t\tme.bottom = me.height;\n\t\t}\n\n\t\t// Reset padding\n\t\tme.paddingLeft = 0;\n\t\tme.paddingTop = 0;\n\t\tme.paddingRight = 0;\n\t\tme.paddingBottom = 0;\n\n\t\t// Reset minSize\n\t\tme.minSize = {\n\t\t\twidth: 0,\n\t\t\theight: 0\n\t\t};\n\t},\n\tafterSetDimensions: noop,\n\n\t//\n\n\tbeforeBuildLabels: noop,\n\tbuildLabels: noop,\n\tafterBuildLabels: noop,\n\n\t//\n\n\tbeforeFit: noop,\n\tfit: function() {\n\t\tvar me = this;\n\t\tvar valueOrDefault = helpers.valueOrDefault;\n\t\tvar opts = me.options;\n\t\tvar display = opts.display;\n\t\tvar fontSize = valueOrDefault(opts.fontSize, defaults.global.defaultFontSize);\n\t\tvar minSize = me.minSize;\n\t\tvar lineCount = helpers.isArray(opts.text) ? opts.text.length : 1;\n\t\tvar lineHeight = helpers.options.toLineHeight(opts.lineHeight, fontSize);\n\t\tvar textSize = display ? (lineCount * lineHeight) + (opts.padding * 2) : 0;\n\n\t\tif (me.isHorizontal()) {\n\t\t\tminSize.width = me.maxWidth; // fill all the width\n\t\t\tminSize.height = textSize;\n\t\t} else {\n\t\t\tminSize.width = textSize;\n\t\t\tminSize.height = me.maxHeight; // fill all the height\n\t\t}\n\n\t\tme.width = minSize.width;\n\t\tme.height = minSize.height;\n\n\t},\n\tafterFit: noop,\n\n\t// Shared Methods\n\tisHorizontal: function() {\n\t\tvar pos = this.options.position;\n\t\treturn pos === 'top' || pos === 'bottom';\n\t},\n\n\t// Actually draw the title block on the canvas\n\tdraw: function() {\n\t\tvar me = this;\n\t\tvar ctx = me.ctx;\n\t\tvar valueOrDefault = helpers.valueOrDefault;\n\t\tvar opts = me.options;\n\t\tvar globalDefaults = defaults.global;\n\n\t\tif (opts.display) {\n\t\t\tvar fontSize = valueOrDefault(opts.fontSize, globalDefaults.defaultFontSize);\n\t\t\tvar fontStyle = valueOrDefault(opts.fontStyle, globalDefaults.defaultFontStyle);\n\t\t\tvar fontFamily = valueOrDefault(opts.fontFamily, globalDefaults.defaultFontFamily);\n\t\t\tvar titleFont = helpers.fontString(fontSize, fontStyle, fontFamily);\n\t\t\tvar lineHeight = helpers.options.toLineHeight(opts.lineHeight, fontSize);\n\t\t\tvar offset = lineHeight / 2 + opts.padding;\n\t\t\tvar rotation = 0;\n\t\t\tvar top = me.top;\n\t\t\tvar left = me.left;\n\t\t\tvar bottom = me.bottom;\n\t\t\tvar right = me.right;\n\t\t\tvar maxWidth, titleX, titleY;\n\n\t\t\tctx.fillStyle = valueOrDefault(opts.fontColor, globalDefaults.defaultFontColor); // render in correct colour\n\t\t\tctx.font = titleFont;\n\n\t\t\t// Horizontal\n\t\t\tif (me.isHorizontal()) {\n\t\t\t\ttitleX = left + ((right - left) / 2); // midpoint of the width\n\t\t\t\ttitleY = top + offset;\n\t\t\t\tmaxWidth = right - left;\n\t\t\t} else {\n\t\t\t\ttitleX = opts.position === 'left' ? left + offset : right - offset;\n\t\t\t\ttitleY = top + ((bottom - top) / 2);\n\t\t\t\tmaxWidth = bottom - top;\n\t\t\t\trotation = Math.PI * (opts.position === 'left' ? -0.5 : 0.5);\n\t\t\t}\n\n\t\t\tctx.save();\n\t\t\tctx.translate(titleX, titleY);\n\t\t\tctx.rotate(rotation);\n\t\t\tctx.textAlign = 'center';\n\t\t\tctx.textBaseline = 'middle';\n\n\t\t\tvar text = opts.text;\n\t\t\tif (helpers.isArray(text)) {\n\t\t\t\tvar y = 0;\n\t\t\t\tfor (var i = 0; i < text.length; ++i) {\n\t\t\t\t\tctx.fillText(text[i], 0, y, maxWidth);\n\t\t\t\t\ty += lineHeight;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tctx.fillText(text, 0, 0, maxWidth);\n\t\t\t}\n\n\t\t\tctx.restore();\n\t\t}\n\t}\n});\n\nfunction createNewTitleBlockAndAttach(chart, titleOpts) {\n\tvar title = new Title({\n\t\tctx: chart.ctx,\n\t\toptions: titleOpts,\n\t\tchart: chart\n\t});\n\n\tlayouts.configure(chart, title, titleOpts);\n\tlayouts.addBox(chart, title);\n\tchart.titleBlock = title;\n}\n\nmodule.exports = {\n\tid: 'title',\n\n\t/**\n\t * Backward compatibility: since 2.1.5, the title is registered as a plugin, making\n\t * Chart.Title obsolete. To avoid a breaking change, we export the Title as part of\n\t * the plugin, which one will be re-exposed in the chart.js file.\n\t * https://github.com/chartjs/Chart.js/pull/2640\n\t * @private\n\t */\n\t_element: Title,\n\n\tbeforeInit: function(chart) {\n\t\tvar titleOpts = chart.options.title;\n\n\t\tif (titleOpts) {\n\t\t\tcreateNewTitleBlockAndAttach(chart, titleOpts);\n\t\t}\n\t},\n\n\tbeforeUpdate: function(chart) {\n\t\tvar titleOpts = chart.options.title;\n\t\tvar titleBlock = chart.titleBlock;\n\n\t\tif (titleOpts) {\n\t\t\thelpers.mergeIf(titleOpts, defaults.global.title);\n\n\t\t\tif (titleBlock) {\n\t\t\t\tlayouts.configure(chart, titleBlock, titleOpts);\n\t\t\t\ttitleBlock.options = titleOpts;\n\t\t\t} else {\n\t\t\t\tcreateNewTitleBlockAndAttach(chart, titleOpts);\n\t\t\t}\n\t\t} else if (titleBlock) {\n\t\t\tlayouts.removeBox(chart, titleBlock);\n\t\t\tdelete chart.titleBlock;\n\t\t}\n\t}\n};\n```\n\n\n# JSON\n\n```json\n{\n    \"version\": \"0.2.0\",\n    \"configurations\": [\n        {\n            \"name\": \"(gdb) Launch\", \n            \"type\": \"cppdbg\",\n            \"request\": \"launch\", \n            \"program\": \"${fileDirname}/${fileBasenameNoExtension}.exe\", \n            \"stopAtEntry\": false, \n            \"cwd\": \"${workspaceRoot}\",\n            \"externalConsole\": true, \n            \"linux\": {\n                \"MIMode\": \"gdb\"\n            },\n            \"osx\": {\n                \"MIMode\": \"lldb\"\n            },\n            \"windows\": { \n                \"MIMode\": \"gdb\",\n                \"miDebuggerPath\": \"gdb.exe\"\n            }\n        }\n    ]\n}\n\n```\n\n# SQL\n\n```sql\n SELECT Company, OrderNumber FROM Orders ORDER BY Company DESC, OrderNumber ASC\n update whut_student SET grade=2017 where id>1003740\n update whut_student SET id=id+1 where id>0\n select COUNT(student_id) from whut_student\n\n select * from whut_student\n where student_id in (select  student_id  from  whut_student  group  by  student_id  having  count(student_id) > 1)\n\n delete from whut_student where id<=137\n UPDATE whut_student SET DEGREE=\"硕士\" WHERE id>0;\n\n SELECT * from whut_student where student_id=1049731702891;\n\n DELETE FROM whut_student WHERE id=1008281\n\n SELECT COUNT(*)  num,student_id FROM whut_student GROUP BY student_id ORDER BY num DESC ;\n```\n\n# Properties\n\n```ini\n## 开发/测试/生产环境分别对应dev/test/prod\n\nserver.port=1000\ndebug=true\ntrace=false\nspring.application.name=blog-web-server\nspring.profiles.active=dev\n\nspring.datasource.name=datasource\nspring.datasource.type=com.alibaba.druid.pool.DruidDataSource\nspring.datasource.druid.filters=stat\nspring.datasource.druid.driver-class-name=com.mysql.jdbc.Driver\nspring.datasource.druid.url=jdbc:mysql://127.0.0.1:3306/acanx?useUnicode=true&characterEncoding=UTF-8&allowMultiQueries=true\nspring.datasource.druid.username=root\nspring.datasource.druid.password=root\nspring.datasource.druid.initial-size=1\nspring.datasource.druid.min-idle=1\nspring.datasource.druid.max-active=20\nspring.datasource.druid.max-wait=60000\nspring.datasource.druid.time-between-eviction-runs-millis=60000\nspring.datasource.druid.min-evictable-idle-time-millis=300000\nspring.datasource.druid.validation-query=SELECT 'x'\nspring.datasource.druid.test-while-idle=true\nspring.datasource.druid.test-on-borrow=false\nspring.datasource.druid.test-on-return=false\nspring.datasource.druid.pool-prepared-statements=false\nspring.datasource.druid.max-pool-prepared-statement-per-connection-size=20\n```\n\n\n# yml\n```yml\n# 设置集群的名字，对应为http://127.0.0.1:9200/中的\"cluster_name\" : \"acanx-es-demo\",\ncluster.name: acanx-es-demo\n# 节点名字，对应为http://127.0.0.1:9200/中的\"name\" : \"node-1001\",\nnode.name: node-1001\nnode.master: true\nnode.data: true\n# 修改ES的监听地址，以便其他机器也可以访问\nnetwork.host: 0.0.0.0\n# 默认端口\nhttp.port: 9200\n# 增加新的CORS参数，这样head插件可以访问ES\nhttp.cors.enabled: true\nhttp.cors.allow-origin: \"*\"\n```\n\n\n# Bash\n```bash\n#!/bin/bash\n# - main program\nset -o errexit -o noglob -o pipefail\n\n# Configuration constants:\n# - Use upper case, underscore-separated names\n# - Use `readonly` keyword to highlight it is a constant\nreadonly GREETING_FORMAT=\"Hello %s!\\n\"\n\n# Global variables:\n\nfunction sayHello {\n    # Variable declarations:\n    # - Always declared using `local` keyword\n    # - Function parameters declared at the beginning of function\n    # - Use meaningful names\n    # - Use all lower case, underscrore-separated names\n    local greeted_name=\"$1\"\n\n    # Variable references:\n    # - Are always wrapped in ${ }\n    # - Are properly quoted to avoid issues with embedded whitespace\n    if [ -z \"${greeted_name}\" ]; then\n        # Return status:\n        # - Use a non-zero value if something went wrong\n        # - If none is specified - zero (success) is used by default\n        return 1\n    else\n        if [ \"${greeted_name}\" == '-' ]; then\n            read greeted_name\n        fi\n        printf \"${GREETING_FORMAT}\" \"${greeted_name}\"\n    fi\n}\n\nfunction toUpperCase {\n    tr \"[a-z]\" \"[A-Z]\"\n}\n\nfunction printError {\n    local message=\"$1\"\n    local red_color='\\e[31;1m'\n    local no_color='\\e[m'\n\n    printf '\\n'${red_color}'ERROR:'${no_color}' %s\\n' \"${message}\" 1>&2\n}\n\n# Main program\n\nsayHello \"Luke Skywalker\"\n\necho \"Han Solo\" | sayHello -\n\necho \"Master Yoda\" | sayHello - | toUpperCase\n\nif ! sayHello; then\n    printError \"You gave no name!\"\n    exit 1\nfi\n\n```\n\n\n# Shell\n```javascript\n#!/bin/sh\necho '============卡密管理==============='\necho '创建卡密类型如下:'\narr=`redis-cli -h 172.17.95.112 keys hardware:bus:*`\n for i in ${arr[@]};\n        do\n        bus=`echo $i | awk -F ':' '{print $3}'`\n        value=`redis-cli --raw -h 172.17.95.112 get $i | grep -Po '\"name\":\".*?\"' | awk -F ':' '{print $2}'`\n         echo $bus、$value ;\n done\n\nread -p '请输入操作:' typevalue\nif [ \"$typevalue\" == \"exit\" ];then\n        exit\nfi\n\nisexist=`redis-cli --raw -h 172.17.95.112 get \"hardware:bus:$typevalue:\"`\nif [ \"$isexist\" == \"\" ];then\n        echo '输入类型不存在'\n        sh $0\nfi\n\n\nread -p '生成数量:' createNum\n\necho $createNum\n\necho \"====================卡密=========================编号:$typevalue\"\noutFile=\"$typevalue-$RANDOM.log\"\nfor((i=0;i<$createNum;i++));\ndo\n        card=`date +%s%N | md5sum | head -c 8`\n        redis-cli -h 172.17.95.112 set \"hardware:card:$card:\" \"$typevalue\" >/dev/null\n        echo \"$card\">>$outFile\n        echo \"$card\"\ndone\necho \"输出文件路径为`pwd`/$outFile\"\necho '====================卡密========================='\nexit\n```\n\n\n# PowerShell\n```powershell\ntitle 修改shift+右击在此处打开PowerShell\nmode con cols=73 lines=20\nrem 验证是否是以管理员身份运行\nset TempFile_Name=%SystemRoot%\\System32\\BatTestUACin_SysRt%Random%.batemp\n( echo \"BAT Test UAC in Temp\" >%TempFile_Name% ) 1>nul 2>nul\nif not exist %TempFile_Name% (\ncolor 0c\necho.\necho.\necho 错误：没有以管理员身份运行该工具。\necho 该工具将无法使用！\necho.\necho 方法：\necho 找到该工具，右击\"以管理员身份运行\"。\necho.\necho 按任意键退出该工具..... & pause >nul\nexit\n)\necho 初始化中，请稍后.....\nrem 设置\"HKCR\\Directory\\Background\\shell\"的所有者为:Everyone\n>>fcc_owner.inf echo.[Version]\n>>fcc_owner.inf echo.Signature = \"$Chicago$\"\n>>fcc_owner.inf echo.\n>>fcc_owner.inf echo.[Registry Keys]\n>>fcc_owner.inf echo.\"CLASSES_ROOT\\Directory\\Background\\shell\", 0, \"O:WD\"\nsecedit /configure /db fcc_owner.sdb /cfg fcc_owner.inf /log fcc_owner.log\ndel fcc_owner.*\n:main\ncls\ncolor 0a\necho *************************************************************************\necho.\necho 该工具用于更改新版windows10系统shift+右键以何种方式打开命令窗口。\necho 系统默认“在此处打开PowerShell”，\necho 此工具可以在“PowerShell”和“CMD”之间切换。\necho.\necho ★注意！请使用管理员权限运行改工具！\necho.\necho 请选择操作：\necho 1、修改为“在此处打开CMD窗口”\necho 2、修改为“在此处打开PowerShell窗口”\necho 3、同时显示1和2\necho.\necho by:frogchou\necho website:frogchou.com\necho *************************************************************************\necho.\nset /p var=请输入序号并回车开始修改：\nif \"%var%\"==\"1\" goto changeCMD\nif \"%var%\"==\"2\" goto changePowerShell\nif \"%var%\"==\"3\" (goto changeShowAll) else (goto error)\n:changeCMD\nreg delete HKCR\\Directory\\Background\\shell\\cmd /v HideBasedOnVelocityId /f\nreg add HKCR\\Directory\\Background\\shell\\cmd /v ShowBasedOnVelocityId /t REG_DWORD /d 6527944 /f\nreg delete HKCR\\Directory\\Background\\shell\\Powershell /v ShowBasedOnVelocityId /f\nreg add HKCR\\Directory\\Background\\shell\\Powershell /v HideBasedOnVelocityId /t REG_DWORD /d 6527944 /f\ngoto end\n:changePowerShell\nreg delete HKCR\\Directory\\Background\\shell\\cmd /v ShowBasedOnVelocityId /f\nreg add HKCR\\Directory\\Background\\shell\\cmd /v HideBasedOnVelocityId /t REG_DWORD /d 6527944 /f\nreg delete HKCR\\Directory\\Background\\shell\\Powershell /v HideBasedOnVelocityId /f\nreg add HKCR\\Directory\\Background\\shell\\Powershell /v ShowBasedOnVelocityId /t REG_DWORD /d 6527944 /f\ngoto end\n:changeShowAll\nreg delete HKCR\\Directory\\Background\\shell\\cmd /v HideBasedOnVelocityId /f\nreg add HKCR\\Directory\\Background\\shell\\cmd /v ShowBasedOnVelocityId /t REG_DWORD /d 6527944 /f\nreg delete HKCR\\Directory\\Background\\shell\\Powershell /v HideBasedOnVelocityId /f\nreg add HKCR\\Directory\\Background\\shell\\Powershell /v ShowBasedOnVelocityId /t REG_DWORD /d 6527944 /f\ngoto end\n:end\necho.\necho 修改完成！按任意键退出.\npause >nul\nexit\n:error\necho.\necho 选择错误！按任意键返回主菜单.\npause >nul\ngoto main\n```\n\n\n# CMD\n```cmd\n@echo off \necho 定时关机DOS命令，使用方式: \"sdat 23:12:12\"; \necho sdat 为命令名称，23:12:12为当天的时间参数\n::set yy=%date:~0,4%\n::set mm=%date:~5,2%\n::set dd=%date:~8,2%\nset h=%time:~0,2%\nset m=%time:~3,2%\nset s=%time:~6,2%\n::echo %yy% %mm% %dd% %h% %m% %s%\n::echo %1 %2 %3\nset /a ts=(%1 - %h%)*3600 + (%2 - %m%)*60 + (%3 - %s%)\nIF /i %ts% LSS 1 (\necho ERROR:Shutdown time must be time in future;\n) ELSE (\necho INFO:System will shutdown after %ts% seconds at %1 : %2 ：%3; \nshutdown /s /t %ts%\n)\n::pause \n```\n\n\n\n# Bat\n```bat\n@echo off\necho.\necho MySQL数据库备份\nset del_date_back=15\nset all_data_back_value=1\nset haoya_bin_path=\"C:\\Program Files\\HaoZip\\\"\nset mysql_bin_path=\"C:\\wamp\\bin\\mysql\\mysql5.5.24\\bin\\\"\nset mysql_data_path=\"C:\\wamp\\bin\\mysql\\mysql5.5.24\\data\\\"\n::set apache_bin_path=\"C:\\wamp\\bin\\apache\\apache2.2.22\\bin\\\"\nset apache_data_path=\"C:\\wamp\\\"\nset data_back_path=\"C:\\dtsbc_data_back\\\"\nset del_file_path=\"C:\\wamp\\www\\dtsbc\\Admin\\Runtime\\\"\nset Ymd=\"%date:~,4%%date:~5,2%%date:~8,2%\"\nset /a t=100+%time:~,2%\nset bakFileNameTail=_BAK_%date:~,4%%date:~5,2%%date:~8,2%_%t:~1%%time:~3,2%%time:~6,2%\necho *****************************\necho.\necho 今天是： %date%_%time%\necho 好压执行路径为： %haoya_bin_path%\necho mysql执行路径为： %mysql_bin_path%\necho mysql数据路径为： %mysql_data_path%\n::echo apache执行路径为： %apache_bin_path%\necho apache数据路径为： %apache_data_path%\necho.\necho *****************************\n:: HaoZipC a -tzip 20161221.zip config\\*\n::set mysql_bin_path = \"C:\\wamp\\bin\\mysql\\mysql5.5.24\\bin\"\n::set apache_bin_path = \"C:\\wamp\\bin\\apache\\apache2.2.22\\bin\"\n::set haoya_bin_path = \"C:\\Program Files\\HaoZip\"\n::创建备份的数据的目录\n\nmd %data_back_path%%Ymd%\n%mysql_bin_path%\\mysqldump -u root --default-character-set=utf8 --databases dtsbc > %data_back_path%%Ymd%\\dtsbc_%bakFileNameTail%.sql\n%mysql_bin_path%\\mysqldump -u root --default-character-set=utf8 --databases mysql > %data_back_path%%Ymd%\\mysql_%bakFileNameTail%.sql\n%mysql_bin_path%\\mysqldump -u root --default-character-set=utf8 --databases bbsdata > %data_back_path%%Ymd%\\bbsdata_%bakFileNameTail%.sql\nnet stop wampapache\nnet stop wampmysqld\nrd/s/q %del_file_path%\n\n%haoya_bin_path%HaoZipC a -tzip %data_back_path%%Ymd%\\dtsbc_mysql_%Ymd%.zip %mysql_data_path%dtsbc\\*\n%haoya_bin_path%HaoZipC a -tzip %data_back_path%%Ymd%\\bbs_mysql_%Ymd%.zip %mysql_data_path%bbs\\*\n%haoya_bin_path%HaoZipC a -tzip %data_back_path%%Ymd%\\mysql_mysql_%Ymd%.zip %mysql_data_path%mysql\\*\n%haoya_bin_path%HaoZipC a -tzip %data_back_path%%Ymd%\\dtsbc_php_%Ymd%.zip %apache_data_path%dtsbc\\*\n%haoya_bin_path%HaoZipC a -tzip %data_back_path%%Ymd%\\bbs_php_%Ymd%.zip %apache_data_path%bbs\\*\n\nif  %date:~9,1% equ %all_data_back_value% ( %haoya_bin_path%HaoZipC a -tzip %data_back_path%%Ymd%\\wamp_%Ymd%.zip %apache_data_path%*)\n::cmd\nnet start wampapache\nnet start wampmysqld\n::set/a n=5\nset/a y=%date:~,4%,m=1%date:~5,2%-100,d=1%date:~8,2%-100\nset/a d-=%del_date_back%\nif %d% gtr 0 goto :ok\n:ov\nset/a \"md=31-!(m-5)-!(m-7)-!(m-10)-!(m-12)-!(m-3)*(3-!(y&3))\"\nset/a d+=md,m-=1\nif %m% equ 0 set/a m=12,y-=1\nif %d% leq 0 goto :ov\n:ok\nset/a md=m*100+d+10000\nset back_data_value=\"%y%%md:~1%\"\necho %del_date_back%天前的日期为：%back_data_value%\ncd %data_back_path%\n\nset /a data_back_value_int=%back_data_value%+0\necho %data_back_value_int%\n::单条语句执行的时候需要的是一个% 在批处理中的话，需要两个%%\nfor /F %%i in ('dir  %data_back_path% /a:d /b') do (if %%i lss %data_back_value_int% ( rd/s/q %%i ))\n::for /F %%i in ('dir  %data_back_path% /a:d /b') do (  if %%i lss %data_back_value_int% ( echo %%i ) else ( echo \"google\" )  )\necho.:P\n\necho MySQL数据库备份完成，请进行检查。。。\n\necho.:P\necho.\n//pause\n::pause\n```\n\n\n\n# Groovy\n```groovy\nerrpattern = ~/Failures: [1-9]+/\nerrpatternSum = ~/passed:\\d+,.*failed:\\d+,/\ndef ratio\nmanager.build.logFile.eachLine{ line ->\n    errmatcher=errpattern.matcher(line)\n    errmatcherSum=errpatternSum.matcher(line)\n    if (errmatcher.find()) {\n        manager.build.@result = hudson.model.Result.UNSTABLE\n    }\n    if(errmatcherSum.find()){\n        numArray = line.findAll(/\\d+/)*.toInteger()\n        manager.listener.logger.println(\">>> number =  \" + numArray)\n        ratio = (numArray[1] / numArray[3]) * 100\n        manager.listener.logger.println(\">>> ratio =  \" + ratio + \"%\")\n    }\n}\n\nratio = Math.round(ratio)\n//add text next to the job build history\nmanager.addShortText(\"failure rate -> \" + ratio + \"%\")\n```\n\n\n# Gradle\n```gradle\napply plugin: 'com.android.application'\n\nandroid {\n    compileSdkVersion 25\n    buildToolsVersion \"25.0.1\"\n    defaultConfig {\n        applicationId \"com.grgbanking.school\"\n        minSdkVersion 15\n        targetSdkVersion 25\n        versionCode 1\n        versionName \"1.0\"\n        testInstrumentationRunner \"android.support.test.runner.AndroidJUnitRunner\"\n    }\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n        }\n    }\n    dataBinding {\n        enabled = true\n    }\n}\n\ndependencies {\n    compile fileTree(dir: 'libs', include: ['*.jar'])\n    androidTestCompile('com.android.support.test.espresso:espresso-core:2.2.2', {\n        exclude group: 'com.android.support', module: 'support-annotations'\n    })\n    compile 'com.android.support:appcompat-v7:25.0.1'\n    compile 'com.jakewharton.rxbinding:rxbinding:0.4.0'\n\n    /*compile 'com.squareup.retrofit2:retrofit:2.1.0'\n    compile 'com.squareup.retrofit2:adapter-rxjava:2.0.0-beta4'*/\n    compile 'com.squareup.retrofit2:retrofit:2.0.0-beta4'\n    compile 'com.squareup.retrofit2:converter-gson:2.0.0-beta4'\n    compile 'com.squareup.retrofit2:adapter-rxjava:2.0.0-beta4'\n\n    compile 'com.squareup.okhttp:okhttp:2.7.5'\n    compile 'com.alibaba:fastjson:1.2.20'\n    compile 'org.apache.commons:commons-lang3:3.5'\n\n    testCompile 'junit:junit:4.12'\n}\n\n```\n\n#  Git\n```git\n# 1.初始化git\ngit init \n\n# 2.查看git修改状态：\ngit status\n\n# 3.将项目保存到仓库\n先 git add .\n再 git commit -m \"备注\"\n\n# 4. 查看最新三个仓库中的项目\ngit log\n\n# 5. 查看所有仓库中的项目\ngit reflog\n\n# 6.恢复成某个项目\ngit reset --hard 这里写id\n\n# 7.将github中的项目拷贝下来\ngit clone 地址\n\n# 8.将本地项目传到github \ngit push origin master\n\n\n# 9.更新本地项目，与gitbub一致\ngit pull\n\n# 10.将本地项目和新建的远程仓库关联起来，必须是未初始化仓库\ngit remote add origin git@github.com:michaelliao/learngit.git\n\n# 11.把本地库的内容推送到远程，用git push命令\ngit push -u origin master    # （由于远程库是空的，我们第一次推送master分支时，加上了-u参数，\n\t\t\t\tGit不但会把本地的master分支内容推送的远程新的master分支，\n\t\t\t\t还会把本地的master分支和远程的master分支关联起来，\n\t\t\t\t在以后的推送或者拉取时就可以简化命令。）\n\n```\n\n\n···\n···\n···\n\n# 待添加\n```js\nconnect: {\n    server: {\n        options: {\n            port: 9100,\n            hostname: '*',\n            base: '.',\n            keepalive: true\n        }\n    }\n}\n```\n# 待添加\n\n```js\nthis.base_uri = this.config.base_uri || this.prefs.get(\"app-base_uri\") || \"http://localhost:9200\";\n```\n\n# 待添加\n\n```js\nthis.base_uri = this.config.base_uri || this.prefs.get(\"app-base_uri\") || \"http://127.0.0.1:9200\";\n```\n\n\n# 待添加\n \n```\n npm install\n```\n\n# 待添加\n\n\n# 待添加\n\n\n\n","slug":"MD代码样式","published":1,"updated":"2025-03-26T06:43:53.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cm8pr0j2j001ygskz5id4hg53","content":"<h1 id=\"代码样式\"><a href=\"#代码样式\" class=\"headerlink\" title=\"代码样式\"></a>代码样式</h1><h1 id=\"Java\"><a href=\"#Java\" class=\"headerlink\" title=\"Java\"></a>Java</h1><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">package</span> com.acanx.thread;<br><br><span class=\"hljs-keyword\">import</span> org.slf4j.Logger;<br><span class=\"hljs-keyword\">import</span> org.slf4j.LoggerFactory;<br><span class=\"hljs-keyword\">import</span> java.util.concurrent.ExecutionException;<br><span class=\"hljs-keyword\">import</span> java.util.concurrent.FutureTask;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * Created by ACANX on 2018/9/3.</span><br><span class=\"hljs-comment\"> * MultiThread :</span><br><span class=\"hljs-comment\"> * &lt;p&gt;</span><br><span class=\"hljs-comment\"> * &lt;p&gt;</span><br><span class=\"hljs-comment\"> * 1.继承Thread类，重写该类的run()方法。</span><br><span class=\"hljs-comment\"> * 2.实现Runnable接口，并重写该接口的run()方法，该run()方法同样是线程执行体，</span><br><span class=\"hljs-comment\"> * 创建Runnable实现类的实例，并以此实例作为Thread类的target来创建Thread对象，</span><br><span class=\"hljs-comment\"> * 该Thread对象才是真正的线程对象。</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">MultiThread</span> </span>&#123;<br><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">final</span> Logger logger = LoggerFactory.getLogger(MultiThread.class);<br><br>    <span class=\"hljs-keyword\">private</span> WhutStudent whutStudent;<br><br><br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">main</span><span class=\"hljs-params\">(String[] args)</span> </span>&#123;<br>        Thread.currentThread().setName(<span class=\"hljs-string\">&quot;Main Thread:&quot;</span>);<br>        String str = <span class=\"hljs-string\">&quot; 1234566&quot;</span>;<br>        logger.debug(<span class=\"hljs-string\">&quot;-------程序启动------------------------&quot;</span>);<br><br>        <span class=\"hljs-comment\">//在类中的写法  继承Thread类</span><br>        Thread threadByThreadInMain = <span class=\"hljs-keyword\">new</span> Thread() &#123;<br>            <span class=\"hljs-keyword\">int</span> j = <span class=\"hljs-number\">1</span>;<br>            <span class=\"hljs-meta\">@Override</span><br>            <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">run</span><span class=\"hljs-params\">()</span> </span>&#123;<br>                Thread.currentThread().setName(<span class=\"hljs-string\">&quot;threadByThreadInMain &quot;</span>);<br>                <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">int</span> j = <span class=\"hljs-number\">0</span>; j &lt; <span class=\"hljs-number\">100</span>; j++) &#123;<br>                    logger.debug(Thread.currentThread().getName() + <span class=\"hljs-string\">&quot; &quot;</span> + j );<br>                    <span class=\"hljs-keyword\">try</span> &#123;<br>                        Thread.sleep(<span class=\"hljs-number\">100</span>);<br>                    &#125; <span class=\"hljs-keyword\">catch</span> (InterruptedException e) &#123;<br>                        e.printStackTrace();<br>                    &#125;<br>                    WhutStudent w=WhutStudent.getInstance();<br>                    logger.debug(w.getStudentId()+<span class=\"hljs-string\">&quot; &quot;</span>+Thread.currentThread().getName());<br>                    w.setStudentId(<span class=\"hljs-string\">&quot;StudentID:threadByThreadInMain&quot;</span>+j);<br><br>                &#125;<br>            &#125;<br>        &#125;;<br><br>        <span class=\"hljs-comment\">//在类中的写法 实现Runnable接口</span><br>        Thread threadByRunnableInMain = <span class=\"hljs-keyword\">new</span> Thread(<span class=\"hljs-keyword\">new</span> Runnable() &#123;<br>            <span class=\"hljs-meta\">@Override</span><br>            <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">run</span><span class=\"hljs-params\">()</span> </span>&#123;<br>                Thread.currentThread().setName(<span class=\"hljs-string\">&quot;threadByRunnableInMain &quot;</span>);<br>                logger.debug(<span class=\"hljs-string\">&quot;new Thread 2&quot;</span>);<span class=\"hljs-comment\">//输出:new Thread 2</span><br>                <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">int</span> j = <span class=\"hljs-number\">0</span>; j &lt; <span class=\"hljs-number\">100</span>; j++) &#123;<br>                    logger.debug(Thread.currentThread().getName() + <span class=\"hljs-string\">&quot; &quot;</span> + j + <span class=\"hljs-string\">&quot;   &quot;</span> );<br>                    <span class=\"hljs-keyword\">try</span> &#123;<br>                        Thread.sleep(<span class=\"hljs-number\">100</span>);<br>                    &#125; <span class=\"hljs-keyword\">catch</span> (InterruptedException e) &#123;<br>                        e.printStackTrace();<br>                    &#125;<br>                    WhutStudent w=WhutStudent.getInstance();<br>                    logger.debug(w.getStudentId()+<span class=\"hljs-string\">&quot; &quot;</span>+Thread.currentThread().getName());<br>                    w.setStudentId(<span class=\"hljs-string\">&quot;StudentID:threadByRunnableInMain&quot;</span>+j);<br><br>                &#125;<br>            &#125;<br>        &#125;);<br><br>        MyThread myThread = <span class=\"hljs-keyword\">new</span> MyThread();<br>        myThread.start();<br><br>        MyRunnable myRunnable = <span class=\"hljs-keyword\">new</span> MyRunnable();<br>        Thread myRunnableThread=<span class=\"hljs-keyword\">new</span> Thread(myRunnable);<br>        myRunnableThread.start();<br><br>        threadByThreadInMain.start();<br><br><br>        threadByRunnableInMain.start();<br><br><br><br>        <span class=\"hljs-comment\">//执行Callable 方式，需要FutureTask 实现实现，用于接收运算结果</span><br>        FutureTask&lt;Integer&gt; futureTask = <span class=\"hljs-keyword\">new</span> FutureTask&lt;Integer&gt;(<span class=\"hljs-keyword\">new</span> MyCallable());<br>        <span class=\"hljs-keyword\">new</span> Thread(futureTask).start();<br>        <span class=\"hljs-comment\">//接收线程运算后的结果</span><br>        <span class=\"hljs-keyword\">try</span> &#123;<br>            Integer sum = futureTask.get();<br>            logger.debug(<span class=\"hljs-string\">&quot;sum=&quot;</span>+sum);<br>        &#125; <span class=\"hljs-keyword\">catch</span> (InterruptedException e) &#123;<br>            e.printStackTrace();<br>        &#125; <span class=\"hljs-keyword\">catch</span> (ExecutionException e) &#123;<br>            e.printStackTrace();<br>        &#125;<br><br><br>    &#125;<br>&#125;<br><br><br></code></pre></td></tr></table></figure>\n\n\n\n\n<h1 id=\"Python\"><a href=\"#Python\" class=\"headerlink\" title=\"Python\"></a>Python</h1><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-comment\"># -*- coding: utf-8 -*-</span><br><span class=\"hljs-keyword\">import</span> os<br><span class=\"hljs-keyword\">import</span> sys<br><span class=\"hljs-keyword\">import</span> urllib2<br><span class=\"hljs-keyword\">import</span> requests<br><span class=\"hljs-keyword\">import</span> re<br><span class=\"hljs-keyword\">from</span> lxml <span class=\"hljs-keyword\">import</span> etree<br><br><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">StringListSave</span>(<span class=\"hljs-params\">save_path, filename, slist</span>):</span><br>    <span class=\"hljs-keyword\">if</span> <span class=\"hljs-keyword\">not</span> os.path.exists(save_path):<br>        os.makedirs(save_path)<br>    path = save_path+<span class=\"hljs-string\">&quot;/&quot;</span>+filename+<span class=\"hljs-string\">&quot;.txt&quot;</span><br>    <span class=\"hljs-keyword\">with</span> <span class=\"hljs-built_in\">open</span>(path, <span class=\"hljs-string\">&quot;w+&quot;</span>) <span class=\"hljs-keyword\">as</span> fp:<br>        <span class=\"hljs-keyword\">for</span> s <span class=\"hljs-keyword\">in</span> slist:<br>            fp.write(<span class=\"hljs-string\">&quot;%s\\t\\t%s\\n&quot;</span> % (s[<span class=\"hljs-number\">0</span>].encode(<span class=\"hljs-string\">&quot;utf8&quot;</span>), s[<span class=\"hljs-number\">1</span>].encode(<span class=\"hljs-string\">&quot;utf8&quot;</span>)))<br><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">Page_Info</span>(<span class=\"hljs-params\">myPage</span>):</span><br>    <span class=\"hljs-string\">&#x27;&#x27;&#x27;Regex&#x27;&#x27;&#x27;</span><br>    mypage_Info = re.findall(<span class=\"hljs-string\">r&#x27;&lt;div class=&quot;titleBar&quot; id=&quot;.*?&quot;&gt;&lt;h2&gt;(.*?)&lt;/h2&gt;&lt;div class=&quot;more&quot;&gt;&lt;a href=&quot;(.*?)&quot;&gt;.*?&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&#x27;</span>, myPage, re.S)<br>    <span class=\"hljs-keyword\">return</span> mypage_Info<br><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">New_Page_Info</span>(<span class=\"hljs-params\">new_page</span>):</span><br>    <span class=\"hljs-string\">&#x27;&#x27;&#x27;Regex(slowly) or Xpath(fast)&#x27;&#x27;&#x27;</span><br>    <span class=\"hljs-comment\"># new_page_Info = re.findall(r&#x27;&lt;td class=&quot;.*?&quot;&gt;.*?&lt;a href=&quot;(.*?)\\.html&quot;.*?&gt;(.*?)&lt;/a&gt;&lt;/td&gt;&#x27;, new_page, re.S)</span><br>    <span class=\"hljs-comment\"># # new_page_Info = re.findall(r&#x27;&lt;td class=&quot;.*?&quot;&gt;.*?&lt;a href=&quot;(.*?)&quot;&gt;(.*?)&lt;/a&gt;&lt;/td&gt;&#x27;, new_page, re.S) # bugs</span><br>    <span class=\"hljs-comment\"># results = []</span><br>    <span class=\"hljs-comment\"># for url, item in new_page_Info:</span><br>    <span class=\"hljs-comment\">#     results.append((item, url+&quot;.html&quot;))</span><br>    <span class=\"hljs-comment\"># return results</span><br>    dom = etree.HTML(new_page)<br>    new_items = dom.xpath(<span class=\"hljs-string\">&#x27;//tr/td/a/text()&#x27;</span>)<br>    new_urls = dom.xpath(<span class=\"hljs-string\">&#x27;//tr/td/a/@href&#x27;</span>)<br>    <span class=\"hljs-keyword\">assert</span>(<span class=\"hljs-built_in\">len</span>(new_items) == <span class=\"hljs-built_in\">len</span>(new_urls))<br>    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-built_in\">zip</span>(new_items, new_urls)<br><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">Spider</span>(<span class=\"hljs-params\">url</span>):</span><br>    i = <span class=\"hljs-number\">0</span><br>    <span class=\"hljs-built_in\">print</span> <span class=\"hljs-string\">&quot;downloading &quot;</span>, url<br>    myPage = requests.get(url).content.decode(<span class=\"hljs-string\">&quot;gbk&quot;</span>)<br>    <span class=\"hljs-comment\"># myPage = urllib2.urlopen(url).read().decode(&quot;gbk&quot;)</span><br>    myPageResults = Page_Info(myPage)<br>    save_path = <span class=\"hljs-string\">u&quot;网易新闻抓取&quot;</span><br>    filename = <span class=\"hljs-built_in\">str</span>(i)+<span class=\"hljs-string\">&quot;_&quot;</span>+<span class=\"hljs-string\">u&quot;新闻排行榜&quot;</span><br>    StringListSave(save_path, filename, myPageResults)<br>    i += <span class=\"hljs-number\">1</span><br>    <span class=\"hljs-keyword\">for</span> item, url <span class=\"hljs-keyword\">in</span> myPageResults:<br>        <span class=\"hljs-built_in\">print</span> <span class=\"hljs-string\">&quot;downloading &quot;</span>, url<br>        new_page = requests.get(url).content.decode(<span class=\"hljs-string\">&quot;gbk&quot;</span>)<br>        <span class=\"hljs-comment\"># new_page = urllib2.urlopen(url).read().decode(&quot;gbk&quot;)</span><br>        newPageResults = New_Page_Info(new_page)<br>        filename = <span class=\"hljs-built_in\">str</span>(i)+<span class=\"hljs-string\">&quot;_&quot;</span>+item<br>        StringListSave(save_path, filename, newPageResults)<br>        i += <span class=\"hljs-number\">1</span><br><br><br><span class=\"hljs-keyword\">if</span> __name__ == <span class=\"hljs-string\">&#x27;__main__&#x27;</span>:<br>    <span class=\"hljs-built_in\">print</span> <span class=\"hljs-string\">&quot;start&quot;</span><br>    start_url = <span class=\"hljs-string\">&quot;http://news.163.com/rank/&quot;</span><br>    Spider(start_url)<br>    <span class=\"hljs-built_in\">print</span> <span class=\"hljs-string\">&quot;end&quot;</span><br><br></code></pre></td></tr></table></figure>\n\n<h1 id=\"PHP\"><a href=\"#PHP\" class=\"headerlink\" title=\"PHP\"></a>PHP</h1><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs php\"><span class=\"hljs-meta\">&lt;?php</span><br><span class=\"hljs-keyword\">namespace</span> <span class=\"hljs-title\">PhpOffice</span>\\<span class=\"hljs-title\">PhpSpreadsheet</span>;<br><span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">PhpOffice</span>\\<span class=\"hljs-title\">PhpSpreadsheet</span>\\<span class=\"hljs-title\">Shared</span>\\<span class=\"hljs-title\">File</span>;<br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * Factory to create readers and writers easily.</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> * It is not required to use this class, but it should make it easier to read and write files.</span><br><span class=\"hljs-comment\"> * Especially for reading files with an unknown format.</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">abstract</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">IOFactory</span></span><br><span class=\"hljs-class\"></span>&#123;<br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-built_in\">static</span> <span class=\"hljs-variable\">$readers</span> = [<br>        <span class=\"hljs-string\">&#x27;Xlsx&#x27;</span> =&gt; Reader\\Xlsx::class,<br>        <span class=\"hljs-string\">&#x27;Xls&#x27;</span> =&gt; Reader\\Xls::class,<br>        <span class=\"hljs-string\">&#x27;Xml&#x27;</span> =&gt; Reader\\Xml::class,<br>        <span class=\"hljs-string\">&#x27;Ods&#x27;</span> =&gt; Reader\\Ods::class,<br>        <span class=\"hljs-string\">&#x27;Slk&#x27;</span> =&gt; Reader\\Slk::class,<br>        <span class=\"hljs-string\">&#x27;Gnumeric&#x27;</span> =&gt; Reader\\Gnumeric::class,<br>        <span class=\"hljs-string\">&#x27;Html&#x27;</span> =&gt; Reader\\Html::class,<br>        <span class=\"hljs-string\">&#x27;Csv&#x27;</span> =&gt; Reader\\Csv::class,<br>    ];<br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-built_in\">static</span> <span class=\"hljs-variable\">$writers</span> = [<br>        <span class=\"hljs-string\">&#x27;Xls&#x27;</span> =&gt; Writer\\Xls::class,<br>        <span class=\"hljs-string\">&#x27;Xlsx&#x27;</span> =&gt; Writer\\Xlsx::class,<br>        <span class=\"hljs-string\">&#x27;Ods&#x27;</span> =&gt; Writer\\Ods::class,<br>        <span class=\"hljs-string\">&#x27;Csv&#x27;</span> =&gt; Writer\\Csv::class,<br>        <span class=\"hljs-string\">&#x27;Html&#x27;</span> =&gt; Writer\\Html::class,<br>        <span class=\"hljs-string\">&#x27;Tcpdf&#x27;</span> =&gt; Writer\\Pdf\\Tcpdf::class,<br>        <span class=\"hljs-string\">&#x27;Dompdf&#x27;</span> =&gt; Writer\\Pdf\\Dompdf::class,<br>        <span class=\"hljs-string\">&#x27;Mpdf&#x27;</span> =&gt; Writer\\Pdf\\Mpdf::class,<br>    ];<br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * Create Writer\\IWriter.</span><br><span class=\"hljs-comment\">     *</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> Spreadsheet $spreadsheet</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> string $writerType Example: Xlsx</span><br><span class=\"hljs-comment\">     *</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@throws</span> Writer\\Exception</span><br><span class=\"hljs-comment\">     *</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@return</span> Writer\\IWriter</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-built_in\">static</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">createWriter</span>(<span class=\"hljs-params\">Spreadsheet <span class=\"hljs-variable\">$spreadsheet</span>, <span class=\"hljs-variable\">$writerType</span></span>)</span><br><span class=\"hljs-function\">    </span>&#123;<br>        <span class=\"hljs-keyword\">if</span> (!<span class=\"hljs-keyword\">isset</span>(<span class=\"hljs-built_in\">self</span>::<span class=\"hljs-variable\">$writers</span>[<span class=\"hljs-variable\">$writerType</span>])) &#123;<br>            <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> Writer\\<span class=\"hljs-built_in\">Exception</span>(<span class=\"hljs-string\">&quot;No writer found for type <span class=\"hljs-subst\">$writerType</span>&quot;</span>);<br>        &#125;<br>        <span class=\"hljs-comment\">// Instantiate writer</span><br>        <span class=\"hljs-variable\">$className</span> = <span class=\"hljs-built_in\">self</span>::<span class=\"hljs-variable\">$writers</span>[<span class=\"hljs-variable\">$writerType</span>];<br>        <span class=\"hljs-variable\">$writer</span> = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-variable\">$className</span>(<span class=\"hljs-variable\">$spreadsheet</span>);<br>        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable\">$writer</span>;<br>    &#125;<br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * Create Reader\\IReader.</span><br><span class=\"hljs-comment\">     *</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> string $readerType Example: Xlsx</span><br><span class=\"hljs-comment\">     *</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@throws</span> Reader\\Exception</span><br><span class=\"hljs-comment\">     *</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@return</span> Reader\\IReader</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-built_in\">static</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">createReader</span>(<span class=\"hljs-params\"><span class=\"hljs-variable\">$readerType</span></span>)</span><br><span class=\"hljs-function\">    </span>&#123;<br>        <span class=\"hljs-keyword\">if</span> (!<span class=\"hljs-keyword\">isset</span>(<span class=\"hljs-built_in\">self</span>::<span class=\"hljs-variable\">$readers</span>[<span class=\"hljs-variable\">$readerType</span>])) &#123;<br>            <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> Reader\\<span class=\"hljs-built_in\">Exception</span>(<span class=\"hljs-string\">&quot;No reader found for type <span class=\"hljs-subst\">$readerType</span>&quot;</span>);<br>        &#125;<br>        <span class=\"hljs-comment\">// Instantiate reader</span><br>        <span class=\"hljs-variable\">$className</span> = <span class=\"hljs-built_in\">self</span>::<span class=\"hljs-variable\">$readers</span>[<span class=\"hljs-variable\">$readerType</span>];<br>        <span class=\"hljs-variable\">$reader</span> = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-variable\">$className</span>();<br>        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable\">$reader</span>;<br>    &#125;<br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * Loads Spreadsheet from file using automatic Reader\\IReader resolution.</span><br><span class=\"hljs-comment\">     *</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> string $pFilename The name of the spreadsheet file</span><br><span class=\"hljs-comment\">     *</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@throws</span> Reader\\Exception</span><br><span class=\"hljs-comment\">     *</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@return</span> Spreadsheet</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-built_in\">static</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">load</span>(<span class=\"hljs-params\"><span class=\"hljs-variable\">$pFilename</span></span>)</span><br><span class=\"hljs-function\">    </span>&#123;<br>        <span class=\"hljs-variable\">$reader</span> = <span class=\"hljs-built_in\">self</span>::createReaderForFile(<span class=\"hljs-variable\">$pFilename</span>);<br>        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable\">$reader</span>-&gt;load(<span class=\"hljs-variable\">$pFilename</span>);<br>    &#125;<br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * Identify file type using automatic Reader\\IReader resolution.</span><br><span class=\"hljs-comment\">     *</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> string $pFilename The name of the spreadsheet file to identify</span><br><span class=\"hljs-comment\">     *</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@throws</span> Reader\\Exception</span><br><span class=\"hljs-comment\">     *</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@return</span> string</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-built_in\">static</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">identify</span>(<span class=\"hljs-params\"><span class=\"hljs-variable\">$pFilename</span></span>)</span><br><span class=\"hljs-function\">    </span>&#123;<br>        <span class=\"hljs-variable\">$reader</span> = <span class=\"hljs-built_in\">self</span>::createReaderForFile(<span class=\"hljs-variable\">$pFilename</span>);<br>        <span class=\"hljs-variable\">$className</span> = get_class(<span class=\"hljs-variable\">$reader</span>);<br>        <span class=\"hljs-variable\">$classType</span> = explode(<span class=\"hljs-string\">&#x27;\\\\&#x27;</span>, <span class=\"hljs-variable\">$className</span>);<br>        <span class=\"hljs-keyword\">unset</span>(<span class=\"hljs-variable\">$reader</span>);<br>        <span class=\"hljs-keyword\">return</span> array_pop(<span class=\"hljs-variable\">$classType</span>);<br>    &#125;<br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * Create Reader\\IReader for file using automatic Reader\\IReader resolution.</span><br><span class=\"hljs-comment\">     *</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> string $filename The name of the spreadsheet file</span><br><span class=\"hljs-comment\">     *</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@throws</span> Reader\\Exception</span><br><span class=\"hljs-comment\">     *</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@return</span> Reader\\IReader</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-built_in\">static</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">createReaderForFile</span>(<span class=\"hljs-params\"><span class=\"hljs-variable\">$filename</span></span>)</span><br><span class=\"hljs-function\">    </span>&#123;<br>        File::assertFile(<span class=\"hljs-variable\">$filename</span>);<br>        <span class=\"hljs-comment\">// First, lucky guess by inspecting file extension</span><br>        <span class=\"hljs-variable\">$guessedReader</span> = <span class=\"hljs-built_in\">self</span>::getReaderTypeFromExtension(<span class=\"hljs-variable\">$filename</span>);<br>        <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-variable\">$guessedReader</span> !== <span class=\"hljs-literal\">null</span>) &#123;<br>            <span class=\"hljs-variable\">$reader</span> = <span class=\"hljs-built_in\">self</span>::createReader(<span class=\"hljs-variable\">$guessedReader</span>);<br>            <span class=\"hljs-comment\">// Let&#x27;s see if we are lucky</span><br>            <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">isset</span>(<span class=\"hljs-variable\">$reader</span>) &amp;&amp; <span class=\"hljs-variable\">$reader</span>-&gt;canRead(<span class=\"hljs-variable\">$filename</span>)) &#123;<br>                <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable\">$reader</span>;<br>            &#125;<br>        &#125;<br>        <span class=\"hljs-comment\">// If we reach here then &quot;lucky guess&quot; didn&#x27;t give any result</span><br>        <span class=\"hljs-comment\">// Try walking through all the options in self::$autoResolveClasses</span><br>        <span class=\"hljs-keyword\">foreach</span> (<span class=\"hljs-built_in\">self</span>::<span class=\"hljs-variable\">$readers</span> <span class=\"hljs-keyword\">as</span> <span class=\"hljs-variable\">$type</span> =&gt; <span class=\"hljs-variable\">$class</span>) &#123;<br>            <span class=\"hljs-comment\">//    Ignore our original guess, we know that won&#x27;t work</span><br>            <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-variable\">$type</span> !== <span class=\"hljs-variable\">$guessedReader</span>) &#123;<br>                <span class=\"hljs-variable\">$reader</span> = <span class=\"hljs-built_in\">self</span>::createReader(<span class=\"hljs-variable\">$type</span>);<br>                <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-variable\">$reader</span>-&gt;canRead(<span class=\"hljs-variable\">$filename</span>)) &#123;<br>                    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable\">$reader</span>;<br>                &#125;<br>            &#125;<br>        &#125;<br>        <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> Reader\\<span class=\"hljs-built_in\">Exception</span>(<span class=\"hljs-string\">&#x27;Unable to identify a reader for this file&#x27;</span>);<br>    &#125;<br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * Guess a reader type from the file extension, if any.</span><br><span class=\"hljs-comment\">     *</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> string $filename</span><br><span class=\"hljs-comment\">     *</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@return</span> null|string</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-built_in\">static</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">getReaderTypeFromExtension</span>(<span class=\"hljs-params\"><span class=\"hljs-variable\">$filename</span></span>)</span><br><span class=\"hljs-function\">    </span>&#123;<br>        <span class=\"hljs-variable\">$pathinfo</span> = pathinfo(<span class=\"hljs-variable\">$filename</span>);<br>        <span class=\"hljs-keyword\">if</span> (!<span class=\"hljs-keyword\">isset</span>(<span class=\"hljs-variable\">$pathinfo</span>[<span class=\"hljs-string\">&#x27;extension&#x27;</span>])) &#123;<br>            <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">null</span>;<br>        &#125;<br>        <span class=\"hljs-keyword\">switch</span> (strtolower(<span class=\"hljs-variable\">$pathinfo</span>[<span class=\"hljs-string\">&#x27;extension&#x27;</span>])) &#123;<br>            <span class=\"hljs-keyword\">case</span> <span class=\"hljs-string\">&#x27;xlsx&#x27;</span>: <span class=\"hljs-comment\">// Excel (OfficeOpenXML) Spreadsheet</span><br>            <span class=\"hljs-keyword\">case</span> <span class=\"hljs-string\">&#x27;xlsm&#x27;</span>: <span class=\"hljs-comment\">// Excel (OfficeOpenXML) Macro Spreadsheet (macros will be discarded)</span><br>            <span class=\"hljs-keyword\">case</span> <span class=\"hljs-string\">&#x27;xltx&#x27;</span>: <span class=\"hljs-comment\">// Excel (OfficeOpenXML) Template</span><br>            <span class=\"hljs-keyword\">case</span> <span class=\"hljs-string\">&#x27;xltm&#x27;</span>: <span class=\"hljs-comment\">// Excel (OfficeOpenXML) Macro Template (macros will be discarded)</span><br>                <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">&#x27;Xlsx&#x27;</span>;<br>            <span class=\"hljs-keyword\">case</span> <span class=\"hljs-string\">&#x27;xls&#x27;</span>: <span class=\"hljs-comment\">// Excel (BIFF) Spreadsheet</span><br>            <span class=\"hljs-keyword\">case</span> <span class=\"hljs-string\">&#x27;xlt&#x27;</span>: <span class=\"hljs-comment\">// Excel (BIFF) Template</span><br>                <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">&#x27;Xls&#x27;</span>;<br>            <span class=\"hljs-keyword\">case</span> <span class=\"hljs-string\">&#x27;ods&#x27;</span>: <span class=\"hljs-comment\">// Open/Libre Offic Calc</span><br>            <span class=\"hljs-keyword\">case</span> <span class=\"hljs-string\">&#x27;ots&#x27;</span>: <span class=\"hljs-comment\">// Open/Libre Offic Calc Template</span><br>                <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">&#x27;Ods&#x27;</span>;<br>            <span class=\"hljs-keyword\">case</span> <span class=\"hljs-string\">&#x27;slk&#x27;</span>:<br>                <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">&#x27;Slk&#x27;</span>;<br>            <span class=\"hljs-keyword\">case</span> <span class=\"hljs-string\">&#x27;xml&#x27;</span>: <span class=\"hljs-comment\">// Excel 2003 SpreadSheetML</span><br>                <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">&#x27;Xml&#x27;</span>;<br>            <span class=\"hljs-keyword\">case</span> <span class=\"hljs-string\">&#x27;gnumeric&#x27;</span>:<br>                <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">&#x27;Gnumeric&#x27;</span>;<br>            <span class=\"hljs-keyword\">case</span> <span class=\"hljs-string\">&#x27;htm&#x27;</span>:<br>            <span class=\"hljs-keyword\">case</span> <span class=\"hljs-string\">&#x27;html&#x27;</span>:<br>                <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">&#x27;Html&#x27;</span>;<br>            <span class=\"hljs-keyword\">case</span> <span class=\"hljs-string\">&#x27;csv&#x27;</span>:<br>                <span class=\"hljs-comment\">// Do nothing</span><br>                <span class=\"hljs-comment\">// We must not try to use CSV reader since it loads</span><br>                <span class=\"hljs-comment\">// all files including Excel files etc.</span><br>                <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">null</span>;<br>            <span class=\"hljs-keyword\">default</span>:<br>                <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">null</span>;<br>        &#125;<br>    &#125;<br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * Register a writer with its type and class name.</span><br><span class=\"hljs-comment\">     *</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> string $writerType</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> string $writerClass</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-built_in\">static</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">registerWriter</span>(<span class=\"hljs-params\"><span class=\"hljs-variable\">$writerType</span>, <span class=\"hljs-variable\">$writerClass</span></span>)</span><br><span class=\"hljs-function\">    </span>&#123;<br>        <span class=\"hljs-keyword\">if</span> (!is_a(<span class=\"hljs-variable\">$writerClass</span>, Writer\\IWriter::class, <span class=\"hljs-literal\">true</span>)) &#123;<br>            <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> Writer\\<span class=\"hljs-built_in\">Exception</span>(<span class=\"hljs-string\">&#x27;Registered writers must implement &#x27;</span> . Writer\\IWriter::class);<br>        &#125;<br>        <span class=\"hljs-built_in\">self</span>::<span class=\"hljs-variable\">$writers</span>[<span class=\"hljs-variable\">$writerType</span>] = <span class=\"hljs-variable\">$writerClass</span>;<br>    &#125;<br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * Register a reader with its type and class name.</span><br><span class=\"hljs-comment\">     *</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> string $readerType</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> string $readerClass</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-built_in\">static</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">registerReader</span>(<span class=\"hljs-params\"><span class=\"hljs-variable\">$readerType</span>, <span class=\"hljs-variable\">$readerClass</span></span>)</span><br><span class=\"hljs-function\">    </span>&#123;<br>        <span class=\"hljs-keyword\">if</span> (!is_a(<span class=\"hljs-variable\">$readerClass</span>, Reader\\IReader::class, <span class=\"hljs-literal\">true</span>)) &#123;<br>            <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> Reader\\<span class=\"hljs-built_in\">Exception</span>(<span class=\"hljs-string\">&#x27;Registered readers must implement &#x27;</span> . Reader\\IReader::class);<br>        &#125;<br>        <span class=\"hljs-built_in\">self</span>::<span class=\"hljs-variable\">$readers</span>[<span class=\"hljs-variable\">$readerType</span>] = <span class=\"hljs-variable\">$readerClass</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>\n\n\n\n<h1 id=\"Go\"><a href=\"#Go\" class=\"headerlink\" title=\"Go\"></a>Go</h1><figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs go\"><span class=\"hljs-keyword\">package</span> list<br><br><span class=\"hljs-comment\">// Element is an element of a linked list.</span><br><span class=\"hljs-keyword\">type</span> Element <span class=\"hljs-keyword\">struct</span> &#123;<br>\t<span class=\"hljs-comment\">// Next and previous pointers in the doubly-linked list of elements.</span><br>\t<span class=\"hljs-comment\">// To simplify the implementation, internally a list l is implemented</span><br>\t<span class=\"hljs-comment\">// as a ring, such that &amp;l.root is both the next element of the last</span><br>\t<span class=\"hljs-comment\">// list element (l.Back()) and the previous element of the first list</span><br>\t<span class=\"hljs-comment\">// element (l.Front()).</span><br>\tnext, prev *Element<br><br>\t<span class=\"hljs-comment\">// The list to which this element belongs.</span><br>\tlist *List<br><br>\t<span class=\"hljs-comment\">// The value stored with this element.</span><br>\tValue <span class=\"hljs-keyword\">interface</span>&#123;&#125;<br>&#125;<br><br><span class=\"hljs-comment\">// Next returns the next list element or nil.</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">func</span> <span class=\"hljs-params\">(e *Element)</span> <span class=\"hljs-title\">Next</span><span class=\"hljs-params\">()</span> *<span class=\"hljs-title\">Element</span></span> &#123;<br>\t<span class=\"hljs-keyword\">if</span> p := e.next; e.list != <span class=\"hljs-literal\">nil</span> &amp;&amp; p != &amp;e.list.root &#123;<br>\t\t<span class=\"hljs-keyword\">return</span> p<br>\t&#125;<br>\t<span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">nil</span><br>&#125;<br><br><span class=\"hljs-comment\">// Prev returns the previous list element or nil.</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">func</span> <span class=\"hljs-params\">(e *Element)</span> <span class=\"hljs-title\">Prev</span><span class=\"hljs-params\">()</span> *<span class=\"hljs-title\">Element</span></span> &#123;<br>\t<span class=\"hljs-keyword\">if</span> p := e.prev; e.list != <span class=\"hljs-literal\">nil</span> &amp;&amp; p != &amp;e.list.root &#123;<br>\t\t<span class=\"hljs-keyword\">return</span> p<br>\t&#125;<br>\t<span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">nil</span><br>&#125;<br><br><span class=\"hljs-comment\">// List represents a doubly linked list.</span><br><span class=\"hljs-comment\">// The zero value for List is an empty list ready to use.</span><br><span class=\"hljs-keyword\">type</span> List <span class=\"hljs-keyword\">struct</span> &#123;<br>\troot Element <span class=\"hljs-comment\">// sentinel list element, only &amp;root, root.prev, and root.next are used</span><br>\t<span class=\"hljs-built_in\">len</span>  <span class=\"hljs-keyword\">int</span>     <span class=\"hljs-comment\">// current list length excluding (this) sentinel element</span><br>&#125;<br><br><span class=\"hljs-comment\">// Init initializes or clears list l.</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">func</span> <span class=\"hljs-params\">(l *List)</span> <span class=\"hljs-title\">Init</span><span class=\"hljs-params\">()</span> *<span class=\"hljs-title\">List</span></span> &#123;<br>\tl.root.next = &amp;l.root<br>\tl.root.prev = &amp;l.root<br>\tl.<span class=\"hljs-built_in\">len</span> = <span class=\"hljs-number\">0</span><br>\t<span class=\"hljs-keyword\">return</span> l<br>&#125;<br><br><span class=\"hljs-comment\">// New returns an initialized list.</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">func</span> <span class=\"hljs-title\">New</span><span class=\"hljs-params\">()</span> *<span class=\"hljs-title\">List</span></span> &#123; <span class=\"hljs-keyword\">return</span> <span class=\"hljs-built_in\">new</span>(List).Init() &#125;<br><br><span class=\"hljs-comment\">// Len returns the number of elements of list l.</span><br><span class=\"hljs-comment\">// The complexity is O(1).</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">func</span> <span class=\"hljs-params\">(l *List)</span> <span class=\"hljs-title\">Len</span><span class=\"hljs-params\">()</span> <span class=\"hljs-title\">int</span></span> &#123; <span class=\"hljs-keyword\">return</span> l.<span class=\"hljs-built_in\">len</span> &#125;<br><br><span class=\"hljs-comment\">// Front returns the first element of list l or nil if the list is empty.</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">func</span> <span class=\"hljs-params\">(l *List)</span> <span class=\"hljs-title\">Front</span><span class=\"hljs-params\">()</span> *<span class=\"hljs-title\">Element</span></span> &#123;<br>\t<span class=\"hljs-keyword\">if</span> l.<span class=\"hljs-built_in\">len</span> == <span class=\"hljs-number\">0</span> &#123;<br>\t\t<span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">nil</span><br>\t&#125;<br>\t<span class=\"hljs-keyword\">return</span> l.root.next<br>&#125;<br><br><span class=\"hljs-comment\">// Back returns the last element of list l or nil if the list is empty.</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">func</span> <span class=\"hljs-params\">(l *List)</span> <span class=\"hljs-title\">Back</span><span class=\"hljs-params\">()</span> *<span class=\"hljs-title\">Element</span></span> &#123;<br>\t<span class=\"hljs-keyword\">if</span> l.<span class=\"hljs-built_in\">len</span> == <span class=\"hljs-number\">0</span> &#123;<br>\t\t<span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">nil</span><br>\t&#125;<br>\t<span class=\"hljs-keyword\">return</span> l.root.prev<br>&#125;<br><br><span class=\"hljs-comment\">// lazyInit lazily initializes a zero List value.</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">func</span> <span class=\"hljs-params\">(l *List)</span> <span class=\"hljs-title\">lazyInit</span><span class=\"hljs-params\">()</span></span> &#123;<br>\t<span class=\"hljs-keyword\">if</span> l.root.next == <span class=\"hljs-literal\">nil</span> &#123;<br>\t\tl.Init()<br>\t&#125;<br>&#125;<br><br><span class=\"hljs-comment\">// insert inserts e after at, increments l.len, and returns e.</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">func</span> <span class=\"hljs-params\">(l *List)</span> <span class=\"hljs-title\">insert</span><span class=\"hljs-params\">(e, at *Element)</span> *<span class=\"hljs-title\">Element</span></span> &#123;<br>\tn := at.next<br>\tat.next = e<br>\te.prev = at<br>\te.next = n<br>\tn.prev = e<br>\te.list = l<br>\tl.<span class=\"hljs-built_in\">len</span>++<br>\t<span class=\"hljs-keyword\">return</span> e<br>&#125;<br><br><span class=\"hljs-comment\">// insertValue is a convenience wrapper for insert(&amp;Element&#123;Value: v&#125;, at).</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">func</span> <span class=\"hljs-params\">(l *List)</span> <span class=\"hljs-title\">insertValue</span><span class=\"hljs-params\">(v <span class=\"hljs-keyword\">interface</span>&#123;&#125;, at *Element)</span> *<span class=\"hljs-title\">Element</span></span> &#123;<br>\t<span class=\"hljs-keyword\">return</span> l.insert(&amp;Element&#123;Value: v&#125;, at)<br>&#125;<br><br><span class=\"hljs-comment\">// remove removes e from its list, decrements l.len, and returns e.</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">func</span> <span class=\"hljs-params\">(l *List)</span> <span class=\"hljs-title\">remove</span><span class=\"hljs-params\">(e *Element)</span> *<span class=\"hljs-title\">Element</span></span> &#123;<br>\te.prev.next = e.next<br>\te.next.prev = e.prev<br>\te.next = <span class=\"hljs-literal\">nil</span> <span class=\"hljs-comment\">// avoid memory leaks</span><br>\te.prev = <span class=\"hljs-literal\">nil</span> <span class=\"hljs-comment\">// avoid memory leaks</span><br>\te.list = <span class=\"hljs-literal\">nil</span><br>\tl.<span class=\"hljs-built_in\">len</span>--<br>\t<span class=\"hljs-keyword\">return</span> e<br>&#125;<br><br><span class=\"hljs-comment\">// Remove removes e from l if e is an element of list l.</span><br><span class=\"hljs-comment\">// It returns the element value e.Value.</span><br><span class=\"hljs-comment\">// The element must not be nil.</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">func</span> <span class=\"hljs-params\">(l *List)</span> <span class=\"hljs-title\">Remove</span><span class=\"hljs-params\">(e *Element)</span> <span class=\"hljs-title\">interface</span></span>&#123;&#125; &#123;<br>\t<span class=\"hljs-keyword\">if</span> e.list == l &#123;<br>\t\t<span class=\"hljs-comment\">// if e.list == l, l must have been initialized when e was inserted</span><br>\t\t<span class=\"hljs-comment\">// in l or l == nil (e is a zero Element) and l.remove will crash</span><br>\t\tl.remove(e)<br>\t&#125;<br>\t<span class=\"hljs-keyword\">return</span> e.Value<br>&#125;<br><br><span class=\"hljs-comment\">// PushFront inserts a new element e with value v at the front of list l and returns e.</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">func</span> <span class=\"hljs-params\">(l *List)</span> <span class=\"hljs-title\">PushFront</span><span class=\"hljs-params\">(v <span class=\"hljs-keyword\">interface</span>&#123;&#125;)</span> *<span class=\"hljs-title\">Element</span></span> &#123;<br>\tl.lazyInit()<br>\t<span class=\"hljs-keyword\">return</span> l.insertValue(v, &amp;l.root)<br>&#125;<br><br><span class=\"hljs-comment\">// PushBack inserts a new element e with value v at the back of list l and returns e.</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">func</span> <span class=\"hljs-params\">(l *List)</span> <span class=\"hljs-title\">PushBack</span><span class=\"hljs-params\">(v <span class=\"hljs-keyword\">interface</span>&#123;&#125;)</span> *<span class=\"hljs-title\">Element</span></span> &#123;<br>\tl.lazyInit()<br>\t<span class=\"hljs-keyword\">return</span> l.insertValue(v, l.root.prev)<br>&#125;<br><br><span class=\"hljs-comment\">// InsertBefore inserts a new element e with value v immediately before mark and returns e.</span><br><span class=\"hljs-comment\">// If mark is not an element of l, the list is not modified.</span><br><span class=\"hljs-comment\">// The mark must not be nil.</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">func</span> <span class=\"hljs-params\">(l *List)</span> <span class=\"hljs-title\">InsertBefore</span><span class=\"hljs-params\">(v <span class=\"hljs-keyword\">interface</span>&#123;&#125;, mark *Element)</span> *<span class=\"hljs-title\">Element</span></span> &#123;<br>\t<span class=\"hljs-keyword\">if</span> mark.list != l &#123;<br>\t\t<span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">nil</span><br>\t&#125;<br>\t<span class=\"hljs-comment\">// see comment in List.Remove about initialization of l</span><br>\t<span class=\"hljs-keyword\">return</span> l.insertValue(v, mark.prev)<br>&#125;<br><br><span class=\"hljs-comment\">// InsertAfter inserts a new element e with value v immediately after mark and returns e.</span><br><span class=\"hljs-comment\">// If mark is not an element of l, the list is not modified.</span><br><span class=\"hljs-comment\">// The mark must not be nil.</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">func</span> <span class=\"hljs-params\">(l *List)</span> <span class=\"hljs-title\">InsertAfter</span><span class=\"hljs-params\">(v <span class=\"hljs-keyword\">interface</span>&#123;&#125;, mark *Element)</span> *<span class=\"hljs-title\">Element</span></span> &#123;<br>\t<span class=\"hljs-keyword\">if</span> mark.list != l &#123;<br>\t\t<span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">nil</span><br>\t&#125;<br>\t<span class=\"hljs-comment\">// see comment in List.Remove about initialization of l</span><br>\t<span class=\"hljs-keyword\">return</span> l.insertValue(v, mark)<br>&#125;<br><br><span class=\"hljs-comment\">// MoveToFront moves element e to the front of list l.</span><br><span class=\"hljs-comment\">// If e is not an element of l, the list is not modified.</span><br><span class=\"hljs-comment\">// The element must not be nil.</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">func</span> <span class=\"hljs-params\">(l *List)</span> <span class=\"hljs-title\">MoveToFront</span><span class=\"hljs-params\">(e *Element)</span></span> &#123;<br>\t<span class=\"hljs-keyword\">if</span> e.list != l || l.root.next == e &#123;<br>\t\t<span class=\"hljs-keyword\">return</span><br>\t&#125;<br>\t<span class=\"hljs-comment\">// see comment in List.Remove about initialization of l</span><br>\tl.insert(l.remove(e), &amp;l.root)<br>&#125;<br><br><span class=\"hljs-comment\">// MoveToBack moves element e to the back of list l.</span><br><span class=\"hljs-comment\">// If e is not an element of l, the list is not modified.</span><br><span class=\"hljs-comment\">// The element must not be nil.</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">func</span> <span class=\"hljs-params\">(l *List)</span> <span class=\"hljs-title\">MoveToBack</span><span class=\"hljs-params\">(e *Element)</span></span> &#123;<br>\t<span class=\"hljs-keyword\">if</span> e.list != l || l.root.prev == e &#123;<br>\t\t<span class=\"hljs-keyword\">return</span><br>\t&#125;<br>\t<span class=\"hljs-comment\">// see comment in List.Remove about initialization of l</span><br>\tl.insert(l.remove(e), l.root.prev)<br>&#125;<br><br><span class=\"hljs-comment\">// MoveBefore moves element e to its new position before mark.</span><br><span class=\"hljs-comment\">// If e or mark is not an element of l, or e == mark, the list is not modified.</span><br><span class=\"hljs-comment\">// The element and mark must not be nil.</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">func</span> <span class=\"hljs-params\">(l *List)</span> <span class=\"hljs-title\">MoveBefore</span><span class=\"hljs-params\">(e, mark *Element)</span></span> &#123;<br>\t<span class=\"hljs-keyword\">if</span> e.list != l || e == mark || mark.list != l &#123;<br>\t\t<span class=\"hljs-keyword\">return</span><br>\t&#125;<br>\tl.insert(l.remove(e), mark.prev)<br>&#125;<br><br><span class=\"hljs-comment\">// MoveAfter moves element e to its new position after mark.</span><br><span class=\"hljs-comment\">// If e or mark is not an element of l, or e == mark, the list is not modified.</span><br><span class=\"hljs-comment\">// The element and mark must not be nil.</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">func</span> <span class=\"hljs-params\">(l *List)</span> <span class=\"hljs-title\">MoveAfter</span><span class=\"hljs-params\">(e, mark *Element)</span></span> &#123;<br>\t<span class=\"hljs-keyword\">if</span> e.list != l || e == mark || mark.list != l &#123;<br>\t\t<span class=\"hljs-keyword\">return</span><br>\t&#125;<br>\tl.insert(l.remove(e), mark)<br>&#125;<br><br><span class=\"hljs-comment\">// PushBackList inserts a copy of an other list at the back of list l.</span><br><span class=\"hljs-comment\">// The lists l and other may be the same. They must not be nil.</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">func</span> <span class=\"hljs-params\">(l *List)</span> <span class=\"hljs-title\">PushBackList</span><span class=\"hljs-params\">(other *List)</span></span> &#123;<br>\tl.lazyInit()<br>\t<span class=\"hljs-keyword\">for</span> i, e := other.Len(), other.Front(); i &gt; <span class=\"hljs-number\">0</span>; i, e = i<span class=\"hljs-number\">-1</span>, e.Next() &#123;<br>\t\tl.insertValue(e.Value, l.root.prev)<br>\t&#125;<br>&#125;<br><br><span class=\"hljs-comment\">// PushFrontList inserts a copy of an other list at the front of list l.</span><br><span class=\"hljs-comment\">// The lists l and other may be the same. They must not be nil.</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">func</span> <span class=\"hljs-params\">(l *List)</span> <span class=\"hljs-title\">PushFrontList</span><span class=\"hljs-params\">(other *List)</span></span> &#123;<br>\tl.lazyInit()<br>\t<span class=\"hljs-keyword\">for</span> i, e := other.Len(), other.Back(); i &gt; <span class=\"hljs-number\">0</span>; i, e = i<span class=\"hljs-number\">-1</span>, e.Prev() &#123;<br>\t\tl.insertValue(e.Value, &amp;l.root)<br>\t&#125;<br>&#125;<br></code></pre></td></tr></table></figure>\n\n\n<h1 id=\"C\"><a href=\"#C\" class=\"headerlink\" title=\"C++\"></a>C++</h1><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs c++\"><span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">include</span> <span class=\"hljs-meta-string\">&lt;grpc/support/time.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">include</span> <span class=\"hljs-meta-string\">&lt;grpcpp/support/config.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">include</span> <span class=\"hljs-meta-string\">&lt;grpcpp/support/time.h&gt;</span></span><br><br><span class=\"hljs-keyword\">using</span> <span class=\"hljs-built_in\">std</span>::chrono::duration_cast;<br><span class=\"hljs-keyword\">using</span> <span class=\"hljs-built_in\">std</span>::chrono::high_resolution_clock;<br><span class=\"hljs-keyword\">using</span> <span class=\"hljs-built_in\">std</span>::chrono::nanoseconds;<br><span class=\"hljs-keyword\">using</span> <span class=\"hljs-built_in\">std</span>::chrono::seconds;<br><span class=\"hljs-keyword\">using</span> <span class=\"hljs-built_in\">std</span>::chrono::system_clock;<br><br><span class=\"hljs-keyword\">namespace</span> grpc &#123;<br><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">Timepoint2Timespec</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">const</span> system_clock::time_point&amp; from,</span></span><br><span class=\"hljs-function\"><span class=\"hljs-params\">                        gpr_timespec* to)</span> </span>&#123;<br>  system_clock::duration deadline = from.time_since_epoch();<br>  seconds secs = duration_cast&lt;seconds&gt;(deadline);<br>  <span class=\"hljs-keyword\">if</span> (from == system_clock::time_point::max() ||<br>      secs.count() &gt;= gpr_inf_future(GPR_CLOCK_REALTIME).tv_sec ||<br>      secs.count() &lt; <span class=\"hljs-number\">0</span>) &#123;<br>    *to = gpr_inf_future(GPR_CLOCK_REALTIME);<br>    <span class=\"hljs-keyword\">return</span>;<br>  &#125;<br>  nanoseconds nsecs = duration_cast&lt;nanoseconds&gt;(deadline - secs);<br>  to-&gt;tv_sec = <span class=\"hljs-keyword\">static_cast</span>&lt;<span class=\"hljs-keyword\">int64_t</span>&gt;(secs.count());<br>  to-&gt;tv_nsec = <span class=\"hljs-keyword\">static_cast</span>&lt;<span class=\"hljs-keyword\">int32_t</span>&gt;(nsecs.count());<br>  to-&gt;clock_type = GPR_CLOCK_REALTIME;<br>&#125;<br><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">TimepointHR2Timespec</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">const</span> high_resolution_clock::time_point&amp; from,</span></span><br><span class=\"hljs-function\"><span class=\"hljs-params\">                          gpr_timespec* to)</span> </span>&#123;<br>  high_resolution_clock::duration deadline = from.time_since_epoch();<br>  seconds secs = duration_cast&lt;seconds&gt;(deadline);<br>  <span class=\"hljs-keyword\">if</span> (from == high_resolution_clock::time_point::max() ||<br>      secs.count() &gt;= gpr_inf_future(GPR_CLOCK_REALTIME).tv_sec ||<br>      secs.count() &lt; <span class=\"hljs-number\">0</span>) &#123;<br>    *to = gpr_inf_future(GPR_CLOCK_REALTIME);<br>    <span class=\"hljs-keyword\">return</span>;<br>  &#125;<br>  nanoseconds nsecs = duration_cast&lt;nanoseconds&gt;(deadline - secs);<br>  to-&gt;tv_sec = <span class=\"hljs-keyword\">static_cast</span>&lt;<span class=\"hljs-keyword\">int64_t</span>&gt;(secs.count());<br>  to-&gt;tv_nsec = <span class=\"hljs-keyword\">static_cast</span>&lt;<span class=\"hljs-keyword\">int32_t</span>&gt;(nsecs.count());<br>  to-&gt;clock_type = GPR_CLOCK_REALTIME;<br>&#125;<br><br><span class=\"hljs-function\">system_clock::time_point <span class=\"hljs-title\">Timespec2Timepoint</span><span class=\"hljs-params\">(gpr_timespec t)</span> </span>&#123;<br>  <span class=\"hljs-keyword\">if</span> (gpr_time_cmp(t, gpr_inf_future(t.clock_type)) == <span class=\"hljs-number\">0</span>) &#123;<br>    <span class=\"hljs-keyword\">return</span> system_clock::time_point::max();<br>  &#125;<br>  t = gpr_convert_clock_type(t, GPR_CLOCK_REALTIME);<br>  system_clock::time_point tp;<br>  tp += duration_cast&lt;system_clock::time_point::duration&gt;(seconds(t.tv_sec));<br>  tp +=<br>      duration_cast&lt;system_clock::time_point::duration&gt;(nanoseconds(t.tv_nsec));<br>  <span class=\"hljs-keyword\">return</span> tp;<br>&#125;<br><br>&#125;  <span class=\"hljs-comment\">// namespace grpc</span><br></code></pre></td></tr></table></figure>\n\n\n<h1 id=\"C-1\"><a href=\"#C-1\" class=\"headerlink\" title=\"C\"></a>C</h1><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs c\"><span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">include</span> <span class=\"hljs-meta-string\">&lt;stdio.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">include</span> <span class=\"hljs-meta-string\">&lt;stdlib.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">include</span> <span class=\"hljs-meta-string\">&lt;time.h&gt;</span></span><br><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">shellSort</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">int</span> <span class=\"hljs-built_in\">array</span>[], <span class=\"hljs-keyword\">int</span> value)</span></span>&#123;<br>  <span class=\"hljs-keyword\">int</span> i = value;<br>  <span class=\"hljs-keyword\">int</span> j, k, tmp;<br>  <span class=\"hljs-keyword\">for</span> (i = value / <span class=\"hljs-number\">2</span>; i &gt; <span class=\"hljs-number\">0</span>; i = i / <span class=\"hljs-number\">2</span>)&#123;<br>    <span class=\"hljs-keyword\">for</span> (j = i; j &lt; value; j++)&#123;<br>      <span class=\"hljs-keyword\">for</span>(k = j - i; k &gt;= <span class=\"hljs-number\">0</span>; k = k - i)&#123;<br>        <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-built_in\">array</span>[k+i] &gt;= <span class=\"hljs-built_in\">array</span>[k])&#123;<br>          <span class=\"hljs-keyword\">break</span>;<br>        &#125;<br>        <span class=\"hljs-keyword\">else</span>&#123;<br>          tmp = <span class=\"hljs-built_in\">array</span>[k];<br>          <span class=\"hljs-built_in\">array</span>[k] = <span class=\"hljs-built_in\">array</span>[k+i];<br>          <span class=\"hljs-built_in\">array</span>[k+i] = tmp;<br>        &#125;<br>      &#125;<br>    &#125;<br>  &#125;<br>&#125;<br><br><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">main</span><span class=\"hljs-params\">()</span></span>&#123;<br>    <span class=\"hljs-keyword\">int</span> <span class=\"hljs-built_in\">array</span>[<span class=\"hljs-number\">20</span>];<br>    <span class=\"hljs-keyword\">int</span> range = <span class=\"hljs-number\">500</span>;<br>    <span class=\"hljs-keyword\">for</span>(<span class=\"hljs-keyword\">int</span> i = <span class=\"hljs-number\">0</span>; i &lt; <span class=\"hljs-number\">100</span>; i++)&#123;<br>     <span class=\"hljs-built_in\">array</span>[i] = rand() % range + <span class=\"hljs-number\">1</span>;<br>    &#125;<br>    <span class=\"hljs-keyword\">int</span> size = <span class=\"hljs-keyword\">sizeof</span> <span class=\"hljs-built_in\">array</span> / <span class=\"hljs-keyword\">sizeof</span> <span class=\"hljs-built_in\">array</span>[<span class=\"hljs-number\">0</span>];<br><br><br><br>    <span class=\"hljs-keyword\">clock_t</span> start = clock();<br>    shellSort(<span class=\"hljs-built_in\">array</span>,size);<br>    <span class=\"hljs-keyword\">clock_t</span> end = clock();<br>    <span class=\"hljs-keyword\">double</span> time_spent = (<span class=\"hljs-keyword\">double</span>)(end - start) / CLOCKS_PER_SEC;<br><br><br>    <span class=\"hljs-built_in\">printf</span>(<span class=\"hljs-string\">&quot;Data Sorted\\n&quot;</span>);<br>    <span class=\"hljs-built_in\">printf</span>(<span class=\"hljs-string\">&quot;%s\\n&quot;</span>, <span class=\"hljs-string\">&quot;Shell Sort Big O Notation:\\n--&gt; Best Case: O(n log(n))\\n--&gt; Average Case: depends on gap sequence\\n--&gt; Worst Case: O(n)\\n&quot;</span>);<br>    <span class=\"hljs-built_in\">printf</span>(<span class=\"hljs-string\">&quot;Time spent sorting: %f\\n&quot;</span>, time_spent);<br><br>  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-number\">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>\n\n\n\n<h1 id=\"C-C\"><a href=\"#C-C\" class=\"headerlink\" title=\"C#    #  C#\"></a>C#    #  C#</h1><figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br><span class=\"line\">252</span><br><span class=\"line\">253</span><br><span class=\"line\">254</span><br><span class=\"line\">255</span><br><span class=\"line\">256</span><br><span class=\"line\">257</span><br><span class=\"line\">258</span><br><span class=\"line\">259</span><br><span class=\"line\">260</span><br><span class=\"line\">261</span><br><span class=\"line\">262</span><br><span class=\"line\">263</span><br><span class=\"line\">264</span><br><span class=\"line\">265</span><br><span class=\"line\">266</span><br><span class=\"line\">267</span><br><span class=\"line\">268</span><br><span class=\"line\">269</span><br><span class=\"line\">270</span><br><span class=\"line\">271</span><br><span class=\"line\">272</span><br><span class=\"line\">273</span><br><span class=\"line\">274</span><br><span class=\"line\">275</span><br><span class=\"line\">276</span><br><span class=\"line\">277</span><br><span class=\"line\">278</span><br><span class=\"line\">279</span><br><span class=\"line\">280</span><br><span class=\"line\">281</span><br><span class=\"line\">282</span><br><span class=\"line\">283</span><br><span class=\"line\">284</span><br><span class=\"line\">285</span><br><span class=\"line\">286</span><br><span class=\"line\">287</span><br><span class=\"line\">288</span><br><span class=\"line\">289</span><br><span class=\"line\">290</span><br><span class=\"line\">291</span><br><span class=\"line\">292</span><br><span class=\"line\">293</span><br><span class=\"line\">294</span><br><span class=\"line\">295</span><br><span class=\"line\">296</span><br><span class=\"line\">297</span><br><span class=\"line\">298</span><br><span class=\"line\">299</span><br><span class=\"line\">300</span><br><span class=\"line\">301</span><br><span class=\"line\">302</span><br><span class=\"line\">303</span><br><span class=\"line\">304</span><br><span class=\"line\">305</span><br><span class=\"line\">306</span><br><span class=\"line\">307</span><br><span class=\"line\">308</span><br><span class=\"line\">309</span><br><span class=\"line\">310</span><br><span class=\"line\">311</span><br><span class=\"line\">312</span><br><span class=\"line\">313</span><br><span class=\"line\">314</span><br><span class=\"line\">315</span><br><span class=\"line\">316</span><br><span class=\"line\">317</span><br><span class=\"line\">318</span><br><span class=\"line\">319</span><br><span class=\"line\">320</span><br><span class=\"line\">321</span><br><span class=\"line\">322</span><br><span class=\"line\">323</span><br><span class=\"line\">324</span><br><span class=\"line\">325</span><br><span class=\"line\">326</span><br><span class=\"line\">327</span><br><span class=\"line\">328</span><br><span class=\"line\">329</span><br><span class=\"line\">330</span><br><span class=\"line\">331</span><br><span class=\"line\">332</span><br><span class=\"line\">333</span><br><span class=\"line\">334</span><br><span class=\"line\">335</span><br><span class=\"line\">336</span><br><span class=\"line\">337</span><br><span class=\"line\">338</span><br><span class=\"line\">339</span><br><span class=\"line\">340</span><br><span class=\"line\">341</span><br><span class=\"line\">342</span><br><span class=\"line\">343</span><br><span class=\"line\">344</span><br><span class=\"line\">345</span><br><span class=\"line\">346</span><br><span class=\"line\">347</span><br><span class=\"line\">348</span><br><span class=\"line\">349</span><br><span class=\"line\">350</span><br><span class=\"line\">351</span><br><span class=\"line\">352</span><br><span class=\"line\">353</span><br><span class=\"line\">354</span><br><span class=\"line\">355</span><br><span class=\"line\">356</span><br><span class=\"line\">357</span><br><span class=\"line\">358</span><br><span class=\"line\">359</span><br><span class=\"line\">360</span><br><span class=\"line\">361</span><br><span class=\"line\">362</span><br><span class=\"line\">363</span><br><span class=\"line\">364</span><br><span class=\"line\">365</span><br><span class=\"line\">366</span><br><span class=\"line\">367</span><br><span class=\"line\">368</span><br><span class=\"line\">369</span><br><span class=\"line\">370</span><br><span class=\"line\">371</span><br><span class=\"line\">372</span><br><span class=\"line\">373</span><br><span class=\"line\">374</span><br><span class=\"line\">375</span><br><span class=\"line\">376</span><br><span class=\"line\">377</span><br><span class=\"line\">378</span><br><span class=\"line\">379</span><br><span class=\"line\">380</span><br><span class=\"line\">381</span><br><span class=\"line\">382</span><br><span class=\"line\">383</span><br><span class=\"line\">384</span><br><span class=\"line\">385</span><br><span class=\"line\">386</span><br><span class=\"line\">387</span><br><span class=\"line\">388</span><br><span class=\"line\">389</span><br><span class=\"line\">390</span><br><span class=\"line\">391</span><br><span class=\"line\">392</span><br><span class=\"line\">393</span><br><span class=\"line\">394</span><br><span class=\"line\">395</span><br><span class=\"line\">396</span><br><span class=\"line\">397</span><br><span class=\"line\">398</span><br><span class=\"line\">399</span><br><span class=\"line\">400</span><br><span class=\"line\">401</span><br><span class=\"line\">402</span><br><span class=\"line\">403</span><br><span class=\"line\">404</span><br><span class=\"line\">405</span><br><span class=\"line\">406</span><br><span class=\"line\">407</span><br><span class=\"line\">408</span><br><span class=\"line\">409</span><br><span class=\"line\">410</span><br><span class=\"line\">411</span><br><span class=\"line\">412</span><br><span class=\"line\">413</span><br><span class=\"line\">414</span><br><span class=\"line\">415</span><br><span class=\"line\">416</span><br><span class=\"line\">417</span><br><span class=\"line\">418</span><br><span class=\"line\">419</span><br><span class=\"line\">420</span><br><span class=\"line\">421</span><br><span class=\"line\">422</span><br><span class=\"line\">423</span><br><span class=\"line\">424</span><br><span class=\"line\">425</span><br><span class=\"line\">426</span><br><span class=\"line\">427</span><br><span class=\"line\">428</span><br><span class=\"line\">429</span><br><span class=\"line\">430</span><br><span class=\"line\">431</span><br><span class=\"line\">432</span><br><span class=\"line\">433</span><br><span class=\"line\">434</span><br><span class=\"line\">435</span><br><span class=\"line\">436</span><br><span class=\"line\">437</span><br><span class=\"line\">438</span><br><span class=\"line\">439</span><br><span class=\"line\">440</span><br><span class=\"line\">441</span><br><span class=\"line\">442</span><br><span class=\"line\">443</span><br><span class=\"line\">444</span><br><span class=\"line\">445</span><br><span class=\"line\">446</span><br><span class=\"line\">447</span><br><span class=\"line\">448</span><br><span class=\"line\">449</span><br><span class=\"line\">450</span><br><span class=\"line\">451</span><br><span class=\"line\">452</span><br><span class=\"line\">453</span><br><span class=\"line\">454</span><br><span class=\"line\">455</span><br><span class=\"line\">456</span><br><span class=\"line\">457</span><br><span class=\"line\">458</span><br><span class=\"line\">459</span><br><span class=\"line\">460</span><br><span class=\"line\">461</span><br><span class=\"line\">462</span><br><span class=\"line\">463</span><br><span class=\"line\">464</span><br><span class=\"line\">465</span><br><span class=\"line\">466</span><br><span class=\"line\">467</span><br><span class=\"line\">468</span><br><span class=\"line\">469</span><br><span class=\"line\">470</span><br><span class=\"line\">471</span><br><span class=\"line\">472</span><br><span class=\"line\">473</span><br><span class=\"line\">474</span><br><span class=\"line\">475</span><br><span class=\"line\">476</span><br><span class=\"line\">477</span><br><span class=\"line\">478</span><br><span class=\"line\">479</span><br><span class=\"line\">480</span><br><span class=\"line\">481</span><br><span class=\"line\">482</span><br><span class=\"line\">483</span><br><span class=\"line\">484</span><br><span class=\"line\">485</span><br><span class=\"line\">486</span><br><span class=\"line\">487</span><br><span class=\"line\">488</span><br><span class=\"line\">489</span><br><span class=\"line\">490</span><br><span class=\"line\">491</span><br><span class=\"line\">492</span><br><span class=\"line\">493</span><br><span class=\"line\">494</span><br><span class=\"line\">495</span><br><span class=\"line\">496</span><br><span class=\"line\">497</span><br><span class=\"line\">498</span><br><span class=\"line\">499</span><br><span class=\"line\">500</span><br><span class=\"line\">501</span><br><span class=\"line\">502</span><br><span class=\"line\">503</span><br><span class=\"line\">504</span><br><span class=\"line\">505</span><br><span class=\"line\">506</span><br><span class=\"line\">507</span><br><span class=\"line\">508</span><br><span class=\"line\">509</span><br><span class=\"line\">510</span><br><span class=\"line\">511</span><br><span class=\"line\">512</span><br><span class=\"line\">513</span><br><span class=\"line\">514</span><br><span class=\"line\">515</span><br><span class=\"line\">516</span><br><span class=\"line\">517</span><br><span class=\"line\">518</span><br><span class=\"line\">519</span><br><span class=\"line\">520</span><br><span class=\"line\">521</span><br><span class=\"line\">522</span><br><span class=\"line\">523</span><br><span class=\"line\">524</span><br><span class=\"line\">525</span><br><span class=\"line\">526</span><br><span class=\"line\">527</span><br><span class=\"line\">528</span><br><span class=\"line\">529</span><br><span class=\"line\">530</span><br><span class=\"line\">531</span><br><span class=\"line\">532</span><br><span class=\"line\">533</span><br><span class=\"line\">534</span><br><span class=\"line\">535</span><br><span class=\"line\">536</span><br><span class=\"line\">537</span><br><span class=\"line\">538</span><br><span class=\"line\">539</span><br><span class=\"line\">540</span><br><span class=\"line\">541</span><br><span class=\"line\">542</span><br><span class=\"line\">543</span><br><span class=\"line\">544</span><br><span class=\"line\">545</span><br><span class=\"line\">546</span><br><span class=\"line\">547</span><br><span class=\"line\">548</span><br><span class=\"line\">549</span><br><span class=\"line\">550</span><br><span class=\"line\">551</span><br><span class=\"line\">552</span><br><span class=\"line\">553</span><br><span class=\"line\">554</span><br><span class=\"line\">555</span><br><span class=\"line\">556</span><br><span class=\"line\">557</span><br><span class=\"line\">558</span><br><span class=\"line\">559</span><br><span class=\"line\">560</span><br><span class=\"line\">561</span><br><span class=\"line\">562</span><br><span class=\"line\">563</span><br><span class=\"line\">564</span><br><span class=\"line\">565</span><br><span class=\"line\">566</span><br><span class=\"line\">567</span><br><span class=\"line\">568</span><br><span class=\"line\">569</span><br><span class=\"line\">570</span><br><span class=\"line\">571</span><br><span class=\"line\">572</span><br><span class=\"line\">573</span><br><span class=\"line\">574</span><br><span class=\"line\">575</span><br><span class=\"line\">576</span><br><span class=\"line\">577</span><br><span class=\"line\">578</span><br><span class=\"line\">579</span><br><span class=\"line\">580</span><br><span class=\"line\">581</span><br><span class=\"line\">582</span><br><span class=\"line\">583</span><br><span class=\"line\">584</span><br><span class=\"line\">585</span><br><span class=\"line\">586</span><br><span class=\"line\">587</span><br><span class=\"line\">588</span><br><span class=\"line\">589</span><br><span class=\"line\">590</span><br><span class=\"line\">591</span><br><span class=\"line\">592</span><br><span class=\"line\">593</span><br><span class=\"line\">594</span><br><span class=\"line\">595</span><br><span class=\"line\">596</span><br><span class=\"line\">597</span><br><span class=\"line\">598</span><br><span class=\"line\">599</span><br><span class=\"line\">600</span><br><span class=\"line\">601</span><br><span class=\"line\">602</span><br><span class=\"line\">603</span><br><span class=\"line\">604</span><br><span class=\"line\">605</span><br><span class=\"line\">606</span><br><span class=\"line\">607</span><br><span class=\"line\">608</span><br><span class=\"line\">609</span><br><span class=\"line\">610</span><br><span class=\"line\">611</span><br><span class=\"line\">612</span><br><span class=\"line\">613</span><br><span class=\"line\">614</span><br><span class=\"line\">615</span><br><span class=\"line\">616</span><br><span class=\"line\">617</span><br><span class=\"line\">618</span><br><span class=\"line\">619</span><br><span class=\"line\">620</span><br><span class=\"line\">621</span><br><span class=\"line\">622</span><br><span class=\"line\">623</span><br><span class=\"line\">624</span><br><span class=\"line\">625</span><br><span class=\"line\">626</span><br><span class=\"line\">627</span><br><span class=\"line\">628</span><br><span class=\"line\">629</span><br><span class=\"line\">630</span><br><span class=\"line\">631</span><br><span class=\"line\">632</span><br><span class=\"line\">633</span><br><span class=\"line\">634</span><br><span class=\"line\">635</span><br><span class=\"line\">636</span><br><span class=\"line\">637</span><br><span class=\"line\">638</span><br><span class=\"line\">639</span><br><span class=\"line\">640</span><br><span class=\"line\">641</span><br><span class=\"line\">642</span><br><span class=\"line\">643</span><br><span class=\"line\">644</span><br><span class=\"line\">645</span><br><span class=\"line\">646</span><br><span class=\"line\">647</span><br><span class=\"line\">648</span><br><span class=\"line\">649</span><br><span class=\"line\">650</span><br><span class=\"line\">651</span><br><span class=\"line\">652</span><br><span class=\"line\">653</span><br><span class=\"line\">654</span><br><span class=\"line\">655</span><br><span class=\"line\">656</span><br><span class=\"line\">657</span><br><span class=\"line\">658</span><br><span class=\"line\">659</span><br><span class=\"line\">660</span><br><span class=\"line\">661</span><br><span class=\"line\">662</span><br><span class=\"line\">663</span><br><span class=\"line\">664</span><br><span class=\"line\">665</span><br><span class=\"line\">666</span><br><span class=\"line\">667</span><br><span class=\"line\">668</span><br><span class=\"line\">669</span><br><span class=\"line\">670</span><br><span class=\"line\">671</span><br><span class=\"line\">672</span><br><span class=\"line\">673</span><br><span class=\"line\">674</span><br><span class=\"line\">675</span><br><span class=\"line\">676</span><br><span class=\"line\">677</span><br><span class=\"line\">678</span><br><span class=\"line\">679</span><br><span class=\"line\">680</span><br><span class=\"line\">681</span><br><span class=\"line\">682</span><br><span class=\"line\">683</span><br><span class=\"line\">684</span><br><span class=\"line\">685</span><br><span class=\"line\">686</span><br><span class=\"line\">687</span><br><span class=\"line\">688</span><br><span class=\"line\">689</span><br><span class=\"line\">690</span><br><span class=\"line\">691</span><br><span class=\"line\">692</span><br><span class=\"line\">693</span><br><span class=\"line\">694</span><br><span class=\"line\">695</span><br><span class=\"line\">696</span><br><span class=\"line\">697</span><br><span class=\"line\">698</span><br><span class=\"line\">699</span><br><span class=\"line\">700</span><br><span class=\"line\">701</span><br><span class=\"line\">702</span><br><span class=\"line\">703</span><br><span class=\"line\">704</span><br><span class=\"line\">705</span><br><span class=\"line\">706</span><br><span class=\"line\">707</span><br><span class=\"line\">708</span><br><span class=\"line\">709</span><br><span class=\"line\">710</span><br><span class=\"line\">711</span><br><span class=\"line\">712</span><br><span class=\"line\">713</span><br><span class=\"line\">714</span><br><span class=\"line\">715</span><br><span class=\"line\">716</span><br><span class=\"line\">717</span><br><span class=\"line\">718</span><br><span class=\"line\">719</span><br><span class=\"line\">720</span><br><span class=\"line\">721</span><br><span class=\"line\">722</span><br><span class=\"line\">723</span><br><span class=\"line\">724</span><br><span class=\"line\">725</span><br><span class=\"line\">726</span><br><span class=\"line\">727</span><br><span class=\"line\">728</span><br><span class=\"line\">729</span><br><span class=\"line\">730</span><br><span class=\"line\">731</span><br><span class=\"line\">732</span><br><span class=\"line\">733</span><br><span class=\"line\">734</span><br><span class=\"line\">735</span><br><span class=\"line\">736</span><br><span class=\"line\">737</span><br><span class=\"line\">738</span><br><span class=\"line\">739</span><br><span class=\"line\">740</span><br><span class=\"line\">741</span><br><span class=\"line\">742</span><br><span class=\"line\">743</span><br><span class=\"line\">744</span><br><span class=\"line\">745</span><br><span class=\"line\">746</span><br><span class=\"line\">747</span><br><span class=\"line\">748</span><br><span class=\"line\">749</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs csharp\"><span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">pragma</span> <span class=\"hljs-meta-keyword\">warning</span> disable 1591, 0612, 3021</span><br><span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">region</span> Designer generated code</span><br><br>using pb = global::Google.Protobuf;<br>using pbc = global::Google.Protobuf.Collections;<br>using pbr = global::Google.Protobuf.Reflection;<br>using scg = global::System.Collections.Generic;<br><span class=\"hljs-keyword\">namespace</span> <span class=\"hljs-title\">Math</span> &#123;<br><br>  <span class=\"hljs-comment\"><span class=\"hljs-doctag\">///</span> <span class=\"hljs-doctag\">&lt;summary&gt;</span>Holder for reflection information generated from math/math.proto<span class=\"hljs-doctag\">&lt;/summary&gt;</span></span><br>  <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">partial</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">MathReflection</span> &#123;<br><br>    <span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">region</span> Descriptor</span><br>    <span class=\"hljs-comment\"><span class=\"hljs-doctag\">///</span> <span class=\"hljs-doctag\">&lt;summary&gt;</span>File descriptor for math/math.proto<span class=\"hljs-doctag\">&lt;/summary&gt;</span></span><br>    public static pbr::FileDescriptor Descriptor &#123;<br>      <span class=\"hljs-keyword\">get</span> &#123; <span class=\"hljs-keyword\">return</span> descriptor; &#125;<br>    &#125;<br>    private static pbr::FileDescriptor descriptor;<br><br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">static</span> <span class=\"hljs-title\">MathReflection</span>(<span class=\"hljs-params\"></span>)</span> &#123;<br>      byte[] descriptorData = global::System.Convert.FromBase64String(<br>          <span class=\"hljs-built_in\">string</span>.Concat(<br>            <span class=\"hljs-string\">&quot;Cg9tYXRoL21hdGgucHJvdG8SBG1hdGgiLAoHRGl2QXJncxIQCghkaXZpZGVu&quot;</span>,<br>            <span class=\"hljs-string\">&quot;ZBgBIAEoAxIPCgdkaXZpc29yGAIgASgDIi8KCERpdlJlcGx5EhAKCHF1b3Rp&quot;</span>,<br>            <span class=\"hljs-string\">&quot;ZW50GAEgASgDEhEKCXJlbWFpbmRlchgCIAEoAyIYCgdGaWJBcmdzEg0KBWxp&quot;</span>,<br>            <span class=\"hljs-string\">&quot;bWl0GAEgASgDIhIKA051bRILCgNudW0YASABKAMiGQoIRmliUmVwbHkSDQoF&quot;</span>,<br>            <span class=\"hljs-string\">&quot;Y291bnQYASABKAMypAEKBE1hdGgSJgoDRGl2Eg0ubWF0aC5EaXZBcmdzGg4u&quot;</span>,<br>            <span class=\"hljs-string\">&quot;bWF0aC5EaXZSZXBseSIAEi4KB0Rpdk1hbnkSDS5tYXRoLkRpdkFyZ3MaDi5t&quot;</span>,<br>            <span class=\"hljs-string\">&quot;YXRoLkRpdlJlcGx5IgAoATABEiMKA0ZpYhINLm1hdGguRmliQXJncxoJLm1h&quot;</span>,<br>            <span class=\"hljs-string\">&quot;dGguTnVtIgAwARIfCgNTdW0SCS5tYXRoLk51bRoJLm1hdGguTnVtIgAoAWIG&quot;</span>,<br>            <span class=\"hljs-string\">&quot;cHJvdG8z&quot;</span>));<br>      descriptor = pbr::FileDescriptor.FromGeneratedCode(descriptorData,<br>          new pbr::FileDescriptor[] &#123; &#125;,<br>          new pbr::GeneratedClrTypeInfo(null, new pbr::GeneratedClrTypeInfo[] &#123;<br>            new pbr::GeneratedClrTypeInfo(typeof(global::Math.DivArgs), global::Math.DivArgs.Parser, new[]&#123; &quot;Dividend&quot;, &quot;Divisor&quot; &#125;, null, null, null),<br>            new pbr::GeneratedClrTypeInfo(typeof(global::Math.DivReply), global::Math.DivReply.Parser, new[]&#123; &quot;Quotient&quot;, &quot;Remainder&quot; &#125;, null, null, null),<br>            new pbr::GeneratedClrTypeInfo(typeof(global::Math.FibArgs), global::Math.FibArgs.Parser, new[]&#123; &quot;Limit&quot; &#125;, null, null, null),<br>            new pbr::GeneratedClrTypeInfo(typeof(global::Math.Num), global::Math.Num.Parser, new[]&#123; &quot;Num_&quot; &#125;, null, null, null),<br>            new pbr::GeneratedClrTypeInfo(typeof(global::Math.FibReply), global::Math.FibReply.Parser, new[]&#123; &quot;Count&quot; &#125;, null, null, null)<br>          &#125;));<br>    &#125;<br>    <span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">endregion</span></span><br><br>  &#125;<br>  <span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">region</span> Messages</span><br>  <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">sealed</span> <span class=\"hljs-keyword\">partial</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">DivArgs</span> : <span class=\"hljs-title\">pb</span>::<span class=\"hljs-title\">IMessage</span>&lt;<span class=\"hljs-title\">DivArgs</span>&gt; &#123;<br>    private static readonly pb::MessageParser&lt;DivArgs&gt; _parser = new pb::MessageParser&lt;DivArgs&gt;(() =&gt; new DivArgs());<br>    private pb::UnknownFieldSet _unknownFields;<br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    public static pb::MessageParser&lt;DivArgs&gt; Parser &#123; get &#123; return _parser; &#125; &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    public static pbr::MessageDescriptor Descriptor &#123;<br>      get &#123; return global::Math.MathReflection.Descriptor.MessageTypes[0]; &#125;<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    pbr::MessageDescriptor pb::IMessage.Descriptor &#123;<br>      <span class=\"hljs-keyword\">get</span> &#123; <span class=\"hljs-keyword\">return</span> Descriptor; &#125;<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-title\">DivArgs</span>(<span class=\"hljs-params\"></span>)</span> &#123;<br>      OnConstruction();<br>    &#125;<br><br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">partial</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">OnConstruction</span>(<span class=\"hljs-params\"></span>)</span>;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-title\">DivArgs</span>(<span class=\"hljs-params\">DivArgs other</span>) : <span class=\"hljs-title\">this</span>(<span class=\"hljs-params\"></span>)</span> &#123;<br>      dividend_ = other.dividend_;<br>      divisor_ = other.divisor_;<br>      _unknownFields = pb::UnknownFieldSet.Clone(other._unknownFields);<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> DivArgs <span class=\"hljs-title\">Clone</span>(<span class=\"hljs-params\"></span>)</span> &#123;<br>      <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> DivArgs(<span class=\"hljs-keyword\">this</span>);<br>    &#125;<br><br>    <span class=\"hljs-comment\"><span class=\"hljs-doctag\">///</span> <span class=\"hljs-doctag\">&lt;summary&gt;</span>Field number for the &quot;dividend&quot; field.<span class=\"hljs-doctag\">&lt;/summary&gt;</span></span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">const</span> <span class=\"hljs-built_in\">int</span> DividendFieldNumber = <span class=\"hljs-number\">1</span>;<br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-built_in\">long</span> dividend_;<br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-built_in\">long</span> Dividend &#123;<br>      <span class=\"hljs-keyword\">get</span> &#123; <span class=\"hljs-keyword\">return</span> dividend_; &#125;<br>      <span class=\"hljs-keyword\">set</span> &#123;<br>        dividend_ = <span class=\"hljs-keyword\">value</span>;<br>      &#125;<br>    &#125;<br><br>    <span class=\"hljs-comment\"><span class=\"hljs-doctag\">///</span> <span class=\"hljs-doctag\">&lt;summary&gt;</span>Field number for the &quot;divisor&quot; field.<span class=\"hljs-doctag\">&lt;/summary&gt;</span></span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">const</span> <span class=\"hljs-built_in\">int</span> DivisorFieldNumber = <span class=\"hljs-number\">2</span>;<br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-built_in\">long</span> divisor_;<br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-built_in\">long</span> Divisor &#123;<br>      <span class=\"hljs-keyword\">get</span> &#123; <span class=\"hljs-keyword\">return</span> divisor_; &#125;<br>      <span class=\"hljs-keyword\">set</span> &#123;<br>        divisor_ = <span class=\"hljs-keyword\">value</span>;<br>      &#125;<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">override</span> <span class=\"hljs-built_in\">bool</span> <span class=\"hljs-title\">Equals</span>(<span class=\"hljs-params\"><span class=\"hljs-built_in\">object</span> other</span>)</span> &#123;<br>      <span class=\"hljs-keyword\">return</span> Equals(other <span class=\"hljs-keyword\">as</span> DivArgs);<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-built_in\">bool</span> <span class=\"hljs-title\">Equals</span>(<span class=\"hljs-params\">DivArgs other</span>)</span> &#123;<br>      <span class=\"hljs-keyword\">if</span> (ReferenceEquals(other, <span class=\"hljs-literal\">null</span>)) &#123;<br>        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">false</span>;<br>      &#125;<br>      <span class=\"hljs-keyword\">if</span> (ReferenceEquals(other, <span class=\"hljs-keyword\">this</span>)) &#123;<br>        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">true</span>;<br>      &#125;<br>      <span class=\"hljs-keyword\">if</span> (Dividend != other.Dividend) <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">false</span>;<br>      <span class=\"hljs-keyword\">if</span> (Divisor != other.Divisor) <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">false</span>;<br>      <span class=\"hljs-keyword\">return</span> Equals(_unknownFields, other._unknownFields);<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">override</span> <span class=\"hljs-built_in\">int</span> <span class=\"hljs-title\">GetHashCode</span>(<span class=\"hljs-params\"></span>)</span> &#123;<br>      <span class=\"hljs-built_in\">int</span> hash = <span class=\"hljs-number\">1</span>;<br>      <span class=\"hljs-keyword\">if</span> (Dividend != <span class=\"hljs-number\">0L</span>) hash ^= Dividend.GetHashCode();<br>      <span class=\"hljs-keyword\">if</span> (Divisor != <span class=\"hljs-number\">0L</span>) hash ^= Divisor.GetHashCode();<br>      <span class=\"hljs-keyword\">if</span> (_unknownFields != <span class=\"hljs-literal\">null</span>) &#123;<br>        hash ^= _unknownFields.GetHashCode();<br>      &#125;<br>      <span class=\"hljs-keyword\">return</span> hash;<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">override</span> <span class=\"hljs-built_in\">string</span> <span class=\"hljs-title\">ToString</span>(<span class=\"hljs-params\"></span>)</span> &#123;<br>      return pb::JsonFormatter.ToDiagnosticString(this);<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">WriteTo</span>(<span class=\"hljs-params\">pb::CodedOutputStream output</span>)</span> &#123;<br>      <span class=\"hljs-keyword\">if</span> (Dividend != <span class=\"hljs-number\">0L</span>) &#123;<br>        output.WriteRawTag(<span class=\"hljs-number\">8</span>);<br>        output.WriteInt64(Dividend);<br>      &#125;<br>      <span class=\"hljs-keyword\">if</span> (Divisor != <span class=\"hljs-number\">0L</span>) &#123;<br>        output.WriteRawTag(<span class=\"hljs-number\">16</span>);<br>        output.WriteInt64(Divisor);<br>      &#125;<br>      <span class=\"hljs-keyword\">if</span> (_unknownFields != <span class=\"hljs-literal\">null</span>) &#123;<br>        _unknownFields.WriteTo(output);<br>      &#125;<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-built_in\">int</span> <span class=\"hljs-title\">CalculateSize</span>(<span class=\"hljs-params\"></span>)</span> &#123;<br>      <span class=\"hljs-built_in\">int</span> size = <span class=\"hljs-number\">0</span>;<br>      <span class=\"hljs-keyword\">if</span> (Dividend != <span class=\"hljs-number\">0L</span>) &#123;<br>        size += 1 + pb::CodedOutputStream.ComputeInt64Size(Dividend);<br>      &#125;<br>      <span class=\"hljs-keyword\">if</span> (Divisor != <span class=\"hljs-number\">0L</span>) &#123;<br>        size += 1 + pb::CodedOutputStream.ComputeInt64Size(Divisor);<br>      &#125;<br>      <span class=\"hljs-keyword\">if</span> (_unknownFields != <span class=\"hljs-literal\">null</span>) &#123;<br>        size += _unknownFields.CalculateSize();<br>      &#125;<br>      <span class=\"hljs-keyword\">return</span> size;<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">MergeFrom</span>(<span class=\"hljs-params\">DivArgs other</span>)</span> &#123;<br>      <span class=\"hljs-keyword\">if</span> (other == <span class=\"hljs-literal\">null</span>) &#123;<br>        <span class=\"hljs-keyword\">return</span>;<br>      &#125;<br>      <span class=\"hljs-keyword\">if</span> (other.Dividend != <span class=\"hljs-number\">0L</span>) &#123;<br>        Dividend = other.Dividend;<br>      &#125;<br>      <span class=\"hljs-keyword\">if</span> (other.Divisor != <span class=\"hljs-number\">0L</span>) &#123;<br>        Divisor = other.Divisor;<br>      &#125;<br>      _unknownFields = pb::UnknownFieldSet.MergeFrom(_unknownFields, other._unknownFields);<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">MergeFrom</span>(<span class=\"hljs-params\">pb::CodedInputStream input</span>)</span> &#123;<br>      uint tag;<br>      <span class=\"hljs-keyword\">while</span> ((tag = input.ReadTag()) != <span class=\"hljs-number\">0</span>) &#123;<br>        <span class=\"hljs-keyword\">switch</span>(tag) &#123;<br>          <span class=\"hljs-literal\">default</span>:<br>            _unknownFields = pb::UnknownFieldSet.MergeFieldFrom(_unknownFields, input);<br>            <span class=\"hljs-keyword\">break</span>;<br>          <span class=\"hljs-keyword\">case</span> <span class=\"hljs-number\">8</span>: &#123;<br>            Dividend = input.ReadInt64();<br>            <span class=\"hljs-keyword\">break</span>;<br>          &#125;<br>          <span class=\"hljs-keyword\">case</span> <span class=\"hljs-number\">16</span>: &#123;<br>            Divisor = input.ReadInt64();<br>            <span class=\"hljs-keyword\">break</span>;<br>          &#125;<br>        &#125;<br>      &#125;<br>    &#125;<br><br>  &#125;<br><br>  <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">sealed</span> <span class=\"hljs-keyword\">partial</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">DivReply</span> : <span class=\"hljs-title\">pb</span>::<span class=\"hljs-title\">IMessage</span>&lt;<span class=\"hljs-title\">DivReply</span>&gt; &#123;<br>    private static readonly pb::MessageParser&lt;DivReply&gt; _parser = new pb::MessageParser&lt;DivReply&gt;(() =&gt; new DivReply());<br>    private pb::UnknownFieldSet _unknownFields;<br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    public static pb::MessageParser&lt;DivReply&gt; Parser &#123; get &#123; return _parser; &#125; &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    public static pbr::MessageDescriptor Descriptor &#123;<br>      get &#123; return global::Math.MathReflection.Descriptor.MessageTypes[1]; &#125;<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    pbr::MessageDescriptor pb::IMessage.Descriptor &#123;<br>      <span class=\"hljs-keyword\">get</span> &#123; <span class=\"hljs-keyword\">return</span> Descriptor; &#125;<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-title\">DivReply</span>(<span class=\"hljs-params\"></span>)</span> &#123;<br>      OnConstruction();<br>    &#125;<br><br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">partial</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">OnConstruction</span>(<span class=\"hljs-params\"></span>)</span>;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-title\">DivReply</span>(<span class=\"hljs-params\">DivReply other</span>) : <span class=\"hljs-title\">this</span>(<span class=\"hljs-params\"></span>)</span> &#123;<br>      quotient_ = other.quotient_;<br>      remainder_ = other.remainder_;<br>      _unknownFields = pb::UnknownFieldSet.Clone(other._unknownFields);<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> DivReply <span class=\"hljs-title\">Clone</span>(<span class=\"hljs-params\"></span>)</span> &#123;<br>      <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> DivReply(<span class=\"hljs-keyword\">this</span>);<br>    &#125;<br><br>    <span class=\"hljs-comment\"><span class=\"hljs-doctag\">///</span> <span class=\"hljs-doctag\">&lt;summary&gt;</span>Field number for the &quot;quotient&quot; field.<span class=\"hljs-doctag\">&lt;/summary&gt;</span></span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">const</span> <span class=\"hljs-built_in\">int</span> QuotientFieldNumber = <span class=\"hljs-number\">1</span>;<br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-built_in\">long</span> quotient_;<br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-built_in\">long</span> Quotient &#123;<br>      <span class=\"hljs-keyword\">get</span> &#123; <span class=\"hljs-keyword\">return</span> quotient_; &#125;<br>      <span class=\"hljs-keyword\">set</span> &#123;<br>        quotient_ = <span class=\"hljs-keyword\">value</span>;<br>      &#125;<br>    &#125;<br><br>    <span class=\"hljs-comment\"><span class=\"hljs-doctag\">///</span> <span class=\"hljs-doctag\">&lt;summary&gt;</span>Field number for the &quot;remainder&quot; field.<span class=\"hljs-doctag\">&lt;/summary&gt;</span></span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">const</span> <span class=\"hljs-built_in\">int</span> RemainderFieldNumber = <span class=\"hljs-number\">2</span>;<br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-built_in\">long</span> remainder_;<br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-built_in\">long</span> Remainder &#123;<br>      <span class=\"hljs-keyword\">get</span> &#123; <span class=\"hljs-keyword\">return</span> remainder_; &#125;<br>      <span class=\"hljs-keyword\">set</span> &#123;<br>        remainder_ = <span class=\"hljs-keyword\">value</span>;<br>      &#125;<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">override</span> <span class=\"hljs-built_in\">bool</span> <span class=\"hljs-title\">Equals</span>(<span class=\"hljs-params\"><span class=\"hljs-built_in\">object</span> other</span>)</span> &#123;<br>      <span class=\"hljs-keyword\">return</span> Equals(other <span class=\"hljs-keyword\">as</span> DivReply);<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-built_in\">bool</span> <span class=\"hljs-title\">Equals</span>(<span class=\"hljs-params\">DivReply other</span>)</span> &#123;<br>      <span class=\"hljs-keyword\">if</span> (ReferenceEquals(other, <span class=\"hljs-literal\">null</span>)) &#123;<br>        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">false</span>;<br>      &#125;<br>      <span class=\"hljs-keyword\">if</span> (ReferenceEquals(other, <span class=\"hljs-keyword\">this</span>)) &#123;<br>        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">true</span>;<br>      &#125;<br>      <span class=\"hljs-keyword\">if</span> (Quotient != other.Quotient) <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">false</span>;<br>      <span class=\"hljs-keyword\">if</span> (Remainder != other.Remainder) <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">false</span>;<br>      <span class=\"hljs-keyword\">return</span> Equals(_unknownFields, other._unknownFields);<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">override</span> <span class=\"hljs-built_in\">int</span> <span class=\"hljs-title\">GetHashCode</span>(<span class=\"hljs-params\"></span>)</span> &#123;<br>      <span class=\"hljs-built_in\">int</span> hash = <span class=\"hljs-number\">1</span>;<br>      <span class=\"hljs-keyword\">if</span> (Quotient != <span class=\"hljs-number\">0L</span>) hash ^= Quotient.GetHashCode();<br>      <span class=\"hljs-keyword\">if</span> (Remainder != <span class=\"hljs-number\">0L</span>) hash ^= Remainder.GetHashCode();<br>      <span class=\"hljs-keyword\">if</span> (_unknownFields != <span class=\"hljs-literal\">null</span>) &#123;<br>        hash ^= _unknownFields.GetHashCode();<br>      &#125;<br>      <span class=\"hljs-keyword\">return</span> hash;<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">override</span> <span class=\"hljs-built_in\">string</span> <span class=\"hljs-title\">ToString</span>(<span class=\"hljs-params\"></span>)</span> &#123;<br>      return pb::JsonFormatter.ToDiagnosticString(this);<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">WriteTo</span>(<span class=\"hljs-params\">pb::CodedOutputStream output</span>)</span> &#123;<br>      <span class=\"hljs-keyword\">if</span> (Quotient != <span class=\"hljs-number\">0L</span>) &#123;<br>        output.WriteRawTag(<span class=\"hljs-number\">8</span>);<br>        output.WriteInt64(Quotient);<br>      &#125;<br>      <span class=\"hljs-keyword\">if</span> (Remainder != <span class=\"hljs-number\">0L</span>) &#123;<br>        output.WriteRawTag(<span class=\"hljs-number\">16</span>);<br>        output.WriteInt64(Remainder);<br>      &#125;<br>      <span class=\"hljs-keyword\">if</span> (_unknownFields != <span class=\"hljs-literal\">null</span>) &#123;<br>        _unknownFields.WriteTo(output);<br>      &#125;<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-built_in\">int</span> <span class=\"hljs-title\">CalculateSize</span>(<span class=\"hljs-params\"></span>)</span> &#123;<br>      <span class=\"hljs-built_in\">int</span> size = <span class=\"hljs-number\">0</span>;<br>      <span class=\"hljs-keyword\">if</span> (Quotient != <span class=\"hljs-number\">0L</span>) &#123;<br>        size += 1 + pb::CodedOutputStream.ComputeInt64Size(Quotient);<br>      &#125;<br>      <span class=\"hljs-keyword\">if</span> (Remainder != <span class=\"hljs-number\">0L</span>) &#123;<br>        size += 1 + pb::CodedOutputStream.ComputeInt64Size(Remainder);<br>      &#125;<br>      <span class=\"hljs-keyword\">if</span> (_unknownFields != <span class=\"hljs-literal\">null</span>) &#123;<br>        size += _unknownFields.CalculateSize();<br>      &#125;<br>      <span class=\"hljs-keyword\">return</span> size;<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">MergeFrom</span>(<span class=\"hljs-params\">DivReply other</span>)</span> &#123;<br>      <span class=\"hljs-keyword\">if</span> (other == <span class=\"hljs-literal\">null</span>) &#123;<br>        <span class=\"hljs-keyword\">return</span>;<br>      &#125;<br>      <span class=\"hljs-keyword\">if</span> (other.Quotient != <span class=\"hljs-number\">0L</span>) &#123;<br>        Quotient = other.Quotient;<br>      &#125;<br>      <span class=\"hljs-keyword\">if</span> (other.Remainder != <span class=\"hljs-number\">0L</span>) &#123;<br>        Remainder = other.Remainder;<br>      &#125;<br>      _unknownFields = pb::UnknownFieldSet.MergeFrom(_unknownFields, other._unknownFields);<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">MergeFrom</span>(<span class=\"hljs-params\">pb::CodedInputStream input</span>)</span> &#123;<br>      uint tag;<br>      <span class=\"hljs-keyword\">while</span> ((tag = input.ReadTag()) != <span class=\"hljs-number\">0</span>) &#123;<br>        <span class=\"hljs-keyword\">switch</span>(tag) &#123;<br>          <span class=\"hljs-literal\">default</span>:<br>            _unknownFields = pb::UnknownFieldSet.MergeFieldFrom(_unknownFields, input);<br>            <span class=\"hljs-keyword\">break</span>;<br>          <span class=\"hljs-keyword\">case</span> <span class=\"hljs-number\">8</span>: &#123;<br>            Quotient = input.ReadInt64();<br>            <span class=\"hljs-keyword\">break</span>;<br>          &#125;<br>          <span class=\"hljs-keyword\">case</span> <span class=\"hljs-number\">16</span>: &#123;<br>            Remainder = input.ReadInt64();<br>            <span class=\"hljs-keyword\">break</span>;<br>          &#125;<br>        &#125;<br>      &#125;<br>    &#125;<br><br>  &#125;<br><br>  <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">sealed</span> <span class=\"hljs-keyword\">partial</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">FibArgs</span> : <span class=\"hljs-title\">pb</span>::<span class=\"hljs-title\">IMessage</span>&lt;<span class=\"hljs-title\">FibArgs</span>&gt; &#123;<br>    private static readonly pb::MessageParser&lt;FibArgs&gt; _parser = new pb::MessageParser&lt;FibArgs&gt;(() =&gt; new FibArgs());<br>    private pb::UnknownFieldSet _unknownFields;<br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    public static pb::MessageParser&lt;FibArgs&gt; Parser &#123; get &#123; return _parser; &#125; &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    public static pbr::MessageDescriptor Descriptor &#123;<br>      get &#123; return global::Math.MathReflection.Descriptor.MessageTypes[2]; &#125;<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    pbr::MessageDescriptor pb::IMessage.Descriptor &#123;<br>      <span class=\"hljs-keyword\">get</span> &#123; <span class=\"hljs-keyword\">return</span> Descriptor; &#125;<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-title\">FibArgs</span>(<span class=\"hljs-params\"></span>)</span> &#123;<br>      OnConstruction();<br>    &#125;<br><br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">partial</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">OnConstruction</span>(<span class=\"hljs-params\"></span>)</span>;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-title\">FibArgs</span>(<span class=\"hljs-params\">FibArgs other</span>) : <span class=\"hljs-title\">this</span>(<span class=\"hljs-params\"></span>)</span> &#123;<br>      limit_ = other.limit_;<br>      _unknownFields = pb::UnknownFieldSet.Clone(other._unknownFields);<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> FibArgs <span class=\"hljs-title\">Clone</span>(<span class=\"hljs-params\"></span>)</span> &#123;<br>      <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> FibArgs(<span class=\"hljs-keyword\">this</span>);<br>    &#125;<br><br>    <span class=\"hljs-comment\"><span class=\"hljs-doctag\">///</span> <span class=\"hljs-doctag\">&lt;summary&gt;</span>Field number for the &quot;limit&quot; field.<span class=\"hljs-doctag\">&lt;/summary&gt;</span></span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">const</span> <span class=\"hljs-built_in\">int</span> LimitFieldNumber = <span class=\"hljs-number\">1</span>;<br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-built_in\">long</span> limit_;<br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-built_in\">long</span> Limit &#123;<br>      <span class=\"hljs-keyword\">get</span> &#123; <span class=\"hljs-keyword\">return</span> limit_; &#125;<br>      <span class=\"hljs-keyword\">set</span> &#123;<br>        limit_ = <span class=\"hljs-keyword\">value</span>;<br>      &#125;<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">override</span> <span class=\"hljs-built_in\">bool</span> <span class=\"hljs-title\">Equals</span>(<span class=\"hljs-params\"><span class=\"hljs-built_in\">object</span> other</span>)</span> &#123;<br>      <span class=\"hljs-keyword\">return</span> Equals(other <span class=\"hljs-keyword\">as</span> FibArgs);<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-built_in\">bool</span> <span class=\"hljs-title\">Equals</span>(<span class=\"hljs-params\">FibArgs other</span>)</span> &#123;<br>      <span class=\"hljs-keyword\">if</span> (ReferenceEquals(other, <span class=\"hljs-literal\">null</span>)) &#123;<br>        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">false</span>;<br>      &#125;<br>      <span class=\"hljs-keyword\">if</span> (ReferenceEquals(other, <span class=\"hljs-keyword\">this</span>)) &#123;<br>        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">true</span>;<br>      &#125;<br>      <span class=\"hljs-keyword\">if</span> (Limit != other.Limit) <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">false</span>;<br>      <span class=\"hljs-keyword\">return</span> Equals(_unknownFields, other._unknownFields);<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">override</span> <span class=\"hljs-built_in\">int</span> <span class=\"hljs-title\">GetHashCode</span>(<span class=\"hljs-params\"></span>)</span> &#123;<br>      <span class=\"hljs-built_in\">int</span> hash = <span class=\"hljs-number\">1</span>;<br>      <span class=\"hljs-keyword\">if</span> (Limit != <span class=\"hljs-number\">0L</span>) hash ^= Limit.GetHashCode();<br>      <span class=\"hljs-keyword\">if</span> (_unknownFields != <span class=\"hljs-literal\">null</span>) &#123;<br>        hash ^= _unknownFields.GetHashCode();<br>      &#125;<br>      <span class=\"hljs-keyword\">return</span> hash;<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">override</span> <span class=\"hljs-built_in\">string</span> <span class=\"hljs-title\">ToString</span>(<span class=\"hljs-params\"></span>)</span> &#123;<br>      return pb::JsonFormatter.ToDiagnosticString(this);<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">WriteTo</span>(<span class=\"hljs-params\">pb::CodedOutputStream output</span>)</span> &#123;<br>      <span class=\"hljs-keyword\">if</span> (Limit != <span class=\"hljs-number\">0L</span>) &#123;<br>        output.WriteRawTag(<span class=\"hljs-number\">8</span>);<br>        output.WriteInt64(Limit);<br>      &#125;<br>      <span class=\"hljs-keyword\">if</span> (_unknownFields != <span class=\"hljs-literal\">null</span>) &#123;<br>        _unknownFields.WriteTo(output);<br>      &#125;<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-built_in\">int</span> <span class=\"hljs-title\">CalculateSize</span>(<span class=\"hljs-params\"></span>)</span> &#123;<br>      <span class=\"hljs-built_in\">int</span> size = <span class=\"hljs-number\">0</span>;<br>      <span class=\"hljs-keyword\">if</span> (Limit != <span class=\"hljs-number\">0L</span>) &#123;<br>        size += 1 + pb::CodedOutputStream.ComputeInt64Size(Limit);<br>      &#125;<br>      <span class=\"hljs-keyword\">if</span> (_unknownFields != <span class=\"hljs-literal\">null</span>) &#123;<br>        size += _unknownFields.CalculateSize();<br>      &#125;<br>      <span class=\"hljs-keyword\">return</span> size;<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">MergeFrom</span>(<span class=\"hljs-params\">FibArgs other</span>)</span> &#123;<br>      <span class=\"hljs-keyword\">if</span> (other == <span class=\"hljs-literal\">null</span>) &#123;<br>        <span class=\"hljs-keyword\">return</span>;<br>      &#125;<br>      <span class=\"hljs-keyword\">if</span> (other.Limit != <span class=\"hljs-number\">0L</span>) &#123;<br>        Limit = other.Limit;<br>      &#125;<br>      _unknownFields = pb::UnknownFieldSet.MergeFrom(_unknownFields, other._unknownFields);<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">MergeFrom</span>(<span class=\"hljs-params\">pb::CodedInputStream input</span>)</span> &#123;<br>      uint tag;<br>      <span class=\"hljs-keyword\">while</span> ((tag = input.ReadTag()) != <span class=\"hljs-number\">0</span>) &#123;<br>        <span class=\"hljs-keyword\">switch</span>(tag) &#123;<br>          <span class=\"hljs-literal\">default</span>:<br>            _unknownFields = pb::UnknownFieldSet.MergeFieldFrom(_unknownFields, input);<br>            <span class=\"hljs-keyword\">break</span>;<br>          <span class=\"hljs-keyword\">case</span> <span class=\"hljs-number\">8</span>: &#123;<br>            Limit = input.ReadInt64();<br>            <span class=\"hljs-keyword\">break</span>;<br>          &#125;<br>        &#125;<br>      &#125;<br>    &#125;<br><br>  &#125;<br><br>  <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">sealed</span> <span class=\"hljs-keyword\">partial</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">Num</span> : <span class=\"hljs-title\">pb</span>::<span class=\"hljs-title\">IMessage</span>&lt;<span class=\"hljs-title\">Num</span>&gt; &#123;<br>    private static readonly pb::MessageParser&lt;Num&gt; _parser = new pb::MessageParser&lt;Num&gt;(() =&gt; new Num());<br>    private pb::UnknownFieldSet _unknownFields;<br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    public static pb::MessageParser&lt;Num&gt; Parser &#123; get &#123; return _parser; &#125; &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    public static pbr::MessageDescriptor Descriptor &#123;<br>      get &#123; return global::Math.MathReflection.Descriptor.MessageTypes[3]; &#125;<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    pbr::MessageDescriptor pb::IMessage.Descriptor &#123;<br>      <span class=\"hljs-keyword\">get</span> &#123; <span class=\"hljs-keyword\">return</span> Descriptor; &#125;<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-title\">Num</span>(<span class=\"hljs-params\"></span>)</span> &#123;<br>      OnConstruction();<br>    &#125;<br><br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">partial</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">OnConstruction</span>(<span class=\"hljs-params\"></span>)</span>;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-title\">Num</span>(<span class=\"hljs-params\">Num other</span>) : <span class=\"hljs-title\">this</span>(<span class=\"hljs-params\"></span>)</span> &#123;<br>      num_ = other.num_;<br>      _unknownFields = pb::UnknownFieldSet.Clone(other._unknownFields);<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> Num <span class=\"hljs-title\">Clone</span>(<span class=\"hljs-params\"></span>)</span> &#123;<br>      <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> Num(<span class=\"hljs-keyword\">this</span>);<br>    &#125;<br><br>    <span class=\"hljs-comment\"><span class=\"hljs-doctag\">///</span> <span class=\"hljs-doctag\">&lt;summary&gt;</span>Field number for the &quot;num&quot; field.<span class=\"hljs-doctag\">&lt;/summary&gt;</span></span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">const</span> <span class=\"hljs-built_in\">int</span> Num_FieldNumber = <span class=\"hljs-number\">1</span>;<br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-built_in\">long</span> num_;<br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-built_in\">long</span> Num_ &#123;<br>      <span class=\"hljs-keyword\">get</span> &#123; <span class=\"hljs-keyword\">return</span> num_; &#125;<br>      <span class=\"hljs-keyword\">set</span> &#123;<br>        num_ = <span class=\"hljs-keyword\">value</span>;<br>      &#125;<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">override</span> <span class=\"hljs-built_in\">bool</span> <span class=\"hljs-title\">Equals</span>(<span class=\"hljs-params\"><span class=\"hljs-built_in\">object</span> other</span>)</span> &#123;<br>      <span class=\"hljs-keyword\">return</span> Equals(other <span class=\"hljs-keyword\">as</span> Num);<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-built_in\">bool</span> <span class=\"hljs-title\">Equals</span>(<span class=\"hljs-params\">Num other</span>)</span> &#123;<br>      <span class=\"hljs-keyword\">if</span> (ReferenceEquals(other, <span class=\"hljs-literal\">null</span>)) &#123;<br>        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">false</span>;<br>      &#125;<br>      <span class=\"hljs-keyword\">if</span> (ReferenceEquals(other, <span class=\"hljs-keyword\">this</span>)) &#123;<br>        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">true</span>;<br>      &#125;<br>      <span class=\"hljs-keyword\">if</span> (Num_ != other.Num_) <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">false</span>;<br>      <span class=\"hljs-keyword\">return</span> Equals(_unknownFields, other._unknownFields);<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">override</span> <span class=\"hljs-built_in\">int</span> <span class=\"hljs-title\">GetHashCode</span>(<span class=\"hljs-params\"></span>)</span> &#123;<br>      <span class=\"hljs-built_in\">int</span> hash = <span class=\"hljs-number\">1</span>;<br>      <span class=\"hljs-keyword\">if</span> (Num_ != <span class=\"hljs-number\">0L</span>) hash ^= Num_.GetHashCode();<br>      <span class=\"hljs-keyword\">if</span> (_unknownFields != <span class=\"hljs-literal\">null</span>) &#123;<br>        hash ^= _unknownFields.GetHashCode();<br>      &#125;<br>      <span class=\"hljs-keyword\">return</span> hash;<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">override</span> <span class=\"hljs-built_in\">string</span> <span class=\"hljs-title\">ToString</span>(<span class=\"hljs-params\"></span>)</span> &#123;<br>      return pb::JsonFormatter.ToDiagnosticString(this);<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">WriteTo</span>(<span class=\"hljs-params\">pb::CodedOutputStream output</span>)</span> &#123;<br>      <span class=\"hljs-keyword\">if</span> (Num_ != <span class=\"hljs-number\">0L</span>) &#123;<br>        output.WriteRawTag(<span class=\"hljs-number\">8</span>);<br>        output.WriteInt64(Num_);<br>      &#125;<br>      <span class=\"hljs-keyword\">if</span> (_unknownFields != <span class=\"hljs-literal\">null</span>) &#123;<br>        _unknownFields.WriteTo(output);<br>      &#125;<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-built_in\">int</span> <span class=\"hljs-title\">CalculateSize</span>(<span class=\"hljs-params\"></span>)</span> &#123;<br>      <span class=\"hljs-built_in\">int</span> size = <span class=\"hljs-number\">0</span>;<br>      <span class=\"hljs-keyword\">if</span> (Num_ != <span class=\"hljs-number\">0L</span>) &#123;<br>        size += 1 + pb::CodedOutputStream.ComputeInt64Size(Num_);<br>      &#125;<br>      <span class=\"hljs-keyword\">if</span> (_unknownFields != <span class=\"hljs-literal\">null</span>) &#123;<br>        size += _unknownFields.CalculateSize();<br>      &#125;<br>      <span class=\"hljs-keyword\">return</span> size;<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">MergeFrom</span>(<span class=\"hljs-params\">Num other</span>)</span> &#123;<br>      <span class=\"hljs-keyword\">if</span> (other == <span class=\"hljs-literal\">null</span>) &#123;<br>        <span class=\"hljs-keyword\">return</span>;<br>      &#125;<br>      <span class=\"hljs-keyword\">if</span> (other.Num_ != <span class=\"hljs-number\">0L</span>) &#123;<br>        Num_ = other.Num_;<br>      &#125;<br>      _unknownFields = pb::UnknownFieldSet.MergeFrom(_unknownFields, other._unknownFields);<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">MergeFrom</span>(<span class=\"hljs-params\">pb::CodedInputStream input</span>)</span> &#123;<br>      uint tag;<br>      <span class=\"hljs-keyword\">while</span> ((tag = input.ReadTag()) != <span class=\"hljs-number\">0</span>) &#123;<br>        <span class=\"hljs-keyword\">switch</span>(tag) &#123;<br>          <span class=\"hljs-literal\">default</span>:<br>            _unknownFields = pb::UnknownFieldSet.MergeFieldFrom(_unknownFields, input);<br>            <span class=\"hljs-keyword\">break</span>;<br>          <span class=\"hljs-keyword\">case</span> <span class=\"hljs-number\">8</span>: &#123;<br>            Num_ = input.ReadInt64();<br>            <span class=\"hljs-keyword\">break</span>;<br>          &#125;<br>        &#125;<br>      &#125;<br>    &#125;<br><br>  &#125;<br><br>  <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">sealed</span> <span class=\"hljs-keyword\">partial</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">FibReply</span> : <span class=\"hljs-title\">pb</span>::<span class=\"hljs-title\">IMessage</span>&lt;<span class=\"hljs-title\">FibReply</span>&gt; &#123;<br>    private static readonly pb::MessageParser&lt;FibReply&gt; _parser = new pb::MessageParser&lt;FibReply&gt;(() =&gt; new FibReply());<br>    private pb::UnknownFieldSet _unknownFields;<br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    public static pb::MessageParser&lt;FibReply&gt; Parser &#123; get &#123; return _parser; &#125; &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    public static pbr::MessageDescriptor Descriptor &#123;<br>      get &#123; return global::Math.MathReflection.Descriptor.MessageTypes[4]; &#125;<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    pbr::MessageDescriptor pb::IMessage.Descriptor &#123;<br>      <span class=\"hljs-keyword\">get</span> &#123; <span class=\"hljs-keyword\">return</span> Descriptor; &#125;<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-title\">FibReply</span>(<span class=\"hljs-params\"></span>)</span> &#123;<br>      OnConstruction();<br>    &#125;<br><br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">partial</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">OnConstruction</span>(<span class=\"hljs-params\"></span>)</span>;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-title\">FibReply</span>(<span class=\"hljs-params\">FibReply other</span>) : <span class=\"hljs-title\">this</span>(<span class=\"hljs-params\"></span>)</span> &#123;<br>      count_ = other.count_;<br>      _unknownFields = pb::UnknownFieldSet.Clone(other._unknownFields);<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> FibReply <span class=\"hljs-title\">Clone</span>(<span class=\"hljs-params\"></span>)</span> &#123;<br>      <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> FibReply(<span class=\"hljs-keyword\">this</span>);<br>    &#125;<br><br>    <span class=\"hljs-comment\"><span class=\"hljs-doctag\">///</span> <span class=\"hljs-doctag\">&lt;summary&gt;</span>Field number for the &quot;count&quot; field.<span class=\"hljs-doctag\">&lt;/summary&gt;</span></span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">const</span> <span class=\"hljs-built_in\">int</span> CountFieldNumber = <span class=\"hljs-number\">1</span>;<br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-built_in\">long</span> count_;<br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-built_in\">long</span> Count &#123;<br>      <span class=\"hljs-keyword\">get</span> &#123; <span class=\"hljs-keyword\">return</span> count_; &#125;<br>      <span class=\"hljs-keyword\">set</span> &#123;<br>        count_ = <span class=\"hljs-keyword\">value</span>;<br>      &#125;<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">override</span> <span class=\"hljs-built_in\">bool</span> <span class=\"hljs-title\">Equals</span>(<span class=\"hljs-params\"><span class=\"hljs-built_in\">object</span> other</span>)</span> &#123;<br>      <span class=\"hljs-keyword\">return</span> Equals(other <span class=\"hljs-keyword\">as</span> FibReply);<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-built_in\">bool</span> <span class=\"hljs-title\">Equals</span>(<span class=\"hljs-params\">FibReply other</span>)</span> &#123;<br>      <span class=\"hljs-keyword\">if</span> (ReferenceEquals(other, <span class=\"hljs-literal\">null</span>)) &#123;<br>        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">false</span>;<br>      &#125;<br>      <span class=\"hljs-keyword\">if</span> (ReferenceEquals(other, <span class=\"hljs-keyword\">this</span>)) &#123;<br>        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">true</span>;<br>      &#125;<br>      <span class=\"hljs-keyword\">if</span> (Count != other.Count) <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">false</span>;<br>      <span class=\"hljs-keyword\">return</span> Equals(_unknownFields, other._unknownFields);<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">override</span> <span class=\"hljs-built_in\">int</span> <span class=\"hljs-title\">GetHashCode</span>(<span class=\"hljs-params\"></span>)</span> &#123;<br>      <span class=\"hljs-built_in\">int</span> hash = <span class=\"hljs-number\">1</span>;<br>      <span class=\"hljs-keyword\">if</span> (Count != <span class=\"hljs-number\">0L</span>) hash ^= Count.GetHashCode();<br>      <span class=\"hljs-keyword\">if</span> (_unknownFields != <span class=\"hljs-literal\">null</span>) &#123;<br>        hash ^= _unknownFields.GetHashCode();<br>      &#125;<br>      <span class=\"hljs-keyword\">return</span> hash;<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">override</span> <span class=\"hljs-built_in\">string</span> <span class=\"hljs-title\">ToString</span>(<span class=\"hljs-params\"></span>)</span> &#123;<br>      return pb::JsonFormatter.ToDiagnosticString(this);<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">WriteTo</span>(<span class=\"hljs-params\">pb::CodedOutputStream output</span>)</span> &#123;<br>      <span class=\"hljs-keyword\">if</span> (Count != <span class=\"hljs-number\">0L</span>) &#123;<br>        output.WriteRawTag(<span class=\"hljs-number\">8</span>);<br>        output.WriteInt64(Count);<br>      &#125;<br>      <span class=\"hljs-keyword\">if</span> (_unknownFields != <span class=\"hljs-literal\">null</span>) &#123;<br>        _unknownFields.WriteTo(output);<br>      &#125;<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-built_in\">int</span> <span class=\"hljs-title\">CalculateSize</span>(<span class=\"hljs-params\"></span>)</span> &#123;<br>      <span class=\"hljs-built_in\">int</span> size = <span class=\"hljs-number\">0</span>;<br>      <span class=\"hljs-keyword\">if</span> (Count != <span class=\"hljs-number\">0L</span>) &#123;<br>        size += 1 + pb::CodedOutputStream.ComputeInt64Size(Count);<br>      &#125;<br>      <span class=\"hljs-keyword\">if</span> (_unknownFields != <span class=\"hljs-literal\">null</span>) &#123;<br>        size += _unknownFields.CalculateSize();<br>      &#125;<br>      <span class=\"hljs-keyword\">return</span> size;<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">MergeFrom</span>(<span class=\"hljs-params\">FibReply other</span>)</span> &#123;<br>      <span class=\"hljs-keyword\">if</span> (other == <span class=\"hljs-literal\">null</span>) &#123;<br>        <span class=\"hljs-keyword\">return</span>;<br>      &#125;<br>      <span class=\"hljs-keyword\">if</span> (other.Count != <span class=\"hljs-number\">0L</span>) &#123;<br>        Count = other.Count;<br>      &#125;<br>      _unknownFields = pb::UnknownFieldSet.MergeFrom(_unknownFields, other._unknownFields);<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">MergeFrom</span>(<span class=\"hljs-params\">pb::CodedInputStream input</span>)</span> &#123;<br>      uint tag;<br>      <span class=\"hljs-keyword\">while</span> ((tag = input.ReadTag()) != <span class=\"hljs-number\">0</span>) &#123;<br>        <span class=\"hljs-keyword\">switch</span>(tag) &#123;<br>          <span class=\"hljs-literal\">default</span>:<br>            _unknownFields = pb::UnknownFieldSet.MergeFieldFrom(_unknownFields, input);<br>            <span class=\"hljs-keyword\">break</span>;<br>          <span class=\"hljs-keyword\">case</span> <span class=\"hljs-number\">8</span>: &#123;<br>            Count = input.ReadInt64();<br>            <span class=\"hljs-keyword\">break</span>;<br>          &#125;<br>        &#125;<br>      &#125;<br>    &#125;<br><br>  &#125;<br><br>  <span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">endregion</span></span><br>&#125;<br><span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">endregion</span> Designer generated code</span><br></code></pre></td></tr></table></figure>\n\n\n<h1 id=\"Kotlin\"><a href=\"#Kotlin\" class=\"headerlink\" title=\"Kotlin\"></a>Kotlin</h1><figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br><span class=\"line\">252</span><br><span class=\"line\">253</span><br><span class=\"line\">254</span><br><span class=\"line\">255</span><br><span class=\"line\">256</span><br><span class=\"line\">257</span><br><span class=\"line\">258</span><br><span class=\"line\">259</span><br><span class=\"line\">260</span><br><span class=\"line\">261</span><br><span class=\"line\">262</span><br><span class=\"line\">263</span><br><span class=\"line\">264</span><br><span class=\"line\">265</span><br><span class=\"line\">266</span><br><span class=\"line\">267</span><br><span class=\"line\">268</span><br><span class=\"line\">269</span><br><span class=\"line\">270</span><br><span class=\"line\">271</span><br><span class=\"line\">272</span><br><span class=\"line\">273</span><br><span class=\"line\">274</span><br><span class=\"line\">275</span><br><span class=\"line\">276</span><br><span class=\"line\">277</span><br><span class=\"line\">278</span><br><span class=\"line\">279</span><br><span class=\"line\">280</span><br><span class=\"line\">281</span><br><span class=\"line\">282</span><br><span class=\"line\">283</span><br><span class=\"line\">284</span><br><span class=\"line\">285</span><br><span class=\"line\">286</span><br><span class=\"line\">287</span><br><span class=\"line\">288</span><br><span class=\"line\">289</span><br><span class=\"line\">290</span><br><span class=\"line\">291</span><br><span class=\"line\">292</span><br><span class=\"line\">293</span><br><span class=\"line\">294</span><br><span class=\"line\">295</span><br><span class=\"line\">296</span><br><span class=\"line\">297</span><br><span class=\"line\">298</span><br><span class=\"line\">299</span><br><span class=\"line\">300</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-keyword\">package</span> liang.cxx.rommel.evaluationbar<br><br><span class=\"hljs-keyword\">import</span> android.content.Context<br><span class=\"hljs-keyword\">import</span> android.graphics.*<br><span class=\"hljs-keyword\">import</span> android.util.AttributeSet<br><span class=\"hljs-keyword\">import</span> android.view.MotionEvent<br><span class=\"hljs-keyword\">import</span> android.view.View<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * Created by Rommel on 2017/12/1.</span><br><span class=\"hljs-comment\"> */</span><br><br><span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">EvaluationProgressBar</span> : <span class=\"hljs-type\">View &#123;</span></span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">var</span> m_density: <span class=\"hljs-built_in\">Float</span> = <span class=\"hljs-number\">0.0f</span><span class=\"hljs-comment\">//dp</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">var</span> img_height: <span class=\"hljs-built_in\">Int</span> = <span class=\"hljs-number\">30</span><span class=\"hljs-comment\">//滑块和进度条高度(默认三十)</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">var</span> m_content: Context? = <span class=\"hljs-literal\">null</span><br>    <span class=\"hljs-comment\">//滑块样式</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">var</span> slider: Bitmap? = <span class=\"hljs-literal\">null</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">var</span> m_laughing: Bitmap? = <span class=\"hljs-literal\">null</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">var</span> m_satisfactiong: Bitmap? = <span class=\"hljs-literal\">null</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">var</span> m_sad: Bitmap? = <span class=\"hljs-literal\">null</span><br>    <span class=\"hljs-comment\">//滑块位置</span><br>    <span class=\"hljs-keyword\">var</span> image_postion: <span class=\"hljs-built_in\">Float</span> = <span class=\"hljs-number\">0.0f</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-comment\">//滑块宽度</span><br>    <span class=\"hljs-keyword\">var</span> image_weight: <span class=\"hljs-built_in\">Float</span> = <span class=\"hljs-number\">0.0f</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-comment\">//控件的宽和高</span><br>    <span class=\"hljs-keyword\">var</span> m_weight: <span class=\"hljs-built_in\">Float</span> = <span class=\"hljs-number\">0.0f</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">var</span> m_height: <span class=\"hljs-built_in\">Float</span> = <span class=\"hljs-number\">0.0f</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-comment\">//每段的长度</span><br>    <span class=\"hljs-keyword\">var</span> m_cell: <span class=\"hljs-built_in\">Float</span> = <span class=\"hljs-number\">0.0f</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-comment\">//是否为第一次加载</span><br>    <span class=\"hljs-keyword\">var</span> is_first = <span class=\"hljs-literal\">true</span><br>    <span class=\"hljs-comment\">//画笔</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">var</span> m_color_back: Paint? = <span class=\"hljs-literal\">null</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">var</span> m_color_back_line: Paint? = <span class=\"hljs-literal\">null</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">var</span> m_color_back_diver_one: Paint? = <span class=\"hljs-literal\">null</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">var</span> m_color_back_diver_two: Paint? = <span class=\"hljs-literal\">null</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">var</span> m_color_back_wall: Paint? = <span class=\"hljs-literal\">null</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">var</span> back_line = <span class=\"hljs-string\">&quot;#C7C7C7&quot;</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">var</span> back_sad = <span class=\"hljs-string\">&quot;#CECECE&quot;</span><span class=\"hljs-comment\">//差评背景</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">var</span> back_satisfactiong = <span class=\"hljs-string\">&quot;#FFEAB0&quot;</span><span class=\"hljs-comment\">//中评背景</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">var</span> back_satisfactiong_line = <span class=\"hljs-string\">&quot;#FFD68C&quot;</span><span class=\"hljs-comment\">//中评线框</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">var</span> back_laughing = <span class=\"hljs-string\">&quot;#FFBBBB&quot;</span><span class=\"hljs-comment\">//好评背景</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">var</span> back_laughing_line = <span class=\"hljs-string\">&quot;#FF9F9F&quot;</span><span class=\"hljs-comment\">//好评背景</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">var</span> back_baseground = <span class=\"hljs-string\">&quot;#F8F8F8&quot;</span><span class=\"hljs-comment\">//好评背景</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">var</span> back_satisfactiong_diver = <span class=\"hljs-string\">&quot;#FFD68C&quot;</span><span class=\"hljs-comment\">//中评分割线</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">var</span> back_laughing_diver = <span class=\"hljs-string\">&quot;#FF9F9F&quot;</span><span class=\"hljs-comment\">//好评分割线</span><br>    <span class=\"hljs-comment\">//触摸和滑动是否在滑块上</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">var</span> is_touch_scope = <span class=\"hljs-literal\">false</span><br><br>    <span class=\"hljs-comment\">//滑动监听事件</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">var</span> volChangeListener: VolChangeListener? = <span class=\"hljs-literal\">null</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">var</span> vol = <span class=\"hljs-number\">2</span><br><br>    <span class=\"hljs-keyword\">constructor</span>(context: Context) : <span class=\"hljs-keyword\">super</span>(context) &#123;<br>        <span class=\"hljs-keyword\">init</span>(context)<br>    &#125;<br><br>    <span class=\"hljs-keyword\">constructor</span>(context: Context, attrs: AttributeSet?) : <span class=\"hljs-keyword\">super</span>(context, attrs) &#123;<br>        <span class=\"hljs-keyword\">init</span>(context)<br>    &#125;<br><br>    <span class=\"hljs-keyword\">constructor</span>(context: Context, attrs: AttributeSet?, defStyleAttr: <span class=\"hljs-built_in\">Int</span>) : <span class=\"hljs-keyword\">super</span>(context, attrs, defStyleAttr) &#123;<br>        <span class=\"hljs-keyword\">init</span>(context)<br>    &#125;<br><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">init</span><span class=\"hljs-params\">(context: <span class=\"hljs-type\">Context</span>)</span></span> &#123;<br>        m_density = context.resources.displayMetrics.density<br>        m_laughing = zoomImg(BitmapFactory.decodeResource(resources, R.mipmap.icon_laughing))<br>        m_satisfactiong = zoomImg(BitmapFactory.decodeResource(resources, R.mipmap.icon_satisfaction))<br>        m_sad = zoomImg(BitmapFactory.decodeResource(resources, R.mipmap.icon_sad))<br>        image_weight = m_laughing!!.width.toFloat()<br>        m_content = context<br>        m_height = (m_laughing!!.height + <span class=\"hljs-number\">1</span>).toFloat()<br>        <span class=\"hljs-comment\">//画笔初始化</span><br>        m_color_back = Paint()<br>        m_color_back_line = Paint()<br>        m_color_back_line!!.style = Paint.Style.STROKE<br>        m_color_back_line!!.isAntiAlias = <span class=\"hljs-literal\">true</span><br>        m_color_back_line!!.strokeMiter = <span class=\"hljs-number\">1.0f</span><br>        m_color_back_diver_one = Paint()<br>        m_color_back_diver_two = Paint()<br>        m_color_back_diver_one!!.strokeMiter = <span class=\"hljs-number\">1.0F</span><br>        m_color_back_diver_two!!.strokeMiter = <span class=\"hljs-number\">1.0F</span><br>        m_color_back_wall = Paint()<br>        m_color_back_wall!!.color = Color.parseColor(back_line)<br>        m_color_back_wall!!.style = Paint.Style.STROKE<br>        m_color_back_wall!!.isAntiAlias = <span class=\"hljs-literal\">true</span><br>        m_color_back_wall!!.strokeWidth = <span class=\"hljs-number\">1.0f</span><br>    &#125;<br><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onDraw</span><span class=\"hljs-params\">(canvas: <span class=\"hljs-type\">Canvas</span>)</span></span> &#123;<br>        <span class=\"hljs-keyword\">super</span>.onDraw(canvas)<br>        canvas.drawFilter = PaintFlagsDrawFilter(<span class=\"hljs-number\">0</span>, Paint.ANTI_ALIAS_FLAG or Paint.FILTER_BITMAP_FLAG)<br>        image_postion = <span class=\"hljs-keyword\">if</span> (image_postion &lt; image_weight / <span class=\"hljs-number\">2</span>) image_weight / <span class=\"hljs-number\">2</span> <span class=\"hljs-keyword\">else</span> image_postion<br>        image_postion = <span class=\"hljs-keyword\">if</span> (image_postion &gt; m_weight - image_weight / <span class=\"hljs-number\">2</span>) m_weight - image_weight / <span class=\"hljs-number\">2</span> <span class=\"hljs-keyword\">else</span> image_postion<br>        <span class=\"hljs-keyword\">if</span> (image_postion &lt;= m_cell) &#123;<br>            <span class=\"hljs-comment\">//差评</span><br>            slider = m_sad<br>            m_color_back!!.color = Color.parseColor(back_sad)<br>            m_color_back_line!!.color = Color.parseColor(back_line)<br>        &#125; <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (image_postion &gt; m_cell &amp;&amp; image_postion &lt;= m_cell * <span class=\"hljs-number\">2</span>) &#123;<br>            <span class=\"hljs-comment\">//中评</span><br>            slider = m_satisfactiong<br>            m_color_back!!.color = Color.parseColor(back_satisfactiong)<br>            m_color_back_line!!.color = Color.parseColor(back_satisfactiong_line)<br>        &#125; <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (image_postion &gt; m_cell * <span class=\"hljs-number\">2</span>) &#123;<br>            <span class=\"hljs-comment\">//好评</span><br>            slider = m_laughing<br>            m_color_back!!.color = Color.parseColor(back_laughing)<br>            m_color_back_line!!.color = Color.parseColor(back_laughing_line)<br>        &#125;<br>        drawWall(canvas)<br>        drawBckground(canvas)<br>        drawDiverLine(canvas)<br>        drawImage(canvas)<br>    &#125;<br><br>    <span class=\"hljs-comment\">//绘制最外层线和整体背景</span><br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">drawWall</span><span class=\"hljs-params\">(canvas: <span class=\"hljs-type\">Canvas</span>)</span></span> &#123;<br>        <span class=\"hljs-comment\">//外边框</span><br>        <span class=\"hljs-keyword\">var</span> rectf = RectF(<span class=\"hljs-number\">2f</span>, <span class=\"hljs-number\">0f</span>, m_weight, m_height)<br>        canvas.drawRoundRect(rectf, m_height / <span class=\"hljs-number\">2</span>, m_height / <span class=\"hljs-number\">2</span>, m_color_back_wall)<br>        <span class=\"hljs-comment\">//基础背景</span><br>        <span class=\"hljs-keyword\">var</span> back_base = RectF(<span class=\"hljs-number\">3f</span>, <span class=\"hljs-number\">1f</span>, m_weight - <span class=\"hljs-number\">1</span>, m_height - <span class=\"hljs-number\">1</span>)<br>        <span class=\"hljs-keyword\">var</span> back_base_color = Paint()<br>        back_base_color.color = Color.parseColor(back_baseground)<br>        canvas.drawRoundRect(back_base, m_height / <span class=\"hljs-number\">2</span>, m_height / <span class=\"hljs-number\">2</span>, back_base_color)<br>    &#125;<br><br>    <span class=\"hljs-comment\">//绘制进度颜色</span><br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">drawBckground</span><span class=\"hljs-params\">(canvas: <span class=\"hljs-type\">Canvas</span>)</span></span> &#123;<br>        <span class=\"hljs-keyword\">var</span> rectf = RectF(<span class=\"hljs-number\">2f</span>, <span class=\"hljs-number\">1f</span>, image_postion + image_weight / <span class=\"hljs-number\">2</span> - <span class=\"hljs-number\">1</span>, m_height - <span class=\"hljs-number\">1</span>)<br>        canvas.drawRoundRect(rectf, m_height / <span class=\"hljs-number\">2</span>, m_height / <span class=\"hljs-number\">2</span>, m_color_back)<br>    &#125;<br><br>    <span class=\"hljs-comment\">//根据滑块位置改变边框和分割线颜色</span><br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">drawDiverLine</span><span class=\"hljs-params\">(canvas: <span class=\"hljs-type\">Canvas</span>)</span></span> &#123;<br>        <span class=\"hljs-comment\">//根据滑块位置改变外层边框颜色</span><br>        <span class=\"hljs-keyword\">var</span> rectF = RectF(<span class=\"hljs-number\">2f</span>, <span class=\"hljs-number\">0f</span>, image_postion + image_weight / <span class=\"hljs-number\">2</span>, m_height)<br>        canvas.drawRoundRect(rectF, m_height / <span class=\"hljs-number\">2</span>, m_height / <span class=\"hljs-number\">2</span>, m_color_back_line)<br>        <span class=\"hljs-keyword\">if</span> (image_postion &lt;= m_cell) &#123;<br>            <span class=\"hljs-comment\">//差评</span><br>            m_color_back_diver_one!!.color = Color.parseColor(back_line)<br>            canvas.drawLine(m_weight / <span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">0f</span>, m_weight / <span class=\"hljs-number\">3</span>, m_height, m_color_back_diver_one)<br>            m_color_back_diver_two!!.color = Color.parseColor(back_line)<br>            canvas.drawLine(m_weight * <span class=\"hljs-number\">2</span> / <span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">0f</span>, m_weight * <span class=\"hljs-number\">2</span> / <span class=\"hljs-number\">3</span>, m_height, m_color_back_diver_two)<br>        &#125; <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (image_postion &gt; m_cell &amp;&amp; image_postion &lt;= m_cell * <span class=\"hljs-number\">2</span>) &#123;<br>            <span class=\"hljs-comment\">//中评</span><br>            m_color_back_diver_one!!.color = Color.parseColor(back_satisfactiong_diver)<br>            canvas.drawLine(m_weight / <span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">0f</span>, m_weight / <span class=\"hljs-number\">3</span>, m_height, m_color_back_diver_one)<br>            m_color_back_diver_two!!.color = Color.parseColor(back_line)<br>            canvas.drawLine(m_weight * <span class=\"hljs-number\">2</span> / <span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">0f</span>, m_weight * <span class=\"hljs-number\">2</span> / <span class=\"hljs-number\">3</span>, m_height, m_color_back_diver_two)<br>        &#125; <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (image_postion &gt; m_cell * <span class=\"hljs-number\">2</span>) &#123;<br>            <span class=\"hljs-comment\">//好评</span><br>            m_color_back_diver_one!!.color = Color.parseColor(back_laughing_diver)<br>            canvas.drawLine(m_weight / <span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">0f</span>, m_weight / <span class=\"hljs-number\">3</span>, m_height, m_color_back_diver_one)<br>            m_color_back_diver_two!!.color = Color.parseColor(back_laughing_diver)<br>            canvas.drawLine(m_weight * <span class=\"hljs-number\">2</span> / <span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">0f</span>, m_weight * <span class=\"hljs-number\">2</span> / <span class=\"hljs-number\">3</span>, m_height, m_color_back_diver_two)<br>        &#125;<br>    &#125;<br><br>    <span class=\"hljs-comment\">//绘制滑块</span><br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">drawImage</span><span class=\"hljs-params\">(canvas: <span class=\"hljs-type\">Canvas</span>)</span></span> &#123;<br>        canvas.drawBitmap(slider, image_postion - image_weight / <span class=\"hljs-number\">2</span> - <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">1f</span>, Paint())<br>    &#125;<br><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onLayout</span><span class=\"hljs-params\">(changed: <span class=\"hljs-type\">Boolean</span>, left: <span class=\"hljs-type\">Int</span>, top: <span class=\"hljs-type\">Int</span>, right: <span class=\"hljs-type\">Int</span>, bottom: <span class=\"hljs-type\">Int</span>)</span></span> &#123;<br>        <span class=\"hljs-keyword\">super</span>.onLayout(changed, left, top, right, bottom)<br>        m_weight = (width - <span class=\"hljs-number\">2</span>).toFloat()<br>        m_cell = m_weight / <span class=\"hljs-number\">3</span><br>        <span class=\"hljs-keyword\">if</span> (is_first) &#123;<br>            <span class=\"hljs-comment\">//首次加载默认值</span><br>            image_postion = m_weight * <span class=\"hljs-number\">2</span> / <span class=\"hljs-number\">3</span><br>            is_first = <span class=\"hljs-literal\">false</span><br>        &#125;<br><br>    &#125;<br><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onMeasure</span><span class=\"hljs-params\">(widthMeasureSpec: <span class=\"hljs-type\">Int</span>, heightMeasureSpec: <span class=\"hljs-type\">Int</span>)</span></span> &#123;<br>        <span class=\"hljs-keyword\">super</span>.onMeasure(widthMeasureSpec, heightMeasureSpec)<br>        <span class=\"hljs-keyword\">var</span> width = getSize((<span class=\"hljs-number\">200</span> * m_density).toInt(), widthMeasureSpec)<br>        <span class=\"hljs-keyword\">var</span> height = getSize(m_laughing!!.width + <span class=\"hljs-number\">1</span>, heightMeasureSpec)<br>        setMeasuredDimension(width, height)<br>    &#125;<br><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">getSize</span><span class=\"hljs-params\">(defaultSize: <span class=\"hljs-type\">Int</span>, measureSpec: <span class=\"hljs-type\">Int</span>)</span></span>: <span class=\"hljs-built_in\">Int</span> &#123;<br>        <span class=\"hljs-keyword\">var</span> m_size = defaultSize<br>        <span class=\"hljs-keyword\">var</span> mode = View.MeasureSpec.getMode(measureSpec)<br>        <span class=\"hljs-keyword\">var</span> size = MeasureSpec.getSize(measureSpec)<br>        <span class=\"hljs-keyword\">when</span> (mode) &#123;<br>            MeasureSpec.AT_MOST -&gt; &#123;<br>                <span class=\"hljs-comment\">//当前尺寸是当前View能取的最大尺寸-wrap_content</span><br>                m_size = defaultSize<br>            &#125;<br>            MeasureSpec.EXACTLY -&gt; &#123;<br>                <span class=\"hljs-comment\">//当前的尺寸就是当前View应该取的尺寸-match_parent</span><br>                m_size = size<br>            &#125;<br>            MeasureSpec.UNSPECIFIED -&gt; &#123;<br>                <span class=\"hljs-comment\">//父容器没有对当前View有任何限制，当前View可以任意取尺寸-固定尺寸（如100dp</span><br>                m_size = size<br>            &#125;<br>        &#125;<br>        <span class=\"hljs-keyword\">return</span> m_size<br>    &#125;<br><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onTouchEvent</span><span class=\"hljs-params\">(event: <span class=\"hljs-type\">MotionEvent</span>)</span></span>: <span class=\"hljs-built_in\">Boolean</span> &#123;<br>        <span class=\"hljs-keyword\">var</span> x_postion = event.x<br>        <span class=\"hljs-keyword\">when</span> (event.action) &#123;<br>            MotionEvent.ACTION_DOWN -&gt; &#123;<br>                <span class=\"hljs-keyword\">if</span> (x_postion &gt; image_postion - image_weight / <span class=\"hljs-number\">2</span><br>                        &amp;&amp; x &lt; image_postion + image_weight / <span class=\"hljs-number\">2</span>) &#123;<br>                    <span class=\"hljs-comment\">//触摸事件在滑块上</span><br>                    image_postion = x_postion<br>                    is_touch_scope = <span class=\"hljs-literal\">true</span><br>                &#125; <span class=\"hljs-keyword\">else</span> &#123;<br>                    <span class=\"hljs-comment\">//触摸事件不在滑块上</span><br>                    image_postion = x_postion<br>                    setImgPostion()<br>                    invalidate()<br>                    onChange()<br>                    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">false</span><br>                &#125;<br>            &#125;<br>            MotionEvent.ACTION_MOVE -&gt; &#123;<br>                <span class=\"hljs-keyword\">if</span> (is_touch_scope) &#123;<br>                    image_postion = x_postion<br>                    invalidate()<br>                    onChange()<br>                &#125;<br>            &#125;<br>            MotionEvent.ACTION_UP -&gt; &#123;<br>                <span class=\"hljs-keyword\">if</span> (is_touch_scope) &#123;<br>                    is_touch_scope = <span class=\"hljs-literal\">false</span><br>                    setImgPostion()<br>                &#125;<br>            &#125;<br>            MotionEvent.ACTION_CANCEL -&gt; &#123;<br>                <span class=\"hljs-keyword\">if</span> (is_touch_scope) &#123;<br>                    is_touch_scope = <span class=\"hljs-literal\">false</span><br>                    setImgPostion()<br>                &#125;<br>            &#125;<br>        &#125;<br>        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">true</span><br>    &#125;<br><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">setImgPostion</span><span class=\"hljs-params\">()</span></span> &#123;<br>        <span class=\"hljs-comment\">//松手后滑块走到指定的位置</span><br>        <span class=\"hljs-keyword\">if</span> (image_postion &lt;= m_cell) &#123;<br>            <span class=\"hljs-comment\">//差评</span><br>            image_postion = m_cell<br>        &#125; <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (image_postion &gt; m_cell &amp;&amp; image_postion &lt;= m_cell * <span class=\"hljs-number\">2</span>) &#123;<br>            <span class=\"hljs-comment\">//中评</span><br>            image_postion = m_cell * <span class=\"hljs-number\">2</span><br>        &#125; <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (image_postion &gt; m_cell * <span class=\"hljs-number\">2</span>) &#123;<br>            <span class=\"hljs-comment\">//好评</span><br>            image_postion = m_cell * <span class=\"hljs-number\">3</span><br>        &#125;<br>        invalidate()<br>        onChange()<br>    &#125;<br><br>    <span class=\"hljs-comment\">//滑块位置变化监听</span><br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onChange</span><span class=\"hljs-params\">()</span></span> &#123;<br>        <span class=\"hljs-keyword\">if</span> (volChangeListener != <span class=\"hljs-literal\">null</span>) &#123;<br>            <span class=\"hljs-keyword\">if</span> (image_postion &lt;= m_cell) &#123;<br>                vol = <span class=\"hljs-number\">1</span><br>            &#125; <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (image_postion &gt; m_cell &amp;&amp; image_postion &lt;= <span class=\"hljs-number\">2</span> * m_cell) &#123;<br>                vol = <span class=\"hljs-number\">2</span><br>            &#125; <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (image_postion &gt; <span class=\"hljs-number\">2</span> * m_cell) &#123;<br>                vol = <span class=\"hljs-number\">3</span><br>            &#125;<br>            volChangeListener!!.onVolChange(vol)<br>        &#125;<br>    &#125;<br><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">zoomImg</span><span class=\"hljs-params\">(btm: <span class=\"hljs-type\">Bitmap</span>)</span></span>: Bitmap &#123;<br>        <span class=\"hljs-comment\">//获取图片宽高</span><br>        <span class=\"hljs-keyword\">var</span> width = btm.width<br>        <span class=\"hljs-keyword\">var</span> height = btm.height<br>        <span class=\"hljs-comment\">//计算缩放比例</span><br>        <span class=\"hljs-keyword\">var</span> scaleWidth = (img_height * m_density) / width<br>        <span class=\"hljs-keyword\">var</span> scaleHeight = (img_height * m_density) / height<br>        <span class=\"hljs-comment\">//获取Matrix参数</span><br>        <span class=\"hljs-keyword\">var</span> matrix = Matrix()<br>        matrix.postScale(scaleWidth, scaleHeight)<br>        <span class=\"hljs-comment\">//返回新的图片</span><br>        <span class=\"hljs-keyword\">return</span> Bitmap.createBitmap(btm, <span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">0</span>, width, height, matrix, <span class=\"hljs-literal\">true</span>)<br>    &#125;<br><br>    <span class=\"hljs-class\"><span class=\"hljs-keyword\">interface</span> <span class=\"hljs-title\">VolChangeListener</span> </span>&#123;<br>        <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onVolChange</span><span class=\"hljs-params\">(vol: <span class=\"hljs-type\">Int</span>)</span></span><br>    &#125;<br><br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">volVhangeListener</span><span class=\"hljs-params\">(volChangeListener :<span class=\"hljs-type\">VolChangeListener</span>)</span></span> &#123;<br>        <span class=\"hljs-keyword\">this</span>.volChangeListener = volChangeListener<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>\n\n\n<h1 id=\"HTML\"><a href=\"#HTML\" class=\"headerlink\" title=\"HTML\"></a>HTML</h1><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">xmp</span>&gt;</span><br><span class=\"hljs-meta\">&lt;!DOCTYPE <span class=\"hljs-meta-keyword\">html</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">html</span> <span class=\"hljs-attr\">lang</span>=<span class=\"hljs-string\">&quot;zh&quot;</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">head</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">meta</span> <span class=\"hljs-attr\">charset</span>=<span class=\"hljs-string\">&quot;UTF-8&quot;</span>&gt;</span><br>\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">meta</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;viewport&quot;</span> <span class=\"hljs-attr\">content</span>=<span class=\"hljs-string\">&quot;width=device-width, </span></span><br><span class=\"hljs-tag\"><span class=\"hljs-string\">                                 initial-scale=1.0, </span></span><br><span class=\"hljs-tag\"><span class=\"hljs-string\">                                 maximum-scale=1.0, </span></span><br><span class=\"hljs-tag\"><span class=\"hljs-string\">                                 user-scalable=no&quot;</span>&gt;</span><br>\t<br>\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">link</span> <span class=\"hljs-attr\">rel</span>=<span class=\"hljs-string\">&quot;stylesheet&quot;</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;http://cdn.staticfile.org/twitter-bootstrap/3.3.6/css/bootstrap.min.css&quot;</span>&gt;</span><br>\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">link</span> <span class=\"hljs-attr\">rel</span>=<span class=\"hljs-string\">&quot;stylesheet&quot;</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;http://cdn.staticfile.org/twitter-bootstrap/3.3.6/css/bootstrap-theme.min.css&quot;</span>&gt;</span><br>\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span> <span class=\"hljs-attr\">src</span>=<span class=\"hljs-string\">&quot;http://cdn.staticfile.org/jquery/2.1.4/jquery.min.js&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span><br>\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span> <span class=\"hljs-attr\">src</span>=<span class=\"hljs-string\">&quot;http://cdn.staticfile.org/twitter-bootstrap/3.3.6/js/bootstrap.min.js&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span><br><br>\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">title</span>&gt;</span>测试一下bootstrap<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">title</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">head</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">body</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;container&quot;</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">ol</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;breadcrumb&quot;</span>&gt;</span><br>  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;#&quot;</span>&gt;</span>主页<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br>  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;#&quot;</span>&gt;</span>新闻资讯<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br>  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;active&quot;</span>&gt;</span>新闻正文<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">ol</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;page-header&quot;</span>&gt;</span><br>  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">h1</span>&gt;</span>这是新闻的标题<br>  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">br</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">small</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">small</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">h1</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span><br>\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;sstarter-template&quot;</span>&gt;</span><br>\t\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">p</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;lead&quot;</span>&gt;</span>Use this dow project.<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">br</span>&gt;</span> All yoy barebones HTML document.<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">p</span>&gt;</span><br>\t\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">p</span>&gt;</span>Google（中文名：谷歌），是一家美国的跨国科技企业，致力于互联网搜索、云计算、广告技术等领域，开发并提供大量基于互联网的产品与服务，其主要利润来自于AdWords等广告服务。Google由当时在斯坦福大学攻读理工博士的拉里·佩奇和谢尔盖·布卢姆共同创建，因此两人也被称为“Google Guys”。<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">p</span>&gt;</span><br>\t\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">p</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;lead&quot;</span>&gt;</span>这一段的内容<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">strong</span>&gt;</span>突出<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">strong</span>&gt;</span>显示看看效果<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">p</span>&gt;</span><br>\t\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">address</span>&gt;</span><br>  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">strong</span>&gt;</span>Twitter, Inc.<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">strong</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">br</span>&gt;</span><br>  795 Folsom Ave, Suite 600<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">br</span>&gt;</span><br>  San Francisco, CA 94107<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">br</span>&gt;</span><br>  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">abbr</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;Phone&quot;</span>&gt;</span>P:<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">abbr</span>&gt;</span> (123) 456-7890<br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">address</span>&gt;</span><br><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">table</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;table table-striped&quot;</span>&gt;</span><br>      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">thead</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">tr</span>&gt;</span><br>          <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">th</span>&gt;</span>#<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">th</span>&gt;</span><br>          <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">th</span>&gt;</span>First Name<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">th</span>&gt;</span><br>          <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">th</span>&gt;</span>Last Name<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">th</span>&gt;</span><br>          <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">th</span>&gt;</span>Username<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">th</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">tr</span>&gt;</span><br>      <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">thead</span>&gt;</span><br>      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">tbody</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">tr</span>&gt;</span><br>          <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">th</span> <span class=\"hljs-attr\">scope</span>=<span class=\"hljs-string\">&quot;row&quot;</span>&gt;</span>1<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">th</span>&gt;</span><br>          <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">td</span>&gt;</span>Mark<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">td</span>&gt;</span><br>          <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">td</span>&gt;</span>Otto<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">td</span>&gt;</span><br>          <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">td</span>&gt;</span>@mdo<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">td</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">tr</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">tr</span>&gt;</span><br>          <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">th</span> <span class=\"hljs-attr\">scope</span>=<span class=\"hljs-string\">&quot;row&quot;</span>&gt;</span>2<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">th</span>&gt;</span><br>          <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">td</span>&gt;</span>Jacob<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">td</span>&gt;</span><br>          <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">td</span>&gt;</span>Thornton<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">td</span>&gt;</span><br>          <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">td</span>&gt;</span>@fat<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">td</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">tr</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">tr</span>&gt;</span><br>          <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">th</span> <span class=\"hljs-attr\">scope</span>=<span class=\"hljs-string\">&quot;row&quot;</span>&gt;</span>3<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">th</span>&gt;</span><br>          <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">td</span>&gt;</span>Larry<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">td</span>&gt;</span><br>          <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">td</span>&gt;</span>the Bird<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">td</span>&gt;</span><br>          <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">td</span>&gt;</span>@twitter<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">td</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">tr</span>&gt;</span><br>      <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">tbody</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">table</span>&gt;</span><br>\t<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span><br>\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;progress&quot;</span>&gt;</span><br>  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;progress-bar progress-bar-danger progress-bar-striped active&quot;</span> <span class=\"hljs-attr\">role</span>=<span class=\"hljs-string\">&quot;progressbar&quot;</span> <span class=\"hljs-attr\">aria-valuenow</span>=<span class=\"hljs-string\">&quot;45&quot;</span> <span class=\"hljs-attr\">aria-valuemin</span>=<span class=\"hljs-string\">&quot;0&quot;</span> <span class=\"hljs-attr\">aria-valuemax</span>=<span class=\"hljs-string\">&quot;100&quot;</span> <span class=\"hljs-attr\">style</span>=<span class=\"hljs-string\">&quot;width: 80%&quot;</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">span</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;sr-only&quot;</span>&gt;</span>45% Complete<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">span</span>&gt;</span><br>  <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span><br>\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">nav</span>&gt;</span><br>  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">ul</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;pager&quot;</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;#&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">span</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;glyphicon glyphicon-chevron-left&quot;</span> <span class=\"hljs-attr\">aria-hidden</span>=<span class=\"hljs-string\">&quot;true&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">span</span>&gt;</span>前一篇新闻<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;#&quot;</span>&gt;</span>后一篇新闻<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">span</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;glyphicon glyphicon-chevron-right&quot;</span> <span class=\"hljs-attr\">aria-hidden</span>=<span class=\"hljs-string\">&quot;true&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">span</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br>  <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">ul</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">nav</span>&gt;</span><br>\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">button</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;btn btn-danger btn-block btn-lg btn-primary&quot;</span> <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">&quot;button&quot;</span>&gt;</span>退出登录<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">button</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">body</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">html</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">xmp</span>&gt;</span><br></code></pre></td></tr></table></figure>\n\n<h1 id=\"CSS\"><a href=\"#CSS\" class=\"headerlink\" title=\"CSS\"></a>CSS</h1><figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs css\"><span class=\"hljs-selector-class\">.top</span>&#123;<span class=\"hljs-attribute\">background-color</span>: gray;<br>    <span class=\"hljs-attribute\">font-size</span>: <span class=\"hljs-number\">14px</span>; <br>      <br>&#125;<br><span class=\"hljs-selector-class\">.top</span> <span class=\"hljs-selector-tag\">p</span>&#123;<span class=\"hljs-attribute\">display</span>: inline-block;<br> <span class=\"hljs-attribute\">line-height</span>: <span class=\"hljs-number\">20px</span>;<br> <span class=\"hljs-attribute\">color</span>:white;<br> <span class=\"hljs-attribute\">margin</span>: auto;<br> <span class=\"hljs-attribute\">overflow</span>: hidden;<br>&#125;<br><span class=\"hljs-selector-class\">.top</span> <span class=\"hljs-selector-tag\">P</span><span class=\"hljs-selector-pseudo\">:nth-child</span>(<span class=\"hljs-number\">1</span>)&#123;<span class=\"hljs-attribute\">margin-left</span>: <span class=\"hljs-number\">10%</span>;<br>&#125;<br><span class=\"hljs-selector-class\">.top</span> <span class=\"hljs-selector-tag\">P</span><span class=\"hljs-selector-pseudo\">:nth-child</span>(<span class=\"hljs-number\">2</span>)&#123;<span class=\"hljs-attribute\">margin-left</span>: <span class=\"hljs-number\">50%</span>;<br>&#125;<br><span class=\"hljs-selector-class\">.top</span> <span class=\"hljs-selector-tag\">P</span><span class=\"hljs-selector-pseudo\">:nth-child</span>(<span class=\"hljs-number\">3</span>)&#123;<span class=\"hljs-attribute\">margin-left</span>: <span class=\"hljs-number\">5%</span>;<br>&#125;<br><br><span class=\"hljs-selector-class\">.header</span> <span class=\"hljs-selector-tag\">img</span>&#123;<br>  <span class=\"hljs-attribute\">float</span>: left;<br>  <span class=\"hljs-attribute\">margin-left</span>: <span class=\"hljs-number\">8%</span>;\t<br>&#125;<br><br><span class=\"hljs-selector-class\">.nav-tabs</span> &#123;<br>  <span class=\"hljs-attribute\">border-bottom</span>: <span class=\"hljs-number\">0px</span> solid <span class=\"hljs-number\">#ddd</span>;<br>  <span class=\"hljs-attribute\">height</span>: <span class=\"hljs-number\">82px</span>;<br>  <span class=\"hljs-attribute\">margin-top</span>: <span class=\"hljs-number\">20px</span>;<br>  <br> <br>&#125;<br><span class=\"hljs-selector-class\">.nav-tabs</span> &gt; <span class=\"hljs-selector-tag\">li</span> &#123;<br>  <span class=\"hljs-attribute\">float</span>: left;<br>  <span class=\"hljs-attribute\">margin-top</span>: <span class=\"hljs-number\">20px</span>;<br>  <span class=\"hljs-attribute\">font-size</span>: <span class=\"hljs-number\">18px</span>;<br>  <span class=\"hljs-attribute\">margin-left</span>: <span class=\"hljs-number\">20px</span>;<br>  <br>  <br>  <br>&#125;<br><span class=\"hljs-selector-class\">.nav-tabs</span> &gt; <span class=\"hljs-selector-tag\">li</span> &gt; <span class=\"hljs-selector-tag\">a</span> &#123;<br>  <span class=\"hljs-attribute\">margin-right</span>: <span class=\"hljs-number\">30px</span>;<br>  <span class=\"hljs-attribute\">line-height</span>: <span class=\"hljs-number\">1.42857143</span>;<br>  <span class=\"hljs-attribute\">border</span>: <span class=\"hljs-number\">0px</span> solid transparent;<br>  <span class=\"hljs-attribute\">border-radius</span>: <span class=\"hljs-number\">4px</span> <span class=\"hljs-number\">4px</span> <span class=\"hljs-number\">0</span> <span class=\"hljs-number\">0</span>;<br>&#125;<br><span class=\"hljs-selector-class\">.nav-tabs</span> &gt; <span class=\"hljs-selector-tag\">li</span> &gt; <span class=\"hljs-selector-tag\">a</span><span class=\"hljs-selector-pseudo\">:hover</span> &#123;<br>  <span class=\"hljs-attribute\">border-color</span>: <span class=\"hljs-number\">#eee</span> <span class=\"hljs-number\">#eee</span> <span class=\"hljs-number\">#ddd</span>;<br>&#125;<br><span class=\"hljs-selector-class\">.nav-tabs</span> &gt; <span class=\"hljs-selector-tag\">li</span><span class=\"hljs-selector-class\">.active</span> &gt; <span class=\"hljs-selector-tag\">a</span>,<br><span class=\"hljs-selector-class\">.nav-tabs</span> &gt; <span class=\"hljs-selector-tag\">li</span><span class=\"hljs-selector-class\">.active</span> &gt; <span class=\"hljs-selector-tag\">a</span><span class=\"hljs-selector-pseudo\">:hover</span>,<br><span class=\"hljs-selector-class\">.nav-tabs</span> &gt; <span class=\"hljs-selector-tag\">li</span><span class=\"hljs-selector-class\">.active</span> &gt; <span class=\"hljs-selector-tag\">a</span><span class=\"hljs-selector-pseudo\">:focus</span> &#123;<br>  <span class=\"hljs-attribute\">color</span>: <span class=\"hljs-number\">#555</span>;<br>  <span class=\"hljs-attribute\">cursor</span>: default;<br>  <span class=\"hljs-attribute\">background-color</span>: <span class=\"hljs-number\">#fff</span>;<br>  <span class=\"hljs-attribute\">border</span>: <span class=\"hljs-number\">1px</span> solid <span class=\"hljs-number\">#ddd</span>;<br>  <span class=\"hljs-attribute\">border-bottom-color</span>: transparent;<br>&#125;<br><br><br><span class=\"hljs-selector-class\">.banner</span> <span class=\"hljs-selector-tag\">img</span>&#123;<br>\t<span class=\"hljs-attribute\">width</span>: <span class=\"hljs-number\">100%</span>;<br>&#125;<br><br><span class=\"hljs-selector-class\">.xiaotu</span>&#123;<span class=\"hljs-attribute\">text-align</span>: center;<br>        <span class=\"hljs-attribute\">padding-left</span>: <span class=\"hljs-number\">50px</span>; <br>        <span class=\"hljs-attribute\">float</span>: left;\t\t<br>&#125;<br><br><span class=\"hljs-selector-class\">.survey</span>&#123;<span class=\"hljs-attribute\">background-color</span>: gray;<br>       <span class=\"hljs-attribute\">font-size</span>: <span class=\"hljs-number\">14px</span>;<br>       <span class=\"hljs-attribute\">height</span>: <span class=\"hljs-number\">60px</span>;<br>       <span class=\"hljs-attribute\">position</span>: relative;<br>      <br>      <br>&#125;<br><span class=\"hljs-selector-class\">.survey</span> <span class=\"hljs-selector-tag\">p</span>&#123;<span class=\"hljs-attribute\">display</span>:inline-block;<br> <span class=\"hljs-attribute\">color</span>: white;<br> <span class=\"hljs-attribute\">margin</span>: <span class=\"hljs-number\">20px</span> auto;<br> <span class=\"hljs-attribute\">overflow</span>: hidden;<br><br>&#125;<br><span class=\"hljs-selector-class\">.survey</span> <span class=\"hljs-selector-tag\">P</span><span class=\"hljs-selector-pseudo\">:nth-child</span>(<span class=\"hljs-number\">1</span>)&#123;<span class=\"hljs-attribute\">margin-left</span>: <span class=\"hljs-number\">10%</span>;<br>&#125;<br><span class=\"hljs-selector-class\">.survey</span> <span class=\"hljs-selector-tag\">P</span><span class=\"hljs-selector-pseudo\">:nth-child</span>(<span class=\"hljs-number\">2</span>)&#123;<span class=\"hljs-attribute\">margin-left</span>: <span class=\"hljs-number\">1%</span>;<br>&#125;<br><br><br><span class=\"hljs-selector-id\">#nav</span>&#123;<span class=\"hljs-attribute\">padding</span>: <span class=\"hljs-number\">0</span>;<br>    <span class=\"hljs-attribute\">margin-left</span>: <span class=\"hljs-number\">40%</span>;<br>    <span class=\"hljs-attribute\">position</span>:absolute;<br>    <span class=\"hljs-attribute\">display</span>: inline-block;<br>&#125;<br><span class=\"hljs-selector-id\">#nav</span> <span class=\"hljs-selector-tag\">ul</span>&#123;<span class=\"hljs-attribute\">list-style-type</span>: none; &#125;<br><span class=\"hljs-selector-id\">#nav</span> <span class=\"hljs-selector-tag\">ul</span> <span class=\"hljs-selector-tag\">li</span>&#123;<span class=\"hljs-attribute\">float</span>: left;&#125;<br><span class=\"hljs-selector-id\">#nav</span> <span class=\"hljs-selector-tag\">ul</span> <span class=\"hljs-selector-tag\">li</span> <span class=\"hljs-selector-tag\">a</span>&#123;<span class=\"hljs-attribute\">text-align</span>: center; <br><span class=\"hljs-attribute\">padding</span>:<span class=\"hljs-number\">20px</span>; <br><span class=\"hljs-attribute\">display</span>:block; <br><span class=\"hljs-attribute\">text-decoration</span>:none; <br><span class=\"hljs-attribute\">color</span>:white;<br><span class=\"hljs-attribute\">line-height</span>: <span class=\"hljs-number\">20px</span>; <br>&#125;<br><span class=\"hljs-selector-id\">#nav</span> <span class=\"hljs-selector-tag\">ul</span> <span class=\"hljs-selector-tag\">li</span> <span class=\"hljs-selector-tag\">a</span><span class=\"hljs-selector-pseudo\">:hover</span>&#123;<br>\t<span class=\"hljs-attribute\">background-color</span>:white;<br>    <span class=\"hljs-attribute\">color</span>:<span class=\"hljs-number\">#31B0D5</span>;<br>&#125;<br><span class=\"hljs-selector-class\">.Introduced</span>&#123;<span class=\"hljs-attribute\">text-align</span>: center;<br>           <span class=\"hljs-attribute\">margin-top</span>: <span class=\"hljs-number\">50px</span>;&#125;<br><br><span class=\"hljs-selector-class\">.Introduced</span> <span class=\"hljs-selector-tag\">p</span>&#123;<br>   <span class=\"hljs-attribute\">max-width</span>: <span class=\"hljs-number\">900px</span>;<br>   <span class=\"hljs-attribute\">margin</span>: <span class=\"hljs-number\">30px</span> auto;\t<br>   <span class=\"hljs-attribute\">text-align</span>: left;<br>&#125;<br><br><br></code></pre></td></tr></table></figure>\n\n<h1 id=\"Javascript\"><a href=\"#Javascript\" class=\"headerlink\" title=\"Javascript\"></a>Javascript</h1><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs javascript\"><span class=\"hljs-meta\">&#x27;use strict&#x27;</span>;<br><br><span class=\"hljs-keyword\">var</span> defaults = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&#x27;../core/core.defaults&#x27;</span>);<br><span class=\"hljs-keyword\">var</span> Element = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&#x27;../core/core.element&#x27;</span>);<br><span class=\"hljs-keyword\">var</span> helpers = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&#x27;../helpers/index&#x27;</span>);<br><span class=\"hljs-keyword\">var</span> layouts = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&#x27;../core/core.layouts&#x27;</span>);<br><br><span class=\"hljs-keyword\">var</span> noop = helpers.noop;<br><br>defaults._set(<span class=\"hljs-string\">&#x27;global&#x27;</span>, &#123;<br>\ttitle: &#123;<br>\t\tdisplay: <span class=\"hljs-literal\">false</span>,<br>\t\tfontStyle: <span class=\"hljs-string\">&#x27;bold&#x27;</span>,<br>\t\tfullWidth: <span class=\"hljs-literal\">true</span>,<br>\t\tlineHeight: <span class=\"hljs-number\">1.2</span>,<br>\t\tpadding: <span class=\"hljs-number\">10</span>,<br>\t\tposition: <span class=\"hljs-string\">&#x27;top&#x27;</span>,<br>\t\ttext: <span class=\"hljs-string\">&#x27;&#x27;</span>,<br>\t\tweight: <span class=\"hljs-number\">2000</span>         <span class=\"hljs-comment\">// by default greater than legend (1000) to be above</span><br>\t&#125;<br>&#125;);<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * IMPORTANT: this class is exposed publicly as Chart.Legend, backward compatibility required!</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">var</span> Title = Element.extend(&#123;<br>\tinitialize: <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">config</span>) </span>&#123;<br>\t\t<span class=\"hljs-keyword\">var</span> me = <span class=\"hljs-built_in\">this</span>;<br>\t\thelpers.extend(me, config);<br><br>\t\t<span class=\"hljs-comment\">// Contains hit boxes for each dataset (in dataset order)</span><br>\t\tme.legendHitBoxes = [];<br>\t&#125;,<br><br>\t<span class=\"hljs-comment\">// These methods are ordered by lifecycle. Utilities then follow.</span><br><br>\tbeforeUpdate: noop,<br>\tupdate: <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">maxWidth, maxHeight, margins</span>) </span>&#123;<br>\t\t<span class=\"hljs-keyword\">var</span> me = <span class=\"hljs-built_in\">this</span>;<br><br>\t\t<span class=\"hljs-comment\">// Update Lifecycle - Probably don&#x27;t want to ever extend or overwrite this function ;)</span><br>\t\tme.beforeUpdate();<br><br>\t\t<span class=\"hljs-comment\">// Absorb the master measurements</span><br>\t\tme.maxWidth = maxWidth;<br>\t\tme.maxHeight = maxHeight;<br>\t\tme.margins = margins;<br><br>\t\t<span class=\"hljs-comment\">// Dimensions</span><br>\t\tme.beforeSetDimensions();<br>\t\tme.setDimensions();<br>\t\tme.afterSetDimensions();<br>\t\t<span class=\"hljs-comment\">// Labels</span><br>\t\tme.beforeBuildLabels();<br>\t\tme.buildLabels();<br>\t\tme.afterBuildLabels();<br><br>\t\t<span class=\"hljs-comment\">// Fit</span><br>\t\tme.beforeFit();<br>\t\tme.fit();<br>\t\tme.afterFit();<br>\t\t<span class=\"hljs-comment\">//</span><br>\t\tme.afterUpdate();<br>\t\t<span class=\"hljs-keyword\">return</span> me.minSize;<br><br>\t&#125;,<br>\tafterUpdate: noop,<br><br>\t<span class=\"hljs-comment\">//</span><br><br>\tbeforeSetDimensions: noop,<br>\tsetDimensions: <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>) </span>&#123;<br>\t\t<span class=\"hljs-keyword\">var</span> me = <span class=\"hljs-built_in\">this</span>;<br>\t\t<span class=\"hljs-comment\">// Set the unconstrained dimension before label rotation</span><br>\t\t<span class=\"hljs-keyword\">if</span> (me.isHorizontal()) &#123;<br>\t\t\t<span class=\"hljs-comment\">// Reset position before calculating rotation</span><br>\t\t\tme.width = me.maxWidth;<br>\t\t\tme.left = <span class=\"hljs-number\">0</span>;<br>\t\t\tme.right = me.width;<br>\t\t&#125; <span class=\"hljs-keyword\">else</span> &#123;<br>\t\t\tme.height = me.maxHeight;<br><br>\t\t\t<span class=\"hljs-comment\">// Reset position before calculating rotation</span><br>\t\t\tme.top = <span class=\"hljs-number\">0</span>;<br>\t\t\tme.bottom = me.height;<br>\t\t&#125;<br><br>\t\t<span class=\"hljs-comment\">// Reset padding</span><br>\t\tme.paddingLeft = <span class=\"hljs-number\">0</span>;<br>\t\tme.paddingTop = <span class=\"hljs-number\">0</span>;<br>\t\tme.paddingRight = <span class=\"hljs-number\">0</span>;<br>\t\tme.paddingBottom = <span class=\"hljs-number\">0</span>;<br><br>\t\t<span class=\"hljs-comment\">// Reset minSize</span><br>\t\tme.minSize = &#123;<br>\t\t\twidth: <span class=\"hljs-number\">0</span>,<br>\t\t\theight: <span class=\"hljs-number\">0</span><br>\t\t&#125;;<br>\t&#125;,<br>\tafterSetDimensions: noop,<br><br>\t<span class=\"hljs-comment\">//</span><br><br>\tbeforeBuildLabels: noop,<br>\tbuildLabels: noop,<br>\tafterBuildLabels: noop,<br><br>\t<span class=\"hljs-comment\">//</span><br><br>\tbeforeFit: noop,<br>\tfit: <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>) </span>&#123;<br>\t\t<span class=\"hljs-keyword\">var</span> me = <span class=\"hljs-built_in\">this</span>;<br>\t\t<span class=\"hljs-keyword\">var</span> valueOrDefault = helpers.valueOrDefault;<br>\t\t<span class=\"hljs-keyword\">var</span> opts = me.options;<br>\t\t<span class=\"hljs-keyword\">var</span> display = opts.display;<br>\t\t<span class=\"hljs-keyword\">var</span> fontSize = valueOrDefault(opts.fontSize, defaults.global.defaultFontSize);<br>\t\t<span class=\"hljs-keyword\">var</span> minSize = me.minSize;<br>\t\t<span class=\"hljs-keyword\">var</span> lineCount = helpers.isArray(opts.text) ? opts.text.length : <span class=\"hljs-number\">1</span>;<br>\t\t<span class=\"hljs-keyword\">var</span> lineHeight = helpers.options.toLineHeight(opts.lineHeight, fontSize);<br>\t\t<span class=\"hljs-keyword\">var</span> textSize = display ? (lineCount * lineHeight) + (opts.padding * <span class=\"hljs-number\">2</span>) : <span class=\"hljs-number\">0</span>;<br><br>\t\t<span class=\"hljs-keyword\">if</span> (me.isHorizontal()) &#123;<br>\t\t\tminSize.width = me.maxWidth; <span class=\"hljs-comment\">// fill all the width</span><br>\t\t\tminSize.height = textSize;<br>\t\t&#125; <span class=\"hljs-keyword\">else</span> &#123;<br>\t\t\tminSize.width = textSize;<br>\t\t\tminSize.height = me.maxHeight; <span class=\"hljs-comment\">// fill all the height</span><br>\t\t&#125;<br><br>\t\tme.width = minSize.width;<br>\t\tme.height = minSize.height;<br><br>\t&#125;,<br>\tafterFit: noop,<br><br>\t<span class=\"hljs-comment\">// Shared Methods</span><br>\tisHorizontal: <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>) </span>&#123;<br>\t\t<span class=\"hljs-keyword\">var</span> pos = <span class=\"hljs-built_in\">this</span>.options.position;<br>\t\t<span class=\"hljs-keyword\">return</span> pos === <span class=\"hljs-string\">&#x27;top&#x27;</span> || pos === <span class=\"hljs-string\">&#x27;bottom&#x27;</span>;<br>\t&#125;,<br><br>\t<span class=\"hljs-comment\">// Actually draw the title block on the canvas</span><br>\tdraw: <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>) </span>&#123;<br>\t\t<span class=\"hljs-keyword\">var</span> me = <span class=\"hljs-built_in\">this</span>;<br>\t\t<span class=\"hljs-keyword\">var</span> ctx = me.ctx;<br>\t\t<span class=\"hljs-keyword\">var</span> valueOrDefault = helpers.valueOrDefault;<br>\t\t<span class=\"hljs-keyword\">var</span> opts = me.options;<br>\t\t<span class=\"hljs-keyword\">var</span> globalDefaults = defaults.global;<br><br>\t\t<span class=\"hljs-keyword\">if</span> (opts.display) &#123;<br>\t\t\t<span class=\"hljs-keyword\">var</span> fontSize = valueOrDefault(opts.fontSize, globalDefaults.defaultFontSize);<br>\t\t\t<span class=\"hljs-keyword\">var</span> fontStyle = valueOrDefault(opts.fontStyle, globalDefaults.defaultFontStyle);<br>\t\t\t<span class=\"hljs-keyword\">var</span> fontFamily = valueOrDefault(opts.fontFamily, globalDefaults.defaultFontFamily);<br>\t\t\t<span class=\"hljs-keyword\">var</span> titleFont = helpers.fontString(fontSize, fontStyle, fontFamily);<br>\t\t\t<span class=\"hljs-keyword\">var</span> lineHeight = helpers.options.toLineHeight(opts.lineHeight, fontSize);<br>\t\t\t<span class=\"hljs-keyword\">var</span> offset = lineHeight / <span class=\"hljs-number\">2</span> + opts.padding;<br>\t\t\t<span class=\"hljs-keyword\">var</span> rotation = <span class=\"hljs-number\">0</span>;<br>\t\t\t<span class=\"hljs-keyword\">var</span> top = me.top;<br>\t\t\t<span class=\"hljs-keyword\">var</span> left = me.left;<br>\t\t\t<span class=\"hljs-keyword\">var</span> bottom = me.bottom;<br>\t\t\t<span class=\"hljs-keyword\">var</span> right = me.right;<br>\t\t\t<span class=\"hljs-keyword\">var</span> maxWidth, titleX, titleY;<br><br>\t\t\tctx.fillStyle = valueOrDefault(opts.fontColor, globalDefaults.defaultFontColor); <span class=\"hljs-comment\">// render in correct colour</span><br>\t\t\tctx.font = titleFont;<br><br>\t\t\t<span class=\"hljs-comment\">// Horizontal</span><br>\t\t\t<span class=\"hljs-keyword\">if</span> (me.isHorizontal()) &#123;<br>\t\t\t\ttitleX = left + ((right - left) / <span class=\"hljs-number\">2</span>); <span class=\"hljs-comment\">// midpoint of the width</span><br>\t\t\t\ttitleY = top + offset;<br>\t\t\t\tmaxWidth = right - left;<br>\t\t\t&#125; <span class=\"hljs-keyword\">else</span> &#123;<br>\t\t\t\ttitleX = opts.position === <span class=\"hljs-string\">&#x27;left&#x27;</span> ? left + offset : right - offset;<br>\t\t\t\ttitleY = top + ((bottom - top) / <span class=\"hljs-number\">2</span>);<br>\t\t\t\tmaxWidth = bottom - top;<br>\t\t\t\trotation = <span class=\"hljs-built_in\">Math</span>.PI * (opts.position === <span class=\"hljs-string\">&#x27;left&#x27;</span> ? -<span class=\"hljs-number\">0.5</span> : <span class=\"hljs-number\">0.5</span>);<br>\t\t\t&#125;<br><br>\t\t\tctx.save();<br>\t\t\tctx.translate(titleX, titleY);<br>\t\t\tctx.rotate(rotation);<br>\t\t\tctx.textAlign = <span class=\"hljs-string\">&#x27;center&#x27;</span>;<br>\t\t\tctx.textBaseline = <span class=\"hljs-string\">&#x27;middle&#x27;</span>;<br><br>\t\t\t<span class=\"hljs-keyword\">var</span> text = opts.text;<br>\t\t\t<span class=\"hljs-keyword\">if</span> (helpers.isArray(text)) &#123;<br>\t\t\t\t<span class=\"hljs-keyword\">var</span> y = <span class=\"hljs-number\">0</span>;<br>\t\t\t\t<span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">var</span> i = <span class=\"hljs-number\">0</span>; i &lt; text.length; ++i) &#123;<br>\t\t\t\t\tctx.fillText(text[i], <span class=\"hljs-number\">0</span>, y, maxWidth);<br>\t\t\t\t\ty += lineHeight;<br>\t\t\t\t&#125;<br>\t\t\t&#125; <span class=\"hljs-keyword\">else</span> &#123;<br>\t\t\t\tctx.fillText(text, <span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">0</span>, maxWidth);<br>\t\t\t&#125;<br><br>\t\t\tctx.restore();<br>\t\t&#125;<br>\t&#125;<br>&#125;);<br><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">createNewTitleBlockAndAttach</span>(<span class=\"hljs-params\">chart, titleOpts</span>) </span>&#123;<br>\t<span class=\"hljs-keyword\">var</span> title = <span class=\"hljs-keyword\">new</span> Title(&#123;<br>\t\tctx: chart.ctx,<br>\t\toptions: titleOpts,<br>\t\tchart: chart<br>\t&#125;);<br><br>\tlayouts.configure(chart, title, titleOpts);<br>\tlayouts.addBox(chart, title);<br>\tchart.titleBlock = title;<br>&#125;<br><br><span class=\"hljs-built_in\">module</span>.exports = &#123;<br>\tid: <span class=\"hljs-string\">&#x27;title&#x27;</span>,<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Backward compatibility: since 2.1.5, the title is registered as a plugin, making</span><br><span class=\"hljs-comment\">\t * Chart.Title obsolete. To avoid a breaking change, we export the Title as part of</span><br><span class=\"hljs-comment\">\t * the plugin, which one will be re-exposed in the chart.js file.</span><br><span class=\"hljs-comment\">\t * https://github.com/chartjs/Chart.js/pull/2640</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@private</span></span><br><span class=\"hljs-comment\">\t */</span><br>\t_element: Title,<br><br>\tbeforeInit: <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">chart</span>) </span>&#123;<br>\t\t<span class=\"hljs-keyword\">var</span> titleOpts = chart.options.title;<br><br>\t\t<span class=\"hljs-keyword\">if</span> (titleOpts) &#123;<br>\t\t\tcreateNewTitleBlockAndAttach(chart, titleOpts);<br>\t\t&#125;<br>\t&#125;,<br><br>\tbeforeUpdate: <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">chart</span>) </span>&#123;<br>\t\t<span class=\"hljs-keyword\">var</span> titleOpts = chart.options.title;<br>\t\t<span class=\"hljs-keyword\">var</span> titleBlock = chart.titleBlock;<br><br>\t\t<span class=\"hljs-keyword\">if</span> (titleOpts) &#123;<br>\t\t\thelpers.mergeIf(titleOpts, defaults.global.title);<br><br>\t\t\t<span class=\"hljs-keyword\">if</span> (titleBlock) &#123;<br>\t\t\t\tlayouts.configure(chart, titleBlock, titleOpts);<br>\t\t\t\ttitleBlock.options = titleOpts;<br>\t\t\t&#125; <span class=\"hljs-keyword\">else</span> &#123;<br>\t\t\t\tcreateNewTitleBlockAndAttach(chart, titleOpts);<br>\t\t\t&#125;<br>\t\t&#125; <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (titleBlock) &#123;<br>\t\t\tlayouts.removeBox(chart, titleBlock);<br>\t\t\t<span class=\"hljs-keyword\">delete</span> chart.titleBlock;<br>\t\t&#125;<br>\t&#125;<br>&#125;;<br></code></pre></td></tr></table></figure>\n\n\n<h1 id=\"JSON\"><a href=\"#JSON\" class=\"headerlink\" title=\"JSON\"></a>JSON</h1><figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs json\">&#123;<br>    <span class=\"hljs-attr\">&quot;version&quot;</span>: <span class=\"hljs-string\">&quot;0.2.0&quot;</span>,<br>    <span class=\"hljs-attr\">&quot;configurations&quot;</span>: [<br>        &#123;<br>            <span class=\"hljs-attr\">&quot;name&quot;</span>: <span class=\"hljs-string\">&quot;(gdb) Launch&quot;</span>, <br>            <span class=\"hljs-attr\">&quot;type&quot;</span>: <span class=\"hljs-string\">&quot;cppdbg&quot;</span>,<br>            <span class=\"hljs-attr\">&quot;request&quot;</span>: <span class=\"hljs-string\">&quot;launch&quot;</span>, <br>            <span class=\"hljs-attr\">&quot;program&quot;</span>: <span class=\"hljs-string\">&quot;$&#123;fileDirname&#125;/$&#123;fileBasenameNoExtension&#125;.exe&quot;</span>, <br>            <span class=\"hljs-attr\">&quot;stopAtEntry&quot;</span>: <span class=\"hljs-literal\">false</span>, <br>            <span class=\"hljs-attr\">&quot;cwd&quot;</span>: <span class=\"hljs-string\">&quot;$&#123;workspaceRoot&#125;&quot;</span>,<br>            <span class=\"hljs-attr\">&quot;externalConsole&quot;</span>: <span class=\"hljs-literal\">true</span>, <br>            <span class=\"hljs-attr\">&quot;linux&quot;</span>: &#123;<br>                <span class=\"hljs-attr\">&quot;MIMode&quot;</span>: <span class=\"hljs-string\">&quot;gdb&quot;</span><br>            &#125;,<br>            <span class=\"hljs-attr\">&quot;osx&quot;</span>: &#123;<br>                <span class=\"hljs-attr\">&quot;MIMode&quot;</span>: <span class=\"hljs-string\">&quot;lldb&quot;</span><br>            &#125;,<br>            <span class=\"hljs-attr\">&quot;windows&quot;</span>: &#123; <br>                <span class=\"hljs-attr\">&quot;MIMode&quot;</span>: <span class=\"hljs-string\">&quot;gdb&quot;</span>,<br>                <span class=\"hljs-attr\">&quot;miDebuggerPath&quot;</span>: <span class=\"hljs-string\">&quot;gdb.exe&quot;</span><br>            &#125;<br>        &#125;<br>    ]<br>&#125;<br><br></code></pre></td></tr></table></figure>\n\n<h1 id=\"SQL\"><a href=\"#SQL\" class=\"headerlink\" title=\"SQL\"></a>SQL</h1><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs sql\"><span class=\"hljs-keyword\">SELECT</span> Company, OrderNumber <span class=\"hljs-keyword\">FROM</span> Orders <span class=\"hljs-keyword\">ORDER</span> <span class=\"hljs-keyword\">BY</span> Company <span class=\"hljs-keyword\">DESC</span>, OrderNumber <span class=\"hljs-keyword\">ASC</span><br>update whut_student <span class=\"hljs-keyword\">SET</span> grade<span class=\"hljs-operator\">=</span><span class=\"hljs-number\">2017</span> <span class=\"hljs-keyword\">where</span> id<span class=\"hljs-operator\">&gt;</span><span class=\"hljs-number\">1003740</span><br>update whut_student <span class=\"hljs-keyword\">SET</span> id<span class=\"hljs-operator\">=</span>id<span class=\"hljs-operator\">+</span><span class=\"hljs-number\">1</span> <span class=\"hljs-keyword\">where</span> id<span class=\"hljs-operator\">&gt;</span><span class=\"hljs-number\">0</span><br><span class=\"hljs-keyword\">select</span> <span class=\"hljs-built_in\">COUNT</span>(student_id) <span class=\"hljs-keyword\">from</span> whut_student<br><br><span class=\"hljs-keyword\">select</span> <span class=\"hljs-operator\">*</span> <span class=\"hljs-keyword\">from</span> whut_student<br><span class=\"hljs-keyword\">where</span> student_id <span class=\"hljs-keyword\">in</span> (<span class=\"hljs-keyword\">select</span>  student_id  <span class=\"hljs-keyword\">from</span>  whut_student  <span class=\"hljs-keyword\">group</span>  <span class=\"hljs-keyword\">by</span>  student_id  <span class=\"hljs-keyword\">having</span>  <span class=\"hljs-built_in\">count</span>(student_id) <span class=\"hljs-operator\">&gt;</span> <span class=\"hljs-number\">1</span>)<br><br><span class=\"hljs-keyword\">delete</span> <span class=\"hljs-keyword\">from</span> whut_student <span class=\"hljs-keyword\">where</span> id<span class=\"hljs-operator\">&lt;=</span><span class=\"hljs-number\">137</span><br>UPDATE whut_student <span class=\"hljs-keyword\">SET</span> DEGREE<span class=\"hljs-operator\">=</span>&quot;硕士&quot; <span class=\"hljs-keyword\">WHERE</span> id<span class=\"hljs-operator\">&gt;</span><span class=\"hljs-number\">0</span>;<br><br><span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-operator\">*</span> <span class=\"hljs-keyword\">from</span> whut_student <span class=\"hljs-keyword\">where</span> student_id<span class=\"hljs-operator\">=</span><span class=\"hljs-number\">1049731702891</span>;<br><br><span class=\"hljs-keyword\">DELETE</span> <span class=\"hljs-keyword\">FROM</span> whut_student <span class=\"hljs-keyword\">WHERE</span> id<span class=\"hljs-operator\">=</span><span class=\"hljs-number\">1008281</span><br><br><span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-built_in\">COUNT</span>(<span class=\"hljs-operator\">*</span>)  num,student_id <span class=\"hljs-keyword\">FROM</span> whut_student <span class=\"hljs-keyword\">GROUP</span> <span class=\"hljs-keyword\">BY</span> student_id <span class=\"hljs-keyword\">ORDER</span> <span class=\"hljs-keyword\">BY</span> num <span class=\"hljs-keyword\">DESC</span> ;<br></code></pre></td></tr></table></figure>\n\n<h1 id=\"Properties\"><a href=\"#Properties\" class=\"headerlink\" title=\"Properties\"></a>Properties</h1><figure class=\"highlight ini\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs ini\"><span class=\"hljs-comment\">## 开发/测试/生产环境分别对应dev/test/prod</span><br><br><span class=\"hljs-attr\">server.port</span>=<span class=\"hljs-number\">1000</span><br><span class=\"hljs-attr\">debug</span>=<span class=\"hljs-literal\">true</span><br><span class=\"hljs-attr\">trace</span>=<span class=\"hljs-literal\">false</span><br><span class=\"hljs-attr\">spring.application.name</span>=blog-web-server<br><span class=\"hljs-attr\">spring.profiles.active</span>=dev<br><br><span class=\"hljs-attr\">spring.datasource.name</span>=datasource<br><span class=\"hljs-attr\">spring.datasource.type</span>=com.alibaba.druid.pool.DruidDataSource<br><span class=\"hljs-attr\">spring.datasource.druid.filters</span>=stat<br><span class=\"hljs-attr\">spring.datasource.druid.driver-class-name</span>=com.mysql.jdbc.Driver<br><span class=\"hljs-attr\">spring.datasource.druid.url</span>=jdbc:mysql://<span class=\"hljs-number\">127.0</span>.<span class=\"hljs-number\">0.1</span>:<span class=\"hljs-number\">3306</span>/acanx?useUnicode=<span class=\"hljs-literal\">true</span>&amp;characterEncoding=UTF-<span class=\"hljs-number\">8</span>&amp;allowMultiQueries=<span class=\"hljs-literal\">true</span><br><span class=\"hljs-attr\">spring.datasource.druid.username</span>=root<br><span class=\"hljs-attr\">spring.datasource.druid.password</span>=root<br><span class=\"hljs-attr\">spring.datasource.druid.initial-size</span>=<span class=\"hljs-number\">1</span><br><span class=\"hljs-attr\">spring.datasource.druid.min-idle</span>=<span class=\"hljs-number\">1</span><br><span class=\"hljs-attr\">spring.datasource.druid.max-active</span>=<span class=\"hljs-number\">20</span><br><span class=\"hljs-attr\">spring.datasource.druid.max-wait</span>=<span class=\"hljs-number\">60000</span><br><span class=\"hljs-attr\">spring.datasource.druid.time-between-eviction-runs-millis</span>=<span class=\"hljs-number\">60000</span><br><span class=\"hljs-attr\">spring.datasource.druid.min-evictable-idle-time-millis</span>=<span class=\"hljs-number\">300000</span><br><span class=\"hljs-attr\">spring.datasource.druid.validation-query</span>=SELECT <span class=\"hljs-string\">&#x27;x&#x27;</span><br><span class=\"hljs-attr\">spring.datasource.druid.test-while-idle</span>=<span class=\"hljs-literal\">true</span><br><span class=\"hljs-attr\">spring.datasource.druid.test-on-borrow</span>=<span class=\"hljs-literal\">false</span><br><span class=\"hljs-attr\">spring.datasource.druid.test-on-return</span>=<span class=\"hljs-literal\">false</span><br><span class=\"hljs-attr\">spring.datasource.druid.pool-prepared-statements</span>=<span class=\"hljs-literal\">false</span><br><span class=\"hljs-attr\">spring.datasource.druid.max-pool-prepared-statement-per-connection-size</span>=<span class=\"hljs-number\">20</span><br></code></pre></td></tr></table></figure>\n\n\n<h1 id=\"yml\"><a href=\"#yml\" class=\"headerlink\" title=\"yml\"></a>yml</h1><figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs yml\"><span class=\"hljs-comment\"># 设置集群的名字，对应为http://127.0.0.1:9200/中的&quot;cluster_name&quot; : &quot;acanx-es-demo&quot;,</span><br><span class=\"hljs-attr\">cluster.name:</span> <span class=\"hljs-string\">acanx-es-demo</span><br><span class=\"hljs-comment\"># 节点名字，对应为http://127.0.0.1:9200/中的&quot;name&quot; : &quot;node-1001&quot;,</span><br><span class=\"hljs-attr\">node.name:</span> <span class=\"hljs-string\">node-1001</span><br><span class=\"hljs-attr\">node.master:</span> <span class=\"hljs-literal\">true</span><br><span class=\"hljs-attr\">node.data:</span> <span class=\"hljs-literal\">true</span><br><span class=\"hljs-comment\"># 修改ES的监听地址，以便其他机器也可以访问</span><br><span class=\"hljs-attr\">network.host:</span> <span class=\"hljs-number\">0.0</span><span class=\"hljs-number\">.0</span><span class=\"hljs-number\">.0</span><br><span class=\"hljs-comment\"># 默认端口</span><br><span class=\"hljs-attr\">http.port:</span> <span class=\"hljs-number\">9200</span><br><span class=\"hljs-comment\"># 增加新的CORS参数，这样head插件可以访问ES</span><br><span class=\"hljs-attr\">http.cors.enabled:</span> <span class=\"hljs-literal\">true</span><br><span class=\"hljs-attr\">http.cors.allow-origin:</span> <span class=\"hljs-string\">&quot;*&quot;</span><br></code></pre></td></tr></table></figure>\n\n\n<h1 id=\"Bash\"><a href=\"#Bash\" class=\"headerlink\" title=\"Bash\"></a>Bash</h1><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\"><span class=\"hljs-meta\">#!/bin/bash</span><br><span class=\"hljs-comment\"># - main program</span><br><span class=\"hljs-built_in\">set</span> -o errexit -o <span class=\"hljs-built_in\">noglob</span> -o pipefail<br><br><span class=\"hljs-comment\"># Configuration constants:</span><br><span class=\"hljs-comment\"># - Use upper case, underscore-separated names</span><br><span class=\"hljs-comment\"># - Use `readonly` keyword to highlight it is a constant</span><br><span class=\"hljs-built_in\">readonly</span> GREETING_FORMAT=<span class=\"hljs-string\">&quot;Hello %s!\\n&quot;</span><br><br><span class=\"hljs-comment\"># Global variables:</span><br><br><span class=\"hljs-keyword\">function</span> sayHello &#123;<br>    <span class=\"hljs-comment\"># Variable declarations:</span><br>    <span class=\"hljs-comment\"># - Always declared using `local` keyword</span><br>    <span class=\"hljs-comment\"># - Function parameters declared at the beginning of function</span><br>    <span class=\"hljs-comment\"># - Use meaningful names</span><br>    <span class=\"hljs-comment\"># - Use all lower case, underscrore-separated names</span><br>    <span class=\"hljs-built_in\">local</span> greeted_name=<span class=\"hljs-string\">&quot;<span class=\"hljs-variable\">$1</span>&quot;</span><br><br>    <span class=\"hljs-comment\"># Variable references:</span><br>    <span class=\"hljs-comment\"># - Are always wrapped in $&#123; &#125;</span><br>    <span class=\"hljs-comment\"># - Are properly quoted to avoid issues with embedded whitespace</span><br>    <span class=\"hljs-keyword\">if</span> [ -z <span class=\"hljs-string\">&quot;<span class=\"hljs-variable\">$&#123;greeted_name&#125;</span>&quot;</span> ]; <span class=\"hljs-keyword\">then</span><br>        <span class=\"hljs-comment\"># Return status:</span><br>        <span class=\"hljs-comment\"># - Use a non-zero value if something went wrong</span><br>        <span class=\"hljs-comment\"># - If none is specified - zero (success) is used by default</span><br>        <span class=\"hljs-built_in\">return</span> 1<br>    <span class=\"hljs-keyword\">else</span><br>        <span class=\"hljs-keyword\">if</span> [ <span class=\"hljs-string\">&quot;<span class=\"hljs-variable\">$&#123;greeted_name&#125;</span>&quot;</span> == <span class=\"hljs-string\">&#x27;-&#x27;</span> ]; <span class=\"hljs-keyword\">then</span><br>            <span class=\"hljs-built_in\">read</span> greeted_name<br>        <span class=\"hljs-keyword\">fi</span><br>        <span class=\"hljs-built_in\">printf</span> <span class=\"hljs-string\">&quot;<span class=\"hljs-variable\">$&#123;GREETING_FORMAT&#125;</span>&quot;</span> <span class=\"hljs-string\">&quot;<span class=\"hljs-variable\">$&#123;greeted_name&#125;</span>&quot;</span><br>    <span class=\"hljs-keyword\">fi</span><br>&#125;<br><br><span class=\"hljs-keyword\">function</span> toUpperCase &#123;<br>    tr <span class=\"hljs-string\">&quot;[a-z]&quot;</span> <span class=\"hljs-string\">&quot;[A-Z]&quot;</span><br>&#125;<br><br><span class=\"hljs-keyword\">function</span> printError &#123;<br>    <span class=\"hljs-built_in\">local</span> message=<span class=\"hljs-string\">&quot;<span class=\"hljs-variable\">$1</span>&quot;</span><br>    <span class=\"hljs-built_in\">local</span> red_color=<span class=\"hljs-string\">&#x27;\\e[31;1m&#x27;</span><br>    <span class=\"hljs-built_in\">local</span> no_color=<span class=\"hljs-string\">&#x27;\\e[m&#x27;</span><br><br>    <span class=\"hljs-built_in\">printf</span> <span class=\"hljs-string\">&#x27;\\n&#x27;</span><span class=\"hljs-variable\">$&#123;red_color&#125;</span><span class=\"hljs-string\">&#x27;ERROR:&#x27;</span><span class=\"hljs-variable\">$&#123;no_color&#125;</span><span class=\"hljs-string\">&#x27; %s\\n&#x27;</span> <span class=\"hljs-string\">&quot;<span class=\"hljs-variable\">$&#123;message&#125;</span>&quot;</span> 1&gt;&amp;2<br>&#125;<br><br><span class=\"hljs-comment\"># Main program</span><br><br>sayHello <span class=\"hljs-string\">&quot;Luke Skywalker&quot;</span><br><br><span class=\"hljs-built_in\">echo</span> <span class=\"hljs-string\">&quot;Han Solo&quot;</span> | sayHello -<br><br><span class=\"hljs-built_in\">echo</span> <span class=\"hljs-string\">&quot;Master Yoda&quot;</span> | sayHello - | toUpperCase<br><br><span class=\"hljs-keyword\">if</span> ! sayHello; <span class=\"hljs-keyword\">then</span><br>    printError <span class=\"hljs-string\">&quot;You gave no name!&quot;</span><br>    <span class=\"hljs-built_in\">exit</span> 1<br><span class=\"hljs-keyword\">fi</span><br><br></code></pre></td></tr></table></figure>\n\n\n<h1 id=\"Shell\"><a href=\"#Shell\" class=\"headerlink\" title=\"Shell\"></a>Shell</h1><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs javascript\">#!/bin/sh<br>echo <span class=\"hljs-string\">&#x27;============卡密管理===============&#x27;</span><br>echo <span class=\"hljs-string\">&#x27;创建卡密类型如下:&#x27;</span><br>arr=<span class=\"hljs-string\">`redis-cli -h 172.17.95.112 keys hardware:bus:*`</span><br> <span class=\"hljs-keyword\">for</span> i <span class=\"hljs-keyword\">in</span> $&#123;arr[@]&#125;;<br>        <span class=\"hljs-keyword\">do</span><br>        bus=<span class=\"hljs-string\">`echo $i | awk -F &#x27;:&#x27; &#x27;&#123;print $3&#125;&#x27;`</span><br>        value=<span class=\"hljs-string\">`redis-cli --raw -h 172.17.95.112 get $i | grep -Po &#x27;&quot;name&quot;:&quot;.*?&quot;&#x27; | awk -F &#x27;:&#x27; &#x27;&#123;print $2&#125;&#x27;`</span><br>         echo $bus、$value ;<br> done<br><br>read -p <span class=\"hljs-string\">&#x27;请输入操作:&#x27;</span> typevalue<br><span class=\"hljs-keyword\">if</span> [ <span class=\"hljs-string\">&quot;$typevalue&quot;</span> == <span class=\"hljs-string\">&quot;exit&quot;</span> ];then<br>        exit<br>fi<br><br>isexist=<span class=\"hljs-string\">`redis-cli --raw -h 172.17.95.112 get &quot;hardware:bus:$typevalue:&quot;`</span><br><span class=\"hljs-keyword\">if</span> [ <span class=\"hljs-string\">&quot;$isexist&quot;</span> == <span class=\"hljs-string\">&quot;&quot;</span> ];then<br>        echo <span class=\"hljs-string\">&#x27;输入类型不存在&#x27;</span><br>        sh $<span class=\"hljs-number\">0</span><br>fi<br><br><br>read -p <span class=\"hljs-string\">&#x27;生成数量:&#x27;</span> createNum<br><br>echo $createNum<br><br>echo <span class=\"hljs-string\">&quot;====================卡密=========================编号:$typevalue&quot;</span><br>outFile=<span class=\"hljs-string\">&quot;$typevalue-$RANDOM.log&quot;</span><br><span class=\"hljs-keyword\">for</span>((i=<span class=\"hljs-number\">0</span>;i&lt;$createNum;i++));<br><span class=\"hljs-keyword\">do</span><br>        card=<span class=\"hljs-string\">`date +%s%N | md5sum | head -c 8`</span><br>        redis-cli -h <span class=\"hljs-number\">172.17</span><span class=\"hljs-number\">.95</span><span class=\"hljs-number\">.112</span> set <span class=\"hljs-string\">&quot;hardware:card:$card:&quot;</span> <span class=\"hljs-string\">&quot;$typevalue&quot;</span> &gt;<span class=\"hljs-regexp\">/dev/</span><span class=\"hljs-literal\">null</span><br>        echo <span class=\"hljs-string\">&quot;$card&quot;</span>&gt;&gt;$outFile<br>        echo <span class=\"hljs-string\">&quot;$card&quot;</span><br>done<br>echo <span class=\"hljs-string\">&quot;输出文件路径为`pwd`/$outFile&quot;</span><br>echo <span class=\"hljs-string\">&#x27;====================卡密=========================&#x27;</span><br>exit<br></code></pre></td></tr></table></figure>\n\n\n<h1 id=\"PowerShell\"><a href=\"#PowerShell\" class=\"headerlink\" title=\"PowerShell\"></a>PowerShell</h1><figure class=\"highlight powershell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs powershell\">title 修改shift+右击在此处打开PowerShell<br>mode con cols=<span class=\"hljs-number\">73</span> lines=<span class=\"hljs-number\">20</span><br>rem 验证是否是以管理员身份运行<br><span class=\"hljs-built_in\">set</span> TempFile_Name=%SystemRoot%\\System32\\BatTestUACin_SysRt%Random%.batemp<br>( <span class=\"hljs-built_in\">echo</span> <span class=\"hljs-string\">&quot;BAT Test UAC in Temp&quot;</span> &gt;%TempFile_Name% ) <span class=\"hljs-number\">1</span>&gt;nul <span class=\"hljs-number\">2</span>&gt;nul<br><span class=\"hljs-keyword\">if</span> not exist %TempFile_Name% (<br>color <span class=\"hljs-number\">0</span>c<br><span class=\"hljs-built_in\">echo</span>.<br><span class=\"hljs-built_in\">echo</span>.<br><span class=\"hljs-built_in\">echo</span> 错误：没有以管理员身份运行该工具。<br><span class=\"hljs-built_in\">echo</span> 该工具将无法使用！<br><span class=\"hljs-built_in\">echo</span>.<br><span class=\"hljs-built_in\">echo</span> 方法：<br><span class=\"hljs-built_in\">echo</span> 找到该工具，右击<span class=\"hljs-string\">&quot;以管理员身份运行&quot;</span>。<br><span class=\"hljs-built_in\">echo</span>.<br><span class=\"hljs-built_in\">echo</span> 按任意键退出该工具..... &amp; pause &gt;nul<br><span class=\"hljs-keyword\">exit</span><br>)<br><span class=\"hljs-built_in\">echo</span> 初始化中，请稍后.....<br>rem 设置<span class=\"hljs-string\">&quot;HKCR\\Directory\\Background\\shell&quot;</span>的所有者为:Everyone<br>&gt;&gt;fcc_owner.inf <span class=\"hljs-built_in\">echo</span>.[<span class=\"hljs-type\">Version</span>]<br>&gt;&gt;fcc_owner.inf echo.Signature = <span class=\"hljs-string\">&quot;<span class=\"hljs-variable\">$Chicago</span><span class=\"hljs-variable\">$</span>&quot;</span><br>&gt;&gt;fcc_owner.inf <span class=\"hljs-built_in\">echo</span>.<br>&gt;&gt;fcc_owner.inf <span class=\"hljs-built_in\">echo</span>.[<span class=\"hljs-type\">Registry</span> <span class=\"hljs-type\">Keys</span>]<br>&gt;&gt;fcc_owner.inf <span class=\"hljs-built_in\">echo</span>.<span class=\"hljs-string\">&quot;CLASSES_ROOT\\Directory\\Background\\shell&quot;</span>, <span class=\"hljs-number\">0</span>, <span class=\"hljs-string\">&quot;O:WD&quot;</span><br>secedit /configure /db fcc_owner.sdb /cfg fcc_owner.inf /log fcc_owner.log<br><span class=\"hljs-built_in\">del</span> fcc_owner.*<br>:main<br><span class=\"hljs-built_in\">cls</span><br>color <span class=\"hljs-number\">0</span>a<br><span class=\"hljs-built_in\">echo</span> *************************************************************************<br><span class=\"hljs-built_in\">echo</span>.<br><span class=\"hljs-built_in\">echo</span> 该工具用于更改新版windows10系统shift+右键以何种方式打开命令窗口。<br><span class=\"hljs-built_in\">echo</span> 系统默认“在此处打开PowerShell”，<br><span class=\"hljs-built_in\">echo</span> 此工具可以在“PowerShell”和“CMD”之间切换。<br><span class=\"hljs-built_in\">echo</span>.<br><span class=\"hljs-built_in\">echo</span> ★注意！请使用管理员权限运行改工具！<br><span class=\"hljs-built_in\">echo</span>.<br><span class=\"hljs-built_in\">echo</span> 请选择操作：<br><span class=\"hljs-built_in\">echo</span> <span class=\"hljs-number\">1</span>、修改为“在此处打开CMD窗口”<br><span class=\"hljs-built_in\">echo</span> <span class=\"hljs-number\">2</span>、修改为“在此处打开PowerShell窗口”<br><span class=\"hljs-built_in\">echo</span> <span class=\"hljs-number\">3</span>、同时显示<span class=\"hljs-number\">1</span>和<span class=\"hljs-number\">2</span><br><span class=\"hljs-built_in\">echo</span>.<br><span class=\"hljs-built_in\">echo</span> by:frogchou<br><span class=\"hljs-built_in\">echo</span> website:frogchou.com<br><span class=\"hljs-built_in\">echo</span> *************************************************************************<br><span class=\"hljs-built_in\">echo</span>.<br><span class=\"hljs-built_in\">set</span> /p var=请输入序号并回车开始修改：<br><span class=\"hljs-keyword\">if</span> <span class=\"hljs-string\">&quot;%var%&quot;</span>==<span class=\"hljs-string\">&quot;1&quot;</span> goto changeCMD<br><span class=\"hljs-keyword\">if</span> <span class=\"hljs-string\">&quot;%var%&quot;</span>==<span class=\"hljs-string\">&quot;2&quot;</span> goto changePowerShell<br><span class=\"hljs-keyword\">if</span> <span class=\"hljs-string\">&quot;%var%&quot;</span>==<span class=\"hljs-string\">&quot;3&quot;</span> (goto changeShowAll) <span class=\"hljs-keyword\">else</span> (goto error)<br>:changeCMD<br>reg delete HKCR\\Directory\\Background\\shell\\cmd /v HideBasedOnVelocityId /f<br>reg add HKCR\\Directory\\Background\\shell\\cmd /v ShowBasedOnVelocityId /t REG_DWORD /d <span class=\"hljs-number\">6527944</span> /f<br>reg delete HKCR\\Directory\\Background\\shell\\Powershell /v ShowBasedOnVelocityId /f<br>reg add HKCR\\Directory\\Background\\shell\\Powershell /v HideBasedOnVelocityId /t REG_DWORD /d <span class=\"hljs-number\">6527944</span> /f<br>goto <span class=\"hljs-keyword\">end</span><br>:changePowerShell<br>reg delete HKCR\\Directory\\Background\\shell\\cmd /v ShowBasedOnVelocityId /f<br>reg add HKCR\\Directory\\Background\\shell\\cmd /v HideBasedOnVelocityId /t REG_DWORD /d <span class=\"hljs-number\">6527944</span> /f<br>reg delete HKCR\\Directory\\Background\\shell\\Powershell /v HideBasedOnVelocityId /f<br>reg add HKCR\\Directory\\Background\\shell\\Powershell /v ShowBasedOnVelocityId /t REG_DWORD /d <span class=\"hljs-number\">6527944</span> /f<br>goto <span class=\"hljs-keyword\">end</span><br>:changeShowAll<br>reg delete HKCR\\Directory\\Background\\shell\\cmd /v HideBasedOnVelocityId /f<br>reg add HKCR\\Directory\\Background\\shell\\cmd /v ShowBasedOnVelocityId /t REG_DWORD /d <span class=\"hljs-number\">6527944</span> /f<br>reg delete HKCR\\Directory\\Background\\shell\\Powershell /v HideBasedOnVelocityId /f<br>reg add HKCR\\Directory\\Background\\shell\\Powershell /v ShowBasedOnVelocityId /t REG_DWORD /d <span class=\"hljs-number\">6527944</span> /f<br>goto <span class=\"hljs-keyword\">end</span><br>:<span class=\"hljs-keyword\">end</span><br><span class=\"hljs-built_in\">echo</span>.<br><span class=\"hljs-built_in\">echo</span> 修改完成！按任意键退出.<br>pause &gt;nul<br><span class=\"hljs-keyword\">exit</span><br>:error<br><span class=\"hljs-built_in\">echo</span>.<br><span class=\"hljs-built_in\">echo</span> 选择错误！按任意键返回主菜单.<br>pause &gt;nul<br>goto main<br></code></pre></td></tr></table></figure>\n\n\n<h1 id=\"CMD\"><a href=\"#CMD\" class=\"headerlink\" title=\"CMD\"></a>CMD</h1><figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs cmd\">@<span class=\"hljs-built_in\">echo</span> off <br><span class=\"hljs-built_in\">echo</span> 定时关机DOS命令，使用方式: &quot;sdat <span class=\"hljs-number\">23</span>:<span class=\"hljs-number\">12</span>:<span class=\"hljs-number\">12</span>&quot;; <br><span class=\"hljs-built_in\">echo</span> sdat 为命令名称，<span class=\"hljs-number\">23</span>:<span class=\"hljs-number\">12</span>:<span class=\"hljs-number\">12</span>为当天的时间参数<br>::<span class=\"hljs-built_in\">set</span> yy=<span class=\"hljs-variable\">%date:~0,4%</span><br>::<span class=\"hljs-built_in\">set</span> mm=<span class=\"hljs-variable\">%date:~5,2%</span><br>::<span class=\"hljs-built_in\">set</span> dd=<span class=\"hljs-variable\">%date:~8,2%</span><br><span class=\"hljs-built_in\">set</span> h=<span class=\"hljs-variable\">%time:~0,2%</span><br><span class=\"hljs-built_in\">set</span> m=<span class=\"hljs-variable\">%time:~3,2%</span><br><span class=\"hljs-built_in\">set</span> s=<span class=\"hljs-variable\">%time:~6,2%</span><br>::<span class=\"hljs-built_in\">echo</span> <span class=\"hljs-variable\">%yy%</span> <span class=\"hljs-variable\">%mm%</span> <span class=\"hljs-variable\">%dd%</span> <span class=\"hljs-variable\">%h%</span> <span class=\"hljs-variable\">%m%</span> <span class=\"hljs-variable\">%s%</span><br>::<span class=\"hljs-built_in\">echo</span> %<span class=\"hljs-number\">1</span> %<span class=\"hljs-number\">2</span> %<span class=\"hljs-number\">3</span><br><span class=\"hljs-built_in\">set</span> /a ts=(%<span class=\"hljs-number\">1</span> - <span class=\"hljs-variable\">%h%</span>)*<span class=\"hljs-number\">3600</span> + (%<span class=\"hljs-number\">2</span> - <span class=\"hljs-variable\">%m%</span>)*<span class=\"hljs-number\">60</span> + (%<span class=\"hljs-number\">3</span> - <span class=\"hljs-variable\">%s%</span>)<br><span class=\"hljs-keyword\">IF</span> /i <span class=\"hljs-variable\">%ts%</span> <span class=\"hljs-keyword\">LSS</span> <span class=\"hljs-number\">1</span> (<br><span class=\"hljs-built_in\">echo</span> ERROR:Shutdown <span class=\"hljs-built_in\">time</span> must be <span class=\"hljs-built_in\">time</span> <span class=\"hljs-keyword\">in</span> future;<br>) <span class=\"hljs-keyword\">ELSE</span> (<br><span class=\"hljs-built_in\">echo</span> INFO:System will shutdown after <span class=\"hljs-variable\">%ts%</span> seconds <span class=\"hljs-built_in\">at</span> %<span class=\"hljs-number\">1</span> : %<span class=\"hljs-number\">2</span> ：%<span class=\"hljs-number\">3</span>; <br>shutdown /s /t <span class=\"hljs-variable\">%ts%</span><br>)<br>::<span class=\"hljs-built_in\">pause</span> <br></code></pre></td></tr></table></figure>\n\n\n\n<h1 id=\"Bat\"><a href=\"#Bat\" class=\"headerlink\" title=\"Bat\"></a>Bat</h1><figure class=\"highlight bat\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bat\">@<span class=\"hljs-built_in\">echo</span> off<br><span class=\"hljs-built_in\">echo</span>.<br><span class=\"hljs-built_in\">echo</span> MySQL数据库备份<br><span class=\"hljs-built_in\">set</span> del_date_back=<span class=\"hljs-number\">15</span><br><span class=\"hljs-built_in\">set</span> all_data_back_value=<span class=\"hljs-number\">1</span><br><span class=\"hljs-built_in\">set</span> haoya_bin_path=&quot;C:\\Program Files\\HaoZip\\&quot;<br><span class=\"hljs-built_in\">set</span> mysql_bin_path=&quot;C:\\wamp\\bin\\mysql\\mysql5.<span class=\"hljs-number\">5</span>.<span class=\"hljs-number\">24</span>\\bin\\&quot;<br><span class=\"hljs-built_in\">set</span> mysql_data_path=&quot;C:\\wamp\\bin\\mysql\\mysql5.<span class=\"hljs-number\">5</span>.<span class=\"hljs-number\">24</span>\\data\\&quot;<br>::<span class=\"hljs-built_in\">set</span> apache_bin_path=&quot;C:\\wamp\\bin\\apache\\apache2.<span class=\"hljs-number\">2</span>.<span class=\"hljs-number\">22</span>\\bin\\&quot;<br><span class=\"hljs-built_in\">set</span> apache_data_path=&quot;C:\\wamp\\&quot;<br><span class=\"hljs-built_in\">set</span> data_back_path=&quot;C:\\dtsbc_data_back\\&quot;<br><span class=\"hljs-built_in\">set</span> del_file_path=&quot;C:\\wamp\\www\\dtsbc\\Admin\\Runtime\\&quot;<br><span class=\"hljs-built_in\">set</span> Ymd=&quot;<span class=\"hljs-variable\">%date:~,4%</span><span class=\"hljs-variable\">%date:~5,2%</span><span class=\"hljs-variable\">%date:~8,2%</span>&quot;<br><span class=\"hljs-built_in\">set</span> /a t=<span class=\"hljs-number\">100</span>+<span class=\"hljs-variable\">%time:~,2%</span><br><span class=\"hljs-built_in\">set</span> bakFileNameTail=_BAK_<span class=\"hljs-variable\">%date:~,4%</span><span class=\"hljs-variable\">%date:~5,2%</span><span class=\"hljs-variable\">%date:~8,2%</span>_<span class=\"hljs-variable\">%t:~1%</span><span class=\"hljs-variable\">%time:~3,2%</span><span class=\"hljs-variable\">%time:~6,2%</span><br><span class=\"hljs-built_in\">echo</span> *****************************<br><span class=\"hljs-built_in\">echo</span>.<br><span class=\"hljs-built_in\">echo</span> 今天是： <span class=\"hljs-variable\">%date%</span>_<span class=\"hljs-variable\">%time%</span><br><span class=\"hljs-built_in\">echo</span> 好压执行路径为： <span class=\"hljs-variable\">%haoya_bin_path%</span><br><span class=\"hljs-built_in\">echo</span> mysql执行路径为： <span class=\"hljs-variable\">%mysql_bin_path%</span><br><span class=\"hljs-built_in\">echo</span> mysql数据路径为： <span class=\"hljs-variable\">%mysql_data_path%</span><br>::<span class=\"hljs-built_in\">echo</span> apache执行路径为： <span class=\"hljs-variable\">%apache_bin_path%</span><br><span class=\"hljs-built_in\">echo</span> apache数据路径为： <span class=\"hljs-variable\">%apache_data_path%</span><br><span class=\"hljs-built_in\">echo</span>.<br><span class=\"hljs-built_in\">echo</span> *****************************<br>:: HaoZipC a -tzip <span class=\"hljs-number\">20161221</span>.zip config\\*<br>::<span class=\"hljs-built_in\">set</span> mysql_bin_path = &quot;C:\\wamp\\bin\\mysql\\mysql5.<span class=\"hljs-number\">5</span>.<span class=\"hljs-number\">24</span>\\bin&quot;<br>::<span class=\"hljs-built_in\">set</span> apache_bin_path = &quot;C:\\wamp\\bin\\apache\\apache2.<span class=\"hljs-number\">2</span>.<span class=\"hljs-number\">22</span>\\bin&quot;<br>::<span class=\"hljs-built_in\">set</span> haoya_bin_path = &quot;C:\\Program Files\\HaoZip&quot;<br>::创建备份的数据的目录<br><br><span class=\"hljs-built_in\">md</span> <span class=\"hljs-variable\">%data_back_path%</span><span class=\"hljs-variable\">%Ymd%</span><br><span class=\"hljs-variable\">%mysql_bin_path%</span>\\mysqldump -u root --default-character-<span class=\"hljs-built_in\">set</span>=utf8 --databases dtsbc &gt; <span class=\"hljs-variable\">%data_back_path%</span><span class=\"hljs-variable\">%Ymd%</span>\\dtsbc_<span class=\"hljs-variable\">%bakFileNameTail%</span>.sql<br><span class=\"hljs-variable\">%mysql_bin_path%</span>\\mysqldump -u root --default-character-<span class=\"hljs-built_in\">set</span>=utf8 --databases mysql &gt; <span class=\"hljs-variable\">%data_back_path%</span><span class=\"hljs-variable\">%Ymd%</span>\\mysql_<span class=\"hljs-variable\">%bakFileNameTail%</span>.sql<br><span class=\"hljs-variable\">%mysql_bin_path%</span>\\mysqldump -u root --default-character-<span class=\"hljs-built_in\">set</span>=utf8 --databases bbsdata &gt; <span class=\"hljs-variable\">%data_back_path%</span><span class=\"hljs-variable\">%Ymd%</span>\\bbsdata_<span class=\"hljs-variable\">%bakFileNameTail%</span>.sql<br><span class=\"hljs-built_in\">net</span> stop wampapache<br><span class=\"hljs-built_in\">net</span> stop wampmysqld<br><span class=\"hljs-built_in\">rd</span>/s/q <span class=\"hljs-variable\">%del_file_path%</span><br><br><span class=\"hljs-variable\">%haoya_bin_path%</span>HaoZipC a -tzip <span class=\"hljs-variable\">%data_back_path%</span><span class=\"hljs-variable\">%Ymd%</span>\\dtsbc_mysql_<span class=\"hljs-variable\">%Ymd%</span>.zip <span class=\"hljs-variable\">%mysql_data_path%</span>dtsbc\\*<br><span class=\"hljs-variable\">%haoya_bin_path%</span>HaoZipC a -tzip <span class=\"hljs-variable\">%data_back_path%</span><span class=\"hljs-variable\">%Ymd%</span>\\bbs_mysql_<span class=\"hljs-variable\">%Ymd%</span>.zip <span class=\"hljs-variable\">%mysql_data_path%</span>bbs\\*<br><span class=\"hljs-variable\">%haoya_bin_path%</span>HaoZipC a -tzip <span class=\"hljs-variable\">%data_back_path%</span><span class=\"hljs-variable\">%Ymd%</span>\\mysql_mysql_<span class=\"hljs-variable\">%Ymd%</span>.zip <span class=\"hljs-variable\">%mysql_data_path%</span>mysql\\*<br><span class=\"hljs-variable\">%haoya_bin_path%</span>HaoZipC a -tzip <span class=\"hljs-variable\">%data_back_path%</span><span class=\"hljs-variable\">%Ymd%</span>\\dtsbc_php_<span class=\"hljs-variable\">%Ymd%</span>.zip <span class=\"hljs-variable\">%apache_data_path%</span>dtsbc\\*<br><span class=\"hljs-variable\">%haoya_bin_path%</span>HaoZipC a -tzip <span class=\"hljs-variable\">%data_back_path%</span><span class=\"hljs-variable\">%Ymd%</span>\\bbs_php_<span class=\"hljs-variable\">%Ymd%</span>.zip <span class=\"hljs-variable\">%apache_data_path%</span>bbs\\*<br><br><span class=\"hljs-keyword\">if</span>  <span class=\"hljs-variable\">%date:~9,1%</span> <span class=\"hljs-keyword\">equ</span> <span class=\"hljs-variable\">%all_data_back_value%</span> ( <span class=\"hljs-variable\">%haoya_bin_path%</span>HaoZipC a -tzip <span class=\"hljs-variable\">%data_back_path%</span><span class=\"hljs-variable\">%Ymd%</span>\\wamp_<span class=\"hljs-variable\">%Ymd%</span>.zip <span class=\"hljs-variable\">%apache_data_path%</span>*)<br>::<span class=\"hljs-built_in\">cmd</span><br><span class=\"hljs-built_in\">net</span> <span class=\"hljs-built_in\">start</span> wampapache<br><span class=\"hljs-built_in\">net</span> <span class=\"hljs-built_in\">start</span> wampmysqld<br>::<span class=\"hljs-built_in\">set</span>/a n=<span class=\"hljs-number\">5</span><br><span class=\"hljs-built_in\">set</span>/a y=<span class=\"hljs-variable\">%date:~,4%</span>,m=<span class=\"hljs-number\">1</span><span class=\"hljs-variable\">%date:~5,2%</span>-<span class=\"hljs-number\">100</span>,d=<span class=\"hljs-number\">1</span><span class=\"hljs-variable\">%date:~8,2%</span>-<span class=\"hljs-number\">100</span><br><span class=\"hljs-built_in\">set</span>/a d-=<span class=\"hljs-variable\">%del_date_back%</span><br><span class=\"hljs-keyword\">if</span> <span class=\"hljs-variable\">%d%</span> <span class=\"hljs-keyword\">gtr</span> <span class=\"hljs-number\">0</span> <span class=\"hljs-keyword\">goto</span> :ok<br>:ov<br><span class=\"hljs-built_in\">set</span>/a &quot;<span class=\"hljs-built_in\">md</span>=<span class=\"hljs-number\">31</span>-<span class=\"hljs-variable\">!(m-5)-!</span>(m-<span class=\"hljs-number\">7</span>)-<span class=\"hljs-variable\">!(m-10)-!</span>(m-<span class=\"hljs-number\">12</span>)-<span class=\"hljs-variable\">!(m-3)*(3-!</span>(y&amp;<span class=\"hljs-number\">3</span>))&quot;<br><span class=\"hljs-built_in\">set</span>/a d+=<span class=\"hljs-built_in\">md</span>,m-=<span class=\"hljs-number\">1</span><br><span class=\"hljs-keyword\">if</span> <span class=\"hljs-variable\">%m%</span> <span class=\"hljs-keyword\">equ</span> <span class=\"hljs-number\">0</span> <span class=\"hljs-built_in\">set</span>/a m=<span class=\"hljs-number\">12</span>,y-=<span class=\"hljs-number\">1</span><br><span class=\"hljs-keyword\">if</span> <span class=\"hljs-variable\">%d%</span> <span class=\"hljs-keyword\">leq</span> <span class=\"hljs-number\">0</span> <span class=\"hljs-keyword\">goto</span> :ov<br>:ok<br><span class=\"hljs-built_in\">set</span>/a <span class=\"hljs-built_in\">md</span>=m*<span class=\"hljs-number\">100</span>+d+<span class=\"hljs-number\">10000</span><br><span class=\"hljs-built_in\">set</span> back_data_value=&quot;<span class=\"hljs-variable\">%y%</span><span class=\"hljs-variable\">%md:~1%</span>&quot;<br><span class=\"hljs-built_in\">echo</span> <span class=\"hljs-variable\">%del_date_back%</span>天前的日期为：<span class=\"hljs-variable\">%back_data_value%</span><br><span class=\"hljs-built_in\">cd</span> <span class=\"hljs-variable\">%data_back_path%</span><br><br><span class=\"hljs-built_in\">set</span> /a data_back_value_int=<span class=\"hljs-variable\">%back_data_value%</span>+<span class=\"hljs-number\">0</span><br><span class=\"hljs-built_in\">echo</span> <span class=\"hljs-variable\">%data_back_value_int%</span><br>::单条语句执行的时候需要的是一个% 在批处理中的话，需要两个%%<br><span class=\"hljs-keyword\">for</span> /F <span class=\"hljs-variable\">%%i</span> <span class=\"hljs-keyword\">in</span> (&#x27;<span class=\"hljs-built_in\">dir</span>  <span class=\"hljs-variable\">%data_back_path%</span> /a:d /b&#x27;) <span class=\"hljs-keyword\">do</span> (<span class=\"hljs-keyword\">if</span> <span class=\"hljs-variable\">%%i</span> <span class=\"hljs-keyword\">lss</span> <span class=\"hljs-variable\">%data_back_value_int%</span> ( <span class=\"hljs-built_in\">rd</span>/s/q <span class=\"hljs-variable\">%%i</span> ))<br>::<span class=\"hljs-keyword\">for</span> /F <span class=\"hljs-variable\">%%i</span> <span class=\"hljs-keyword\">in</span> (&#x27;<span class=\"hljs-built_in\">dir</span>  <span class=\"hljs-variable\">%data_back_path%</span> /a:d /b&#x27;) <span class=\"hljs-keyword\">do</span> (  <span class=\"hljs-keyword\">if</span> <span class=\"hljs-variable\">%%i</span> <span class=\"hljs-keyword\">lss</span> <span class=\"hljs-variable\">%data_back_value_int%</span> ( <span class=\"hljs-built_in\">echo</span> <span class=\"hljs-variable\">%%i</span> ) <span class=\"hljs-keyword\">else</span> ( <span class=\"hljs-built_in\">echo</span> &quot;google&quot; )  )<br><span class=\"hljs-function\">echo.:<span class=\"hljs-title\">P</span></span><br><span class=\"hljs-function\"></span><br><span class=\"hljs-function\"><span class=\"hljs-title\">echo</span> <span class=\"hljs-title\">MySQL</span>数据库备份完成，请进行检查。。。</span><br><span class=\"hljs-function\"></span><br><span class=\"hljs-function\"><span class=\"hljs-title\">echo</span>.:<span class=\"hljs-title\">P</span></span><br><span class=\"hljs-function\"><span class=\"hljs-title\">echo</span>.</span><br><span class=\"hljs-function\">//<span class=\"hljs-title\">pause</span></span><br><span class=\"hljs-function\">::<span class=\"hljs-title\">pause</span></span><br></code></pre></td></tr></table></figure>\n\n\n\n<h1 id=\"Groovy\"><a href=\"#Groovy\" class=\"headerlink\" title=\"Groovy\"></a>Groovy</h1><figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs groovy\">errpattern = <span class=\"hljs-regexp\">~/Failures: [1-9]+/</span><br>errpatternSum = <span class=\"hljs-regexp\">~/passed:\\d+,.*failed:\\d+,/</span><br><span class=\"hljs-keyword\">def</span> ratio<br>manager.build.logFile.eachLine&#123; line -&gt;<br>    errmatcher=errpattern.matcher(line)<br>    errmatcherSum=errpatternSum.matcher(line)<br>    <span class=\"hljs-keyword\">if</span> (errmatcher.find()) &#123;<br>        manager.build.<span class=\"hljs-meta\">@result</span> = hudson.model.Result.UNSTABLE<br>    &#125;<br>    <span class=\"hljs-keyword\">if</span>(errmatcherSum.find())&#123;<br>        numArray = line.findAll(<span class=\"hljs-regexp\">/\\d+/</span>)*.toInteger()<br>        manager.listener.logger.println(<span class=\"hljs-string\">&quot;&gt;&gt;&gt; number =  &quot;</span> + numArray)<br>        ratio = (numArray[<span class=\"hljs-number\">1</span>] / numArray[<span class=\"hljs-number\">3</span>]) * <span class=\"hljs-number\">100</span><br>        manager.listener.logger.println(<span class=\"hljs-string\">&quot;&gt;&gt;&gt; ratio =  &quot;</span> + ratio + <span class=\"hljs-string\">&quot;%&quot;</span>)<br>    &#125;<br>&#125;<br><br>ratio = Math.round(ratio)<br><span class=\"hljs-comment\">//add text next to the job build history</span><br>manager.addShortText(<span class=\"hljs-string\">&quot;failure rate -&gt; &quot;</span> + ratio + <span class=\"hljs-string\">&quot;%&quot;</span>)<br></code></pre></td></tr></table></figure>\n\n\n<h1 id=\"Gradle\"><a href=\"#Gradle\" class=\"headerlink\" title=\"Gradle\"></a>Gradle</h1><figure class=\"highlight gradle\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs gradle\">apply plugin: <span class=\"hljs-string\">&#x27;com.android.application&#x27;</span><br><br>android &#123;<br>    compileSdkVersion <span class=\"hljs-number\">25</span><br>    buildToolsVersion <span class=\"hljs-string\">&quot;25.0.1&quot;</span><br>    defaultConfig &#123;<br>        applicationId <span class=\"hljs-string\">&quot;com.grgbanking.school&quot;</span><br>        minSdkVersion <span class=\"hljs-number\">15</span><br>        targetSdkVersion <span class=\"hljs-number\">25</span><br>        versionCode <span class=\"hljs-number\">1</span><br>        versionName <span class=\"hljs-string\">&quot;1.0&quot;</span><br>        testInstrumentationRunner <span class=\"hljs-string\">&quot;android.support.test.runner.AndroidJUnitRunner&quot;</span><br>    &#125;<br>    buildTypes &#123;<br>        release &#123;<br>            minifyEnabled <span class=\"hljs-keyword\">false</span><br>            proguardFiles getDefaultProguardFile(<span class=\"hljs-string\">&#x27;proguard-android.txt&#x27;</span>), <span class=\"hljs-string\">&#x27;proguard-rules.pro&#x27;</span><br>        &#125;<br>    &#125;<br>    dataBinding &#123;<br>        enabled = <span class=\"hljs-keyword\">true</span><br>    &#125;<br>&#125;<br><br><span class=\"hljs-keyword\">dependencies</span> &#123;<br>    <span class=\"hljs-keyword\">compile</span> <span class=\"hljs-keyword\">fileTree</span>(dir: <span class=\"hljs-string\">&#x27;libs&#x27;</span>, <span class=\"hljs-keyword\">include</span>: [<span class=\"hljs-string\">&#x27;*.jar&#x27;</span>])<br>    androidTestCompile(<span class=\"hljs-string\">&#x27;com.android.support.test.espresso:espresso-core:2.2.2&#x27;</span>, &#123;<br>        <span class=\"hljs-keyword\">exclude</span> <span class=\"hljs-keyword\">group</span>: <span class=\"hljs-string\">&#x27;com.android.support&#x27;</span>, module: <span class=\"hljs-string\">&#x27;support-annotations&#x27;</span><br>    &#125;)<br>    <span class=\"hljs-keyword\">compile</span> <span class=\"hljs-string\">&#x27;com.android.support:appcompat-v7:25.0.1&#x27;</span><br>    <span class=\"hljs-keyword\">compile</span> <span class=\"hljs-string\">&#x27;com.jakewharton.rxbinding:rxbinding:0.4.0&#x27;</span><br><br>    <span class=\"hljs-comment\">/*compile &#x27;com.squareup.retrofit2:retrofit:2.1.0&#x27;</span><br><span class=\"hljs-comment\">    compile &#x27;com.squareup.retrofit2:adapter-rxjava:2.0.0-beta4&#x27;*/</span><br>    <span class=\"hljs-keyword\">compile</span> <span class=\"hljs-string\">&#x27;com.squareup.retrofit2:retrofit:2.0.0-beta4&#x27;</span><br>    <span class=\"hljs-keyword\">compile</span> <span class=\"hljs-string\">&#x27;com.squareup.retrofit2:converter-gson:2.0.0-beta4&#x27;</span><br>    <span class=\"hljs-keyword\">compile</span> <span class=\"hljs-string\">&#x27;com.squareup.retrofit2:adapter-rxjava:2.0.0-beta4&#x27;</span><br><br>    <span class=\"hljs-keyword\">compile</span> <span class=\"hljs-string\">&#x27;com.squareup.okhttp:okhttp:2.7.5&#x27;</span><br>    <span class=\"hljs-keyword\">compile</span> <span class=\"hljs-string\">&#x27;com.alibaba:fastjson:1.2.20&#x27;</span><br>    <span class=\"hljs-keyword\">compile</span> <span class=\"hljs-string\">&#x27;org.apache.commons:commons-lang3:3.5&#x27;</span><br><br>    testCompile <span class=\"hljs-string\">&#x27;junit:junit:4.12&#x27;</span><br>&#125;<br><br></code></pre></td></tr></table></figure>\n\n<h1 id=\"Git\"><a href=\"#Git\" class=\"headerlink\" title=\"Git\"></a>Git</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs git\"># 1.初始化git<br>git init <br><br># 2.查看git修改状态：<br>git status<br><br># 3.将项目保存到仓库<br>先 git add .<br>再 git commit -m &quot;备注&quot;<br><br># 4. 查看最新三个仓库中的项目<br>git log<br><br># 5. 查看所有仓库中的项目<br>git reflog<br><br># 6.恢复成某个项目<br>git reset --hard 这里写id<br><br># 7.将github中的项目拷贝下来<br>git clone 地址<br><br># 8.将本地项目传到github <br>git push origin master<br><br><br># 9.更新本地项目，与gitbub一致<br>git pull<br><br># 10.将本地项目和新建的远程仓库关联起来，必须是未初始化仓库<br>git remote add origin git@github.com:michaelliao&#x2F;learngit.git<br><br># 11.把本地库的内容推送到远程，用git push命令<br>git push -u origin master    # （由于远程库是空的，我们第一次推送master分支时，加上了-u参数，<br>\t\t\t\tGit不但会把本地的master分支内容推送的远程新的master分支，<br>\t\t\t\t还会把本地的master分支和远程的master分支关联起来，<br>\t\t\t\t在以后的推送或者拉取时就可以简化命令。）<br><br></code></pre></td></tr></table></figure>\n\n\n<p>···<br>···<br>···</p>\n<h1 id=\"待添加\"><a href=\"#待添加\" class=\"headerlink\" title=\"待添加\"></a>待添加</h1><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\">connect: &#123;<br>    server: &#123;<br>        options: &#123;<br>            port: <span class=\"hljs-number\">9100</span>,<br>            hostname: <span class=\"hljs-string\">&#x27;*&#x27;</span>,<br>            base: <span class=\"hljs-string\">&#x27;.&#x27;</span>,<br>            keepalive: <span class=\"hljs-literal\">true</span><br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>\n<h1 id=\"待添加-1\"><a href=\"#待添加-1\" class=\"headerlink\" title=\"待添加\"></a>待添加</h1><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-built_in\">this</span>.base_uri = <span class=\"hljs-built_in\">this</span>.config.base_uri || <span class=\"hljs-built_in\">this</span>.prefs.get(<span class=\"hljs-string\">&quot;app-base_uri&quot;</span>) || <span class=\"hljs-string\">&quot;http://localhost:9200&quot;</span>;<br></code></pre></td></tr></table></figure>\n\n<h1 id=\"待添加-2\"><a href=\"#待添加-2\" class=\"headerlink\" title=\"待添加\"></a>待添加</h1><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-built_in\">this</span>.base_uri = <span class=\"hljs-built_in\">this</span>.config.base_uri || <span class=\"hljs-built_in\">this</span>.prefs.get(<span class=\"hljs-string\">&quot;app-base_uri&quot;</span>) || <span class=\"hljs-string\">&quot;http://127.0.0.1:9200&quot;</span>;<br></code></pre></td></tr></table></figure>\n\n\n<h1 id=\"待添加-3\"><a href=\"#待添加-3\" class=\"headerlink\" title=\"待添加\"></a>待添加</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs plain\">npm install<br></code></pre></td></tr></table></figure>\n\n<h1 id=\"待添加-4\"><a href=\"#待添加-4\" class=\"headerlink\" title=\"待添加\"></a>待添加</h1><h1 id=\"待添加-5\"><a href=\"#待添加-5\" class=\"headerlink\" title=\"待添加\"></a>待添加</h1>","site":{"data":{}},"excerpt":"","more":"<h1 id=\"代码样式\"><a href=\"#代码样式\" class=\"headerlink\" title=\"代码样式\"></a>代码样式</h1><h1 id=\"Java\"><a href=\"#Java\" class=\"headerlink\" title=\"Java\"></a>Java</h1><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-keyword\">package</span> com.acanx.thread;<br><br><span class=\"hljs-keyword\">import</span> org.slf4j.Logger;<br><span class=\"hljs-keyword\">import</span> org.slf4j.LoggerFactory;<br><span class=\"hljs-keyword\">import</span> java.util.concurrent.ExecutionException;<br><span class=\"hljs-keyword\">import</span> java.util.concurrent.FutureTask;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * Created by ACANX on 2018/9/3.</span><br><span class=\"hljs-comment\"> * MultiThread :</span><br><span class=\"hljs-comment\"> * &lt;p&gt;</span><br><span class=\"hljs-comment\"> * &lt;p&gt;</span><br><span class=\"hljs-comment\"> * 1.继承Thread类，重写该类的run()方法。</span><br><span class=\"hljs-comment\"> * 2.实现Runnable接口，并重写该接口的run()方法，该run()方法同样是线程执行体，</span><br><span class=\"hljs-comment\"> * 创建Runnable实现类的实例，并以此实例作为Thread类的target来创建Thread对象，</span><br><span class=\"hljs-comment\"> * 该Thread对象才是真正的线程对象。</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">MultiThread</span> </span>&#123;<br><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">final</span> Logger logger = LoggerFactory.getLogger(MultiThread.class);<br><br>    <span class=\"hljs-keyword\">private</span> WhutStudent whutStudent;<br><br><br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">main</span><span class=\"hljs-params\">(String[] args)</span> </span>&#123;<br>        Thread.currentThread().setName(<span class=\"hljs-string\">&quot;Main Thread:&quot;</span>);<br>        String str = <span class=\"hljs-string\">&quot; 1234566&quot;</span>;<br>        logger.debug(<span class=\"hljs-string\">&quot;-------程序启动------------------------&quot;</span>);<br><br>        <span class=\"hljs-comment\">//在类中的写法  继承Thread类</span><br>        Thread threadByThreadInMain = <span class=\"hljs-keyword\">new</span> Thread() &#123;<br>            <span class=\"hljs-keyword\">int</span> j = <span class=\"hljs-number\">1</span>;<br>            <span class=\"hljs-meta\">@Override</span><br>            <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">run</span><span class=\"hljs-params\">()</span> </span>&#123;<br>                Thread.currentThread().setName(<span class=\"hljs-string\">&quot;threadByThreadInMain &quot;</span>);<br>                <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">int</span> j = <span class=\"hljs-number\">0</span>; j &lt; <span class=\"hljs-number\">100</span>; j++) &#123;<br>                    logger.debug(Thread.currentThread().getName() + <span class=\"hljs-string\">&quot; &quot;</span> + j );<br>                    <span class=\"hljs-keyword\">try</span> &#123;<br>                        Thread.sleep(<span class=\"hljs-number\">100</span>);<br>                    &#125; <span class=\"hljs-keyword\">catch</span> (InterruptedException e) &#123;<br>                        e.printStackTrace();<br>                    &#125;<br>                    WhutStudent w=WhutStudent.getInstance();<br>                    logger.debug(w.getStudentId()+<span class=\"hljs-string\">&quot; &quot;</span>+Thread.currentThread().getName());<br>                    w.setStudentId(<span class=\"hljs-string\">&quot;StudentID:threadByThreadInMain&quot;</span>+j);<br><br>                &#125;<br>            &#125;<br>        &#125;;<br><br>        <span class=\"hljs-comment\">//在类中的写法 实现Runnable接口</span><br>        Thread threadByRunnableInMain = <span class=\"hljs-keyword\">new</span> Thread(<span class=\"hljs-keyword\">new</span> Runnable() &#123;<br>            <span class=\"hljs-meta\">@Override</span><br>            <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">run</span><span class=\"hljs-params\">()</span> </span>&#123;<br>                Thread.currentThread().setName(<span class=\"hljs-string\">&quot;threadByRunnableInMain &quot;</span>);<br>                logger.debug(<span class=\"hljs-string\">&quot;new Thread 2&quot;</span>);<span class=\"hljs-comment\">//输出:new Thread 2</span><br>                <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">int</span> j = <span class=\"hljs-number\">0</span>; j &lt; <span class=\"hljs-number\">100</span>; j++) &#123;<br>                    logger.debug(Thread.currentThread().getName() + <span class=\"hljs-string\">&quot; &quot;</span> + j + <span class=\"hljs-string\">&quot;   &quot;</span> );<br>                    <span class=\"hljs-keyword\">try</span> &#123;<br>                        Thread.sleep(<span class=\"hljs-number\">100</span>);<br>                    &#125; <span class=\"hljs-keyword\">catch</span> (InterruptedException e) &#123;<br>                        e.printStackTrace();<br>                    &#125;<br>                    WhutStudent w=WhutStudent.getInstance();<br>                    logger.debug(w.getStudentId()+<span class=\"hljs-string\">&quot; &quot;</span>+Thread.currentThread().getName());<br>                    w.setStudentId(<span class=\"hljs-string\">&quot;StudentID:threadByRunnableInMain&quot;</span>+j);<br><br>                &#125;<br>            &#125;<br>        &#125;);<br><br>        MyThread myThread = <span class=\"hljs-keyword\">new</span> MyThread();<br>        myThread.start();<br><br>        MyRunnable myRunnable = <span class=\"hljs-keyword\">new</span> MyRunnable();<br>        Thread myRunnableThread=<span class=\"hljs-keyword\">new</span> Thread(myRunnable);<br>        myRunnableThread.start();<br><br>        threadByThreadInMain.start();<br><br><br>        threadByRunnableInMain.start();<br><br><br><br>        <span class=\"hljs-comment\">//执行Callable 方式，需要FutureTask 实现实现，用于接收运算结果</span><br>        FutureTask&lt;Integer&gt; futureTask = <span class=\"hljs-keyword\">new</span> FutureTask&lt;Integer&gt;(<span class=\"hljs-keyword\">new</span> MyCallable());<br>        <span class=\"hljs-keyword\">new</span> Thread(futureTask).start();<br>        <span class=\"hljs-comment\">//接收线程运算后的结果</span><br>        <span class=\"hljs-keyword\">try</span> &#123;<br>            Integer sum = futureTask.get();<br>            logger.debug(<span class=\"hljs-string\">&quot;sum=&quot;</span>+sum);<br>        &#125; <span class=\"hljs-keyword\">catch</span> (InterruptedException e) &#123;<br>            e.printStackTrace();<br>        &#125; <span class=\"hljs-keyword\">catch</span> (ExecutionException e) &#123;<br>            e.printStackTrace();<br>        &#125;<br><br><br>    &#125;<br>&#125;<br><br><br></code></pre></td></tr></table></figure>\n\n\n\n\n<h1 id=\"Python\"><a href=\"#Python\" class=\"headerlink\" title=\"Python\"></a>Python</h1><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs python\"><span class=\"hljs-comment\"># -*- coding: utf-8 -*-</span><br><span class=\"hljs-keyword\">import</span> os<br><span class=\"hljs-keyword\">import</span> sys<br><span class=\"hljs-keyword\">import</span> urllib2<br><span class=\"hljs-keyword\">import</span> requests<br><span class=\"hljs-keyword\">import</span> re<br><span class=\"hljs-keyword\">from</span> lxml <span class=\"hljs-keyword\">import</span> etree<br><br><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">StringListSave</span>(<span class=\"hljs-params\">save_path, filename, slist</span>):</span><br>    <span class=\"hljs-keyword\">if</span> <span class=\"hljs-keyword\">not</span> os.path.exists(save_path):<br>        os.makedirs(save_path)<br>    path = save_path+<span class=\"hljs-string\">&quot;/&quot;</span>+filename+<span class=\"hljs-string\">&quot;.txt&quot;</span><br>    <span class=\"hljs-keyword\">with</span> <span class=\"hljs-built_in\">open</span>(path, <span class=\"hljs-string\">&quot;w+&quot;</span>) <span class=\"hljs-keyword\">as</span> fp:<br>        <span class=\"hljs-keyword\">for</span> s <span class=\"hljs-keyword\">in</span> slist:<br>            fp.write(<span class=\"hljs-string\">&quot;%s\\t\\t%s\\n&quot;</span> % (s[<span class=\"hljs-number\">0</span>].encode(<span class=\"hljs-string\">&quot;utf8&quot;</span>), s[<span class=\"hljs-number\">1</span>].encode(<span class=\"hljs-string\">&quot;utf8&quot;</span>)))<br><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">Page_Info</span>(<span class=\"hljs-params\">myPage</span>):</span><br>    <span class=\"hljs-string\">&#x27;&#x27;&#x27;Regex&#x27;&#x27;&#x27;</span><br>    mypage_Info = re.findall(<span class=\"hljs-string\">r&#x27;&lt;div class=&quot;titleBar&quot; id=&quot;.*?&quot;&gt;&lt;h2&gt;(.*?)&lt;/h2&gt;&lt;div class=&quot;more&quot;&gt;&lt;a href=&quot;(.*?)&quot;&gt;.*?&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&#x27;</span>, myPage, re.S)<br>    <span class=\"hljs-keyword\">return</span> mypage_Info<br><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">New_Page_Info</span>(<span class=\"hljs-params\">new_page</span>):</span><br>    <span class=\"hljs-string\">&#x27;&#x27;&#x27;Regex(slowly) or Xpath(fast)&#x27;&#x27;&#x27;</span><br>    <span class=\"hljs-comment\"># new_page_Info = re.findall(r&#x27;&lt;td class=&quot;.*?&quot;&gt;.*?&lt;a href=&quot;(.*?)\\.html&quot;.*?&gt;(.*?)&lt;/a&gt;&lt;/td&gt;&#x27;, new_page, re.S)</span><br>    <span class=\"hljs-comment\"># # new_page_Info = re.findall(r&#x27;&lt;td class=&quot;.*?&quot;&gt;.*?&lt;a href=&quot;(.*?)&quot;&gt;(.*?)&lt;/a&gt;&lt;/td&gt;&#x27;, new_page, re.S) # bugs</span><br>    <span class=\"hljs-comment\"># results = []</span><br>    <span class=\"hljs-comment\"># for url, item in new_page_Info:</span><br>    <span class=\"hljs-comment\">#     results.append((item, url+&quot;.html&quot;))</span><br>    <span class=\"hljs-comment\"># return results</span><br>    dom = etree.HTML(new_page)<br>    new_items = dom.xpath(<span class=\"hljs-string\">&#x27;//tr/td/a/text()&#x27;</span>)<br>    new_urls = dom.xpath(<span class=\"hljs-string\">&#x27;//tr/td/a/@href&#x27;</span>)<br>    <span class=\"hljs-keyword\">assert</span>(<span class=\"hljs-built_in\">len</span>(new_items) == <span class=\"hljs-built_in\">len</span>(new_urls))<br>    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-built_in\">zip</span>(new_items, new_urls)<br><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">Spider</span>(<span class=\"hljs-params\">url</span>):</span><br>    i = <span class=\"hljs-number\">0</span><br>    <span class=\"hljs-built_in\">print</span> <span class=\"hljs-string\">&quot;downloading &quot;</span>, url<br>    myPage = requests.get(url).content.decode(<span class=\"hljs-string\">&quot;gbk&quot;</span>)<br>    <span class=\"hljs-comment\"># myPage = urllib2.urlopen(url).read().decode(&quot;gbk&quot;)</span><br>    myPageResults = Page_Info(myPage)<br>    save_path = <span class=\"hljs-string\">u&quot;网易新闻抓取&quot;</span><br>    filename = <span class=\"hljs-built_in\">str</span>(i)+<span class=\"hljs-string\">&quot;_&quot;</span>+<span class=\"hljs-string\">u&quot;新闻排行榜&quot;</span><br>    StringListSave(save_path, filename, myPageResults)<br>    i += <span class=\"hljs-number\">1</span><br>    <span class=\"hljs-keyword\">for</span> item, url <span class=\"hljs-keyword\">in</span> myPageResults:<br>        <span class=\"hljs-built_in\">print</span> <span class=\"hljs-string\">&quot;downloading &quot;</span>, url<br>        new_page = requests.get(url).content.decode(<span class=\"hljs-string\">&quot;gbk&quot;</span>)<br>        <span class=\"hljs-comment\"># new_page = urllib2.urlopen(url).read().decode(&quot;gbk&quot;)</span><br>        newPageResults = New_Page_Info(new_page)<br>        filename = <span class=\"hljs-built_in\">str</span>(i)+<span class=\"hljs-string\">&quot;_&quot;</span>+item<br>        StringListSave(save_path, filename, newPageResults)<br>        i += <span class=\"hljs-number\">1</span><br><br><br><span class=\"hljs-keyword\">if</span> __name__ == <span class=\"hljs-string\">&#x27;__main__&#x27;</span>:<br>    <span class=\"hljs-built_in\">print</span> <span class=\"hljs-string\">&quot;start&quot;</span><br>    start_url = <span class=\"hljs-string\">&quot;http://news.163.com/rank/&quot;</span><br>    Spider(start_url)<br>    <span class=\"hljs-built_in\">print</span> <span class=\"hljs-string\">&quot;end&quot;</span><br><br></code></pre></td></tr></table></figure>\n\n<h1 id=\"PHP\"><a href=\"#PHP\" class=\"headerlink\" title=\"PHP\"></a>PHP</h1><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs php\"><span class=\"hljs-meta\">&lt;?php</span><br><span class=\"hljs-keyword\">namespace</span> <span class=\"hljs-title\">PhpOffice</span>\\<span class=\"hljs-title\">PhpSpreadsheet</span>;<br><span class=\"hljs-keyword\">use</span> <span class=\"hljs-title\">PhpOffice</span>\\<span class=\"hljs-title\">PhpSpreadsheet</span>\\<span class=\"hljs-title\">Shared</span>\\<span class=\"hljs-title\">File</span>;<br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * Factory to create readers and writers easily.</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> * It is not required to use this class, but it should make it easier to read and write files.</span><br><span class=\"hljs-comment\"> * Especially for reading files with an unknown format.</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">abstract</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">IOFactory</span></span><br><span class=\"hljs-class\"></span>&#123;<br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-built_in\">static</span> <span class=\"hljs-variable\">$readers</span> = [<br>        <span class=\"hljs-string\">&#x27;Xlsx&#x27;</span> =&gt; Reader\\Xlsx::class,<br>        <span class=\"hljs-string\">&#x27;Xls&#x27;</span> =&gt; Reader\\Xls::class,<br>        <span class=\"hljs-string\">&#x27;Xml&#x27;</span> =&gt; Reader\\Xml::class,<br>        <span class=\"hljs-string\">&#x27;Ods&#x27;</span> =&gt; Reader\\Ods::class,<br>        <span class=\"hljs-string\">&#x27;Slk&#x27;</span> =&gt; Reader\\Slk::class,<br>        <span class=\"hljs-string\">&#x27;Gnumeric&#x27;</span> =&gt; Reader\\Gnumeric::class,<br>        <span class=\"hljs-string\">&#x27;Html&#x27;</span> =&gt; Reader\\Html::class,<br>        <span class=\"hljs-string\">&#x27;Csv&#x27;</span> =&gt; Reader\\Csv::class,<br>    ];<br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-built_in\">static</span> <span class=\"hljs-variable\">$writers</span> = [<br>        <span class=\"hljs-string\">&#x27;Xls&#x27;</span> =&gt; Writer\\Xls::class,<br>        <span class=\"hljs-string\">&#x27;Xlsx&#x27;</span> =&gt; Writer\\Xlsx::class,<br>        <span class=\"hljs-string\">&#x27;Ods&#x27;</span> =&gt; Writer\\Ods::class,<br>        <span class=\"hljs-string\">&#x27;Csv&#x27;</span> =&gt; Writer\\Csv::class,<br>        <span class=\"hljs-string\">&#x27;Html&#x27;</span> =&gt; Writer\\Html::class,<br>        <span class=\"hljs-string\">&#x27;Tcpdf&#x27;</span> =&gt; Writer\\Pdf\\Tcpdf::class,<br>        <span class=\"hljs-string\">&#x27;Dompdf&#x27;</span> =&gt; Writer\\Pdf\\Dompdf::class,<br>        <span class=\"hljs-string\">&#x27;Mpdf&#x27;</span> =&gt; Writer\\Pdf\\Mpdf::class,<br>    ];<br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * Create Writer\\IWriter.</span><br><span class=\"hljs-comment\">     *</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> Spreadsheet $spreadsheet</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> string $writerType Example: Xlsx</span><br><span class=\"hljs-comment\">     *</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@throws</span> Writer\\Exception</span><br><span class=\"hljs-comment\">     *</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@return</span> Writer\\IWriter</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-built_in\">static</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">createWriter</span>(<span class=\"hljs-params\">Spreadsheet <span class=\"hljs-variable\">$spreadsheet</span>, <span class=\"hljs-variable\">$writerType</span></span>)</span><br><span class=\"hljs-function\">    </span>&#123;<br>        <span class=\"hljs-keyword\">if</span> (!<span class=\"hljs-keyword\">isset</span>(<span class=\"hljs-built_in\">self</span>::<span class=\"hljs-variable\">$writers</span>[<span class=\"hljs-variable\">$writerType</span>])) &#123;<br>            <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> Writer\\<span class=\"hljs-built_in\">Exception</span>(<span class=\"hljs-string\">&quot;No writer found for type <span class=\"hljs-subst\">$writerType</span>&quot;</span>);<br>        &#125;<br>        <span class=\"hljs-comment\">// Instantiate writer</span><br>        <span class=\"hljs-variable\">$className</span> = <span class=\"hljs-built_in\">self</span>::<span class=\"hljs-variable\">$writers</span>[<span class=\"hljs-variable\">$writerType</span>];<br>        <span class=\"hljs-variable\">$writer</span> = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-variable\">$className</span>(<span class=\"hljs-variable\">$spreadsheet</span>);<br>        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable\">$writer</span>;<br>    &#125;<br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * Create Reader\\IReader.</span><br><span class=\"hljs-comment\">     *</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> string $readerType Example: Xlsx</span><br><span class=\"hljs-comment\">     *</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@throws</span> Reader\\Exception</span><br><span class=\"hljs-comment\">     *</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@return</span> Reader\\IReader</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-built_in\">static</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">createReader</span>(<span class=\"hljs-params\"><span class=\"hljs-variable\">$readerType</span></span>)</span><br><span class=\"hljs-function\">    </span>&#123;<br>        <span class=\"hljs-keyword\">if</span> (!<span class=\"hljs-keyword\">isset</span>(<span class=\"hljs-built_in\">self</span>::<span class=\"hljs-variable\">$readers</span>[<span class=\"hljs-variable\">$readerType</span>])) &#123;<br>            <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> Reader\\<span class=\"hljs-built_in\">Exception</span>(<span class=\"hljs-string\">&quot;No reader found for type <span class=\"hljs-subst\">$readerType</span>&quot;</span>);<br>        &#125;<br>        <span class=\"hljs-comment\">// Instantiate reader</span><br>        <span class=\"hljs-variable\">$className</span> = <span class=\"hljs-built_in\">self</span>::<span class=\"hljs-variable\">$readers</span>[<span class=\"hljs-variable\">$readerType</span>];<br>        <span class=\"hljs-variable\">$reader</span> = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-variable\">$className</span>();<br>        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable\">$reader</span>;<br>    &#125;<br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * Loads Spreadsheet from file using automatic Reader\\IReader resolution.</span><br><span class=\"hljs-comment\">     *</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> string $pFilename The name of the spreadsheet file</span><br><span class=\"hljs-comment\">     *</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@throws</span> Reader\\Exception</span><br><span class=\"hljs-comment\">     *</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@return</span> Spreadsheet</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-built_in\">static</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">load</span>(<span class=\"hljs-params\"><span class=\"hljs-variable\">$pFilename</span></span>)</span><br><span class=\"hljs-function\">    </span>&#123;<br>        <span class=\"hljs-variable\">$reader</span> = <span class=\"hljs-built_in\">self</span>::createReaderForFile(<span class=\"hljs-variable\">$pFilename</span>);<br>        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable\">$reader</span>-&gt;load(<span class=\"hljs-variable\">$pFilename</span>);<br>    &#125;<br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * Identify file type using automatic Reader\\IReader resolution.</span><br><span class=\"hljs-comment\">     *</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> string $pFilename The name of the spreadsheet file to identify</span><br><span class=\"hljs-comment\">     *</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@throws</span> Reader\\Exception</span><br><span class=\"hljs-comment\">     *</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@return</span> string</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-built_in\">static</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">identify</span>(<span class=\"hljs-params\"><span class=\"hljs-variable\">$pFilename</span></span>)</span><br><span class=\"hljs-function\">    </span>&#123;<br>        <span class=\"hljs-variable\">$reader</span> = <span class=\"hljs-built_in\">self</span>::createReaderForFile(<span class=\"hljs-variable\">$pFilename</span>);<br>        <span class=\"hljs-variable\">$className</span> = get_class(<span class=\"hljs-variable\">$reader</span>);<br>        <span class=\"hljs-variable\">$classType</span> = explode(<span class=\"hljs-string\">&#x27;\\\\&#x27;</span>, <span class=\"hljs-variable\">$className</span>);<br>        <span class=\"hljs-keyword\">unset</span>(<span class=\"hljs-variable\">$reader</span>);<br>        <span class=\"hljs-keyword\">return</span> array_pop(<span class=\"hljs-variable\">$classType</span>);<br>    &#125;<br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * Create Reader\\IReader for file using automatic Reader\\IReader resolution.</span><br><span class=\"hljs-comment\">     *</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> string $filename The name of the spreadsheet file</span><br><span class=\"hljs-comment\">     *</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@throws</span> Reader\\Exception</span><br><span class=\"hljs-comment\">     *</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@return</span> Reader\\IReader</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-built_in\">static</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">createReaderForFile</span>(<span class=\"hljs-params\"><span class=\"hljs-variable\">$filename</span></span>)</span><br><span class=\"hljs-function\">    </span>&#123;<br>        File::assertFile(<span class=\"hljs-variable\">$filename</span>);<br>        <span class=\"hljs-comment\">// First, lucky guess by inspecting file extension</span><br>        <span class=\"hljs-variable\">$guessedReader</span> = <span class=\"hljs-built_in\">self</span>::getReaderTypeFromExtension(<span class=\"hljs-variable\">$filename</span>);<br>        <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-variable\">$guessedReader</span> !== <span class=\"hljs-literal\">null</span>) &#123;<br>            <span class=\"hljs-variable\">$reader</span> = <span class=\"hljs-built_in\">self</span>::createReader(<span class=\"hljs-variable\">$guessedReader</span>);<br>            <span class=\"hljs-comment\">// Let&#x27;s see if we are lucky</span><br>            <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">isset</span>(<span class=\"hljs-variable\">$reader</span>) &amp;&amp; <span class=\"hljs-variable\">$reader</span>-&gt;canRead(<span class=\"hljs-variable\">$filename</span>)) &#123;<br>                <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable\">$reader</span>;<br>            &#125;<br>        &#125;<br>        <span class=\"hljs-comment\">// If we reach here then &quot;lucky guess&quot; didn&#x27;t give any result</span><br>        <span class=\"hljs-comment\">// Try walking through all the options in self::$autoResolveClasses</span><br>        <span class=\"hljs-keyword\">foreach</span> (<span class=\"hljs-built_in\">self</span>::<span class=\"hljs-variable\">$readers</span> <span class=\"hljs-keyword\">as</span> <span class=\"hljs-variable\">$type</span> =&gt; <span class=\"hljs-variable\">$class</span>) &#123;<br>            <span class=\"hljs-comment\">//    Ignore our original guess, we know that won&#x27;t work</span><br>            <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-variable\">$type</span> !== <span class=\"hljs-variable\">$guessedReader</span>) &#123;<br>                <span class=\"hljs-variable\">$reader</span> = <span class=\"hljs-built_in\">self</span>::createReader(<span class=\"hljs-variable\">$type</span>);<br>                <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-variable\">$reader</span>-&gt;canRead(<span class=\"hljs-variable\">$filename</span>)) &#123;<br>                    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable\">$reader</span>;<br>                &#125;<br>            &#125;<br>        &#125;<br>        <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> Reader\\<span class=\"hljs-built_in\">Exception</span>(<span class=\"hljs-string\">&#x27;Unable to identify a reader for this file&#x27;</span>);<br>    &#125;<br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * Guess a reader type from the file extension, if any.</span><br><span class=\"hljs-comment\">     *</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> string $filename</span><br><span class=\"hljs-comment\">     *</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@return</span> null|string</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-built_in\">static</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">getReaderTypeFromExtension</span>(<span class=\"hljs-params\"><span class=\"hljs-variable\">$filename</span></span>)</span><br><span class=\"hljs-function\">    </span>&#123;<br>        <span class=\"hljs-variable\">$pathinfo</span> = pathinfo(<span class=\"hljs-variable\">$filename</span>);<br>        <span class=\"hljs-keyword\">if</span> (!<span class=\"hljs-keyword\">isset</span>(<span class=\"hljs-variable\">$pathinfo</span>[<span class=\"hljs-string\">&#x27;extension&#x27;</span>])) &#123;<br>            <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">null</span>;<br>        &#125;<br>        <span class=\"hljs-keyword\">switch</span> (strtolower(<span class=\"hljs-variable\">$pathinfo</span>[<span class=\"hljs-string\">&#x27;extension&#x27;</span>])) &#123;<br>            <span class=\"hljs-keyword\">case</span> <span class=\"hljs-string\">&#x27;xlsx&#x27;</span>: <span class=\"hljs-comment\">// Excel (OfficeOpenXML) Spreadsheet</span><br>            <span class=\"hljs-keyword\">case</span> <span class=\"hljs-string\">&#x27;xlsm&#x27;</span>: <span class=\"hljs-comment\">// Excel (OfficeOpenXML) Macro Spreadsheet (macros will be discarded)</span><br>            <span class=\"hljs-keyword\">case</span> <span class=\"hljs-string\">&#x27;xltx&#x27;</span>: <span class=\"hljs-comment\">// Excel (OfficeOpenXML) Template</span><br>            <span class=\"hljs-keyword\">case</span> <span class=\"hljs-string\">&#x27;xltm&#x27;</span>: <span class=\"hljs-comment\">// Excel (OfficeOpenXML) Macro Template (macros will be discarded)</span><br>                <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">&#x27;Xlsx&#x27;</span>;<br>            <span class=\"hljs-keyword\">case</span> <span class=\"hljs-string\">&#x27;xls&#x27;</span>: <span class=\"hljs-comment\">// Excel (BIFF) Spreadsheet</span><br>            <span class=\"hljs-keyword\">case</span> <span class=\"hljs-string\">&#x27;xlt&#x27;</span>: <span class=\"hljs-comment\">// Excel (BIFF) Template</span><br>                <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">&#x27;Xls&#x27;</span>;<br>            <span class=\"hljs-keyword\">case</span> <span class=\"hljs-string\">&#x27;ods&#x27;</span>: <span class=\"hljs-comment\">// Open/Libre Offic Calc</span><br>            <span class=\"hljs-keyword\">case</span> <span class=\"hljs-string\">&#x27;ots&#x27;</span>: <span class=\"hljs-comment\">// Open/Libre Offic Calc Template</span><br>                <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">&#x27;Ods&#x27;</span>;<br>            <span class=\"hljs-keyword\">case</span> <span class=\"hljs-string\">&#x27;slk&#x27;</span>:<br>                <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">&#x27;Slk&#x27;</span>;<br>            <span class=\"hljs-keyword\">case</span> <span class=\"hljs-string\">&#x27;xml&#x27;</span>: <span class=\"hljs-comment\">// Excel 2003 SpreadSheetML</span><br>                <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">&#x27;Xml&#x27;</span>;<br>            <span class=\"hljs-keyword\">case</span> <span class=\"hljs-string\">&#x27;gnumeric&#x27;</span>:<br>                <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">&#x27;Gnumeric&#x27;</span>;<br>            <span class=\"hljs-keyword\">case</span> <span class=\"hljs-string\">&#x27;htm&#x27;</span>:<br>            <span class=\"hljs-keyword\">case</span> <span class=\"hljs-string\">&#x27;html&#x27;</span>:<br>                <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">&#x27;Html&#x27;</span>;<br>            <span class=\"hljs-keyword\">case</span> <span class=\"hljs-string\">&#x27;csv&#x27;</span>:<br>                <span class=\"hljs-comment\">// Do nothing</span><br>                <span class=\"hljs-comment\">// We must not try to use CSV reader since it loads</span><br>                <span class=\"hljs-comment\">// all files including Excel files etc.</span><br>                <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">null</span>;<br>            <span class=\"hljs-keyword\">default</span>:<br>                <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">null</span>;<br>        &#125;<br>    &#125;<br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * Register a writer with its type and class name.</span><br><span class=\"hljs-comment\">     *</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> string $writerType</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> string $writerClass</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-built_in\">static</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">registerWriter</span>(<span class=\"hljs-params\"><span class=\"hljs-variable\">$writerType</span>, <span class=\"hljs-variable\">$writerClass</span></span>)</span><br><span class=\"hljs-function\">    </span>&#123;<br>        <span class=\"hljs-keyword\">if</span> (!is_a(<span class=\"hljs-variable\">$writerClass</span>, Writer\\IWriter::class, <span class=\"hljs-literal\">true</span>)) &#123;<br>            <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> Writer\\<span class=\"hljs-built_in\">Exception</span>(<span class=\"hljs-string\">&#x27;Registered writers must implement &#x27;</span> . Writer\\IWriter::class);<br>        &#125;<br>        <span class=\"hljs-built_in\">self</span>::<span class=\"hljs-variable\">$writers</span>[<span class=\"hljs-variable\">$writerType</span>] = <span class=\"hljs-variable\">$writerClass</span>;<br>    &#125;<br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * Register a reader with its type and class name.</span><br><span class=\"hljs-comment\">     *</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> string $readerType</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@param</span> string $readerClass</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-built_in\">static</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">registerReader</span>(<span class=\"hljs-params\"><span class=\"hljs-variable\">$readerType</span>, <span class=\"hljs-variable\">$readerClass</span></span>)</span><br><span class=\"hljs-function\">    </span>&#123;<br>        <span class=\"hljs-keyword\">if</span> (!is_a(<span class=\"hljs-variable\">$readerClass</span>, Reader\\IReader::class, <span class=\"hljs-literal\">true</span>)) &#123;<br>            <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> Reader\\<span class=\"hljs-built_in\">Exception</span>(<span class=\"hljs-string\">&#x27;Registered readers must implement &#x27;</span> . Reader\\IReader::class);<br>        &#125;<br>        <span class=\"hljs-built_in\">self</span>::<span class=\"hljs-variable\">$readers</span>[<span class=\"hljs-variable\">$readerType</span>] = <span class=\"hljs-variable\">$readerClass</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>\n\n\n\n<h1 id=\"Go\"><a href=\"#Go\" class=\"headerlink\" title=\"Go\"></a>Go</h1><figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs go\"><span class=\"hljs-keyword\">package</span> list<br><br><span class=\"hljs-comment\">// Element is an element of a linked list.</span><br><span class=\"hljs-keyword\">type</span> Element <span class=\"hljs-keyword\">struct</span> &#123;<br>\t<span class=\"hljs-comment\">// Next and previous pointers in the doubly-linked list of elements.</span><br>\t<span class=\"hljs-comment\">// To simplify the implementation, internally a list l is implemented</span><br>\t<span class=\"hljs-comment\">// as a ring, such that &amp;l.root is both the next element of the last</span><br>\t<span class=\"hljs-comment\">// list element (l.Back()) and the previous element of the first list</span><br>\t<span class=\"hljs-comment\">// element (l.Front()).</span><br>\tnext, prev *Element<br><br>\t<span class=\"hljs-comment\">// The list to which this element belongs.</span><br>\tlist *List<br><br>\t<span class=\"hljs-comment\">// The value stored with this element.</span><br>\tValue <span class=\"hljs-keyword\">interface</span>&#123;&#125;<br>&#125;<br><br><span class=\"hljs-comment\">// Next returns the next list element or nil.</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">func</span> <span class=\"hljs-params\">(e *Element)</span> <span class=\"hljs-title\">Next</span><span class=\"hljs-params\">()</span> *<span class=\"hljs-title\">Element</span></span> &#123;<br>\t<span class=\"hljs-keyword\">if</span> p := e.next; e.list != <span class=\"hljs-literal\">nil</span> &amp;&amp; p != &amp;e.list.root &#123;<br>\t\t<span class=\"hljs-keyword\">return</span> p<br>\t&#125;<br>\t<span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">nil</span><br>&#125;<br><br><span class=\"hljs-comment\">// Prev returns the previous list element or nil.</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">func</span> <span class=\"hljs-params\">(e *Element)</span> <span class=\"hljs-title\">Prev</span><span class=\"hljs-params\">()</span> *<span class=\"hljs-title\">Element</span></span> &#123;<br>\t<span class=\"hljs-keyword\">if</span> p := e.prev; e.list != <span class=\"hljs-literal\">nil</span> &amp;&amp; p != &amp;e.list.root &#123;<br>\t\t<span class=\"hljs-keyword\">return</span> p<br>\t&#125;<br>\t<span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">nil</span><br>&#125;<br><br><span class=\"hljs-comment\">// List represents a doubly linked list.</span><br><span class=\"hljs-comment\">// The zero value for List is an empty list ready to use.</span><br><span class=\"hljs-keyword\">type</span> List <span class=\"hljs-keyword\">struct</span> &#123;<br>\troot Element <span class=\"hljs-comment\">// sentinel list element, only &amp;root, root.prev, and root.next are used</span><br>\t<span class=\"hljs-built_in\">len</span>  <span class=\"hljs-keyword\">int</span>     <span class=\"hljs-comment\">// current list length excluding (this) sentinel element</span><br>&#125;<br><br><span class=\"hljs-comment\">// Init initializes or clears list l.</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">func</span> <span class=\"hljs-params\">(l *List)</span> <span class=\"hljs-title\">Init</span><span class=\"hljs-params\">()</span> *<span class=\"hljs-title\">List</span></span> &#123;<br>\tl.root.next = &amp;l.root<br>\tl.root.prev = &amp;l.root<br>\tl.<span class=\"hljs-built_in\">len</span> = <span class=\"hljs-number\">0</span><br>\t<span class=\"hljs-keyword\">return</span> l<br>&#125;<br><br><span class=\"hljs-comment\">// New returns an initialized list.</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">func</span> <span class=\"hljs-title\">New</span><span class=\"hljs-params\">()</span> *<span class=\"hljs-title\">List</span></span> &#123; <span class=\"hljs-keyword\">return</span> <span class=\"hljs-built_in\">new</span>(List).Init() &#125;<br><br><span class=\"hljs-comment\">// Len returns the number of elements of list l.</span><br><span class=\"hljs-comment\">// The complexity is O(1).</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">func</span> <span class=\"hljs-params\">(l *List)</span> <span class=\"hljs-title\">Len</span><span class=\"hljs-params\">()</span> <span class=\"hljs-title\">int</span></span> &#123; <span class=\"hljs-keyword\">return</span> l.<span class=\"hljs-built_in\">len</span> &#125;<br><br><span class=\"hljs-comment\">// Front returns the first element of list l or nil if the list is empty.</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">func</span> <span class=\"hljs-params\">(l *List)</span> <span class=\"hljs-title\">Front</span><span class=\"hljs-params\">()</span> *<span class=\"hljs-title\">Element</span></span> &#123;<br>\t<span class=\"hljs-keyword\">if</span> l.<span class=\"hljs-built_in\">len</span> == <span class=\"hljs-number\">0</span> &#123;<br>\t\t<span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">nil</span><br>\t&#125;<br>\t<span class=\"hljs-keyword\">return</span> l.root.next<br>&#125;<br><br><span class=\"hljs-comment\">// Back returns the last element of list l or nil if the list is empty.</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">func</span> <span class=\"hljs-params\">(l *List)</span> <span class=\"hljs-title\">Back</span><span class=\"hljs-params\">()</span> *<span class=\"hljs-title\">Element</span></span> &#123;<br>\t<span class=\"hljs-keyword\">if</span> l.<span class=\"hljs-built_in\">len</span> == <span class=\"hljs-number\">0</span> &#123;<br>\t\t<span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">nil</span><br>\t&#125;<br>\t<span class=\"hljs-keyword\">return</span> l.root.prev<br>&#125;<br><br><span class=\"hljs-comment\">// lazyInit lazily initializes a zero List value.</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">func</span> <span class=\"hljs-params\">(l *List)</span> <span class=\"hljs-title\">lazyInit</span><span class=\"hljs-params\">()</span></span> &#123;<br>\t<span class=\"hljs-keyword\">if</span> l.root.next == <span class=\"hljs-literal\">nil</span> &#123;<br>\t\tl.Init()<br>\t&#125;<br>&#125;<br><br><span class=\"hljs-comment\">// insert inserts e after at, increments l.len, and returns e.</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">func</span> <span class=\"hljs-params\">(l *List)</span> <span class=\"hljs-title\">insert</span><span class=\"hljs-params\">(e, at *Element)</span> *<span class=\"hljs-title\">Element</span></span> &#123;<br>\tn := at.next<br>\tat.next = e<br>\te.prev = at<br>\te.next = n<br>\tn.prev = e<br>\te.list = l<br>\tl.<span class=\"hljs-built_in\">len</span>++<br>\t<span class=\"hljs-keyword\">return</span> e<br>&#125;<br><br><span class=\"hljs-comment\">// insertValue is a convenience wrapper for insert(&amp;Element&#123;Value: v&#125;, at).</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">func</span> <span class=\"hljs-params\">(l *List)</span> <span class=\"hljs-title\">insertValue</span><span class=\"hljs-params\">(v <span class=\"hljs-keyword\">interface</span>&#123;&#125;, at *Element)</span> *<span class=\"hljs-title\">Element</span></span> &#123;<br>\t<span class=\"hljs-keyword\">return</span> l.insert(&amp;Element&#123;Value: v&#125;, at)<br>&#125;<br><br><span class=\"hljs-comment\">// remove removes e from its list, decrements l.len, and returns e.</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">func</span> <span class=\"hljs-params\">(l *List)</span> <span class=\"hljs-title\">remove</span><span class=\"hljs-params\">(e *Element)</span> *<span class=\"hljs-title\">Element</span></span> &#123;<br>\te.prev.next = e.next<br>\te.next.prev = e.prev<br>\te.next = <span class=\"hljs-literal\">nil</span> <span class=\"hljs-comment\">// avoid memory leaks</span><br>\te.prev = <span class=\"hljs-literal\">nil</span> <span class=\"hljs-comment\">// avoid memory leaks</span><br>\te.list = <span class=\"hljs-literal\">nil</span><br>\tl.<span class=\"hljs-built_in\">len</span>--<br>\t<span class=\"hljs-keyword\">return</span> e<br>&#125;<br><br><span class=\"hljs-comment\">// Remove removes e from l if e is an element of list l.</span><br><span class=\"hljs-comment\">// It returns the element value e.Value.</span><br><span class=\"hljs-comment\">// The element must not be nil.</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">func</span> <span class=\"hljs-params\">(l *List)</span> <span class=\"hljs-title\">Remove</span><span class=\"hljs-params\">(e *Element)</span> <span class=\"hljs-title\">interface</span></span>&#123;&#125; &#123;<br>\t<span class=\"hljs-keyword\">if</span> e.list == l &#123;<br>\t\t<span class=\"hljs-comment\">// if e.list == l, l must have been initialized when e was inserted</span><br>\t\t<span class=\"hljs-comment\">// in l or l == nil (e is a zero Element) and l.remove will crash</span><br>\t\tl.remove(e)<br>\t&#125;<br>\t<span class=\"hljs-keyword\">return</span> e.Value<br>&#125;<br><br><span class=\"hljs-comment\">// PushFront inserts a new element e with value v at the front of list l and returns e.</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">func</span> <span class=\"hljs-params\">(l *List)</span> <span class=\"hljs-title\">PushFront</span><span class=\"hljs-params\">(v <span class=\"hljs-keyword\">interface</span>&#123;&#125;)</span> *<span class=\"hljs-title\">Element</span></span> &#123;<br>\tl.lazyInit()<br>\t<span class=\"hljs-keyword\">return</span> l.insertValue(v, &amp;l.root)<br>&#125;<br><br><span class=\"hljs-comment\">// PushBack inserts a new element e with value v at the back of list l and returns e.</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">func</span> <span class=\"hljs-params\">(l *List)</span> <span class=\"hljs-title\">PushBack</span><span class=\"hljs-params\">(v <span class=\"hljs-keyword\">interface</span>&#123;&#125;)</span> *<span class=\"hljs-title\">Element</span></span> &#123;<br>\tl.lazyInit()<br>\t<span class=\"hljs-keyword\">return</span> l.insertValue(v, l.root.prev)<br>&#125;<br><br><span class=\"hljs-comment\">// InsertBefore inserts a new element e with value v immediately before mark and returns e.</span><br><span class=\"hljs-comment\">// If mark is not an element of l, the list is not modified.</span><br><span class=\"hljs-comment\">// The mark must not be nil.</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">func</span> <span class=\"hljs-params\">(l *List)</span> <span class=\"hljs-title\">InsertBefore</span><span class=\"hljs-params\">(v <span class=\"hljs-keyword\">interface</span>&#123;&#125;, mark *Element)</span> *<span class=\"hljs-title\">Element</span></span> &#123;<br>\t<span class=\"hljs-keyword\">if</span> mark.list != l &#123;<br>\t\t<span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">nil</span><br>\t&#125;<br>\t<span class=\"hljs-comment\">// see comment in List.Remove about initialization of l</span><br>\t<span class=\"hljs-keyword\">return</span> l.insertValue(v, mark.prev)<br>&#125;<br><br><span class=\"hljs-comment\">// InsertAfter inserts a new element e with value v immediately after mark and returns e.</span><br><span class=\"hljs-comment\">// If mark is not an element of l, the list is not modified.</span><br><span class=\"hljs-comment\">// The mark must not be nil.</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">func</span> <span class=\"hljs-params\">(l *List)</span> <span class=\"hljs-title\">InsertAfter</span><span class=\"hljs-params\">(v <span class=\"hljs-keyword\">interface</span>&#123;&#125;, mark *Element)</span> *<span class=\"hljs-title\">Element</span></span> &#123;<br>\t<span class=\"hljs-keyword\">if</span> mark.list != l &#123;<br>\t\t<span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">nil</span><br>\t&#125;<br>\t<span class=\"hljs-comment\">// see comment in List.Remove about initialization of l</span><br>\t<span class=\"hljs-keyword\">return</span> l.insertValue(v, mark)<br>&#125;<br><br><span class=\"hljs-comment\">// MoveToFront moves element e to the front of list l.</span><br><span class=\"hljs-comment\">// If e is not an element of l, the list is not modified.</span><br><span class=\"hljs-comment\">// The element must not be nil.</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">func</span> <span class=\"hljs-params\">(l *List)</span> <span class=\"hljs-title\">MoveToFront</span><span class=\"hljs-params\">(e *Element)</span></span> &#123;<br>\t<span class=\"hljs-keyword\">if</span> e.list != l || l.root.next == e &#123;<br>\t\t<span class=\"hljs-keyword\">return</span><br>\t&#125;<br>\t<span class=\"hljs-comment\">// see comment in List.Remove about initialization of l</span><br>\tl.insert(l.remove(e), &amp;l.root)<br>&#125;<br><br><span class=\"hljs-comment\">// MoveToBack moves element e to the back of list l.</span><br><span class=\"hljs-comment\">// If e is not an element of l, the list is not modified.</span><br><span class=\"hljs-comment\">// The element must not be nil.</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">func</span> <span class=\"hljs-params\">(l *List)</span> <span class=\"hljs-title\">MoveToBack</span><span class=\"hljs-params\">(e *Element)</span></span> &#123;<br>\t<span class=\"hljs-keyword\">if</span> e.list != l || l.root.prev == e &#123;<br>\t\t<span class=\"hljs-keyword\">return</span><br>\t&#125;<br>\t<span class=\"hljs-comment\">// see comment in List.Remove about initialization of l</span><br>\tl.insert(l.remove(e), l.root.prev)<br>&#125;<br><br><span class=\"hljs-comment\">// MoveBefore moves element e to its new position before mark.</span><br><span class=\"hljs-comment\">// If e or mark is not an element of l, or e == mark, the list is not modified.</span><br><span class=\"hljs-comment\">// The element and mark must not be nil.</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">func</span> <span class=\"hljs-params\">(l *List)</span> <span class=\"hljs-title\">MoveBefore</span><span class=\"hljs-params\">(e, mark *Element)</span></span> &#123;<br>\t<span class=\"hljs-keyword\">if</span> e.list != l || e == mark || mark.list != l &#123;<br>\t\t<span class=\"hljs-keyword\">return</span><br>\t&#125;<br>\tl.insert(l.remove(e), mark.prev)<br>&#125;<br><br><span class=\"hljs-comment\">// MoveAfter moves element e to its new position after mark.</span><br><span class=\"hljs-comment\">// If e or mark is not an element of l, or e == mark, the list is not modified.</span><br><span class=\"hljs-comment\">// The element and mark must not be nil.</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">func</span> <span class=\"hljs-params\">(l *List)</span> <span class=\"hljs-title\">MoveAfter</span><span class=\"hljs-params\">(e, mark *Element)</span></span> &#123;<br>\t<span class=\"hljs-keyword\">if</span> e.list != l || e == mark || mark.list != l &#123;<br>\t\t<span class=\"hljs-keyword\">return</span><br>\t&#125;<br>\tl.insert(l.remove(e), mark)<br>&#125;<br><br><span class=\"hljs-comment\">// PushBackList inserts a copy of an other list at the back of list l.</span><br><span class=\"hljs-comment\">// The lists l and other may be the same. They must not be nil.</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">func</span> <span class=\"hljs-params\">(l *List)</span> <span class=\"hljs-title\">PushBackList</span><span class=\"hljs-params\">(other *List)</span></span> &#123;<br>\tl.lazyInit()<br>\t<span class=\"hljs-keyword\">for</span> i, e := other.Len(), other.Front(); i &gt; <span class=\"hljs-number\">0</span>; i, e = i<span class=\"hljs-number\">-1</span>, e.Next() &#123;<br>\t\tl.insertValue(e.Value, l.root.prev)<br>\t&#125;<br>&#125;<br><br><span class=\"hljs-comment\">// PushFrontList inserts a copy of an other list at the front of list l.</span><br><span class=\"hljs-comment\">// The lists l and other may be the same. They must not be nil.</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">func</span> <span class=\"hljs-params\">(l *List)</span> <span class=\"hljs-title\">PushFrontList</span><span class=\"hljs-params\">(other *List)</span></span> &#123;<br>\tl.lazyInit()<br>\t<span class=\"hljs-keyword\">for</span> i, e := other.Len(), other.Back(); i &gt; <span class=\"hljs-number\">0</span>; i, e = i<span class=\"hljs-number\">-1</span>, e.Prev() &#123;<br>\t\tl.insertValue(e.Value, &amp;l.root)<br>\t&#125;<br>&#125;<br></code></pre></td></tr></table></figure>\n\n\n<h1 id=\"C\"><a href=\"#C\" class=\"headerlink\" title=\"C++\"></a>C++</h1><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs c++\"><span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">include</span> <span class=\"hljs-meta-string\">&lt;grpc/support/time.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">include</span> <span class=\"hljs-meta-string\">&lt;grpcpp/support/config.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">include</span> <span class=\"hljs-meta-string\">&lt;grpcpp/support/time.h&gt;</span></span><br><br><span class=\"hljs-keyword\">using</span> <span class=\"hljs-built_in\">std</span>::chrono::duration_cast;<br><span class=\"hljs-keyword\">using</span> <span class=\"hljs-built_in\">std</span>::chrono::high_resolution_clock;<br><span class=\"hljs-keyword\">using</span> <span class=\"hljs-built_in\">std</span>::chrono::nanoseconds;<br><span class=\"hljs-keyword\">using</span> <span class=\"hljs-built_in\">std</span>::chrono::seconds;<br><span class=\"hljs-keyword\">using</span> <span class=\"hljs-built_in\">std</span>::chrono::system_clock;<br><br><span class=\"hljs-keyword\">namespace</span> grpc &#123;<br><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">Timepoint2Timespec</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">const</span> system_clock::time_point&amp; from,</span></span><br><span class=\"hljs-function\"><span class=\"hljs-params\">                        gpr_timespec* to)</span> </span>&#123;<br>  system_clock::duration deadline = from.time_since_epoch();<br>  seconds secs = duration_cast&lt;seconds&gt;(deadline);<br>  <span class=\"hljs-keyword\">if</span> (from == system_clock::time_point::max() ||<br>      secs.count() &gt;= gpr_inf_future(GPR_CLOCK_REALTIME).tv_sec ||<br>      secs.count() &lt; <span class=\"hljs-number\">0</span>) &#123;<br>    *to = gpr_inf_future(GPR_CLOCK_REALTIME);<br>    <span class=\"hljs-keyword\">return</span>;<br>  &#125;<br>  nanoseconds nsecs = duration_cast&lt;nanoseconds&gt;(deadline - secs);<br>  to-&gt;tv_sec = <span class=\"hljs-keyword\">static_cast</span>&lt;<span class=\"hljs-keyword\">int64_t</span>&gt;(secs.count());<br>  to-&gt;tv_nsec = <span class=\"hljs-keyword\">static_cast</span>&lt;<span class=\"hljs-keyword\">int32_t</span>&gt;(nsecs.count());<br>  to-&gt;clock_type = GPR_CLOCK_REALTIME;<br>&#125;<br><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">TimepointHR2Timespec</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">const</span> high_resolution_clock::time_point&amp; from,</span></span><br><span class=\"hljs-function\"><span class=\"hljs-params\">                          gpr_timespec* to)</span> </span>&#123;<br>  high_resolution_clock::duration deadline = from.time_since_epoch();<br>  seconds secs = duration_cast&lt;seconds&gt;(deadline);<br>  <span class=\"hljs-keyword\">if</span> (from == high_resolution_clock::time_point::max() ||<br>      secs.count() &gt;= gpr_inf_future(GPR_CLOCK_REALTIME).tv_sec ||<br>      secs.count() &lt; <span class=\"hljs-number\">0</span>) &#123;<br>    *to = gpr_inf_future(GPR_CLOCK_REALTIME);<br>    <span class=\"hljs-keyword\">return</span>;<br>  &#125;<br>  nanoseconds nsecs = duration_cast&lt;nanoseconds&gt;(deadline - secs);<br>  to-&gt;tv_sec = <span class=\"hljs-keyword\">static_cast</span>&lt;<span class=\"hljs-keyword\">int64_t</span>&gt;(secs.count());<br>  to-&gt;tv_nsec = <span class=\"hljs-keyword\">static_cast</span>&lt;<span class=\"hljs-keyword\">int32_t</span>&gt;(nsecs.count());<br>  to-&gt;clock_type = GPR_CLOCK_REALTIME;<br>&#125;<br><br><span class=\"hljs-function\">system_clock::time_point <span class=\"hljs-title\">Timespec2Timepoint</span><span class=\"hljs-params\">(gpr_timespec t)</span> </span>&#123;<br>  <span class=\"hljs-keyword\">if</span> (gpr_time_cmp(t, gpr_inf_future(t.clock_type)) == <span class=\"hljs-number\">0</span>) &#123;<br>    <span class=\"hljs-keyword\">return</span> system_clock::time_point::max();<br>  &#125;<br>  t = gpr_convert_clock_type(t, GPR_CLOCK_REALTIME);<br>  system_clock::time_point tp;<br>  tp += duration_cast&lt;system_clock::time_point::duration&gt;(seconds(t.tv_sec));<br>  tp +=<br>      duration_cast&lt;system_clock::time_point::duration&gt;(nanoseconds(t.tv_nsec));<br>  <span class=\"hljs-keyword\">return</span> tp;<br>&#125;<br><br>&#125;  <span class=\"hljs-comment\">// namespace grpc</span><br></code></pre></td></tr></table></figure>\n\n\n<h1 id=\"C-1\"><a href=\"#C-1\" class=\"headerlink\" title=\"C\"></a>C</h1><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs c\"><span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">include</span> <span class=\"hljs-meta-string\">&lt;stdio.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">include</span> <span class=\"hljs-meta-string\">&lt;stdlib.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">include</span> <span class=\"hljs-meta-string\">&lt;time.h&gt;</span></span><br><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">shellSort</span><span class=\"hljs-params\">(<span class=\"hljs-keyword\">int</span> <span class=\"hljs-built_in\">array</span>[], <span class=\"hljs-keyword\">int</span> value)</span></span>&#123;<br>  <span class=\"hljs-keyword\">int</span> i = value;<br>  <span class=\"hljs-keyword\">int</span> j, k, tmp;<br>  <span class=\"hljs-keyword\">for</span> (i = value / <span class=\"hljs-number\">2</span>; i &gt; <span class=\"hljs-number\">0</span>; i = i / <span class=\"hljs-number\">2</span>)&#123;<br>    <span class=\"hljs-keyword\">for</span> (j = i; j &lt; value; j++)&#123;<br>      <span class=\"hljs-keyword\">for</span>(k = j - i; k &gt;= <span class=\"hljs-number\">0</span>; k = k - i)&#123;<br>        <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-built_in\">array</span>[k+i] &gt;= <span class=\"hljs-built_in\">array</span>[k])&#123;<br>          <span class=\"hljs-keyword\">break</span>;<br>        &#125;<br>        <span class=\"hljs-keyword\">else</span>&#123;<br>          tmp = <span class=\"hljs-built_in\">array</span>[k];<br>          <span class=\"hljs-built_in\">array</span>[k] = <span class=\"hljs-built_in\">array</span>[k+i];<br>          <span class=\"hljs-built_in\">array</span>[k+i] = tmp;<br>        &#125;<br>      &#125;<br>    &#125;<br>  &#125;<br>&#125;<br><br><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">int</span> <span class=\"hljs-title\">main</span><span class=\"hljs-params\">()</span></span>&#123;<br>    <span class=\"hljs-keyword\">int</span> <span class=\"hljs-built_in\">array</span>[<span class=\"hljs-number\">20</span>];<br>    <span class=\"hljs-keyword\">int</span> range = <span class=\"hljs-number\">500</span>;<br>    <span class=\"hljs-keyword\">for</span>(<span class=\"hljs-keyword\">int</span> i = <span class=\"hljs-number\">0</span>; i &lt; <span class=\"hljs-number\">100</span>; i++)&#123;<br>     <span class=\"hljs-built_in\">array</span>[i] = rand() % range + <span class=\"hljs-number\">1</span>;<br>    &#125;<br>    <span class=\"hljs-keyword\">int</span> size = <span class=\"hljs-keyword\">sizeof</span> <span class=\"hljs-built_in\">array</span> / <span class=\"hljs-keyword\">sizeof</span> <span class=\"hljs-built_in\">array</span>[<span class=\"hljs-number\">0</span>];<br><br><br><br>    <span class=\"hljs-keyword\">clock_t</span> start = clock();<br>    shellSort(<span class=\"hljs-built_in\">array</span>,size);<br>    <span class=\"hljs-keyword\">clock_t</span> end = clock();<br>    <span class=\"hljs-keyword\">double</span> time_spent = (<span class=\"hljs-keyword\">double</span>)(end - start) / CLOCKS_PER_SEC;<br><br><br>    <span class=\"hljs-built_in\">printf</span>(<span class=\"hljs-string\">&quot;Data Sorted\\n&quot;</span>);<br>    <span class=\"hljs-built_in\">printf</span>(<span class=\"hljs-string\">&quot;%s\\n&quot;</span>, <span class=\"hljs-string\">&quot;Shell Sort Big O Notation:\\n--&gt; Best Case: O(n log(n))\\n--&gt; Average Case: depends on gap sequence\\n--&gt; Worst Case: O(n)\\n&quot;</span>);<br>    <span class=\"hljs-built_in\">printf</span>(<span class=\"hljs-string\">&quot;Time spent sorting: %f\\n&quot;</span>, time_spent);<br><br>  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-number\">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>\n\n\n\n<h1 id=\"C-C\"><a href=\"#C-C\" class=\"headerlink\" title=\"C#    #  C#\"></a>C#    #  C#</h1><figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br><span class=\"line\">252</span><br><span class=\"line\">253</span><br><span class=\"line\">254</span><br><span class=\"line\">255</span><br><span class=\"line\">256</span><br><span class=\"line\">257</span><br><span class=\"line\">258</span><br><span class=\"line\">259</span><br><span class=\"line\">260</span><br><span class=\"line\">261</span><br><span class=\"line\">262</span><br><span class=\"line\">263</span><br><span class=\"line\">264</span><br><span class=\"line\">265</span><br><span class=\"line\">266</span><br><span class=\"line\">267</span><br><span class=\"line\">268</span><br><span class=\"line\">269</span><br><span class=\"line\">270</span><br><span class=\"line\">271</span><br><span class=\"line\">272</span><br><span class=\"line\">273</span><br><span class=\"line\">274</span><br><span class=\"line\">275</span><br><span class=\"line\">276</span><br><span class=\"line\">277</span><br><span class=\"line\">278</span><br><span class=\"line\">279</span><br><span class=\"line\">280</span><br><span class=\"line\">281</span><br><span class=\"line\">282</span><br><span class=\"line\">283</span><br><span class=\"line\">284</span><br><span class=\"line\">285</span><br><span class=\"line\">286</span><br><span class=\"line\">287</span><br><span class=\"line\">288</span><br><span class=\"line\">289</span><br><span class=\"line\">290</span><br><span class=\"line\">291</span><br><span class=\"line\">292</span><br><span class=\"line\">293</span><br><span class=\"line\">294</span><br><span class=\"line\">295</span><br><span class=\"line\">296</span><br><span class=\"line\">297</span><br><span class=\"line\">298</span><br><span class=\"line\">299</span><br><span class=\"line\">300</span><br><span class=\"line\">301</span><br><span class=\"line\">302</span><br><span class=\"line\">303</span><br><span class=\"line\">304</span><br><span class=\"line\">305</span><br><span class=\"line\">306</span><br><span class=\"line\">307</span><br><span class=\"line\">308</span><br><span class=\"line\">309</span><br><span class=\"line\">310</span><br><span class=\"line\">311</span><br><span class=\"line\">312</span><br><span class=\"line\">313</span><br><span class=\"line\">314</span><br><span class=\"line\">315</span><br><span class=\"line\">316</span><br><span class=\"line\">317</span><br><span class=\"line\">318</span><br><span class=\"line\">319</span><br><span class=\"line\">320</span><br><span class=\"line\">321</span><br><span class=\"line\">322</span><br><span class=\"line\">323</span><br><span class=\"line\">324</span><br><span class=\"line\">325</span><br><span class=\"line\">326</span><br><span class=\"line\">327</span><br><span class=\"line\">328</span><br><span class=\"line\">329</span><br><span class=\"line\">330</span><br><span class=\"line\">331</span><br><span class=\"line\">332</span><br><span class=\"line\">333</span><br><span class=\"line\">334</span><br><span class=\"line\">335</span><br><span class=\"line\">336</span><br><span class=\"line\">337</span><br><span class=\"line\">338</span><br><span class=\"line\">339</span><br><span class=\"line\">340</span><br><span class=\"line\">341</span><br><span class=\"line\">342</span><br><span class=\"line\">343</span><br><span class=\"line\">344</span><br><span class=\"line\">345</span><br><span class=\"line\">346</span><br><span class=\"line\">347</span><br><span class=\"line\">348</span><br><span class=\"line\">349</span><br><span class=\"line\">350</span><br><span class=\"line\">351</span><br><span class=\"line\">352</span><br><span class=\"line\">353</span><br><span class=\"line\">354</span><br><span class=\"line\">355</span><br><span class=\"line\">356</span><br><span class=\"line\">357</span><br><span class=\"line\">358</span><br><span class=\"line\">359</span><br><span class=\"line\">360</span><br><span class=\"line\">361</span><br><span class=\"line\">362</span><br><span class=\"line\">363</span><br><span class=\"line\">364</span><br><span class=\"line\">365</span><br><span class=\"line\">366</span><br><span class=\"line\">367</span><br><span class=\"line\">368</span><br><span class=\"line\">369</span><br><span class=\"line\">370</span><br><span class=\"line\">371</span><br><span class=\"line\">372</span><br><span class=\"line\">373</span><br><span class=\"line\">374</span><br><span class=\"line\">375</span><br><span class=\"line\">376</span><br><span class=\"line\">377</span><br><span class=\"line\">378</span><br><span class=\"line\">379</span><br><span class=\"line\">380</span><br><span class=\"line\">381</span><br><span class=\"line\">382</span><br><span class=\"line\">383</span><br><span class=\"line\">384</span><br><span class=\"line\">385</span><br><span class=\"line\">386</span><br><span class=\"line\">387</span><br><span class=\"line\">388</span><br><span class=\"line\">389</span><br><span class=\"line\">390</span><br><span class=\"line\">391</span><br><span class=\"line\">392</span><br><span class=\"line\">393</span><br><span class=\"line\">394</span><br><span class=\"line\">395</span><br><span class=\"line\">396</span><br><span class=\"line\">397</span><br><span class=\"line\">398</span><br><span class=\"line\">399</span><br><span class=\"line\">400</span><br><span class=\"line\">401</span><br><span class=\"line\">402</span><br><span class=\"line\">403</span><br><span class=\"line\">404</span><br><span class=\"line\">405</span><br><span class=\"line\">406</span><br><span class=\"line\">407</span><br><span class=\"line\">408</span><br><span class=\"line\">409</span><br><span class=\"line\">410</span><br><span class=\"line\">411</span><br><span class=\"line\">412</span><br><span class=\"line\">413</span><br><span class=\"line\">414</span><br><span class=\"line\">415</span><br><span class=\"line\">416</span><br><span class=\"line\">417</span><br><span class=\"line\">418</span><br><span class=\"line\">419</span><br><span class=\"line\">420</span><br><span class=\"line\">421</span><br><span class=\"line\">422</span><br><span class=\"line\">423</span><br><span class=\"line\">424</span><br><span class=\"line\">425</span><br><span class=\"line\">426</span><br><span class=\"line\">427</span><br><span class=\"line\">428</span><br><span class=\"line\">429</span><br><span class=\"line\">430</span><br><span class=\"line\">431</span><br><span class=\"line\">432</span><br><span class=\"line\">433</span><br><span class=\"line\">434</span><br><span class=\"line\">435</span><br><span class=\"line\">436</span><br><span class=\"line\">437</span><br><span class=\"line\">438</span><br><span class=\"line\">439</span><br><span class=\"line\">440</span><br><span class=\"line\">441</span><br><span class=\"line\">442</span><br><span class=\"line\">443</span><br><span class=\"line\">444</span><br><span class=\"line\">445</span><br><span class=\"line\">446</span><br><span class=\"line\">447</span><br><span class=\"line\">448</span><br><span class=\"line\">449</span><br><span class=\"line\">450</span><br><span class=\"line\">451</span><br><span class=\"line\">452</span><br><span class=\"line\">453</span><br><span class=\"line\">454</span><br><span class=\"line\">455</span><br><span class=\"line\">456</span><br><span class=\"line\">457</span><br><span class=\"line\">458</span><br><span class=\"line\">459</span><br><span class=\"line\">460</span><br><span class=\"line\">461</span><br><span class=\"line\">462</span><br><span class=\"line\">463</span><br><span class=\"line\">464</span><br><span class=\"line\">465</span><br><span class=\"line\">466</span><br><span class=\"line\">467</span><br><span class=\"line\">468</span><br><span class=\"line\">469</span><br><span class=\"line\">470</span><br><span class=\"line\">471</span><br><span class=\"line\">472</span><br><span class=\"line\">473</span><br><span class=\"line\">474</span><br><span class=\"line\">475</span><br><span class=\"line\">476</span><br><span class=\"line\">477</span><br><span class=\"line\">478</span><br><span class=\"line\">479</span><br><span class=\"line\">480</span><br><span class=\"line\">481</span><br><span class=\"line\">482</span><br><span class=\"line\">483</span><br><span class=\"line\">484</span><br><span class=\"line\">485</span><br><span class=\"line\">486</span><br><span class=\"line\">487</span><br><span class=\"line\">488</span><br><span class=\"line\">489</span><br><span class=\"line\">490</span><br><span class=\"line\">491</span><br><span class=\"line\">492</span><br><span class=\"line\">493</span><br><span class=\"line\">494</span><br><span class=\"line\">495</span><br><span class=\"line\">496</span><br><span class=\"line\">497</span><br><span class=\"line\">498</span><br><span class=\"line\">499</span><br><span class=\"line\">500</span><br><span class=\"line\">501</span><br><span class=\"line\">502</span><br><span class=\"line\">503</span><br><span class=\"line\">504</span><br><span class=\"line\">505</span><br><span class=\"line\">506</span><br><span class=\"line\">507</span><br><span class=\"line\">508</span><br><span class=\"line\">509</span><br><span class=\"line\">510</span><br><span class=\"line\">511</span><br><span class=\"line\">512</span><br><span class=\"line\">513</span><br><span class=\"line\">514</span><br><span class=\"line\">515</span><br><span class=\"line\">516</span><br><span class=\"line\">517</span><br><span class=\"line\">518</span><br><span class=\"line\">519</span><br><span class=\"line\">520</span><br><span class=\"line\">521</span><br><span class=\"line\">522</span><br><span class=\"line\">523</span><br><span class=\"line\">524</span><br><span class=\"line\">525</span><br><span class=\"line\">526</span><br><span class=\"line\">527</span><br><span class=\"line\">528</span><br><span class=\"line\">529</span><br><span class=\"line\">530</span><br><span class=\"line\">531</span><br><span class=\"line\">532</span><br><span class=\"line\">533</span><br><span class=\"line\">534</span><br><span class=\"line\">535</span><br><span class=\"line\">536</span><br><span class=\"line\">537</span><br><span class=\"line\">538</span><br><span class=\"line\">539</span><br><span class=\"line\">540</span><br><span class=\"line\">541</span><br><span class=\"line\">542</span><br><span class=\"line\">543</span><br><span class=\"line\">544</span><br><span class=\"line\">545</span><br><span class=\"line\">546</span><br><span class=\"line\">547</span><br><span class=\"line\">548</span><br><span class=\"line\">549</span><br><span class=\"line\">550</span><br><span class=\"line\">551</span><br><span class=\"line\">552</span><br><span class=\"line\">553</span><br><span class=\"line\">554</span><br><span class=\"line\">555</span><br><span class=\"line\">556</span><br><span class=\"line\">557</span><br><span class=\"line\">558</span><br><span class=\"line\">559</span><br><span class=\"line\">560</span><br><span class=\"line\">561</span><br><span class=\"line\">562</span><br><span class=\"line\">563</span><br><span class=\"line\">564</span><br><span class=\"line\">565</span><br><span class=\"line\">566</span><br><span class=\"line\">567</span><br><span class=\"line\">568</span><br><span class=\"line\">569</span><br><span class=\"line\">570</span><br><span class=\"line\">571</span><br><span class=\"line\">572</span><br><span class=\"line\">573</span><br><span class=\"line\">574</span><br><span class=\"line\">575</span><br><span class=\"line\">576</span><br><span class=\"line\">577</span><br><span class=\"line\">578</span><br><span class=\"line\">579</span><br><span class=\"line\">580</span><br><span class=\"line\">581</span><br><span class=\"line\">582</span><br><span class=\"line\">583</span><br><span class=\"line\">584</span><br><span class=\"line\">585</span><br><span class=\"line\">586</span><br><span class=\"line\">587</span><br><span class=\"line\">588</span><br><span class=\"line\">589</span><br><span class=\"line\">590</span><br><span class=\"line\">591</span><br><span class=\"line\">592</span><br><span class=\"line\">593</span><br><span class=\"line\">594</span><br><span class=\"line\">595</span><br><span class=\"line\">596</span><br><span class=\"line\">597</span><br><span class=\"line\">598</span><br><span class=\"line\">599</span><br><span class=\"line\">600</span><br><span class=\"line\">601</span><br><span class=\"line\">602</span><br><span class=\"line\">603</span><br><span class=\"line\">604</span><br><span class=\"line\">605</span><br><span class=\"line\">606</span><br><span class=\"line\">607</span><br><span class=\"line\">608</span><br><span class=\"line\">609</span><br><span class=\"line\">610</span><br><span class=\"line\">611</span><br><span class=\"line\">612</span><br><span class=\"line\">613</span><br><span class=\"line\">614</span><br><span class=\"line\">615</span><br><span class=\"line\">616</span><br><span class=\"line\">617</span><br><span class=\"line\">618</span><br><span class=\"line\">619</span><br><span class=\"line\">620</span><br><span class=\"line\">621</span><br><span class=\"line\">622</span><br><span class=\"line\">623</span><br><span class=\"line\">624</span><br><span class=\"line\">625</span><br><span class=\"line\">626</span><br><span class=\"line\">627</span><br><span class=\"line\">628</span><br><span class=\"line\">629</span><br><span class=\"line\">630</span><br><span class=\"line\">631</span><br><span class=\"line\">632</span><br><span class=\"line\">633</span><br><span class=\"line\">634</span><br><span class=\"line\">635</span><br><span class=\"line\">636</span><br><span class=\"line\">637</span><br><span class=\"line\">638</span><br><span class=\"line\">639</span><br><span class=\"line\">640</span><br><span class=\"line\">641</span><br><span class=\"line\">642</span><br><span class=\"line\">643</span><br><span class=\"line\">644</span><br><span class=\"line\">645</span><br><span class=\"line\">646</span><br><span class=\"line\">647</span><br><span class=\"line\">648</span><br><span class=\"line\">649</span><br><span class=\"line\">650</span><br><span class=\"line\">651</span><br><span class=\"line\">652</span><br><span class=\"line\">653</span><br><span class=\"line\">654</span><br><span class=\"line\">655</span><br><span class=\"line\">656</span><br><span class=\"line\">657</span><br><span class=\"line\">658</span><br><span class=\"line\">659</span><br><span class=\"line\">660</span><br><span class=\"line\">661</span><br><span class=\"line\">662</span><br><span class=\"line\">663</span><br><span class=\"line\">664</span><br><span class=\"line\">665</span><br><span class=\"line\">666</span><br><span class=\"line\">667</span><br><span class=\"line\">668</span><br><span class=\"line\">669</span><br><span class=\"line\">670</span><br><span class=\"line\">671</span><br><span class=\"line\">672</span><br><span class=\"line\">673</span><br><span class=\"line\">674</span><br><span class=\"line\">675</span><br><span class=\"line\">676</span><br><span class=\"line\">677</span><br><span class=\"line\">678</span><br><span class=\"line\">679</span><br><span class=\"line\">680</span><br><span class=\"line\">681</span><br><span class=\"line\">682</span><br><span class=\"line\">683</span><br><span class=\"line\">684</span><br><span class=\"line\">685</span><br><span class=\"line\">686</span><br><span class=\"line\">687</span><br><span class=\"line\">688</span><br><span class=\"line\">689</span><br><span class=\"line\">690</span><br><span class=\"line\">691</span><br><span class=\"line\">692</span><br><span class=\"line\">693</span><br><span class=\"line\">694</span><br><span class=\"line\">695</span><br><span class=\"line\">696</span><br><span class=\"line\">697</span><br><span class=\"line\">698</span><br><span class=\"line\">699</span><br><span class=\"line\">700</span><br><span class=\"line\">701</span><br><span class=\"line\">702</span><br><span class=\"line\">703</span><br><span class=\"line\">704</span><br><span class=\"line\">705</span><br><span class=\"line\">706</span><br><span class=\"line\">707</span><br><span class=\"line\">708</span><br><span class=\"line\">709</span><br><span class=\"line\">710</span><br><span class=\"line\">711</span><br><span class=\"line\">712</span><br><span class=\"line\">713</span><br><span class=\"line\">714</span><br><span class=\"line\">715</span><br><span class=\"line\">716</span><br><span class=\"line\">717</span><br><span class=\"line\">718</span><br><span class=\"line\">719</span><br><span class=\"line\">720</span><br><span class=\"line\">721</span><br><span class=\"line\">722</span><br><span class=\"line\">723</span><br><span class=\"line\">724</span><br><span class=\"line\">725</span><br><span class=\"line\">726</span><br><span class=\"line\">727</span><br><span class=\"line\">728</span><br><span class=\"line\">729</span><br><span class=\"line\">730</span><br><span class=\"line\">731</span><br><span class=\"line\">732</span><br><span class=\"line\">733</span><br><span class=\"line\">734</span><br><span class=\"line\">735</span><br><span class=\"line\">736</span><br><span class=\"line\">737</span><br><span class=\"line\">738</span><br><span class=\"line\">739</span><br><span class=\"line\">740</span><br><span class=\"line\">741</span><br><span class=\"line\">742</span><br><span class=\"line\">743</span><br><span class=\"line\">744</span><br><span class=\"line\">745</span><br><span class=\"line\">746</span><br><span class=\"line\">747</span><br><span class=\"line\">748</span><br><span class=\"line\">749</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs csharp\"><span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">pragma</span> <span class=\"hljs-meta-keyword\">warning</span> disable 1591, 0612, 3021</span><br><span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">region</span> Designer generated code</span><br><br>using pb = global::Google.Protobuf;<br>using pbc = global::Google.Protobuf.Collections;<br>using pbr = global::Google.Protobuf.Reflection;<br>using scg = global::System.Collections.Generic;<br><span class=\"hljs-keyword\">namespace</span> <span class=\"hljs-title\">Math</span> &#123;<br><br>  <span class=\"hljs-comment\"><span class=\"hljs-doctag\">///</span> <span class=\"hljs-doctag\">&lt;summary&gt;</span>Holder for reflection information generated from math/math.proto<span class=\"hljs-doctag\">&lt;/summary&gt;</span></span><br>  <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">partial</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">MathReflection</span> &#123;<br><br>    <span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">region</span> Descriptor</span><br>    <span class=\"hljs-comment\"><span class=\"hljs-doctag\">///</span> <span class=\"hljs-doctag\">&lt;summary&gt;</span>File descriptor for math/math.proto<span class=\"hljs-doctag\">&lt;/summary&gt;</span></span><br>    public static pbr::FileDescriptor Descriptor &#123;<br>      <span class=\"hljs-keyword\">get</span> &#123; <span class=\"hljs-keyword\">return</span> descriptor; &#125;<br>    &#125;<br>    private static pbr::FileDescriptor descriptor;<br><br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">static</span> <span class=\"hljs-title\">MathReflection</span>(<span class=\"hljs-params\"></span>)</span> &#123;<br>      byte[] descriptorData = global::System.Convert.FromBase64String(<br>          <span class=\"hljs-built_in\">string</span>.Concat(<br>            <span class=\"hljs-string\">&quot;Cg9tYXRoL21hdGgucHJvdG8SBG1hdGgiLAoHRGl2QXJncxIQCghkaXZpZGVu&quot;</span>,<br>            <span class=\"hljs-string\">&quot;ZBgBIAEoAxIPCgdkaXZpc29yGAIgASgDIi8KCERpdlJlcGx5EhAKCHF1b3Rp&quot;</span>,<br>            <span class=\"hljs-string\">&quot;ZW50GAEgASgDEhEKCXJlbWFpbmRlchgCIAEoAyIYCgdGaWJBcmdzEg0KBWxp&quot;</span>,<br>            <span class=\"hljs-string\">&quot;bWl0GAEgASgDIhIKA051bRILCgNudW0YASABKAMiGQoIRmliUmVwbHkSDQoF&quot;</span>,<br>            <span class=\"hljs-string\">&quot;Y291bnQYASABKAMypAEKBE1hdGgSJgoDRGl2Eg0ubWF0aC5EaXZBcmdzGg4u&quot;</span>,<br>            <span class=\"hljs-string\">&quot;bWF0aC5EaXZSZXBseSIAEi4KB0Rpdk1hbnkSDS5tYXRoLkRpdkFyZ3MaDi5t&quot;</span>,<br>            <span class=\"hljs-string\">&quot;YXRoLkRpdlJlcGx5IgAoATABEiMKA0ZpYhINLm1hdGguRmliQXJncxoJLm1h&quot;</span>,<br>            <span class=\"hljs-string\">&quot;dGguTnVtIgAwARIfCgNTdW0SCS5tYXRoLk51bRoJLm1hdGguTnVtIgAoAWIG&quot;</span>,<br>            <span class=\"hljs-string\">&quot;cHJvdG8z&quot;</span>));<br>      descriptor = pbr::FileDescriptor.FromGeneratedCode(descriptorData,<br>          new pbr::FileDescriptor[] &#123; &#125;,<br>          new pbr::GeneratedClrTypeInfo(null, new pbr::GeneratedClrTypeInfo[] &#123;<br>            new pbr::GeneratedClrTypeInfo(typeof(global::Math.DivArgs), global::Math.DivArgs.Parser, new[]&#123; &quot;Dividend&quot;, &quot;Divisor&quot; &#125;, null, null, null),<br>            new pbr::GeneratedClrTypeInfo(typeof(global::Math.DivReply), global::Math.DivReply.Parser, new[]&#123; &quot;Quotient&quot;, &quot;Remainder&quot; &#125;, null, null, null),<br>            new pbr::GeneratedClrTypeInfo(typeof(global::Math.FibArgs), global::Math.FibArgs.Parser, new[]&#123; &quot;Limit&quot; &#125;, null, null, null),<br>            new pbr::GeneratedClrTypeInfo(typeof(global::Math.Num), global::Math.Num.Parser, new[]&#123; &quot;Num_&quot; &#125;, null, null, null),<br>            new pbr::GeneratedClrTypeInfo(typeof(global::Math.FibReply), global::Math.FibReply.Parser, new[]&#123; &quot;Count&quot; &#125;, null, null, null)<br>          &#125;));<br>    &#125;<br>    <span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">endregion</span></span><br><br>  &#125;<br>  <span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">region</span> Messages</span><br>  <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">sealed</span> <span class=\"hljs-keyword\">partial</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">DivArgs</span> : <span class=\"hljs-title\">pb</span>::<span class=\"hljs-title\">IMessage</span>&lt;<span class=\"hljs-title\">DivArgs</span>&gt; &#123;<br>    private static readonly pb::MessageParser&lt;DivArgs&gt; _parser = new pb::MessageParser&lt;DivArgs&gt;(() =&gt; new DivArgs());<br>    private pb::UnknownFieldSet _unknownFields;<br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    public static pb::MessageParser&lt;DivArgs&gt; Parser &#123; get &#123; return _parser; &#125; &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    public static pbr::MessageDescriptor Descriptor &#123;<br>      get &#123; return global::Math.MathReflection.Descriptor.MessageTypes[0]; &#125;<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    pbr::MessageDescriptor pb::IMessage.Descriptor &#123;<br>      <span class=\"hljs-keyword\">get</span> &#123; <span class=\"hljs-keyword\">return</span> Descriptor; &#125;<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-title\">DivArgs</span>(<span class=\"hljs-params\"></span>)</span> &#123;<br>      OnConstruction();<br>    &#125;<br><br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">partial</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">OnConstruction</span>(<span class=\"hljs-params\"></span>)</span>;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-title\">DivArgs</span>(<span class=\"hljs-params\">DivArgs other</span>) : <span class=\"hljs-title\">this</span>(<span class=\"hljs-params\"></span>)</span> &#123;<br>      dividend_ = other.dividend_;<br>      divisor_ = other.divisor_;<br>      _unknownFields = pb::UnknownFieldSet.Clone(other._unknownFields);<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> DivArgs <span class=\"hljs-title\">Clone</span>(<span class=\"hljs-params\"></span>)</span> &#123;<br>      <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> DivArgs(<span class=\"hljs-keyword\">this</span>);<br>    &#125;<br><br>    <span class=\"hljs-comment\"><span class=\"hljs-doctag\">///</span> <span class=\"hljs-doctag\">&lt;summary&gt;</span>Field number for the &quot;dividend&quot; field.<span class=\"hljs-doctag\">&lt;/summary&gt;</span></span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">const</span> <span class=\"hljs-built_in\">int</span> DividendFieldNumber = <span class=\"hljs-number\">1</span>;<br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-built_in\">long</span> dividend_;<br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-built_in\">long</span> Dividend &#123;<br>      <span class=\"hljs-keyword\">get</span> &#123; <span class=\"hljs-keyword\">return</span> dividend_; &#125;<br>      <span class=\"hljs-keyword\">set</span> &#123;<br>        dividend_ = <span class=\"hljs-keyword\">value</span>;<br>      &#125;<br>    &#125;<br><br>    <span class=\"hljs-comment\"><span class=\"hljs-doctag\">///</span> <span class=\"hljs-doctag\">&lt;summary&gt;</span>Field number for the &quot;divisor&quot; field.<span class=\"hljs-doctag\">&lt;/summary&gt;</span></span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">const</span> <span class=\"hljs-built_in\">int</span> DivisorFieldNumber = <span class=\"hljs-number\">2</span>;<br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-built_in\">long</span> divisor_;<br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-built_in\">long</span> Divisor &#123;<br>      <span class=\"hljs-keyword\">get</span> &#123; <span class=\"hljs-keyword\">return</span> divisor_; &#125;<br>      <span class=\"hljs-keyword\">set</span> &#123;<br>        divisor_ = <span class=\"hljs-keyword\">value</span>;<br>      &#125;<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">override</span> <span class=\"hljs-built_in\">bool</span> <span class=\"hljs-title\">Equals</span>(<span class=\"hljs-params\"><span class=\"hljs-built_in\">object</span> other</span>)</span> &#123;<br>      <span class=\"hljs-keyword\">return</span> Equals(other <span class=\"hljs-keyword\">as</span> DivArgs);<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-built_in\">bool</span> <span class=\"hljs-title\">Equals</span>(<span class=\"hljs-params\">DivArgs other</span>)</span> &#123;<br>      <span class=\"hljs-keyword\">if</span> (ReferenceEquals(other, <span class=\"hljs-literal\">null</span>)) &#123;<br>        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">false</span>;<br>      &#125;<br>      <span class=\"hljs-keyword\">if</span> (ReferenceEquals(other, <span class=\"hljs-keyword\">this</span>)) &#123;<br>        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">true</span>;<br>      &#125;<br>      <span class=\"hljs-keyword\">if</span> (Dividend != other.Dividend) <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">false</span>;<br>      <span class=\"hljs-keyword\">if</span> (Divisor != other.Divisor) <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">false</span>;<br>      <span class=\"hljs-keyword\">return</span> Equals(_unknownFields, other._unknownFields);<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">override</span> <span class=\"hljs-built_in\">int</span> <span class=\"hljs-title\">GetHashCode</span>(<span class=\"hljs-params\"></span>)</span> &#123;<br>      <span class=\"hljs-built_in\">int</span> hash = <span class=\"hljs-number\">1</span>;<br>      <span class=\"hljs-keyword\">if</span> (Dividend != <span class=\"hljs-number\">0L</span>) hash ^= Dividend.GetHashCode();<br>      <span class=\"hljs-keyword\">if</span> (Divisor != <span class=\"hljs-number\">0L</span>) hash ^= Divisor.GetHashCode();<br>      <span class=\"hljs-keyword\">if</span> (_unknownFields != <span class=\"hljs-literal\">null</span>) &#123;<br>        hash ^= _unknownFields.GetHashCode();<br>      &#125;<br>      <span class=\"hljs-keyword\">return</span> hash;<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">override</span> <span class=\"hljs-built_in\">string</span> <span class=\"hljs-title\">ToString</span>(<span class=\"hljs-params\"></span>)</span> &#123;<br>      return pb::JsonFormatter.ToDiagnosticString(this);<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">WriteTo</span>(<span class=\"hljs-params\">pb::CodedOutputStream output</span>)</span> &#123;<br>      <span class=\"hljs-keyword\">if</span> (Dividend != <span class=\"hljs-number\">0L</span>) &#123;<br>        output.WriteRawTag(<span class=\"hljs-number\">8</span>);<br>        output.WriteInt64(Dividend);<br>      &#125;<br>      <span class=\"hljs-keyword\">if</span> (Divisor != <span class=\"hljs-number\">0L</span>) &#123;<br>        output.WriteRawTag(<span class=\"hljs-number\">16</span>);<br>        output.WriteInt64(Divisor);<br>      &#125;<br>      <span class=\"hljs-keyword\">if</span> (_unknownFields != <span class=\"hljs-literal\">null</span>) &#123;<br>        _unknownFields.WriteTo(output);<br>      &#125;<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-built_in\">int</span> <span class=\"hljs-title\">CalculateSize</span>(<span class=\"hljs-params\"></span>)</span> &#123;<br>      <span class=\"hljs-built_in\">int</span> size = <span class=\"hljs-number\">0</span>;<br>      <span class=\"hljs-keyword\">if</span> (Dividend != <span class=\"hljs-number\">0L</span>) &#123;<br>        size += 1 + pb::CodedOutputStream.ComputeInt64Size(Dividend);<br>      &#125;<br>      <span class=\"hljs-keyword\">if</span> (Divisor != <span class=\"hljs-number\">0L</span>) &#123;<br>        size += 1 + pb::CodedOutputStream.ComputeInt64Size(Divisor);<br>      &#125;<br>      <span class=\"hljs-keyword\">if</span> (_unknownFields != <span class=\"hljs-literal\">null</span>) &#123;<br>        size += _unknownFields.CalculateSize();<br>      &#125;<br>      <span class=\"hljs-keyword\">return</span> size;<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">MergeFrom</span>(<span class=\"hljs-params\">DivArgs other</span>)</span> &#123;<br>      <span class=\"hljs-keyword\">if</span> (other == <span class=\"hljs-literal\">null</span>) &#123;<br>        <span class=\"hljs-keyword\">return</span>;<br>      &#125;<br>      <span class=\"hljs-keyword\">if</span> (other.Dividend != <span class=\"hljs-number\">0L</span>) &#123;<br>        Dividend = other.Dividend;<br>      &#125;<br>      <span class=\"hljs-keyword\">if</span> (other.Divisor != <span class=\"hljs-number\">0L</span>) &#123;<br>        Divisor = other.Divisor;<br>      &#125;<br>      _unknownFields = pb::UnknownFieldSet.MergeFrom(_unknownFields, other._unknownFields);<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">MergeFrom</span>(<span class=\"hljs-params\">pb::CodedInputStream input</span>)</span> &#123;<br>      uint tag;<br>      <span class=\"hljs-keyword\">while</span> ((tag = input.ReadTag()) != <span class=\"hljs-number\">0</span>) &#123;<br>        <span class=\"hljs-keyword\">switch</span>(tag) &#123;<br>          <span class=\"hljs-literal\">default</span>:<br>            _unknownFields = pb::UnknownFieldSet.MergeFieldFrom(_unknownFields, input);<br>            <span class=\"hljs-keyword\">break</span>;<br>          <span class=\"hljs-keyword\">case</span> <span class=\"hljs-number\">8</span>: &#123;<br>            Dividend = input.ReadInt64();<br>            <span class=\"hljs-keyword\">break</span>;<br>          &#125;<br>          <span class=\"hljs-keyword\">case</span> <span class=\"hljs-number\">16</span>: &#123;<br>            Divisor = input.ReadInt64();<br>            <span class=\"hljs-keyword\">break</span>;<br>          &#125;<br>        &#125;<br>      &#125;<br>    &#125;<br><br>  &#125;<br><br>  <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">sealed</span> <span class=\"hljs-keyword\">partial</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">DivReply</span> : <span class=\"hljs-title\">pb</span>::<span class=\"hljs-title\">IMessage</span>&lt;<span class=\"hljs-title\">DivReply</span>&gt; &#123;<br>    private static readonly pb::MessageParser&lt;DivReply&gt; _parser = new pb::MessageParser&lt;DivReply&gt;(() =&gt; new DivReply());<br>    private pb::UnknownFieldSet _unknownFields;<br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    public static pb::MessageParser&lt;DivReply&gt; Parser &#123; get &#123; return _parser; &#125; &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    public static pbr::MessageDescriptor Descriptor &#123;<br>      get &#123; return global::Math.MathReflection.Descriptor.MessageTypes[1]; &#125;<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    pbr::MessageDescriptor pb::IMessage.Descriptor &#123;<br>      <span class=\"hljs-keyword\">get</span> &#123; <span class=\"hljs-keyword\">return</span> Descriptor; &#125;<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-title\">DivReply</span>(<span class=\"hljs-params\"></span>)</span> &#123;<br>      OnConstruction();<br>    &#125;<br><br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">partial</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">OnConstruction</span>(<span class=\"hljs-params\"></span>)</span>;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-title\">DivReply</span>(<span class=\"hljs-params\">DivReply other</span>) : <span class=\"hljs-title\">this</span>(<span class=\"hljs-params\"></span>)</span> &#123;<br>      quotient_ = other.quotient_;<br>      remainder_ = other.remainder_;<br>      _unknownFields = pb::UnknownFieldSet.Clone(other._unknownFields);<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> DivReply <span class=\"hljs-title\">Clone</span>(<span class=\"hljs-params\"></span>)</span> &#123;<br>      <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> DivReply(<span class=\"hljs-keyword\">this</span>);<br>    &#125;<br><br>    <span class=\"hljs-comment\"><span class=\"hljs-doctag\">///</span> <span class=\"hljs-doctag\">&lt;summary&gt;</span>Field number for the &quot;quotient&quot; field.<span class=\"hljs-doctag\">&lt;/summary&gt;</span></span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">const</span> <span class=\"hljs-built_in\">int</span> QuotientFieldNumber = <span class=\"hljs-number\">1</span>;<br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-built_in\">long</span> quotient_;<br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-built_in\">long</span> Quotient &#123;<br>      <span class=\"hljs-keyword\">get</span> &#123; <span class=\"hljs-keyword\">return</span> quotient_; &#125;<br>      <span class=\"hljs-keyword\">set</span> &#123;<br>        quotient_ = <span class=\"hljs-keyword\">value</span>;<br>      &#125;<br>    &#125;<br><br>    <span class=\"hljs-comment\"><span class=\"hljs-doctag\">///</span> <span class=\"hljs-doctag\">&lt;summary&gt;</span>Field number for the &quot;remainder&quot; field.<span class=\"hljs-doctag\">&lt;/summary&gt;</span></span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">const</span> <span class=\"hljs-built_in\">int</span> RemainderFieldNumber = <span class=\"hljs-number\">2</span>;<br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-built_in\">long</span> remainder_;<br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-built_in\">long</span> Remainder &#123;<br>      <span class=\"hljs-keyword\">get</span> &#123; <span class=\"hljs-keyword\">return</span> remainder_; &#125;<br>      <span class=\"hljs-keyword\">set</span> &#123;<br>        remainder_ = <span class=\"hljs-keyword\">value</span>;<br>      &#125;<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">override</span> <span class=\"hljs-built_in\">bool</span> <span class=\"hljs-title\">Equals</span>(<span class=\"hljs-params\"><span class=\"hljs-built_in\">object</span> other</span>)</span> &#123;<br>      <span class=\"hljs-keyword\">return</span> Equals(other <span class=\"hljs-keyword\">as</span> DivReply);<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-built_in\">bool</span> <span class=\"hljs-title\">Equals</span>(<span class=\"hljs-params\">DivReply other</span>)</span> &#123;<br>      <span class=\"hljs-keyword\">if</span> (ReferenceEquals(other, <span class=\"hljs-literal\">null</span>)) &#123;<br>        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">false</span>;<br>      &#125;<br>      <span class=\"hljs-keyword\">if</span> (ReferenceEquals(other, <span class=\"hljs-keyword\">this</span>)) &#123;<br>        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">true</span>;<br>      &#125;<br>      <span class=\"hljs-keyword\">if</span> (Quotient != other.Quotient) <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">false</span>;<br>      <span class=\"hljs-keyword\">if</span> (Remainder != other.Remainder) <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">false</span>;<br>      <span class=\"hljs-keyword\">return</span> Equals(_unknownFields, other._unknownFields);<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">override</span> <span class=\"hljs-built_in\">int</span> <span class=\"hljs-title\">GetHashCode</span>(<span class=\"hljs-params\"></span>)</span> &#123;<br>      <span class=\"hljs-built_in\">int</span> hash = <span class=\"hljs-number\">1</span>;<br>      <span class=\"hljs-keyword\">if</span> (Quotient != <span class=\"hljs-number\">0L</span>) hash ^= Quotient.GetHashCode();<br>      <span class=\"hljs-keyword\">if</span> (Remainder != <span class=\"hljs-number\">0L</span>) hash ^= Remainder.GetHashCode();<br>      <span class=\"hljs-keyword\">if</span> (_unknownFields != <span class=\"hljs-literal\">null</span>) &#123;<br>        hash ^= _unknownFields.GetHashCode();<br>      &#125;<br>      <span class=\"hljs-keyword\">return</span> hash;<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">override</span> <span class=\"hljs-built_in\">string</span> <span class=\"hljs-title\">ToString</span>(<span class=\"hljs-params\"></span>)</span> &#123;<br>      return pb::JsonFormatter.ToDiagnosticString(this);<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">WriteTo</span>(<span class=\"hljs-params\">pb::CodedOutputStream output</span>)</span> &#123;<br>      <span class=\"hljs-keyword\">if</span> (Quotient != <span class=\"hljs-number\">0L</span>) &#123;<br>        output.WriteRawTag(<span class=\"hljs-number\">8</span>);<br>        output.WriteInt64(Quotient);<br>      &#125;<br>      <span class=\"hljs-keyword\">if</span> (Remainder != <span class=\"hljs-number\">0L</span>) &#123;<br>        output.WriteRawTag(<span class=\"hljs-number\">16</span>);<br>        output.WriteInt64(Remainder);<br>      &#125;<br>      <span class=\"hljs-keyword\">if</span> (_unknownFields != <span class=\"hljs-literal\">null</span>) &#123;<br>        _unknownFields.WriteTo(output);<br>      &#125;<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-built_in\">int</span> <span class=\"hljs-title\">CalculateSize</span>(<span class=\"hljs-params\"></span>)</span> &#123;<br>      <span class=\"hljs-built_in\">int</span> size = <span class=\"hljs-number\">0</span>;<br>      <span class=\"hljs-keyword\">if</span> (Quotient != <span class=\"hljs-number\">0L</span>) &#123;<br>        size += 1 + pb::CodedOutputStream.ComputeInt64Size(Quotient);<br>      &#125;<br>      <span class=\"hljs-keyword\">if</span> (Remainder != <span class=\"hljs-number\">0L</span>) &#123;<br>        size += 1 + pb::CodedOutputStream.ComputeInt64Size(Remainder);<br>      &#125;<br>      <span class=\"hljs-keyword\">if</span> (_unknownFields != <span class=\"hljs-literal\">null</span>) &#123;<br>        size += _unknownFields.CalculateSize();<br>      &#125;<br>      <span class=\"hljs-keyword\">return</span> size;<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">MergeFrom</span>(<span class=\"hljs-params\">DivReply other</span>)</span> &#123;<br>      <span class=\"hljs-keyword\">if</span> (other == <span class=\"hljs-literal\">null</span>) &#123;<br>        <span class=\"hljs-keyword\">return</span>;<br>      &#125;<br>      <span class=\"hljs-keyword\">if</span> (other.Quotient != <span class=\"hljs-number\">0L</span>) &#123;<br>        Quotient = other.Quotient;<br>      &#125;<br>      <span class=\"hljs-keyword\">if</span> (other.Remainder != <span class=\"hljs-number\">0L</span>) &#123;<br>        Remainder = other.Remainder;<br>      &#125;<br>      _unknownFields = pb::UnknownFieldSet.MergeFrom(_unknownFields, other._unknownFields);<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">MergeFrom</span>(<span class=\"hljs-params\">pb::CodedInputStream input</span>)</span> &#123;<br>      uint tag;<br>      <span class=\"hljs-keyword\">while</span> ((tag = input.ReadTag()) != <span class=\"hljs-number\">0</span>) &#123;<br>        <span class=\"hljs-keyword\">switch</span>(tag) &#123;<br>          <span class=\"hljs-literal\">default</span>:<br>            _unknownFields = pb::UnknownFieldSet.MergeFieldFrom(_unknownFields, input);<br>            <span class=\"hljs-keyword\">break</span>;<br>          <span class=\"hljs-keyword\">case</span> <span class=\"hljs-number\">8</span>: &#123;<br>            Quotient = input.ReadInt64();<br>            <span class=\"hljs-keyword\">break</span>;<br>          &#125;<br>          <span class=\"hljs-keyword\">case</span> <span class=\"hljs-number\">16</span>: &#123;<br>            Remainder = input.ReadInt64();<br>            <span class=\"hljs-keyword\">break</span>;<br>          &#125;<br>        &#125;<br>      &#125;<br>    &#125;<br><br>  &#125;<br><br>  <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">sealed</span> <span class=\"hljs-keyword\">partial</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">FibArgs</span> : <span class=\"hljs-title\">pb</span>::<span class=\"hljs-title\">IMessage</span>&lt;<span class=\"hljs-title\">FibArgs</span>&gt; &#123;<br>    private static readonly pb::MessageParser&lt;FibArgs&gt; _parser = new pb::MessageParser&lt;FibArgs&gt;(() =&gt; new FibArgs());<br>    private pb::UnknownFieldSet _unknownFields;<br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    public static pb::MessageParser&lt;FibArgs&gt; Parser &#123; get &#123; return _parser; &#125; &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    public static pbr::MessageDescriptor Descriptor &#123;<br>      get &#123; return global::Math.MathReflection.Descriptor.MessageTypes[2]; &#125;<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    pbr::MessageDescriptor pb::IMessage.Descriptor &#123;<br>      <span class=\"hljs-keyword\">get</span> &#123; <span class=\"hljs-keyword\">return</span> Descriptor; &#125;<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-title\">FibArgs</span>(<span class=\"hljs-params\"></span>)</span> &#123;<br>      OnConstruction();<br>    &#125;<br><br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">partial</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">OnConstruction</span>(<span class=\"hljs-params\"></span>)</span>;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-title\">FibArgs</span>(<span class=\"hljs-params\">FibArgs other</span>) : <span class=\"hljs-title\">this</span>(<span class=\"hljs-params\"></span>)</span> &#123;<br>      limit_ = other.limit_;<br>      _unknownFields = pb::UnknownFieldSet.Clone(other._unknownFields);<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> FibArgs <span class=\"hljs-title\">Clone</span>(<span class=\"hljs-params\"></span>)</span> &#123;<br>      <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> FibArgs(<span class=\"hljs-keyword\">this</span>);<br>    &#125;<br><br>    <span class=\"hljs-comment\"><span class=\"hljs-doctag\">///</span> <span class=\"hljs-doctag\">&lt;summary&gt;</span>Field number for the &quot;limit&quot; field.<span class=\"hljs-doctag\">&lt;/summary&gt;</span></span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">const</span> <span class=\"hljs-built_in\">int</span> LimitFieldNumber = <span class=\"hljs-number\">1</span>;<br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-built_in\">long</span> limit_;<br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-built_in\">long</span> Limit &#123;<br>      <span class=\"hljs-keyword\">get</span> &#123; <span class=\"hljs-keyword\">return</span> limit_; &#125;<br>      <span class=\"hljs-keyword\">set</span> &#123;<br>        limit_ = <span class=\"hljs-keyword\">value</span>;<br>      &#125;<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">override</span> <span class=\"hljs-built_in\">bool</span> <span class=\"hljs-title\">Equals</span>(<span class=\"hljs-params\"><span class=\"hljs-built_in\">object</span> other</span>)</span> &#123;<br>      <span class=\"hljs-keyword\">return</span> Equals(other <span class=\"hljs-keyword\">as</span> FibArgs);<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-built_in\">bool</span> <span class=\"hljs-title\">Equals</span>(<span class=\"hljs-params\">FibArgs other</span>)</span> &#123;<br>      <span class=\"hljs-keyword\">if</span> (ReferenceEquals(other, <span class=\"hljs-literal\">null</span>)) &#123;<br>        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">false</span>;<br>      &#125;<br>      <span class=\"hljs-keyword\">if</span> (ReferenceEquals(other, <span class=\"hljs-keyword\">this</span>)) &#123;<br>        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">true</span>;<br>      &#125;<br>      <span class=\"hljs-keyword\">if</span> (Limit != other.Limit) <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">false</span>;<br>      <span class=\"hljs-keyword\">return</span> Equals(_unknownFields, other._unknownFields);<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">override</span> <span class=\"hljs-built_in\">int</span> <span class=\"hljs-title\">GetHashCode</span>(<span class=\"hljs-params\"></span>)</span> &#123;<br>      <span class=\"hljs-built_in\">int</span> hash = <span class=\"hljs-number\">1</span>;<br>      <span class=\"hljs-keyword\">if</span> (Limit != <span class=\"hljs-number\">0L</span>) hash ^= Limit.GetHashCode();<br>      <span class=\"hljs-keyword\">if</span> (_unknownFields != <span class=\"hljs-literal\">null</span>) &#123;<br>        hash ^= _unknownFields.GetHashCode();<br>      &#125;<br>      <span class=\"hljs-keyword\">return</span> hash;<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">override</span> <span class=\"hljs-built_in\">string</span> <span class=\"hljs-title\">ToString</span>(<span class=\"hljs-params\"></span>)</span> &#123;<br>      return pb::JsonFormatter.ToDiagnosticString(this);<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">WriteTo</span>(<span class=\"hljs-params\">pb::CodedOutputStream output</span>)</span> &#123;<br>      <span class=\"hljs-keyword\">if</span> (Limit != <span class=\"hljs-number\">0L</span>) &#123;<br>        output.WriteRawTag(<span class=\"hljs-number\">8</span>);<br>        output.WriteInt64(Limit);<br>      &#125;<br>      <span class=\"hljs-keyword\">if</span> (_unknownFields != <span class=\"hljs-literal\">null</span>) &#123;<br>        _unknownFields.WriteTo(output);<br>      &#125;<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-built_in\">int</span> <span class=\"hljs-title\">CalculateSize</span>(<span class=\"hljs-params\"></span>)</span> &#123;<br>      <span class=\"hljs-built_in\">int</span> size = <span class=\"hljs-number\">0</span>;<br>      <span class=\"hljs-keyword\">if</span> (Limit != <span class=\"hljs-number\">0L</span>) &#123;<br>        size += 1 + pb::CodedOutputStream.ComputeInt64Size(Limit);<br>      &#125;<br>      <span class=\"hljs-keyword\">if</span> (_unknownFields != <span class=\"hljs-literal\">null</span>) &#123;<br>        size += _unknownFields.CalculateSize();<br>      &#125;<br>      <span class=\"hljs-keyword\">return</span> size;<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">MergeFrom</span>(<span class=\"hljs-params\">FibArgs other</span>)</span> &#123;<br>      <span class=\"hljs-keyword\">if</span> (other == <span class=\"hljs-literal\">null</span>) &#123;<br>        <span class=\"hljs-keyword\">return</span>;<br>      &#125;<br>      <span class=\"hljs-keyword\">if</span> (other.Limit != <span class=\"hljs-number\">0L</span>) &#123;<br>        Limit = other.Limit;<br>      &#125;<br>      _unknownFields = pb::UnknownFieldSet.MergeFrom(_unknownFields, other._unknownFields);<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">MergeFrom</span>(<span class=\"hljs-params\">pb::CodedInputStream input</span>)</span> &#123;<br>      uint tag;<br>      <span class=\"hljs-keyword\">while</span> ((tag = input.ReadTag()) != <span class=\"hljs-number\">0</span>) &#123;<br>        <span class=\"hljs-keyword\">switch</span>(tag) &#123;<br>          <span class=\"hljs-literal\">default</span>:<br>            _unknownFields = pb::UnknownFieldSet.MergeFieldFrom(_unknownFields, input);<br>            <span class=\"hljs-keyword\">break</span>;<br>          <span class=\"hljs-keyword\">case</span> <span class=\"hljs-number\">8</span>: &#123;<br>            Limit = input.ReadInt64();<br>            <span class=\"hljs-keyword\">break</span>;<br>          &#125;<br>        &#125;<br>      &#125;<br>    &#125;<br><br>  &#125;<br><br>  <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">sealed</span> <span class=\"hljs-keyword\">partial</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">Num</span> : <span class=\"hljs-title\">pb</span>::<span class=\"hljs-title\">IMessage</span>&lt;<span class=\"hljs-title\">Num</span>&gt; &#123;<br>    private static readonly pb::MessageParser&lt;Num&gt; _parser = new pb::MessageParser&lt;Num&gt;(() =&gt; new Num());<br>    private pb::UnknownFieldSet _unknownFields;<br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    public static pb::MessageParser&lt;Num&gt; Parser &#123; get &#123; return _parser; &#125; &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    public static pbr::MessageDescriptor Descriptor &#123;<br>      get &#123; return global::Math.MathReflection.Descriptor.MessageTypes[3]; &#125;<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    pbr::MessageDescriptor pb::IMessage.Descriptor &#123;<br>      <span class=\"hljs-keyword\">get</span> &#123; <span class=\"hljs-keyword\">return</span> Descriptor; &#125;<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-title\">Num</span>(<span class=\"hljs-params\"></span>)</span> &#123;<br>      OnConstruction();<br>    &#125;<br><br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">partial</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">OnConstruction</span>(<span class=\"hljs-params\"></span>)</span>;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-title\">Num</span>(<span class=\"hljs-params\">Num other</span>) : <span class=\"hljs-title\">this</span>(<span class=\"hljs-params\"></span>)</span> &#123;<br>      num_ = other.num_;<br>      _unknownFields = pb::UnknownFieldSet.Clone(other._unknownFields);<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> Num <span class=\"hljs-title\">Clone</span>(<span class=\"hljs-params\"></span>)</span> &#123;<br>      <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> Num(<span class=\"hljs-keyword\">this</span>);<br>    &#125;<br><br>    <span class=\"hljs-comment\"><span class=\"hljs-doctag\">///</span> <span class=\"hljs-doctag\">&lt;summary&gt;</span>Field number for the &quot;num&quot; field.<span class=\"hljs-doctag\">&lt;/summary&gt;</span></span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">const</span> <span class=\"hljs-built_in\">int</span> Num_FieldNumber = <span class=\"hljs-number\">1</span>;<br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-built_in\">long</span> num_;<br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-built_in\">long</span> Num_ &#123;<br>      <span class=\"hljs-keyword\">get</span> &#123; <span class=\"hljs-keyword\">return</span> num_; &#125;<br>      <span class=\"hljs-keyword\">set</span> &#123;<br>        num_ = <span class=\"hljs-keyword\">value</span>;<br>      &#125;<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">override</span> <span class=\"hljs-built_in\">bool</span> <span class=\"hljs-title\">Equals</span>(<span class=\"hljs-params\"><span class=\"hljs-built_in\">object</span> other</span>)</span> &#123;<br>      <span class=\"hljs-keyword\">return</span> Equals(other <span class=\"hljs-keyword\">as</span> Num);<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-built_in\">bool</span> <span class=\"hljs-title\">Equals</span>(<span class=\"hljs-params\">Num other</span>)</span> &#123;<br>      <span class=\"hljs-keyword\">if</span> (ReferenceEquals(other, <span class=\"hljs-literal\">null</span>)) &#123;<br>        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">false</span>;<br>      &#125;<br>      <span class=\"hljs-keyword\">if</span> (ReferenceEquals(other, <span class=\"hljs-keyword\">this</span>)) &#123;<br>        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">true</span>;<br>      &#125;<br>      <span class=\"hljs-keyword\">if</span> (Num_ != other.Num_) <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">false</span>;<br>      <span class=\"hljs-keyword\">return</span> Equals(_unknownFields, other._unknownFields);<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">override</span> <span class=\"hljs-built_in\">int</span> <span class=\"hljs-title\">GetHashCode</span>(<span class=\"hljs-params\"></span>)</span> &#123;<br>      <span class=\"hljs-built_in\">int</span> hash = <span class=\"hljs-number\">1</span>;<br>      <span class=\"hljs-keyword\">if</span> (Num_ != <span class=\"hljs-number\">0L</span>) hash ^= Num_.GetHashCode();<br>      <span class=\"hljs-keyword\">if</span> (_unknownFields != <span class=\"hljs-literal\">null</span>) &#123;<br>        hash ^= _unknownFields.GetHashCode();<br>      &#125;<br>      <span class=\"hljs-keyword\">return</span> hash;<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">override</span> <span class=\"hljs-built_in\">string</span> <span class=\"hljs-title\">ToString</span>(<span class=\"hljs-params\"></span>)</span> &#123;<br>      return pb::JsonFormatter.ToDiagnosticString(this);<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">WriteTo</span>(<span class=\"hljs-params\">pb::CodedOutputStream output</span>)</span> &#123;<br>      <span class=\"hljs-keyword\">if</span> (Num_ != <span class=\"hljs-number\">0L</span>) &#123;<br>        output.WriteRawTag(<span class=\"hljs-number\">8</span>);<br>        output.WriteInt64(Num_);<br>      &#125;<br>      <span class=\"hljs-keyword\">if</span> (_unknownFields != <span class=\"hljs-literal\">null</span>) &#123;<br>        _unknownFields.WriteTo(output);<br>      &#125;<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-built_in\">int</span> <span class=\"hljs-title\">CalculateSize</span>(<span class=\"hljs-params\"></span>)</span> &#123;<br>      <span class=\"hljs-built_in\">int</span> size = <span class=\"hljs-number\">0</span>;<br>      <span class=\"hljs-keyword\">if</span> (Num_ != <span class=\"hljs-number\">0L</span>) &#123;<br>        size += 1 + pb::CodedOutputStream.ComputeInt64Size(Num_);<br>      &#125;<br>      <span class=\"hljs-keyword\">if</span> (_unknownFields != <span class=\"hljs-literal\">null</span>) &#123;<br>        size += _unknownFields.CalculateSize();<br>      &#125;<br>      <span class=\"hljs-keyword\">return</span> size;<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">MergeFrom</span>(<span class=\"hljs-params\">Num other</span>)</span> &#123;<br>      <span class=\"hljs-keyword\">if</span> (other == <span class=\"hljs-literal\">null</span>) &#123;<br>        <span class=\"hljs-keyword\">return</span>;<br>      &#125;<br>      <span class=\"hljs-keyword\">if</span> (other.Num_ != <span class=\"hljs-number\">0L</span>) &#123;<br>        Num_ = other.Num_;<br>      &#125;<br>      _unknownFields = pb::UnknownFieldSet.MergeFrom(_unknownFields, other._unknownFields);<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">MergeFrom</span>(<span class=\"hljs-params\">pb::CodedInputStream input</span>)</span> &#123;<br>      uint tag;<br>      <span class=\"hljs-keyword\">while</span> ((tag = input.ReadTag()) != <span class=\"hljs-number\">0</span>) &#123;<br>        <span class=\"hljs-keyword\">switch</span>(tag) &#123;<br>          <span class=\"hljs-literal\">default</span>:<br>            _unknownFields = pb::UnknownFieldSet.MergeFieldFrom(_unknownFields, input);<br>            <span class=\"hljs-keyword\">break</span>;<br>          <span class=\"hljs-keyword\">case</span> <span class=\"hljs-number\">8</span>: &#123;<br>            Num_ = input.ReadInt64();<br>            <span class=\"hljs-keyword\">break</span>;<br>          &#125;<br>        &#125;<br>      &#125;<br>    &#125;<br><br>  &#125;<br><br>  <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">sealed</span> <span class=\"hljs-keyword\">partial</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">FibReply</span> : <span class=\"hljs-title\">pb</span>::<span class=\"hljs-title\">IMessage</span>&lt;<span class=\"hljs-title\">FibReply</span>&gt; &#123;<br>    private static readonly pb::MessageParser&lt;FibReply&gt; _parser = new pb::MessageParser&lt;FibReply&gt;(() =&gt; new FibReply());<br>    private pb::UnknownFieldSet _unknownFields;<br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    public static pb::MessageParser&lt;FibReply&gt; Parser &#123; get &#123; return _parser; &#125; &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    public static pbr::MessageDescriptor Descriptor &#123;<br>      get &#123; return global::Math.MathReflection.Descriptor.MessageTypes[4]; &#125;<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    pbr::MessageDescriptor pb::IMessage.Descriptor &#123;<br>      <span class=\"hljs-keyword\">get</span> &#123; <span class=\"hljs-keyword\">return</span> Descriptor; &#125;<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-title\">FibReply</span>(<span class=\"hljs-params\"></span>)</span> &#123;<br>      OnConstruction();<br>    &#125;<br><br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">partial</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">OnConstruction</span>(<span class=\"hljs-params\"></span>)</span>;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-title\">FibReply</span>(<span class=\"hljs-params\">FibReply other</span>) : <span class=\"hljs-title\">this</span>(<span class=\"hljs-params\"></span>)</span> &#123;<br>      count_ = other.count_;<br>      _unknownFields = pb::UnknownFieldSet.Clone(other._unknownFields);<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> FibReply <span class=\"hljs-title\">Clone</span>(<span class=\"hljs-params\"></span>)</span> &#123;<br>      <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> FibReply(<span class=\"hljs-keyword\">this</span>);<br>    &#125;<br><br>    <span class=\"hljs-comment\"><span class=\"hljs-doctag\">///</span> <span class=\"hljs-doctag\">&lt;summary&gt;</span>Field number for the &quot;count&quot; field.<span class=\"hljs-doctag\">&lt;/summary&gt;</span></span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">const</span> <span class=\"hljs-built_in\">int</span> CountFieldNumber = <span class=\"hljs-number\">1</span>;<br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-built_in\">long</span> count_;<br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-built_in\">long</span> Count &#123;<br>      <span class=\"hljs-keyword\">get</span> &#123; <span class=\"hljs-keyword\">return</span> count_; &#125;<br>      <span class=\"hljs-keyword\">set</span> &#123;<br>        count_ = <span class=\"hljs-keyword\">value</span>;<br>      &#125;<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">override</span> <span class=\"hljs-built_in\">bool</span> <span class=\"hljs-title\">Equals</span>(<span class=\"hljs-params\"><span class=\"hljs-built_in\">object</span> other</span>)</span> &#123;<br>      <span class=\"hljs-keyword\">return</span> Equals(other <span class=\"hljs-keyword\">as</span> FibReply);<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-built_in\">bool</span> <span class=\"hljs-title\">Equals</span>(<span class=\"hljs-params\">FibReply other</span>)</span> &#123;<br>      <span class=\"hljs-keyword\">if</span> (ReferenceEquals(other, <span class=\"hljs-literal\">null</span>)) &#123;<br>        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">false</span>;<br>      &#125;<br>      <span class=\"hljs-keyword\">if</span> (ReferenceEquals(other, <span class=\"hljs-keyword\">this</span>)) &#123;<br>        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">true</span>;<br>      &#125;<br>      <span class=\"hljs-keyword\">if</span> (Count != other.Count) <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">false</span>;<br>      <span class=\"hljs-keyword\">return</span> Equals(_unknownFields, other._unknownFields);<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">override</span> <span class=\"hljs-built_in\">int</span> <span class=\"hljs-title\">GetHashCode</span>(<span class=\"hljs-params\"></span>)</span> &#123;<br>      <span class=\"hljs-built_in\">int</span> hash = <span class=\"hljs-number\">1</span>;<br>      <span class=\"hljs-keyword\">if</span> (Count != <span class=\"hljs-number\">0L</span>) hash ^= Count.GetHashCode();<br>      <span class=\"hljs-keyword\">if</span> (_unknownFields != <span class=\"hljs-literal\">null</span>) &#123;<br>        hash ^= _unknownFields.GetHashCode();<br>      &#125;<br>      <span class=\"hljs-keyword\">return</span> hash;<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">override</span> <span class=\"hljs-built_in\">string</span> <span class=\"hljs-title\">ToString</span>(<span class=\"hljs-params\"></span>)</span> &#123;<br>      return pb::JsonFormatter.ToDiagnosticString(this);<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">WriteTo</span>(<span class=\"hljs-params\">pb::CodedOutputStream output</span>)</span> &#123;<br>      <span class=\"hljs-keyword\">if</span> (Count != <span class=\"hljs-number\">0L</span>) &#123;<br>        output.WriteRawTag(<span class=\"hljs-number\">8</span>);<br>        output.WriteInt64(Count);<br>      &#125;<br>      <span class=\"hljs-keyword\">if</span> (_unknownFields != <span class=\"hljs-literal\">null</span>) &#123;<br>        _unknownFields.WriteTo(output);<br>      &#125;<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-built_in\">int</span> <span class=\"hljs-title\">CalculateSize</span>(<span class=\"hljs-params\"></span>)</span> &#123;<br>      <span class=\"hljs-built_in\">int</span> size = <span class=\"hljs-number\">0</span>;<br>      <span class=\"hljs-keyword\">if</span> (Count != <span class=\"hljs-number\">0L</span>) &#123;<br>        size += 1 + pb::CodedOutputStream.ComputeInt64Size(Count);<br>      &#125;<br>      <span class=\"hljs-keyword\">if</span> (_unknownFields != <span class=\"hljs-literal\">null</span>) &#123;<br>        size += _unknownFields.CalculateSize();<br>      &#125;<br>      <span class=\"hljs-keyword\">return</span> size;<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">MergeFrom</span>(<span class=\"hljs-params\">FibReply other</span>)</span> &#123;<br>      <span class=\"hljs-keyword\">if</span> (other == <span class=\"hljs-literal\">null</span>) &#123;<br>        <span class=\"hljs-keyword\">return</span>;<br>      &#125;<br>      <span class=\"hljs-keyword\">if</span> (other.Count != <span class=\"hljs-number\">0L</span>) &#123;<br>        Count = other.Count;<br>      &#125;<br>      _unknownFields = pb::UnknownFieldSet.MergeFrom(_unknownFields, other._unknownFields);<br>    &#125;<br><br>    [<span class=\"hljs-meta\">global::System.Diagnostics.DebuggerNonUserCodeAttribute</span>]<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">MergeFrom</span>(<span class=\"hljs-params\">pb::CodedInputStream input</span>)</span> &#123;<br>      uint tag;<br>      <span class=\"hljs-keyword\">while</span> ((tag = input.ReadTag()) != <span class=\"hljs-number\">0</span>) &#123;<br>        <span class=\"hljs-keyword\">switch</span>(tag) &#123;<br>          <span class=\"hljs-literal\">default</span>:<br>            _unknownFields = pb::UnknownFieldSet.MergeFieldFrom(_unknownFields, input);<br>            <span class=\"hljs-keyword\">break</span>;<br>          <span class=\"hljs-keyword\">case</span> <span class=\"hljs-number\">8</span>: &#123;<br>            Count = input.ReadInt64();<br>            <span class=\"hljs-keyword\">break</span>;<br>          &#125;<br>        &#125;<br>      &#125;<br>    &#125;<br><br>  &#125;<br><br>  <span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">endregion</span></span><br>&#125;<br><span class=\"hljs-meta\">#<span class=\"hljs-meta-keyword\">endregion</span> Designer generated code</span><br></code></pre></td></tr></table></figure>\n\n\n<h1 id=\"Kotlin\"><a href=\"#Kotlin\" class=\"headerlink\" title=\"Kotlin\"></a>Kotlin</h1><figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br><span class=\"line\">252</span><br><span class=\"line\">253</span><br><span class=\"line\">254</span><br><span class=\"line\">255</span><br><span class=\"line\">256</span><br><span class=\"line\">257</span><br><span class=\"line\">258</span><br><span class=\"line\">259</span><br><span class=\"line\">260</span><br><span class=\"line\">261</span><br><span class=\"line\">262</span><br><span class=\"line\">263</span><br><span class=\"line\">264</span><br><span class=\"line\">265</span><br><span class=\"line\">266</span><br><span class=\"line\">267</span><br><span class=\"line\">268</span><br><span class=\"line\">269</span><br><span class=\"line\">270</span><br><span class=\"line\">271</span><br><span class=\"line\">272</span><br><span class=\"line\">273</span><br><span class=\"line\">274</span><br><span class=\"line\">275</span><br><span class=\"line\">276</span><br><span class=\"line\">277</span><br><span class=\"line\">278</span><br><span class=\"line\">279</span><br><span class=\"line\">280</span><br><span class=\"line\">281</span><br><span class=\"line\">282</span><br><span class=\"line\">283</span><br><span class=\"line\">284</span><br><span class=\"line\">285</span><br><span class=\"line\">286</span><br><span class=\"line\">287</span><br><span class=\"line\">288</span><br><span class=\"line\">289</span><br><span class=\"line\">290</span><br><span class=\"line\">291</span><br><span class=\"line\">292</span><br><span class=\"line\">293</span><br><span class=\"line\">294</span><br><span class=\"line\">295</span><br><span class=\"line\">296</span><br><span class=\"line\">297</span><br><span class=\"line\">298</span><br><span class=\"line\">299</span><br><span class=\"line\">300</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs kotlin\"><span class=\"hljs-keyword\">package</span> liang.cxx.rommel.evaluationbar<br><br><span class=\"hljs-keyword\">import</span> android.content.Context<br><span class=\"hljs-keyword\">import</span> android.graphics.*<br><span class=\"hljs-keyword\">import</span> android.util.AttributeSet<br><span class=\"hljs-keyword\">import</span> android.view.MotionEvent<br><span class=\"hljs-keyword\">import</span> android.view.View<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * Created by Rommel on 2017/12/1.</span><br><span class=\"hljs-comment\"> */</span><br><br><span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">EvaluationProgressBar</span> : <span class=\"hljs-type\">View &#123;</span></span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">var</span> m_density: <span class=\"hljs-built_in\">Float</span> = <span class=\"hljs-number\">0.0f</span><span class=\"hljs-comment\">//dp</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">var</span> img_height: <span class=\"hljs-built_in\">Int</span> = <span class=\"hljs-number\">30</span><span class=\"hljs-comment\">//滑块和进度条高度(默认三十)</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">var</span> m_content: Context? = <span class=\"hljs-literal\">null</span><br>    <span class=\"hljs-comment\">//滑块样式</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">var</span> slider: Bitmap? = <span class=\"hljs-literal\">null</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">var</span> m_laughing: Bitmap? = <span class=\"hljs-literal\">null</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">var</span> m_satisfactiong: Bitmap? = <span class=\"hljs-literal\">null</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">var</span> m_sad: Bitmap? = <span class=\"hljs-literal\">null</span><br>    <span class=\"hljs-comment\">//滑块位置</span><br>    <span class=\"hljs-keyword\">var</span> image_postion: <span class=\"hljs-built_in\">Float</span> = <span class=\"hljs-number\">0.0f</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-comment\">//滑块宽度</span><br>    <span class=\"hljs-keyword\">var</span> image_weight: <span class=\"hljs-built_in\">Float</span> = <span class=\"hljs-number\">0.0f</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-comment\">//控件的宽和高</span><br>    <span class=\"hljs-keyword\">var</span> m_weight: <span class=\"hljs-built_in\">Float</span> = <span class=\"hljs-number\">0.0f</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">var</span> m_height: <span class=\"hljs-built_in\">Float</span> = <span class=\"hljs-number\">0.0f</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-comment\">//每段的长度</span><br>    <span class=\"hljs-keyword\">var</span> m_cell: <span class=\"hljs-built_in\">Float</span> = <span class=\"hljs-number\">0.0f</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-comment\">//是否为第一次加载</span><br>    <span class=\"hljs-keyword\">var</span> is_first = <span class=\"hljs-literal\">true</span><br>    <span class=\"hljs-comment\">//画笔</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">var</span> m_color_back: Paint? = <span class=\"hljs-literal\">null</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">var</span> m_color_back_line: Paint? = <span class=\"hljs-literal\">null</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">var</span> m_color_back_diver_one: Paint? = <span class=\"hljs-literal\">null</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">var</span> m_color_back_diver_two: Paint? = <span class=\"hljs-literal\">null</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">var</span> m_color_back_wall: Paint? = <span class=\"hljs-literal\">null</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">var</span> back_line = <span class=\"hljs-string\">&quot;#C7C7C7&quot;</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">var</span> back_sad = <span class=\"hljs-string\">&quot;#CECECE&quot;</span><span class=\"hljs-comment\">//差评背景</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">var</span> back_satisfactiong = <span class=\"hljs-string\">&quot;#FFEAB0&quot;</span><span class=\"hljs-comment\">//中评背景</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">var</span> back_satisfactiong_line = <span class=\"hljs-string\">&quot;#FFD68C&quot;</span><span class=\"hljs-comment\">//中评线框</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">var</span> back_laughing = <span class=\"hljs-string\">&quot;#FFBBBB&quot;</span><span class=\"hljs-comment\">//好评背景</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">var</span> back_laughing_line = <span class=\"hljs-string\">&quot;#FF9F9F&quot;</span><span class=\"hljs-comment\">//好评背景</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">var</span> back_baseground = <span class=\"hljs-string\">&quot;#F8F8F8&quot;</span><span class=\"hljs-comment\">//好评背景</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">var</span> back_satisfactiong_diver = <span class=\"hljs-string\">&quot;#FFD68C&quot;</span><span class=\"hljs-comment\">//中评分割线</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">var</span> back_laughing_diver = <span class=\"hljs-string\">&quot;#FF9F9F&quot;</span><span class=\"hljs-comment\">//好评分割线</span><br>    <span class=\"hljs-comment\">//触摸和滑动是否在滑块上</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">var</span> is_touch_scope = <span class=\"hljs-literal\">false</span><br><br>    <span class=\"hljs-comment\">//滑动监听事件</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">var</span> volChangeListener: VolChangeListener? = <span class=\"hljs-literal\">null</span><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">var</span> vol = <span class=\"hljs-number\">2</span><br><br>    <span class=\"hljs-keyword\">constructor</span>(context: Context) : <span class=\"hljs-keyword\">super</span>(context) &#123;<br>        <span class=\"hljs-keyword\">init</span>(context)<br>    &#125;<br><br>    <span class=\"hljs-keyword\">constructor</span>(context: Context, attrs: AttributeSet?) : <span class=\"hljs-keyword\">super</span>(context, attrs) &#123;<br>        <span class=\"hljs-keyword\">init</span>(context)<br>    &#125;<br><br>    <span class=\"hljs-keyword\">constructor</span>(context: Context, attrs: AttributeSet?, defStyleAttr: <span class=\"hljs-built_in\">Int</span>) : <span class=\"hljs-keyword\">super</span>(context, attrs, defStyleAttr) &#123;<br>        <span class=\"hljs-keyword\">init</span>(context)<br>    &#125;<br><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">init</span><span class=\"hljs-params\">(context: <span class=\"hljs-type\">Context</span>)</span></span> &#123;<br>        m_density = context.resources.displayMetrics.density<br>        m_laughing = zoomImg(BitmapFactory.decodeResource(resources, R.mipmap.icon_laughing))<br>        m_satisfactiong = zoomImg(BitmapFactory.decodeResource(resources, R.mipmap.icon_satisfaction))<br>        m_sad = zoomImg(BitmapFactory.decodeResource(resources, R.mipmap.icon_sad))<br>        image_weight = m_laughing!!.width.toFloat()<br>        m_content = context<br>        m_height = (m_laughing!!.height + <span class=\"hljs-number\">1</span>).toFloat()<br>        <span class=\"hljs-comment\">//画笔初始化</span><br>        m_color_back = Paint()<br>        m_color_back_line = Paint()<br>        m_color_back_line!!.style = Paint.Style.STROKE<br>        m_color_back_line!!.isAntiAlias = <span class=\"hljs-literal\">true</span><br>        m_color_back_line!!.strokeMiter = <span class=\"hljs-number\">1.0f</span><br>        m_color_back_diver_one = Paint()<br>        m_color_back_diver_two = Paint()<br>        m_color_back_diver_one!!.strokeMiter = <span class=\"hljs-number\">1.0F</span><br>        m_color_back_diver_two!!.strokeMiter = <span class=\"hljs-number\">1.0F</span><br>        m_color_back_wall = Paint()<br>        m_color_back_wall!!.color = Color.parseColor(back_line)<br>        m_color_back_wall!!.style = Paint.Style.STROKE<br>        m_color_back_wall!!.isAntiAlias = <span class=\"hljs-literal\">true</span><br>        m_color_back_wall!!.strokeWidth = <span class=\"hljs-number\">1.0f</span><br>    &#125;<br><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onDraw</span><span class=\"hljs-params\">(canvas: <span class=\"hljs-type\">Canvas</span>)</span></span> &#123;<br>        <span class=\"hljs-keyword\">super</span>.onDraw(canvas)<br>        canvas.drawFilter = PaintFlagsDrawFilter(<span class=\"hljs-number\">0</span>, Paint.ANTI_ALIAS_FLAG or Paint.FILTER_BITMAP_FLAG)<br>        image_postion = <span class=\"hljs-keyword\">if</span> (image_postion &lt; image_weight / <span class=\"hljs-number\">2</span>) image_weight / <span class=\"hljs-number\">2</span> <span class=\"hljs-keyword\">else</span> image_postion<br>        image_postion = <span class=\"hljs-keyword\">if</span> (image_postion &gt; m_weight - image_weight / <span class=\"hljs-number\">2</span>) m_weight - image_weight / <span class=\"hljs-number\">2</span> <span class=\"hljs-keyword\">else</span> image_postion<br>        <span class=\"hljs-keyword\">if</span> (image_postion &lt;= m_cell) &#123;<br>            <span class=\"hljs-comment\">//差评</span><br>            slider = m_sad<br>            m_color_back!!.color = Color.parseColor(back_sad)<br>            m_color_back_line!!.color = Color.parseColor(back_line)<br>        &#125; <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (image_postion &gt; m_cell &amp;&amp; image_postion &lt;= m_cell * <span class=\"hljs-number\">2</span>) &#123;<br>            <span class=\"hljs-comment\">//中评</span><br>            slider = m_satisfactiong<br>            m_color_back!!.color = Color.parseColor(back_satisfactiong)<br>            m_color_back_line!!.color = Color.parseColor(back_satisfactiong_line)<br>        &#125; <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (image_postion &gt; m_cell * <span class=\"hljs-number\">2</span>) &#123;<br>            <span class=\"hljs-comment\">//好评</span><br>            slider = m_laughing<br>            m_color_back!!.color = Color.parseColor(back_laughing)<br>            m_color_back_line!!.color = Color.parseColor(back_laughing_line)<br>        &#125;<br>        drawWall(canvas)<br>        drawBckground(canvas)<br>        drawDiverLine(canvas)<br>        drawImage(canvas)<br>    &#125;<br><br>    <span class=\"hljs-comment\">//绘制最外层线和整体背景</span><br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">drawWall</span><span class=\"hljs-params\">(canvas: <span class=\"hljs-type\">Canvas</span>)</span></span> &#123;<br>        <span class=\"hljs-comment\">//外边框</span><br>        <span class=\"hljs-keyword\">var</span> rectf = RectF(<span class=\"hljs-number\">2f</span>, <span class=\"hljs-number\">0f</span>, m_weight, m_height)<br>        canvas.drawRoundRect(rectf, m_height / <span class=\"hljs-number\">2</span>, m_height / <span class=\"hljs-number\">2</span>, m_color_back_wall)<br>        <span class=\"hljs-comment\">//基础背景</span><br>        <span class=\"hljs-keyword\">var</span> back_base = RectF(<span class=\"hljs-number\">3f</span>, <span class=\"hljs-number\">1f</span>, m_weight - <span class=\"hljs-number\">1</span>, m_height - <span class=\"hljs-number\">1</span>)<br>        <span class=\"hljs-keyword\">var</span> back_base_color = Paint()<br>        back_base_color.color = Color.parseColor(back_baseground)<br>        canvas.drawRoundRect(back_base, m_height / <span class=\"hljs-number\">2</span>, m_height / <span class=\"hljs-number\">2</span>, back_base_color)<br>    &#125;<br><br>    <span class=\"hljs-comment\">//绘制进度颜色</span><br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">drawBckground</span><span class=\"hljs-params\">(canvas: <span class=\"hljs-type\">Canvas</span>)</span></span> &#123;<br>        <span class=\"hljs-keyword\">var</span> rectf = RectF(<span class=\"hljs-number\">2f</span>, <span class=\"hljs-number\">1f</span>, image_postion + image_weight / <span class=\"hljs-number\">2</span> - <span class=\"hljs-number\">1</span>, m_height - <span class=\"hljs-number\">1</span>)<br>        canvas.drawRoundRect(rectf, m_height / <span class=\"hljs-number\">2</span>, m_height / <span class=\"hljs-number\">2</span>, m_color_back)<br>    &#125;<br><br>    <span class=\"hljs-comment\">//根据滑块位置改变边框和分割线颜色</span><br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">drawDiverLine</span><span class=\"hljs-params\">(canvas: <span class=\"hljs-type\">Canvas</span>)</span></span> &#123;<br>        <span class=\"hljs-comment\">//根据滑块位置改变外层边框颜色</span><br>        <span class=\"hljs-keyword\">var</span> rectF = RectF(<span class=\"hljs-number\">2f</span>, <span class=\"hljs-number\">0f</span>, image_postion + image_weight / <span class=\"hljs-number\">2</span>, m_height)<br>        canvas.drawRoundRect(rectF, m_height / <span class=\"hljs-number\">2</span>, m_height / <span class=\"hljs-number\">2</span>, m_color_back_line)<br>        <span class=\"hljs-keyword\">if</span> (image_postion &lt;= m_cell) &#123;<br>            <span class=\"hljs-comment\">//差评</span><br>            m_color_back_diver_one!!.color = Color.parseColor(back_line)<br>            canvas.drawLine(m_weight / <span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">0f</span>, m_weight / <span class=\"hljs-number\">3</span>, m_height, m_color_back_diver_one)<br>            m_color_back_diver_two!!.color = Color.parseColor(back_line)<br>            canvas.drawLine(m_weight * <span class=\"hljs-number\">2</span> / <span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">0f</span>, m_weight * <span class=\"hljs-number\">2</span> / <span class=\"hljs-number\">3</span>, m_height, m_color_back_diver_two)<br>        &#125; <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (image_postion &gt; m_cell &amp;&amp; image_postion &lt;= m_cell * <span class=\"hljs-number\">2</span>) &#123;<br>            <span class=\"hljs-comment\">//中评</span><br>            m_color_back_diver_one!!.color = Color.parseColor(back_satisfactiong_diver)<br>            canvas.drawLine(m_weight / <span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">0f</span>, m_weight / <span class=\"hljs-number\">3</span>, m_height, m_color_back_diver_one)<br>            m_color_back_diver_two!!.color = Color.parseColor(back_line)<br>            canvas.drawLine(m_weight * <span class=\"hljs-number\">2</span> / <span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">0f</span>, m_weight * <span class=\"hljs-number\">2</span> / <span class=\"hljs-number\">3</span>, m_height, m_color_back_diver_two)<br>        &#125; <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (image_postion &gt; m_cell * <span class=\"hljs-number\">2</span>) &#123;<br>            <span class=\"hljs-comment\">//好评</span><br>            m_color_back_diver_one!!.color = Color.parseColor(back_laughing_diver)<br>            canvas.drawLine(m_weight / <span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">0f</span>, m_weight / <span class=\"hljs-number\">3</span>, m_height, m_color_back_diver_one)<br>            m_color_back_diver_two!!.color = Color.parseColor(back_laughing_diver)<br>            canvas.drawLine(m_weight * <span class=\"hljs-number\">2</span> / <span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">0f</span>, m_weight * <span class=\"hljs-number\">2</span> / <span class=\"hljs-number\">3</span>, m_height, m_color_back_diver_two)<br>        &#125;<br>    &#125;<br><br>    <span class=\"hljs-comment\">//绘制滑块</span><br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">drawImage</span><span class=\"hljs-params\">(canvas: <span class=\"hljs-type\">Canvas</span>)</span></span> &#123;<br>        canvas.drawBitmap(slider, image_postion - image_weight / <span class=\"hljs-number\">2</span> - <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">1f</span>, Paint())<br>    &#125;<br><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onLayout</span><span class=\"hljs-params\">(changed: <span class=\"hljs-type\">Boolean</span>, left: <span class=\"hljs-type\">Int</span>, top: <span class=\"hljs-type\">Int</span>, right: <span class=\"hljs-type\">Int</span>, bottom: <span class=\"hljs-type\">Int</span>)</span></span> &#123;<br>        <span class=\"hljs-keyword\">super</span>.onLayout(changed, left, top, right, bottom)<br>        m_weight = (width - <span class=\"hljs-number\">2</span>).toFloat()<br>        m_cell = m_weight / <span class=\"hljs-number\">3</span><br>        <span class=\"hljs-keyword\">if</span> (is_first) &#123;<br>            <span class=\"hljs-comment\">//首次加载默认值</span><br>            image_postion = m_weight * <span class=\"hljs-number\">2</span> / <span class=\"hljs-number\">3</span><br>            is_first = <span class=\"hljs-literal\">false</span><br>        &#125;<br><br>    &#125;<br><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onMeasure</span><span class=\"hljs-params\">(widthMeasureSpec: <span class=\"hljs-type\">Int</span>, heightMeasureSpec: <span class=\"hljs-type\">Int</span>)</span></span> &#123;<br>        <span class=\"hljs-keyword\">super</span>.onMeasure(widthMeasureSpec, heightMeasureSpec)<br>        <span class=\"hljs-keyword\">var</span> width = getSize((<span class=\"hljs-number\">200</span> * m_density).toInt(), widthMeasureSpec)<br>        <span class=\"hljs-keyword\">var</span> height = getSize(m_laughing!!.width + <span class=\"hljs-number\">1</span>, heightMeasureSpec)<br>        setMeasuredDimension(width, height)<br>    &#125;<br><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">getSize</span><span class=\"hljs-params\">(defaultSize: <span class=\"hljs-type\">Int</span>, measureSpec: <span class=\"hljs-type\">Int</span>)</span></span>: <span class=\"hljs-built_in\">Int</span> &#123;<br>        <span class=\"hljs-keyword\">var</span> m_size = defaultSize<br>        <span class=\"hljs-keyword\">var</span> mode = View.MeasureSpec.getMode(measureSpec)<br>        <span class=\"hljs-keyword\">var</span> size = MeasureSpec.getSize(measureSpec)<br>        <span class=\"hljs-keyword\">when</span> (mode) &#123;<br>            MeasureSpec.AT_MOST -&gt; &#123;<br>                <span class=\"hljs-comment\">//当前尺寸是当前View能取的最大尺寸-wrap_content</span><br>                m_size = defaultSize<br>            &#125;<br>            MeasureSpec.EXACTLY -&gt; &#123;<br>                <span class=\"hljs-comment\">//当前的尺寸就是当前View应该取的尺寸-match_parent</span><br>                m_size = size<br>            &#125;<br>            MeasureSpec.UNSPECIFIED -&gt; &#123;<br>                <span class=\"hljs-comment\">//父容器没有对当前View有任何限制，当前View可以任意取尺寸-固定尺寸（如100dp</span><br>                m_size = size<br>            &#125;<br>        &#125;<br>        <span class=\"hljs-keyword\">return</span> m_size<br>    &#125;<br><br>    <span class=\"hljs-keyword\">override</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onTouchEvent</span><span class=\"hljs-params\">(event: <span class=\"hljs-type\">MotionEvent</span>)</span></span>: <span class=\"hljs-built_in\">Boolean</span> &#123;<br>        <span class=\"hljs-keyword\">var</span> x_postion = event.x<br>        <span class=\"hljs-keyword\">when</span> (event.action) &#123;<br>            MotionEvent.ACTION_DOWN -&gt; &#123;<br>                <span class=\"hljs-keyword\">if</span> (x_postion &gt; image_postion - image_weight / <span class=\"hljs-number\">2</span><br>                        &amp;&amp; x &lt; image_postion + image_weight / <span class=\"hljs-number\">2</span>) &#123;<br>                    <span class=\"hljs-comment\">//触摸事件在滑块上</span><br>                    image_postion = x_postion<br>                    is_touch_scope = <span class=\"hljs-literal\">true</span><br>                &#125; <span class=\"hljs-keyword\">else</span> &#123;<br>                    <span class=\"hljs-comment\">//触摸事件不在滑块上</span><br>                    image_postion = x_postion<br>                    setImgPostion()<br>                    invalidate()<br>                    onChange()<br>                    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">false</span><br>                &#125;<br>            &#125;<br>            MotionEvent.ACTION_MOVE -&gt; &#123;<br>                <span class=\"hljs-keyword\">if</span> (is_touch_scope) &#123;<br>                    image_postion = x_postion<br>                    invalidate()<br>                    onChange()<br>                &#125;<br>            &#125;<br>            MotionEvent.ACTION_UP -&gt; &#123;<br>                <span class=\"hljs-keyword\">if</span> (is_touch_scope) &#123;<br>                    is_touch_scope = <span class=\"hljs-literal\">false</span><br>                    setImgPostion()<br>                &#125;<br>            &#125;<br>            MotionEvent.ACTION_CANCEL -&gt; &#123;<br>                <span class=\"hljs-keyword\">if</span> (is_touch_scope) &#123;<br>                    is_touch_scope = <span class=\"hljs-literal\">false</span><br>                    setImgPostion()<br>                &#125;<br>            &#125;<br>        &#125;<br>        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">true</span><br>    &#125;<br><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">setImgPostion</span><span class=\"hljs-params\">()</span></span> &#123;<br>        <span class=\"hljs-comment\">//松手后滑块走到指定的位置</span><br>        <span class=\"hljs-keyword\">if</span> (image_postion &lt;= m_cell) &#123;<br>            <span class=\"hljs-comment\">//差评</span><br>            image_postion = m_cell<br>        &#125; <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (image_postion &gt; m_cell &amp;&amp; image_postion &lt;= m_cell * <span class=\"hljs-number\">2</span>) &#123;<br>            <span class=\"hljs-comment\">//中评</span><br>            image_postion = m_cell * <span class=\"hljs-number\">2</span><br>        &#125; <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (image_postion &gt; m_cell * <span class=\"hljs-number\">2</span>) &#123;<br>            <span class=\"hljs-comment\">//好评</span><br>            image_postion = m_cell * <span class=\"hljs-number\">3</span><br>        &#125;<br>        invalidate()<br>        onChange()<br>    &#125;<br><br>    <span class=\"hljs-comment\">//滑块位置变化监听</span><br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onChange</span><span class=\"hljs-params\">()</span></span> &#123;<br>        <span class=\"hljs-keyword\">if</span> (volChangeListener != <span class=\"hljs-literal\">null</span>) &#123;<br>            <span class=\"hljs-keyword\">if</span> (image_postion &lt;= m_cell) &#123;<br>                vol = <span class=\"hljs-number\">1</span><br>            &#125; <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (image_postion &gt; m_cell &amp;&amp; image_postion &lt;= <span class=\"hljs-number\">2</span> * m_cell) &#123;<br>                vol = <span class=\"hljs-number\">2</span><br>            &#125; <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (image_postion &gt; <span class=\"hljs-number\">2</span> * m_cell) &#123;<br>                vol = <span class=\"hljs-number\">3</span><br>            &#125;<br>            volChangeListener!!.onVolChange(vol)<br>        &#125;<br>    &#125;<br><br>    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">zoomImg</span><span class=\"hljs-params\">(btm: <span class=\"hljs-type\">Bitmap</span>)</span></span>: Bitmap &#123;<br>        <span class=\"hljs-comment\">//获取图片宽高</span><br>        <span class=\"hljs-keyword\">var</span> width = btm.width<br>        <span class=\"hljs-keyword\">var</span> height = btm.height<br>        <span class=\"hljs-comment\">//计算缩放比例</span><br>        <span class=\"hljs-keyword\">var</span> scaleWidth = (img_height * m_density) / width<br>        <span class=\"hljs-keyword\">var</span> scaleHeight = (img_height * m_density) / height<br>        <span class=\"hljs-comment\">//获取Matrix参数</span><br>        <span class=\"hljs-keyword\">var</span> matrix = Matrix()<br>        matrix.postScale(scaleWidth, scaleHeight)<br>        <span class=\"hljs-comment\">//返回新的图片</span><br>        <span class=\"hljs-keyword\">return</span> Bitmap.createBitmap(btm, <span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">0</span>, width, height, matrix, <span class=\"hljs-literal\">true</span>)<br>    &#125;<br><br>    <span class=\"hljs-class\"><span class=\"hljs-keyword\">interface</span> <span class=\"hljs-title\">VolChangeListener</span> </span>&#123;<br>        <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">onVolChange</span><span class=\"hljs-params\">(vol: <span class=\"hljs-type\">Int</span>)</span></span><br>    &#125;<br><br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">volVhangeListener</span><span class=\"hljs-params\">(volChangeListener :<span class=\"hljs-type\">VolChangeListener</span>)</span></span> &#123;<br>        <span class=\"hljs-keyword\">this</span>.volChangeListener = volChangeListener<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>\n\n\n<h1 id=\"HTML\"><a href=\"#HTML\" class=\"headerlink\" title=\"HTML\"></a>HTML</h1><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">xmp</span>&gt;</span><br><span class=\"hljs-meta\">&lt;!DOCTYPE <span class=\"hljs-meta-keyword\">html</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">html</span> <span class=\"hljs-attr\">lang</span>=<span class=\"hljs-string\">&quot;zh&quot;</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">head</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">meta</span> <span class=\"hljs-attr\">charset</span>=<span class=\"hljs-string\">&quot;UTF-8&quot;</span>&gt;</span><br>\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">meta</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;viewport&quot;</span> <span class=\"hljs-attr\">content</span>=<span class=\"hljs-string\">&quot;width=device-width, </span></span><br><span class=\"hljs-tag\"><span class=\"hljs-string\">                                 initial-scale=1.0, </span></span><br><span class=\"hljs-tag\"><span class=\"hljs-string\">                                 maximum-scale=1.0, </span></span><br><span class=\"hljs-tag\"><span class=\"hljs-string\">                                 user-scalable=no&quot;</span>&gt;</span><br>\t<br>\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">link</span> <span class=\"hljs-attr\">rel</span>=<span class=\"hljs-string\">&quot;stylesheet&quot;</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;http://cdn.staticfile.org/twitter-bootstrap/3.3.6/css/bootstrap.min.css&quot;</span>&gt;</span><br>\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">link</span> <span class=\"hljs-attr\">rel</span>=<span class=\"hljs-string\">&quot;stylesheet&quot;</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;http://cdn.staticfile.org/twitter-bootstrap/3.3.6/css/bootstrap-theme.min.css&quot;</span>&gt;</span><br>\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span> <span class=\"hljs-attr\">src</span>=<span class=\"hljs-string\">&quot;http://cdn.staticfile.org/jquery/2.1.4/jquery.min.js&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span><br>\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span> <span class=\"hljs-attr\">src</span>=<span class=\"hljs-string\">&quot;http://cdn.staticfile.org/twitter-bootstrap/3.3.6/js/bootstrap.min.js&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span><br><br>\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">title</span>&gt;</span>测试一下bootstrap<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">title</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">head</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">body</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;container&quot;</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">ol</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;breadcrumb&quot;</span>&gt;</span><br>  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;#&quot;</span>&gt;</span>主页<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br>  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;#&quot;</span>&gt;</span>新闻资讯<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br>  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;active&quot;</span>&gt;</span>新闻正文<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">ol</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;page-header&quot;</span>&gt;</span><br>  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">h1</span>&gt;</span>这是新闻的标题<br>  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">br</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">small</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">small</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">h1</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span><br>\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;sstarter-template&quot;</span>&gt;</span><br>\t\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">p</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;lead&quot;</span>&gt;</span>Use this dow project.<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">br</span>&gt;</span> All yoy barebones HTML document.<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">p</span>&gt;</span><br>\t\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">p</span>&gt;</span>Google（中文名：谷歌），是一家美国的跨国科技企业，致力于互联网搜索、云计算、广告技术等领域，开发并提供大量基于互联网的产品与服务，其主要利润来自于AdWords等广告服务。Google由当时在斯坦福大学攻读理工博士的拉里·佩奇和谢尔盖·布卢姆共同创建，因此两人也被称为“Google Guys”。<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">p</span>&gt;</span><br>\t\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">p</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;lead&quot;</span>&gt;</span>这一段的内容<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">strong</span>&gt;</span>突出<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">strong</span>&gt;</span>显示看看效果<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">p</span>&gt;</span><br>\t\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">address</span>&gt;</span><br>  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">strong</span>&gt;</span>Twitter, Inc.<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">strong</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">br</span>&gt;</span><br>  795 Folsom Ave, Suite 600<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">br</span>&gt;</span><br>  San Francisco, CA 94107<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">br</span>&gt;</span><br>  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">abbr</span> <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;Phone&quot;</span>&gt;</span>P:<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">abbr</span>&gt;</span> (123) 456-7890<br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">address</span>&gt;</span><br><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">table</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;table table-striped&quot;</span>&gt;</span><br>      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">thead</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">tr</span>&gt;</span><br>          <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">th</span>&gt;</span>#<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">th</span>&gt;</span><br>          <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">th</span>&gt;</span>First Name<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">th</span>&gt;</span><br>          <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">th</span>&gt;</span>Last Name<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">th</span>&gt;</span><br>          <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">th</span>&gt;</span>Username<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">th</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">tr</span>&gt;</span><br>      <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">thead</span>&gt;</span><br>      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">tbody</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">tr</span>&gt;</span><br>          <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">th</span> <span class=\"hljs-attr\">scope</span>=<span class=\"hljs-string\">&quot;row&quot;</span>&gt;</span>1<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">th</span>&gt;</span><br>          <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">td</span>&gt;</span>Mark<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">td</span>&gt;</span><br>          <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">td</span>&gt;</span>Otto<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">td</span>&gt;</span><br>          <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">td</span>&gt;</span>@mdo<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">td</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">tr</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">tr</span>&gt;</span><br>          <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">th</span> <span class=\"hljs-attr\">scope</span>=<span class=\"hljs-string\">&quot;row&quot;</span>&gt;</span>2<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">th</span>&gt;</span><br>          <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">td</span>&gt;</span>Jacob<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">td</span>&gt;</span><br>          <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">td</span>&gt;</span>Thornton<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">td</span>&gt;</span><br>          <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">td</span>&gt;</span>@fat<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">td</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">tr</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">tr</span>&gt;</span><br>          <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">th</span> <span class=\"hljs-attr\">scope</span>=<span class=\"hljs-string\">&quot;row&quot;</span>&gt;</span>3<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">th</span>&gt;</span><br>          <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">td</span>&gt;</span>Larry<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">td</span>&gt;</span><br>          <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">td</span>&gt;</span>the Bird<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">td</span>&gt;</span><br>          <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">td</span>&gt;</span>@twitter<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">td</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">tr</span>&gt;</span><br>      <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">tbody</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">table</span>&gt;</span><br>\t<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span><br>\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;progress&quot;</span>&gt;</span><br>  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;progress-bar progress-bar-danger progress-bar-striped active&quot;</span> <span class=\"hljs-attr\">role</span>=<span class=\"hljs-string\">&quot;progressbar&quot;</span> <span class=\"hljs-attr\">aria-valuenow</span>=<span class=\"hljs-string\">&quot;45&quot;</span> <span class=\"hljs-attr\">aria-valuemin</span>=<span class=\"hljs-string\">&quot;0&quot;</span> <span class=\"hljs-attr\">aria-valuemax</span>=<span class=\"hljs-string\">&quot;100&quot;</span> <span class=\"hljs-attr\">style</span>=<span class=\"hljs-string\">&quot;width: 80%&quot;</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">span</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;sr-only&quot;</span>&gt;</span>45% Complete<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">span</span>&gt;</span><br>  <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span><br>\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">nav</span>&gt;</span><br>  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">ul</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;pager&quot;</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;#&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">span</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;glyphicon glyphicon-chevron-left&quot;</span> <span class=\"hljs-attr\">aria-hidden</span>=<span class=\"hljs-string\">&quot;true&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">span</span>&gt;</span>前一篇新闻<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;#&quot;</span>&gt;</span>后一篇新闻<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">span</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;glyphicon glyphicon-chevron-right&quot;</span> <span class=\"hljs-attr\">aria-hidden</span>=<span class=\"hljs-string\">&quot;true&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">span</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span><br>  <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">ul</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">nav</span>&gt;</span><br>\t<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">button</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;btn btn-danger btn-block btn-lg btn-primary&quot;</span> <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">&quot;button&quot;</span>&gt;</span>退出登录<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">button</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">body</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">html</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">xmp</span>&gt;</span><br></code></pre></td></tr></table></figure>\n\n<h1 id=\"CSS\"><a href=\"#CSS\" class=\"headerlink\" title=\"CSS\"></a>CSS</h1><figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs css\"><span class=\"hljs-selector-class\">.top</span>&#123;<span class=\"hljs-attribute\">background-color</span>: gray;<br>    <span class=\"hljs-attribute\">font-size</span>: <span class=\"hljs-number\">14px</span>; <br>      <br>&#125;<br><span class=\"hljs-selector-class\">.top</span> <span class=\"hljs-selector-tag\">p</span>&#123;<span class=\"hljs-attribute\">display</span>: inline-block;<br> <span class=\"hljs-attribute\">line-height</span>: <span class=\"hljs-number\">20px</span>;<br> <span class=\"hljs-attribute\">color</span>:white;<br> <span class=\"hljs-attribute\">margin</span>: auto;<br> <span class=\"hljs-attribute\">overflow</span>: hidden;<br>&#125;<br><span class=\"hljs-selector-class\">.top</span> <span class=\"hljs-selector-tag\">P</span><span class=\"hljs-selector-pseudo\">:nth-child</span>(<span class=\"hljs-number\">1</span>)&#123;<span class=\"hljs-attribute\">margin-left</span>: <span class=\"hljs-number\">10%</span>;<br>&#125;<br><span class=\"hljs-selector-class\">.top</span> <span class=\"hljs-selector-tag\">P</span><span class=\"hljs-selector-pseudo\">:nth-child</span>(<span class=\"hljs-number\">2</span>)&#123;<span class=\"hljs-attribute\">margin-left</span>: <span class=\"hljs-number\">50%</span>;<br>&#125;<br><span class=\"hljs-selector-class\">.top</span> <span class=\"hljs-selector-tag\">P</span><span class=\"hljs-selector-pseudo\">:nth-child</span>(<span class=\"hljs-number\">3</span>)&#123;<span class=\"hljs-attribute\">margin-left</span>: <span class=\"hljs-number\">5%</span>;<br>&#125;<br><br><span class=\"hljs-selector-class\">.header</span> <span class=\"hljs-selector-tag\">img</span>&#123;<br>  <span class=\"hljs-attribute\">float</span>: left;<br>  <span class=\"hljs-attribute\">margin-left</span>: <span class=\"hljs-number\">8%</span>;\t<br>&#125;<br><br><span class=\"hljs-selector-class\">.nav-tabs</span> &#123;<br>  <span class=\"hljs-attribute\">border-bottom</span>: <span class=\"hljs-number\">0px</span> solid <span class=\"hljs-number\">#ddd</span>;<br>  <span class=\"hljs-attribute\">height</span>: <span class=\"hljs-number\">82px</span>;<br>  <span class=\"hljs-attribute\">margin-top</span>: <span class=\"hljs-number\">20px</span>;<br>  <br> <br>&#125;<br><span class=\"hljs-selector-class\">.nav-tabs</span> &gt; <span class=\"hljs-selector-tag\">li</span> &#123;<br>  <span class=\"hljs-attribute\">float</span>: left;<br>  <span class=\"hljs-attribute\">margin-top</span>: <span class=\"hljs-number\">20px</span>;<br>  <span class=\"hljs-attribute\">font-size</span>: <span class=\"hljs-number\">18px</span>;<br>  <span class=\"hljs-attribute\">margin-left</span>: <span class=\"hljs-number\">20px</span>;<br>  <br>  <br>  <br>&#125;<br><span class=\"hljs-selector-class\">.nav-tabs</span> &gt; <span class=\"hljs-selector-tag\">li</span> &gt; <span class=\"hljs-selector-tag\">a</span> &#123;<br>  <span class=\"hljs-attribute\">margin-right</span>: <span class=\"hljs-number\">30px</span>;<br>  <span class=\"hljs-attribute\">line-height</span>: <span class=\"hljs-number\">1.42857143</span>;<br>  <span class=\"hljs-attribute\">border</span>: <span class=\"hljs-number\">0px</span> solid transparent;<br>  <span class=\"hljs-attribute\">border-radius</span>: <span class=\"hljs-number\">4px</span> <span class=\"hljs-number\">4px</span> <span class=\"hljs-number\">0</span> <span class=\"hljs-number\">0</span>;<br>&#125;<br><span class=\"hljs-selector-class\">.nav-tabs</span> &gt; <span class=\"hljs-selector-tag\">li</span> &gt; <span class=\"hljs-selector-tag\">a</span><span class=\"hljs-selector-pseudo\">:hover</span> &#123;<br>  <span class=\"hljs-attribute\">border-color</span>: <span class=\"hljs-number\">#eee</span> <span class=\"hljs-number\">#eee</span> <span class=\"hljs-number\">#ddd</span>;<br>&#125;<br><span class=\"hljs-selector-class\">.nav-tabs</span> &gt; <span class=\"hljs-selector-tag\">li</span><span class=\"hljs-selector-class\">.active</span> &gt; <span class=\"hljs-selector-tag\">a</span>,<br><span class=\"hljs-selector-class\">.nav-tabs</span> &gt; <span class=\"hljs-selector-tag\">li</span><span class=\"hljs-selector-class\">.active</span> &gt; <span class=\"hljs-selector-tag\">a</span><span class=\"hljs-selector-pseudo\">:hover</span>,<br><span class=\"hljs-selector-class\">.nav-tabs</span> &gt; <span class=\"hljs-selector-tag\">li</span><span class=\"hljs-selector-class\">.active</span> &gt; <span class=\"hljs-selector-tag\">a</span><span class=\"hljs-selector-pseudo\">:focus</span> &#123;<br>  <span class=\"hljs-attribute\">color</span>: <span class=\"hljs-number\">#555</span>;<br>  <span class=\"hljs-attribute\">cursor</span>: default;<br>  <span class=\"hljs-attribute\">background-color</span>: <span class=\"hljs-number\">#fff</span>;<br>  <span class=\"hljs-attribute\">border</span>: <span class=\"hljs-number\">1px</span> solid <span class=\"hljs-number\">#ddd</span>;<br>  <span class=\"hljs-attribute\">border-bottom-color</span>: transparent;<br>&#125;<br><br><br><span class=\"hljs-selector-class\">.banner</span> <span class=\"hljs-selector-tag\">img</span>&#123;<br>\t<span class=\"hljs-attribute\">width</span>: <span class=\"hljs-number\">100%</span>;<br>&#125;<br><br><span class=\"hljs-selector-class\">.xiaotu</span>&#123;<span class=\"hljs-attribute\">text-align</span>: center;<br>        <span class=\"hljs-attribute\">padding-left</span>: <span class=\"hljs-number\">50px</span>; <br>        <span class=\"hljs-attribute\">float</span>: left;\t\t<br>&#125;<br><br><span class=\"hljs-selector-class\">.survey</span>&#123;<span class=\"hljs-attribute\">background-color</span>: gray;<br>       <span class=\"hljs-attribute\">font-size</span>: <span class=\"hljs-number\">14px</span>;<br>       <span class=\"hljs-attribute\">height</span>: <span class=\"hljs-number\">60px</span>;<br>       <span class=\"hljs-attribute\">position</span>: relative;<br>      <br>      <br>&#125;<br><span class=\"hljs-selector-class\">.survey</span> <span class=\"hljs-selector-tag\">p</span>&#123;<span class=\"hljs-attribute\">display</span>:inline-block;<br> <span class=\"hljs-attribute\">color</span>: white;<br> <span class=\"hljs-attribute\">margin</span>: <span class=\"hljs-number\">20px</span> auto;<br> <span class=\"hljs-attribute\">overflow</span>: hidden;<br><br>&#125;<br><span class=\"hljs-selector-class\">.survey</span> <span class=\"hljs-selector-tag\">P</span><span class=\"hljs-selector-pseudo\">:nth-child</span>(<span class=\"hljs-number\">1</span>)&#123;<span class=\"hljs-attribute\">margin-left</span>: <span class=\"hljs-number\">10%</span>;<br>&#125;<br><span class=\"hljs-selector-class\">.survey</span> <span class=\"hljs-selector-tag\">P</span><span class=\"hljs-selector-pseudo\">:nth-child</span>(<span class=\"hljs-number\">2</span>)&#123;<span class=\"hljs-attribute\">margin-left</span>: <span class=\"hljs-number\">1%</span>;<br>&#125;<br><br><br><span class=\"hljs-selector-id\">#nav</span>&#123;<span class=\"hljs-attribute\">padding</span>: <span class=\"hljs-number\">0</span>;<br>    <span class=\"hljs-attribute\">margin-left</span>: <span class=\"hljs-number\">40%</span>;<br>    <span class=\"hljs-attribute\">position</span>:absolute;<br>    <span class=\"hljs-attribute\">display</span>: inline-block;<br>&#125;<br><span class=\"hljs-selector-id\">#nav</span> <span class=\"hljs-selector-tag\">ul</span>&#123;<span class=\"hljs-attribute\">list-style-type</span>: none; &#125;<br><span class=\"hljs-selector-id\">#nav</span> <span class=\"hljs-selector-tag\">ul</span> <span class=\"hljs-selector-tag\">li</span>&#123;<span class=\"hljs-attribute\">float</span>: left;&#125;<br><span class=\"hljs-selector-id\">#nav</span> <span class=\"hljs-selector-tag\">ul</span> <span class=\"hljs-selector-tag\">li</span> <span class=\"hljs-selector-tag\">a</span>&#123;<span class=\"hljs-attribute\">text-align</span>: center; <br><span class=\"hljs-attribute\">padding</span>:<span class=\"hljs-number\">20px</span>; <br><span class=\"hljs-attribute\">display</span>:block; <br><span class=\"hljs-attribute\">text-decoration</span>:none; <br><span class=\"hljs-attribute\">color</span>:white;<br><span class=\"hljs-attribute\">line-height</span>: <span class=\"hljs-number\">20px</span>; <br>&#125;<br><span class=\"hljs-selector-id\">#nav</span> <span class=\"hljs-selector-tag\">ul</span> <span class=\"hljs-selector-tag\">li</span> <span class=\"hljs-selector-tag\">a</span><span class=\"hljs-selector-pseudo\">:hover</span>&#123;<br>\t<span class=\"hljs-attribute\">background-color</span>:white;<br>    <span class=\"hljs-attribute\">color</span>:<span class=\"hljs-number\">#31B0D5</span>;<br>&#125;<br><span class=\"hljs-selector-class\">.Introduced</span>&#123;<span class=\"hljs-attribute\">text-align</span>: center;<br>           <span class=\"hljs-attribute\">margin-top</span>: <span class=\"hljs-number\">50px</span>;&#125;<br><br><span class=\"hljs-selector-class\">.Introduced</span> <span class=\"hljs-selector-tag\">p</span>&#123;<br>   <span class=\"hljs-attribute\">max-width</span>: <span class=\"hljs-number\">900px</span>;<br>   <span class=\"hljs-attribute\">margin</span>: <span class=\"hljs-number\">30px</span> auto;\t<br>   <span class=\"hljs-attribute\">text-align</span>: left;<br>&#125;<br><br><br></code></pre></td></tr></table></figure>\n\n<h1 id=\"Javascript\"><a href=\"#Javascript\" class=\"headerlink\" title=\"Javascript\"></a>Javascript</h1><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs javascript\"><span class=\"hljs-meta\">&#x27;use strict&#x27;</span>;<br><br><span class=\"hljs-keyword\">var</span> defaults = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&#x27;../core/core.defaults&#x27;</span>);<br><span class=\"hljs-keyword\">var</span> Element = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&#x27;../core/core.element&#x27;</span>);<br><span class=\"hljs-keyword\">var</span> helpers = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&#x27;../helpers/index&#x27;</span>);<br><span class=\"hljs-keyword\">var</span> layouts = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&#x27;../core/core.layouts&#x27;</span>);<br><br><span class=\"hljs-keyword\">var</span> noop = helpers.noop;<br><br>defaults._set(<span class=\"hljs-string\">&#x27;global&#x27;</span>, &#123;<br>\ttitle: &#123;<br>\t\tdisplay: <span class=\"hljs-literal\">false</span>,<br>\t\tfontStyle: <span class=\"hljs-string\">&#x27;bold&#x27;</span>,<br>\t\tfullWidth: <span class=\"hljs-literal\">true</span>,<br>\t\tlineHeight: <span class=\"hljs-number\">1.2</span>,<br>\t\tpadding: <span class=\"hljs-number\">10</span>,<br>\t\tposition: <span class=\"hljs-string\">&#x27;top&#x27;</span>,<br>\t\ttext: <span class=\"hljs-string\">&#x27;&#x27;</span>,<br>\t\tweight: <span class=\"hljs-number\">2000</span>         <span class=\"hljs-comment\">// by default greater than legend (1000) to be above</span><br>\t&#125;<br>&#125;);<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * IMPORTANT: this class is exposed publicly as Chart.Legend, backward compatibility required!</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">var</span> Title = Element.extend(&#123;<br>\tinitialize: <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">config</span>) </span>&#123;<br>\t\t<span class=\"hljs-keyword\">var</span> me = <span class=\"hljs-built_in\">this</span>;<br>\t\thelpers.extend(me, config);<br><br>\t\t<span class=\"hljs-comment\">// Contains hit boxes for each dataset (in dataset order)</span><br>\t\tme.legendHitBoxes = [];<br>\t&#125;,<br><br>\t<span class=\"hljs-comment\">// These methods are ordered by lifecycle. Utilities then follow.</span><br><br>\tbeforeUpdate: noop,<br>\tupdate: <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">maxWidth, maxHeight, margins</span>) </span>&#123;<br>\t\t<span class=\"hljs-keyword\">var</span> me = <span class=\"hljs-built_in\">this</span>;<br><br>\t\t<span class=\"hljs-comment\">// Update Lifecycle - Probably don&#x27;t want to ever extend or overwrite this function ;)</span><br>\t\tme.beforeUpdate();<br><br>\t\t<span class=\"hljs-comment\">// Absorb the master measurements</span><br>\t\tme.maxWidth = maxWidth;<br>\t\tme.maxHeight = maxHeight;<br>\t\tme.margins = margins;<br><br>\t\t<span class=\"hljs-comment\">// Dimensions</span><br>\t\tme.beforeSetDimensions();<br>\t\tme.setDimensions();<br>\t\tme.afterSetDimensions();<br>\t\t<span class=\"hljs-comment\">// Labels</span><br>\t\tme.beforeBuildLabels();<br>\t\tme.buildLabels();<br>\t\tme.afterBuildLabels();<br><br>\t\t<span class=\"hljs-comment\">// Fit</span><br>\t\tme.beforeFit();<br>\t\tme.fit();<br>\t\tme.afterFit();<br>\t\t<span class=\"hljs-comment\">//</span><br>\t\tme.afterUpdate();<br>\t\t<span class=\"hljs-keyword\">return</span> me.minSize;<br><br>\t&#125;,<br>\tafterUpdate: noop,<br><br>\t<span class=\"hljs-comment\">//</span><br><br>\tbeforeSetDimensions: noop,<br>\tsetDimensions: <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>) </span>&#123;<br>\t\t<span class=\"hljs-keyword\">var</span> me = <span class=\"hljs-built_in\">this</span>;<br>\t\t<span class=\"hljs-comment\">// Set the unconstrained dimension before label rotation</span><br>\t\t<span class=\"hljs-keyword\">if</span> (me.isHorizontal()) &#123;<br>\t\t\t<span class=\"hljs-comment\">// Reset position before calculating rotation</span><br>\t\t\tme.width = me.maxWidth;<br>\t\t\tme.left = <span class=\"hljs-number\">0</span>;<br>\t\t\tme.right = me.width;<br>\t\t&#125; <span class=\"hljs-keyword\">else</span> &#123;<br>\t\t\tme.height = me.maxHeight;<br><br>\t\t\t<span class=\"hljs-comment\">// Reset position before calculating rotation</span><br>\t\t\tme.top = <span class=\"hljs-number\">0</span>;<br>\t\t\tme.bottom = me.height;<br>\t\t&#125;<br><br>\t\t<span class=\"hljs-comment\">// Reset padding</span><br>\t\tme.paddingLeft = <span class=\"hljs-number\">0</span>;<br>\t\tme.paddingTop = <span class=\"hljs-number\">0</span>;<br>\t\tme.paddingRight = <span class=\"hljs-number\">0</span>;<br>\t\tme.paddingBottom = <span class=\"hljs-number\">0</span>;<br><br>\t\t<span class=\"hljs-comment\">// Reset minSize</span><br>\t\tme.minSize = &#123;<br>\t\t\twidth: <span class=\"hljs-number\">0</span>,<br>\t\t\theight: <span class=\"hljs-number\">0</span><br>\t\t&#125;;<br>\t&#125;,<br>\tafterSetDimensions: noop,<br><br>\t<span class=\"hljs-comment\">//</span><br><br>\tbeforeBuildLabels: noop,<br>\tbuildLabels: noop,<br>\tafterBuildLabels: noop,<br><br>\t<span class=\"hljs-comment\">//</span><br><br>\tbeforeFit: noop,<br>\tfit: <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>) </span>&#123;<br>\t\t<span class=\"hljs-keyword\">var</span> me = <span class=\"hljs-built_in\">this</span>;<br>\t\t<span class=\"hljs-keyword\">var</span> valueOrDefault = helpers.valueOrDefault;<br>\t\t<span class=\"hljs-keyword\">var</span> opts = me.options;<br>\t\t<span class=\"hljs-keyword\">var</span> display = opts.display;<br>\t\t<span class=\"hljs-keyword\">var</span> fontSize = valueOrDefault(opts.fontSize, defaults.global.defaultFontSize);<br>\t\t<span class=\"hljs-keyword\">var</span> minSize = me.minSize;<br>\t\t<span class=\"hljs-keyword\">var</span> lineCount = helpers.isArray(opts.text) ? opts.text.length : <span class=\"hljs-number\">1</span>;<br>\t\t<span class=\"hljs-keyword\">var</span> lineHeight = helpers.options.toLineHeight(opts.lineHeight, fontSize);<br>\t\t<span class=\"hljs-keyword\">var</span> textSize = display ? (lineCount * lineHeight) + (opts.padding * <span class=\"hljs-number\">2</span>) : <span class=\"hljs-number\">0</span>;<br><br>\t\t<span class=\"hljs-keyword\">if</span> (me.isHorizontal()) &#123;<br>\t\t\tminSize.width = me.maxWidth; <span class=\"hljs-comment\">// fill all the width</span><br>\t\t\tminSize.height = textSize;<br>\t\t&#125; <span class=\"hljs-keyword\">else</span> &#123;<br>\t\t\tminSize.width = textSize;<br>\t\t\tminSize.height = me.maxHeight; <span class=\"hljs-comment\">// fill all the height</span><br>\t\t&#125;<br><br>\t\tme.width = minSize.width;<br>\t\tme.height = minSize.height;<br><br>\t&#125;,<br>\tafterFit: noop,<br><br>\t<span class=\"hljs-comment\">// Shared Methods</span><br>\tisHorizontal: <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>) </span>&#123;<br>\t\t<span class=\"hljs-keyword\">var</span> pos = <span class=\"hljs-built_in\">this</span>.options.position;<br>\t\t<span class=\"hljs-keyword\">return</span> pos === <span class=\"hljs-string\">&#x27;top&#x27;</span> || pos === <span class=\"hljs-string\">&#x27;bottom&#x27;</span>;<br>\t&#125;,<br><br>\t<span class=\"hljs-comment\">// Actually draw the title block on the canvas</span><br>\tdraw: <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>) </span>&#123;<br>\t\t<span class=\"hljs-keyword\">var</span> me = <span class=\"hljs-built_in\">this</span>;<br>\t\t<span class=\"hljs-keyword\">var</span> ctx = me.ctx;<br>\t\t<span class=\"hljs-keyword\">var</span> valueOrDefault = helpers.valueOrDefault;<br>\t\t<span class=\"hljs-keyword\">var</span> opts = me.options;<br>\t\t<span class=\"hljs-keyword\">var</span> globalDefaults = defaults.global;<br><br>\t\t<span class=\"hljs-keyword\">if</span> (opts.display) &#123;<br>\t\t\t<span class=\"hljs-keyword\">var</span> fontSize = valueOrDefault(opts.fontSize, globalDefaults.defaultFontSize);<br>\t\t\t<span class=\"hljs-keyword\">var</span> fontStyle = valueOrDefault(opts.fontStyle, globalDefaults.defaultFontStyle);<br>\t\t\t<span class=\"hljs-keyword\">var</span> fontFamily = valueOrDefault(opts.fontFamily, globalDefaults.defaultFontFamily);<br>\t\t\t<span class=\"hljs-keyword\">var</span> titleFont = helpers.fontString(fontSize, fontStyle, fontFamily);<br>\t\t\t<span class=\"hljs-keyword\">var</span> lineHeight = helpers.options.toLineHeight(opts.lineHeight, fontSize);<br>\t\t\t<span class=\"hljs-keyword\">var</span> offset = lineHeight / <span class=\"hljs-number\">2</span> + opts.padding;<br>\t\t\t<span class=\"hljs-keyword\">var</span> rotation = <span class=\"hljs-number\">0</span>;<br>\t\t\t<span class=\"hljs-keyword\">var</span> top = me.top;<br>\t\t\t<span class=\"hljs-keyword\">var</span> left = me.left;<br>\t\t\t<span class=\"hljs-keyword\">var</span> bottom = me.bottom;<br>\t\t\t<span class=\"hljs-keyword\">var</span> right = me.right;<br>\t\t\t<span class=\"hljs-keyword\">var</span> maxWidth, titleX, titleY;<br><br>\t\t\tctx.fillStyle = valueOrDefault(opts.fontColor, globalDefaults.defaultFontColor); <span class=\"hljs-comment\">// render in correct colour</span><br>\t\t\tctx.font = titleFont;<br><br>\t\t\t<span class=\"hljs-comment\">// Horizontal</span><br>\t\t\t<span class=\"hljs-keyword\">if</span> (me.isHorizontal()) &#123;<br>\t\t\t\ttitleX = left + ((right - left) / <span class=\"hljs-number\">2</span>); <span class=\"hljs-comment\">// midpoint of the width</span><br>\t\t\t\ttitleY = top + offset;<br>\t\t\t\tmaxWidth = right - left;<br>\t\t\t&#125; <span class=\"hljs-keyword\">else</span> &#123;<br>\t\t\t\ttitleX = opts.position === <span class=\"hljs-string\">&#x27;left&#x27;</span> ? left + offset : right - offset;<br>\t\t\t\ttitleY = top + ((bottom - top) / <span class=\"hljs-number\">2</span>);<br>\t\t\t\tmaxWidth = bottom - top;<br>\t\t\t\trotation = <span class=\"hljs-built_in\">Math</span>.PI * (opts.position === <span class=\"hljs-string\">&#x27;left&#x27;</span> ? -<span class=\"hljs-number\">0.5</span> : <span class=\"hljs-number\">0.5</span>);<br>\t\t\t&#125;<br><br>\t\t\tctx.save();<br>\t\t\tctx.translate(titleX, titleY);<br>\t\t\tctx.rotate(rotation);<br>\t\t\tctx.textAlign = <span class=\"hljs-string\">&#x27;center&#x27;</span>;<br>\t\t\tctx.textBaseline = <span class=\"hljs-string\">&#x27;middle&#x27;</span>;<br><br>\t\t\t<span class=\"hljs-keyword\">var</span> text = opts.text;<br>\t\t\t<span class=\"hljs-keyword\">if</span> (helpers.isArray(text)) &#123;<br>\t\t\t\t<span class=\"hljs-keyword\">var</span> y = <span class=\"hljs-number\">0</span>;<br>\t\t\t\t<span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">var</span> i = <span class=\"hljs-number\">0</span>; i &lt; text.length; ++i) &#123;<br>\t\t\t\t\tctx.fillText(text[i], <span class=\"hljs-number\">0</span>, y, maxWidth);<br>\t\t\t\t\ty += lineHeight;<br>\t\t\t\t&#125;<br>\t\t\t&#125; <span class=\"hljs-keyword\">else</span> &#123;<br>\t\t\t\tctx.fillText(text, <span class=\"hljs-number\">0</span>, <span class=\"hljs-number\">0</span>, maxWidth);<br>\t\t\t&#125;<br><br>\t\t\tctx.restore();<br>\t\t&#125;<br>\t&#125;<br>&#125;);<br><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">createNewTitleBlockAndAttach</span>(<span class=\"hljs-params\">chart, titleOpts</span>) </span>&#123;<br>\t<span class=\"hljs-keyword\">var</span> title = <span class=\"hljs-keyword\">new</span> Title(&#123;<br>\t\tctx: chart.ctx,<br>\t\toptions: titleOpts,<br>\t\tchart: chart<br>\t&#125;);<br><br>\tlayouts.configure(chart, title, titleOpts);<br>\tlayouts.addBox(chart, title);<br>\tchart.titleBlock = title;<br>&#125;<br><br><span class=\"hljs-built_in\">module</span>.exports = &#123;<br>\tid: <span class=\"hljs-string\">&#x27;title&#x27;</span>,<br><br>\t<span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">\t * Backward compatibility: since 2.1.5, the title is registered as a plugin, making</span><br><span class=\"hljs-comment\">\t * Chart.Title obsolete. To avoid a breaking change, we export the Title as part of</span><br><span class=\"hljs-comment\">\t * the plugin, which one will be re-exposed in the chart.js file.</span><br><span class=\"hljs-comment\">\t * https://github.com/chartjs/Chart.js/pull/2640</span><br><span class=\"hljs-comment\">\t * <span class=\"hljs-doctag\">@private</span></span><br><span class=\"hljs-comment\">\t */</span><br>\t_element: Title,<br><br>\tbeforeInit: <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">chart</span>) </span>&#123;<br>\t\t<span class=\"hljs-keyword\">var</span> titleOpts = chart.options.title;<br><br>\t\t<span class=\"hljs-keyword\">if</span> (titleOpts) &#123;<br>\t\t\tcreateNewTitleBlockAndAttach(chart, titleOpts);<br>\t\t&#125;<br>\t&#125;,<br><br>\tbeforeUpdate: <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">chart</span>) </span>&#123;<br>\t\t<span class=\"hljs-keyword\">var</span> titleOpts = chart.options.title;<br>\t\t<span class=\"hljs-keyword\">var</span> titleBlock = chart.titleBlock;<br><br>\t\t<span class=\"hljs-keyword\">if</span> (titleOpts) &#123;<br>\t\t\thelpers.mergeIf(titleOpts, defaults.global.title);<br><br>\t\t\t<span class=\"hljs-keyword\">if</span> (titleBlock) &#123;<br>\t\t\t\tlayouts.configure(chart, titleBlock, titleOpts);<br>\t\t\t\ttitleBlock.options = titleOpts;<br>\t\t\t&#125; <span class=\"hljs-keyword\">else</span> &#123;<br>\t\t\t\tcreateNewTitleBlockAndAttach(chart, titleOpts);<br>\t\t\t&#125;<br>\t\t&#125; <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (titleBlock) &#123;<br>\t\t\tlayouts.removeBox(chart, titleBlock);<br>\t\t\t<span class=\"hljs-keyword\">delete</span> chart.titleBlock;<br>\t\t&#125;<br>\t&#125;<br>&#125;;<br></code></pre></td></tr></table></figure>\n\n\n<h1 id=\"JSON\"><a href=\"#JSON\" class=\"headerlink\" title=\"JSON\"></a>JSON</h1><figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs json\">&#123;<br>    <span class=\"hljs-attr\">&quot;version&quot;</span>: <span class=\"hljs-string\">&quot;0.2.0&quot;</span>,<br>    <span class=\"hljs-attr\">&quot;configurations&quot;</span>: [<br>        &#123;<br>            <span class=\"hljs-attr\">&quot;name&quot;</span>: <span class=\"hljs-string\">&quot;(gdb) Launch&quot;</span>, <br>            <span class=\"hljs-attr\">&quot;type&quot;</span>: <span class=\"hljs-string\">&quot;cppdbg&quot;</span>,<br>            <span class=\"hljs-attr\">&quot;request&quot;</span>: <span class=\"hljs-string\">&quot;launch&quot;</span>, <br>            <span class=\"hljs-attr\">&quot;program&quot;</span>: <span class=\"hljs-string\">&quot;$&#123;fileDirname&#125;/$&#123;fileBasenameNoExtension&#125;.exe&quot;</span>, <br>            <span class=\"hljs-attr\">&quot;stopAtEntry&quot;</span>: <span class=\"hljs-literal\">false</span>, <br>            <span class=\"hljs-attr\">&quot;cwd&quot;</span>: <span class=\"hljs-string\">&quot;$&#123;workspaceRoot&#125;&quot;</span>,<br>            <span class=\"hljs-attr\">&quot;externalConsole&quot;</span>: <span class=\"hljs-literal\">true</span>, <br>            <span class=\"hljs-attr\">&quot;linux&quot;</span>: &#123;<br>                <span class=\"hljs-attr\">&quot;MIMode&quot;</span>: <span class=\"hljs-string\">&quot;gdb&quot;</span><br>            &#125;,<br>            <span class=\"hljs-attr\">&quot;osx&quot;</span>: &#123;<br>                <span class=\"hljs-attr\">&quot;MIMode&quot;</span>: <span class=\"hljs-string\">&quot;lldb&quot;</span><br>            &#125;,<br>            <span class=\"hljs-attr\">&quot;windows&quot;</span>: &#123; <br>                <span class=\"hljs-attr\">&quot;MIMode&quot;</span>: <span class=\"hljs-string\">&quot;gdb&quot;</span>,<br>                <span class=\"hljs-attr\">&quot;miDebuggerPath&quot;</span>: <span class=\"hljs-string\">&quot;gdb.exe&quot;</span><br>            &#125;<br>        &#125;<br>    ]<br>&#125;<br><br></code></pre></td></tr></table></figure>\n\n<h1 id=\"SQL\"><a href=\"#SQL\" class=\"headerlink\" title=\"SQL\"></a>SQL</h1><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs sql\"><span class=\"hljs-keyword\">SELECT</span> Company, OrderNumber <span class=\"hljs-keyword\">FROM</span> Orders <span class=\"hljs-keyword\">ORDER</span> <span class=\"hljs-keyword\">BY</span> Company <span class=\"hljs-keyword\">DESC</span>, OrderNumber <span class=\"hljs-keyword\">ASC</span><br>update whut_student <span class=\"hljs-keyword\">SET</span> grade<span class=\"hljs-operator\">=</span><span class=\"hljs-number\">2017</span> <span class=\"hljs-keyword\">where</span> id<span class=\"hljs-operator\">&gt;</span><span class=\"hljs-number\">1003740</span><br>update whut_student <span class=\"hljs-keyword\">SET</span> id<span class=\"hljs-operator\">=</span>id<span class=\"hljs-operator\">+</span><span class=\"hljs-number\">1</span> <span class=\"hljs-keyword\">where</span> id<span class=\"hljs-operator\">&gt;</span><span class=\"hljs-number\">0</span><br><span class=\"hljs-keyword\">select</span> <span class=\"hljs-built_in\">COUNT</span>(student_id) <span class=\"hljs-keyword\">from</span> whut_student<br><br><span class=\"hljs-keyword\">select</span> <span class=\"hljs-operator\">*</span> <span class=\"hljs-keyword\">from</span> whut_student<br><span class=\"hljs-keyword\">where</span> student_id <span class=\"hljs-keyword\">in</span> (<span class=\"hljs-keyword\">select</span>  student_id  <span class=\"hljs-keyword\">from</span>  whut_student  <span class=\"hljs-keyword\">group</span>  <span class=\"hljs-keyword\">by</span>  student_id  <span class=\"hljs-keyword\">having</span>  <span class=\"hljs-built_in\">count</span>(student_id) <span class=\"hljs-operator\">&gt;</span> <span class=\"hljs-number\">1</span>)<br><br><span class=\"hljs-keyword\">delete</span> <span class=\"hljs-keyword\">from</span> whut_student <span class=\"hljs-keyword\">where</span> id<span class=\"hljs-operator\">&lt;=</span><span class=\"hljs-number\">137</span><br>UPDATE whut_student <span class=\"hljs-keyword\">SET</span> DEGREE<span class=\"hljs-operator\">=</span>&quot;硕士&quot; <span class=\"hljs-keyword\">WHERE</span> id<span class=\"hljs-operator\">&gt;</span><span class=\"hljs-number\">0</span>;<br><br><span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-operator\">*</span> <span class=\"hljs-keyword\">from</span> whut_student <span class=\"hljs-keyword\">where</span> student_id<span class=\"hljs-operator\">=</span><span class=\"hljs-number\">1049731702891</span>;<br><br><span class=\"hljs-keyword\">DELETE</span> <span class=\"hljs-keyword\">FROM</span> whut_student <span class=\"hljs-keyword\">WHERE</span> id<span class=\"hljs-operator\">=</span><span class=\"hljs-number\">1008281</span><br><br><span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-built_in\">COUNT</span>(<span class=\"hljs-operator\">*</span>)  num,student_id <span class=\"hljs-keyword\">FROM</span> whut_student <span class=\"hljs-keyword\">GROUP</span> <span class=\"hljs-keyword\">BY</span> student_id <span class=\"hljs-keyword\">ORDER</span> <span class=\"hljs-keyword\">BY</span> num <span class=\"hljs-keyword\">DESC</span> ;<br></code></pre></td></tr></table></figure>\n\n<h1 id=\"Properties\"><a href=\"#Properties\" class=\"headerlink\" title=\"Properties\"></a>Properties</h1><figure class=\"highlight ini\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs ini\"><span class=\"hljs-comment\">## 开发/测试/生产环境分别对应dev/test/prod</span><br><br><span class=\"hljs-attr\">server.port</span>=<span class=\"hljs-number\">1000</span><br><span class=\"hljs-attr\">debug</span>=<span class=\"hljs-literal\">true</span><br><span class=\"hljs-attr\">trace</span>=<span class=\"hljs-literal\">false</span><br><span class=\"hljs-attr\">spring.application.name</span>=blog-web-server<br><span class=\"hljs-attr\">spring.profiles.active</span>=dev<br><br><span class=\"hljs-attr\">spring.datasource.name</span>=datasource<br><span class=\"hljs-attr\">spring.datasource.type</span>=com.alibaba.druid.pool.DruidDataSource<br><span class=\"hljs-attr\">spring.datasource.druid.filters</span>=stat<br><span class=\"hljs-attr\">spring.datasource.druid.driver-class-name</span>=com.mysql.jdbc.Driver<br><span class=\"hljs-attr\">spring.datasource.druid.url</span>=jdbc:mysql://<span class=\"hljs-number\">127.0</span>.<span class=\"hljs-number\">0.1</span>:<span class=\"hljs-number\">3306</span>/acanx?useUnicode=<span class=\"hljs-literal\">true</span>&amp;characterEncoding=UTF-<span class=\"hljs-number\">8</span>&amp;allowMultiQueries=<span class=\"hljs-literal\">true</span><br><span class=\"hljs-attr\">spring.datasource.druid.username</span>=root<br><span class=\"hljs-attr\">spring.datasource.druid.password</span>=root<br><span class=\"hljs-attr\">spring.datasource.druid.initial-size</span>=<span class=\"hljs-number\">1</span><br><span class=\"hljs-attr\">spring.datasource.druid.min-idle</span>=<span class=\"hljs-number\">1</span><br><span class=\"hljs-attr\">spring.datasource.druid.max-active</span>=<span class=\"hljs-number\">20</span><br><span class=\"hljs-attr\">spring.datasource.druid.max-wait</span>=<span class=\"hljs-number\">60000</span><br><span class=\"hljs-attr\">spring.datasource.druid.time-between-eviction-runs-millis</span>=<span class=\"hljs-number\">60000</span><br><span class=\"hljs-attr\">spring.datasource.druid.min-evictable-idle-time-millis</span>=<span class=\"hljs-number\">300000</span><br><span class=\"hljs-attr\">spring.datasource.druid.validation-query</span>=SELECT <span class=\"hljs-string\">&#x27;x&#x27;</span><br><span class=\"hljs-attr\">spring.datasource.druid.test-while-idle</span>=<span class=\"hljs-literal\">true</span><br><span class=\"hljs-attr\">spring.datasource.druid.test-on-borrow</span>=<span class=\"hljs-literal\">false</span><br><span class=\"hljs-attr\">spring.datasource.druid.test-on-return</span>=<span class=\"hljs-literal\">false</span><br><span class=\"hljs-attr\">spring.datasource.druid.pool-prepared-statements</span>=<span class=\"hljs-literal\">false</span><br><span class=\"hljs-attr\">spring.datasource.druid.max-pool-prepared-statement-per-connection-size</span>=<span class=\"hljs-number\">20</span><br></code></pre></td></tr></table></figure>\n\n\n<h1 id=\"yml\"><a href=\"#yml\" class=\"headerlink\" title=\"yml\"></a>yml</h1><figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs yml\"><span class=\"hljs-comment\"># 设置集群的名字，对应为http://127.0.0.1:9200/中的&quot;cluster_name&quot; : &quot;acanx-es-demo&quot;,</span><br><span class=\"hljs-attr\">cluster.name:</span> <span class=\"hljs-string\">acanx-es-demo</span><br><span class=\"hljs-comment\"># 节点名字，对应为http://127.0.0.1:9200/中的&quot;name&quot; : &quot;node-1001&quot;,</span><br><span class=\"hljs-attr\">node.name:</span> <span class=\"hljs-string\">node-1001</span><br><span class=\"hljs-attr\">node.master:</span> <span class=\"hljs-literal\">true</span><br><span class=\"hljs-attr\">node.data:</span> <span class=\"hljs-literal\">true</span><br><span class=\"hljs-comment\"># 修改ES的监听地址，以便其他机器也可以访问</span><br><span class=\"hljs-attr\">network.host:</span> <span class=\"hljs-number\">0.0</span><span class=\"hljs-number\">.0</span><span class=\"hljs-number\">.0</span><br><span class=\"hljs-comment\"># 默认端口</span><br><span class=\"hljs-attr\">http.port:</span> <span class=\"hljs-number\">9200</span><br><span class=\"hljs-comment\"># 增加新的CORS参数，这样head插件可以访问ES</span><br><span class=\"hljs-attr\">http.cors.enabled:</span> <span class=\"hljs-literal\">true</span><br><span class=\"hljs-attr\">http.cors.allow-origin:</span> <span class=\"hljs-string\">&quot;*&quot;</span><br></code></pre></td></tr></table></figure>\n\n\n<h1 id=\"Bash\"><a href=\"#Bash\" class=\"headerlink\" title=\"Bash\"></a>Bash</h1><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\"><span class=\"hljs-meta\">#!/bin/bash</span><br><span class=\"hljs-comment\"># - main program</span><br><span class=\"hljs-built_in\">set</span> -o errexit -o <span class=\"hljs-built_in\">noglob</span> -o pipefail<br><br><span class=\"hljs-comment\"># Configuration constants:</span><br><span class=\"hljs-comment\"># - Use upper case, underscore-separated names</span><br><span class=\"hljs-comment\"># - Use `readonly` keyword to highlight it is a constant</span><br><span class=\"hljs-built_in\">readonly</span> GREETING_FORMAT=<span class=\"hljs-string\">&quot;Hello %s!\\n&quot;</span><br><br><span class=\"hljs-comment\"># Global variables:</span><br><br><span class=\"hljs-keyword\">function</span> sayHello &#123;<br>    <span class=\"hljs-comment\"># Variable declarations:</span><br>    <span class=\"hljs-comment\"># - Always declared using `local` keyword</span><br>    <span class=\"hljs-comment\"># - Function parameters declared at the beginning of function</span><br>    <span class=\"hljs-comment\"># - Use meaningful names</span><br>    <span class=\"hljs-comment\"># - Use all lower case, underscrore-separated names</span><br>    <span class=\"hljs-built_in\">local</span> greeted_name=<span class=\"hljs-string\">&quot;<span class=\"hljs-variable\">$1</span>&quot;</span><br><br>    <span class=\"hljs-comment\"># Variable references:</span><br>    <span class=\"hljs-comment\"># - Are always wrapped in $&#123; &#125;</span><br>    <span class=\"hljs-comment\"># - Are properly quoted to avoid issues with embedded whitespace</span><br>    <span class=\"hljs-keyword\">if</span> [ -z <span class=\"hljs-string\">&quot;<span class=\"hljs-variable\">$&#123;greeted_name&#125;</span>&quot;</span> ]; <span class=\"hljs-keyword\">then</span><br>        <span class=\"hljs-comment\"># Return status:</span><br>        <span class=\"hljs-comment\"># - Use a non-zero value if something went wrong</span><br>        <span class=\"hljs-comment\"># - If none is specified - zero (success) is used by default</span><br>        <span class=\"hljs-built_in\">return</span> 1<br>    <span class=\"hljs-keyword\">else</span><br>        <span class=\"hljs-keyword\">if</span> [ <span class=\"hljs-string\">&quot;<span class=\"hljs-variable\">$&#123;greeted_name&#125;</span>&quot;</span> == <span class=\"hljs-string\">&#x27;-&#x27;</span> ]; <span class=\"hljs-keyword\">then</span><br>            <span class=\"hljs-built_in\">read</span> greeted_name<br>        <span class=\"hljs-keyword\">fi</span><br>        <span class=\"hljs-built_in\">printf</span> <span class=\"hljs-string\">&quot;<span class=\"hljs-variable\">$&#123;GREETING_FORMAT&#125;</span>&quot;</span> <span class=\"hljs-string\">&quot;<span class=\"hljs-variable\">$&#123;greeted_name&#125;</span>&quot;</span><br>    <span class=\"hljs-keyword\">fi</span><br>&#125;<br><br><span class=\"hljs-keyword\">function</span> toUpperCase &#123;<br>    tr <span class=\"hljs-string\">&quot;[a-z]&quot;</span> <span class=\"hljs-string\">&quot;[A-Z]&quot;</span><br>&#125;<br><br><span class=\"hljs-keyword\">function</span> printError &#123;<br>    <span class=\"hljs-built_in\">local</span> message=<span class=\"hljs-string\">&quot;<span class=\"hljs-variable\">$1</span>&quot;</span><br>    <span class=\"hljs-built_in\">local</span> red_color=<span class=\"hljs-string\">&#x27;\\e[31;1m&#x27;</span><br>    <span class=\"hljs-built_in\">local</span> no_color=<span class=\"hljs-string\">&#x27;\\e[m&#x27;</span><br><br>    <span class=\"hljs-built_in\">printf</span> <span class=\"hljs-string\">&#x27;\\n&#x27;</span><span class=\"hljs-variable\">$&#123;red_color&#125;</span><span class=\"hljs-string\">&#x27;ERROR:&#x27;</span><span class=\"hljs-variable\">$&#123;no_color&#125;</span><span class=\"hljs-string\">&#x27; %s\\n&#x27;</span> <span class=\"hljs-string\">&quot;<span class=\"hljs-variable\">$&#123;message&#125;</span>&quot;</span> 1&gt;&amp;2<br>&#125;<br><br><span class=\"hljs-comment\"># Main program</span><br><br>sayHello <span class=\"hljs-string\">&quot;Luke Skywalker&quot;</span><br><br><span class=\"hljs-built_in\">echo</span> <span class=\"hljs-string\">&quot;Han Solo&quot;</span> | sayHello -<br><br><span class=\"hljs-built_in\">echo</span> <span class=\"hljs-string\">&quot;Master Yoda&quot;</span> | sayHello - | toUpperCase<br><br><span class=\"hljs-keyword\">if</span> ! sayHello; <span class=\"hljs-keyword\">then</span><br>    printError <span class=\"hljs-string\">&quot;You gave no name!&quot;</span><br>    <span class=\"hljs-built_in\">exit</span> 1<br><span class=\"hljs-keyword\">fi</span><br><br></code></pre></td></tr></table></figure>\n\n\n<h1 id=\"Shell\"><a href=\"#Shell\" class=\"headerlink\" title=\"Shell\"></a>Shell</h1><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs javascript\">#!/bin/sh<br>echo <span class=\"hljs-string\">&#x27;============卡密管理===============&#x27;</span><br>echo <span class=\"hljs-string\">&#x27;创建卡密类型如下:&#x27;</span><br>arr=<span class=\"hljs-string\">`redis-cli -h 172.17.95.112 keys hardware:bus:*`</span><br> <span class=\"hljs-keyword\">for</span> i <span class=\"hljs-keyword\">in</span> $&#123;arr[@]&#125;;<br>        <span class=\"hljs-keyword\">do</span><br>        bus=<span class=\"hljs-string\">`echo $i | awk -F &#x27;:&#x27; &#x27;&#123;print $3&#125;&#x27;`</span><br>        value=<span class=\"hljs-string\">`redis-cli --raw -h 172.17.95.112 get $i | grep -Po &#x27;&quot;name&quot;:&quot;.*?&quot;&#x27; | awk -F &#x27;:&#x27; &#x27;&#123;print $2&#125;&#x27;`</span><br>         echo $bus、$value ;<br> done<br><br>read -p <span class=\"hljs-string\">&#x27;请输入操作:&#x27;</span> typevalue<br><span class=\"hljs-keyword\">if</span> [ <span class=\"hljs-string\">&quot;$typevalue&quot;</span> == <span class=\"hljs-string\">&quot;exit&quot;</span> ];then<br>        exit<br>fi<br><br>isexist=<span class=\"hljs-string\">`redis-cli --raw -h 172.17.95.112 get &quot;hardware:bus:$typevalue:&quot;`</span><br><span class=\"hljs-keyword\">if</span> [ <span class=\"hljs-string\">&quot;$isexist&quot;</span> == <span class=\"hljs-string\">&quot;&quot;</span> ];then<br>        echo <span class=\"hljs-string\">&#x27;输入类型不存在&#x27;</span><br>        sh $<span class=\"hljs-number\">0</span><br>fi<br><br><br>read -p <span class=\"hljs-string\">&#x27;生成数量:&#x27;</span> createNum<br><br>echo $createNum<br><br>echo <span class=\"hljs-string\">&quot;====================卡密=========================编号:$typevalue&quot;</span><br>outFile=<span class=\"hljs-string\">&quot;$typevalue-$RANDOM.log&quot;</span><br><span class=\"hljs-keyword\">for</span>((i=<span class=\"hljs-number\">0</span>;i&lt;$createNum;i++));<br><span class=\"hljs-keyword\">do</span><br>        card=<span class=\"hljs-string\">`date +%s%N | md5sum | head -c 8`</span><br>        redis-cli -h <span class=\"hljs-number\">172.17</span><span class=\"hljs-number\">.95</span><span class=\"hljs-number\">.112</span> set <span class=\"hljs-string\">&quot;hardware:card:$card:&quot;</span> <span class=\"hljs-string\">&quot;$typevalue&quot;</span> &gt;<span class=\"hljs-regexp\">/dev/</span><span class=\"hljs-literal\">null</span><br>        echo <span class=\"hljs-string\">&quot;$card&quot;</span>&gt;&gt;$outFile<br>        echo <span class=\"hljs-string\">&quot;$card&quot;</span><br>done<br>echo <span class=\"hljs-string\">&quot;输出文件路径为`pwd`/$outFile&quot;</span><br>echo <span class=\"hljs-string\">&#x27;====================卡密=========================&#x27;</span><br>exit<br></code></pre></td></tr></table></figure>\n\n\n<h1 id=\"PowerShell\"><a href=\"#PowerShell\" class=\"headerlink\" title=\"PowerShell\"></a>PowerShell</h1><figure class=\"highlight powershell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs powershell\">title 修改shift+右击在此处打开PowerShell<br>mode con cols=<span class=\"hljs-number\">73</span> lines=<span class=\"hljs-number\">20</span><br>rem 验证是否是以管理员身份运行<br><span class=\"hljs-built_in\">set</span> TempFile_Name=%SystemRoot%\\System32\\BatTestUACin_SysRt%Random%.batemp<br>( <span class=\"hljs-built_in\">echo</span> <span class=\"hljs-string\">&quot;BAT Test UAC in Temp&quot;</span> &gt;%TempFile_Name% ) <span class=\"hljs-number\">1</span>&gt;nul <span class=\"hljs-number\">2</span>&gt;nul<br><span class=\"hljs-keyword\">if</span> not exist %TempFile_Name% (<br>color <span class=\"hljs-number\">0</span>c<br><span class=\"hljs-built_in\">echo</span>.<br><span class=\"hljs-built_in\">echo</span>.<br><span class=\"hljs-built_in\">echo</span> 错误：没有以管理员身份运行该工具。<br><span class=\"hljs-built_in\">echo</span> 该工具将无法使用！<br><span class=\"hljs-built_in\">echo</span>.<br><span class=\"hljs-built_in\">echo</span> 方法：<br><span class=\"hljs-built_in\">echo</span> 找到该工具，右击<span class=\"hljs-string\">&quot;以管理员身份运行&quot;</span>。<br><span class=\"hljs-built_in\">echo</span>.<br><span class=\"hljs-built_in\">echo</span> 按任意键退出该工具..... &amp; pause &gt;nul<br><span class=\"hljs-keyword\">exit</span><br>)<br><span class=\"hljs-built_in\">echo</span> 初始化中，请稍后.....<br>rem 设置<span class=\"hljs-string\">&quot;HKCR\\Directory\\Background\\shell&quot;</span>的所有者为:Everyone<br>&gt;&gt;fcc_owner.inf <span class=\"hljs-built_in\">echo</span>.[<span class=\"hljs-type\">Version</span>]<br>&gt;&gt;fcc_owner.inf echo.Signature = <span class=\"hljs-string\">&quot;<span class=\"hljs-variable\">$Chicago</span><span class=\"hljs-variable\">$</span>&quot;</span><br>&gt;&gt;fcc_owner.inf <span class=\"hljs-built_in\">echo</span>.<br>&gt;&gt;fcc_owner.inf <span class=\"hljs-built_in\">echo</span>.[<span class=\"hljs-type\">Registry</span> <span class=\"hljs-type\">Keys</span>]<br>&gt;&gt;fcc_owner.inf <span class=\"hljs-built_in\">echo</span>.<span class=\"hljs-string\">&quot;CLASSES_ROOT\\Directory\\Background\\shell&quot;</span>, <span class=\"hljs-number\">0</span>, <span class=\"hljs-string\">&quot;O:WD&quot;</span><br>secedit /configure /db fcc_owner.sdb /cfg fcc_owner.inf /log fcc_owner.log<br><span class=\"hljs-built_in\">del</span> fcc_owner.*<br>:main<br><span class=\"hljs-built_in\">cls</span><br>color <span class=\"hljs-number\">0</span>a<br><span class=\"hljs-built_in\">echo</span> *************************************************************************<br><span class=\"hljs-built_in\">echo</span>.<br><span class=\"hljs-built_in\">echo</span> 该工具用于更改新版windows10系统shift+右键以何种方式打开命令窗口。<br><span class=\"hljs-built_in\">echo</span> 系统默认“在此处打开PowerShell”，<br><span class=\"hljs-built_in\">echo</span> 此工具可以在“PowerShell”和“CMD”之间切换。<br><span class=\"hljs-built_in\">echo</span>.<br><span class=\"hljs-built_in\">echo</span> ★注意！请使用管理员权限运行改工具！<br><span class=\"hljs-built_in\">echo</span>.<br><span class=\"hljs-built_in\">echo</span> 请选择操作：<br><span class=\"hljs-built_in\">echo</span> <span class=\"hljs-number\">1</span>、修改为“在此处打开CMD窗口”<br><span class=\"hljs-built_in\">echo</span> <span class=\"hljs-number\">2</span>、修改为“在此处打开PowerShell窗口”<br><span class=\"hljs-built_in\">echo</span> <span class=\"hljs-number\">3</span>、同时显示<span class=\"hljs-number\">1</span>和<span class=\"hljs-number\">2</span><br><span class=\"hljs-built_in\">echo</span>.<br><span class=\"hljs-built_in\">echo</span> by:frogchou<br><span class=\"hljs-built_in\">echo</span> website:frogchou.com<br><span class=\"hljs-built_in\">echo</span> *************************************************************************<br><span class=\"hljs-built_in\">echo</span>.<br><span class=\"hljs-built_in\">set</span> /p var=请输入序号并回车开始修改：<br><span class=\"hljs-keyword\">if</span> <span class=\"hljs-string\">&quot;%var%&quot;</span>==<span class=\"hljs-string\">&quot;1&quot;</span> goto changeCMD<br><span class=\"hljs-keyword\">if</span> <span class=\"hljs-string\">&quot;%var%&quot;</span>==<span class=\"hljs-string\">&quot;2&quot;</span> goto changePowerShell<br><span class=\"hljs-keyword\">if</span> <span class=\"hljs-string\">&quot;%var%&quot;</span>==<span class=\"hljs-string\">&quot;3&quot;</span> (goto changeShowAll) <span class=\"hljs-keyword\">else</span> (goto error)<br>:changeCMD<br>reg delete HKCR\\Directory\\Background\\shell\\cmd /v HideBasedOnVelocityId /f<br>reg add HKCR\\Directory\\Background\\shell\\cmd /v ShowBasedOnVelocityId /t REG_DWORD /d <span class=\"hljs-number\">6527944</span> /f<br>reg delete HKCR\\Directory\\Background\\shell\\Powershell /v ShowBasedOnVelocityId /f<br>reg add HKCR\\Directory\\Background\\shell\\Powershell /v HideBasedOnVelocityId /t REG_DWORD /d <span class=\"hljs-number\">6527944</span> /f<br>goto <span class=\"hljs-keyword\">end</span><br>:changePowerShell<br>reg delete HKCR\\Directory\\Background\\shell\\cmd /v ShowBasedOnVelocityId /f<br>reg add HKCR\\Directory\\Background\\shell\\cmd /v HideBasedOnVelocityId /t REG_DWORD /d <span class=\"hljs-number\">6527944</span> /f<br>reg delete HKCR\\Directory\\Background\\shell\\Powershell /v HideBasedOnVelocityId /f<br>reg add HKCR\\Directory\\Background\\shell\\Powershell /v ShowBasedOnVelocityId /t REG_DWORD /d <span class=\"hljs-number\">6527944</span> /f<br>goto <span class=\"hljs-keyword\">end</span><br>:changeShowAll<br>reg delete HKCR\\Directory\\Background\\shell\\cmd /v HideBasedOnVelocityId /f<br>reg add HKCR\\Directory\\Background\\shell\\cmd /v ShowBasedOnVelocityId /t REG_DWORD /d <span class=\"hljs-number\">6527944</span> /f<br>reg delete HKCR\\Directory\\Background\\shell\\Powershell /v HideBasedOnVelocityId /f<br>reg add HKCR\\Directory\\Background\\shell\\Powershell /v ShowBasedOnVelocityId /t REG_DWORD /d <span class=\"hljs-number\">6527944</span> /f<br>goto <span class=\"hljs-keyword\">end</span><br>:<span class=\"hljs-keyword\">end</span><br><span class=\"hljs-built_in\">echo</span>.<br><span class=\"hljs-built_in\">echo</span> 修改完成！按任意键退出.<br>pause &gt;nul<br><span class=\"hljs-keyword\">exit</span><br>:error<br><span class=\"hljs-built_in\">echo</span>.<br><span class=\"hljs-built_in\">echo</span> 选择错误！按任意键返回主菜单.<br>pause &gt;nul<br>goto main<br></code></pre></td></tr></table></figure>\n\n\n<h1 id=\"CMD\"><a href=\"#CMD\" class=\"headerlink\" title=\"CMD\"></a>CMD</h1><figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs cmd\">@<span class=\"hljs-built_in\">echo</span> off <br><span class=\"hljs-built_in\">echo</span> 定时关机DOS命令，使用方式: &quot;sdat <span class=\"hljs-number\">23</span>:<span class=\"hljs-number\">12</span>:<span class=\"hljs-number\">12</span>&quot;; <br><span class=\"hljs-built_in\">echo</span> sdat 为命令名称，<span class=\"hljs-number\">23</span>:<span class=\"hljs-number\">12</span>:<span class=\"hljs-number\">12</span>为当天的时间参数<br>::<span class=\"hljs-built_in\">set</span> yy=<span class=\"hljs-variable\">%date:~0,4%</span><br>::<span class=\"hljs-built_in\">set</span> mm=<span class=\"hljs-variable\">%date:~5,2%</span><br>::<span class=\"hljs-built_in\">set</span> dd=<span class=\"hljs-variable\">%date:~8,2%</span><br><span class=\"hljs-built_in\">set</span> h=<span class=\"hljs-variable\">%time:~0,2%</span><br><span class=\"hljs-built_in\">set</span> m=<span class=\"hljs-variable\">%time:~3,2%</span><br><span class=\"hljs-built_in\">set</span> s=<span class=\"hljs-variable\">%time:~6,2%</span><br>::<span class=\"hljs-built_in\">echo</span> <span class=\"hljs-variable\">%yy%</span> <span class=\"hljs-variable\">%mm%</span> <span class=\"hljs-variable\">%dd%</span> <span class=\"hljs-variable\">%h%</span> <span class=\"hljs-variable\">%m%</span> <span class=\"hljs-variable\">%s%</span><br>::<span class=\"hljs-built_in\">echo</span> %<span class=\"hljs-number\">1</span> %<span class=\"hljs-number\">2</span> %<span class=\"hljs-number\">3</span><br><span class=\"hljs-built_in\">set</span> /a ts=(%<span class=\"hljs-number\">1</span> - <span class=\"hljs-variable\">%h%</span>)*<span class=\"hljs-number\">3600</span> + (%<span class=\"hljs-number\">2</span> - <span class=\"hljs-variable\">%m%</span>)*<span class=\"hljs-number\">60</span> + (%<span class=\"hljs-number\">3</span> - <span class=\"hljs-variable\">%s%</span>)<br><span class=\"hljs-keyword\">IF</span> /i <span class=\"hljs-variable\">%ts%</span> <span class=\"hljs-keyword\">LSS</span> <span class=\"hljs-number\">1</span> (<br><span class=\"hljs-built_in\">echo</span> ERROR:Shutdown <span class=\"hljs-built_in\">time</span> must be <span class=\"hljs-built_in\">time</span> <span class=\"hljs-keyword\">in</span> future;<br>) <span class=\"hljs-keyword\">ELSE</span> (<br><span class=\"hljs-built_in\">echo</span> INFO:System will shutdown after <span class=\"hljs-variable\">%ts%</span> seconds <span class=\"hljs-built_in\">at</span> %<span class=\"hljs-number\">1</span> : %<span class=\"hljs-number\">2</span> ：%<span class=\"hljs-number\">3</span>; <br>shutdown /s /t <span class=\"hljs-variable\">%ts%</span><br>)<br>::<span class=\"hljs-built_in\">pause</span> <br></code></pre></td></tr></table></figure>\n\n\n\n<h1 id=\"Bat\"><a href=\"#Bat\" class=\"headerlink\" title=\"Bat\"></a>Bat</h1><figure class=\"highlight bat\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bat\">@<span class=\"hljs-built_in\">echo</span> off<br><span class=\"hljs-built_in\">echo</span>.<br><span class=\"hljs-built_in\">echo</span> MySQL数据库备份<br><span class=\"hljs-built_in\">set</span> del_date_back=<span class=\"hljs-number\">15</span><br><span class=\"hljs-built_in\">set</span> all_data_back_value=<span class=\"hljs-number\">1</span><br><span class=\"hljs-built_in\">set</span> haoya_bin_path=&quot;C:\\Program Files\\HaoZip\\&quot;<br><span class=\"hljs-built_in\">set</span> mysql_bin_path=&quot;C:\\wamp\\bin\\mysql\\mysql5.<span class=\"hljs-number\">5</span>.<span class=\"hljs-number\">24</span>\\bin\\&quot;<br><span class=\"hljs-built_in\">set</span> mysql_data_path=&quot;C:\\wamp\\bin\\mysql\\mysql5.<span class=\"hljs-number\">5</span>.<span class=\"hljs-number\">24</span>\\data\\&quot;<br>::<span class=\"hljs-built_in\">set</span> apache_bin_path=&quot;C:\\wamp\\bin\\apache\\apache2.<span class=\"hljs-number\">2</span>.<span class=\"hljs-number\">22</span>\\bin\\&quot;<br><span class=\"hljs-built_in\">set</span> apache_data_path=&quot;C:\\wamp\\&quot;<br><span class=\"hljs-built_in\">set</span> data_back_path=&quot;C:\\dtsbc_data_back\\&quot;<br><span class=\"hljs-built_in\">set</span> del_file_path=&quot;C:\\wamp\\www\\dtsbc\\Admin\\Runtime\\&quot;<br><span class=\"hljs-built_in\">set</span> Ymd=&quot;<span class=\"hljs-variable\">%date:~,4%</span><span class=\"hljs-variable\">%date:~5,2%</span><span class=\"hljs-variable\">%date:~8,2%</span>&quot;<br><span class=\"hljs-built_in\">set</span> /a t=<span class=\"hljs-number\">100</span>+<span class=\"hljs-variable\">%time:~,2%</span><br><span class=\"hljs-built_in\">set</span> bakFileNameTail=_BAK_<span class=\"hljs-variable\">%date:~,4%</span><span class=\"hljs-variable\">%date:~5,2%</span><span class=\"hljs-variable\">%date:~8,2%</span>_<span class=\"hljs-variable\">%t:~1%</span><span class=\"hljs-variable\">%time:~3,2%</span><span class=\"hljs-variable\">%time:~6,2%</span><br><span class=\"hljs-built_in\">echo</span> *****************************<br><span class=\"hljs-built_in\">echo</span>.<br><span class=\"hljs-built_in\">echo</span> 今天是： <span class=\"hljs-variable\">%date%</span>_<span class=\"hljs-variable\">%time%</span><br><span class=\"hljs-built_in\">echo</span> 好压执行路径为： <span class=\"hljs-variable\">%haoya_bin_path%</span><br><span class=\"hljs-built_in\">echo</span> mysql执行路径为： <span class=\"hljs-variable\">%mysql_bin_path%</span><br><span class=\"hljs-built_in\">echo</span> mysql数据路径为： <span class=\"hljs-variable\">%mysql_data_path%</span><br>::<span class=\"hljs-built_in\">echo</span> apache执行路径为： <span class=\"hljs-variable\">%apache_bin_path%</span><br><span class=\"hljs-built_in\">echo</span> apache数据路径为： <span class=\"hljs-variable\">%apache_data_path%</span><br><span class=\"hljs-built_in\">echo</span>.<br><span class=\"hljs-built_in\">echo</span> *****************************<br>:: HaoZipC a -tzip <span class=\"hljs-number\">20161221</span>.zip config\\*<br>::<span class=\"hljs-built_in\">set</span> mysql_bin_path = &quot;C:\\wamp\\bin\\mysql\\mysql5.<span class=\"hljs-number\">5</span>.<span class=\"hljs-number\">24</span>\\bin&quot;<br>::<span class=\"hljs-built_in\">set</span> apache_bin_path = &quot;C:\\wamp\\bin\\apache\\apache2.<span class=\"hljs-number\">2</span>.<span class=\"hljs-number\">22</span>\\bin&quot;<br>::<span class=\"hljs-built_in\">set</span> haoya_bin_path = &quot;C:\\Program Files\\HaoZip&quot;<br>::创建备份的数据的目录<br><br><span class=\"hljs-built_in\">md</span> <span class=\"hljs-variable\">%data_back_path%</span><span class=\"hljs-variable\">%Ymd%</span><br><span class=\"hljs-variable\">%mysql_bin_path%</span>\\mysqldump -u root --default-character-<span class=\"hljs-built_in\">set</span>=utf8 --databases dtsbc &gt; <span class=\"hljs-variable\">%data_back_path%</span><span class=\"hljs-variable\">%Ymd%</span>\\dtsbc_<span class=\"hljs-variable\">%bakFileNameTail%</span>.sql<br><span class=\"hljs-variable\">%mysql_bin_path%</span>\\mysqldump -u root --default-character-<span class=\"hljs-built_in\">set</span>=utf8 --databases mysql &gt; <span class=\"hljs-variable\">%data_back_path%</span><span class=\"hljs-variable\">%Ymd%</span>\\mysql_<span class=\"hljs-variable\">%bakFileNameTail%</span>.sql<br><span class=\"hljs-variable\">%mysql_bin_path%</span>\\mysqldump -u root --default-character-<span class=\"hljs-built_in\">set</span>=utf8 --databases bbsdata &gt; <span class=\"hljs-variable\">%data_back_path%</span><span class=\"hljs-variable\">%Ymd%</span>\\bbsdata_<span class=\"hljs-variable\">%bakFileNameTail%</span>.sql<br><span class=\"hljs-built_in\">net</span> stop wampapache<br><span class=\"hljs-built_in\">net</span> stop wampmysqld<br><span class=\"hljs-built_in\">rd</span>/s/q <span class=\"hljs-variable\">%del_file_path%</span><br><br><span class=\"hljs-variable\">%haoya_bin_path%</span>HaoZipC a -tzip <span class=\"hljs-variable\">%data_back_path%</span><span class=\"hljs-variable\">%Ymd%</span>\\dtsbc_mysql_<span class=\"hljs-variable\">%Ymd%</span>.zip <span class=\"hljs-variable\">%mysql_data_path%</span>dtsbc\\*<br><span class=\"hljs-variable\">%haoya_bin_path%</span>HaoZipC a -tzip <span class=\"hljs-variable\">%data_back_path%</span><span class=\"hljs-variable\">%Ymd%</span>\\bbs_mysql_<span class=\"hljs-variable\">%Ymd%</span>.zip <span class=\"hljs-variable\">%mysql_data_path%</span>bbs\\*<br><span class=\"hljs-variable\">%haoya_bin_path%</span>HaoZipC a -tzip <span class=\"hljs-variable\">%data_back_path%</span><span class=\"hljs-variable\">%Ymd%</span>\\mysql_mysql_<span class=\"hljs-variable\">%Ymd%</span>.zip <span class=\"hljs-variable\">%mysql_data_path%</span>mysql\\*<br><span class=\"hljs-variable\">%haoya_bin_path%</span>HaoZipC a -tzip <span class=\"hljs-variable\">%data_back_path%</span><span class=\"hljs-variable\">%Ymd%</span>\\dtsbc_php_<span class=\"hljs-variable\">%Ymd%</span>.zip <span class=\"hljs-variable\">%apache_data_path%</span>dtsbc\\*<br><span class=\"hljs-variable\">%haoya_bin_path%</span>HaoZipC a -tzip <span class=\"hljs-variable\">%data_back_path%</span><span class=\"hljs-variable\">%Ymd%</span>\\bbs_php_<span class=\"hljs-variable\">%Ymd%</span>.zip <span class=\"hljs-variable\">%apache_data_path%</span>bbs\\*<br><br><span class=\"hljs-keyword\">if</span>  <span class=\"hljs-variable\">%date:~9,1%</span> <span class=\"hljs-keyword\">equ</span> <span class=\"hljs-variable\">%all_data_back_value%</span> ( <span class=\"hljs-variable\">%haoya_bin_path%</span>HaoZipC a -tzip <span class=\"hljs-variable\">%data_back_path%</span><span class=\"hljs-variable\">%Ymd%</span>\\wamp_<span class=\"hljs-variable\">%Ymd%</span>.zip <span class=\"hljs-variable\">%apache_data_path%</span>*)<br>::<span class=\"hljs-built_in\">cmd</span><br><span class=\"hljs-built_in\">net</span> <span class=\"hljs-built_in\">start</span> wampapache<br><span class=\"hljs-built_in\">net</span> <span class=\"hljs-built_in\">start</span> wampmysqld<br>::<span class=\"hljs-built_in\">set</span>/a n=<span class=\"hljs-number\">5</span><br><span class=\"hljs-built_in\">set</span>/a y=<span class=\"hljs-variable\">%date:~,4%</span>,m=<span class=\"hljs-number\">1</span><span class=\"hljs-variable\">%date:~5,2%</span>-<span class=\"hljs-number\">100</span>,d=<span class=\"hljs-number\">1</span><span class=\"hljs-variable\">%date:~8,2%</span>-<span class=\"hljs-number\">100</span><br><span class=\"hljs-built_in\">set</span>/a d-=<span class=\"hljs-variable\">%del_date_back%</span><br><span class=\"hljs-keyword\">if</span> <span class=\"hljs-variable\">%d%</span> <span class=\"hljs-keyword\">gtr</span> <span class=\"hljs-number\">0</span> <span class=\"hljs-keyword\">goto</span> :ok<br>:ov<br><span class=\"hljs-built_in\">set</span>/a &quot;<span class=\"hljs-built_in\">md</span>=<span class=\"hljs-number\">31</span>-<span class=\"hljs-variable\">!(m-5)-!</span>(m-<span class=\"hljs-number\">7</span>)-<span class=\"hljs-variable\">!(m-10)-!</span>(m-<span class=\"hljs-number\">12</span>)-<span class=\"hljs-variable\">!(m-3)*(3-!</span>(y&amp;<span class=\"hljs-number\">3</span>))&quot;<br><span class=\"hljs-built_in\">set</span>/a d+=<span class=\"hljs-built_in\">md</span>,m-=<span class=\"hljs-number\">1</span><br><span class=\"hljs-keyword\">if</span> <span class=\"hljs-variable\">%m%</span> <span class=\"hljs-keyword\">equ</span> <span class=\"hljs-number\">0</span> <span class=\"hljs-built_in\">set</span>/a m=<span class=\"hljs-number\">12</span>,y-=<span class=\"hljs-number\">1</span><br><span class=\"hljs-keyword\">if</span> <span class=\"hljs-variable\">%d%</span> <span class=\"hljs-keyword\">leq</span> <span class=\"hljs-number\">0</span> <span class=\"hljs-keyword\">goto</span> :ov<br>:ok<br><span class=\"hljs-built_in\">set</span>/a <span class=\"hljs-built_in\">md</span>=m*<span class=\"hljs-number\">100</span>+d+<span class=\"hljs-number\">10000</span><br><span class=\"hljs-built_in\">set</span> back_data_value=&quot;<span class=\"hljs-variable\">%y%</span><span class=\"hljs-variable\">%md:~1%</span>&quot;<br><span class=\"hljs-built_in\">echo</span> <span class=\"hljs-variable\">%del_date_back%</span>天前的日期为：<span class=\"hljs-variable\">%back_data_value%</span><br><span class=\"hljs-built_in\">cd</span> <span class=\"hljs-variable\">%data_back_path%</span><br><br><span class=\"hljs-built_in\">set</span> /a data_back_value_int=<span class=\"hljs-variable\">%back_data_value%</span>+<span class=\"hljs-number\">0</span><br><span class=\"hljs-built_in\">echo</span> <span class=\"hljs-variable\">%data_back_value_int%</span><br>::单条语句执行的时候需要的是一个% 在批处理中的话，需要两个%%<br><span class=\"hljs-keyword\">for</span> /F <span class=\"hljs-variable\">%%i</span> <span class=\"hljs-keyword\">in</span> (&#x27;<span class=\"hljs-built_in\">dir</span>  <span class=\"hljs-variable\">%data_back_path%</span> /a:d /b&#x27;) <span class=\"hljs-keyword\">do</span> (<span class=\"hljs-keyword\">if</span> <span class=\"hljs-variable\">%%i</span> <span class=\"hljs-keyword\">lss</span> <span class=\"hljs-variable\">%data_back_value_int%</span> ( <span class=\"hljs-built_in\">rd</span>/s/q <span class=\"hljs-variable\">%%i</span> ))<br>::<span class=\"hljs-keyword\">for</span> /F <span class=\"hljs-variable\">%%i</span> <span class=\"hljs-keyword\">in</span> (&#x27;<span class=\"hljs-built_in\">dir</span>  <span class=\"hljs-variable\">%data_back_path%</span> /a:d /b&#x27;) <span class=\"hljs-keyword\">do</span> (  <span class=\"hljs-keyword\">if</span> <span class=\"hljs-variable\">%%i</span> <span class=\"hljs-keyword\">lss</span> <span class=\"hljs-variable\">%data_back_value_int%</span> ( <span class=\"hljs-built_in\">echo</span> <span class=\"hljs-variable\">%%i</span> ) <span class=\"hljs-keyword\">else</span> ( <span class=\"hljs-built_in\">echo</span> &quot;google&quot; )  )<br><span class=\"hljs-function\">echo.:<span class=\"hljs-title\">P</span></span><br><span class=\"hljs-function\"></span><br><span class=\"hljs-function\"><span class=\"hljs-title\">echo</span> <span class=\"hljs-title\">MySQL</span>数据库备份完成，请进行检查。。。</span><br><span class=\"hljs-function\"></span><br><span class=\"hljs-function\"><span class=\"hljs-title\">echo</span>.:<span class=\"hljs-title\">P</span></span><br><span class=\"hljs-function\"><span class=\"hljs-title\">echo</span>.</span><br><span class=\"hljs-function\">//<span class=\"hljs-title\">pause</span></span><br><span class=\"hljs-function\">::<span class=\"hljs-title\">pause</span></span><br></code></pre></td></tr></table></figure>\n\n\n\n<h1 id=\"Groovy\"><a href=\"#Groovy\" class=\"headerlink\" title=\"Groovy\"></a>Groovy</h1><figure class=\"highlight groovy\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs groovy\">errpattern = <span class=\"hljs-regexp\">~/Failures: [1-9]+/</span><br>errpatternSum = <span class=\"hljs-regexp\">~/passed:\\d+,.*failed:\\d+,/</span><br><span class=\"hljs-keyword\">def</span> ratio<br>manager.build.logFile.eachLine&#123; line -&gt;<br>    errmatcher=errpattern.matcher(line)<br>    errmatcherSum=errpatternSum.matcher(line)<br>    <span class=\"hljs-keyword\">if</span> (errmatcher.find()) &#123;<br>        manager.build.<span class=\"hljs-meta\">@result</span> = hudson.model.Result.UNSTABLE<br>    &#125;<br>    <span class=\"hljs-keyword\">if</span>(errmatcherSum.find())&#123;<br>        numArray = line.findAll(<span class=\"hljs-regexp\">/\\d+/</span>)*.toInteger()<br>        manager.listener.logger.println(<span class=\"hljs-string\">&quot;&gt;&gt;&gt; number =  &quot;</span> + numArray)<br>        ratio = (numArray[<span class=\"hljs-number\">1</span>] / numArray[<span class=\"hljs-number\">3</span>]) * <span class=\"hljs-number\">100</span><br>        manager.listener.logger.println(<span class=\"hljs-string\">&quot;&gt;&gt;&gt; ratio =  &quot;</span> + ratio + <span class=\"hljs-string\">&quot;%&quot;</span>)<br>    &#125;<br>&#125;<br><br>ratio = Math.round(ratio)<br><span class=\"hljs-comment\">//add text next to the job build history</span><br>manager.addShortText(<span class=\"hljs-string\">&quot;failure rate -&gt; &quot;</span> + ratio + <span class=\"hljs-string\">&quot;%&quot;</span>)<br></code></pre></td></tr></table></figure>\n\n\n<h1 id=\"Gradle\"><a href=\"#Gradle\" class=\"headerlink\" title=\"Gradle\"></a>Gradle</h1><figure class=\"highlight gradle\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs gradle\">apply plugin: <span class=\"hljs-string\">&#x27;com.android.application&#x27;</span><br><br>android &#123;<br>    compileSdkVersion <span class=\"hljs-number\">25</span><br>    buildToolsVersion <span class=\"hljs-string\">&quot;25.0.1&quot;</span><br>    defaultConfig &#123;<br>        applicationId <span class=\"hljs-string\">&quot;com.grgbanking.school&quot;</span><br>        minSdkVersion <span class=\"hljs-number\">15</span><br>        targetSdkVersion <span class=\"hljs-number\">25</span><br>        versionCode <span class=\"hljs-number\">1</span><br>        versionName <span class=\"hljs-string\">&quot;1.0&quot;</span><br>        testInstrumentationRunner <span class=\"hljs-string\">&quot;android.support.test.runner.AndroidJUnitRunner&quot;</span><br>    &#125;<br>    buildTypes &#123;<br>        release &#123;<br>            minifyEnabled <span class=\"hljs-keyword\">false</span><br>            proguardFiles getDefaultProguardFile(<span class=\"hljs-string\">&#x27;proguard-android.txt&#x27;</span>), <span class=\"hljs-string\">&#x27;proguard-rules.pro&#x27;</span><br>        &#125;<br>    &#125;<br>    dataBinding &#123;<br>        enabled = <span class=\"hljs-keyword\">true</span><br>    &#125;<br>&#125;<br><br><span class=\"hljs-keyword\">dependencies</span> &#123;<br>    <span class=\"hljs-keyword\">compile</span> <span class=\"hljs-keyword\">fileTree</span>(dir: <span class=\"hljs-string\">&#x27;libs&#x27;</span>, <span class=\"hljs-keyword\">include</span>: [<span class=\"hljs-string\">&#x27;*.jar&#x27;</span>])<br>    androidTestCompile(<span class=\"hljs-string\">&#x27;com.android.support.test.espresso:espresso-core:2.2.2&#x27;</span>, &#123;<br>        <span class=\"hljs-keyword\">exclude</span> <span class=\"hljs-keyword\">group</span>: <span class=\"hljs-string\">&#x27;com.android.support&#x27;</span>, module: <span class=\"hljs-string\">&#x27;support-annotations&#x27;</span><br>    &#125;)<br>    <span class=\"hljs-keyword\">compile</span> <span class=\"hljs-string\">&#x27;com.android.support:appcompat-v7:25.0.1&#x27;</span><br>    <span class=\"hljs-keyword\">compile</span> <span class=\"hljs-string\">&#x27;com.jakewharton.rxbinding:rxbinding:0.4.0&#x27;</span><br><br>    <span class=\"hljs-comment\">/*compile &#x27;com.squareup.retrofit2:retrofit:2.1.0&#x27;</span><br><span class=\"hljs-comment\">    compile &#x27;com.squareup.retrofit2:adapter-rxjava:2.0.0-beta4&#x27;*/</span><br>    <span class=\"hljs-keyword\">compile</span> <span class=\"hljs-string\">&#x27;com.squareup.retrofit2:retrofit:2.0.0-beta4&#x27;</span><br>    <span class=\"hljs-keyword\">compile</span> <span class=\"hljs-string\">&#x27;com.squareup.retrofit2:converter-gson:2.0.0-beta4&#x27;</span><br>    <span class=\"hljs-keyword\">compile</span> <span class=\"hljs-string\">&#x27;com.squareup.retrofit2:adapter-rxjava:2.0.0-beta4&#x27;</span><br><br>    <span class=\"hljs-keyword\">compile</span> <span class=\"hljs-string\">&#x27;com.squareup.okhttp:okhttp:2.7.5&#x27;</span><br>    <span class=\"hljs-keyword\">compile</span> <span class=\"hljs-string\">&#x27;com.alibaba:fastjson:1.2.20&#x27;</span><br>    <span class=\"hljs-keyword\">compile</span> <span class=\"hljs-string\">&#x27;org.apache.commons:commons-lang3:3.5&#x27;</span><br><br>    testCompile <span class=\"hljs-string\">&#x27;junit:junit:4.12&#x27;</span><br>&#125;<br><br></code></pre></td></tr></table></figure>\n\n<h1 id=\"Git\"><a href=\"#Git\" class=\"headerlink\" title=\"Git\"></a>Git</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs git\"># 1.初始化git<br>git init <br><br># 2.查看git修改状态：<br>git status<br><br># 3.将项目保存到仓库<br>先 git add .<br>再 git commit -m &quot;备注&quot;<br><br># 4. 查看最新三个仓库中的项目<br>git log<br><br># 5. 查看所有仓库中的项目<br>git reflog<br><br># 6.恢复成某个项目<br>git reset --hard 这里写id<br><br># 7.将github中的项目拷贝下来<br>git clone 地址<br><br># 8.将本地项目传到github <br>git push origin master<br><br><br># 9.更新本地项目，与gitbub一致<br>git pull<br><br># 10.将本地项目和新建的远程仓库关联起来，必须是未初始化仓库<br>git remote add origin git@github.com:michaelliao&#x2F;learngit.git<br><br># 11.把本地库的内容推送到远程，用git push命令<br>git push -u origin master    # （由于远程库是空的，我们第一次推送master分支时，加上了-u参数，<br>\t\t\t\tGit不但会把本地的master分支内容推送的远程新的master分支，<br>\t\t\t\t还会把本地的master分支和远程的master分支关联起来，<br>\t\t\t\t在以后的推送或者拉取时就可以简化命令。）<br><br></code></pre></td></tr></table></figure>\n\n\n<p>···<br>···<br>···</p>\n<h1 id=\"待添加\"><a href=\"#待添加\" class=\"headerlink\" title=\"待添加\"></a>待添加</h1><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\">connect: &#123;<br>    server: &#123;<br>        options: &#123;<br>            port: <span class=\"hljs-number\">9100</span>,<br>            hostname: <span class=\"hljs-string\">&#x27;*&#x27;</span>,<br>            base: <span class=\"hljs-string\">&#x27;.&#x27;</span>,<br>            keepalive: <span class=\"hljs-literal\">true</span><br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>\n<h1 id=\"待添加-1\"><a href=\"#待添加-1\" class=\"headerlink\" title=\"待添加\"></a>待添加</h1><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-built_in\">this</span>.base_uri = <span class=\"hljs-built_in\">this</span>.config.base_uri || <span class=\"hljs-built_in\">this</span>.prefs.get(<span class=\"hljs-string\">&quot;app-base_uri&quot;</span>) || <span class=\"hljs-string\">&quot;http://localhost:9200&quot;</span>;<br></code></pre></td></tr></table></figure>\n\n<h1 id=\"待添加-2\"><a href=\"#待添加-2\" class=\"headerlink\" title=\"待添加\"></a>待添加</h1><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-built_in\">this</span>.base_uri = <span class=\"hljs-built_in\">this</span>.config.base_uri || <span class=\"hljs-built_in\">this</span>.prefs.get(<span class=\"hljs-string\">&quot;app-base_uri&quot;</span>) || <span class=\"hljs-string\">&quot;http://127.0.0.1:9200&quot;</span>;<br></code></pre></td></tr></table></figure>\n\n\n<h1 id=\"待添加-3\"><a href=\"#待添加-3\" class=\"headerlink\" title=\"待添加\"></a>待添加</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs plain\">npm install<br></code></pre></td></tr></table></figure>\n\n<h1 id=\"待添加-4\"><a href=\"#待添加-4\" class=\"headerlink\" title=\"待添加\"></a>待添加</h1><h1 id=\"待添加-5\"><a href=\"#待添加-5\" class=\"headerlink\" title=\"待添加\"></a>待添加</h1>"},{"title":"树莓派4B折腾记","date":"2021-06-30T15:12:15.000Z","description":"树莓派4B折腾记","_content":"\n# 1.安装Ubuntu Desktop\n\n\n# 2.设置SSD启动\n\n\n# 3.设置微雪显示器（非1080P屏幕）启动\n需额外设置\n\n\n\n\n\n\n\n\n\n\n","source":"_posts/树莓派.md","raw":"---\ntitle: 树莓派4B折腾记\ndate: 2021-06-30 23:12:15\ncategories: \"树莓派\" #文章分类目录\ntags: \n     - 树莓派\ndescription: 树莓派4B折腾记 #本页的描述 可以省略\n---\n\n# 1.安装Ubuntu Desktop\n\n\n# 2.设置SSD启动\n\n\n# 3.设置微雪显示器（非1080P屏幕）启动\n需额外设置\n\n\n\n\n\n\n\n\n\n\n","slug":"树莓派","published":1,"updated":"2025-03-26T06:43:53.005Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cm8pr0j2j0022gskz7yc09dmc","content":"<h1 id=\"1-安装Ubuntu-Desktop\"><a href=\"#1-安装Ubuntu-Desktop\" class=\"headerlink\" title=\"1.安装Ubuntu Desktop\"></a>1.安装Ubuntu Desktop</h1><h1 id=\"2-设置SSD启动\"><a href=\"#2-设置SSD启动\" class=\"headerlink\" title=\"2.设置SSD启动\"></a>2.设置SSD启动</h1><h1 id=\"3-设置微雪显示器（非1080P屏幕）启动\"><a href=\"#3-设置微雪显示器（非1080P屏幕）启动\" class=\"headerlink\" title=\"3.设置微雪显示器（非1080P屏幕）启动\"></a>3.设置微雪显示器（非1080P屏幕）启动</h1><p>需额外设置</p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"1-安装Ubuntu-Desktop\"><a href=\"#1-安装Ubuntu-Desktop\" class=\"headerlink\" title=\"1.安装Ubuntu Desktop\"></a>1.安装Ubuntu Desktop</h1><h1 id=\"2-设置SSD启动\"><a href=\"#2-设置SSD启动\" class=\"headerlink\" title=\"2.设置SSD启动\"></a>2.设置SSD启动</h1><h1 id=\"3-设置微雪显示器（非1080P屏幕）启动\"><a href=\"#3-设置微雪显示器（非1080P屏幕）启动\" class=\"headerlink\" title=\"3.设置微雪显示器（非1080P屏幕）启动\"></a>3.设置微雪显示器（非1080P屏幕）启动</h1><p>需额外设置</p>\n"},{"title":"树莓派安装MySQL8.0.25数据库","date":"2021-07-27T15:12:15.000Z","description":"树莓派安装MySQL8.0.25数据库","_content":"\n\n\n\n## 1.安装  \n安装mysql-server \n\n```bash\nsudo apt install mysql-server\n```\n\n#另外自己看下数据库配置是不是mysql_native_password方式，如果不是就在my.cnf文件中加上。\n\n\n\n```\n#skip-name-resolve   // 禁用DNS查询\n\n[mysqld]\n#skip-grant-tables   // 允许免密登录（去掉前面的#，然后重启Mysql服务后生效）\ndefault_authentication_plugin = mysql_native_password\n```\n\n\n\n## 2 授权\n 免密登录(重置密码遇到ERROR 1045 (28000): Access denied for user 'root'@'localhost' (using passwor:yes)问题)\n文章转载自：https://www.cnblogs.com/gumuzi/p/5711495.html\n一般这个错误是由密码错误引起，解决的办法自然就是重置密码。\n假设我们使用的是root账户。\n1.重置密码的第一步就是跳过MySQL的密码认证过程，方法如下：\n\n```\n#vim /etc/my.cnf           // (注：windows下修改的是my.ini)\n```\n\n在文档内搜索mysqld定位到[mysqld]文本段：\n/mysqld(在vim编辑状态下直接输入该命令可搜索文本内容)\n在[mysqld]后面任意一行添加“skip-grant-tables”用来跳过密码验证的过程，如下图所示：\n\n```\n[mysqld]\nskip-grant-tables\n```\n\n\n保存文档并退出\n\n2.接下来我们需要重启MySQL：\n\n```\n/etc/init.d/mysql restart(有些用户可能需要使用/etc/init.d/mysqld restart)\n```\n\n3.重启之后输入mysql即可进入mysql。 \n\n4.接下来就是用sql来修改root的密码\n进入到终端当中，敲入 mysql -u root -p 命令然后回车，当需要输入密码时，直接按enter键，便可以不用密码登录到数据库当中\n\n```\nmysql> ALTER USER ‘root’@’%’ IDENTIFIED WITH mysql_native_password BY ‘12345678’;\nmysql> flush privileges;\nmysql> quit\n```\n\n注意：如果在执行该步骤的时候出现ERROR 1290 (HY000): The MySQL server is running with the --skip-grant-tables option so it cannot execute this statement 错误。则执行下 flush privileges 命令，再执行该命令即可。\n到这里root账户就已经重置成新的密码了。\n5.编辑my.cnf,去掉刚才添加的内容，然后重启MySQL。大功告成！\n 网上有很多关于这个问题的解决说明，很多刚接触的朋友可能比较迷惑的是在自己的平台上找不到my.cnf或者my.ini文件，如果你是Linux,使用如下方式可以搜索到：\n\n```\nGRANT ALL PRIVILEGES ON *.* TO 'acanx'@'%' WITH GRANT OPTION;\n```\n\n## 3.Ubuntu下配置Mysql允许远程连接\n\n- [Ubuntu下设置mysql允许远程连接](https://blog.csdn.net/u011120720/article/details/51096695?utm_medium=distribute.pc_relevant_t0.none-task-blog-2%7Edefault%7EBlogCommendFromMachineLearnPai2%7Edefault-1.control&depth_1-utm_source=distribute.pc_relevant_t0.none-task-blog-2%7Edefault%7EBlogCommendFromMachineLearnPai2%7Edefault-1.control)\n\n默认情况下，mysql只允许本地连接，如果需要开启远程连接，则需要修改配置。\n\n首先打开配置文件进行修改\n```\ncd /etc/mysql/mysql.conf.d/\nvim mysqld.cnf\n```\n\n找到bind-address    =   127.0.0.1\n\n```//注释掉如下\n#bind-address   =   127.0.0.1\n```\n\n保存退出后，使用如下命令，输入密码后进入mysql\n```\nmysql -u username  -p\n```\n\n为需要远程登录的用户赋予权限\n\n```\nmysql> ALTER USER 'root'@'%' IDENTIFIED WITH mysql_native_password BY '12345678';\nmysql> flush privileges;    // 刷新使设置立即生效\n```\n\n-- 查看权限是否已授予\n\n```\nmysql> SELECT host,user,select_priv,insert_priv,delete_priv,update_priv,drop_priv FROM user;\nmysql>select user,host,authentication_string from mysql.user;\nmysql->exit;  // 退出\nsudo /etc/init.d/mysql restart\n```\n\n\n\n\n\n\n\n","source":"_posts/树莓派安装MySQL8.md","raw":"---\ntitle: 树莓派安装MySQL8.0.25数据库\ndate: 2021-07-27 23:12:15\ncategories: \"树莓派\" #文章分类目錄 可以省略\ntags: \n     - 树莓派 \n     - MySQL8\ndescription: 树莓派安装MySQL8.0.25数据库  #本页的描述 可以省略\n---\n\n\n\n\n## 1.安装  \n安装mysql-server \n\n```bash\nsudo apt install mysql-server\n```\n\n#另外自己看下数据库配置是不是mysql_native_password方式，如果不是就在my.cnf文件中加上。\n\n\n\n```\n#skip-name-resolve   // 禁用DNS查询\n\n[mysqld]\n#skip-grant-tables   // 允许免密登录（去掉前面的#，然后重启Mysql服务后生效）\ndefault_authentication_plugin = mysql_native_password\n```\n\n\n\n## 2 授权\n 免密登录(重置密码遇到ERROR 1045 (28000): Access denied for user 'root'@'localhost' (using passwor:yes)问题)\n文章转载自：https://www.cnblogs.com/gumuzi/p/5711495.html\n一般这个错误是由密码错误引起，解决的办法自然就是重置密码。\n假设我们使用的是root账户。\n1.重置密码的第一步就是跳过MySQL的密码认证过程，方法如下：\n\n```\n#vim /etc/my.cnf           // (注：windows下修改的是my.ini)\n```\n\n在文档内搜索mysqld定位到[mysqld]文本段：\n/mysqld(在vim编辑状态下直接输入该命令可搜索文本内容)\n在[mysqld]后面任意一行添加“skip-grant-tables”用来跳过密码验证的过程，如下图所示：\n\n```\n[mysqld]\nskip-grant-tables\n```\n\n\n保存文档并退出\n\n2.接下来我们需要重启MySQL：\n\n```\n/etc/init.d/mysql restart(有些用户可能需要使用/etc/init.d/mysqld restart)\n```\n\n3.重启之后输入mysql即可进入mysql。 \n\n4.接下来就是用sql来修改root的密码\n进入到终端当中，敲入 mysql -u root -p 命令然后回车，当需要输入密码时，直接按enter键，便可以不用密码登录到数据库当中\n\n```\nmysql> ALTER USER ‘root’@’%’ IDENTIFIED WITH mysql_native_password BY ‘12345678’;\nmysql> flush privileges;\nmysql> quit\n```\n\n注意：如果在执行该步骤的时候出现ERROR 1290 (HY000): The MySQL server is running with the --skip-grant-tables option so it cannot execute this statement 错误。则执行下 flush privileges 命令，再执行该命令即可。\n到这里root账户就已经重置成新的密码了。\n5.编辑my.cnf,去掉刚才添加的内容，然后重启MySQL。大功告成！\n 网上有很多关于这个问题的解决说明，很多刚接触的朋友可能比较迷惑的是在自己的平台上找不到my.cnf或者my.ini文件，如果你是Linux,使用如下方式可以搜索到：\n\n```\nGRANT ALL PRIVILEGES ON *.* TO 'acanx'@'%' WITH GRANT OPTION;\n```\n\n## 3.Ubuntu下配置Mysql允许远程连接\n\n- [Ubuntu下设置mysql允许远程连接](https://blog.csdn.net/u011120720/article/details/51096695?utm_medium=distribute.pc_relevant_t0.none-task-blog-2%7Edefault%7EBlogCommendFromMachineLearnPai2%7Edefault-1.control&depth_1-utm_source=distribute.pc_relevant_t0.none-task-blog-2%7Edefault%7EBlogCommendFromMachineLearnPai2%7Edefault-1.control)\n\n默认情况下，mysql只允许本地连接，如果需要开启远程连接，则需要修改配置。\n\n首先打开配置文件进行修改\n```\ncd /etc/mysql/mysql.conf.d/\nvim mysqld.cnf\n```\n\n找到bind-address    =   127.0.0.1\n\n```//注释掉如下\n#bind-address   =   127.0.0.1\n```\n\n保存退出后，使用如下命令，输入密码后进入mysql\n```\nmysql -u username  -p\n```\n\n为需要远程登录的用户赋予权限\n\n```\nmysql> ALTER USER 'root'@'%' IDENTIFIED WITH mysql_native_password BY '12345678';\nmysql> flush privileges;    // 刷新使设置立即生效\n```\n\n-- 查看权限是否已授予\n\n```\nmysql> SELECT host,user,select_priv,insert_priv,delete_priv,update_priv,drop_priv FROM user;\nmysql>select user,host,authentication_string from mysql.user;\nmysql->exit;  // 退出\nsudo /etc/init.d/mysql restart\n```\n\n\n\n\n\n\n\n","slug":"树莓派安装MySQL8","published":1,"updated":"2025-03-26T06:43:53.005Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cm8pr0j2k0024gskzbk2q20cx","content":"<h2 id=\"1-安装\"><a href=\"#1-安装\" class=\"headerlink\" title=\"1.安装\"></a>1.安装</h2><p>安装mysql-server </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">sudo apt install mysql-server<br></code></pre></td></tr></table></figure>\n\n<p>#另外自己看下数据库配置是不是mysql_native_password方式，如果不是就在my.cnf文件中加上。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs plain\">#skip-name-resolve   &#x2F;&#x2F; 禁用DNS查询<br><br>[mysqld]<br>#skip-grant-tables   &#x2F;&#x2F; 允许免密登录（去掉前面的#，然后重启Mysql服务后生效）<br>default_authentication_plugin &#x3D; mysql_native_password<br></code></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"2-授权\"><a href=\"#2-授权\" class=\"headerlink\" title=\"2 授权\"></a>2 授权</h2><p> 免密登录(重置密码遇到ERROR 1045 (28000): Access denied for user ‘root’@’localhost’ (using passwor:yes)问题)<br>文章转载自：<a href=\"https://www.cnblogs.com/gumuzi/p/5711495.html\">https://www.cnblogs.com/gumuzi/p/5711495.html</a><br>一般这个错误是由密码错误引起，解决的办法自然就是重置密码。<br>假设我们使用的是root账户。<br>1.重置密码的第一步就是跳过MySQL的密码认证过程，方法如下：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs plain\">#vim &#x2F;etc&#x2F;my.cnf           &#x2F;&#x2F; (注：windows下修改的是my.ini)<br></code></pre></td></tr></table></figure>\n\n<p>在文档内搜索mysqld定位到[mysqld]文本段：<br>/mysqld(在vim编辑状态下直接输入该命令可搜索文本内容)<br>在[mysqld]后面任意一行添加“skip-grant-tables”用来跳过密码验证的过程，如下图所示：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs plain\">[mysqld]<br>skip-grant-tables<br></code></pre></td></tr></table></figure>\n\n\n<p>保存文档并退出</p>\n<p>2.接下来我们需要重启MySQL：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs plain\">&#x2F;etc&#x2F;init.d&#x2F;mysql restart(有些用户可能需要使用&#x2F;etc&#x2F;init.d&#x2F;mysqld restart)<br></code></pre></td></tr></table></figure>\n\n<p>3.重启之后输入mysql即可进入mysql。 </p>\n<p>4.接下来就是用sql来修改root的密码<br>进入到终端当中，敲入 mysql -u root -p 命令然后回车，当需要输入密码时，直接按enter键，便可以不用密码登录到数据库当中</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs plain\">mysql&gt; ALTER USER ‘root’@’%’ IDENTIFIED WITH mysql_native_password BY ‘12345678’;<br>mysql&gt; flush privileges;<br>mysql&gt; quit<br></code></pre></td></tr></table></figure>\n\n<p>注意：如果在执行该步骤的时候出现ERROR 1290 (HY000): The MySQL server is running with the –skip-grant-tables option so it cannot execute this statement 错误。则执行下 flush privileges 命令，再执行该命令即可。<br>到这里root账户就已经重置成新的密码了。<br>5.编辑my.cnf,去掉刚才添加的内容，然后重启MySQL。大功告成！<br> 网上有很多关于这个问题的解决说明，很多刚接触的朋友可能比较迷惑的是在自己的平台上找不到my.cnf或者my.ini文件，如果你是Linux,使用如下方式可以搜索到：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs plain\">GRANT ALL PRIVILEGES ON *.* TO &#39;acanx&#39;@&#39;%&#39; WITH GRANT OPTION;<br></code></pre></td></tr></table></figure>\n\n<h2 id=\"3-Ubuntu下配置Mysql允许远程连接\"><a href=\"#3-Ubuntu下配置Mysql允许远程连接\" class=\"headerlink\" title=\"3.Ubuntu下配置Mysql允许远程连接\"></a>3.Ubuntu下配置Mysql允许远程连接</h2><ul>\n<li><a href=\"https://blog.csdn.net/u011120720/article/details/51096695?utm_medium=distribute.pc_relevant_t0.none-task-blog-2~default~BlogCommendFromMachineLearnPai2~default-1.control&depth_1-utm_source=distribute.pc_relevant_t0.none-task-blog-2~default~BlogCommendFromMachineLearnPai2~default-1.control\">Ubuntu下设置mysql允许远程连接</a></li>\n</ul>\n<p>默认情况下，mysql只允许本地连接，如果需要开启远程连接，则需要修改配置。</p>\n<p>首先打开配置文件进行修改</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs plain\">cd &#x2F;etc&#x2F;mysql&#x2F;mysql.conf.d&#x2F;<br>vim mysqld.cnf<br></code></pre></td></tr></table></figure>\n\n<p>找到bind-address    =   127.0.0.1</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs //注释掉如下\">#bind-address   &#x3D;   127.0.0.1<br></code></pre></td></tr></table></figure>\n\n<p>保存退出后，使用如下命令，输入密码后进入mysql</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs plain\">mysql -u username  -p<br></code></pre></td></tr></table></figure>\n\n<p>为需要远程登录的用户赋予权限</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs plain\">mysql&gt; ALTER USER &#39;root&#39;@&#39;%&#39; IDENTIFIED WITH mysql_native_password BY &#39;12345678&#39;;<br>mysql&gt; flush privileges;    &#x2F;&#x2F; 刷新使设置立即生效<br></code></pre></td></tr></table></figure>\n\n<p>– 查看权限是否已授予</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs plain\">mysql&gt; SELECT host,user,select_priv,insert_priv,delete_priv,update_priv,drop_priv FROM user;<br>mysql&gt;select user,host,authentication_string from mysql.user;<br>mysql-&gt;exit;  &#x2F;&#x2F; 退出<br>sudo &#x2F;etc&#x2F;init.d&#x2F;mysql restart<br></code></pre></td></tr></table></figure>\n\n\n\n\n\n\n\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"1-安装\"><a href=\"#1-安装\" class=\"headerlink\" title=\"1.安装\"></a>1.安装</h2><p>安装mysql-server </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">sudo apt install mysql-server<br></code></pre></td></tr></table></figure>\n\n<p>#另外自己看下数据库配置是不是mysql_native_password方式，如果不是就在my.cnf文件中加上。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs plain\">#skip-name-resolve   &#x2F;&#x2F; 禁用DNS查询<br><br>[mysqld]<br>#skip-grant-tables   &#x2F;&#x2F; 允许免密登录（去掉前面的#，然后重启Mysql服务后生效）<br>default_authentication_plugin &#x3D; mysql_native_password<br></code></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"2-授权\"><a href=\"#2-授权\" class=\"headerlink\" title=\"2 授权\"></a>2 授权</h2><p> 免密登录(重置密码遇到ERROR 1045 (28000): Access denied for user ‘root’@’localhost’ (using passwor:yes)问题)<br>文章转载自：<a href=\"https://www.cnblogs.com/gumuzi/p/5711495.html\">https://www.cnblogs.com/gumuzi/p/5711495.html</a><br>一般这个错误是由密码错误引起，解决的办法自然就是重置密码。<br>假设我们使用的是root账户。<br>1.重置密码的第一步就是跳过MySQL的密码认证过程，方法如下：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs plain\">#vim &#x2F;etc&#x2F;my.cnf           &#x2F;&#x2F; (注：windows下修改的是my.ini)<br></code></pre></td></tr></table></figure>\n\n<p>在文档内搜索mysqld定位到[mysqld]文本段：<br>/mysqld(在vim编辑状态下直接输入该命令可搜索文本内容)<br>在[mysqld]后面任意一行添加“skip-grant-tables”用来跳过密码验证的过程，如下图所示：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs plain\">[mysqld]<br>skip-grant-tables<br></code></pre></td></tr></table></figure>\n\n\n<p>保存文档并退出</p>\n<p>2.接下来我们需要重启MySQL：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs plain\">&#x2F;etc&#x2F;init.d&#x2F;mysql restart(有些用户可能需要使用&#x2F;etc&#x2F;init.d&#x2F;mysqld restart)<br></code></pre></td></tr></table></figure>\n\n<p>3.重启之后输入mysql即可进入mysql。 </p>\n<p>4.接下来就是用sql来修改root的密码<br>进入到终端当中，敲入 mysql -u root -p 命令然后回车，当需要输入密码时，直接按enter键，便可以不用密码登录到数据库当中</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs plain\">mysql&gt; ALTER USER ‘root’@’%’ IDENTIFIED WITH mysql_native_password BY ‘12345678’;<br>mysql&gt; flush privileges;<br>mysql&gt; quit<br></code></pre></td></tr></table></figure>\n\n<p>注意：如果在执行该步骤的时候出现ERROR 1290 (HY000): The MySQL server is running with the –skip-grant-tables option so it cannot execute this statement 错误。则执行下 flush privileges 命令，再执行该命令即可。<br>到这里root账户就已经重置成新的密码了。<br>5.编辑my.cnf,去掉刚才添加的内容，然后重启MySQL。大功告成！<br> 网上有很多关于这个问题的解决说明，很多刚接触的朋友可能比较迷惑的是在自己的平台上找不到my.cnf或者my.ini文件，如果你是Linux,使用如下方式可以搜索到：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs plain\">GRANT ALL PRIVILEGES ON *.* TO &#39;acanx&#39;@&#39;%&#39; WITH GRANT OPTION;<br></code></pre></td></tr></table></figure>\n\n<h2 id=\"3-Ubuntu下配置Mysql允许远程连接\"><a href=\"#3-Ubuntu下配置Mysql允许远程连接\" class=\"headerlink\" title=\"3.Ubuntu下配置Mysql允许远程连接\"></a>3.Ubuntu下配置Mysql允许远程连接</h2><ul>\n<li><a href=\"https://blog.csdn.net/u011120720/article/details/51096695?utm_medium=distribute.pc_relevant_t0.none-task-blog-2~default~BlogCommendFromMachineLearnPai2~default-1.control&depth_1-utm_source=distribute.pc_relevant_t0.none-task-blog-2~default~BlogCommendFromMachineLearnPai2~default-1.control\">Ubuntu下设置mysql允许远程连接</a></li>\n</ul>\n<p>默认情况下，mysql只允许本地连接，如果需要开启远程连接，则需要修改配置。</p>\n<p>首先打开配置文件进行修改</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs plain\">cd &#x2F;etc&#x2F;mysql&#x2F;mysql.conf.d&#x2F;<br>vim mysqld.cnf<br></code></pre></td></tr></table></figure>\n\n<p>找到bind-address    =   127.0.0.1</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs //注释掉如下\">#bind-address   &#x3D;   127.0.0.1<br></code></pre></td></tr></table></figure>\n\n<p>保存退出后，使用如下命令，输入密码后进入mysql</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs plain\">mysql -u username  -p<br></code></pre></td></tr></table></figure>\n\n<p>为需要远程登录的用户赋予权限</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs plain\">mysql&gt; ALTER USER &#39;root&#39;@&#39;%&#39; IDENTIFIED WITH mysql_native_password BY &#39;12345678&#39;;<br>mysql&gt; flush privileges;    &#x2F;&#x2F; 刷新使设置立即生效<br></code></pre></td></tr></table></figure>\n\n<p>– 查看权限是否已授予</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs plain\">mysql&gt; SELECT host,user,select_priv,insert_priv,delete_priv,update_priv,drop_priv FROM user;<br>mysql&gt;select user,host,authentication_string from mysql.user;<br>mysql-&gt;exit;  &#x2F;&#x2F; 退出<br>sudo &#x2F;etc&#x2F;init.d&#x2F;mysql restart<br></code></pre></td></tr></table></figure>\n\n\n\n\n\n\n\n"},{"title":"Java运算符","date":"2018-06-27T12:55:48.000Z","description":"Java基本运算符","_content":"\n\n## 链接\n\n### 1.ViBE：\n\n\n### 2.SIFT\n\n\n\n     （2）n=-4，取反 （~-4）\n     -4补码：10000000 00000000 00000000 00000100\n     -4反码：10000000 00000000 00000000 00000011\n     -4原码：11111111 11111111 11111111 11111100\n     对原码取反：00000000 00000000 00000000 00000011  （3）\n     因为是正数，所以补码等于原码等于反码=3，所以~-4=3\n\n\n### Create a new post\n\n``` bash\ndeploy:\n  - type: git\n    repo: # 像这样设置多个 git 仓库，`名称: 地址,分支`，逗号后面没有空格。\n      github: git@github.com:XXXXXX/XXXXXX.git,branch\n      coding: git@git.coding.net:XXXXXXX/XXXXXXX,coding-pages\n    message: Site updated by Hexo at {{ now('YYYY-MM-DD HH:mm:ss') }}.\n  - type: rsync\n    host: YOUR VPS IP # 你的服务器的 IP 地址\n    user: YOUR USERNAME # 你刚刚复制密钥的那个用户\n    root: YOUR DESTINATION # 你想把文件上传到哪里，比如我的是 `~/stackharbor.alynx.xyz/`\n    port: 22 # 这是 ssh 默认的端口，如果你修改了，这里也要改\n    args: --progress # 额外的 rsync 参数，我这里添加了一个进度条参数，你也可以不设置\n    delete: true # 是否删除旧的文件\n    verbose: true # 是否同步时显示详细状态\n    ignore_errors: false # 忽略错误\n```\n\n\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/deployment.html)\n\n\n","source":"_posts/链接.md","raw":"---\ntitle: Java运算符\ndate: 2018-06-27 20:55:48\ncategories: \"Java\" #文章分類目錄 可以省略\ntags: #Java \n     - Java\n     - 运算符\ndescription: Java基本运算符  #你對本頁的描述 可以省略\n---\n\n\n## 链接\n\n### 1.ViBE：\n\n\n### 2.SIFT\n\n\n\n     （2）n=-4，取反 （~-4）\n     -4补码：10000000 00000000 00000000 00000100\n     -4反码：10000000 00000000 00000000 00000011\n     -4原码：11111111 11111111 11111111 11111100\n     对原码取反：00000000 00000000 00000000 00000011  （3）\n     因为是正数，所以补码等于原码等于反码=3，所以~-4=3\n\n\n### Create a new post\n\n``` bash\ndeploy:\n  - type: git\n    repo: # 像这样设置多个 git 仓库，`名称: 地址,分支`，逗号后面没有空格。\n      github: git@github.com:XXXXXX/XXXXXX.git,branch\n      coding: git@git.coding.net:XXXXXXX/XXXXXXX,coding-pages\n    message: Site updated by Hexo at {{ now('YYYY-MM-DD HH:mm:ss') }}.\n  - type: rsync\n    host: YOUR VPS IP # 你的服务器的 IP 地址\n    user: YOUR USERNAME # 你刚刚复制密钥的那个用户\n    root: YOUR DESTINATION # 你想把文件上传到哪里，比如我的是 `~/stackharbor.alynx.xyz/`\n    port: 22 # 这是 ssh 默认的端口，如果你修改了，这里也要改\n    args: --progress # 额外的 rsync 参数，我这里添加了一个进度条参数，你也可以不设置\n    delete: true # 是否删除旧的文件\n    verbose: true # 是否同步时显示详细状态\n    ignore_errors: false # 忽略错误\n```\n\n\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/deployment.html)\n\n\n","slug":"链接","published":1,"updated":"2025-03-26T06:43:53.005Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cm8pr0j2k0027gskz0rjw8zq0","content":"<h2 id=\"链接\"><a href=\"#链接\" class=\"headerlink\" title=\"链接\"></a>链接</h2><h3 id=\"1-ViBE：\"><a href=\"#1-ViBE：\" class=\"headerlink\" title=\"1.ViBE：\"></a>1.ViBE：</h3><h3 id=\"2-SIFT\"><a href=\"#2-SIFT\" class=\"headerlink\" title=\"2.SIFT\"></a>2.SIFT</h3><pre><code> （2）n=-4，取反 （~-4）\n -4补码：10000000 00000000 00000000 00000100\n -4反码：10000000 00000000 00000000 00000011\n -4原码：11111111 11111111 11111111 11111100\n 对原码取反：00000000 00000000 00000000 00000011  （3）\n 因为是正数，所以补码等于原码等于反码=3，所以~-4=3\n</code></pre>\n<h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">deploy:<br>  - <span class=\"hljs-built_in\">type</span>: git<br>    repo: <span class=\"hljs-comment\"># 像这样设置多个 git 仓库，`名称: 地址,分支`，逗号后面没有空格。</span><br>      github: git@github.com:XXXXXX/XXXXXX.git,branch<br>      coding: git@git.coding.net:XXXXXXX/XXXXXXX,coding-pages<br>    message: Site updated by Hexo at &#123;&#123; now(<span class=\"hljs-string\">&#x27;YYYY-MM-DD HH:mm:ss&#x27;</span>) &#125;&#125;.<br>  - <span class=\"hljs-built_in\">type</span>: rsync<br>    host: YOUR VPS IP <span class=\"hljs-comment\"># 你的服务器的 IP 地址</span><br>    user: YOUR USERNAME <span class=\"hljs-comment\"># 你刚刚复制密钥的那个用户</span><br>    root: YOUR DESTINATION <span class=\"hljs-comment\"># 你想把文件上传到哪里，比如我的是 `~/stackharbor.alynx.xyz/`</span><br>    port: 22 <span class=\"hljs-comment\"># 这是 ssh 默认的端口，如果你修改了，这里也要改</span><br>    args: --progress <span class=\"hljs-comment\"># 额外的 rsync 参数，我这里添加了一个进度条参数，你也可以不设置</span><br>    delete: <span class=\"hljs-literal\">true</span> <span class=\"hljs-comment\"># 是否删除旧的文件</span><br>    verbose: <span class=\"hljs-literal\">true</span> <span class=\"hljs-comment\"># 是否同步时显示详细状态</span><br>    ignore_errors: <span class=\"hljs-literal\">false</span> <span class=\"hljs-comment\"># 忽略错误</span><br></code></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">$ hexo server<br></code></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/server.html\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">$ hexo generate<br></code></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">$ hexo deploy<br></code></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/deployment.html\">Deployment</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"链接\"><a href=\"#链接\" class=\"headerlink\" title=\"链接\"></a>链接</h2><h3 id=\"1-ViBE：\"><a href=\"#1-ViBE：\" class=\"headerlink\" title=\"1.ViBE：\"></a>1.ViBE：</h3><h3 id=\"2-SIFT\"><a href=\"#2-SIFT\" class=\"headerlink\" title=\"2.SIFT\"></a>2.SIFT</h3><pre><code> （2）n=-4，取反 （~-4）\n -4补码：10000000 00000000 00000000 00000100\n -4反码：10000000 00000000 00000000 00000011\n -4原码：11111111 11111111 11111111 11111100\n 对原码取反：00000000 00000000 00000000 00000011  （3）\n 因为是正数，所以补码等于原码等于反码=3，所以~-4=3\n</code></pre>\n<h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">deploy:<br>  - <span class=\"hljs-built_in\">type</span>: git<br>    repo: <span class=\"hljs-comment\"># 像这样设置多个 git 仓库，`名称: 地址,分支`，逗号后面没有空格。</span><br>      github: git@github.com:XXXXXX/XXXXXX.git,branch<br>      coding: git@git.coding.net:XXXXXXX/XXXXXXX,coding-pages<br>    message: Site updated by Hexo at &#123;&#123; now(<span class=\"hljs-string\">&#x27;YYYY-MM-DD HH:mm:ss&#x27;</span>) &#125;&#125;.<br>  - <span class=\"hljs-built_in\">type</span>: rsync<br>    host: YOUR VPS IP <span class=\"hljs-comment\"># 你的服务器的 IP 地址</span><br>    user: YOUR USERNAME <span class=\"hljs-comment\"># 你刚刚复制密钥的那个用户</span><br>    root: YOUR DESTINATION <span class=\"hljs-comment\"># 你想把文件上传到哪里，比如我的是 `~/stackharbor.alynx.xyz/`</span><br>    port: 22 <span class=\"hljs-comment\"># 这是 ssh 默认的端口，如果你修改了，这里也要改</span><br>    args: --progress <span class=\"hljs-comment\"># 额外的 rsync 参数，我这里添加了一个进度条参数，你也可以不设置</span><br>    delete: <span class=\"hljs-literal\">true</span> <span class=\"hljs-comment\"># 是否删除旧的文件</span><br>    verbose: <span class=\"hljs-literal\">true</span> <span class=\"hljs-comment\"># 是否同步时显示详细状态</span><br>    ignore_errors: <span class=\"hljs-literal\">false</span> <span class=\"hljs-comment\"># 忽略错误</span><br></code></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">$ hexo server<br></code></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/server.html\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">$ hexo generate<br></code></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">$ hexo deploy<br></code></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/deployment.html\">Deployment</a></p>\n"},{"title":"面朝大海，春暖花开","date":"2018-06-26T06:41:57.000Z","description":"本頁的描述","_content":"\n\n## Quick Start\n\n### Create a new post\n\n``` bash\ndeploy:\n  - type: git\n    repo: # 像这样设置多个 git 仓库，`名称: 地址,分支`，逗号后面没有空格。\n      github: git@github.com:XXXXXX/XXXXXX.git,branch\n      coding: git@git.coding.net:XXXXXXX/XXXXXXX,coding-pages\n    message: Site updated by Hexo at {{ now('YYYY-MM-DD HH:mm:ss') }}.\n  - type: rsync\n    host: YOUR VPS IP # 你的服务器的 IP 地址\n    user: YOUR USERNAME # 你刚刚复制密钥的那个用户\n    root: YOUR DESTINATION # 你想把文件上传到哪里，比如我的是 `~/stackharbor.alynx.xyz/`\n    port: 22 # 这是 ssh 默认的端口，如果你修改了，这里也要改\n    args: --progress # 额外的 rsync 参数，我这里添加了一个进度条参数，你也可以不设置\n    delete: true # 是否删除旧的文件\n    verbose: true # 是否同步时显示详细状态\n    ignore_errors: false # 忽略错误\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/deployment.html)\n\n","source":"_posts/面朝大海，春暖花开.md","raw":"---\ntitle: 面朝大海，春暖花开\ndate: 2018-06-26 14:41:57\ncategories: \"默认\" #文章分類目錄 可以省略\ntags: #博客 \n     - 博客\n     - 哈哈\ndescription: 本頁的描述  #你對本頁的描述 可以省略\n---\n\n\n## Quick Start\n\n### Create a new post\n\n``` bash\ndeploy:\n  - type: git\n    repo: # 像这样设置多个 git 仓库，`名称: 地址,分支`，逗号后面没有空格。\n      github: git@github.com:XXXXXX/XXXXXX.git,branch\n      coding: git@git.coding.net:XXXXXXX/XXXXXXX,coding-pages\n    message: Site updated by Hexo at {{ now('YYYY-MM-DD HH:mm:ss') }}.\n  - type: rsync\n    host: YOUR VPS IP # 你的服务器的 IP 地址\n    user: YOUR USERNAME # 你刚刚复制密钥的那个用户\n    root: YOUR DESTINATION # 你想把文件上传到哪里，比如我的是 `~/stackharbor.alynx.xyz/`\n    port: 22 # 这是 ssh 默认的端口，如果你修改了，这里也要改\n    args: --progress # 额外的 rsync 参数，我这里添加了一个进度条参数，你也可以不设置\n    delete: true # 是否删除旧的文件\n    verbose: true # 是否同步时显示详细状态\n    ignore_errors: false # 忽略错误\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/deployment.html)\n\n","slug":"面朝大海，春暖花开","published":1,"updated":"2025-03-26T06:43:53.005Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cm8pr0j2l002agskz5soz3y9g","content":"<h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">deploy:<br>  - <span class=\"hljs-built_in\">type</span>: git<br>    repo: <span class=\"hljs-comment\"># 像这样设置多个 git 仓库，`名称: 地址,分支`，逗号后面没有空格。</span><br>      github: git@github.com:XXXXXX/XXXXXX.git,branch<br>      coding: git@git.coding.net:XXXXXXX/XXXXXXX,coding-pages<br>    message: Site updated by Hexo at &#123;&#123; now(<span class=\"hljs-string\">&#x27;YYYY-MM-DD HH:mm:ss&#x27;</span>) &#125;&#125;.<br>  - <span class=\"hljs-built_in\">type</span>: rsync<br>    host: YOUR VPS IP <span class=\"hljs-comment\"># 你的服务器的 IP 地址</span><br>    user: YOUR USERNAME <span class=\"hljs-comment\"># 你刚刚复制密钥的那个用户</span><br>    root: YOUR DESTINATION <span class=\"hljs-comment\"># 你想把文件上传到哪里，比如我的是 `~/stackharbor.alynx.xyz/`</span><br>    port: 22 <span class=\"hljs-comment\"># 这是 ssh 默认的端口，如果你修改了，这里也要改</span><br>    args: --progress <span class=\"hljs-comment\"># 额外的 rsync 参数，我这里添加了一个进度条参数，你也可以不设置</span><br>    delete: <span class=\"hljs-literal\">true</span> <span class=\"hljs-comment\"># 是否删除旧的文件</span><br>    verbose: <span class=\"hljs-literal\">true</span> <span class=\"hljs-comment\"># 是否同步时显示详细状态</span><br>    ignore_errors: <span class=\"hljs-literal\">false</span> <span class=\"hljs-comment\"># 忽略错误</span><br></code></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">$ hexo server<br></code></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/server.html\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">$ hexo generate<br></code></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">$ hexo deploy<br></code></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/deployment.html\">Deployment</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">deploy:<br>  - <span class=\"hljs-built_in\">type</span>: git<br>    repo: <span class=\"hljs-comment\"># 像这样设置多个 git 仓库，`名称: 地址,分支`，逗号后面没有空格。</span><br>      github: git@github.com:XXXXXX/XXXXXX.git,branch<br>      coding: git@git.coding.net:XXXXXXX/XXXXXXX,coding-pages<br>    message: Site updated by Hexo at &#123;&#123; now(<span class=\"hljs-string\">&#x27;YYYY-MM-DD HH:mm:ss&#x27;</span>) &#125;&#125;.<br>  - <span class=\"hljs-built_in\">type</span>: rsync<br>    host: YOUR VPS IP <span class=\"hljs-comment\"># 你的服务器的 IP 地址</span><br>    user: YOUR USERNAME <span class=\"hljs-comment\"># 你刚刚复制密钥的那个用户</span><br>    root: YOUR DESTINATION <span class=\"hljs-comment\"># 你想把文件上传到哪里，比如我的是 `~/stackharbor.alynx.xyz/`</span><br>    port: 22 <span class=\"hljs-comment\"># 这是 ssh 默认的端口，如果你修改了，这里也要改</span><br>    args: --progress <span class=\"hljs-comment\"># 额外的 rsync 参数，我这里添加了一个进度条参数，你也可以不设置</span><br>    delete: <span class=\"hljs-literal\">true</span> <span class=\"hljs-comment\"># 是否删除旧的文件</span><br>    verbose: <span class=\"hljs-literal\">true</span> <span class=\"hljs-comment\"># 是否同步时显示详细状态</span><br>    ignore_errors: <span class=\"hljs-literal\">false</span> <span class=\"hljs-comment\"># 忽略错误</span><br></code></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">$ hexo server<br></code></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/server.html\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">$ hexo generate<br></code></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">$ hexo deploy<br></code></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/deployment.html\">Deployment</a></p>\n"},{"title":"Java面试","date":"2018-06-27T12:55:48.000Z","description":"Java面试","_content":"\n\n## 链接\n\n\n\n\n# Java基础：\n\n\n\n# JVM\n\n\n\n# JavaEE\n\nMore info: [链接](https://hexo.io/docs/deployment.html)\n\n\n","source":"_posts/面试-Java.md","raw":"---\ntitle: Java面试\ndate: 2018-06-27 20:55:48\ncategories: \"Java\" #文章分類目錄 可以省略\ntags: #Java \n     - Java\ndescription: Java面试  #你對本頁的描述 可以省略\n---\n\n\n## 链接\n\n\n\n\n# Java基础：\n\n\n\n# JVM\n\n\n\n# JavaEE\n\nMore info: [链接](https://hexo.io/docs/deployment.html)\n\n\n","slug":"面试-Java","published":1,"updated":"2025-03-26T06:43:53.006Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cm8pr0j2l002egskzerck2pap","content":"<h2 id=\"链接\"><a href=\"#链接\" class=\"headerlink\" title=\"链接\"></a>链接</h2><h1 id=\"Java基础：\"><a href=\"#Java基础：\" class=\"headerlink\" title=\"Java基础：\"></a>Java基础：</h1><h1 id=\"JVM\"><a href=\"#JVM\" class=\"headerlink\" title=\"JVM\"></a>JVM</h1><h1 id=\"JavaEE\"><a href=\"#JavaEE\" class=\"headerlink\" title=\"JavaEE\"></a>JavaEE</h1><p>More info: <a href=\"https://hexo.io/docs/deployment.html\">链接</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"链接\"><a href=\"#链接\" class=\"headerlink\" title=\"链接\"></a>链接</h2><h1 id=\"Java基础：\"><a href=\"#Java基础：\" class=\"headerlink\" title=\"Java基础：\"></a>Java基础：</h1><h1 id=\"JVM\"><a href=\"#JVM\" class=\"headerlink\" title=\"JVM\"></a>JVM</h1><h1 id=\"JavaEE\"><a href=\"#JavaEE\" class=\"headerlink\" title=\"JavaEE\"></a>JavaEE</h1><p>More info: <a href=\"https://hexo.io/docs/deployment.html\">链接</a></p>\n"},{"title":"面试-算法与数据结构","date":"2018-06-27T12:55:48.000Z","description":"面试","_content":"\n\n## 链接\n\n\n\n\n# Java基础：\n\n\n\n# JVM\n\n\n\n# JavaEE\n\nMore info: [链接](https://hexo.io/docs/deployment.html)\n\n\n","source":"_posts/面试-算法与数据结构.md","raw":"---\ntitle: 面试-算法与数据结构\ndate: 2018-06-27 20:55:48\ncategories: \"Java\" #文章分類目錄 可以省略\ntags: #Java \n     - Java\ndescription: 面试  #你對本頁的描述 可以省略\n---\n\n\n## 链接\n\n\n\n\n# Java基础：\n\n\n\n# JVM\n\n\n\n# JavaEE\n\nMore info: [链接](https://hexo.io/docs/deployment.html)\n\n\n","slug":"面试-算法与数据结构","published":1,"updated":"2025-03-26T06:43:53.006Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cm8pr0j2m002igskz2jfufvip","content":"<h2 id=\"链接\"><a href=\"#链接\" class=\"headerlink\" title=\"链接\"></a>链接</h2><h1 id=\"Java基础：\"><a href=\"#Java基础：\" class=\"headerlink\" title=\"Java基础：\"></a>Java基础：</h1><h1 id=\"JVM\"><a href=\"#JVM\" class=\"headerlink\" title=\"JVM\"></a>JVM</h1><h1 id=\"JavaEE\"><a href=\"#JavaEE\" class=\"headerlink\" title=\"JavaEE\"></a>JavaEE</h1><p>More info: <a href=\"https://hexo.io/docs/deployment.html\">链接</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"链接\"><a href=\"#链接\" class=\"headerlink\" title=\"链接\"></a>链接</h2><h1 id=\"Java基础：\"><a href=\"#Java基础：\" class=\"headerlink\" title=\"Java基础：\"></a>Java基础：</h1><h1 id=\"JVM\"><a href=\"#JVM\" class=\"headerlink\" title=\"JVM\"></a>JVM</h1><h1 id=\"JavaEE\"><a href=\"#JavaEE\" class=\"headerlink\" title=\"JavaEE\"></a>JavaEE</h1><p>More info: <a href=\"https://hexo.io/docs/deployment.html\">链接</a></p>\n"},{"title":"面试-计算机组成原理","date":"2018-06-27T12:55:48.000Z","description":"计算机组成原理 面试","_content":"\n\n## 链接\n\n\n\n\n# Java基础：\n\n\n\n# JVM\n\n\n\n# JavaEE\n\nMore info: [链接](https://hexo.io/docs/deployment.html)\n\n\n","source":"_posts/面试-计算机组成原理.md","raw":"---\ntitle: 面试-计算机组成原理\ndate: 2018-06-27 20:55:48\ncategories: \"Java\" #文章分類目錄 可以省略\ntags: #Java \n     - Java\ndescription: 计算机组成原理 面试  #你對本頁的描述 可以省略\n---\n\n\n## 链接\n\n\n\n\n# Java基础：\n\n\n\n# JVM\n\n\n\n# JavaEE\n\nMore info: [链接](https://hexo.io/docs/deployment.html)\n\n\n","slug":"面试-计算机组成原理","published":1,"updated":"2025-03-26T06:43:53.006Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cm8pr0j2n002mgskzf8dl5px6","content":"<h2 id=\"链接\"><a href=\"#链接\" class=\"headerlink\" title=\"链接\"></a>链接</h2><h1 id=\"Java基础：\"><a href=\"#Java基础：\" class=\"headerlink\" title=\"Java基础：\"></a>Java基础：</h1><h1 id=\"JVM\"><a href=\"#JVM\" class=\"headerlink\" title=\"JVM\"></a>JVM</h1><h1 id=\"JavaEE\"><a href=\"#JavaEE\" class=\"headerlink\" title=\"JavaEE\"></a>JavaEE</h1><p>More info: <a href=\"https://hexo.io/docs/deployment.html\">链接</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"链接\"><a href=\"#链接\" class=\"headerlink\" title=\"链接\"></a>链接</h2><h1 id=\"Java基础：\"><a href=\"#Java基础：\" class=\"headerlink\" title=\"Java基础：\"></a>Java基础：</h1><h1 id=\"JVM\"><a href=\"#JVM\" class=\"headerlink\" title=\"JVM\"></a>JVM</h1><h1 id=\"JavaEE\"><a href=\"#JavaEE\" class=\"headerlink\" title=\"JavaEE\"></a>JavaEE</h1><p>More info: <a href=\"https://hexo.io/docs/deployment.html\">链接</a></p>\n"},{"title":"面试-操作系统","date":"2018-06-27T12:55:48.000Z","description":"Java面试","_content":"\n\n## 链接\n\n\n\n\n# Java基础：\n\n\n\n# JVM\n\n\n\n# JavaEE\n\nMore info: [链接](https://hexo.io/docs/deployment.html)\n\n\n","source":"_posts/面试-操作系统.md","raw":"---\ntitle: 面试-操作系统\ndate: 2018-06-27 20:55:48\ncategories: \"Java\" #文章分類目錄 可以省略\ntags: #Java \n     - Java\ndescription: Java面试  #你對本頁的描述 可以省略\n---\n\n\n## 链接\n\n\n\n\n# Java基础：\n\n\n\n# JVM\n\n\n\n# JavaEE\n\nMore info: [链接](https://hexo.io/docs/deployment.html)\n\n\n","slug":"面试-操作系统","published":1,"updated":"2025-03-26T06:43:53.006Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cm8pr0j2n002qgskz8wke9jaf","content":"<h2 id=\"链接\"><a href=\"#链接\" class=\"headerlink\" title=\"链接\"></a>链接</h2><h1 id=\"Java基础：\"><a href=\"#Java基础：\" class=\"headerlink\" title=\"Java基础：\"></a>Java基础：</h1><h1 id=\"JVM\"><a href=\"#JVM\" class=\"headerlink\" title=\"JVM\"></a>JVM</h1><h1 id=\"JavaEE\"><a href=\"#JavaEE\" class=\"headerlink\" title=\"JavaEE\"></a>JavaEE</h1><p>More info: <a href=\"https://hexo.io/docs/deployment.html\">链接</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"链接\"><a href=\"#链接\" class=\"headerlink\" title=\"链接\"></a>链接</h2><h1 id=\"Java基础：\"><a href=\"#Java基础：\" class=\"headerlink\" title=\"Java基础：\"></a>Java基础：</h1><h1 id=\"JVM\"><a href=\"#JVM\" class=\"headerlink\" title=\"JVM\"></a>JVM</h1><h1 id=\"JavaEE\"><a href=\"#JavaEE\" class=\"headerlink\" title=\"JavaEE\"></a>JavaEE</h1><p>More info: <a href=\"https://hexo.io/docs/deployment.html\">链接</a></p>\n"},{"title":"面试-计算机网络","date":"2018-06-27T12:55:48.000Z","description":"Java面试","_content":"\n\n## 链接\n\n\n\n\n# Java基础：\n\n\n\n# JVM\n\n\n\n# JavaEE\n\nMore info: [链接](https://hexo.io/docs/deployment.html)\n\n\n","source":"_posts/面试-计算机网络.md","raw":"---\ntitle: 面试-计算机网络\ndate: 2018-06-27 20:55:48\ncategories: \"Java\" #文章分類目錄 可以省略\ntags: #Java \n     - Java\ndescription: Java面试  #你對本頁的描述 可以省略\n---\n\n\n## 链接\n\n\n\n\n# Java基础：\n\n\n\n# JVM\n\n\n\n# JavaEE\n\nMore info: [链接](https://hexo.io/docs/deployment.html)\n\n\n","slug":"面试-计算机网络","published":1,"updated":"2025-03-26T06:43:53.006Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cm8pr0j2o002ugskzel191bwi","content":"<h2 id=\"链接\"><a href=\"#链接\" class=\"headerlink\" title=\"链接\"></a>链接</h2><h1 id=\"Java基础：\"><a href=\"#Java基础：\" class=\"headerlink\" title=\"Java基础：\"></a>Java基础：</h1><h1 id=\"JVM\"><a href=\"#JVM\" class=\"headerlink\" title=\"JVM\"></a>JVM</h1><h1 id=\"JavaEE\"><a href=\"#JavaEE\" class=\"headerlink\" title=\"JavaEE\"></a>JavaEE</h1><p>More info: <a href=\"https://hexo.io/docs/deployment.html\">链接</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"链接\"><a href=\"#链接\" class=\"headerlink\" title=\"链接\"></a>链接</h2><h1 id=\"Java基础：\"><a href=\"#Java基础：\" class=\"headerlink\" title=\"Java基础：\"></a>Java基础：</h1><h1 id=\"JVM\"><a href=\"#JVM\" class=\"headerlink\" title=\"JVM\"></a>JVM</h1><h1 id=\"JavaEE\"><a href=\"#JavaEE\" class=\"headerlink\" title=\"JavaEE\"></a>JavaEE</h1><p>More info: <a href=\"https://hexo.io/docs/deployment.html\">链接</a></p>\n"}],"PostAsset":[],"PostCategory":[{"post_id":"cm8pr0j220001gskzhy5qdz6c","category_id":"cm8pr0j250004gskz7l8y7pd9","_id":"cm8pr0j29000ggskzgv4p56x2"},{"post_id":"cm8pr0j240003gskz6gjf3ngv","category_id":"cm8pr0j28000agskzdjje6l6e","_id":"cm8pr0j2a000ngskz6kqt7sjz"},{"post_id":"cm8pr0j2a000kgskz3p65747t","category_id":"cm8pr0j29000hgskz71cn5znr","_id":"cm8pr0j2c000ugskz6xoz97ql"},{"post_id":"cm8pr0j260007gskz9l1r12mv","category_id":"cm8pr0j29000hgskz71cn5znr","_id":"cm8pr0j2d000zgskz4uvm29hv"},{"post_id":"cm8pr0j2a000mgskzetap93fp","category_id":"cm8pr0j29000hgskz71cn5znr","_id":"cm8pr0j2e0012gskz0smpfr2n"},{"post_id":"cm8pr0j2b000rgskz2ley4nvj","category_id":"cm8pr0j29000hgskz71cn5znr","_id":"cm8pr0j2e0017gskz7hqv55hd"},{"post_id":"cm8pr0j270008gskz0c1k6myz","category_id":"cm8pr0j29000hgskz71cn5znr","_id":"cm8pr0j2f001agskz0v0z5n40"},{"post_id":"cm8pr0j2c000tgskza0guf3x3","category_id":"cm8pr0j29000hgskz71cn5znr","_id":"cm8pr0j2g001egskz5lrecv57"},{"post_id":"cm8pr0j2d000ygskzg0p9au61","category_id":"cm8pr0j28000agskzdjje6l6e","_id":"cm8pr0j2g001igskzggi2dbkf"},{"post_id":"cm8pr0j270009gskze3t4dp7m","category_id":"cm8pr0j29000hgskz71cn5znr","_id":"cm8pr0j2h001mgskzdqq7g1dy"},{"post_id":"cm8pr0j2e0016gskz00usag16","category_id":"cm8pr0j29000hgskz71cn5znr","_id":"cm8pr0j2h001pgskzbhbzapf8"},{"post_id":"cm8pr0j28000dgskz4ec1eyvr","category_id":"cm8pr0j29000hgskz71cn5znr","_id":"cm8pr0j2i001tgskzhog3csve"},{"post_id":"cm8pr0j29000fgskzgbau80lc","category_id":"cm8pr0j29000hgskz71cn5znr","_id":"cm8pr0j2j001xgskz2juld70n"},{"post_id":"cm8pr0j2d0011gskz8szvhkmo","category_id":"cm8pr0j2g001jgskzcn7y5dyz","_id":"cm8pr0j2j001zgskzbvq744in"},{"post_id":"cm8pr0j2h001ogskz6rv52158","category_id":"cm8pr0j28000agskzdjje6l6e","_id":"cm8pr0j2k0023gskz62haeuim"},{"post_id":"cm8pr0j2h001sgskzdo5q5hzx","category_id":"cm8pr0j28000agskzdjje6l6e","_id":"cm8pr0j2k0025gskz9wu843n8"},{"post_id":"cm8pr0j2i001wgskz88ava58b","category_id":"cm8pr0j28000agskzdjje6l6e","_id":"cm8pr0j2k0028gskz6podh28g"},{"post_id":"cm8pr0j2f0019gskz1tka5iw3","category_id":"cm8pr0j2h001rgskz38h2hrhs","_id":"cm8pr0j2l002bgskz65x5cgtx"},{"post_id":"cm8pr0j2f001dgskz9to00nud","category_id":"cm8pr0j2j0020gskz90po7zwa","_id":"cm8pr0j2m002fgskzh7134es5"},{"post_id":"cm8pr0j2k0027gskz0rjw8zq0","category_id":"cm8pr0j29000hgskz71cn5znr","_id":"cm8pr0j2m002jgskz7rmw9hsw"},{"post_id":"cm8pr0j2g001hgskzbuwo60ca","category_id":"cm8pr0j2j0020gskz90po7zwa","_id":"cm8pr0j2n002ngskz3kqi0zw1"},{"post_id":"cm8pr0j2l002agskz5soz3y9g","category_id":"cm8pr0j28000agskzdjje6l6e","_id":"cm8pr0j2n002rgskz3gyrb87i"},{"post_id":"cm8pr0j2l002egskzerck2pap","category_id":"cm8pr0j29000hgskz71cn5znr","_id":"cm8pr0j2o002vgskzeorw1cos"},{"post_id":"cm8pr0j2g001lgskz9iuzbrjz","category_id":"cm8pr0j2l002cgskz02yo4bzg","_id":"cm8pr0j2o002ygskz9jnydrvq"},{"post_id":"cm8pr0j2m002igskz2jfufvip","category_id":"cm8pr0j29000hgskz71cn5znr","_id":"cm8pr0j2o0031gskz2v0z08nv"},{"post_id":"cm8pr0j2n002mgskzf8dl5px6","category_id":"cm8pr0j29000hgskz71cn5znr","_id":"cm8pr0j2p0033gskzefj84wb0"},{"post_id":"cm8pr0j2j001ygskz5id4hg53","category_id":"cm8pr0j2j0020gskz90po7zwa","_id":"cm8pr0j2p0036gskz59xm4hap"},{"post_id":"cm8pr0j2n002qgskz8wke9jaf","category_id":"cm8pr0j29000hgskz71cn5znr","_id":"cm8pr0j2p0038gskzcv0337zi"},{"post_id":"cm8pr0j2o002ugskzel191bwi","category_id":"cm8pr0j29000hgskz71cn5znr","_id":"cm8pr0j2p003bgskzhbgs7h6z"},{"post_id":"cm8pr0j2j0022gskz7yc09dmc","category_id":"cm8pr0j2o002sgskzhs9r3ona","_id":"cm8pr0j2p003cgskzh48h7a1d"},{"post_id":"cm8pr0j2k0024gskzbk2q20cx","category_id":"cm8pr0j2o002sgskzhs9r3ona","_id":"cm8pr0j2p003egskzev953gzn"}],"PostTag":[{"post_id":"cm8pr0j270008gskz0c1k6myz","tag_id":"cm8pr0j260005gskzbilp4rv1","_id":"cm8pr0j28000cgskz556whggc"},{"post_id":"cm8pr0j270009gskze3t4dp7m","tag_id":"cm8pr0j260005gskzbilp4rv1","_id":"cm8pr0j29000egskz194j28cr"},{"post_id":"cm8pr0j28000dgskz4ec1eyvr","tag_id":"cm8pr0j260005gskzbilp4rv1","_id":"cm8pr0j29000jgskzax1u10e1"},{"post_id":"cm8pr0j29000fgskzgbau80lc","tag_id":"cm8pr0j260005gskzbilp4rv1","_id":"cm8pr0j2a000lgskz4mab7cau"},{"post_id":"cm8pr0j2a000kgskz3p65747t","tag_id":"cm8pr0j260005gskzbilp4rv1","_id":"cm8pr0j2b000qgskz5ffqfllp"},{"post_id":"cm8pr0j220001gskzhy5qdz6c","tag_id":"cm8pr0j260005gskzbilp4rv1","_id":"cm8pr0j2c000sgskz5h520m2j"},{"post_id":"cm8pr0j220001gskzhy5qdz6c","tag_id":"cm8pr0j28000bgskz94ob6tv5","_id":"cm8pr0j2d000wgskz9yvy5l8u"},{"post_id":"cm8pr0j220001gskzhy5qdz6c","tag_id":"cm8pr0j29000igskz00sw73ij","_id":"cm8pr0j2d0010gskz21tw641y"},{"post_id":"cm8pr0j2b000rgskz2ley4nvj","tag_id":"cm8pr0j260005gskzbilp4rv1","_id":"cm8pr0j2e0014gskzd2572xj9"},{"post_id":"cm8pr0j240003gskz6gjf3ngv","tag_id":"cm8pr0j2b000pgskz33dygwy5","_id":"cm8pr0j2f0018gskza91ndifk"},{"post_id":"cm8pr0j260007gskz9l1r12mv","tag_id":"cm8pr0j260005gskzbilp4rv1","_id":"cm8pr0j2f001cgskz21joed28"},{"post_id":"cm8pr0j2a000mgskzetap93fp","tag_id":"cm8pr0j260005gskzbilp4rv1","_id":"cm8pr0j2g001ggskzawx6hyik"},{"post_id":"cm8pr0j2a000mgskzetap93fp","tag_id":"cm8pr0j2e0015gskzglrq31ea","_id":"cm8pr0j2g001kgskzh29a37oa"},{"post_id":"cm8pr0j2c000tgskza0guf3x3","tag_id":"cm8pr0j260005gskzbilp4rv1","_id":"cm8pr0j2h001qgskzbt8l8a5c"},{"post_id":"cm8pr0j2c000tgskza0guf3x3","tag_id":"cm8pr0j2g001fgskz5fak9dbv","_id":"cm8pr0j2i001ugskzeseudwk8"},{"post_id":"cm8pr0j2k0027gskz0rjw8zq0","tag_id":"cm8pr0j260005gskzbilp4rv1","_id":"cm8pr0j2l002dgskzatg67xdb"},{"post_id":"cm8pr0j2k0027gskz0rjw8zq0","tag_id":"cm8pr0j2e0015gskzglrq31ea","_id":"cm8pr0j2m002hgskz6zbhgmx3"},{"post_id":"cm8pr0j2d000ygskzg0p9au61","tag_id":"cm8pr0j2h001ngskzaltth1qs","_id":"cm8pr0j2m002lgskz028odwcw"},{"post_id":"cm8pr0j2d000ygskzg0p9au61","tag_id":"cm8pr0j2i001vgskz93q56zx6","_id":"cm8pr0j2n002pgskzdyjt4jn3"},{"post_id":"cm8pr0j2d000ygskzg0p9au61","tag_id":"cm8pr0j2j0021gskz313r7ofs","_id":"cm8pr0j2o002tgskz9gv1euf1"},{"post_id":"cm8pr0j2d000ygskzg0p9au61","tag_id":"cm8pr0j2k0029gskz3o35dj70","_id":"cm8pr0j2o002wgskz1fig3wrf"},{"post_id":"cm8pr0j2l002egskzerck2pap","tag_id":"cm8pr0j260005gskzbilp4rv1","_id":"cm8pr0j2o002zgskz2hq3428t"},{"post_id":"cm8pr0j2m002igskz2jfufvip","tag_id":"cm8pr0j260005gskzbilp4rv1","_id":"cm8pr0j2p0032gskze5gmc4lj"},{"post_id":"cm8pr0j2n002mgskzf8dl5px6","tag_id":"cm8pr0j260005gskzbilp4rv1","_id":"cm8pr0j2p0035gskzbzbqd2qk"},{"post_id":"cm8pr0j2n002qgskz8wke9jaf","tag_id":"cm8pr0j260005gskzbilp4rv1","_id":"cm8pr0j2p0037gskzac2phfjt"},{"post_id":"cm8pr0j2o002ugskzel191bwi","tag_id":"cm8pr0j260005gskzbilp4rv1","_id":"cm8pr0j2p003agskzdqca4daa"},{"post_id":"cm8pr0j2d0011gskz8szvhkmo","tag_id":"cm8pr0j2m002ggskz44td4ijq","_id":"cm8pr0j2q003jgskz32x20dc4"},{"post_id":"cm8pr0j2d0011gskz8szvhkmo","tag_id":"cm8pr0j2n002ogskzab5n87uw","_id":"cm8pr0j2q003kgskz6z96bqg4"},{"post_id":"cm8pr0j2d0011gskz8szvhkmo","tag_id":"cm8pr0j2o002xgskz9i16ca14","_id":"cm8pr0j2q003mgskza1zte35t"},{"post_id":"cm8pr0j2d0011gskz8szvhkmo","tag_id":"cm8pr0j2p0034gskz4sy1byt7","_id":"cm8pr0j2q003ngskzbdg3d87g"},{"post_id":"cm8pr0j2d0011gskz8szvhkmo","tag_id":"cm8pr0j2p0039gskz4phe4mm9","_id":"cm8pr0j2q003pgskz0i8z0qk5"},{"post_id":"cm8pr0j2d0011gskz8szvhkmo","tag_id":"cm8pr0j2p003dgskz05nv6mi4","_id":"cm8pr0j2q003qgskz3hm57ou5"},{"post_id":"cm8pr0j2d0011gskz8szvhkmo","tag_id":"cm8pr0j2p003fgskzat7q25z8","_id":"cm8pr0j2q003sgskz4qsk0ot1"},{"post_id":"cm8pr0j2d0011gskz8szvhkmo","tag_id":"cm8pr0j2p003ggskz6dqjhsyw","_id":"cm8pr0j2q003tgskz532c1whs"},{"post_id":"cm8pr0j2d0011gskz8szvhkmo","tag_id":"cm8pr0j2p003hgskzdrr8aqcb","_id":"cm8pr0j2r003vgskz0f9l79am"},{"post_id":"cm8pr0j2e0016gskz00usag16","tag_id":"cm8pr0j260005gskzbilp4rv1","_id":"cm8pr0j2r003wgskzfouv9vpe"},{"post_id":"cm8pr0j2e0016gskz00usag16","tag_id":"cm8pr0j2e0015gskzglrq31ea","_id":"cm8pr0j2r003xgskzd3o59fab"},{"post_id":"cm8pr0j2f0019gskz1tka5iw3","tag_id":"cm8pr0j2q003lgskz4zuhfj62","_id":"cm8pr0j2r003zgskz9attbg5i"},{"post_id":"cm8pr0j2f0019gskz1tka5iw3","tag_id":"cm8pr0j2q003ogskz1xt68k7p","_id":"cm8pr0j2r0040gskz7ae52g0m"},{"post_id":"cm8pr0j2f0019gskz1tka5iw3","tag_id":"cm8pr0j2q003rgskzgt87avuz","_id":"cm8pr0j2r0042gskz734cep1i"},{"post_id":"cm8pr0j2f0019gskz1tka5iw3","tag_id":"cm8pr0j2q003ugskz30f946b6","_id":"cm8pr0j2r0043gskz66w3aq5w"},{"post_id":"cm8pr0j2f001dgskz9to00nud","tag_id":"cm8pr0j2r003ygskzh8egh63b","_id":"cm8pr0j2r0046gskz7gz03dw8"},{"post_id":"cm8pr0j2f001dgskz9to00nud","tag_id":"cm8pr0j2r0041gskz6e856r8c","_id":"cm8pr0j2r0047gskzg3jd9v24"},{"post_id":"cm8pr0j2f001dgskz9to00nud","tag_id":"cm8pr0j2r0044gskz9lba4j31","_id":"cm8pr0j2s0049gskz2p1nggai"},{"post_id":"cm8pr0j2g001hgskzbuwo60ca","tag_id":"cm8pr0j2r0045gskzgrgp3w8g","_id":"cm8pr0j2s004cgskz14xqfora"},{"post_id":"cm8pr0j2g001hgskzbuwo60ca","tag_id":"cm8pr0j2r0041gskz6e856r8c","_id":"cm8pr0j2s004dgskzgys5cxhw"},{"post_id":"cm8pr0j2g001hgskzbuwo60ca","tag_id":"cm8pr0j2r0044gskz9lba4j31","_id":"cm8pr0j2s004fgskz1812ezsr"},{"post_id":"cm8pr0j2g001lgskz9iuzbrjz","tag_id":"cm8pr0j2s004bgskz3ywb6upu","_id":"cm8pr0j2t004igskz4zw201mn"},{"post_id":"cm8pr0j2g001lgskz9iuzbrjz","tag_id":"cm8pr0j2s004egskz3j8r1o4c","_id":"cm8pr0j2t004jgskzcfqjdewm"},{"post_id":"cm8pr0j2g001lgskz9iuzbrjz","tag_id":"cm8pr0j2s004ggskz4tvdclbn","_id":"cm8pr0j2t004lgskz6p2e4owz"},{"post_id":"cm8pr0j2h001ogskz6rv52158","tag_id":"cm8pr0j2s004hgskz9khv8cu0","_id":"cm8pr0j2t004ngskzgivn452s"},{"post_id":"cm8pr0j2h001ogskz6rv52158","tag_id":"cm8pr0j2t004kgskz00iehdim","_id":"cm8pr0j2t004ogskzbhnk18ib"},{"post_id":"cm8pr0j2h001sgskzdo5q5hzx","tag_id":"cm8pr0j2s004hgskz9khv8cu0","_id":"cm8pr0j2u004tgskzfku54hnz"},{"post_id":"cm8pr0j2h001sgskzdo5q5hzx","tag_id":"cm8pr0j2t004kgskz00iehdim","_id":"cm8pr0j2u004ugskzckap8a8d"},{"post_id":"cm8pr0j2h001sgskzdo5q5hzx","tag_id":"cm8pr0j2r0041gskz6e856r8c","_id":"cm8pr0j2u004wgskzcgug9zzi"},{"post_id":"cm8pr0j2h001sgskzdo5q5hzx","tag_id":"cm8pr0j2t004rgskzdws0cxcd","_id":"cm8pr0j2u004xgskz130i9sud"},{"post_id":"cm8pr0j2i001wgskz88ava58b","tag_id":"cm8pr0j2s004hgskz9khv8cu0","_id":"cm8pr0j2u0051gskzcc3m877t"},{"post_id":"cm8pr0j2i001wgskz88ava58b","tag_id":"cm8pr0j2u004vgskzb82u17cb","_id":"cm8pr0j2u0052gskzb0l95jva"},{"post_id":"cm8pr0j2i001wgskz88ava58b","tag_id":"cm8pr0j260005gskzbilp4rv1","_id":"cm8pr0j2u0054gskz8m2q0b0u"},{"post_id":"cm8pr0j2i001wgskz88ava58b","tag_id":"cm8pr0j2u004ygskz71pehcyj","_id":"cm8pr0j2u0055gskzgu12hskh"},{"post_id":"cm8pr0j2i001wgskz88ava58b","tag_id":"cm8pr0j2u004zgskzac0y48pm","_id":"cm8pr0j2u0057gskz6gvhcblx"},{"post_id":"cm8pr0j2j001ygskz5id4hg53","tag_id":"cm8pr0j2r0041gskz6e856r8c","_id":"cm8pr0j2v0059gskzae7h7fzv"},{"post_id":"cm8pr0j2j001ygskz5id4hg53","tag_id":"cm8pr0j2u0053gskzhj8v6h9q","_id":"cm8pr0j2v005agskz5uh0fp06"},{"post_id":"cm8pr0j2j001ygskz5id4hg53","tag_id":"cm8pr0j2u0056gskz949m12ao","_id":"cm8pr0j2v005cgskzegd8hag7"},{"post_id":"cm8pr0j2j0022gskz7yc09dmc","tag_id":"cm8pr0j2v0058gskzals60mlu","_id":"cm8pr0j2v005dgskzag79939n"},{"post_id":"cm8pr0j2k0024gskzbk2q20cx","tag_id":"cm8pr0j2v0058gskzals60mlu","_id":"cm8pr0j2v005ggskz8cjl4cwr"},{"post_id":"cm8pr0j2k0024gskzbk2q20cx","tag_id":"cm8pr0j2v005egskz6dehbl9e","_id":"cm8pr0j2v005hgskz5h7k6p9f"},{"post_id":"cm8pr0j2l002agskz5soz3y9g","tag_id":"cm8pr0j2u004ygskz71pehcyj","_id":"cm8pr0j2w005jgskzf1sn7ocu"},{"post_id":"cm8pr0j2l002agskz5soz3y9g","tag_id":"cm8pr0j2v005igskzas9fc0g1","_id":"cm8pr0j2w005kgskz34umchz0"}],"Tag":[{"name":"Java","_id":"cm8pr0j260005gskzbilp4rv1"},{"name":"ElasticSearch","_id":"cm8pr0j28000bgskz94ob6tv5"},{"name":"Elasticsearch-Head","_id":"cm8pr0j29000igskz00sw73ij"},{"name":"默认","_id":"cm8pr0j2b000pgskz33dygwy5"},{"name":"运算符","_id":"cm8pr0j2e0015gskzglrq31ea"},{"name":"设计模式","_id":"cm8pr0j2g001fgskz5fak9dbv"},{"name":"MyBatis","_id":"cm8pr0j2h001ngskzaltth1qs"},{"name":"JavaBean","_id":"cm8pr0j2i001vgskz93q56zx6"},{"name":"MySQL","_id":"cm8pr0j2j0021gskz313r7ofs"},{"name":"自动映射","_id":"cm8pr0j2k0029gskz3o35dj70"},{"name":"Kubernetes","_id":"cm8pr0j2m002ggskz44td4ijq"},{"name":"Ubuntu","_id":"cm8pr0j2n002ogskzab5n87uw"},{"name":"containerd","_id":"cm8pr0j2o002xgskz9i16ca14"},{"name":"Calico","_id":"cm8pr0j2p0034gskz4sy1byt7"},{"name":"Helm","_id":"cm8pr0j2p0039gskz4phe4mm9"},{"name":"KubernetesDashboard","_id":"cm8pr0j2p003dgskz05nv6mi4"},{"name":"云原生","_id":"cm8pr0j2p003fgskzat7q25z8"},{"name":"K8S","_id":"cm8pr0j2p003ggskz6dqjhsyw"},{"name":"PVE","_id":"cm8pr0j2p003hgskzdrr8aqcb"},{"name":"Spring","_id":"cm8pr0j2q003lgskz4zuhfj62"},{"name":"IOC","_id":"cm8pr0j2q003ogskz1xt68k7p"},{"name":"BeanFactory","_id":"cm8pr0j2q003rgskzgt87avuz"},{"name":"ApplicationContext","_id":"cm8pr0j2q003ugskz30f946b6"},{"name":"Hexo","_id":"cm8pr0j2r003ygskzh8egh63b"},{"name":"Markdown","_id":"cm8pr0j2r0041gskz6e856r8c"},{"name":"静态站点生成器","_id":"cm8pr0j2r0044gskz9lba4j31"},{"name":"MkDocs","_id":"cm8pr0j2r0045gskzgrgp3w8g"},{"name":"Maven","_id":"cm8pr0j2s004bgskz3ywb6upu"},{"name":"Sonatype","_id":"cm8pr0j2s004egskz3j8r1o4c"},{"name":"JAR","_id":"cm8pr0j2s004ggskz4tvdclbn"},{"name":"文章","_id":"cm8pr0j2s004hgskz9khv8cu0"},{"name":"样式","_id":"cm8pr0j2t004kgskz00iehdim"},{"name":"HTML","_id":"cm8pr0j2t004rgskzdws0cxcd"},{"name":"汇总","_id":"cm8pr0j2u004vgskzb82u17cb"},{"name":"博客","_id":"cm8pr0j2u004ygskz71pehcyj"},{"name":"技术","_id":"cm8pr0j2u004zgskzac0y48pm"},{"name":"前端","_id":"cm8pr0j2u0053gskzhj8v6h9q"},{"name":"JS","_id":"cm8pr0j2u0056gskz949m12ao"},{"name":"树莓派","_id":"cm8pr0j2v0058gskzals60mlu"},{"name":"MySQL8","_id":"cm8pr0j2v005egskz6dehbl9e"},{"name":"哈哈","_id":"cm8pr0j2v005igskzas9fc0g1"}]}}